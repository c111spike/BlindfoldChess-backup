var LN=Object.defineProperty;var IN=(e,t,n)=>t in e?LN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ct=(e,t,n)=>IN(e,typeof t!="symbol"?t+"":t,n);function $N(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function y0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w0={exports:{}},Su={},b0={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hl=Symbol.for("react.element"),ON=Symbol.for("react.portal"),DN=Symbol.for("react.fragment"),BN=Symbol.for("react.strict_mode"),FN=Symbol.for("react.profiler"),zN=Symbol.for("react.provider"),VN=Symbol.for("react.context"),qN=Symbol.for("react.forward_ref"),WN=Symbol.for("react.suspense"),UN=Symbol.for("react.memo"),HN=Symbol.for("react.lazy"),Yp=Symbol.iterator;function KN(e){return e===null||typeof e!="object"?null:(e=Yp&&e[Yp]||e["@@iterator"],typeof e=="function"?e:null)}var S0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N0=Object.assign,k0={};function Ki(e,t,n){this.props=e,this.context=t,this.refs=k0,this.updater=n||S0}Ki.prototype.isReactComponent={};Ki.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ki.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function j0(){}j0.prototype=Ki.prototype;function Qh(e,t,n){this.props=e,this.context=t,this.refs=k0,this.updater=n||S0}var Yh=Qh.prototype=new j0;Yh.constructor=Qh;N0(Yh,Ki.prototype);Yh.isPureReactComponent=!0;var Xp=Array.isArray,C0=Object.prototype.hasOwnProperty,Xh={current:null},E0={key:!0,ref:!0,__self:!0,__source:!0};function P0(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)C0.call(t,r)&&!E0.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:hl,type:e,key:i,ref:a,props:s,_owner:Xh.current}}function GN(e,t){return{$$typeof:hl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Zh(e){return typeof e=="object"&&e!==null&&e.$$typeof===hl}function QN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Zp=/\/+/g;function md(e,t){return typeof e=="object"&&e!==null&&e.key!=null?QN(""+e.key):t.toString(36)}function hc(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case hl:case ON:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+md(a,0):r,Xp(s)?(n="",e!=null&&(n=e.replace(Zp,"$&/")+"/"),hc(s,t,n,"",function(u){return u})):s!=null&&(Zh(s)&&(s=GN(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Zp,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Xp(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+md(i,l);a+=hc(i,t,n,c,s)}else if(c=KN(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+md(i,l++),a+=hc(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Il(e,t,n){if(e==null)return e;var r=[],s=0;return hc(e,r,"","",function(i){return t.call(n,i,s++)}),r}function YN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var In={current:null},mc={transition:null},XN={ReactCurrentDispatcher:In,ReactCurrentBatchConfig:mc,ReactCurrentOwner:Xh};function T0(){throw Error("act(...) is not supported in production builds of React.")}tt.Children={map:Il,forEach:function(e,t,n){Il(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Il(e,function(){t++}),t},toArray:function(e){return Il(e,function(t){return t})||[]},only:function(e){if(!Zh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};tt.Component=Ki;tt.Fragment=DN;tt.Profiler=FN;tt.PureComponent=Qh;tt.StrictMode=BN;tt.Suspense=WN;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XN;tt.act=T0;tt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=N0({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Xh.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)C0.call(t,c)&&!E0.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:hl,type:e.type,key:s,ref:i,props:r,_owner:a}};tt.createContext=function(e){return e={$$typeof:VN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:zN,_context:e},e.Consumer=e};tt.createElement=P0;tt.createFactory=function(e){var t=P0.bind(null,e);return t.type=e,t};tt.createRef=function(){return{current:null}};tt.forwardRef=function(e){return{$$typeof:qN,render:e}};tt.isValidElement=Zh;tt.lazy=function(e){return{$$typeof:HN,_payload:{_status:-1,_result:e},_init:YN}};tt.memo=function(e,t){return{$$typeof:UN,type:e,compare:t===void 0?null:t}};tt.startTransition=function(e){var t=mc.transition;mc.transition={};try{e()}finally{mc.transition=t}};tt.unstable_act=T0;tt.useCallback=function(e,t){return In.current.useCallback(e,t)};tt.useContext=function(e){return In.current.useContext(e)};tt.useDebugValue=function(){};tt.useDeferredValue=function(e){return In.current.useDeferredValue(e)};tt.useEffect=function(e,t){return In.current.useEffect(e,t)};tt.useId=function(){return In.current.useId()};tt.useImperativeHandle=function(e,t,n){return In.current.useImperativeHandle(e,t,n)};tt.useInsertionEffect=function(e,t){return In.current.useInsertionEffect(e,t)};tt.useLayoutEffect=function(e,t){return In.current.useLayoutEffect(e,t)};tt.useMemo=function(e,t){return In.current.useMemo(e,t)};tt.useReducer=function(e,t,n){return In.current.useReducer(e,t,n)};tt.useRef=function(e){return In.current.useRef(e)};tt.useState=function(e){return In.current.useState(e)};tt.useSyncExternalStore=function(e,t,n){return In.current.useSyncExternalStore(e,t,n)};tt.useTransition=function(){return In.current.useTransition()};tt.version="18.3.1";b0.exports=tt;var d=b0.exports;const Rn=y0(d),R0=$N({__proto__:null,default:Rn},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZN=d,JN=Symbol.for("react.element"),ek=Symbol.for("react.fragment"),tk=Object.prototype.hasOwnProperty,nk=ZN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rk={key:!0,ref:!0,__self:!0,__source:!0};function M0(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)tk.call(t,r)&&!rk.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:JN,type:e,key:i,ref:a,props:s,_owner:nk.current}}Su.Fragment=ek;Su.jsx=M0;Su.jsxs=M0;w0.exports=Su;var o=w0.exports,_0={exports:{}},sr={},A0={exports:{}},L0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,$){var V=T.length;T.push($);e:for(;0<V;){var G=V-1>>>1,de=T[G];if(0<s(de,$))T[G]=$,T[V]=de,V=G;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var $=T[0],V=T.pop();if(V!==$){T[0]=V;e:for(var G=0,de=T.length,ne=de>>>1;G<ne;){var ve=2*(G+1)-1,fe=T[ve],A=ve+1,B=T[A];if(0>s(fe,V))A<de&&0>s(B,fe)?(T[G]=B,T[A]=V,G=A):(T[G]=fe,T[ve]=V,G=ve);else if(A<de&&0>s(B,V))T[G]=B,T[A]=V,G=A;else break e}}return $}function s(T,$){var V=T.sortIndex-$.sortIndex;return V!==0?V:T.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],f=1,m=null,h=3,y=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(T){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=T)r(u),$.sortIndex=$.expirationTime,t(c,$);else break;$=n(u)}}function S(T){if(g=!1,b(T),!p)if(n(c)!==null)p=!0,Q(N);else{var $=n(u);$!==null&&Y(S,$.startTime-T)}}function N(T,$){p=!1,g&&(g=!1,x(C),C=-1),y=!0;var V=h;try{for(b($),m=n(c);m!==null&&(!(m.expirationTime>$)||T&&!D());){var G=m.callback;if(typeof G=="function"){m.callback=null,h=m.priorityLevel;var de=G(m.expirationTime<=$);$=e.unstable_now(),typeof de=="function"?m.callback=de:m===n(c)&&r(c),b($)}else r(c);m=n(c)}if(m!==null)var ne=!0;else{var ve=n(u);ve!==null&&Y(S,ve.startTime-$),ne=!1}return ne}finally{m=null,h=V,y=!1}}var j=!1,k=null,C=-1,R=5,P=-1;function D(){return!(e.unstable_now()-P<R)}function _(){if(k!==null){var T=e.unstable_now();P=T;var $=!0;try{$=k(!0,T)}finally{$?q():(j=!1,k=null)}}else j=!1}var q;if(typeof v=="function")q=function(){v(_)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,z=M.port2;M.port1.onmessage=_,q=function(){z.postMessage(null)}}else q=function(){w(_,0)};function Q(T){k=T,j||(j=!0,q())}function Y(T,$){C=w(function(){T(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){p||y||(p=!0,Q(N))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var V=h;h=$;try{return T()}finally{h=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,$){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var V=h;h=T;try{return $()}finally{h=V}},e.unstable_scheduleCallback=function(T,$,V){var G=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?G+V:G):V=G,T){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=V+de,T={id:f++,callback:$,priorityLevel:T,startTime:V,expirationTime:de,sortIndex:-1},V>G?(T.sortIndex=V,t(u,T),n(c)===null&&T===n(u)&&(g?(x(C),C=-1):g=!0,Y(S,V-G))):(T.sortIndex=de,t(c,T),p||y||(p=!0,Q(N))),T},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(T){var $=h;return function(){var V=h;h=$;try{return T.apply(this,arguments)}finally{h=V}}}})(L0);A0.exports=L0;var sk=A0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ok=d,rr=sk;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var I0=new Set,qa={};function $o(e,t){Pi(e,t),Pi(e+"Capture",t)}function Pi(e,t){for(qa[e]=t,e=0;e<t.length;e++)I0.add(t[e])}var ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sf=Object.prototype.hasOwnProperty,ik=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jp={},eg={};function ak(e){return Sf.call(eg,e)?!0:Sf.call(Jp,e)?!1:ik.test(e)?eg[e]=!0:(Jp[e]=!0,!1)}function lk(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ck(e,t,n,r){if(t===null||typeof t>"u"||lk(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $n(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fn[e]=new $n(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fn[t]=new $n(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){fn[e]=new $n(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fn[e]=new $n(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fn[e]=new $n(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){fn[e]=new $n(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){fn[e]=new $n(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){fn[e]=new $n(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){fn[e]=new $n(e,5,!1,e.toLowerCase(),null,!1,!1)});var Jh=/[\-:]([a-z])/g;function em(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Jh,em);fn[t]=new $n(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Jh,em);fn[t]=new $n(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Jh,em);fn[t]=new $n(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){fn[e]=new $n(e,1,!1,e.toLowerCase(),null,!1,!1)});fn.xlinkHref=new $n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){fn[e]=new $n(e,1,!1,e.toLowerCase(),null,!0,!0)});function tm(e,t,n,r){var s=fn.hasOwnProperty(t)?fn[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ck(t,n,s,r)&&(n=null),r||s===null?ak(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ms=ok.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$l=Symbol.for("react.element"),Zo=Symbol.for("react.portal"),Jo=Symbol.for("react.fragment"),nm=Symbol.for("react.strict_mode"),Nf=Symbol.for("react.profiler"),$0=Symbol.for("react.provider"),O0=Symbol.for("react.context"),rm=Symbol.for("react.forward_ref"),kf=Symbol.for("react.suspense"),jf=Symbol.for("react.suspense_list"),sm=Symbol.for("react.memo"),Cs=Symbol.for("react.lazy"),D0=Symbol.for("react.offscreen"),tg=Symbol.iterator;function ua(e){return e===null||typeof e!="object"?null:(e=tg&&e[tg]||e["@@iterator"],typeof e=="function"?e:null)}var At=Object.assign,pd;function ja(e){if(pd===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);pd=t&&t[1]||""}return`
`+pd+e}var gd=!1;function vd(e,t){if(!e||gd)return"";gd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{gd=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ja(e):""}function uk(e){switch(e.tag){case 5:return ja(e.type);case 16:return ja("Lazy");case 13:return ja("Suspense");case 19:return ja("SuspenseList");case 0:case 2:case 15:return e=vd(e.type,!1),e;case 11:return e=vd(e.type.render,!1),e;case 1:return e=vd(e.type,!0),e;default:return""}}function Cf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Jo:return"Fragment";case Zo:return"Portal";case Nf:return"Profiler";case nm:return"StrictMode";case kf:return"Suspense";case jf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case O0:return(e.displayName||"Context")+".Consumer";case $0:return(e._context.displayName||"Context")+".Provider";case rm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case sm:return t=e.displayName||null,t!==null?t:Cf(e.type)||"Memo";case Cs:t=e._payload,e=e._init;try{return Cf(e(t))}catch{}}return null}function dk(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cf(t);case 8:return t===nm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ws(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function B0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fk(e){var t=B0(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ol(e){e._valueTracker||(e._valueTracker=fk(e))}function F0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=B0(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ic(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ef(e,t){var n=t.checked;return At({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ng(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ws(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function z0(e,t){t=t.checked,t!=null&&tm(e,"checked",t,!1)}function Pf(e,t){z0(e,t);var n=Ws(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Tf(e,t.type,n):t.hasOwnProperty("defaultValue")&&Tf(e,t.type,Ws(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Tf(e,t,n){(t!=="number"||Ic(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ca=Array.isArray;function pi(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ws(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Rf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return At({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sg(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(J(92));if(Ca(n)){if(1<n.length)throw Error(J(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ws(n)}}function V0(e,t){var n=Ws(t.value),r=Ws(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function og(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function q0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?q0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Dl,W0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Dl=Dl||document.createElement("div"),Dl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Dl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Wa(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ma={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hk=["Webkit","ms","Moz","O"];Object.keys(Ma).forEach(function(e){hk.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ma[t]=Ma[e]})});function U0(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ma.hasOwnProperty(e)&&Ma[e]?(""+t).trim():t+"px"}function H0(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=U0(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var mk=At({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _f(e,t){if(t){if(mk[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function Af(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lf=null;function om(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var If=null,gi=null,vi=null;function ig(e){if(e=gl(e)){if(typeof If!="function")throw Error(J(280));var t=e.stateNode;t&&(t=Eu(t),If(e.stateNode,e.type,t))}}function K0(e){gi?vi?vi.push(e):vi=[e]:gi=e}function G0(){if(gi){var e=gi,t=vi;if(vi=gi=null,ig(e),t)for(e=0;e<t.length;e++)ig(t[e])}}function Q0(e,t){return e(t)}function Y0(){}var xd=!1;function X0(e,t,n){if(xd)return e(t,n);xd=!0;try{return Q0(e,t,n)}finally{xd=!1,(gi!==null||vi!==null)&&(Y0(),G0())}}function Ua(e,t){var n=e.stateNode;if(n===null)return null;var r=Eu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(J(231,t,typeof n));return n}var $f=!1;if(ls)try{var da={};Object.defineProperty(da,"passive",{get:function(){$f=!0}}),window.addEventListener("test",da,da),window.removeEventListener("test",da,da)}catch{$f=!1}function pk(e,t,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var _a=!1,$c=null,Oc=!1,Of=null,gk={onError:function(e){_a=!0,$c=e}};function vk(e,t,n,r,s,i,a,l,c){_a=!1,$c=null,pk.apply(gk,arguments)}function xk(e,t,n,r,s,i,a,l,c){if(vk.apply(this,arguments),_a){if(_a){var u=$c;_a=!1,$c=null}else throw Error(J(198));Oc||(Oc=!0,Of=u)}}function Oo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Z0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ag(e){if(Oo(e)!==e)throw Error(J(188))}function yk(e){var t=e.alternate;if(!t){if(t=Oo(e),t===null)throw Error(J(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ag(s),e;if(i===r)return ag(s),t;i=i.sibling}throw Error(J(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?e:t}function J0(e){return e=yk(e),e!==null?ex(e):null}function ex(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ex(e);if(t!==null)return t;e=e.sibling}return null}var tx=rr.unstable_scheduleCallback,lg=rr.unstable_cancelCallback,wk=rr.unstable_shouldYield,bk=rr.unstable_requestPaint,zt=rr.unstable_now,Sk=rr.unstable_getCurrentPriorityLevel,im=rr.unstable_ImmediatePriority,nx=rr.unstable_UserBlockingPriority,Dc=rr.unstable_NormalPriority,Nk=rr.unstable_LowPriority,rx=rr.unstable_IdlePriority,Nu=null,Wr=null;function kk(e){if(Wr&&typeof Wr.onCommitFiberRoot=="function")try{Wr.onCommitFiberRoot(Nu,e,void 0,(e.current.flags&128)===128)}catch{}}var Nr=Math.clz32?Math.clz32:Ek,jk=Math.log,Ck=Math.LN2;function Ek(e){return e>>>=0,e===0?32:31-(jk(e)/Ck|0)|0}var Bl=64,Fl=4194304;function Ea(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Bc(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Ea(l):(i&=a,i!==0&&(r=Ea(i)))}else a=n&~s,a!==0?r=Ea(a):i!==0&&(r=Ea(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Nr(t),s=1<<n,r|=e[n],t&=~s;return r}function Pk(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tk(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Nr(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=Pk(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Df(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sx(){var e=Bl;return Bl<<=1,!(Bl&4194240)&&(Bl=64),e}function yd(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ml(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Nr(t),e[t]=n}function Rk(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Nr(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function am(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Nr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ht=0;function ox(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ix,lm,ax,lx,cx,Bf=!1,zl=[],Ls=null,Is=null,$s=null,Ha=new Map,Ka=new Map,Ts=[],Mk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cg(e,t){switch(e){case"focusin":case"focusout":Ls=null;break;case"dragenter":case"dragleave":Is=null;break;case"mouseover":case"mouseout":$s=null;break;case"pointerover":case"pointerout":Ha.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ka.delete(t.pointerId)}}function fa(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=gl(t),t!==null&&lm(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function _k(e,t,n,r,s){switch(t){case"focusin":return Ls=fa(Ls,e,t,n,r,s),!0;case"dragenter":return Is=fa(Is,e,t,n,r,s),!0;case"mouseover":return $s=fa($s,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ha.set(i,fa(Ha.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ka.set(i,fa(Ka.get(i)||null,e,t,n,r,s)),!0}return!1}function ux(e){var t=mo(e.target);if(t!==null){var n=Oo(t);if(n!==null){if(t=n.tag,t===13){if(t=Z0(n),t!==null){e.blockedOn=t,cx(e.priority,function(){ax(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ff(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Lf=r,n.target.dispatchEvent(r),Lf=null}else return t=gl(n),t!==null&&lm(t),e.blockedOn=n,!1;t.shift()}return!0}function ug(e,t,n){pc(e)&&n.delete(t)}function Ak(){Bf=!1,Ls!==null&&pc(Ls)&&(Ls=null),Is!==null&&pc(Is)&&(Is=null),$s!==null&&pc($s)&&($s=null),Ha.forEach(ug),Ka.forEach(ug)}function ha(e,t){e.blockedOn===t&&(e.blockedOn=null,Bf||(Bf=!0,rr.unstable_scheduleCallback(rr.unstable_NormalPriority,Ak)))}function Ga(e){function t(s){return ha(s,e)}if(0<zl.length){ha(zl[0],e);for(var n=1;n<zl.length;n++){var r=zl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ls!==null&&ha(Ls,e),Is!==null&&ha(Is,e),$s!==null&&ha($s,e),Ha.forEach(t),Ka.forEach(t),n=0;n<Ts.length;n++)r=Ts[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ts.length&&(n=Ts[0],n.blockedOn===null);)ux(n),n.blockedOn===null&&Ts.shift()}var xi=ms.ReactCurrentBatchConfig,Fc=!0;function Lk(e,t,n,r){var s=ht,i=xi.transition;xi.transition=null;try{ht=1,cm(e,t,n,r)}finally{ht=s,xi.transition=i}}function Ik(e,t,n,r){var s=ht,i=xi.transition;xi.transition=null;try{ht=4,cm(e,t,n,r)}finally{ht=s,xi.transition=i}}function cm(e,t,n,r){if(Fc){var s=Ff(e,t,n,r);if(s===null)Td(e,t,r,zc,n),cg(e,r);else if(_k(s,e,t,n,r))r.stopPropagation();else if(cg(e,r),t&4&&-1<Mk.indexOf(e)){for(;s!==null;){var i=gl(s);if(i!==null&&ix(i),i=Ff(e,t,n,r),i===null&&Td(e,t,r,zc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Td(e,t,r,null,n)}}var zc=null;function Ff(e,t,n,r){if(zc=null,e=om(r),e=mo(e),e!==null)if(t=Oo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Z0(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return zc=e,null}function dx(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sk()){case im:return 1;case nx:return 4;case Dc:case Nk:return 16;case rx:return 536870912;default:return 16}default:return 16}}var Ms=null,um=null,gc=null;function fx(){if(gc)return gc;var e,t=um,n=t.length,r,s="value"in Ms?Ms.value:Ms.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return gc=s.slice(e,1<r?1-r:void 0)}function vc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vl(){return!0}function dg(){return!1}function or(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Vl:dg,this.isPropagationStopped=dg,this}return At(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vl)},persist:function(){},isPersistent:Vl}),t}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dm=or(Gi),pl=At({},Gi,{view:0,detail:0}),$k=or(pl),wd,bd,ma,ku=At({},pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ma&&(ma&&e.type==="mousemove"?(wd=e.screenX-ma.screenX,bd=e.screenY-ma.screenY):bd=wd=0,ma=e),wd)},movementY:function(e){return"movementY"in e?e.movementY:bd}}),fg=or(ku),Ok=At({},ku,{dataTransfer:0}),Dk=or(Ok),Bk=At({},pl,{relatedTarget:0}),Sd=or(Bk),Fk=At({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),zk=or(Fk),Vk=At({},Gi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qk=or(Vk),Wk=At({},Gi,{data:0}),hg=or(Wk),Uk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Kk[e])?!!t[e]:!1}function fm(){return Gk}var Qk=At({},pl,{key:function(e){if(e.key){var t=Uk[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=vc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Hk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fm,charCode:function(e){return e.type==="keypress"?vc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yk=or(Qk),Xk=At({},ku,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mg=or(Xk),Zk=At({},pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fm}),Jk=or(Zk),ej=At({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),tj=or(ej),nj=At({},ku,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rj=or(nj),sj=[9,13,27,32],hm=ls&&"CompositionEvent"in window,Aa=null;ls&&"documentMode"in document&&(Aa=document.documentMode);var oj=ls&&"TextEvent"in window&&!Aa,hx=ls&&(!hm||Aa&&8<Aa&&11>=Aa),pg=" ",gg=!1;function mx(e,t){switch(e){case"keyup":return sj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function px(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ei=!1;function ij(e,t){switch(e){case"compositionend":return px(t);case"keypress":return t.which!==32?null:(gg=!0,pg);case"textInput":return e=t.data,e===pg&&gg?null:e;default:return null}}function aj(e,t){if(ei)return e==="compositionend"||!hm&&mx(e,t)?(e=fx(),gc=um=Ms=null,ei=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return hx&&t.locale!=="ko"?null:t.data;default:return null}}var lj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!lj[e.type]:t==="textarea"}function gx(e,t,n,r){K0(r),t=Vc(t,"onChange"),0<t.length&&(n=new dm("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var La=null,Qa=null;function cj(e){Ex(e,0)}function ju(e){var t=ri(e);if(F0(t))return e}function uj(e,t){if(e==="change")return t}var vx=!1;if(ls){var Nd;if(ls){var kd="oninput"in document;if(!kd){var xg=document.createElement("div");xg.setAttribute("oninput","return;"),kd=typeof xg.oninput=="function"}Nd=kd}else Nd=!1;vx=Nd&&(!document.documentMode||9<document.documentMode)}function yg(){La&&(La.detachEvent("onpropertychange",xx),Qa=La=null)}function xx(e){if(e.propertyName==="value"&&ju(Qa)){var t=[];gx(t,Qa,e,om(e)),X0(cj,t)}}function dj(e,t,n){e==="focusin"?(yg(),La=t,Qa=n,La.attachEvent("onpropertychange",xx)):e==="focusout"&&yg()}function fj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ju(Qa)}function hj(e,t){if(e==="click")return ju(t)}function mj(e,t){if(e==="input"||e==="change")return ju(t)}function pj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jr=typeof Object.is=="function"?Object.is:pj;function Ya(e,t){if(jr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Sf.call(t,s)||!jr(e[s],t[s]))return!1}return!0}function wg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bg(e,t){var n=wg(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wg(n)}}function yx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?yx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function wx(){for(var e=window,t=Ic();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ic(e.document)}return t}function mm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function gj(e){var t=wx(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&yx(n.ownerDocument.documentElement,n)){if(r!==null&&mm(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=bg(n,i);var a=bg(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vj=ls&&"documentMode"in document&&11>=document.documentMode,ti=null,zf=null,Ia=null,Vf=!1;function Sg(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vf||ti==null||ti!==Ic(r)||(r=ti,"selectionStart"in r&&mm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ia&&Ya(Ia,r)||(Ia=r,r=Vc(zf,"onSelect"),0<r.length&&(t=new dm("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ti)))}function ql(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ni={animationend:ql("Animation","AnimationEnd"),animationiteration:ql("Animation","AnimationIteration"),animationstart:ql("Animation","AnimationStart"),transitionend:ql("Transition","TransitionEnd")},jd={},bx={};ls&&(bx=document.createElement("div").style,"AnimationEvent"in window||(delete ni.animationend.animation,delete ni.animationiteration.animation,delete ni.animationstart.animation),"TransitionEvent"in window||delete ni.transitionend.transition);function Cu(e){if(jd[e])return jd[e];if(!ni[e])return e;var t=ni[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in bx)return jd[e]=t[n];return e}var Sx=Cu("animationend"),Nx=Cu("animationiteration"),kx=Cu("animationstart"),jx=Cu("transitionend"),Cx=new Map,Ng="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qs(e,t){Cx.set(e,t),$o(t,[e])}for(var Cd=0;Cd<Ng.length;Cd++){var Ed=Ng[Cd],xj=Ed.toLowerCase(),yj=Ed[0].toUpperCase()+Ed.slice(1);Qs(xj,"on"+yj)}Qs(Sx,"onAnimationEnd");Qs(Nx,"onAnimationIteration");Qs(kx,"onAnimationStart");Qs("dblclick","onDoubleClick");Qs("focusin","onFocus");Qs("focusout","onBlur");Qs(jx,"onTransitionEnd");Pi("onMouseEnter",["mouseout","mouseover"]);Pi("onMouseLeave",["mouseout","mouseover"]);Pi("onPointerEnter",["pointerout","pointerover"]);Pi("onPointerLeave",["pointerout","pointerover"]);$o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$o("onBeforeInput",["compositionend","keypress","textInput","paste"]);$o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pa));function kg(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,xk(r,t,void 0,e),e.currentTarget=null}function Ex(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;kg(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;kg(s,l,u),i=c}}}if(Oc)throw e=Of,Oc=!1,Of=null,e}function St(e,t){var n=t[Kf];n===void 0&&(n=t[Kf]=new Set);var r=e+"__bubble";n.has(r)||(Px(t,e,2,!1),n.add(r))}function Pd(e,t,n){var r=0;t&&(r|=4),Px(n,e,r,t)}var Wl="_reactListening"+Math.random().toString(36).slice(2);function Xa(e){if(!e[Wl]){e[Wl]=!0,I0.forEach(function(n){n!=="selectionchange"&&(wj.has(n)||Pd(n,!1,e),Pd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wl]||(t[Wl]=!0,Pd("selectionchange",!1,t))}}function Px(e,t,n,r){switch(dx(t)){case 1:var s=Lk;break;case 4:s=Ik;break;default:s=cm}n=s.bind(null,t,n,e),s=void 0,!$f||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Td(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=mo(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}X0(function(){var u=i,f=om(n),m=[];e:{var h=Cx.get(e);if(h!==void 0){var y=dm,p=e;switch(e){case"keypress":if(vc(n)===0)break e;case"keydown":case"keyup":y=Yk;break;case"focusin":p="focus",y=Sd;break;case"focusout":p="blur",y=Sd;break;case"beforeblur":case"afterblur":y=Sd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=fg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Dk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Jk;break;case Sx:case Nx:case kx:y=zk;break;case jx:y=tj;break;case"scroll":y=$k;break;case"wheel":y=rj;break;case"copy":case"cut":case"paste":y=qk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=mg}var g=(t&4)!==0,w=!g&&e==="scroll",x=g?h!==null?h+"Capture":null:h;g=[];for(var v=u,b;v!==null;){b=v;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,x!==null&&(S=Ua(v,x),S!=null&&g.push(Za(v,S,b)))),w)break;v=v.return}0<g.length&&(h=new y(h,p,null,n,f),m.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",h&&n!==Lf&&(p=n.relatedTarget||n.fromElement)&&(mo(p)||p[cs]))break e;if((y||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,y?(p=n.relatedTarget||n.toElement,y=u,p=p?mo(p):null,p!==null&&(w=Oo(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(y=null,p=u),y!==p)){if(g=fg,S="onMouseLeave",x="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=mg,S="onPointerLeave",x="onPointerEnter",v="pointer"),w=y==null?h:ri(y),b=p==null?h:ri(p),h=new g(S,v+"leave",y,n,f),h.target=w,h.relatedTarget=b,S=null,mo(f)===u&&(g=new g(x,v+"enter",p,n,f),g.target=b,g.relatedTarget=w,S=g),w=S,y&&p)t:{for(g=y,x=p,v=0,b=g;b;b=Ko(b))v++;for(b=0,S=x;S;S=Ko(S))b++;for(;0<v-b;)g=Ko(g),v--;for(;0<b-v;)x=Ko(x),b--;for(;v--;){if(g===x||x!==null&&g===x.alternate)break t;g=Ko(g),x=Ko(x)}g=null}else g=null;y!==null&&jg(m,h,y,g,!1),p!==null&&w!==null&&jg(m,w,p,g,!0)}}e:{if(h=u?ri(u):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var N=uj;else if(vg(h))if(vx)N=mj;else{N=fj;var j=dj}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=hj);if(N&&(N=N(e,u))){gx(m,N,n,f);break e}j&&j(e,h,u),e==="focusout"&&(j=h._wrapperState)&&j.controlled&&h.type==="number"&&Tf(h,"number",h.value)}switch(j=u?ri(u):window,e){case"focusin":(vg(j)||j.contentEditable==="true")&&(ti=j,zf=u,Ia=null);break;case"focusout":Ia=zf=ti=null;break;case"mousedown":Vf=!0;break;case"contextmenu":case"mouseup":case"dragend":Vf=!1,Sg(m,n,f);break;case"selectionchange":if(vj)break;case"keydown":case"keyup":Sg(m,n,f)}var k;if(hm)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ei?mx(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(hx&&n.locale!=="ko"&&(ei||C!=="onCompositionStart"?C==="onCompositionEnd"&&ei&&(k=fx()):(Ms=f,um="value"in Ms?Ms.value:Ms.textContent,ei=!0)),j=Vc(u,C),0<j.length&&(C=new hg(C,e,null,n,f),m.push({event:C,listeners:j}),k?C.data=k:(k=px(n),k!==null&&(C.data=k)))),(k=oj?ij(e,n):aj(e,n))&&(u=Vc(u,"onBeforeInput"),0<u.length&&(f=new hg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:u}),f.data=k))}Ex(m,t)})}function Za(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vc(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ua(e,n),i!=null&&r.unshift(Za(e,i,s)),i=Ua(e,t),i!=null&&r.push(Za(e,i,s))),e=e.return}return r}function Ko(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function jg(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Ua(n,i),c!=null&&a.unshift(Za(n,c,l))):s||(c=Ua(n,i),c!=null&&a.push(Za(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var bj=/\r\n?/g,Sj=/\u0000|\uFFFD/g;function Cg(e){return(typeof e=="string"?e:""+e).replace(bj,`
`).replace(Sj,"")}function Ul(e,t,n){if(t=Cg(t),Cg(e)!==t&&n)throw Error(J(425))}function qc(){}var qf=null,Wf=null;function Uf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hf=typeof setTimeout=="function"?setTimeout:void 0,Nj=typeof clearTimeout=="function"?clearTimeout:void 0,Eg=typeof Promise=="function"?Promise:void 0,kj=typeof queueMicrotask=="function"?queueMicrotask:typeof Eg<"u"?function(e){return Eg.resolve(null).then(e).catch(jj)}:Hf;function jj(e){setTimeout(function(){throw e})}function Rd(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ga(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ga(t)}function Os(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Pg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Qi=Math.random().toString(36).slice(2),zr="__reactFiber$"+Qi,Ja="__reactProps$"+Qi,cs="__reactContainer$"+Qi,Kf="__reactEvents$"+Qi,Cj="__reactListeners$"+Qi,Ej="__reactHandles$"+Qi;function mo(e){var t=e[zr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[cs]||n[zr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Pg(e);e!==null;){if(n=e[zr])return n;e=Pg(e)}return t}e=n,n=e.parentNode}return null}function gl(e){return e=e[zr]||e[cs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ri(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function Eu(e){return e[Ja]||null}var Gf=[],si=-1;function Ys(e){return{current:e}}function Nt(e){0>si||(e.current=Gf[si],Gf[si]=null,si--)}function yt(e,t){si++,Gf[si]=e.current,e.current=t}var Us={},kn=Ys(Us),Vn=Ys(!1),So=Us;function Ti(e,t){var n=e.type.contextTypes;if(!n)return Us;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function qn(e){return e=e.childContextTypes,e!=null}function Wc(){Nt(Vn),Nt(kn)}function Tg(e,t,n){if(kn.current!==Us)throw Error(J(168));yt(kn,t),yt(Vn,n)}function Tx(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(J(108,dk(e)||"Unknown",s));return At({},n,r)}function Uc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Us,So=kn.current,yt(kn,e),yt(Vn,Vn.current),!0}function Rg(e,t,n){var r=e.stateNode;if(!r)throw Error(J(169));n?(e=Tx(e,t,So),r.__reactInternalMemoizedMergedChildContext=e,Nt(Vn),Nt(kn),yt(kn,e)):Nt(Vn),yt(Vn,n)}var ss=null,Pu=!1,Md=!1;function Rx(e){ss===null?ss=[e]:ss.push(e)}function Pj(e){Pu=!0,Rx(e)}function Xs(){if(!Md&&ss!==null){Md=!0;var e=0,t=ht;try{var n=ss;for(ht=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ss=null,Pu=!1}catch(s){throw ss!==null&&(ss=ss.slice(e+1)),tx(im,Xs),s}finally{ht=t,Md=!1}}return null}var oi=[],ii=0,Hc=null,Kc=0,lr=[],cr=0,No=null,os=1,is="";function fo(e,t){oi[ii++]=Kc,oi[ii++]=Hc,Hc=e,Kc=t}function Mx(e,t,n){lr[cr++]=os,lr[cr++]=is,lr[cr++]=No,No=e;var r=os;e=is;var s=32-Nr(r)-1;r&=~(1<<s),n+=1;var i=32-Nr(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,os=1<<32-Nr(t)+s|n<<s|r,is=i+e}else os=1<<i|n<<s|r,is=e}function pm(e){e.return!==null&&(fo(e,1),Mx(e,1,0))}function gm(e){for(;e===Hc;)Hc=oi[--ii],oi[ii]=null,Kc=oi[--ii],oi[ii]=null;for(;e===No;)No=lr[--cr],lr[cr]=null,is=lr[--cr],lr[cr]=null,os=lr[--cr],lr[cr]=null}var tr=null,Zn=null,Tt=!1,Sr=null;function _x(e,t){var n=ur(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Mg(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,tr=e,Zn=Os(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,tr=e,Zn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=No!==null?{id:os,overflow:is}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ur(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,tr=e,Zn=null,!0):!1;default:return!1}}function Qf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Yf(e){if(Tt){var t=Zn;if(t){var n=t;if(!Mg(e,t)){if(Qf(e))throw Error(J(418));t=Os(n.nextSibling);var r=tr;t&&Mg(e,t)?_x(r,n):(e.flags=e.flags&-4097|2,Tt=!1,tr=e)}}else{if(Qf(e))throw Error(J(418));e.flags=e.flags&-4097|2,Tt=!1,tr=e}}}function _g(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tr=e}function Hl(e){if(e!==tr)return!1;if(!Tt)return _g(e),Tt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Uf(e.type,e.memoizedProps)),t&&(t=Zn)){if(Qf(e))throw Ax(),Error(J(418));for(;t;)_x(e,t),t=Os(t.nextSibling)}if(_g(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Zn=Os(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Zn=null}}else Zn=tr?Os(e.stateNode.nextSibling):null;return!0}function Ax(){for(var e=Zn;e;)e=Os(e.nextSibling)}function Ri(){Zn=tr=null,Tt=!1}function vm(e){Sr===null?Sr=[e]:Sr.push(e)}var Tj=ms.ReactCurrentBatchConfig;function pa(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,e))}return e}function Kl(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ag(e){var t=e._init;return t(e._payload)}function Lx(e){function t(x,v){if(e){var b=x.deletions;b===null?(x.deletions=[v],x.flags|=16):b.push(v)}}function n(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function s(x,v){return x=zs(x,v),x.index=0,x.sibling=null,x}function i(x,v,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<v?(x.flags|=2,v):b):(x.flags|=2,v)):(x.flags|=1048576,v)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,v,b,S){return v===null||v.tag!==6?(v=Dd(b,x.mode,S),v.return=x,v):(v=s(v,b),v.return=x,v)}function c(x,v,b,S){var N=b.type;return N===Jo?f(x,v,b.props.children,S,b.key):v!==null&&(v.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Cs&&Ag(N)===v.type)?(S=s(v,b.props),S.ref=pa(x,v,b),S.return=x,S):(S=kc(b.type,b.key,b.props,null,x.mode,S),S.ref=pa(x,v,b),S.return=x,S)}function u(x,v,b,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Bd(b,x.mode,S),v.return=x,v):(v=s(v,b.children||[]),v.return=x,v)}function f(x,v,b,S,N){return v===null||v.tag!==7?(v=yo(b,x.mode,S,N),v.return=x,v):(v=s(v,b),v.return=x,v)}function m(x,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Dd(""+v,x.mode,b),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case $l:return b=kc(v.type,v.key,v.props,null,x.mode,b),b.ref=pa(x,null,v),b.return=x,b;case Zo:return v=Bd(v,x.mode,b),v.return=x,v;case Cs:var S=v._init;return m(x,S(v._payload),b)}if(Ca(v)||ua(v))return v=yo(v,x.mode,b,null),v.return=x,v;Kl(x,v)}return null}function h(x,v,b,S){var N=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return N!==null?null:l(x,v,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $l:return b.key===N?c(x,v,b,S):null;case Zo:return b.key===N?u(x,v,b,S):null;case Cs:return N=b._init,h(x,v,N(b._payload),S)}if(Ca(b)||ua(b))return N!==null?null:f(x,v,b,S,null);Kl(x,b)}return null}function y(x,v,b,S,N){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(b)||null,l(v,x,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case $l:return x=x.get(S.key===null?b:S.key)||null,c(v,x,S,N);case Zo:return x=x.get(S.key===null?b:S.key)||null,u(v,x,S,N);case Cs:var j=S._init;return y(x,v,b,j(S._payload),N)}if(Ca(S)||ua(S))return x=x.get(b)||null,f(v,x,S,N,null);Kl(v,S)}return null}function p(x,v,b,S){for(var N=null,j=null,k=v,C=v=0,R=null;k!==null&&C<b.length;C++){k.index>C?(R=k,k=null):R=k.sibling;var P=h(x,k,b[C],S);if(P===null){k===null&&(k=R);break}e&&k&&P.alternate===null&&t(x,k),v=i(P,v,C),j===null?N=P:j.sibling=P,j=P,k=R}if(C===b.length)return n(x,k),Tt&&fo(x,C),N;if(k===null){for(;C<b.length;C++)k=m(x,b[C],S),k!==null&&(v=i(k,v,C),j===null?N=k:j.sibling=k,j=k);return Tt&&fo(x,C),N}for(k=r(x,k);C<b.length;C++)R=y(k,x,C,b[C],S),R!==null&&(e&&R.alternate!==null&&k.delete(R.key===null?C:R.key),v=i(R,v,C),j===null?N=R:j.sibling=R,j=R);return e&&k.forEach(function(D){return t(x,D)}),Tt&&fo(x,C),N}function g(x,v,b,S){var N=ua(b);if(typeof N!="function")throw Error(J(150));if(b=N.call(b),b==null)throw Error(J(151));for(var j=N=null,k=v,C=v=0,R=null,P=b.next();k!==null&&!P.done;C++,P=b.next()){k.index>C?(R=k,k=null):R=k.sibling;var D=h(x,k,P.value,S);if(D===null){k===null&&(k=R);break}e&&k&&D.alternate===null&&t(x,k),v=i(D,v,C),j===null?N=D:j.sibling=D,j=D,k=R}if(P.done)return n(x,k),Tt&&fo(x,C),N;if(k===null){for(;!P.done;C++,P=b.next())P=m(x,P.value,S),P!==null&&(v=i(P,v,C),j===null?N=P:j.sibling=P,j=P);return Tt&&fo(x,C),N}for(k=r(x,k);!P.done;C++,P=b.next())P=y(k,x,C,P.value,S),P!==null&&(e&&P.alternate!==null&&k.delete(P.key===null?C:P.key),v=i(P,v,C),j===null?N=P:j.sibling=P,j=P);return e&&k.forEach(function(_){return t(x,_)}),Tt&&fo(x,C),N}function w(x,v,b,S){if(typeof b=="object"&&b!==null&&b.type===Jo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case $l:e:{for(var N=b.key,j=v;j!==null;){if(j.key===N){if(N=b.type,N===Jo){if(j.tag===7){n(x,j.sibling),v=s(j,b.props.children),v.return=x,x=v;break e}}else if(j.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Cs&&Ag(N)===j.type){n(x,j.sibling),v=s(j,b.props),v.ref=pa(x,j,b),v.return=x,x=v;break e}n(x,j);break}else t(x,j);j=j.sibling}b.type===Jo?(v=yo(b.props.children,x.mode,S,b.key),v.return=x,x=v):(S=kc(b.type,b.key,b.props,null,x.mode,S),S.ref=pa(x,v,b),S.return=x,x=S)}return a(x);case Zo:e:{for(j=b.key;v!==null;){if(v.key===j)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(x,v.sibling),v=s(v,b.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else t(x,v);v=v.sibling}v=Bd(b,x.mode,S),v.return=x,x=v}return a(x);case Cs:return j=b._init,w(x,v,j(b._payload),S)}if(Ca(b))return p(x,v,b,S);if(ua(b))return g(x,v,b,S);Kl(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(x,v.sibling),v=s(v,b),v.return=x,x=v):(n(x,v),v=Dd(b,x.mode,S),v.return=x,x=v),a(x)):n(x,v)}return w}var Mi=Lx(!0),Ix=Lx(!1),Gc=Ys(null),Qc=null,ai=null,xm=null;function ym(){xm=ai=Qc=null}function wm(e){var t=Gc.current;Nt(Gc),e._currentValue=t}function Xf(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function yi(e,t){Qc=e,xm=ai=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(zn=!0),e.firstContext=null)}function hr(e){var t=e._currentValue;if(xm!==e)if(e={context:e,memoizedValue:t,next:null},ai===null){if(Qc===null)throw Error(J(308));ai=e,Qc.dependencies={lanes:0,firstContext:e}}else ai=ai.next=e;return t}var po=null;function bm(e){po===null?po=[e]:po.push(e)}function $x(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,bm(t)):(n.next=s.next,s.next=n),t.interleaved=n,us(e,r)}function us(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Es=!1;function Sm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ox(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function as(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ds(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,it&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,us(e,n)}return s=r.interleaved,s===null?(t.next=t,bm(r)):(t.next=s.next,s.next=t),r.interleaved=t,us(e,n)}function xc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,am(e,n)}}function Lg(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Yc(e,t,n,r){var s=e.updateQueue;Es=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;a=0,f=u=c=null,l=i;do{var h=l.lane,y=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,g=l;switch(h=t,y=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){m=p.call(y,m,h);break e}m=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(y,m,h):p,h==null)break e;m=At({},m,h);break e;case 2:Es=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else y={eventTime:y,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=y,c=m):f=f.next=y,a|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(f===null&&(c=m),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);jo|=a,e.lanes=a,e.memoizedState=m}}function Ig(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(J(191,s));s.call(r)}}}var vl={},Ur=Ys(vl),el=Ys(vl),tl=Ys(vl);function go(e){if(e===vl)throw Error(J(174));return e}function Nm(e,t){switch(yt(tl,t),yt(el,e),yt(Ur,vl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Mf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Mf(t,e)}Nt(Ur),yt(Ur,t)}function _i(){Nt(Ur),Nt(el),Nt(tl)}function Dx(e){go(tl.current);var t=go(Ur.current),n=Mf(t,e.type);t!==n&&(yt(el,e),yt(Ur,n))}function km(e){el.current===e&&(Nt(Ur),Nt(el))}var Mt=Ys(0);function Xc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _d=[];function jm(){for(var e=0;e<_d.length;e++)_d[e]._workInProgressVersionPrimary=null;_d.length=0}var yc=ms.ReactCurrentDispatcher,Ad=ms.ReactCurrentBatchConfig,ko=0,_t=null,Jt=null,on=null,Zc=!1,$a=!1,nl=0,Rj=0;function gn(){throw Error(J(321))}function Cm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!jr(e[n],t[n]))return!1;return!0}function Em(e,t,n,r,s,i){if(ko=i,_t=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,yc.current=e===null||e.memoizedState===null?Lj:Ij,e=n(r,s),$a){i=0;do{if($a=!1,nl=0,25<=i)throw Error(J(301));i+=1,on=Jt=null,t.updateQueue=null,yc.current=$j,e=n(r,s)}while($a)}if(yc.current=Jc,t=Jt!==null&&Jt.next!==null,ko=0,on=Jt=_t=null,Zc=!1,t)throw Error(J(300));return e}function Pm(){var e=nl!==0;return nl=0,e}function Fr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?_t.memoizedState=on=e:on=on.next=e,on}function mr(){if(Jt===null){var e=_t.alternate;e=e!==null?e.memoizedState:null}else e=Jt.next;var t=on===null?_t.memoizedState:on.next;if(t!==null)on=t,Jt=e;else{if(e===null)throw Error(J(310));Jt=e,e={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},on===null?_t.memoizedState=on=e:on=on.next=e}return on}function rl(e,t){return typeof t=="function"?t(e):t}function Ld(e){var t=mr(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=Jt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var f=u.lane;if((ko&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var m={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=m,a=r):c=c.next=m,_t.lanes|=f,jo|=f}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,jr(r,t.memoizedState)||(zn=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,_t.lanes|=i,jo|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Id(e){var t=mr(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);jr(i,t.memoizedState)||(zn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Bx(){}function Fx(e,t){var n=_t,r=mr(),s=t(),i=!jr(r.memoizedState,s);if(i&&(r.memoizedState=s,zn=!0),r=r.queue,Tm(qx.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||on!==null&&on.memoizedState.tag&1){if(n.flags|=2048,sl(9,Vx.bind(null,n,r,s,t),void 0,null),an===null)throw Error(J(349));ko&30||zx(n,t,s)}return s}function zx(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=_t.updateQueue,t===null?(t={lastEffect:null,stores:null},_t.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Vx(e,t,n,r){t.value=n,t.getSnapshot=r,Wx(t)&&Ux(e)}function qx(e,t,n){return n(function(){Wx(t)&&Ux(e)})}function Wx(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!jr(e,n)}catch{return!0}}function Ux(e){var t=us(e,1);t!==null&&kr(t,e,1,-1)}function $g(e){var t=Fr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:e},t.queue=e,e=e.dispatch=Aj.bind(null,_t,e),[t.memoizedState,e]}function sl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=_t.updateQueue,t===null?(t={lastEffect:null,stores:null},_t.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Hx(){return mr().memoizedState}function wc(e,t,n,r){var s=Fr();_t.flags|=e,s.memoizedState=sl(1|t,n,void 0,r===void 0?null:r)}function Tu(e,t,n,r){var s=mr();r=r===void 0?null:r;var i=void 0;if(Jt!==null){var a=Jt.memoizedState;if(i=a.destroy,r!==null&&Cm(r,a.deps)){s.memoizedState=sl(t,n,i,r);return}}_t.flags|=e,s.memoizedState=sl(1|t,n,i,r)}function Og(e,t){return wc(8390656,8,e,t)}function Tm(e,t){return Tu(2048,8,e,t)}function Kx(e,t){return Tu(4,2,e,t)}function Gx(e,t){return Tu(4,4,e,t)}function Qx(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Yx(e,t,n){return n=n!=null?n.concat([e]):null,Tu(4,4,Qx.bind(null,t,e),n)}function Rm(){}function Xx(e,t){var n=mr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Cm(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zx(e,t){var n=mr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Cm(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jx(e,t,n){return ko&21?(jr(n,t)||(n=sx(),_t.lanes|=n,jo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,zn=!0),e.memoizedState=n)}function Mj(e,t){var n=ht;ht=n!==0&&4>n?n:4,e(!0);var r=Ad.transition;Ad.transition={};try{e(!1),t()}finally{ht=n,Ad.transition=r}}function ey(){return mr().memoizedState}function _j(e,t,n){var r=Fs(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ty(e))ny(t,n);else if(n=$x(e,t,n,r),n!==null){var s=An();kr(n,e,r,s),ry(n,t,r)}}function Aj(e,t,n){var r=Fs(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ty(e))ny(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,jr(l,a)){var c=t.interleaved;c===null?(s.next=s,bm(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=$x(e,t,s,r),n!==null&&(s=An(),kr(n,e,r,s),ry(n,t,r))}}function ty(e){var t=e.alternate;return e===_t||t!==null&&t===_t}function ny(e,t){$a=Zc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ry(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,am(e,n)}}var Jc={readContext:hr,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useInsertionEffect:gn,useLayoutEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useMutableSource:gn,useSyncExternalStore:gn,useId:gn,unstable_isNewReconciler:!1},Lj={readContext:hr,useCallback:function(e,t){return Fr().memoizedState=[e,t===void 0?null:t],e},useContext:hr,useEffect:Og,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,wc(4194308,4,Qx.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wc(4194308,4,e,t)},useInsertionEffect:function(e,t){return wc(4,2,e,t)},useMemo:function(e,t){var n=Fr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Fr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=_j.bind(null,_t,e),[r.memoizedState,e]},useRef:function(e){var t=Fr();return e={current:e},t.memoizedState=e},useState:$g,useDebugValue:Rm,useDeferredValue:function(e){return Fr().memoizedState=e},useTransition:function(){var e=$g(!1),t=e[0];return e=Mj.bind(null,e[1]),Fr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=_t,s=Fr();if(Tt){if(n===void 0)throw Error(J(407));n=n()}else{if(n=t(),an===null)throw Error(J(349));ko&30||zx(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Og(qx.bind(null,r,i,e),[e]),r.flags|=2048,sl(9,Vx.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Fr(),t=an.identifierPrefix;if(Tt){var n=is,r=os;n=(r&~(1<<32-Nr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=nl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Rj++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ij={readContext:hr,useCallback:Xx,useContext:hr,useEffect:Tm,useImperativeHandle:Yx,useInsertionEffect:Kx,useLayoutEffect:Gx,useMemo:Zx,useReducer:Ld,useRef:Hx,useState:function(){return Ld(rl)},useDebugValue:Rm,useDeferredValue:function(e){var t=mr();return Jx(t,Jt.memoizedState,e)},useTransition:function(){var e=Ld(rl)[0],t=mr().memoizedState;return[e,t]},useMutableSource:Bx,useSyncExternalStore:Fx,useId:ey,unstable_isNewReconciler:!1},$j={readContext:hr,useCallback:Xx,useContext:hr,useEffect:Tm,useImperativeHandle:Yx,useInsertionEffect:Kx,useLayoutEffect:Gx,useMemo:Zx,useReducer:Id,useRef:Hx,useState:function(){return Id(rl)},useDebugValue:Rm,useDeferredValue:function(e){var t=mr();return Jt===null?t.memoizedState=e:Jx(t,Jt.memoizedState,e)},useTransition:function(){var e=Id(rl)[0],t=mr().memoizedState;return[e,t]},useMutableSource:Bx,useSyncExternalStore:Fx,useId:ey,unstable_isNewReconciler:!1};function yr(e,t){if(e&&e.defaultProps){t=At({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Zf(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:At({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ru={isMounted:function(e){return(e=e._reactInternals)?Oo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=An(),s=Fs(e),i=as(r,s);i.payload=t,n!=null&&(i.callback=n),t=Ds(e,i,s),t!==null&&(kr(t,e,s,r),xc(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=An(),s=Fs(e),i=as(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ds(e,i,s),t!==null&&(kr(t,e,s,r),xc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=An(),r=Fs(e),s=as(n,r);s.tag=2,t!=null&&(s.callback=t),t=Ds(e,s,r),t!==null&&(kr(t,e,r,n),xc(t,e,r))}};function Dg(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Ya(n,r)||!Ya(s,i):!0}function sy(e,t,n){var r=!1,s=Us,i=t.contextType;return typeof i=="object"&&i!==null?i=hr(i):(s=qn(t)?So:kn.current,r=t.contextTypes,i=(r=r!=null)?Ti(e,s):Us),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ru,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Bg(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ru.enqueueReplaceState(t,t.state,null)}function Jf(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Sm(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=hr(i):(i=qn(t)?So:kn.current,s.context=Ti(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Zf(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ru.enqueueReplaceState(s,s.state,null),Yc(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ai(e,t){try{var n="",r=t;do n+=uk(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function $d(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function eh(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Oj=typeof WeakMap=="function"?WeakMap:Map;function oy(e,t,n){n=as(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){tu||(tu=!0,uh=r),eh(e,t)},n}function iy(e,t,n){n=as(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){eh(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){eh(e,t),typeof r!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Fg(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Oj;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Xj.bind(null,e,t,n),t.then(e,e))}function zg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vg(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=as(-1,1),t.tag=2,Ds(n,t,1))),n.lanes|=1),e)}var Dj=ms.ReactCurrentOwner,zn=!1;function Tn(e,t,n,r){t.child=e===null?Ix(t,null,n,r):Mi(t,e.child,n,r)}function qg(e,t,n,r,s){n=n.render;var i=t.ref;return yi(t,s),r=Em(e,t,n,r,i,s),n=Pm(),e!==null&&!zn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ds(e,t,s)):(Tt&&n&&pm(t),t.flags|=1,Tn(e,t,r,s),t.child)}function Wg(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Dm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,ay(e,t,i,r,s)):(e=kc(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ya,n(a,r)&&e.ref===t.ref)return ds(e,t,s)}return t.flags|=1,e=zs(i,r),e.ref=t.ref,e.return=t,t.child=e}function ay(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ya(i,r)&&e.ref===t.ref)if(zn=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(zn=!0);else return t.lanes=e.lanes,ds(e,t,s)}return th(e,t,n,r,s)}function ly(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt(ci,Yn),Yn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,yt(ci,Yn),Yn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,yt(ci,Yn),Yn|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,yt(ci,Yn),Yn|=r;return Tn(e,t,s,n),t.child}function cy(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function th(e,t,n,r,s){var i=qn(n)?So:kn.current;return i=Ti(t,i),yi(t,s),n=Em(e,t,n,r,i,s),r=Pm(),e!==null&&!zn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ds(e,t,s)):(Tt&&r&&pm(t),t.flags|=1,Tn(e,t,n,s),t.child)}function Ug(e,t,n,r,s){if(qn(n)){var i=!0;Uc(t)}else i=!1;if(yi(t,s),t.stateNode===null)bc(e,t),sy(t,n,r),Jf(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=hr(u):(u=qn(n)?So:kn.current,u=Ti(t,u));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Bg(t,a,r,u),Es=!1;var h=t.memoizedState;a.state=h,Yc(t,r,a,s),c=t.memoizedState,l!==r||h!==c||Vn.current||Es?(typeof f=="function"&&(Zf(t,n,f,r),c=t.memoizedState),(l=Es||Dg(t,n,l,r,h,c,u))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ox(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:yr(t.type,l),a.props=u,m=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=hr(c):(c=qn(n)?So:kn.current,c=Ti(t,c));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||h!==c)&&Bg(t,a,r,c),Es=!1,h=t.memoizedState,a.state=h,Yc(t,r,a,s);var p=t.memoizedState;l!==m||h!==p||Vn.current||Es?(typeof y=="function"&&(Zf(t,n,y,r),p=t.memoizedState),(u=Es||Dg(t,n,u,r,h,p,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return nh(e,t,n,r,i,s)}function nh(e,t,n,r,s,i){cy(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Rg(t,n,!1),ds(e,t,i);r=t.stateNode,Dj.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Mi(t,e.child,null,i),t.child=Mi(t,null,l,i)):Tn(e,t,l,i),t.memoizedState=r.state,s&&Rg(t,n,!0),t.child}function uy(e){var t=e.stateNode;t.pendingContext?Tg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Tg(e,t.context,!1),Nm(e,t.containerInfo)}function Hg(e,t,n,r,s){return Ri(),vm(s),t.flags|=256,Tn(e,t,n,r),t.child}var rh={dehydrated:null,treeContext:null,retryLane:0};function sh(e){return{baseLanes:e,cachePool:null,transitions:null}}function dy(e,t,n){var r=t.pendingProps,s=Mt.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),yt(Mt,s&1),e===null)return Yf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Au(a,r,0,null),e=yo(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=sh(n),t.memoizedState=rh,e):Mm(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Bj(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=zs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=zs(l,i):(i=yo(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?sh(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=rh,r}return i=e.child,e=i.sibling,r=zs(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Mm(e,t){return t=Au({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gl(e,t,n,r){return r!==null&&vm(r),Mi(t,e.child,null,n),e=Mm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Bj(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=$d(Error(J(422))),Gl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Au({mode:"visible",children:r.children},s,0,null),i=yo(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Mi(t,e.child,null,a),t.child.memoizedState=sh(a),t.memoizedState=rh,i);if(!(t.mode&1))return Gl(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(J(419)),r=$d(i,r,void 0),Gl(e,t,a,r)}if(l=(a&e.childLanes)!==0,zn||l){if(r=an,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,us(e,s),kr(r,e,s,-1))}return Om(),r=$d(Error(J(421))),Gl(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Zj.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Zn=Os(s.nextSibling),tr=t,Tt=!0,Sr=null,e!==null&&(lr[cr++]=os,lr[cr++]=is,lr[cr++]=No,os=e.id,is=e.overflow,No=t),t=Mm(t,r.children),t.flags|=4096,t)}function Kg(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Xf(e.return,t,n)}function Od(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function fy(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Tn(e,t,r.children,n),r=Mt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Kg(e,n,t);else if(e.tag===19)Kg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(yt(Mt,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Xc(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Od(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Xc(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Od(t,!0,n,null,i);break;case"together":Od(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ds(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),jo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,n=zs(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=zs(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Fj(e,t,n){switch(t.tag){case 3:uy(t),Ri();break;case 5:Dx(t);break;case 1:qn(t.type)&&Uc(t);break;case 4:Nm(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;yt(Gc,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(yt(Mt,Mt.current&1),t.flags|=128,null):n&t.child.childLanes?dy(e,t,n):(yt(Mt,Mt.current&1),e=ds(e,t,n),e!==null?e.sibling:null);yt(Mt,Mt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return fy(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),yt(Mt,Mt.current),r)break;return null;case 22:case 23:return t.lanes=0,ly(e,t,n)}return ds(e,t,n)}var hy,oh,my,py;hy=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};oh=function(){};my=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,go(Ur.current);var i=null;switch(n){case"input":s=Ef(e,s),r=Ef(e,r),i=[];break;case"select":s=At({},s,{value:void 0}),r=At({},r,{value:void 0}),i=[];break;case"textarea":s=Rf(e,s),r=Rf(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=qc)}_f(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(qa.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(qa.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&St("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};py=function(e,t,n,r){n!==r&&(t.flags|=4)};function ga(e,t){if(!Tt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function vn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function zj(e,t,n){var r=t.pendingProps;switch(gm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(t),null;case 1:return qn(t.type)&&Wc(),vn(t),null;case 3:return r=t.stateNode,_i(),Nt(Vn),Nt(kn),jm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Hl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Sr!==null&&(hh(Sr),Sr=null))),oh(e,t),vn(t),null;case 5:km(t);var s=go(tl.current);if(n=t.type,e!==null&&t.stateNode!=null)my(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(J(166));return vn(t),null}if(e=go(Ur.current),Hl(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[zr]=t,r[Ja]=i,e=(t.mode&1)!==0,n){case"dialog":St("cancel",r),St("close",r);break;case"iframe":case"object":case"embed":St("load",r);break;case"video":case"audio":for(s=0;s<Pa.length;s++)St(Pa[s],r);break;case"source":St("error",r);break;case"img":case"image":case"link":St("error",r),St("load",r);break;case"details":St("toggle",r);break;case"input":ng(r,i),St("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},St("invalid",r);break;case"textarea":sg(r,i),St("invalid",r)}_f(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ul(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ul(r.textContent,l,e),s=["children",""+l]):qa.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&St("scroll",r)}switch(n){case"input":Ol(r),rg(r,i,!0);break;case"textarea":Ol(r),og(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=qc)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=q0(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[zr]=t,e[Ja]=r,hy(e,t,!1,!1),t.stateNode=e;e:{switch(a=Af(n,r),n){case"dialog":St("cancel",e),St("close",e),s=r;break;case"iframe":case"object":case"embed":St("load",e),s=r;break;case"video":case"audio":for(s=0;s<Pa.length;s++)St(Pa[s],e);s=r;break;case"source":St("error",e),s=r;break;case"img":case"image":case"link":St("error",e),St("load",e),s=r;break;case"details":St("toggle",e),s=r;break;case"input":ng(e,r),s=Ef(e,r),St("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=At({},r,{value:void 0}),St("invalid",e);break;case"textarea":sg(e,r),s=Rf(e,r),St("invalid",e);break;default:s=r}_f(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?H0(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&W0(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Wa(e,c):typeof c=="number"&&Wa(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(qa.hasOwnProperty(i)?c!=null&&i==="onScroll"&&St("scroll",e):c!=null&&tm(e,i,c,a))}switch(n){case"input":Ol(e),rg(e,r,!1);break;case"textarea":Ol(e),og(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ws(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?pi(e,!!r.multiple,i,!1):r.defaultValue!=null&&pi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=qc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vn(t),null;case 6:if(e&&t.stateNode!=null)py(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(J(166));if(n=go(tl.current),go(Ur.current),Hl(t)){if(r=t.stateNode,n=t.memoizedProps,r[zr]=t,(i=r.nodeValue!==n)&&(e=tr,e!==null))switch(e.tag){case 3:Ul(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ul(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zr]=t,t.stateNode=r}return vn(t),null;case 13:if(Nt(Mt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Tt&&Zn!==null&&t.mode&1&&!(t.flags&128))Ax(),Ri(),t.flags|=98560,i=!1;else if(i=Hl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(J(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(J(317));i[zr]=t}else Ri(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vn(t),i=!1}else Sr!==null&&(hh(Sr),Sr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Mt.current&1?en===0&&(en=3):Om())),t.updateQueue!==null&&(t.flags|=4),vn(t),null);case 4:return _i(),oh(e,t),e===null&&Xa(t.stateNode.containerInfo),vn(t),null;case 10:return wm(t.type._context),vn(t),null;case 17:return qn(t.type)&&Wc(),vn(t),null;case 19:if(Nt(Mt),i=t.memoizedState,i===null)return vn(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)ga(i,!1);else{if(en!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Xc(e),a!==null){for(t.flags|=128,ga(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return yt(Mt,Mt.current&1|2),t.child}e=e.sibling}i.tail!==null&&zt()>Li&&(t.flags|=128,r=!0,ga(i,!1),t.lanes=4194304)}else{if(!r)if(e=Xc(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ga(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Tt)return vn(t),null}else 2*zt()-i.renderingStartTime>Li&&n!==1073741824&&(t.flags|=128,r=!0,ga(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=zt(),t.sibling=null,n=Mt.current,yt(Mt,r?n&1|2:n&1),t):(vn(t),null);case 22:case 23:return $m(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Yn&1073741824&&(vn(t),t.subtreeFlags&6&&(t.flags|=8192)):vn(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function Vj(e,t){switch(gm(t),t.tag){case 1:return qn(t.type)&&Wc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _i(),Nt(Vn),Nt(kn),jm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return km(t),null;case 13:if(Nt(Mt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));Ri()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Nt(Mt),null;case 4:return _i(),null;case 10:return wm(t.type._context),null;case 22:case 23:return $m(),null;case 24:return null;default:return null}}var Ql=!1,yn=!1,qj=typeof WeakSet=="function"?WeakSet:Set,xe=null;function li(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ot(e,t,r)}else n.current=null}function ih(e,t,n){try{n()}catch(r){Ot(e,t,r)}}var Gg=!1;function Wj(e,t){if(qf=Fc,e=wx(),mm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,f=0,m=e,h=null;t:for(;;){for(var y;m!==n||s!==0&&m.nodeType!==3||(l=a+s),m!==i||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(y=m.firstChild)!==null;)h=m,m=y;for(;;){if(m===e)break t;if(h===n&&++u===s&&(l=a),h===i&&++f===r&&(c=a),(y=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wf={focusedElem:e,selectionRange:n},Fc=!1,xe=t;xe!==null;)if(t=xe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xe=e;else for(;xe!==null;){t=xe;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:yr(t.type,g),w);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(S){Ot(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,xe=e;break}xe=t.return}return p=Gg,Gg=!1,p}function Oa(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&ih(t,n,i)}s=s.next}while(s!==r)}}function Mu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ah(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function gy(e){var t=e.alternate;t!==null&&(e.alternate=null,gy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[zr],delete t[Ja],delete t[Kf],delete t[Cj],delete t[Ej])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function vy(e){return e.tag===5||e.tag===3||e.tag===4}function Qg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=qc));else if(r!==4&&(e=e.child,e!==null))for(lh(e,t,n),e=e.sibling;e!==null;)lh(e,t,n),e=e.sibling}function ch(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ch(e,t,n),e=e.sibling;e!==null;)ch(e,t,n),e=e.sibling}var un=null,wr=!1;function ys(e,t,n){for(n=n.child;n!==null;)xy(e,t,n),n=n.sibling}function xy(e,t,n){if(Wr&&typeof Wr.onCommitFiberUnmount=="function")try{Wr.onCommitFiberUnmount(Nu,n)}catch{}switch(n.tag){case 5:yn||li(n,t);case 6:var r=un,s=wr;un=null,ys(e,t,n),un=r,wr=s,un!==null&&(wr?(e=un,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):un.removeChild(n.stateNode));break;case 18:un!==null&&(wr?(e=un,n=n.stateNode,e.nodeType===8?Rd(e.parentNode,n):e.nodeType===1&&Rd(e,n),Ga(e)):Rd(un,n.stateNode));break;case 4:r=un,s=wr,un=n.stateNode.containerInfo,wr=!0,ys(e,t,n),un=r,wr=s;break;case 0:case 11:case 14:case 15:if(!yn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&ih(n,t,a),s=s.next}while(s!==r)}ys(e,t,n);break;case 1:if(!yn&&(li(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ot(n,t,l)}ys(e,t,n);break;case 21:ys(e,t,n);break;case 22:n.mode&1?(yn=(r=yn)||n.memoizedState!==null,ys(e,t,n),yn=r):ys(e,t,n);break;default:ys(e,t,n)}}function Yg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new qj),t.forEach(function(r){var s=Jj.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function vr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:un=l.stateNode,wr=!1;break e;case 3:un=l.stateNode.containerInfo,wr=!0;break e;case 4:un=l.stateNode.containerInfo,wr=!0;break e}l=l.return}if(un===null)throw Error(J(160));xy(i,a,s),un=null,wr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ot(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yy(t,e),t=t.sibling}function yy(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vr(t,e),Br(e),r&4){try{Oa(3,e,e.return),Mu(3,e)}catch(g){Ot(e,e.return,g)}try{Oa(5,e,e.return)}catch(g){Ot(e,e.return,g)}}break;case 1:vr(t,e),Br(e),r&512&&n!==null&&li(n,n.return);break;case 5:if(vr(t,e),Br(e),r&512&&n!==null&&li(n,n.return),e.flags&32){var s=e.stateNode;try{Wa(s,"")}catch(g){Ot(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&z0(s,i),Af(l,a);var u=Af(l,i);for(a=0;a<c.length;a+=2){var f=c[a],m=c[a+1];f==="style"?H0(s,m):f==="dangerouslySetInnerHTML"?W0(s,m):f==="children"?Wa(s,m):tm(s,f,m,u)}switch(l){case"input":Pf(s,i);break;case"textarea":V0(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?pi(s,!!i.multiple,y,!1):h!==!!i.multiple&&(i.defaultValue!=null?pi(s,!!i.multiple,i.defaultValue,!0):pi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ja]=i}catch(g){Ot(e,e.return,g)}}break;case 6:if(vr(t,e),Br(e),r&4){if(e.stateNode===null)throw Error(J(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(g){Ot(e,e.return,g)}}break;case 3:if(vr(t,e),Br(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ga(t.containerInfo)}catch(g){Ot(e,e.return,g)}break;case 4:vr(t,e),Br(e);break;case 13:vr(t,e),Br(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Lm=zt())),r&4&&Yg(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(yn=(u=yn)||f,vr(t,e),yn=u):vr(t,e),Br(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(xe=e,f=e.child;f!==null;){for(m=xe=f;xe!==null;){switch(h=xe,y=h.child,h.tag){case 0:case 11:case 14:case 15:Oa(4,h,h.return);break;case 1:li(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Ot(r,n,g)}}break;case 5:li(h,h.return);break;case 22:if(h.memoizedState!==null){Zg(m);continue}}y!==null?(y.return=h,xe=y):Zg(m)}f=f.sibling}e:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=U0("display",a))}catch(g){Ot(e,e.return,g)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(g){Ot(e,e.return,g)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:vr(t,e),Br(e),r&4&&Yg(e);break;case 21:break;default:vr(t,e),Br(e)}}function Br(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(vy(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Wa(s,""),r.flags&=-33);var i=Qg(e);ch(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Qg(e);lh(e,l,a);break;default:throw Error(J(161))}}catch(c){Ot(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Uj(e,t,n){xe=e,wy(e)}function wy(e,t,n){for(var r=(e.mode&1)!==0;xe!==null;){var s=xe,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Ql;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||yn;l=Ql;var u=yn;if(Ql=a,(yn=c)&&!u)for(xe=s;xe!==null;)a=xe,c=a.child,a.tag===22&&a.memoizedState!==null?Jg(s):c!==null?(c.return=a,xe=c):Jg(s);for(;i!==null;)xe=i,wy(i),i=i.sibling;xe=s,Ql=l,yn=u}Xg(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,xe=i):Xg(e)}}function Xg(e){for(;xe!==null;){var t=xe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:yn||Mu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!yn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:yr(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Ig(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ig(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ga(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}yn||t.flags&512&&ah(t)}catch(h){Ot(t,t.return,h)}}if(t===e){xe=null;break}if(n=t.sibling,n!==null){n.return=t.return,xe=n;break}xe=t.return}}function Zg(e){for(;xe!==null;){var t=xe;if(t===e){xe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,xe=n;break}xe=t.return}}function Jg(e){for(;xe!==null;){var t=xe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Mu(4,t)}catch(c){Ot(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ot(t,s,c)}}var i=t.return;try{ah(t)}catch(c){Ot(t,i,c)}break;case 5:var a=t.return;try{ah(t)}catch(c){Ot(t,a,c)}}}catch(c){Ot(t,t.return,c)}if(t===e){xe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,xe=l;break}xe=t.return}}var Hj=Math.ceil,eu=ms.ReactCurrentDispatcher,_m=ms.ReactCurrentOwner,fr=ms.ReactCurrentBatchConfig,it=0,an=null,Gt=null,dn=0,Yn=0,ci=Ys(0),en=0,ol=null,jo=0,_u=0,Am=0,Da=null,Fn=null,Lm=0,Li=1/0,ts=null,tu=!1,uh=null,Bs=null,Yl=!1,_s=null,nu=0,Ba=0,dh=null,Sc=-1,Nc=0;function An(){return it&6?zt():Sc!==-1?Sc:Sc=zt()}function Fs(e){return e.mode&1?it&2&&dn!==0?dn&-dn:Tj.transition!==null?(Nc===0&&(Nc=sx()),Nc):(e=ht,e!==0||(e=window.event,e=e===void 0?16:dx(e.type)),e):1}function kr(e,t,n,r){if(50<Ba)throw Ba=0,dh=null,Error(J(185));ml(e,n,r),(!(it&2)||e!==an)&&(e===an&&(!(it&2)&&(_u|=n),en===4&&Rs(e,dn)),Wn(e,r),n===1&&it===0&&!(t.mode&1)&&(Li=zt()+500,Pu&&Xs()))}function Wn(e,t){var n=e.callbackNode;Tk(e,t);var r=Bc(e,e===an?dn:0);if(r===0)n!==null&&lg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&lg(n),t===1)e.tag===0?Pj(ev.bind(null,e)):Rx(ev.bind(null,e)),kj(function(){!(it&6)&&Xs()}),n=null;else{switch(ox(r)){case 1:n=im;break;case 4:n=nx;break;case 16:n=Dc;break;case 536870912:n=rx;break;default:n=Dc}n=Py(n,by.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function by(e,t){if(Sc=-1,Nc=0,it&6)throw Error(J(327));var n=e.callbackNode;if(wi()&&e.callbackNode!==n)return null;var r=Bc(e,e===an?dn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ru(e,r);else{t=r;var s=it;it|=2;var i=Ny();(an!==e||dn!==t)&&(ts=null,Li=zt()+500,xo(e,t));do try{Qj();break}catch(l){Sy(e,l)}while(!0);ym(),eu.current=i,it=s,Gt!==null?t=0:(an=null,dn=0,t=en)}if(t!==0){if(t===2&&(s=Df(e),s!==0&&(r=s,t=fh(e,s))),t===1)throw n=ol,xo(e,0),Rs(e,r),Wn(e,zt()),n;if(t===6)Rs(e,r);else{if(s=e.current.alternate,!(r&30)&&!Kj(s)&&(t=ru(e,r),t===2&&(i=Df(e),i!==0&&(r=i,t=fh(e,i))),t===1))throw n=ol,xo(e,0),Rs(e,r),Wn(e,zt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(J(345));case 2:ho(e,Fn,ts);break;case 3:if(Rs(e,r),(r&130023424)===r&&(t=Lm+500-zt(),10<t)){if(Bc(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){An(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Hf(ho.bind(null,e,Fn,ts),t);break}ho(e,Fn,ts);break;case 4:if(Rs(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Nr(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=zt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Hj(r/1960))-r,10<r){e.timeoutHandle=Hf(ho.bind(null,e,Fn,ts),r);break}ho(e,Fn,ts);break;case 5:ho(e,Fn,ts);break;default:throw Error(J(329))}}}return Wn(e,zt()),e.callbackNode===n?by.bind(null,e):null}function fh(e,t){var n=Da;return e.current.memoizedState.isDehydrated&&(xo(e,t).flags|=256),e=ru(e,t),e!==2&&(t=Fn,Fn=n,t!==null&&hh(t)),e}function hh(e){Fn===null?Fn=e:Fn.push.apply(Fn,e)}function Kj(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!jr(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Rs(e,t){for(t&=~Am,t&=~_u,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Nr(t),r=1<<n;e[n]=-1,t&=~r}}function ev(e){if(it&6)throw Error(J(327));wi();var t=Bc(e,0);if(!(t&1))return Wn(e,zt()),null;var n=ru(e,t);if(e.tag!==0&&n===2){var r=Df(e);r!==0&&(t=r,n=fh(e,r))}if(n===1)throw n=ol,xo(e,0),Rs(e,t),Wn(e,zt()),n;if(n===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ho(e,Fn,ts),Wn(e,zt()),null}function Im(e,t){var n=it;it|=1;try{return e(t)}finally{it=n,it===0&&(Li=zt()+500,Pu&&Xs())}}function Co(e){_s!==null&&_s.tag===0&&!(it&6)&&wi();var t=it;it|=1;var n=fr.transition,r=ht;try{if(fr.transition=null,ht=1,e)return e()}finally{ht=r,fr.transition=n,it=t,!(it&6)&&Xs()}}function $m(){Yn=ci.current,Nt(ci)}function xo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Nj(n)),Gt!==null)for(n=Gt.return;n!==null;){var r=n;switch(gm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wc();break;case 3:_i(),Nt(Vn),Nt(kn),jm();break;case 5:km(r);break;case 4:_i();break;case 13:Nt(Mt);break;case 19:Nt(Mt);break;case 10:wm(r.type._context);break;case 22:case 23:$m()}n=n.return}if(an=e,Gt=e=zs(e.current,null),dn=Yn=t,en=0,ol=null,Am=_u=jo=0,Fn=Da=null,po!==null){for(t=0;t<po.length;t++)if(n=po[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}po=null}return e}function Sy(e,t){do{var n=Gt;try{if(ym(),yc.current=Jc,Zc){for(var r=_t.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Zc=!1}if(ko=0,on=Jt=_t=null,$a=!1,nl=0,_m.current=null,n===null||n.return===null){en=1,ol=t,Gt=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=dn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=zg(a);if(y!==null){y.flags&=-257,Vg(y,a,l,i,t),y.mode&1&&Fg(i,u,t),t=y,c=u;var p=t.updateQueue;if(p===null){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}else{if(!(t&1)){Fg(i,u,t),Om();break e}c=Error(J(426))}}else if(Tt&&l.mode&1){var w=zg(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Vg(w,a,l,i,t),vm(Ai(c,l));break e}}i=c=Ai(c,l),en!==4&&(en=2),Da===null?Da=[i]:Da.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=oy(i,c,t);Lg(i,x);break e;case 1:l=c;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Bs===null||!Bs.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=iy(i,l,t);Lg(i,S);break e}}i=i.return}while(i!==null)}jy(n)}catch(N){t=N,Gt===n&&n!==null&&(Gt=n=n.return);continue}break}while(!0)}function Ny(){var e=eu.current;return eu.current=Jc,e===null?Jc:e}function Om(){(en===0||en===3||en===2)&&(en=4),an===null||!(jo&268435455)&&!(_u&268435455)||Rs(an,dn)}function ru(e,t){var n=it;it|=2;var r=Ny();(an!==e||dn!==t)&&(ts=null,xo(e,t));do try{Gj();break}catch(s){Sy(e,s)}while(!0);if(ym(),it=n,eu.current=r,Gt!==null)throw Error(J(261));return an=null,dn=0,en}function Gj(){for(;Gt!==null;)ky(Gt)}function Qj(){for(;Gt!==null&&!wk();)ky(Gt)}function ky(e){var t=Ey(e.alternate,e,Yn);e.memoizedProps=e.pendingProps,t===null?jy(e):Gt=t,_m.current=null}function jy(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Vj(n,t),n!==null){n.flags&=32767,Gt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{en=6,Gt=null;return}}else if(n=zj(n,t,Yn),n!==null){Gt=n;return}if(t=t.sibling,t!==null){Gt=t;return}Gt=t=e}while(t!==null);en===0&&(en=5)}function ho(e,t,n){var r=ht,s=fr.transition;try{fr.transition=null,ht=1,Yj(e,t,n,r)}finally{fr.transition=s,ht=r}return null}function Yj(e,t,n,r){do wi();while(_s!==null);if(it&6)throw Error(J(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Rk(e,i),e===an&&(Gt=an=null,dn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yl||(Yl=!0,Py(Dc,function(){return wi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=fr.transition,fr.transition=null;var a=ht;ht=1;var l=it;it|=4,_m.current=null,Wj(e,n),yy(n,e),gj(Wf),Fc=!!qf,Wf=qf=null,e.current=n,Uj(n),bk(),it=l,ht=a,fr.transition=i}else e.current=n;if(Yl&&(Yl=!1,_s=e,nu=s),i=e.pendingLanes,i===0&&(Bs=null),kk(n.stateNode),Wn(e,zt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(tu)throw tu=!1,e=uh,uh=null,e;return nu&1&&e.tag!==0&&wi(),i=e.pendingLanes,i&1?e===dh?Ba++:(Ba=0,dh=e):Ba=0,Xs(),null}function wi(){if(_s!==null){var e=ox(nu),t=fr.transition,n=ht;try{if(fr.transition=null,ht=16>e?16:e,_s===null)var r=!1;else{if(e=_s,_s=null,nu=0,it&6)throw Error(J(331));var s=it;for(it|=4,xe=e.current;xe!==null;){var i=xe,a=i.child;if(xe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(xe=u;xe!==null;){var f=xe;switch(f.tag){case 0:case 11:case 15:Oa(8,f,i)}var m=f.child;if(m!==null)m.return=f,xe=m;else for(;xe!==null;){f=xe;var h=f.sibling,y=f.return;if(gy(f),f===u){xe=null;break}if(h!==null){h.return=y,xe=h;break}xe=y}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}xe=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,xe=a;else e:for(;xe!==null;){if(i=xe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Oa(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,xe=x;break e}xe=i.return}}var v=e.current;for(xe=v;xe!==null;){a=xe;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,xe=b;else e:for(a=v;xe!==null;){if(l=xe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Mu(9,l)}}catch(N){Ot(l,l.return,N)}if(l===a){xe=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,xe=S;break e}xe=l.return}}if(it=s,Xs(),Wr&&typeof Wr.onPostCommitFiberRoot=="function")try{Wr.onPostCommitFiberRoot(Nu,e)}catch{}r=!0}return r}finally{ht=n,fr.transition=t}}return!1}function tv(e,t,n){t=Ai(n,t),t=oy(e,t,1),e=Ds(e,t,1),t=An(),e!==null&&(ml(e,1,t),Wn(e,t))}function Ot(e,t,n){if(e.tag===3)tv(e,e,n);else for(;t!==null;){if(t.tag===3){tv(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bs===null||!Bs.has(r))){e=Ai(n,e),e=iy(t,e,1),t=Ds(t,e,1),e=An(),t!==null&&(ml(t,1,e),Wn(t,e));break}}t=t.return}}function Xj(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=An(),e.pingedLanes|=e.suspendedLanes&n,an===e&&(dn&n)===n&&(en===4||en===3&&(dn&130023424)===dn&&500>zt()-Lm?xo(e,0):Am|=n),Wn(e,t)}function Cy(e,t){t===0&&(e.mode&1?(t=Fl,Fl<<=1,!(Fl&130023424)&&(Fl=4194304)):t=1);var n=An();e=us(e,t),e!==null&&(ml(e,t,n),Wn(e,n))}function Zj(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Cy(e,n)}function Jj(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(t),Cy(e,n)}var Ey;Ey=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vn.current)zn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return zn=!1,Fj(e,t,n);zn=!!(e.flags&131072)}else zn=!1,Tt&&t.flags&1048576&&Mx(t,Kc,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;bc(e,t),e=t.pendingProps;var s=Ti(t,kn.current);yi(t,n),s=Em(null,t,r,e,s,n);var i=Pm();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qn(r)?(i=!0,Uc(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sm(t),s.updater=Ru,t.stateNode=s,s._reactInternals=t,Jf(t,r,e,n),t=nh(null,t,r,!0,i,n)):(t.tag=0,Tt&&i&&pm(t),Tn(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(bc(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=tC(r),e=yr(r,e),s){case 0:t=th(null,t,r,e,n);break e;case 1:t=Ug(null,t,r,e,n);break e;case 11:t=qg(null,t,r,e,n);break e;case 14:t=Wg(null,t,r,yr(r.type,e),n);break e}throw Error(J(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yr(r,s),th(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yr(r,s),Ug(e,t,r,s,n);case 3:e:{if(uy(t),e===null)throw Error(J(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Ox(e,t),Yc(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Ai(Error(J(423)),t),t=Hg(e,t,r,n,s);break e}else if(r!==s){s=Ai(Error(J(424)),t),t=Hg(e,t,r,n,s);break e}else for(Zn=Os(t.stateNode.containerInfo.firstChild),tr=t,Tt=!0,Sr=null,n=Ix(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ri(),r===s){t=ds(e,t,n);break e}Tn(e,t,r,n)}t=t.child}return t;case 5:return Dx(t),e===null&&Yf(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,Uf(r,s)?a=null:i!==null&&Uf(r,i)&&(t.flags|=32),cy(e,t),Tn(e,t,a,n),t.child;case 6:return e===null&&Yf(t),null;case 13:return dy(e,t,n);case 4:return Nm(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Mi(t,null,r,n):Tn(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yr(r,s),qg(e,t,r,s,n);case 7:return Tn(e,t,t.pendingProps,n),t.child;case 8:return Tn(e,t,t.pendingProps.children,n),t.child;case 12:return Tn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,yt(Gc,r._currentValue),r._currentValue=a,i!==null)if(jr(i.value,a)){if(i.children===s.children&&!Vn.current){t=ds(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=as(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Xf(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(J(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Xf(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Tn(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,yi(t,n),s=hr(s),r=r(s),t.flags|=1,Tn(e,t,r,n),t.child;case 14:return r=t.type,s=yr(r,t.pendingProps),s=yr(r.type,s),Wg(e,t,r,s,n);case 15:return ay(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yr(r,s),bc(e,t),t.tag=1,qn(r)?(e=!0,Uc(t)):e=!1,yi(t,n),sy(t,r,s),Jf(t,r,s,n),nh(null,t,r,!0,e,n);case 19:return fy(e,t,n);case 22:return ly(e,t,n)}throw Error(J(156,t.tag))};function Py(e,t){return tx(e,t)}function eC(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(e,t,n,r){return new eC(e,t,n,r)}function Dm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tC(e){if(typeof e=="function")return Dm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rm)return 11;if(e===sm)return 14}return 2}function zs(e,t){var n=e.alternate;return n===null?(n=ur(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function kc(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")Dm(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Jo:return yo(n.children,s,i,t);case nm:a=8,s|=8;break;case Nf:return e=ur(12,n,t,s|2),e.elementType=Nf,e.lanes=i,e;case kf:return e=ur(13,n,t,s),e.elementType=kf,e.lanes=i,e;case jf:return e=ur(19,n,t,s),e.elementType=jf,e.lanes=i,e;case D0:return Au(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $0:a=10;break e;case O0:a=9;break e;case rm:a=11;break e;case sm:a=14;break e;case Cs:a=16,r=null;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=ur(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function yo(e,t,n,r){return e=ur(7,e,r,t),e.lanes=n,e}function Au(e,t,n,r){return e=ur(22,e,r,t),e.elementType=D0,e.lanes=n,e.stateNode={isHidden:!1},e}function Dd(e,t,n){return e=ur(6,e,null,t),e.lanes=n,e}function Bd(e,t,n){return t=ur(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function nC(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yd(0),this.expirationTimes=yd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bm(e,t,n,r,s,i,a,l,c){return e=new nC(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ur(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sm(i),e}function rC(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ty(e){if(!e)return Us;e=e._reactInternals;e:{if(Oo(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var n=e.type;if(qn(n))return Tx(e,n,t)}return t}function Ry(e,t,n,r,s,i,a,l,c){return e=Bm(n,r,!0,e,s,i,a,l,c),e.context=Ty(null),n=e.current,r=An(),s=Fs(n),i=as(r,s),i.callback=t??null,Ds(n,i,s),e.current.lanes=s,ml(e,s,r),Wn(e,r),e}function Lu(e,t,n,r){var s=t.current,i=An(),a=Fs(s);return n=Ty(n),t.context===null?t.context=n:t.pendingContext=n,t=as(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ds(s,t,a),e!==null&&(kr(e,s,a,i),xc(e,s,a)),a}function su(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Fm(e,t){nv(e,t),(e=e.alternate)&&nv(e,t)}function sC(){return null}var My=typeof reportError=="function"?reportError:function(e){console.error(e)};function zm(e){this._internalRoot=e}Iu.prototype.render=zm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));Lu(e,t,null,null)};Iu.prototype.unmount=zm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Co(function(){Lu(null,e,null,null)}),t[cs]=null}};function Iu(e){this._internalRoot=e}Iu.prototype.unstable_scheduleHydration=function(e){if(e){var t=lx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ts.length&&t!==0&&t<Ts[n].priority;n++);Ts.splice(n,0,e),n===0&&ux(e)}};function Vm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rv(){}function oC(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=su(a);i.call(u)}}var a=Ry(t,r,e,0,null,!1,!1,"",rv);return e._reactRootContainer=a,e[cs]=a.current,Xa(e.nodeType===8?e.parentNode:e),Co(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=su(c);l.call(u)}}var c=Bm(e,0,!1,null,null,!1,!1,"",rv);return e._reactRootContainer=c,e[cs]=c.current,Xa(e.nodeType===8?e.parentNode:e),Co(function(){Lu(t,c,n,r)}),c}function Ou(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=su(a);l.call(c)}}Lu(t,a,e,s)}else a=oC(n,t,e,s,r);return su(a)}ix=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ea(t.pendingLanes);n!==0&&(am(t,n|1),Wn(t,zt()),!(it&6)&&(Li=zt()+500,Xs()))}break;case 13:Co(function(){var r=us(e,1);if(r!==null){var s=An();kr(r,e,1,s)}}),Fm(e,1)}};lm=function(e){if(e.tag===13){var t=us(e,134217728);if(t!==null){var n=An();kr(t,e,134217728,n)}Fm(e,134217728)}};ax=function(e){if(e.tag===13){var t=Fs(e),n=us(e,t);if(n!==null){var r=An();kr(n,e,t,r)}Fm(e,t)}};lx=function(){return ht};cx=function(e,t){var n=ht;try{return ht=e,t()}finally{ht=n}};If=function(e,t,n){switch(t){case"input":if(Pf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Eu(r);if(!s)throw Error(J(90));F0(r),Pf(r,s)}}}break;case"textarea":V0(e,n);break;case"select":t=n.value,t!=null&&pi(e,!!n.multiple,t,!1)}};Q0=Im;Y0=Co;var iC={usingClientEntryPoint:!1,Events:[gl,ri,Eu,K0,G0,Im]},va={findFiberByHostInstance:mo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aC={bundleType:va.bundleType,version:va.version,rendererPackageName:va.rendererPackageName,rendererConfig:va.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ms.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=J0(e),e===null?null:e.stateNode},findFiberByHostInstance:va.findFiberByHostInstance||sC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xl.isDisabled&&Xl.supportsFiber)try{Nu=Xl.inject(aC),Wr=Xl}catch{}}sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iC;sr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vm(t))throw Error(J(200));return rC(e,t,null,n)};sr.createRoot=function(e,t){if(!Vm(e))throw Error(J(299));var n=!1,r="",s=My;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Bm(e,1,!1,null,null,n,!1,r,s),e[cs]=t.current,Xa(e.nodeType===8?e.parentNode:e),new zm(t)};sr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=J0(t),e=e===null?null:e.stateNode,e};sr.flushSync=function(e){return Co(e)};sr.hydrate=function(e,t,n){if(!$u(t))throw Error(J(200));return Ou(null,e,t,!0,n)};sr.hydrateRoot=function(e,t,n){if(!Vm(e))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=My;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Ry(t,null,e,1,n??null,s,!1,i,a),e[cs]=t.current,Xa(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Iu(t)};sr.render=function(e,t,n){if(!$u(t))throw Error(J(200));return Ou(null,e,t,!1,n)};sr.unmountComponentAtNode=function(e){if(!$u(e))throw Error(J(40));return e._reactRootContainer?(Co(function(){Ou(null,null,e,!1,function(){e._reactRootContainer=null,e[cs]=null})}),!0):!1};sr.unstable_batchedUpdates=Im;sr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$u(n))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return Ou(e,t,n,!1,r)};sr.version="18.3.1-next-f1338f8080-20240426";function _y(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_y)}catch(e){console.error(e)}}_y(),_0.exports=sr;var Do=_0.exports;const lC=y0(Do);var Ay,sv=Do;Ay=sv.createRoot,sv.hydrateRoot;const cC=1,uC=1e6,qm="simulchess_toasts_enabled";function dC(){if(typeof window>"u")return!0;const e=localStorage.getItem(qm);return e===null?!0:e==="true"}function fC(e){typeof window>"u"||localStorage.setItem(qm,String(e))}let Fd=0;function hC(){return Fd=(Fd+1)%Number.MAX_SAFE_INTEGER,Fd.toString()}const zd=new Map,ov=e=>{if(zd.has(e))return;const t=setTimeout(()=>{zd.delete(e),Fa({type:"REMOVE_TOAST",toastId:e})},uC);zd.set(e,t)},mC=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,cC)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?ov(n):e.toasts.forEach(r=>{ov(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},jc=[];let Cc={toasts:[]};function Fa(e){Cc=mC(Cc,e),jc.forEach(t=>{t(Cc)})}function pC({...e}){if(!(typeof window<"u"?localStorage.getItem(qm)!=="false":!0))return{id:"",dismiss:()=>{},update:()=>{}};const n=hC(),r=i=>Fa({type:"UPDATE_TOAST",toast:{...i,id:n}}),s=()=>Fa({type:"DISMISS_TOAST",toastId:n});return Fa({type:"ADD_TOAST",toast:{...e,id:n,open:!0,onOpenChange:i=>{i||s()}}}),{id:n,dismiss:s,update:r}}function xl(){const[e,t]=d.useState(Cc);return d.useEffect(()=>(jc.push(t),()=>{const n=jc.indexOf(t);n>-1&&jc.splice(n,1)}),[e]),{...e,toast:pC,dismiss:n=>Fa({type:"DISMISS_TOAST",toastId:n})}}function je(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function iv(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Wm(...e){return t=>{let n=!1;const r=e.map(s=>{const i=iv(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():iv(e[s],null)}}}}function Ge(...e){return d.useCallback(Wm(...e),e)}function gC(e,t){const n=d.createContext(t),r=i=>{const{children:a,...l}=i,c=d.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:a})};r.displayName=e+"Provider";function s(i){const a=d.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,s]}function Un(e,t=[]){let n=[];function r(i,a){const l=d.createContext(a),c=n.length;n=[...n,a];const u=m=>{var x;const{scope:h,children:y,...p}=m,g=((x=h==null?void 0:h[e])==null?void 0:x[c])||l,w=d.useMemo(()=>p,Object.values(p));return o.jsx(g.Provider,{value:w,children:y})};u.displayName=i+"Provider";function f(m,h){var g;const y=((g=h==null?void 0:h[e])==null?void 0:g[c])||l,p=d.useContext(y);if(p)return p;if(a!==void 0)return a;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[u,f]}const s=()=>{const i=n.map(a=>d.createContext(a));return function(l){const c=(l==null?void 0:l[e])||i;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,vC(s,...t)]}function vC(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const m=c(i)[`__scope${u}`];return{...l,...m}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function Ii(e){const t=yC(e),n=d.forwardRef((r,s)=>{const{children:i,...a}=r,l=d.Children.toArray(i),c=l.find(wC);if(c){const u=c.props.children,f=l.map(m=>m===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:m);return o.jsx(t,{...a,ref:s,children:d.isValidElement(u)?d.cloneElement(u,void 0,f):null})}return o.jsx(t,{...a,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}var xC=Ii("Slot");function yC(e){const t=d.forwardRef((n,r)=>{const{children:s,...i}=n;if(d.isValidElement(s)){const a=SC(s),l=bC(i,s.props);return s.type!==d.Fragment&&(l.ref=r?Wm(r,a):a),d.cloneElement(s,l)}return d.Children.count(s)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ly=Symbol("radix.slottable");function Iy(e){const t=({children:n})=>o.jsx(o.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Ly,t}function wC(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ly}function bC(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{i(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function SC(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Um(e){const t=e+"CollectionProvider",[n,r]=Un(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:w,children:x}=g,v=Rn.useRef(null),b=Rn.useRef(new Map).current;return o.jsx(s,{scope:w,itemMap:b,collectionRef:v,children:x})};a.displayName=t;const l=e+"CollectionSlot",c=Ii(l),u=Rn.forwardRef((g,w)=>{const{scope:x,children:v}=g,b=i(l,x),S=Ge(w,b.collectionRef);return o.jsx(c,{ref:S,children:v})});u.displayName=l;const f=e+"CollectionItemSlot",m="data-radix-collection-item",h=Ii(f),y=Rn.forwardRef((g,w)=>{const{scope:x,children:v,...b}=g,S=Rn.useRef(null),N=Ge(w,S),j=i(f,x);return Rn.useEffect(()=>(j.itemMap.set(S,{ref:S,...b}),()=>void j.itemMap.delete(S))),o.jsx(h,{[m]:"",ref:N,children:v})});y.displayName=f;function p(g){const w=i(e+"CollectionConsumer",g);return Rn.useCallback(()=>{const v=w.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${m}]`));return Array.from(w.itemMap.values()).sort((j,k)=>b.indexOf(j.ref.current)-b.indexOf(k.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:u,ItemSlot:y},p,r]}var NC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Oe=NC.reduce((e,t)=>{const n=Ii(`Primitive.${t}`),r=d.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function $y(e,t){e&&Do.flushSync(()=>e.dispatchEvent(t))}function Vt(e){const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function kC(e,t=globalThis==null?void 0:globalThis.document){const n=Vt(e);d.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var jC="DismissableLayer",mh="dismissableLayer.update",CC="dismissableLayer.pointerDownOutside",EC="dismissableLayer.focusOutside",av,Oy=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yl=d.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=e,u=d.useContext(Oy),[f,m]=d.useState(null),h=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=d.useState({}),p=Ge(t,k=>m(k)),g=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(w),v=f?g.indexOf(f):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,S=v>=x,N=TC(k=>{const C=k.target,R=[...u.branches].some(P=>P.contains(C));!S||R||(s==null||s(k),a==null||a(k),k.defaultPrevented||l==null||l())},h),j=RC(k=>{const C=k.target;[...u.branches].some(P=>P.contains(C))||(i==null||i(k),a==null||a(k),k.defaultPrevented||l==null||l())},h);return kC(k=>{v===u.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},h),d.useEffect(()=>{if(f)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(av=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),lv(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=av)}},[f,h,n,u]),d.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),lv())},[f,u]),d.useEffect(()=>{const k=()=>y({});return document.addEventListener(mh,k),()=>document.removeEventListener(mh,k)},[]),o.jsx(Oe.div,{...c,ref:p,style:{pointerEvents:b?S?"auto":"none":void 0,...e.style},onFocusCapture:je(e.onFocusCapture,j.onFocusCapture),onBlurCapture:je(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:je(e.onPointerDownCapture,N.onPointerDownCapture)})});yl.displayName=jC;var PC="DismissableLayerBranch",Dy=d.forwardRef((e,t)=>{const n=d.useContext(Oy),r=d.useRef(null),s=Ge(t,r);return d.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(Oe.div,{...e,ref:s})});Dy.displayName=PC;function TC(e,t=globalThis==null?void 0:globalThis.document){const n=Vt(e),r=d.useRef(!1),s=d.useRef(()=>{});return d.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){By(CC,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function RC(e,t=globalThis==null?void 0:globalThis.document){const n=Vt(e),r=d.useRef(!1);return d.useEffect(()=>{const s=i=>{i.target&&!r.current&&By(EC,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function lv(){const e=new CustomEvent(mh);document.dispatchEvent(e)}function By(e,t,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?$y(s,i):s.dispatchEvent(i)}var MC=yl,_C=Dy,ln=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{},AC="Portal",Du=d.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[s,i]=d.useState(!1);ln(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?lC.createPortal(o.jsx(Oe.div,{...r,ref:t}),a):null});Du.displayName=AC;function LC(e,t){return d.useReducer((n,r)=>t[n][r]??n,e)}var Ir=e=>{const{present:t,children:n}=e,r=IC(t),s=typeof n=="function"?n({present:r.isPresent}):d.Children.only(n),i=Ge(r.ref,$C(s));return typeof n=="function"||r.isPresent?d.cloneElement(s,{ref:i}):null};Ir.displayName="Presence";function IC(e){const[t,n]=d.useState(),r=d.useRef({}),s=d.useRef(e),i=d.useRef("none"),a=e?"mounted":"unmounted",[l,c]=LC(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const u=Zl(r.current);i.current=l==="mounted"?u:"none"},[l]),ln(()=>{const u=r.current,f=s.current;if(f!==e){const h=i.current,y=Zl(u);e?c("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&h!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),ln(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,m=y=>{const g=Zl(r.current).includes(y.animationName);if(y.target===t&&g&&(c("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},h=y=>{y.target===t&&(i.current=Zl(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:d.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function Zl(e){return(e==null?void 0:e.animationName)||"none"}function $C(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Eo({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,s]=OC({defaultProp:t,onChange:n}),i=e!==void 0,a=i?e:r,l=Vt(n),c=d.useCallback(u=>{if(i){const m=typeof u=="function"?u(e):u;m!==e&&l(m)}else s(u)},[i,e,s,l]);return[a,c]}function OC({defaultProp:e,onChange:t}){const n=d.useState(e),[r]=n,s=d.useRef(r),i=Vt(t);return d.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var DC="VisuallyHidden",wl=d.forwardRef((e,t)=>o.jsx(Oe.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));wl.displayName=DC;var BC=wl,Hm="ToastProvider",[Km,FC,zC]=Um("Toast"),[Fy,n3]=Un("Toast",[zC]),[VC,Bu]=Fy(Hm),zy=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=e,[l,c]=d.useState(null),[u,f]=d.useState(0),m=d.useRef(!1),h=d.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Hm}\`. Expected non-empty \`string\`.`),o.jsx(Km.Provider,{scope:t,children:o.jsx(VC,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:d.useCallback(()=>f(y=>y+1),[]),onToastRemove:d.useCallback(()=>f(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:h,children:a})})};zy.displayName=Hm;var Vy="ToastViewport",qC=["F8"],ph="toast.viewportPause",gh="toast.viewportResume",qy=d.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=qC,label:s="Notifications ({hotkey})",...i}=e,a=Bu(Vy,n),l=FC(n),c=d.useRef(null),u=d.useRef(null),f=d.useRef(null),m=d.useRef(null),h=Ge(t,m,a.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=a.toastCount>0;d.useEffect(()=>{const w=x=>{var b;r.length!==0&&r.every(S=>x[S]||x.code===S)&&((b=m.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),d.useEffect(()=>{const w=c.current,x=m.current;if(p&&w&&x){const v=()=>{if(!a.isClosePausedRef.current){const j=new CustomEvent(ph);x.dispatchEvent(j),a.isClosePausedRef.current=!0}},b=()=>{if(a.isClosePausedRef.current){const j=new CustomEvent(gh);x.dispatchEvent(j),a.isClosePausedRef.current=!1}},S=j=>{!w.contains(j.relatedTarget)&&b()},N=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",v),w.addEventListener("focusout",S),w.addEventListener("pointermove",v),w.addEventListener("pointerleave",N),window.addEventListener("blur",v),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",v),w.removeEventListener("focusout",S),w.removeEventListener("pointermove",v),w.removeEventListener("pointerleave",N),window.removeEventListener("blur",v),window.removeEventListener("focus",b)}}},[p,a.isClosePausedRef]);const g=d.useCallback(({tabbingDirection:w})=>{const v=l().map(b=>{const S=b.ref.current,N=[S,...n2(S)];return w==="forwards"?N:N.reverse()});return(w==="forwards"?v.reverse():v).flat()},[l]);return d.useEffect(()=>{const w=m.current;if(w){const x=v=>{var N,j,k;const b=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!b){const C=document.activeElement,R=v.shiftKey;if(v.target===w&&R){(N=u.current)==null||N.focus();return}const _=g({tabbingDirection:R?"backwards":"forwards"}),q=_.findIndex(M=>M===C);Vd(_.slice(q+1))?v.preventDefault():R?(j=u.current)==null||j.focus():(k=f.current)==null||k.focus()}};return w.addEventListener("keydown",x),()=>w.removeEventListener("keydown",x)}},[l,g]),o.jsxs(_C,{ref:c,role:"region","aria-label":s.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&o.jsx(vh,{ref:u,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"forwards"});Vd(w)}}),o.jsx(Km.Slot,{scope:n,children:o.jsx(Oe.ol,{tabIndex:-1,...i,ref:h})}),p&&o.jsx(vh,{ref:f,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"backwards"});Vd(w)}})]})});qy.displayName=Vy;var Wy="ToastFocusProxy",vh=d.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,i=Bu(Wy,n);return o.jsx(wl,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});vh.displayName=Wy;var Fu="Toast",WC="toast.swipeStart",UC="toast.swipeMove",HC="toast.swipeCancel",KC="toast.swipeEnd",Uy=d.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...a}=e,[l=!0,c]=Eo({prop:r,defaultProp:s,onChange:i});return o.jsx(Ir,{present:n||l,children:o.jsx(YC,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:Vt(e.onPause),onResume:Vt(e.onResume),onSwipeStart:je(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:je(e.onSwipeMove,u=>{const{x:f,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:je(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:je(e.onSwipeEnd,u=>{const{x:f,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});Uy.displayName=Fu;var[GC,QC]=Fy(Fu,{onClose(){}}),YC=d.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:f,onSwipeMove:m,onSwipeCancel:h,onSwipeEnd:y,...p}=e,g=Bu(Fu,n),[w,x]=d.useState(null),v=Ge(t,M=>x(M)),b=d.useRef(null),S=d.useRef(null),N=s||g.duration,j=d.useRef(0),k=d.useRef(N),C=d.useRef(0),{onToastAdd:R,onToastRemove:P}=g,D=Vt(()=>{var z;(w==null?void 0:w.contains(document.activeElement))&&((z=g.viewport)==null||z.focus()),a()}),_=d.useCallback(M=>{!M||M===1/0||(window.clearTimeout(C.current),j.current=new Date().getTime(),C.current=window.setTimeout(D,M))},[D]);d.useEffect(()=>{const M=g.viewport;if(M){const z=()=>{_(k.current),u==null||u()},Q=()=>{const Y=new Date().getTime()-j.current;k.current=k.current-Y,window.clearTimeout(C.current),c==null||c()};return M.addEventListener(ph,Q),M.addEventListener(gh,z),()=>{M.removeEventListener(ph,Q),M.removeEventListener(gh,z)}}},[g.viewport,N,c,u,_]),d.useEffect(()=>{i&&!g.isClosePausedRef.current&&_(N)},[i,N,g.isClosePausedRef,_]),d.useEffect(()=>(R(),()=>P()),[R,P]);const q=d.useMemo(()=>w?Zy(w):null,[w]);return g.viewport?o.jsxs(o.Fragment,{children:[q&&o.jsx(XC,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:q}),o.jsx(GC,{scope:n,onClose:D,children:Do.createPortal(o.jsx(Km.ItemSlot,{scope:n,children:o.jsx(MC,{asChild:!0,onEscapeKeyDown:je(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||D(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(Oe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...p,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:je(e.onKeyDown,M=>{M.key==="Escape"&&(l==null||l(M.nativeEvent),M.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:je(e.onPointerDown,M=>{M.button===0&&(b.current={x:M.clientX,y:M.clientY})}),onPointerMove:je(e.onPointerMove,M=>{if(!b.current)return;const z=M.clientX-b.current.x,Q=M.clientY-b.current.y,Y=!!S.current,T=["left","right"].includes(g.swipeDirection),$=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,V=T?$(0,z):0,G=T?0:$(0,Q),de=M.pointerType==="touch"?10:2,ne={x:V,y:G},ve={originalEvent:M,delta:ne};Y?(S.current=ne,Jl(UC,m,ve,{discrete:!1})):cv(ne,g.swipeDirection,de)?(S.current=ne,Jl(WC,f,ve,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(z)>de||Math.abs(Q)>de)&&(b.current=null)}),onPointerUp:je(e.onPointerUp,M=>{const z=S.current,Q=M.target;if(Q.hasPointerCapture(M.pointerId)&&Q.releasePointerCapture(M.pointerId),S.current=null,b.current=null,z){const Y=M.currentTarget,T={originalEvent:M,delta:z};cv(z,g.swipeDirection,g.swipeThreshold)?Jl(KC,y,T,{discrete:!0}):Jl(HC,h,T,{discrete:!0}),Y.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),XC=e=>{const{__scopeToast:t,children:n,...r}=e,s=Bu(Fu,t),[i,a]=d.useState(!1),[l,c]=d.useState(!1);return e2(()=>a(!0)),d.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(Du,{asChild:!0,children:o.jsx(wl,{...r,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},ZC="ToastTitle",Hy=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return o.jsx(Oe.div,{...r,ref:t})});Hy.displayName=ZC;var JC="ToastDescription",Ky=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return o.jsx(Oe.div,{...r,ref:t})});Ky.displayName=JC;var Gy="ToastAction",Qy=d.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?o.jsx(Xy,{altText:n,asChild:!0,children:o.jsx(Gm,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Gy}\`. Expected non-empty \`string\`.`),null)});Qy.displayName=Gy;var Yy="ToastClose",Gm=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=QC(Yy,n);return o.jsx(Xy,{asChild:!0,children:o.jsx(Oe.button,{type:"button",...r,ref:t,onClick:je(e.onClick,s.onClose)})})});Gm.displayName=Yy;var Xy=d.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return o.jsx(Oe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function Zy(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),t2(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...Zy(r))}}),t}function Jl(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?$y(s,i):s.dispatchEvent(i)}var cv=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),i=r>s;return t==="left"||t==="right"?i&&r>n:!i&&s>n};function e2(e=()=>{}){const t=Vt(e);ln(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function t2(e){return e.nodeType===e.ELEMENT_NODE}function n2(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Vd(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var r2=zy,Jy=qy,ew=Uy,tw=Hy,nw=Ky,rw=Qy,sw=Gm;function ow(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=ow(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function iw(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=ow(e))&&(r&&(r+=" "),r+=t);return r}const uv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,dv=iw,zu=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return dv(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=t,a=Object.keys(s).map(u=>{const f=n==null?void 0:n[u],m=i==null?void 0:i[u];if(f===null)return null;const h=uv(f)||uv(m);return s[u][h]}),l=n&&Object.entries(n).reduce((u,f)=>{let[m,h]=f;return h===void 0||(u[m]=h),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,f)=>{let{class:m,className:h,...y}=f;return Object.entries(y).every(p=>{let[g,w]=p;return Array.isArray(w)?w.includes({...i,...l}[g]):{...i,...l}[g]===w})?[...u,m,h]:u},[]);return dv(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),aw=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=d.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>d.createElement("svg",{ref:c,...o2,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:aw("lucide",s),...l},[...a.map(([u,f])=>d.createElement(u,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(e,t)=>{const n=d.forwardRef(({className:r,...s},i)=>d.createElement(i2,{ref:i,iconNode:t,className:aw(`lucide-${s2(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=Se("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=Se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=Se("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=Se("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=Se("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=Se("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=Se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=Se("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=Se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=Se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=Se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=Se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=Se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=Se("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=Se("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=Se("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=Se("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=Se("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=Se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=Se("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=Se("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=Se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=Se("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=Se("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=Se("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=Se("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=Se("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=Se("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=Se("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=Se("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=Se("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=Se("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=Se("Infinity",[["path",{d:"M12 12c-2-2.67-4-4-6-4a4 4 0 1 0 0 8c2 0 4-1.33 6-4Zm0 0c2 2.67 4 4 6 4a4 4 0 0 0 0-8c-2 0-4 1.33-6 4Z",key:"1z0uae"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=Se("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=Se("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=Se("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=Se("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=Se("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=Se("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=Se("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=Se("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=Se("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=Se("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=Se("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=Se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=Se("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=Se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=Se("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=Se("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=Se("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=Se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=Se("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=Se("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=Se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=Se("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=Se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=Se("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=Se("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=Se("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=Se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=Se("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Xm="-",_2=e=>{const t=L2(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const l=a.split(Xm);return l[0]===""&&l.length!==1&&l.shift(),Nw(l,t)||A2(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},Nw=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?Nw(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(Xm);return(a=t.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},pv=/^\[(.+)\]$/,A2=e=>{if(pv.test(e)){const t=pv.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},L2=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return $2(Object.entries(e.classGroups),n).forEach(([i,a])=>{xh(a,r,i,t)}),r},xh=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:gv(t,s);i.classGroupId=n;return}if(typeof s=="function"){if(I2(s)){xh(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{xh(a,gv(t,i),n,r)})})},gv=(e,t)=>{let n=e;return t.split(Xm).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},I2=e=>e.isThemeGetter,$2=(e,t)=>t?e.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[t+a,l])):i);return[n,s]}):e,O2=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},kw="!",D2=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],i=t.length,a=l=>{const c=[];let u=0,f=0,m;for(let w=0;w<l.length;w++){let x=l[w];if(u===0){if(x===s&&(r||l.slice(w,w+i)===t)){c.push(l.slice(f,w)),f=w+i;continue}if(x==="/"){m=w;continue}}x==="["?u++:x==="]"&&u--}const h=c.length===0?l:l.substring(f),y=h.startsWith(kw),p=y?h.substring(1):h,g=m&&m>f?m-f:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:p,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:a}):a},B2=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},F2=e=>({cache:O2(e.cacheSize),parseClassName:D2(e),..._2(e)}),z2=/\s+/,V2=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,i=[],a=e.trim().split(z2);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:f,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:y}=n(u);let p=!!y,g=r(p?h.substring(0,y):h);if(!g){if(!p){l=u+(l.length>0?" "+l:l);continue}if(g=r(h),!g){l=u+(l.length>0?" "+l:l);continue}p=!1}const w=B2(f).join(":"),x=m?w+kw:w,v=x+g;if(i.includes(v))continue;i.push(v);const b=s(g,p);for(let S=0;S<b.length;++S){const N=b[S];i.push(x+N)}l=u+(l.length>0?" "+l:l)}return l};function q2(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=jw(t))&&(r&&(r+=" "),r+=n);return r}const jw=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=jw(e[r]))&&(n&&(n+=" "),n+=t);return n};function W2(e,...t){let n,r,s,i=a;function a(c){const u=t.reduce((f,m)=>m(f),e());return n=F2(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const f=V2(c,n);return s(c,f),f}return function(){return i(q2.apply(null,arguments))}}const bt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Cw=/^\[(?:([a-z-]+):)?(.+)\]$/i,U2=/^\d+\/\d+$/,H2=new Set(["px","full","screen"]),K2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,G2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Q2=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Y2=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,X2=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,es=e=>Si(e)||H2.has(e)||U2.test(e),ws=e=>Yi(e,"length",oE),Si=e=>!!e&&!Number.isNaN(Number(e)),Wd=e=>Yi(e,"number",Si),xa=e=>!!e&&Number.isInteger(Number(e)),Z2=e=>e.endsWith("%")&&Si(e.slice(0,-1)),Xe=e=>Cw.test(e),bs=e=>K2.test(e),J2=new Set(["length","size","percentage"]),eE=e=>Yi(e,J2,Ew),tE=e=>Yi(e,"position",Ew),nE=new Set(["image","url"]),rE=e=>Yi(e,nE,aE),sE=e=>Yi(e,"",iE),ya=()=>!0,Yi=(e,t,n)=>{const r=Cw.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},oE=e=>G2.test(e)&&!Q2.test(e),Ew=()=>!1,iE=e=>Y2.test(e),aE=e=>X2.test(e),lE=()=>{const e=bt("colors"),t=bt("spacing"),n=bt("blur"),r=bt("brightness"),s=bt("borderColor"),i=bt("borderRadius"),a=bt("borderSpacing"),l=bt("borderWidth"),c=bt("contrast"),u=bt("grayscale"),f=bt("hueRotate"),m=bt("invert"),h=bt("gap"),y=bt("gradientColorStops"),p=bt("gradientColorStopPositions"),g=bt("inset"),w=bt("margin"),x=bt("opacity"),v=bt("padding"),b=bt("saturate"),S=bt("scale"),N=bt("sepia"),j=bt("skew"),k=bt("space"),C=bt("translate"),R=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",Xe,t],_=()=>[Xe,t],q=()=>["",es,ws],M=()=>["auto",Si,Xe],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Xe],V=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>[Si,Xe];return{cacheSize:500,separator:":",theme:{colors:[ya],spacing:[es,ws],blur:["none","",bs,Xe],brightness:G(),borderColor:[e],borderRadius:["none","","full",bs,Xe],borderSpacing:_(),borderWidth:q(),contrast:G(),grayscale:$(),hueRotate:G(),invert:$(),gap:_(),gradientColorStops:[e],gradientColorStopPositions:[Z2,ws],inset:D(),margin:D(),opacity:G(),padding:_(),saturate:G(),scale:G(),sepia:$(),skew:G(),space:_(),translate:_()},classGroups:{aspect:[{aspect:["auto","square","video",Xe]}],container:["container"],columns:[{columns:[bs]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),Xe]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",xa,Xe]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Xe]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",xa,Xe]}],"grid-cols":[{"grid-cols":[ya]}],"col-start-end":[{col:["auto",{span:["full",xa,Xe]},Xe]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[ya]}],"row-start-end":[{row:["auto",{span:[xa,Xe]},Xe]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Xe]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Xe,t]}],"min-w":[{"min-w":[Xe,t,"min","max","fit"]}],"max-w":[{"max-w":[Xe,t,"none","full","min","max","fit","prose",{screen:[bs]},bs]}],h:[{h:[Xe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Xe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Xe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Xe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",bs,ws]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Wd]}],"font-family":[{font:[ya]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Xe]}],"line-clamp":[{"line-clamp":["none",Si,Wd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",es,Xe]}],"list-image":[{"list-image":["none",Xe]}],"list-style-type":[{list:["none","disc","decimal",Xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",es,ws]}],"underline-offset":[{"underline-offset":["auto",es,Xe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),tE]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",eE]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},rE]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:Q()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[es,Xe]}],"outline-w":[{outline:[es,ws]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[es,ws]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",bs,sE]}],"shadow-color":[{shadow:[ya]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",bs,Xe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[m]}],saturate:[{saturate:[b]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Xe]}],duration:[{duration:G()}],ease:[{ease:["linear","in","out","in-out",Xe]}],delay:[{delay:G()}],animate:[{animate:["none","spin","ping","pulse","bounce",Xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[xa,Xe]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Xe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Xe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Xe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[es,ws,Wd]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},cE=W2(lE);function Be(...e){return cE(iw(e))}const uE=r2,Pw=d.forwardRef(({className:e,...t},n)=>o.jsx(Jy,{ref:n,className:Be("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:right-0 sm:flex-col md:max-w-[420px]",e),...t}));Pw.displayName=Jy.displayName;const dE=zu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Tw=d.forwardRef(({className:e,variant:t,...n},r)=>o.jsx(ew,{ref:r,className:Be(dE({variant:t}),e),...n}));Tw.displayName=ew.displayName;const fE=d.forwardRef(({className:e,...t},n)=>o.jsx(rw,{ref:n,className:Be("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));fE.displayName=rw.displayName;const Rw=d.forwardRef(({className:e,...t},n)=>o.jsx(sw,{ref:n,className:Be("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:o.jsx(Po,{className:"h-4 w-4"})}));Rw.displayName=sw.displayName;const Mw=d.forwardRef(({className:e,...t},n)=>o.jsx(tw,{ref:n,className:Be("text-sm font-semibold",e),...t}));Mw.displayName=tw.displayName;const _w=d.forwardRef(({className:e,...t},n)=>o.jsx(nw,{ref:n,className:Be("text-sm opacity-90",e),...t}));_w.displayName=nw.displayName;function hE(){const{toasts:e}=xl();return o.jsxs(uE,{children:[e.map(function({id:t,title:n,description:r,action:s,...i}){return o.jsxs(Tw,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(Mw,{children:n}),r&&o.jsx(_w,{children:r})]}),s,o.jsx(Rw,{})]},t)}),o.jsx(Pw,{})]})}var mE=R0[" useId ".trim().toString()]||(()=>{}),pE=0;function Vs(e){const[t,n]=d.useState(mE());return ln(()=>{e||n(r=>r??String(pE++))},[e]),e||(t?`radix-${t}`:"")}const gE=["top","right","bottom","left"],Hs=Math.min,Xn=Math.max,ou=Math.round,ec=Math.floor,Kr=e=>({x:e,y:e}),vE={left:"right",right:"left",bottom:"top",top:"bottom"},xE={start:"end",end:"start"};function yh(e,t,n){return Xn(e,Hs(t,n))}function fs(e,t){return typeof e=="function"?e(t):e}function hs(e){return e.split("-")[0]}function Xi(e){return e.split("-")[1]}function Zm(e){return e==="x"?"y":"x"}function Jm(e){return e==="y"?"height":"width"}function Ks(e){return["top","bottom"].includes(hs(e))?"y":"x"}function ep(e){return Zm(Ks(e))}function yE(e,t,n){n===void 0&&(n=!1);const r=Xi(e),s=ep(e),i=Jm(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=iu(a)),[a,iu(a)]}function wE(e){const t=iu(e);return[wh(e),t,wh(t)]}function wh(e){return e.replace(/start|end/g,t=>xE[t])}function bE(e,t,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?i:a;default:return[]}}function SE(e,t,n,r){const s=Xi(e);let i=bE(hs(e),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),t&&(i=i.concat(i.map(wh)))),i}function iu(e){return e.replace(/left|right|bottom|top/g,t=>vE[t])}function NE(e){return{top:0,right:0,bottom:0,left:0,...e}}function Aw(e){return typeof e!="number"?NE(e):{top:e,right:e,bottom:e,left:e}}function au(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function vv(e,t,n){let{reference:r,floating:s}=e;const i=Ks(t),a=ep(t),l=Jm(a),c=hs(t),u=i==="y",f=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,h=r[l]/2-s[l]/2;let y;switch(c){case"top":y={x:f,y:r.y-s.height};break;case"bottom":y={x:f,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:m};break;case"left":y={x:r.x-s.width,y:m};break;default:y={x:r.x,y:r.y}}switch(Xi(t)){case"start":y[a]-=h*(n&&u?-1:1);break;case"end":y[a]+=h*(n&&u?-1:1);break}return y}const kE=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:m}=vv(u,r,c),h=r,y={},p=0;for(let g=0;g<l.length;g++){const{name:w,fn:x}=l[g],{x:v,y:b,data:S,reset:N}=await x({x:f,y:m,initialPlacement:r,placement:h,strategy:s,middlewareData:y,rects:u,platform:a,elements:{reference:e,floating:t}});f=v??f,m=b??m,y={...y,[w]:{...y[w],...S}},N&&p<=50&&(p++,typeof N=="object"&&(N.placement&&(h=N.placement),N.rects&&(u=N.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):N.rects),{x:f,y:m}=vv(u,h,c)),g=-1)}return{x:f,y:m,placement:h,strategy:s,middlewareData:y}};async function il(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:h=!1,padding:y=0}=fs(t,e),p=Aw(y),w=l[h?m==="floating"?"reference":"floating":m],x=au(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),v=m==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),S=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},N=au(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:b,strategy:c}):v);return{top:(x.top-N.top+p.top)/S.y,bottom:(N.bottom-x.bottom+p.bottom)/S.y,left:(x.left-N.left+p.left)/S.x,right:(N.right-x.right+p.right)/S.x}}const jE=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:f=0}=fs(e,t)||{};if(u==null)return{};const m=Aw(f),h={x:n,y:r},y=ep(s),p=Jm(y),g=await a.getDimensions(u),w=y==="y",x=w?"top":"left",v=w?"bottom":"right",b=w?"clientHeight":"clientWidth",S=i.reference[p]+i.reference[y]-h[y]-i.floating[p],N=h[y]-i.reference[y],j=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let k=j?j[b]:0;(!k||!await(a.isElement==null?void 0:a.isElement(j)))&&(k=l.floating[b]||i.floating[p]);const C=S/2-N/2,R=k/2-g[p]/2-1,P=Hs(m[x],R),D=Hs(m[v],R),_=P,q=k-g[p]-D,M=k/2-g[p]/2+C,z=yh(_,M,q),Q=!c.arrow&&Xi(s)!=null&&M!==z&&i.reference[p]/2-(M<_?P:D)-g[p]/2<0,Y=Q?M<_?M-_:M-q:0;return{[y]:h[y]+Y,data:{[y]:z,centerOffset:M-z-Y,...Q&&{alignmentOffset:Y}},reset:Q}}}),CE=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...w}=fs(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=hs(s),v=Ks(l),b=hs(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(u.floating)),N=h||(b||!g?[iu(l)]:wE(l)),j=p!=="none";!h&&j&&N.push(...SE(l,g,p,S));const k=[l,...N],C=await il(t,w),R=[];let P=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&R.push(C[x]),m){const M=yE(s,a,S);R.push(C[M[0]],C[M[1]])}if(P=[...P,{placement:s,overflows:R}],!R.every(M=>M<=0)){var D,_;const M=(((D=i.flip)==null?void 0:D.index)||0)+1,z=k[M];if(z)return{data:{index:M,overflows:P},reset:{placement:z}};let Q=(_=P.filter(Y=>Y.overflows[0]<=0).sort((Y,T)=>Y.overflows[1]-T.overflows[1])[0])==null?void 0:_.placement;if(!Q)switch(y){case"bestFit":{var q;const Y=(q=P.filter(T=>{if(j){const $=Ks(T.placement);return $===v||$==="y"}return!0}).map(T=>[T.placement,T.overflows.filter($=>$>0).reduce(($,V)=>$+V,0)]).sort((T,$)=>T[1]-$[1])[0])==null?void 0:q[0];Y&&(Q=Y);break}case"initialPlacement":Q=l;break}if(s!==Q)return{reset:{placement:Q}}}return{}}}};function xv(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function yv(e){return gE.some(t=>e[t]>=0)}const EE=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=fs(e,t);switch(r){case"referenceHidden":{const i=await il(t,{...s,elementContext:"reference"}),a=xv(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:yv(a)}}}case"escaped":{const i=await il(t,{...s,altBoundary:!0}),a=xv(i,n.floating);return{data:{escapedOffsets:a,escaped:yv(a)}}}default:return{}}}}};async function PE(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=hs(n),l=Xi(n),c=Ks(n)==="y",u=["left","top"].includes(a)?-1:1,f=i&&c?-1:1,m=fs(t,e);let{mainAxis:h,crossAxis:y,alignmentAxis:p}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof p=="number"&&(y=l==="end"?p*-1:p),c?{x:y*f,y:h*u}:{x:h*u,y:y*f}}const TE=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=t,c=await PE(t,e);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},RE=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:w=>{let{x,y:v}=w;return{x,y:v}}},...c}=fs(e,t),u={x:n,y:r},f=await il(t,c),m=Ks(hs(s)),h=Zm(m);let y=u[h],p=u[m];if(i){const w=h==="y"?"top":"left",x=h==="y"?"bottom":"right",v=y+f[w],b=y-f[x];y=yh(v,y,b)}if(a){const w=m==="y"?"top":"left",x=m==="y"?"bottom":"right",v=p+f[w],b=p-f[x];p=yh(v,p,b)}const g=l.fn({...t,[h]:y,[m]:p});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[h]:i,[m]:a}}}}}},ME=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=fs(e,t),f={x:n,y:r},m=Ks(s),h=Zm(m);let y=f[h],p=f[m];const g=fs(l,t),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=h==="y"?"height":"width",S=i.reference[h]-i.floating[b]+w.mainAxis,N=i.reference[h]+i.reference[b]-w.mainAxis;y<S?y=S:y>N&&(y=N)}if(u){var x,v;const b=h==="y"?"width":"height",S=["top","left"].includes(hs(s)),N=i.reference[m]-i.floating[b]+(S&&((x=a.offset)==null?void 0:x[m])||0)+(S?0:w.crossAxis),j=i.reference[m]+i.reference[b]+(S?0:((v=a.offset)==null?void 0:v[m])||0)-(S?w.crossAxis:0);p<N?p=N:p>j&&(p=j)}return{[h]:y,[m]:p}}}},_E=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:i,platform:a,elements:l}=t,{apply:c=()=>{},...u}=fs(e,t),f=await il(t,u),m=hs(s),h=Xi(s),y=Ks(s)==="y",{width:p,height:g}=i.floating;let w,x;m==="top"||m==="bottom"?(w=m,x=h===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(x=m,w=h==="end"?"top":"bottom");const v=g-f.top-f.bottom,b=p-f.left-f.right,S=Hs(g-f[w],v),N=Hs(p-f[x],b),j=!t.middlewareData.shift;let k=S,C=N;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(C=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(k=v),j&&!h){const P=Xn(f.left,0),D=Xn(f.right,0),_=Xn(f.top,0),q=Xn(f.bottom,0);y?C=p-2*(P!==0||D!==0?P+D:Xn(f.left,f.right)):k=g-2*(_!==0||q!==0?_+q:Xn(f.top,f.bottom))}await c({...t,availableWidth:C,availableHeight:k});const R=await a.getDimensions(l.floating);return p!==R.width||g!==R.height?{reset:{rects:!0}}:{}}}};function Ku(){return typeof window<"u"}function Zi(e){return Lw(e)?(e.nodeName||"").toLowerCase():"#document"}function nr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Yr(e){var t;return(t=(Lw(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Lw(e){return Ku()?e instanceof Node||e instanceof nr(e).Node:!1}function Cr(e){return Ku()?e instanceof Element||e instanceof nr(e).Element:!1}function Gr(e){return Ku()?e instanceof HTMLElement||e instanceof nr(e).HTMLElement:!1}function wv(e){return!Ku()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof nr(e).ShadowRoot}function Sl(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Er(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function AE(e){return["table","td","th"].includes(Zi(e))}function Gu(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function tp(e){const t=np(),n=Cr(e)?Er(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function LE(e){let t=Gs(e);for(;Gr(t)&&!$i(t);){if(tp(t))return t;if(Gu(t))return null;t=Gs(t)}return null}function np(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $i(e){return["html","body","#document"].includes(Zi(e))}function Er(e){return nr(e).getComputedStyle(e)}function Qu(e){return Cr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Gs(e){if(Zi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||wv(e)&&e.host||Yr(e);return wv(t)?t.host:t}function Iw(e){const t=Gs(e);return $i(t)?e.ownerDocument?e.ownerDocument.body:e.body:Gr(t)&&Sl(t)?t:Iw(t)}function al(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=Iw(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),a=nr(s);if(i){const l=bh(a);return t.concat(a,a.visualViewport||[],Sl(s)?s:[],l&&n?al(l):[])}return t.concat(s,al(s,[],n))}function bh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function $w(e){const t=Er(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Gr(e),i=s?e.offsetWidth:n,a=s?e.offsetHeight:r,l=ou(n)!==i||ou(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function rp(e){return Cr(e)?e:e.contextElement}function Ni(e){const t=rp(e);if(!Gr(t))return Kr(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=$w(t);let a=(i?ou(n.width):n.width)/r,l=(i?ou(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const IE=Kr(0);function Ow(e){const t=nr(e);return!np()||!t.visualViewport?IE:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function $E(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==nr(e)?!1:t}function To(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=rp(e);let a=Kr(1);t&&(r?Cr(r)&&(a=Ni(r)):a=Ni(e));const l=$E(i,n,r)?Ow(i):Kr(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,f=s.width/a.x,m=s.height/a.y;if(i){const h=nr(i),y=r&&Cr(r)?nr(r):r;let p=h,g=bh(p);for(;g&&r&&y!==p;){const w=Ni(g),x=g.getBoundingClientRect(),v=Er(g),b=x.left+(g.clientLeft+parseFloat(v.paddingLeft))*w.x,S=x.top+(g.clientTop+parseFloat(v.paddingTop))*w.y;c*=w.x,u*=w.y,f*=w.x,m*=w.y,c+=b,u+=S,p=nr(g),g=bh(p)}}return au({width:f,height:m,x:c,y:u})}function sp(e,t){const n=Qu(e).scrollLeft;return t?t.left+n:To(Yr(e)).left+n}function Dw(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:sp(e,r)),i=r.top+t.scrollTop;return{x:s,y:i}}function OE(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",a=Yr(r),l=t?Gu(t.floating):!1;if(r===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Kr(1);const f=Kr(0),m=Gr(r);if((m||!m&&!i)&&((Zi(r)!=="body"||Sl(a))&&(c=Qu(r)),Gr(r))){const y=To(r);u=Ni(r),f.x=y.x+r.clientLeft,f.y=y.y+r.clientTop}const h=a&&!m&&!i?Dw(a,c,!0):Kr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x+h.x,y:n.y*u.y-c.scrollTop*u.y+f.y+h.y}}function DE(e){return Array.from(e.getClientRects())}function BE(e){const t=Yr(e),n=Qu(e),r=e.ownerDocument.body,s=Xn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Xn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+sp(e);const l=-n.scrollTop;return Er(r).direction==="rtl"&&(a+=Xn(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}function FE(e,t){const n=nr(e),r=Yr(e),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const u=np();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l,y:c}}function zE(e,t){const n=To(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=Gr(e)?Ni(e):Kr(1),a=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:a,height:l,x:c,y:u}}function bv(e,t,n){let r;if(t==="viewport")r=FE(e,n);else if(t==="document")r=BE(Yr(e));else if(Cr(t))r=zE(t,n);else{const s=Ow(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return au(r)}function Bw(e,t){const n=Gs(e);return n===t||!Cr(n)||$i(n)?!1:Er(n).position==="fixed"||Bw(n,t)}function VE(e,t){const n=t.get(e);if(n)return n;let r=al(e,[],!1).filter(l=>Cr(l)&&Zi(l)!=="body"),s=null;const i=Er(e).position==="fixed";let a=i?Gs(e):e;for(;Cr(a)&&!$i(a);){const l=Er(a),c=tp(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Sl(a)&&!c&&Bw(e,a))?r=r.filter(f=>f!==a):s=l,a=Gs(a)}return t.set(e,r),r}function qE(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const a=[...n==="clippingAncestors"?Gu(t)?[]:VE(t,this._c):[].concat(n),r],l=a[0],c=a.reduce((u,f)=>{const m=bv(t,f,s);return u.top=Xn(m.top,u.top),u.right=Hs(m.right,u.right),u.bottom=Hs(m.bottom,u.bottom),u.left=Xn(m.left,u.left),u},bv(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function WE(e){const{width:t,height:n}=$w(e);return{width:t,height:n}}function UE(e,t,n){const r=Gr(t),s=Yr(t),i=n==="fixed",a=To(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Kr(0);if(r||!r&&!i)if((Zi(t)!=="body"||Sl(s))&&(l=Qu(t)),r){const h=To(t,!0,i,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else s&&(c.x=sp(s));const u=s&&!r&&!i?Dw(s,l):Kr(0),f=a.left+l.scrollLeft-c.x-u.x,m=a.top+l.scrollTop-c.y-u.y;return{x:f,y:m,width:a.width,height:a.height}}function Ud(e){return Er(e).position==="static"}function Sv(e,t){if(!Gr(e)||Er(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Yr(e)===n&&(n=n.ownerDocument.body),n}function Fw(e,t){const n=nr(e);if(Gu(e))return n;if(!Gr(e)){let s=Gs(e);for(;s&&!$i(s);){if(Cr(s)&&!Ud(s))return s;s=Gs(s)}return n}let r=Sv(e,t);for(;r&&AE(r)&&Ud(r);)r=Sv(r,t);return r&&$i(r)&&Ud(r)&&!tp(r)?n:r||LE(e)||n}const HE=async function(e){const t=this.getOffsetParent||Fw,n=this.getDimensions,r=await n(e.floating);return{reference:UE(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function KE(e){return Er(e).direction==="rtl"}const GE={convertOffsetParentRelativeRectToViewportRelativeRect:OE,getDocumentElement:Yr,getClippingRect:qE,getOffsetParent:Fw,getElementRects:HE,getClientRects:DE,getDimensions:WE,getScale:Ni,isElement:Cr,isRTL:KE};function zw(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function QE(e,t){let n=null,r;const s=Yr(e);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:f,top:m,width:h,height:y}=u;if(l||t(),!h||!y)return;const p=ec(m),g=ec(s.clientWidth-(f+h)),w=ec(s.clientHeight-(m+y)),x=ec(f),b={rootMargin:-p+"px "+-g+"px "+-w+"px "+-x+"px",threshold:Xn(0,Hs(1,c))||1};let S=!0;function N(j){const k=j[0].intersectionRatio;if(k!==c){if(!S)return a();k?a(!1,k):r=setTimeout(()=>{a(!1,1e-7)},1e3)}k===1&&!zw(u,e.getBoundingClientRect())&&a(),S=!1}try{n=new IntersectionObserver(N,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(N,b)}n.observe(e)}return a(!0),i}function YE(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=rp(e),f=s||i?[...u?al(u):[],...al(t)]:[];f.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const m=u&&l?QE(u,n):null;let h=-1,y=null;a&&(y=new ResizeObserver(x=>{let[v]=x;v&&v.target===u&&y&&(y.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=y)==null||b.observe(t)})),n()}),u&&!c&&y.observe(u),y.observe(t));let p,g=c?To(e):null;c&&w();function w(){const x=To(e);g&&!zw(g,x)&&n(),g=x,p=requestAnimationFrame(w)}return n(),()=>{var x;f.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),m==null||m(),(x=y)==null||x.disconnect(),y=null,c&&cancelAnimationFrame(p)}}const XE=TE,ZE=RE,JE=CE,eP=_E,tP=EE,Nv=jE,nP=ME,rP=(e,t,n)=>{const r=new Map,s={platform:GE,...n},i={...s.platform,_c:r};return kE(e,t,{...s,platform:i})};var Pc=typeof document<"u"?d.useLayoutEffect:d.useEffect;function lu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!lu(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!lu(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function Vw(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function kv(e,t){const n=Vw(e);return Math.round(t*n)/n}function Hd(e){const t=d.useRef(e);return Pc(()=>{t.current=e}),t}function sP(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[f,m]=d.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,y]=d.useState(r);lu(h,r)||y(r);const[p,g]=d.useState(null),[w,x]=d.useState(null),v=d.useCallback(T=>{T!==j.current&&(j.current=T,g(T))},[]),b=d.useCallback(T=>{T!==k.current&&(k.current=T,x(T))},[]),S=i||p,N=a||w,j=d.useRef(null),k=d.useRef(null),C=d.useRef(f),R=c!=null,P=Hd(c),D=Hd(s),_=Hd(u),q=d.useCallback(()=>{if(!j.current||!k.current)return;const T={placement:t,strategy:n,middleware:h};D.current&&(T.platform=D.current),rP(j.current,k.current,T).then($=>{const V={...$,isPositioned:_.current!==!1};M.current&&!lu(C.current,V)&&(C.current=V,Do.flushSync(()=>{m(V)}))})},[h,t,n,D,_]);Pc(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,m(T=>({...T,isPositioned:!1})))},[u]);const M=d.useRef(!1);Pc(()=>(M.current=!0,()=>{M.current=!1}),[]),Pc(()=>{if(S&&(j.current=S),N&&(k.current=N),S&&N){if(P.current)return P.current(S,N,q);q()}},[S,N,q,P,R]);const z=d.useMemo(()=>({reference:j,floating:k,setReference:v,setFloating:b}),[v,b]),Q=d.useMemo(()=>({reference:S,floating:N}),[S,N]),Y=d.useMemo(()=>{const T={position:n,left:0,top:0};if(!Q.floating)return T;const $=kv(Q.floating,f.x),V=kv(Q.floating,f.y);return l?{...T,transform:"translate("+$+"px, "+V+"px)",...Vw(Q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:V}},[n,l,Q.floating,f.x,f.y]);return d.useMemo(()=>({...f,update:q,refs:z,elements:Q,floatingStyles:Y}),[f,q,z,Q,Y])}const oP=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Nv({element:r.current,padding:s}).fn(n):{}:r?Nv({element:r,padding:s}).fn(n):{}}}},iP=(e,t)=>({...XE(e),options:[e,t]}),aP=(e,t)=>({...ZE(e),options:[e,t]}),lP=(e,t)=>({...nP(e),options:[e,t]}),cP=(e,t)=>({...JE(e),options:[e,t]}),uP=(e,t)=>({...eP(e),options:[e,t]}),dP=(e,t)=>({...tP(e),options:[e,t]}),fP=(e,t)=>({...oP(e),options:[e,t]});var hP="Arrow",qw=d.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...i}=e;return o.jsx(Oe.svg,{...i,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});qw.displayName=hP;var mP=qw;function op(e){const[t,n]=d.useState(void 0);return ln(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;n({width:a,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var ip="Popper",[Ww,Yu]=Un(ip),[pP,Uw]=Ww(ip),Hw=e=>{const{__scopePopper:t,children:n}=e,[r,s]=d.useState(null);return o.jsx(pP,{scope:t,anchor:r,onAnchorChange:s,children:n})};Hw.displayName=ip;var Kw="PopperAnchor",Gw=d.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,i=Uw(Kw,n),a=d.useRef(null),l=Ge(t,a);return d.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:o.jsx(Oe.div,{...s,ref:l})});Gw.displayName=Kw;var ap="PopperContent",[gP,vP]=Ww(ap),Qw=d.forwardRef((e,t)=>{var B,W,U,re,se,ye;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:h=!1,updatePositionStrategy:y="optimized",onPlaced:p,...g}=e,w=Uw(ap,n),[x,v]=d.useState(null),b=Ge(t,Fe=>v(Fe)),[S,N]=d.useState(null),j=op(S),k=(j==null?void 0:j.width)??0,C=(j==null?void 0:j.height)??0,R=r+(i!=="center"?"-"+i:""),P=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},D=Array.isArray(u)?u:[u],_=D.length>0,q={padding:P,boundary:D.filter(yP),altBoundary:_},{refs:M,floatingStyles:z,placement:Q,isPositioned:Y,middlewareData:T}=sP({strategy:"fixed",placement:R,whileElementsMounted:(...Fe)=>YE(...Fe,{animationFrame:y==="always"}),elements:{reference:w.anchor},middleware:[iP({mainAxis:s+C,alignmentAxis:a}),c&&aP({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?lP():void 0,...q}),c&&cP({...q}),uP({...q,apply:({elements:Fe,rects:ze,availableWidth:Ae,availableHeight:oe})=>{const{width:Ne,height:Ce}=ze.reference,Re=Fe.floating.style;Re.setProperty("--radix-popper-available-width",`${Ae}px`),Re.setProperty("--radix-popper-available-height",`${oe}px`),Re.setProperty("--radix-popper-anchor-width",`${Ne}px`),Re.setProperty("--radix-popper-anchor-height",`${Ce}px`)}}),S&&fP({element:S,padding:l}),wP({arrowWidth:k,arrowHeight:C}),h&&dP({strategy:"referenceHidden",...q})]}),[$,V]=Zw(Q),G=Vt(p);ln(()=>{Y&&(G==null||G())},[Y,G]);const de=(B=T.arrow)==null?void 0:B.x,ne=(W=T.arrow)==null?void 0:W.y,ve=((U=T.arrow)==null?void 0:U.centerOffset)!==0,[fe,A]=d.useState();return ln(()=>{x&&A(window.getComputedStyle(x).zIndex)},[x]),o.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:Y?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:fe,"--radix-popper-transform-origin":[(re=T.transformOrigin)==null?void 0:re.x,(se=T.transformOrigin)==null?void 0:se.y].join(" "),...((ye=T.hide)==null?void 0:ye.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(gP,{scope:n,placedSide:$,onArrowChange:N,arrowX:de,arrowY:ne,shouldHideArrow:ve,children:o.jsx(Oe.div,{"data-side":$,"data-align":V,...g,ref:b,style:{...g.style,animation:Y?void 0:"none"}})})})});Qw.displayName=ap;var Yw="PopperArrow",xP={top:"bottom",right:"left",bottom:"top",left:"right"},Xw=d.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,i=vP(Yw,r),a=xP[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(mP,{...s,ref:n,style:{...s.style,display:"block"}})})});Xw.displayName=Yw;function yP(e){return e!==null}var wP=e=>({name:"transformOrigin",options:e,fn(t){var w,x,v;const{placement:n,rects:r,middlewareData:s}=t,a=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,f]=Zw(n),m={start:"0%",center:"50%",end:"100%"}[f],h=(((x=s.arrow)==null?void 0:x.x)??0)+l/2,y=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let p="",g="";return u==="bottom"?(p=a?m:`${h}px`,g=`${-c}px`):u==="top"?(p=a?m:`${h}px`,g=`${r.floating.height+c}px`):u==="right"?(p=`${-c}px`,g=a?m:`${y}px`):u==="left"&&(p=`${r.floating.width+c}px`,g=a?m:`${y}px`),{data:{x:p,y:g}}}});function Zw(e){const[t,n="center"]=e.split("-");return[t,n]}var bP=Hw,Jw=Gw,e1=Qw,t1=Xw,[Xu,r3]=Un("Tooltip",[Yu]),lp=Yu(),n1="TooltipProvider",SP=700,jv="tooltip.open",[NP,r1]=Xu(n1),s1=e=>{const{__scopeTooltip:t,delayDuration:n=SP,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=e,a=d.useRef(!0),l=d.useRef(!1),c=d.useRef(0);return d.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),o.jsx(NP,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:d.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:d.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:d.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};s1.displayName=n1;var o1="Tooltip",[s3,Zu]=Xu(o1),Sh="TooltipTrigger",kP=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Zu(Sh,n),i=r1(Sh,n),a=lp(n),l=d.useRef(null),c=Ge(t,l,s.onTriggerChange),u=d.useRef(!1),f=d.useRef(!1),m=d.useCallback(()=>u.current=!1,[]);return d.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),o.jsx(Jw,{asChild:!0,...a,children:o.jsx(Oe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:je(e.onPointerMove,h=>{h.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:je(e.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:je(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:je(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:je(e.onBlur,s.onClose),onClick:je(e.onClick,s.onClose)})})});kP.displayName=Sh;var jP="TooltipPortal",[o3,CP]=Xu(jP,{forceMount:void 0}),Oi="TooltipContent",i1=d.forwardRef((e,t)=>{const n=CP(Oi,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=e,a=Zu(Oi,e.__scopeTooltip);return o.jsx(Ir,{present:r||a.open,children:a.disableHoverableContent?o.jsx(a1,{side:s,...i,ref:t}):o.jsx(EP,{side:s,...i,ref:t})})}),EP=d.forwardRef((e,t)=>{const n=Zu(Oi,e.__scopeTooltip),r=r1(Oi,e.__scopeTooltip),s=d.useRef(null),i=Ge(t,s),[a,l]=d.useState(null),{trigger:c,onClose:u}=n,f=s.current,{onPointerInTransitChange:m}=r,h=d.useCallback(()=>{l(null),m(!1)},[m]),y=d.useCallback((p,g)=>{const w=p.currentTarget,x={x:p.clientX,y:p.clientY},v=_P(x,w.getBoundingClientRect()),b=AP(x,v),S=LP(g.getBoundingClientRect()),N=$P([...b,...S]);l(N),m(!0)},[m]);return d.useEffect(()=>()=>h(),[h]),d.useEffect(()=>{if(c&&f){const p=w=>y(w,f),g=w=>y(w,c);return c.addEventListener("pointerleave",p),f.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",p),f.removeEventListener("pointerleave",g)}}},[c,f,y,h]),d.useEffect(()=>{if(a){const p=g=>{const w=g.target,x={x:g.clientX,y:g.clientY},v=(c==null?void 0:c.contains(w))||(f==null?void 0:f.contains(w)),b=!IP(x,a);v?h():b&&(h(),u())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[c,f,a,u,h]),o.jsx(a1,{...e,ref:i})}),[PP,TP]=Xu(o1,{isInside:!1}),RP=Iy("TooltipContent"),a1=d.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=e,c=Zu(Oi,n),u=lp(n),{onClose:f}=c;return d.useEffect(()=>(document.addEventListener(jv,f),()=>document.removeEventListener(jv,f)),[f]),d.useEffect(()=>{if(c.trigger){const m=h=>{const y=h.target;y!=null&&y.contains(c.trigger)&&f()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,f]),o.jsx(yl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:m=>m.preventDefault(),onDismiss:f,children:o.jsxs(e1,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(RP,{children:r}),o.jsx(PP,{scope:n,isInside:!0,children:o.jsx(BC,{id:c.contentId,role:"tooltip",children:s||r})})]})})});i1.displayName=Oi;var l1="TooltipArrow",MP=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=lp(n);return TP(l1,n).isInside?null:o.jsx(t1,{...s,...r,ref:t})});MP.displayName=l1;function _P(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function AP(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function LP(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function IP(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const l=t[i].x,c=t[i].y,u=t[a].x,f=t[a].y;c>r!=f>r&&n<(u-l)*(r-c)/(f-c)+l&&(s=!s)}return s}function $P(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),OP(t)}function OP(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const i=t[t.length-1],a=t[t.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const i=n[n.length-1],a=n[n.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var DP=s1,c1=i1;const BP=DP,FP=d.forwardRef(({className:e,sideOffset:t=4,...n},r)=>o.jsx(c1,{ref:r,sideOffset:t,className:Be("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));FP.displayName=c1.displayName;const zP={theme:"dark",setTheme:()=>null},u1=d.createContext(zP);function VP({children:e,defaultTheme:t="dark",storageKey:n="simul-chess-theme",...r}){const[s,i]=d.useState(()=>typeof window>"u"?t:localStorage.getItem(n)||t);d.useEffect(()=>{const l=window.document.documentElement;l.classList.remove("light","dark"),l.classList.add(s)},[s]);const a={theme:s,setTheme:l=>{localStorage.setItem(n,l),i(l)}};return o.jsx(u1.Provider,{...r,value:a,children:e})}const qP=()=>{const e=d.useContext(u1);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},cp=zu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),X=d.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},i)=>{const a=r?xC:"button";return o.jsx(a,{className:Be(cp({variant:t,size:n,className:e})),ref:i,...s})});X.displayName="Button";function WP(){const{theme:e,setTheme:t}=qP();return o.jsxs(X,{variant:"ghost",size:"icon",onClick:()=>t(e==="light"?"dark":"light"),"data-testid":"button-theme-toggle",children:[o.jsx(R2,{className:"h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),o.jsx(gw,{className:"absolute h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),o.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function up(e){const t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var dp="Switch",[UP,i3]=Un(dp),[HP,KP]=UP(dp),d1=d.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:u,form:f,...m}=e,[h,y]=d.useState(null),p=Ge(t,b=>y(b)),g=d.useRef(!1),w=h?f||!!h.closest("form"):!0,[x=!1,v]=Eo({prop:s,defaultProp:i,onChange:u});return o.jsxs(HP,{scope:n,checked:x,disabled:l,children:[o.jsx(Oe.button,{type:"button",role:"switch","aria-checked":x,"aria-required":a,"data-state":m1(x),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:p,onClick:je(e.onClick,b=>{v(S=>!S),w&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})}),w&&o.jsx(GP,{control:h,bubbles:!g.current,name:r,value:c,checked:x,required:a,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});d1.displayName=dp;var f1="SwitchThumb",h1=d.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=KP(f1,n);return o.jsx(Oe.span,{"data-state":m1(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});h1.displayName=f1;var GP=e=>{const{control:t,checked:n,bubbles:r=!0,...s}=e,i=d.useRef(null),a=up(n),l=op(t);return d.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==n&&m){const h=new Event("click",{bubbles:r});m.call(c,n),c.dispatchEvent(h)}},[a,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function m1(e){return e?"checked":"unchecked"}var p1=d1,QP=h1;const wn=d.forwardRef(({className:e,...t},n)=>o.jsx(p1,{className:Be("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:o.jsx(QP,{className:Be("pointer-events-none block h-5 w-5 rounded-full bg-stone-300 dark:bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));wn.displayName=p1.displayName;var YP="Label",g1=d.forwardRef((e,t)=>o.jsx(Oe.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));g1.displayName=YP;var v1=g1;const XP=zu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ft=d.forwardRef(({className:e,...t},n)=>o.jsx(v1,{ref:n,className:Be(XP(),e),...t}));Ft.displayName=v1.displayName;var Kd="focusScope.autoFocusOnMount",Gd="focusScope.autoFocusOnUnmount",Cv={bubbles:!1,cancelable:!0},ZP="FocusScope",fp=d.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=e,[l,c]=d.useState(null),u=Vt(s),f=Vt(i),m=d.useRef(null),h=Ge(t,g=>c(g)),y=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(r){let g=function(b){if(y.paused||!l)return;const S=b.target;l.contains(S)?m.current=S:js(m.current,{select:!0})},w=function(b){if(y.paused||!l)return;const S=b.relatedTarget;S!==null&&(l.contains(S)||js(m.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const N of b)N.removedNodes.length>0&&js(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const v=new MutationObserver(x);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),v.disconnect()}}},[r,l,y.paused]),d.useEffect(()=>{if(l){Pv.add(y);const g=document.activeElement;if(!l.contains(g)){const x=new CustomEvent(Kd,Cv);l.addEventListener(Kd,u),l.dispatchEvent(x),x.defaultPrevented||(JP(sT(x1(l)),{select:!0}),document.activeElement===g&&js(l))}return()=>{l.removeEventListener(Kd,u),setTimeout(()=>{const x=new CustomEvent(Gd,Cv);l.addEventListener(Gd,f),l.dispatchEvent(x),x.defaultPrevented||js(g??document.body,{select:!0}),l.removeEventListener(Gd,f),Pv.remove(y)},0)}}},[l,u,f,y]);const p=d.useCallback(g=>{if(!n&&!r||y.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(w&&x){const v=g.currentTarget,[b,S]=eT(v);b&&S?!g.shiftKey&&x===S?(g.preventDefault(),n&&js(b,{select:!0})):g.shiftKey&&x===b&&(g.preventDefault(),n&&js(S,{select:!0})):x===v&&g.preventDefault()}},[n,r,y.paused]);return o.jsx(Oe.div,{tabIndex:-1,...a,ref:h,onKeyDown:p})});fp.displayName=ZP;function JP(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(js(r,{select:t}),document.activeElement!==n)return}function eT(e){const t=x1(e),n=Ev(t,e),r=Ev(t.reverse(),e);return[n,r]}function x1(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Ev(e,t){for(const n of e)if(!tT(n,{upTo:t}))return n}function tT(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function nT(e){return e instanceof HTMLInputElement&&"select"in e}function js(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&nT(e)&&t&&e.select()}}var Pv=rT();function rT(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Tv(e,t),e.unshift(t)},remove(t){var n;e=Tv(e,t),(n=e[0])==null||n.resume()}}}function Tv(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function sT(e){return e.filter(t=>t.tagName!=="A")}var Qd=0;function y1(){d.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Rv()),document.body.insertAdjacentElement("beforeend",e[1]??Rv()),Qd++,()=>{Qd===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Qd--}},[])}function Rv(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Vr=function(){return Vr=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Vr.apply(this,arguments)};function w1(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function oT(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Tc="right-scroll-bar-position",Rc="width-before-scroll-bar",iT="with-scroll-bars-hidden",aT="--removed-body-scroll-bar-size";function Yd(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function lT(e,t){var n=d.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var cT=typeof window<"u"?d.useLayoutEffect:d.useEffect,Mv=new WeakMap;function uT(e,t){var n=lT(null,function(r){return e.forEach(function(s){return Yd(s,r)})});return cT(function(){var r=Mv.get(n);if(r){var s=new Set(r),i=new Set(e),a=n.current;s.forEach(function(l){i.has(l)||Yd(l,null)}),i.forEach(function(l){s.has(l)||Yd(l,a)})}Mv.set(n,e)},[e]),n}function dT(e){return e}function fT(e,t){t===void 0&&(t=dT);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var a=t(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var f=a;a=[],f.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(f){a.push(f),u()},filter:function(f){return a=a.filter(f),n}}}};return s}function hT(e){e===void 0&&(e={});var t=fT(null);return t.options=Vr({async:!0,ssr:!1},e),t}var b1=function(e){var t=e.sideCar,n=w1(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return d.createElement(r,Vr({},n))};b1.isSideCarExport=!0;function mT(e,t){return e.useMedium(t),b1}var S1=hT(),Xd=function(){},Ju=d.forwardRef(function(e,t){var n=d.useRef(null),r=d.useState({onScrollCapture:Xd,onWheelCapture:Xd,onTouchMoveCapture:Xd}),s=r[0],i=r[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,m=e.shards,h=e.sideCar,y=e.noIsolation,p=e.inert,g=e.allowPinchZoom,w=e.as,x=w===void 0?"div":w,v=e.gapMode,b=w1(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,N=uT([n,t]),j=Vr(Vr({},b),s);return d.createElement(d.Fragment,null,f&&d.createElement(S,{sideCar:S1,removeScrollBar:u,shards:m,noIsolation:y,inert:p,setCallbacks:i,allowPinchZoom:!!g,lockRef:n,gapMode:v}),a?d.cloneElement(d.Children.only(l),Vr(Vr({},j),{ref:N})):d.createElement(x,Vr({},j,{className:c,ref:N}),l))});Ju.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ju.classNames={fullWidth:Rc,zeroRight:Tc};var pT=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function gT(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=pT();return t&&e.setAttribute("nonce",t),e}function vT(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function xT(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var yT=function(){var e=0,t=null;return{add:function(n){e==0&&(t=gT())&&(vT(t,n),xT(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},wT=function(){var e=yT();return function(t,n){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},N1=function(){var e=wT(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},bT={left:0,top:0,right:0,gap:0},Zd=function(e){return parseInt(e||"",10)||0},ST=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Zd(n),Zd(r),Zd(s)]},NT=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return bT;var t=ST(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},kT=N1(),ki="data-scroll-locked",jT=function(e,t,n,r){var s=e.left,i=e.top,a=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(iT,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(ki,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Tc,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Rc,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Tc," .").concat(Tc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Rc," .").concat(Rc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ki,`] {
    `).concat(aT,": ").concat(l,`px;
  }
`)},_v=function(){var e=parseInt(document.body.getAttribute(ki)||"0",10);return isFinite(e)?e:0},CT=function(){d.useEffect(function(){return document.body.setAttribute(ki,(_v()+1).toString()),function(){var e=_v()-1;e<=0?document.body.removeAttribute(ki):document.body.setAttribute(ki,e.toString())}},[])},ET=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;CT();var i=d.useMemo(function(){return NT(s)},[s]);return d.createElement(kT,{styles:jT(i,!t,s,n?"":"!important")})},Nh=!1;if(typeof window<"u")try{var tc=Object.defineProperty({},"passive",{get:function(){return Nh=!0,!0}});window.addEventListener("test",tc,tc),window.removeEventListener("test",tc,tc)}catch{Nh=!1}var Go=Nh?{passive:!1}:!1,PT=function(e){return e.tagName==="TEXTAREA"},k1=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!PT(e)&&n[t]==="visible")},TT=function(e){return k1(e,"overflowY")},RT=function(e){return k1(e,"overflowX")},Av=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=j1(e,r);if(s){var i=C1(e,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},MT=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},_T=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},j1=function(e,t){return e==="v"?TT(t):RT(t)},C1=function(e,t){return e==="v"?MT(t):_T(t)},AT=function(e,t){return e==="h"&&t==="rtl"?-1:1},LT=function(e,t,n,r,s){var i=AT(e,window.getComputedStyle(t).direction),a=i*r,l=n.target,c=t.contains(l),u=!1,f=a>0,m=0,h=0;do{var y=C1(e,l),p=y[0],g=y[1],w=y[2],x=g-w-i*p;(p||x)&&j1(e,l)&&(m+=x,h+=p),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(Math.abs(m)<1||!s)||!f&&(Math.abs(h)<1||!s))&&(u=!0),u},nc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Lv=function(e){return[e.deltaX,e.deltaY]},Iv=function(e){return e&&"current"in e?e.current:e},IT=function(e,t){return e[0]===t[0]&&e[1]===t[1]},$T=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},OT=0,Qo=[];function DT(e){var t=d.useRef([]),n=d.useRef([0,0]),r=d.useRef(),s=d.useState(OT++)[0],i=d.useState(N1)[0],a=d.useRef(e);d.useEffect(function(){a.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=oT([e.lockRef.current],(e.shards||[]).map(Iv),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=d.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var x=nc(g),v=n.current,b="deltaX"in g?g.deltaX:v[0]-x[0],S="deltaY"in g?g.deltaY:v[1]-x[1],N,j=g.target,k=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in g&&k==="h"&&j.type==="range")return!1;var C=Av(k,j);if(!C)return!0;if(C?N=k:(N=k==="v"?"h":"v",C=Av(k,j)),!C)return!1;if(!r.current&&"changedTouches"in g&&(b||S)&&(r.current=N),!N)return!0;var R=r.current||N;return LT(R,w,g,R==="h"?b:S,!0)},[]),c=d.useCallback(function(g){var w=g;if(!(!Qo.length||Qo[Qo.length-1]!==i)){var x="deltaY"in w?Lv(w):nc(w),v=t.current.filter(function(N){return N.name===w.type&&(N.target===w.target||w.target===N.shadowParent)&&IT(N.delta,x)})[0];if(v&&v.should){w.cancelable&&w.preventDefault();return}if(!v){var b=(a.current.shards||[]).map(Iv).filter(Boolean).filter(function(N){return N.contains(w.target)}),S=b.length>0?l(w,b[0]):!a.current.noIsolation;S&&w.cancelable&&w.preventDefault()}}},[]),u=d.useCallback(function(g,w,x,v){var b={name:g,delta:w,target:x,should:v,shadowParent:BT(x)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(S){return S!==b})},1)},[]),f=d.useCallback(function(g){n.current=nc(g),r.current=void 0},[]),m=d.useCallback(function(g){u(g.type,Lv(g),g.target,l(g,e.lockRef.current))},[]),h=d.useCallback(function(g){u(g.type,nc(g),g.target,l(g,e.lockRef.current))},[]);d.useEffect(function(){return Qo.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Go),document.addEventListener("touchmove",c,Go),document.addEventListener("touchstart",f,Go),function(){Qo=Qo.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,Go),document.removeEventListener("touchmove",c,Go),document.removeEventListener("touchstart",f,Go)}},[]);var y=e.removeScrollBar,p=e.inert;return d.createElement(d.Fragment,null,p?d.createElement(i,{styles:$T(s)}):null,y?d.createElement(ET,{gapMode:e.gapMode}):null)}function BT(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const FT=mT(S1,DT);var hp=d.forwardRef(function(e,t){return d.createElement(Ju,Vr({},e,{ref:t,sideCar:FT}))});hp.classNames=Ju.classNames;var zT=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Yo=new WeakMap,rc=new WeakMap,sc={},Jd=0,E1=function(e){return e&&(e.host||E1(e.parentNode))},VT=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=E1(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},qT=function(e,t,n,r){var s=VT(t,Array.isArray(e)?e:[e]);sc[n]||(sc[n]=new WeakMap);var i=sc[n],a=[],l=new Set,c=new Set(s),u=function(m){!m||l.has(m)||(l.add(m),u(m.parentNode))};s.forEach(u);var f=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(h){if(l.has(h))f(h);else try{var y=h.getAttribute(r),p=y!==null&&y!=="false",g=(Yo.get(h)||0)+1,w=(i.get(h)||0)+1;Yo.set(h,g),i.set(h,w),a.push(h),g===1&&p&&rc.set(h,!0),w===1&&h.setAttribute(n,"true"),p||h.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return f(t),l.clear(),Jd++,function(){a.forEach(function(m){var h=Yo.get(m)-1,y=i.get(m)-1;Yo.set(m,h),i.set(m,y),h||(rc.has(m)||m.removeAttribute(r),rc.delete(m)),y||m.removeAttribute(n)}),Jd--,Jd||(Yo=new WeakMap,Yo=new WeakMap,rc=new WeakMap,sc={})}},P1=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=zT(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),qT(r,s,n,"aria-hidden")):function(){return null}},mp="Dialog",[T1,R1]=Un(mp),[WT,$r]=T1(mp),M1=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=e,l=d.useRef(null),c=d.useRef(null),[u=!1,f]=Eo({prop:r,defaultProp:s,onChange:i});return o.jsx(WT,{scope:t,triggerRef:l,contentRef:c,contentId:Vs(),titleId:Vs(),descriptionId:Vs(),open:u,onOpenChange:f,onOpenToggle:d.useCallback(()=>f(m=>!m),[f]),modal:a,children:n})};M1.displayName=mp;var _1="DialogTrigger",A1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=$r(_1,n),i=Ge(t,s.triggerRef);return o.jsx(Oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":vp(s.open),...r,ref:i,onClick:je(e.onClick,s.onOpenToggle)})});A1.displayName=_1;var pp="DialogPortal",[UT,L1]=T1(pp,{forceMount:void 0}),I1=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,i=$r(pp,t);return o.jsx(UT,{scope:t,forceMount:n,children:d.Children.map(r,a=>o.jsx(Ir,{present:n||i.open,children:o.jsx(Du,{asChild:!0,container:s,children:a})}))})};I1.displayName=pp;var cu="DialogOverlay",$1=d.forwardRef((e,t)=>{const n=L1(cu,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=$r(cu,e.__scopeDialog);return i.modal?o.jsx(Ir,{present:r||i.open,children:o.jsx(KT,{...s,ref:t})}):null});$1.displayName=cu;var HT=Ii("DialogOverlay.RemoveScroll"),KT=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=$r(cu,n);return o.jsx(hp,{as:HT,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(Oe.div,{"data-state":vp(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Ro="DialogContent",O1=d.forwardRef((e,t)=>{const n=L1(Ro,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=$r(Ro,e.__scopeDialog);return o.jsx(Ir,{present:r||i.open,children:i.modal?o.jsx(GT,{...s,ref:t}):o.jsx(QT,{...s,ref:t})})});O1.displayName=Ro;var GT=d.forwardRef((e,t)=>{const n=$r(Ro,e.__scopeDialog),r=d.useRef(null),s=Ge(t,n.contentRef,r);return d.useEffect(()=>{const i=r.current;if(i)return P1(i)},[]),o.jsx(D1,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:je(e.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:je(e.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:je(e.onFocusOutside,i=>i.preventDefault())})}),QT=d.forwardRef((e,t)=>{const n=$r(Ro,e.__scopeDialog),r=d.useRef(!1),s=d.useRef(!1);return o.jsx(D1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),D1=d.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=e,l=$r(Ro,n),c=d.useRef(null),u=Ge(t,c);return y1(),o.jsxs(o.Fragment,{children:[o.jsx(fp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(yl,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":vp(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(XT,{titleId:l.titleId}),o.jsx(JT,{contentRef:c,descriptionId:l.descriptionId})]})]})}),gp="DialogTitle",B1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=$r(gp,n);return o.jsx(Oe.h2,{id:s.titleId,...r,ref:t})});B1.displayName=gp;var F1="DialogDescription",z1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=$r(F1,n);return o.jsx(Oe.p,{id:s.descriptionId,...r,ref:t})});z1.displayName=F1;var V1="DialogClose",q1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=$r(V1,n);return o.jsx(Oe.button,{type:"button",...r,ref:t,onClick:je(e.onClick,()=>s.onOpenChange(!1))})});q1.displayName=V1;function vp(e){return e?"open":"closed"}var W1="DialogTitleWarning",[YT,U1]=gC(W1,{contentName:Ro,titleName:gp,docsSlug:"dialog"}),XT=({titleId:e})=>{const t=U1(W1),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},ZT="DialogDescriptionWarning",JT=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${U1(ZT).contentName}}.`;return d.useEffect(()=>{var i;const s=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},H1=M1,K1=A1,G1=I1,xp=$1,yp=O1,wp=B1,bp=z1,Sp=q1;const Di=H1,uu=K1,eR=G1,Q1=d.forwardRef(({className:e,...t},n)=>o.jsx(xp,{ref:n,className:Be("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Q1.displayName=xp.displayName;const Mo=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(eR,{children:[o.jsx(Q1,{}),o.jsxs(yp,{ref:r,className:Be("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,o.jsxs(Sp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(Po,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Mo.displayName=yp.displayName;const _o=({className:e,...t})=>o.jsx("div",{className:Be("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});_o.displayName="DialogHeader";const Ao=d.forwardRef(({className:e,...t},n)=>o.jsx(wp,{ref:n,className:Be("text-lg font-semibold leading-none tracking-tight",e),...t}));Ao.displayName=wp.displayName;const Y1=d.forwardRef(({className:e,...t},n)=>o.jsx(bp,{ref:n,className:Be("text-sm text-muted-foreground",e),...t}));Y1.displayName=bp.displayName;/*! Capacitor: https://capacitorjs.com/ - MIT License */var Bi;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Bi||(Bi={}));class ef extends Error{constructor(t,n,r){super(t),this.message=t,this.code=n,this.data=r}}const tR=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},nR=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>t!==null?t.name:tR(e),i=()=>s()!=="web",a=m=>{const h=u.get(m);return!!(h!=null&&h.platforms.has(s())||l(m))},l=m=>{var h;return(h=n.PluginHeaders)===null||h===void 0?void 0:h.find(y=>y.name===m)},c=m=>e.console.error(m),u=new Map,f=(m,h={})=>{const y=u.get(m);if(y)return console.warn(`Capacitor plugin "${m}" already registered. Cannot register plugins twice.`),y.proxy;const p=s(),g=l(m);let w;const x=async()=>(!w&&p in h?w=typeof h[p]=="function"?w=await h[p]():w=h[p]:t!==null&&!w&&"web"in h&&(w=typeof h.web=="function"?w=await h.web():w=h.web),w),v=(C,R)=>{var P,D;if(g){const _=g==null?void 0:g.methods.find(q=>R===q.name);if(_)return _.rtype==="promise"?q=>n.nativePromise(m,R.toString(),q):(q,M)=>n.nativeCallback(m,R.toString(),q,M);if(C)return(P=C[R])===null||P===void 0?void 0:P.bind(C)}else{if(C)return(D=C[R])===null||D===void 0?void 0:D.bind(C);throw new ef(`"${m}" plugin is not implemented on ${p}`,Bi.Unimplemented)}},b=C=>{let R;const P=(...D)=>{const _=x().then(q=>{const M=v(q,C);if(M){const z=M(...D);return R=z==null?void 0:z.remove,z}else throw new ef(`"${m}.${C}()" is not implemented on ${p}`,Bi.Unimplemented)});return C==="addListener"&&(_.remove=async()=>R()),_};return P.toString=()=>`${C.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:C,writable:!1,configurable:!1}),P},S=b("addListener"),N=b("removeListener"),j=(C,R)=>{const P=S({eventName:C},R),D=async()=>{const q=await P;N({eventName:C,callbackId:q},R)},_=new Promise(q=>P.then(()=>q({remove:D})));return _.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await D()},_},k=new Proxy({},{get(C,R){switch(R){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?j:S;case"removeListener":return N;default:return b(R)}}});return r[m]=k,u.set(m,{name:m,proxy:k,platforms:new Set([...Object.keys(h),...g?[p]:[]])}),k};return n.convertFileSrc||(n.convertFileSrc=m=>m),n.getPlatform=s,n.handleError=c,n.isNativePlatform=i,n.isPluginAvailable=a,n.registerPlugin=f,n.Exception=ef,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},rR=e=>e.Capacitor=nR(e),Nn=rR(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Zs=Nn.registerPlugin;class Np{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(n);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(t);const a=async()=>this.removeListener(t,n);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,r){const s=this.listeners[t];if(!s){if(r){let i=this.retainedEventArguments[t];i||(i=[]),i.push(n),this.retainedEventArguments[t]=i}return}s.forEach(i=>i(n))}hasListeners(t){var n;return!!(!((n=this.listeners[t])===null||n===void 0)&&n.length)}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(t="not implemented"){return new Nn.Exception(t,Bi.Unimplemented)}unavailable(t="not available"){return new Nn.Exception(t,Bi.Unavailable)}async removeListener(t,n){const r=this.listeners[t];if(!r)return;const s=r.indexOf(n);this.listeners[t].splice(s,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(r=>{this.notifyListeners(t,r)}))}}const $v=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Ov=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class sR extends Np{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=Ov(s).trim(),i=Ov(i).trim(),n[s]=i}),n}async setCookie(t){try{const n=$v(t.key),r=$v(t.value),s=`; expires=${(t.expires||"").replace("expires=","")}`,i=(t.path||"/").replace("path=",""),a=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${a};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}Zs("CapacitorCookies",{web:()=>new sR});const oR=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;t(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(e)}),iR=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(s=>s.toLocaleLowerCase()).reduce((s,i,a)=>(s[i]=e[t[a]],s),{})},aR=(e,t=!0)=>e?Object.entries(e).reduce((r,s)=>{const[i,a]=s;let l,c;return Array.isArray(a)?(c="",a.forEach(u=>{l=t?encodeURIComponent(u):u,c+=`${i}=${l}&`}),c.slice(0,-1)):(l=t?encodeURIComponent(a):a,c=`${i}=${l}`),`${r}&${c}`},"").substr(1):null,lR=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),s=iR(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[a,l]of Object.entries(e.data||{}))i.set(a,l);n.body=i.toString()}else if(s.includes("multipart/form-data")||e.data instanceof FormData){const i=new FormData;if(e.data instanceof FormData)e.data.forEach((l,c)=>{i.append(c,l)});else for(const l of Object.keys(e.data))i.append(l,e.data[l]);n.body=i;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(s.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class cR extends Np{async request(t){const n=lR(t,t.webFetchExtra),r=aR(t.params,t.shouldEncodeUrlParams),s=r?`${t.url}?${r}`:t.url,i=await fetch(s,n),a=i.headers.get("content-type")||"";let{responseType:l="text"}=i.ok?t:{};a.includes("application/json")&&(l="json");let c,u;switch(l){case"arraybuffer":case"blob":u=await i.blob(),c=await oR(u);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const f={};return i.headers.forEach((m,h)=>{f[h]=m}),{data:c,headers:f,status:i.status,url:i.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}Zs("CapacitorHttp",{web:()=>new cR});var Dv;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(Dv||(Dv={}));var Bv;(function(e){e.StatusBar="StatusBar",e.NavigationBar="NavigationBar"})(Bv||(Bv={}));class uR extends Np{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}Zs("SystemBars",{web:()=>new uR});const dR="modulepreload",fR=function(e){return"/"+e},Fv={},Ji=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=fR(c),c in Fv)return;Fv[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":dR,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((h,y)=>{m.addEventListener("load",h),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},zv=Zs("SpeechSynthesis",{web:()=>Ji(()=>import("./web-xke47Dea.js"),[]).then(e=>new e.SpeechSynthesisWeb)}),kh={permissionStatus:"unknown",modelReady:!1,sessionActive:!1,micListening:!1,lastResult:"",lastError:"",timestamp:Date.now()},jh=new Set;function hR(e){return jh.add(e),e({...kh}),()=>jh.delete(e)}function ea(e){Object.assign(kh,e,{timestamp:Date.now()}),jh.forEach(t=>t({...kh}))}function Vv(e){ea({permissionStatus:e})}function mR(e){ea({modelReady:e})}function X1(e){ea({sessionActive:e})}function Z1(e){ea({micListening:e})}function J1(e){ea({lastResult:e})}function du(e){ea({lastError:e})}const te=Zs("BlindfoldNative");let Ch=null,Eh=null;const pR=new Promise((e,t)=>{Ch=e,Eh=t});let eb=!1,tb=!1;function oc(e){tb=e,eb=!0,e&&Ch?Ch():!e&&Eh&&Eh(new Error("Mic permission denied"))}async function Fo(){if(eb)return tb;try{return await pR,!0}catch{return!1}}let tf=null;async function nb(){if(Nn.isNativePlatform())try{tf||(tf=await Ji(()=>Promise.resolve().then(()=>jN),void 0));const{Haptics:e,ImpactStyle:t}=tf;await e.impact({style:t.Light})}catch{}}class gR{constructor(){this.sessions=new Map,this.isSpeaking=!1,this.micState="LISTENING",this.pendingRestarts=[],this.settlingTimeout=null,this.resumeDelayMs=350}register(t){this.sessions.set(t.id,t),console.log(`[VoiceController] Registered session: ${t.id}`)}unregister(t){this.sessions.delete(t),console.log(`[VoiceController] Unregistered session: ${t}`)}clearPendingForSession(t){const n=this.pendingRestarts.length;this.pendingRestarts=this.pendingRestarts.filter(r=>r!==t),n!==this.pendingRestarts.length&&console.log(`[VoiceController] Cleared pending restart for: ${t}`)}setActive(t,n){const r=this.sessions.get(t);r&&(r.shouldBeActive=n)}onTTSStart(){this.settlingTimeout&&(clearTimeout(this.settlingTimeout),this.settlingTimeout=null),this.isSpeaking=!0,this.micState="SPEAKING",console.log("[VoiceController] TTS starting, state -> SPEAKING, pausing all voice sessions"),Array.from(this.sessions.values()).forEach(t=>{t.shouldBeActive&&t.pause()})}onTTSEnd(){this.isSpeaking=!1,this.micState="SETTLING";const t=this.sessions.size,n=Array.from(this.sessions.keys()).join(", ");console.log(`[VoiceController] TTS ended, state -> SETTLING, waiting ${this.resumeDelayMs}ms, sessions: [${n}] (${t})`),this.settlingTimeout=setTimeout(()=>{if(this.isSpeaking)console.log("[VoiceController] Skipping resume - TTS started again during settling");else{this.micState="LISTENING",console.log("[VoiceController] Settling complete, state -> LISTENING"),Array.from(this.sessions.entries()).forEach(([a,l])=>{console.log(`[VoiceController] Session '${a}' shouldBeActive=${l.shouldBeActive}`)});const r=new Set,s=this.pendingRestarts.length>0;s&&(console.log(`[VoiceController] Processing ${this.pendingRestarts.length} pending restarts: ${this.pendingRestarts.join(", ")}`),this.playMicLiveClick(),this.pendingRestarts.forEach(a=>{const l=this.sessions.get(a);l&&l.shouldBeActive?(console.log(`[VoiceController] Executing pending restart for: ${a}`),l.resume(),r.add(a)):console.log(`[VoiceController] Skipping pending restart for '${a}' - session=${!!l}, shouldBeActive=${l==null?void 0:l.shouldBeActive}`)}),this.pendingRestarts=[]);const i=Array.from(this.sessions.values()).filter(a=>a.shouldBeActive&&!r.has(a.id));console.log(`[VoiceController] Sessions to resume: ${i.length}`),i.length>0?(s||this.playMicLiveClick(),i.forEach(a=>{console.log(`[VoiceController] Resuming session: ${a.id}`),a.resume()})):console.log("[VoiceController] No sessions to resume")}},this.resumeDelayMs)}queueRestart(t){if(this.micState==="LISTENING"){const n=this.sessions.get(t);n&&n.shouldBeActive&&(console.log(`[VoiceController] Instant restart for session: ${t}`),this.playMicLiveClick(),n.resume())}else this.pendingRestarts.includes(t)||(this.pendingRestarts.push(t),console.log(`[VoiceController] Queued restart for session: ${t} (state: ${this.micState})`))}getMicState(){return this.micState}canStartMic(){return this.micState==="LISTENING"}async playMicLiveClick(){try{if(Nn.isNativePlatform()){const{Haptics:t,ImpactStyle:n}=await Ji(async()=>{const{Haptics:r,ImpactStyle:s}=await Promise.resolve().then(()=>jN);return{Haptics:r,ImpactStyle:s}},void 0);await t.impact({style:n.Light})}console.log("[VoiceController] Mic live click")}catch{}}getIsSpeaking(){return this.isSpeaking}}const ns=new gR,Va=class Va{constructor(){this.protectedSessionId=null,this.disposableSessionId=null,this.isPurging=!1}register(t){Va.PROTECTED_SESSIONS.includes(t)?(this.protectedSessionId==="game"&&t==="reconstruction"&&console.log("[VoiceRegistry] HANDOVER: game  reconstruction (mic stays warm)"),this.protectedSessionId=t,console.log(`[VoiceRegistry] Protected lane: ${t}`)):(this.disposableSessionId=t,console.log(`[VoiceRegistry] Disposable lane: ${t}`))}unregister(t){const n=Va.PROTECTED_SESSIONS.includes(t);n&&this.protectedSessionId===t?(this.protectedSessionId=null,console.log(`[VoiceRegistry] Unregistered protected: ${t}`)):!n&&this.disposableSessionId===t&&(this.disposableSessionId=null,console.log(`[VoiceRegistry] Unregistered disposable: ${t}`))}async purge(){if(this.isPurging){console.log("[VoiceRegistry] Already purging, skipping");return}this.isPurging=!0;const t=!!this.protectedSessionId;console.log(`[VoiceRegistry] PURGE: Killing disposable lane${t?" (game protected)":""}`);try{Zv.stop()}catch(n){console.log("[VoiceRegistry] trainingVoice.stop error:",n)}try{ft.stop()}catch(n){console.log("[VoiceRegistry] voiceMaster.stop error:",n)}if(!t)try{rn.stop()}catch(n){console.log("[VoiceRegistry] voiceRecognition.stop error:",n)}if(Bn&&!t)try{await te.stopSession(),console.log("[VoiceRegistry] Stopped native session")}catch(n){console.log("[VoiceRegistry] stopSession error:",n)}try{ft.resetMicBusy()}catch(n){console.log("[VoiceRegistry] resetMicBusy error:",n)}try{rn.resetStartedFlag()}catch(n){console.log("[VoiceRegistry] resetStartedFlag error:",n)}this.disposableSessionId=null,await new Promise(n=>setTimeout(n,500)),this.isPurging=!1,console.log("[VoiceRegistry] PURGE complete - disposable lane cleared, flags reset")}async purgeAll(){if(this.isPurging){console.log("[VoiceRegistry] Already purging, skipping");return}this.isPurging=!0,console.log("[VoiceRegistry] NUCLEAR PURGE: Killing ALL sessions");try{rn.stop()}catch{}try{Zv.stop()}catch{}try{ft.stop()}catch{}if(Bn)try{await te.stopSession()}catch{}try{ft.resetMicBusy()}catch{}try{rn.resetStartedFlag()}catch{}this.protectedSessionId=null,this.disposableSessionId=null,await new Promise(t=>setTimeout(t,500)),this.isPurging=!1,console.log("[VoiceRegistry] NUCLEAR PURGE complete")}clearProtectedLane(){this.protectedSessionId&&(console.log(`[VoiceRegistry] Clearing protected lane: ${this.protectedSessionId}`),this.protectedSessionId=null)}getProtectedSession(){return this.protectedSessionId}getDisposableSession(){return this.disposableSessionId}getActiveSession(){return this.protectedSessionId||this.disposableSessionId}};Va.PROTECTED_SESSIONS=["game","reconstruction"];let Ph=Va;const Fi=new Ph,qv={K:"King",Q:"Queen",R:"Rook",B:"Bishop",N:"Knight",P:"Pawn",k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"},As={king:"K",queen:"Q",rook:"R",bishop:"B",bish:"B",bishup:"B",bishep:"B",bashop:"B",knight:"N",night:"N",nite:"N",kite:"N",horse:"N",pawn:"",castle:"R"},vR=["um","uh","the","a","an","like","so","well","just","actually","basically"];function xR(e){return e.toLowerCase().split(/\s+/).filter(r=>!vR.includes(r)).join(" ")}const ji={a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",alpha:"a",alfa:"a",bravo:"b",charlie:"c",delta:"d",echo:"e",foxtrot:"f",golf:"g",hotel:"h",able:"a",apple:"a",ay:"a",aye:"a",eh:"a",boy:"b",baker:"b",bee:"b",be:"b",cat:"c",see:"c",sea:"c",cee:"c",dog:"d",dee:"d",david:"d",easy:"e",edward:"e",eee:"e",ee:"e",fox:"f",frank:"f",eff:"f",ef:"f",if:"f",of:"f",george:"g",gee:"g",jee:"g",henry:"h",aitch:"h",ach:"h"},fu={1:"1",one:"1",won:"1",first:"1",2:"2",two:"2",to:"2",too:"2",second:"2",3:"3",three:"3",free:"3",third:"3",4:"4",four:"4",for:"4",forth:"4",fourth:"4",5:"5",five:"5",fifth:"5",6:"6",six:"6",sixth:"6",sicks:"6",7:"7",seven:"7",seventh:"7",8:"8",eight:"8",ate:"8",eighth:"8"};function Xo(e,t=!1,n=!1,r=!1){if(!e)return"";if(e==="O-O"||e==="0-0")return r?"Castles kingside, checkmate!":n?"Castles kingside, check":"Castles kingside";if(e==="O-O-O"||e==="0-0-0")return r?"Castles queenside, checkmate!":n?"Castles queenside, check":"Castles queenside";let s="",i=e.replace(/[+#=].*$/,"");const a=i.match(/^([KQRBN])/);a?(s=qv[a[1]]+" ",i=i.substring(1)):s="";const l=i.includes("x");i=i.replace("x","");const c=i.match(/([a-h])([1-8])/g);if(c&&c.length>0){const u=c[c.length-1],f=u[0],m=u[1];if(l||t){if(c.length>1||!a){const h=i[0];h&&h.match(/[a-h]/)&&(s+=h+" ")}s+="takes "+f+m}else s+=f+m}if(e.includes("=")){const u=e.match(/=([QRBN])/);u&&(s+=", promotes to "+qv[u[1]])}return r||e.includes("#")?s+=", checkmate!":(n||e.includes("+"))&&(s+=", check"),s.trim()}let Ss=[],wa=!1,co=null,nf=!1;const Bn=Nn.isNativePlatform();async function kp(){if(!Bn){try{if(navigator.permissions){const e=await navigator.permissions.query({name:"microphone"});return e.state==="granted"?"granted":e.state==="denied"?"denied":"prompt"}}catch{}return"prompt"}try{return(await te.checkPermissions()).mic}catch(e){return console.error("[Voice] Error checking permissions:",e),"unknown"}}async function rb(){if(!Bn)try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(t=>t.stop()),!0}catch{return console.warn("[Voice] Web microphone permission denied"),!1}try{const e=await te.checkPermissions();return e.mic==="granted"?!0:e.mic==="denied"||e.mic==="prompt"?(await te.requestPermissions()).mic==="granted":!1}catch(e){return console.error("[Voice] Permission handling error:",e),!1}}async function yR(){const e=await rb(),t=await kp();return{granted:e,status:t}}function wR(){return Bn?Promise.resolve([]):wa&&Ss.length>0?Promise.resolve(Ss):co||(co=new Promise(e=>{const t=window.speechSynthesis.getVoices();if(t.length>0){Ss=t,wa=!0,co=null,e(t);return}const n=()=>{Ss=window.speechSynthesis.getVoices(),wa=!0,co=null,window.speechSynthesis.removeEventListener("voiceschanged",n),e(Ss)};window.speechSynthesis.addEventListener("voiceschanged",n),setTimeout(()=>{wa||(Ss=window.speechSynthesis.getVoices(),wa=Ss.length>0,co=null,window.speechSynthesis.removeEventListener("voiceschanged",n),e(Ss))},1e3)}),co)}let Th=null;function bR(){Th&&Th.abort()}const SR={a:"Ay",b:"Bee",c:"See",d:"Dee",e:"e",f:"f",g:"Gee",h:"h"},NR={N:"Knight",B:"Bishop",R:"Rook",Q:"Queen",K:"King"},kR=new Set(["correct","wrong","next","say","the","move","look","okay","continue","seconds","remaining","are","you","sure","want","resign","yes","no","can","play","legal","moves","for","material","is","equal","white","black","up","point","points","at","highlighted","squares","on","board"]);function jR(e){const t=e.toLowerCase().replace(/[^a-z\s]/g,"").split(/\s+/).filter(i=>i.length>0);if(t.length>0&&t.every(i=>kR.has(i))||!/[a-h]\s*[1-8]|[NBRQK][a-h]|O-O/.test(e))return e;let s=e.replace(/O-O-O/gi,"queenside castle").replace(/O-O/gi,"kingside castle").replace(/x/g," takes ").replace(/\+/g," check").replace(/#/g," checkmate");for(const[i,a]of Object.entries(NR))s=s.replace(new RegExp(`\\b${i}([a-h])([1-8])`,"g"),`${a} $1$2`),s=s.replace(new RegExp(`\\b${i}\\s*takes\\s*([a-h])([1-8])`,"gi"),`${a} takes $1$2`),s=s.replace(new RegExp(`\\b${i}([a-h1-8])([a-h])([1-8])`,"g"),`${a} $1$2$3`);for(const[i,a]of Object.entries(SR))s=s.replace(new RegExp(`\\b${i}\\s*([1-8])`,"gi"),`${a} $1`);return s=s.replace(/\ba\s+([1-8])\b/gi,"Ay $1"),s=s.replace(/\s+/g," ").trim(),s}async function Rt(e,t=.9){ns.onTTSStart(),nf=!0,bR(),console.log("[Voice] Mic muted: Bot is speaking");const n=jR(e);try{if(Bn)await new Promise(async r=>{let s=!1;const i=Math.max(2500,n.length*150),a=setTimeout(()=>{s||(console.warn("[Voice] TTS Event timeout - forcing resume after",i,"ms"),s=!0,l&&l.remove().catch(()=>{}),r())},i);let l=null;try{l=await zv.addListener("end",()=>{s||(console.log("[Voice] TTS End detected via event - mic resume now safe"),clearTimeout(a),s=!0,l&&l.remove().catch(()=>{}),r())})}catch(c){console.warn("[Voice] Failed to setup TTS listener:",c)}try{await zv.speak({text:n,language:"en-US",rate:t,pitch:1,volume:1})}catch(c){console.error("[Voice] Speak error:",c),clearTimeout(a),l&&l.remove().catch(()=>{}),s=!0,r()}l||(console.log("[Voice] No listener available, using fallback timing"),await new Promise(c=>setTimeout(c,Math.max(1e3,n.length*100))),s||(clearTimeout(a),s=!0,r()))});else{if(console.log("[Voice] speechSynthesis in window:","speechSynthesis"in window),console.log("[Voice] window.speechSynthesis:",typeof window.speechSynthesis),!("speechSynthesis"in window)||!window.speechSynthesis){console.warn("Speech synthesis not supported");return}try{window.speechSynthesis.cancel()}catch(s){console.warn("[Voice] Failed to cancel previous speech:",s)}await new Promise(s=>setTimeout(s,50));const r=await wR();console.log("[Voice] Loaded voices:",r.length),await new Promise(s=>{const i=new SpeechSynthesisUtterance(n);i.rate=t,i.pitch=1,i.volume=1;const a=r.find(l=>l.lang.startsWith("en-"));a?(i.voice=a,i.lang=a.lang):i.lang="en-US",i.onend=()=>{console.log("[Voice] Speech ended successfully"),s()},i.onerror=l=>{console.error("[Voice] Speech error:",l),s()},console.log("[Voice] Speaking:",n),window.speechSynthesis.speak(i)})}}finally{nf=!1,ns.onTTSEnd(),setTimeout(()=>{nf||console.log("[Voice] Mic active: Listening for your move")},100)}}function sb(e){let t=e;return t=t.replace(/\bbefore\b/gi,"b 4"),t=t.replace(/\bsci\s*fi\b/gi,"c 5"),t=t.replace(/\bscifi\b/gi,"c 5"),t=t.replace(/\bquincy\b/gi,"queen c"),t=t.replace(/\brookie\b/gi,"rook e"),t=t.replace(/\brookies\b/gi,"rook e"),t=t.replace(/\brook\s+he\b/gi,"rook e"),t=t.replace(/\brock\s+([a-h])\b/gi,"rook $1"),t=t.replace(/\bhe\s+([1-8])\b/g,"e $1"),t=t.replace(/\bhe\s+(one|two|three|four|five|six|seven|eight|won|too|free|fore|for|fifth|sixth|seventh|eighth)\b/gi,"e $1"),t=t.replace(/\bthe\s+([1-8])\b/g,"d $1"),t=t.replace(/\bthe\s+(one|two|three|four|five|six|seven|eight)\b/gi,"d $1"),t=t.replace(/\b([a-h])\s+for\b/gi,"$1 4"),t}function Wv(e,t){const n=sb(e.toLowerCase().trim()),r=xR(n),s=r.replace(/\s+/g,"").match(/^([a-h])([1-8])$/);if(s){const g=s[1]+s[2],w=t.find(x=>!/^[KQRBN]/i.test(x)&&x.includes(g));if(w)return w}if(r.includes("castle")||r.includes("castles"))if(r.includes("queen")||r.includes("long")){if(t.includes("O-O-O"))return"O-O-O"}else if(r.includes("king")||r.includes("short")){if(t.includes("O-O"))return"O-O"}else{if(t.includes("O-O"))return"O-O";if(t.includes("O-O-O"))return"O-O-O"}let i="",a="",l="",c="",u="",f=!1,m="";const h=r.split(/\s+/);for(const g of h){const w=g.toLowerCase();As[w]!==void 0&&(i=As[w]),(w==="takes"||w==="captures"||w==="x")&&(f=!0),!(w==="promotes"||w==="promotion")&&(ji[w]&&(a?c||(c=a,a=ji[w]):a=ji[w]),fu[w]&&(l&&!u&&(u=l),l=fu[w]),["queen","rook","bishop","knight"].includes(w)&&(r.includes("promote")||r.includes("equals"))&&(m=As[w]||"Q"))}for(const g of h){const w=g.match(/^([a-h])([1-8])$/i);w&&(a&&!c&&(c=a),l&&!u&&(u=l),a=w[1].toLowerCase(),l=w[2])}if(!m&&(l==="1"||l==="8")){const g=h[h.length-1].toLowerCase();["queen","rook","bishop","knight"].includes(g)&&(m=As[g]||"Q")}if(!a||!l)return null;const y=a+l,p=t.filter(g=>{const w=g.replace(/[+#]/g,"");if(!w.includes(y))return!1;if(i){if(!w.startsWith(i))return!1}else if(w.match(/^[KQRBN]/))return!1;if(c){const x=w.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(x&&x[1]&&x[1]!==c)return!1}if(u){const x=w.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(x&&x[2]&&x[2]!==u)return!1}return!0});if(p.length===1){let g=p[0];return m&&g.includes("=")&&(g=g.replace(/=[QRBN]/,"="+m)),g}if(p.length>1){const g=p.filter(x=>x.includes("x")),w=p.filter(x=>!x.includes("x"));return f&&g.length===1?g[0]:!f&&w.length===1?w[0]:p[0]}return null}function Uv(e,t){const n=sb(e.toLowerCase().trim());if(n.includes("castle")||n.includes("castles"))if(n.includes("queen")||n.includes("long")){if(t.includes("O-O-O"))return{move:"O-O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""}}else if(n.includes("king")||n.includes("short")){if(t.includes("O-O"))return{move:"O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""}}else{if(t.includes("O-O"))return{move:"O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""};if(t.includes("O-O-O"))return{move:"O-O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""}}let r="",s="",i="",a="",l="",c=!1,u="";const f=n.split(/\s+/);for(const y of f){const p=y.toLowerCase();As[p]!==void 0&&(r=As[p]),(p==="takes"||p==="captures"||p==="x")&&(c=!0),!(p==="promotes"||p==="promotion")&&(ji[p]&&(s?a||(a=s,s=ji[p]):s=ji[p]),fu[p]&&(i&&!l&&(l=i),i=fu[p]),["queen","rook","bishop","knight"].includes(p)&&(n.includes("promote")||n.includes("equals"))&&(u=As[p]||"Q"))}for(const y of f){const p=y.match(/^([a-h])([1-8])$/i);p&&(s&&!a&&(a=s),i&&!l&&(l=i),s=p[1].toLowerCase(),i=p[2])}if(!u&&(i==="1"||i==="8")){const y=f[f.length-1].toLowerCase();["queen","rook","bishop","knight"].includes(y)&&(u=As[y]||"Q")}if(!s||!i)return{move:null,isAmbiguous:!1,candidates:[],piece:"",targetSquare:""};const m=s+i,h=t.filter(y=>{const p=y.replace(/[+#]/g,"");if(!p.includes(m))return!1;if(r){if(!p.startsWith(r))return!1}else if(p.match(/^[KQRBN]/))return!1;if(a){const g=p.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(g&&g[1]&&g[1]!==a)return!1}if(l){const g=p.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(g&&g[2]&&g[2]!==l)return!1}return!0});if(h.length===1){let y=h[0];return u&&y.includes("=")&&(y=y.replace(/=[QRBN]/,"="+u)),{move:y,isAmbiguous:!1,candidates:[],piece:r,targetSquare:m}}if(h.length>1){const y=h.filter(g=>g.includes("x")),p=h.filter(g=>!g.includes("x"));return c&&y.length===1?{move:y[0],isAmbiguous:!1,candidates:[],piece:r,targetSquare:m}:!c&&p.length===1?{move:p[0],isAmbiguous:!1,candidates:[],piece:r,targetSquare:m}:{move:null,isAmbiguous:!0,candidates:h,piece:r,targetSquare:m}}return{move:null,isAmbiguous:!1,candidates:[],piece:r,targetSquare:m}}const rf={one:"1",won:"1",want:"1",two:"2",too:"2",to:"2",three:"3",tree:"3",free:"3",four:"4",for:"4",fore:"4",five:"5",fife:"5",six:"6",sick:"6",sicks:"6",seven:"7",eight:"8",ate:"8",ait:"8",a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",alpha:"a",alfa:"a",bravo:"b",charlie:"c",delta:"d",echo:"e",foxtrot:"f",golf:"g",hotel:"h",ay:"a",aye:"a",apple:"a",bee:"b",be:"b",boy:"b",see:"c",sea:"c",cee:"c",dee:"d",the:"d",tea:"d",dog:"d",ee:"e",easy:"e",eff:"f",if:"f",of:"f",off:"f",fox:"f",gee:"g",jee:"g",aitch:"h",ach:"h"};function Hv(e){const t=e.toLowerCase().trim(),n=t.split(/\s+/);let r=null,s=null;for(const i of n){const a=rf[i];a?/^[a-h]$/.test(a)?r||(r=a):/^[1-8]$/.test(a)&&(s||(s=a)):i.length===1&&(/^[a-h]$/i.test(i)?r||(r=i.toLowerCase()):/^[1-8]$/.test(i)&&(s||(s=i)))}if(rf[t]){const i=rf[t];/^[a-h]$/.test(i)?r=i:/^[1-8]$/.test(i)&&(s=i)}return t.length===1&&(/^[a-h]$/i.test(t)?r=t.toLowerCase():/^[1-8]$/.test(t)&&(s=t)),{file:r,rank:s}}function Kv(e,t){for(const n of e){const s=n.replace(/[+#]/g,"").match(/^[KQRBN]([a-h])?([1-8])?x?[a-h][1-8]/);if(s){const i=s[1]||null,a=s[2]||null;if(t.file&&t.rank){if(i===t.file&&a===t.rank)return n}else if(t.file){if(i===t.file)return n}else if(t.rank&&a===t.rank)return n}}return null}function Gv(e){const t=[];for(const n of e){const s=n.replace(/[+#]/g,"").match(/^[KQRBN]([a-h])?([1-8])?x?[a-h][1-8]/);if(s){const i=s[1]||"",a=s[2]||"";(i||a)&&t.push(i+a)}}return t}function Qv(e){const t=[];for(const n of e){const s=n.replace(/[+#=QRBN]/g,"").match(/^([a-h])x[a-h][1-8]$/);s&&t.push(s[1])}return t}function Yv(e,t){for(const n of e)if(n.replace(/[+#]/g,"").startsWith(t+"x"))return n;return null}function Xv(e){return e.length<2?!1:e.every(t=>{const n=t.replace(/[+#=QRBN]/g,"");return/^[a-h]x[a-h][1-8]$/.test(n)})}class CR{constructor(){this.onResult=null,this.onListeningChange=null,this.legalMoves=[],this.isStarted=!1,this.isMuted=!1,this.unmuteTimeout=null}async pauseLoop(){console.log("[VoiceRecognition] pauseLoop"),await ft.pauseLoop(),this.isMuted=!0}resumeLoop(){console.log("[VoiceRecognition] resumeLoop"),this.isMuted=!1,ft.resumeLoop()}setMute(t,n=400){this.unmuteTimeout&&(clearTimeout(this.unmuteTimeout),this.unmuteTimeout=null),t?(this.isMuted=!0,console.log("[VoiceRecognition] Software MUTE: transcripts will be ignored")):this.unmuteTimeout=setTimeout(()=>{this.isMuted=!1,this.unmuteTimeout=null,console.log("[VoiceRecognition] Software UNMUTE: mic LIVE")},n)}getMuted(){return this.isMuted}setLegalMoves(t){this.legalMoves=t,this.isStarted&&ft.setLegalMoves(t)}setOnResult(t){this.onResult=t}setOnListeningChange(t){this.onListeningChange=t}async start(){if(this.isStarted){console.log("[VoiceRecognition] Already started, skipping duplicate start");return}await this.startInternal()}async startInternal(){try{const t=await ft.start({mode:"move",legalMoves:this.legalMoves,onTranscript:(n,r)=>{if(this.isMuted){console.log("[VoiceRecognition] Ignored while muted:",n);return}this.onResult&&this.onResult(r||null,n)},onListeningChange:n=>{this.onListeningChange&&this.onListeningChange(n)}});this.isStarted=t,console.log("[VoiceRecognition] startInternal result:",t)}catch(t){console.log("[VoiceRecognition] startInternal failed:",t),this.isStarted=!1}}async forceRestart(){console.log("[VoiceRecognition] Force restart - bypassing guard"),await this.startInternal()}stop(){this.isStarted&&(this.isStarted=!1,ft.stop())}async stopAndWait(){this.isStarted&&(this.isStarted=!1,await ft.stopAndWait())}resetStartedFlag(){this.isStarted=!1}abort(){this.stop()}async reset(){await this.stopAndWait(),this.onResult=null,this.onListeningChange=null,this.legalMoves=[]}isSupported(){return!0}getIsListening(){return ft.getIsListening()&&ft.getMode()==="move"}async waitForInitialization(){await ft.checkAvailability()}}const rn=new CR;Th=rn;const mi=class mi{constructor(){this.isListening=!1,this.shouldBeListening=!1,this.config=null,this.listenerHandle=null,this.stateListenerHandle=null,this.webRecognition=null,this.restartTimeout=null,this.availabilityChecked=!1,this.isAvailable=!1,this.lastErrorTime=0,this.consecutiveFailures=0,this.micBusy=!1,this.onMicBusyChange=null,this.onRetryNeeded=null,this.sessionId="master",this.isRegistered=!1,this.isPaused=!1,this.captureDebounceTimeout=null,this.pendingCaptureTranscript="",this.shouldRestart=!0,this.restartPromise=null,this.isStarting=!1,this.expectedStops=0,this.isMuted=!1,this.muteTimeout=null}async checkAvailability(){if(this.availabilityChecked)return this.isAvailable;if(Bn)try{return await Fo()?(this.isAvailable=!0,this.availabilityChecked=!0,!0):(console.log("[VoiceMaster] Voice service not ready (permission denied or init failed)"),this.isAvailable=!1,this.availabilityChecked=!0,!1)}catch(t){return console.error("[VoiceMaster] Error checking availability:",t),this.isAvailable=!1,this.availabilityChecked=!0,!1}else{const t=typeof window<"u"?window.SpeechRecognition||window.webkitSpeechRecognition:null;return this.isAvailable=!!t,this.availabilityChecked=!0,this.isAvailable}}setOnMicBusyChange(t){this.onMicBusyChange=t}setOnRetryNeeded(t){this.onRetryNeeded=t}isMicBusy(){return this.micBusy}resetMicBusy(){this.micBusy=!1,this.consecutiveFailures=0,this.lastErrorTime=0,this.onMicBusyChange&&this.onMicBusyChange(!1)}mute(t=400){this.isMuted=!0,this.muteTimeout&&clearTimeout(this.muteTimeout),this.muteTimeout=setTimeout(()=>{this.isMuted=!1,this.muteTimeout=null,console.log("[VoiceMaster] Mute window ended, listening again")},t),console.log(`[VoiceMaster] Mute window started: ${t}ms`)}setMute(t,n=400){this.muteTimeout&&(clearTimeout(this.muteTimeout),this.muteTimeout=null),t?(this.isMuted=!0,console.log("[VoiceMaster] Software MUTE: transcripts will be ignored")):this.muteTimeout=setTimeout(()=>{this.isMuted=!1,this.muteTimeout=null,console.log("[VoiceMaster] Software UNMUTE: mic LIVE")},n)}getIsMuted(){return this.isMuted}triggerRestart(){if(this.restartPromise){console.log("[VoiceMaster] Restart already in progress, skipping duplicate.");return}this.restartPromise=(async()=>{try{if(console.log("[VoiceMaster] Serialized restart sequence initiating..."),this.expectedStops++,console.log("[VoiceMaster] triggerRestart: expectedStops incremented to",this.expectedStops),console.log("[VoiceMaster] triggerRestart: preparing to restart listening"),this.expectedStops=0,await new Promise(t=>setTimeout(t,100)),this.shouldRestart&&!this.micBusy){console.log("[VoiceMaster] triggerRestart: restarting mic capture");try{await te.startListening()}catch(t){console.warn("[VoiceMaster] triggerRestart startListening failed, scheduling retry:",t),setTimeout(()=>{this.shouldRestart&&!this.micBusy&&!this.restartPromise&&this.triggerRestart()},200)}}else console.log("[VoiceMaster] triggerRestart: shouldRestart=false or micBusy, skipping")}catch(t){console.warn("[VoiceMaster] Restart sequence failed:",t),setTimeout(()=>{this.shouldRestart&&!this.micBusy&&!this.restartPromise&&this.triggerRestart()},200)}finally{this.restartPromise=null}})()}async pauseLoop(){console.log("[VoiceMaster] Pausing Loop for TTS"),this.shouldRestart=!1,Bn&&console.log("[VoiceMaster] pauseLoop: mic paused (flag set, results ignored)")}resumeLoop(){if(console.log("[VoiceMaster] Resuming Loop after TTS"),this.shouldRestart=!0,!this.config){console.log("[VoiceMaster] resumeLoop: no config, skipping");return}this.triggerRestart()}getShouldRestartLoop(){return this.shouldRestart}async start(t){return this.micBusy=!1,this.isListening=!1,this.consecutiveFailures=0,this.isPaused=!1,this.shouldRestart=!0,this.isMuted=!1,console.log("[VoiceMaster] Atomic reset: state cleared for fresh start, loop enabled"),(this.listenerHandle||this.webRecognition||this.shouldBeListening)&&(console.log("[VoiceMaster] Clean handoff: stopping previous session"),await this.stop(),await new Promise(r=>setTimeout(r,100))),this.config=t,await this.checkAvailability()?(this.isRegistered||(ns.register({id:this.sessionId,pause:()=>this.pauseInternal(),resume:()=>this.resumeInternal(),shouldBeActive:!0}),this.isRegistered=!0),ns.setActive(this.sessionId,!0),Fi.register(this.sessionId),this.shouldBeListening=!0,console.log(`[VoiceMaster] Starting in '${t.mode}' mode`),ns.canStartMic()?Bn?this.startNative():this.startWeb():(console.log("[VoiceMaster] TTS active or settling, queueing start for after TTS"),ns.queueRestart(this.sessionId),t.onListeningChange&&t.onListeningChange(!0),!0)):(console.log("[VoiceMaster] Not available, cannot start"),!1)}setLegalMoves(t){this.config&&(this.config.legalMoves=t)}processTranscript(t){if(!this.config||!this.shouldBeListening)return;if(this.isMuted){console.log("[VoiceMaster] Ignoring transcript during mute window:",t);return}const n=this.config.mode;switch(console.log(`[VoiceMaster] Processing in '${n}' mode:`,t),n){case"raw":this.config.onTranscript(t);break;case"move":this.processMoveMode(t);break;case"placement":this.processPlacementMode(t);break}}processMoveMode(t){if(!this.config)return;const n=t.toLowerCase(),r=n.includes("takes")||n.includes("captures"),s=/\b(knight|bishop|rook|queen|king|horse|castle)\b/.test(n),i=/[a-h]\s*[1-8]/.test(n);if((s||r)&&!i){console.log("[VoiceMaster] Piece/capture detected, waiting for target square..."),this.pendingCaptureTranscript=t,this.captureDebounceTimeout&&clearTimeout(this.captureDebounceTimeout),this.captureDebounceTimeout=setTimeout(()=>{var c,u;console.log("[VoiceMaster] Debounce timeout, processing:",this.pendingCaptureTranscript);const l=Wv(this.pendingCaptureTranscript,((c=this.config)==null?void 0:c.legalMoves)||[]);(u=this.config)==null||u.onTranscript(this.pendingCaptureTranscript,l),this.pendingCaptureTranscript=""},mi.CAPTURE_DEBOUNCE_MS);return}this.pendingCaptureTranscript&&i&&(this.captureDebounceTimeout&&(clearTimeout(this.captureDebounceTimeout),this.captureDebounceTimeout=null),this.pendingCaptureTranscript="");const a=Wv(t,this.config.legalMoves||[]);this.config.onTranscript(t,a)}processPlacementMode(t){this.config&&this.config.onTranscript(t)}pauseInternal(){var t;if(console.log(`[VoiceMaster] pauseInternal called - isListening=${this.isListening}, shouldBeListening=${this.shouldBeListening}`),this.shouldRestart=!1,!this.isListening){console.log("[VoiceMaster] Not pausing - already not listening");return}if(this.isPaused=!0,console.log("[VoiceMaster] Pausing for TTS"),Bn)console.log("[VoiceMaster] Pausing - mic will resume on TTS end");else if(this.webRecognition)try{this.webRecognition.stop()}catch(n){console.log("[VoiceMaster] Web pause error:",n)}this.isListening=!1,(t=this.config)!=null&&t.onListeningChange&&this.config.onListeningChange(!1),console.log("[VoiceMaster] pauseInternal complete - isListening now false")}async resumeInternal(){if(console.log(`[VoiceMaster] resumeInternal called - shouldBeListening=${this.shouldBeListening}, isListening=${this.isListening}, isPaused=${this.isPaused}`),!this.shouldBeListening){console.log("[VoiceMaster] Not resuming - shouldBeListening is false");return}if(this.isListening){console.log("[VoiceMaster] Already listening, skipping resume");return}if(this.isPaused=!1,this.shouldRestart=!0,console.log("[VoiceMaster] Resuming after TTS"),Bn){if(this.restartPromise){console.log("[VoiceMaster] Waiting for pending restart to complete...");try{await this.restartPromise}catch{}}this.triggerRestart()}else this.startWeb()}async startNative(){var n;if(this.isStarting)return console.log("[VoiceMaster] startNative blocked: Already starting"),!1;if(this.micBusy)return console.log("[VoiceMaster] Mic is busy, not starting"),!1;const t=Date.now()-this.lastErrorTime;if(t<3e3&&this.lastErrorTime>0)return console.log(`[VoiceMaster] Lockout: ${3e3-t}ms remaining, queueing restart`),this.restartTimeout||this.scheduleRestart(),!0;this.isStarting=!0;try{return this.listenerHandle&&(await this.listenerHandle.remove(),this.listenerHandle=null),this.listenerHandle=await te.addListener("onSpeechResult",r=>{if(!this.shouldRestart){console.log("[VoiceMaster] Loop paused, ignoring speech result");return}if(r.text&&this.shouldBeListening){const s=r.text;this.consecutiveFailures=0,this.processTranscript(s),this.shouldRestart&&this.shouldBeListening&&te.startListening().catch(i=>{console.log("[VoiceMaster] startListening error after result:",i)})}}),console.log("[VoiceMaster] Starting BlindfoldNative session..."),await te.startSession(),console.log("[VoiceMaster] Starting BlindfoldNative listening..."),await te.startListening(),this.isListening=!0,this.consecutiveFailures=0,console.log("[VoiceMaster] Started native - isListening=true, shouldBeListening="+this.shouldBeListening),(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!0),await nb(),!0}catch(r){return console.error("[VoiceMaster] Failed to start native:",r),this.lastErrorTime=Date.now(),this.consecutiveFailures++,this.consecutiveFailures>=mi.MAX_CONSECUTIVE_FAILURES?(console.log("[VoiceMaster] Too many failures, mic is busy"),this.micBusy=!0,this.isListening=!1,this.onMicBusyChange&&this.onMicBusyChange(!0),this.onRetryNeeded&&this.onRetryNeeded(),!1):(this.shouldBeListening&&this.scheduleRestart(),!1)}finally{this.isStarting=!1}}startWeb(){try{const t=window.SpeechRecognition||window.webkitSpeechRecognition;return t?(this.webRecognition=new t,this.webRecognition.continuous=!0,this.webRecognition.interimResults=!1,this.webRecognition.lang="en-US",this.webRecognition.onresult=n=>{const r=n.results[n.results.length-1];if(r.isFinal&&this.shouldBeListening){const s=r[0].transcript;this.processTranscript(s)}},this.webRecognition.onerror=n=>{console.log("[VoiceMaster] Web error:",n.error),n.error!=="aborted"&&n.error!=="not-allowed"&&this.shouldBeListening&&this.scheduleRestart()},this.webRecognition.onend=()=>{var n;this.isListening=!1,(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!1),this.shouldBeListening&&this.scheduleRestart()},this.webRecognition.onstart=()=>{var n;this.isListening=!0,(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!0)},this.webRecognition.start(),console.log("[VoiceMaster] Started web"),!0):!1}catch(t){return console.error("[VoiceMaster] Failed to start web:",t),!1}}scheduleRestart(){const t=Date.now()-this.lastErrorTime;if(t<3e3&&this.lastErrorTime>0){this.restartTimeout&&clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>{this.scheduleRestart()},3e3-t+100);return}if(this.micBusy){console.log("[VoiceMaster] Mic busy, not scheduling restart");return}this.restartTimeout&&clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>{this.shouldBeListening&&!this.micBusy&&(console.log("[VoiceMaster] Scheduled restart firing via Gatekeeper"),Bn?this.triggerRestart():this.startWeb())},500)}async stop(){var t;if(console.log("[VoiceMaster] stop() called - beginning full cleanup"),this.shouldBeListening=!1,this.isPaused=!1,this.micBusy=!1,this.consecutiveFailures=0,this.lastErrorTime=0,this.captureDebounceTimeout&&(clearTimeout(this.captureDebounceTimeout),this.captureDebounceTimeout=null),this.pendingCaptureTranscript="",ns.setActive(this.sessionId,!1),ns.clearPendingForSession(this.sessionId),this.isRegistered&&(ns.unregister(this.sessionId),Fi.unregister(this.sessionId),this.isRegistered=!1),this.restartTimeout&&(clearTimeout(this.restartTimeout),this.restartTimeout=null),Bn)try{await te.stopSession(),this.listenerHandle&&(await this.listenerHandle.remove(),this.listenerHandle=null)}catch(n){console.log("[VoiceMaster] Stop error:",n)}else if(this.webRecognition){try{this.webRecognition.stop()}catch(n){console.log("[VoiceMaster] Web stop error:",n)}this.webRecognition=null}this.isListening=!1,(t=this.config)!=null&&t.onListeningChange&&this.config.onListeningChange(!1),this.config=null,console.log("[VoiceMaster] Stopped - all state reset, session fully cleaned")}async stopAndWait(){var n;if(this.shouldBeListening=!1,!this.listenerHandle&&!this.webRecognition){console.log("[VoiceMaster] stopAndWait: nothing to stop, fast path"),this.micBusy=!1,this.isListening=!1,this.consecutiveFailures=0,this.isPaused=!1,this.config=null;return}console.log("[VoiceMaster] stopAndWait: active session, stopping...");const t=async()=>{let r=!1;const s=this.stop().then(()=>{r=!0});if(await Promise.race([s,new Promise(i=>setTimeout(i,500))]),!r){if(console.warn("[VoiceMaster] Normal stop timed out, forcing native stop"),Bn)try{await te.stopSession()}catch{}if(this.listenerHandle){try{await this.listenerHandle.remove()}catch{}this.listenerHandle=null}if(this.webRecognition){try{this.webRecognition.stop()}catch{}this.webRecognition=null}}};await Promise.race([t(),new Promise(r=>setTimeout(()=>{console.warn("[VoiceMaster] 800ms hard timeout - forcing cleanup"),r()},800))]),this.micBusy=!1,this.isListening=!1,this.consecutiveFailures=0,this.isPaused=!1,this.listenerHandle=null,this.stateListenerHandle=null,this.webRecognition=null,(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!1),this.config=null,console.log("[VoiceMaster] stopAndWait complete - state reset")}getIsListening(){return this.isListening}getMode(){var t;return((t=this.config)==null?void 0:t.mode)||null}};mi.CAPTURE_DEBOUNCE_MS=2e3,mi.MAX_CONSECUTIVE_FAILURES=3;let Rh=mi;const ft=new Rh,Zv={async start(e,t){return ft.start({mode:"raw",onTranscript:e,onListeningChange:t})},async stop(){return ft.stop()},async stopAndWait(){return ft.stopAndWait()},async checkAvailability(){return ft.checkAvailability()},getIsListening(){return ft.getIsListening()},setOnMicBusyChange(e){ft.setOnMicBusyChange(e)},setOnRetryNeeded(e){ft.setOnRetryNeeded(e)},isMicBusy(){return ft.isMicBusy()},resetMicBusy(){ft.resetMicBusy()},mute(e=400){ft.mute(e)},setMute(e,t=400){ft.setMute(e,t)},getIsMuted(){return ft.getIsMuted()},async pauseLoop(){return ft.pauseLoop()},resumeLoop(){ft.resumeLoop()}};function hu(e){const t=Math.max(400,Math.min(2600,e));if(t<=600){const i=(t-400)/200;return{elo:t,depth:1,randomPercent:Math.round(50-i*20),skillLevel:Math.round(i*2)}}if(t<=800){const i=(t-600)/200;return{elo:t,depth:1+Math.round(i),randomPercent:Math.round(30-i*10),skillLevel:Math.round(2+i*3)}}if(t<=1e3){const i=(t-800)/200;return{elo:t,depth:2+Math.round(i),randomPercent:Math.round(20-i*8),skillLevel:Math.round(5+i*3)}}if(t<=1200){const i=(t-1e3)/200;return{elo:t,depth:3+Math.round(i),randomPercent:Math.round(12-i*5),skillLevel:Math.round(8+i*2)}}if(t<=1400){const i=(t-1200)/200;return{elo:t,depth:4+Math.round(i),randomPercent:Math.round(7-i*4),skillLevel:Math.round(10+i*2)}}if(t<=1600){const i=(t-1400)/200;return{elo:t,depth:5+Math.round(i),randomPercent:Math.round(3-i*3),skillLevel:Math.round(12+i*3)}}if(t<=1800){const i=(t-1600)/200;return{elo:t,depth:6,randomPercent:0,skillLevel:Math.round(15+i*2)}}const n=(t-1800)/800,r=2e5;return{elo:t,depth:0,randomPercent:0,skillLevel:Math.round(17+n*3),nodes:Math.round(r+n*(2e6-r))}}function ER(e){return e<=600?"Beginner":e<=800?"Novice":e<=1e3?"Casual":e<=1200?"Intermediate":e<=1400?"Club Player":e<=1600?"Strong Club":e<=1800?"Expert":e<=2e3?"Master":e<=2200?"National Master":e<=2400?"International Master":"Grandmaster"}const ob=[400,600,800,1e3,1200,1400,1600,1800,2e3,2200,2400,2600];ob.map(e=>{const t=hu(e);return{id:`elo_${e}`,elo:e,difficulty:`elo_${e}`,depth:t.depth,randomPercent:t.randomPercent}});const jp=ob,PR={kingsideCornerWhite:["f1","g1","h1","f2","g2","h2"],queensideCornerWhite:["a1","b1","c1","a2","b2","c2"],kingsideCornerBlack:["f8","g8","h8","f7","g7","h7"],queensideCornerBlack:["a8","b8","c8","a7","b7","c7"],center:["d4","e4","d5","e5"],extendedCenter:["c3","d3","e3","f3","c4","f4","c5","f5","c6","d6","e6","f6"],kingside:["f1","g1","h1","f2","g2","h2","f3","g3","h3","f4","g4","h4","f5","g5","h5","f6","g6","h6","f7","g7","h7","f8","g8","h8"],queenside:["a1","b1","c1","a2","b2","c2","a3","b3","c3","a4","b4","c4","a5","b5","c5","a6","b6","c6","a7","b7","c7","a8","b8","c8"],corners:["a1","h1","a8","h8"]},ib="blindfold-chess-stats-v2",ab="blindfold-chess-settings",TR="blindfold-chess-stats",lb={moves10:{total:0,count:0},moves20:{total:0,count:0},moves30:{total:0,count:0},moves40:{total:0,count:0},moves50plus:{total:0,count:0}},cb={opening:{total:0,count:0},middlegame:{total:0,count:0},endgame:{total:0,count:0}},Cp={wins:0,draws:0,losses:0,lastGamePeekTime:0,totalPeekTime:0,gamesWithPeeks:0,bestPeekFreeStreak:0,lastGamePeekFreeStreak:0,lastGameAvgResponseTime:0,totalResponseTime:0,totalResponseMoves:0,bestClarityScore:0,lastClarityScore:0,lastVoicePurity:0,bestVoicePurity:0,tierStats:{},visualizationCeiling:0,visualizationCeilingElo:null,clarityByMoveCount:{...lb},totalPeekFreeGames:0,totalGamesPlayed:0,reconstructionVoiceInputs:0,reconstructionTouchInputs:0,gameVoiceMoves:0,gameTouchMoves:0,responseTimeByPhase:{...cb},lastGameEndgameDrift:0,voiceCorrections:0,voiceCommandsTotal:0,lastGameVoiceCorrections:0,mentalBlurCount:0,squareInquiryHeatmap:{},totalSquareInquiries:0,stockfishThresholdElo:null,longestGame:0,fastestWin:0,currentWinStreak:0,bestWinStreak:0,currentPeekFreeStreak:0,bestPeekFreeGameStreak:0,blindfoldGamesPlayed:0,assistedGamesCount:0,lastGameWasAssisted:!1},Jv={boardReconstructionEnabled:!1,botThinkingTimeEnabled:!1,keepAwakeEnabled:!0};function e0(e){const t={...Cp,...e};return t.clarityByMoveCount={...lb,...e.clarityByMoveCount||{}},t.responseTimeByPhase={...cb,...e.responseTimeByPhase||{}},t.tierStats=e.tierStats||{},t.squareInquiryHeatmap=e.squareInquiryHeatmap||{},t}function za(){try{const e=localStorage.getItem(ib);if(e){const n=JSON.parse(e);return e0(n)}const t=localStorage.getItem(TR);if(t){const n=JSON.parse(t),r=e0(n);return Ep(r),r}}catch(e){console.error("Failed to load stats:",e)}return{...Cp}}function Ep(e){try{localStorage.setItem(ib,JSON.stringify(e))}catch(t){console.error("Failed to save stats:",t)}}function Mh(){try{const e=localStorage.getItem(ab);if(e){const t=JSON.parse(e);return{...Jv,...t}}}catch(e){console.error("Failed to load settings:",e)}return{...Jv}}function _h(e){try{localStorage.setItem(ab,JSON.stringify(e))}catch(t){console.error("Failed to save settings:",t)}}function RR(e){return e<=10?"moves10":e<=20?"moves20":e<=30?"moves30":e<=40?"moves40":"moves50plus"}function ub(e){return{opening:e.slice(0,10),middlegame:e.slice(10,30),endgame:e.slice(30)}}function MR(e){const t=ub(e);if(t.opening.length===0||t.endgame.length===0)return 0;const n=t.opening.reduce((i,a)=>i+a,0)/t.opening.length,r=t.endgame.reduce((i,a)=>i+a,0)/t.endgame.length;if(n===0)return 0;const s=(r-n)/n*100;return Math.max(0,Math.round(s))}function _R(e){if(e.length<3)return 0;const n=e.reduce((r,s)=>r+s,0)/e.length*2;return e.filter(r=>r>n).length}function AR(e){for(const t of jp){const n=e[t];if(!n||n.totalGames<3)continue;if(n.wins/n.totalGames<.5)return t}return null}function LR(e){let t=0;for(const n of jp){const r=e[n];r&&r.peekFreeWins>0&&n>t&&(t=n)}return{elo:t}}function IR(e,t,n=0,r=[],s,i,a){const l=za(),c=(a==null?void 0:a.botElo)||1200,u=(a==null?void 0:a.wasPeekFree)??t===0,f=(a==null?void 0:a.totalMoves)||r.length,m=(a==null?void 0:a.voiceCorrections)||0,h=(a==null?void 0:a.voiceCommands)||0,y=(a==null?void 0:a.reconstructionVoiceInputs)||0,p=(a==null?void 0:a.reconstructionTouchInputs)||0,g=(a==null?void 0:a.gameVoiceMoves)||0,w=(a==null?void 0:a.gameTouchMoves)||0,x=(a==null?void 0:a.squareInquiries)||[],v=(a==null?void 0:a.isBlindfold)??!1,b=(a==null?void 0:a.wasAssisted)??!1;e==="win"?l.wins++:e==="loss"?l.losses++:l.draws++,l.totalGamesPlayed++,v?(l.blindfoldGamesPlayed++,l.lastGamePeekTime=t,t>0&&(l.totalPeekTime+=t,l.gamesWithPeeks++),u?(l.totalPeekFreeGames++,l.currentPeekFreeStreak++,l.currentPeekFreeStreak>l.bestPeekFreeGameStreak&&(l.bestPeekFreeGameStreak=l.currentPeekFreeStreak)):l.currentPeekFreeStreak=0,l.lastGamePeekFreeStreak=n,n>l.bestPeekFreeStreak&&(l.bestPeekFreeStreak=n)):(l.lastGamePeekTime=0,l.lastGamePeekFreeStreak=0,l.currentPeekFreeStreak=0),l.tierStats[c]||(l.tierStats[c]={wins:0,losses:0,draws:0,peekFreeWins:0,totalPeeks:0,totalGames:0});const S=l.tierStats[c];S.totalGames++,e==="win"?(S.wins++,v&&u&&S.peekFreeWins++,l.currentWinStreak++,l.currentWinStreak>l.bestWinStreak&&(l.bestWinStreak=l.currentWinStreak),(l.fastestWin===0||f<l.fastestWin)&&(l.fastestWin=f)):e==="loss"?(S.losses++,l.currentWinStreak=0):S.draws++,v&&!u&&S.totalPeeks++,f>l.longestGame&&(l.longestGame=f);const N=LR(l.tierStats);if(l.visualizationCeiling=N.elo,l.visualizationCeilingElo=N.elo||null,l.stockfishThresholdElo=AR(l.tierStats),r.length>0){const j=r.reduce((C,R)=>C+R,0)/r.length;l.lastGameAvgResponseTime=j,l.totalResponseTime+=r.reduce((C,R)=>C+R,0),l.totalResponseMoves+=r.length;const k=ub(r);k.opening.length>0&&(l.responseTimeByPhase.opening.total+=k.opening.reduce((C,R)=>C+R,0),l.responseTimeByPhase.opening.count+=k.opening.length),k.middlegame.length>0&&(l.responseTimeByPhase.middlegame.total+=k.middlegame.reduce((C,R)=>C+R,0),l.responseTimeByPhase.middlegame.count+=k.middlegame.length),k.endgame.length>0&&(l.responseTimeByPhase.endgame.total+=k.endgame.reduce((C,R)=>C+R,0),l.responseTimeByPhase.endgame.count+=k.endgame.length),l.lastGameEndgameDrift=MR(r),l.mentalBlurCount+=_R(r)}else l.lastGameAvgResponseTime=0,l.lastGameEndgameDrift=0;if(l.lastGameWasAssisted=b,b&&l.assistedGamesCount++,s!==void 0){const j=b?Math.min(s,50):s;l.lastClarityScore=j,j>l.bestClarityScore&&(l.bestClarityScore=j);const k=RR(f);l.clarityByMoveCount[k].total+=j,l.clarityByMoveCount[k].count++}if(i!==void 0&&(l.lastVoicePurity=i,i>l.bestVoicePurity&&(l.bestVoicePurity=i)),l.voiceCorrections+=m,l.voiceCommandsTotal+=h,l.lastGameVoiceCorrections=m,l.reconstructionVoiceInputs+=y,l.reconstructionTouchInputs+=p,l.gameVoiceMoves+=g,l.gameTouchMoves+=w,x.length>0){l.totalSquareInquiries+=x.length;for(const j of x){const k=j.toLowerCase();l.squareInquiryHeatmap[k]=(l.squareInquiryHeatmap[k]||0)+1}}return Ep(l),l}function $R(e){return e.totalResponseMoves===0?0:e.totalResponseTime/e.totalResponseMoves}function db(e){const t=e.blindfoldGamesPlayed||0;return t===0?0:Math.round(e.totalPeekFreeGames/t*100)}function OR(e){const t=e.gameVoiceMoves+e.gameTouchMoves;return t===0?{voice:0,touch:0}:{voice:Math.round(e.gameVoiceMoves/t*100),touch:Math.round(e.gameTouchMoves/t*100)}}function fb(e){const t=e.responseTimeByPhase.opening,n=e.responseTimeByPhase.middlegame,r=e.responseTimeByPhase.endgame;return{opening:t.count>0?Math.round(t.total/t.count):0,middlegame:n.count>0?Math.round(n.total/n.count):0,endgame:r.count>0?Math.round(r.total/r.count):0}}function hb(e){const t=e.clarityByMoveCount;return{moves10:t.moves10.count>0?Math.round(t.moves10.total/t.moves10.count):0,moves20:t.moves20.count>0?Math.round(t.moves20.total/t.moves20.count):0,moves30:t.moves30.count>0?Math.round(t.moves30.total/t.moves30.count):0,moves40:t.moves40.count>0?Math.round(t.moves40.total/t.moves40.count):0,moves50plus:t.moves50plus.count>0?Math.round(t.moves50plus.total/t.moves50plus.count):0}}function mb(e){return e.voiceCommandsTotal===0?0:Math.round(e.voiceCorrections/e.voiceCommandsTotal*100)}function DR(e){const t={kingsideCornerWhite:0,queensideCornerWhite:0,kingsideCornerBlack:0,queensideCornerBlack:0,center:0,extendedCenter:0,kingside:0,queenside:0,corners:0};for(const[n,r]of Object.entries(e.squareInquiryHeatmap))for(const[s,i]of Object.entries(PR))i.includes(n)&&(t[s]+=r||0);return t}function pb(e,t=5){return Object.entries(e.squareInquiryHeatmap).map(([n,r])=>({square:n,count:r||0})).sort((n,r)=>r.count-n.count).slice(0,t)}function BR(e,t){if(e.totalSquareInquiries===0)return 0;const n=e.squareInquiryHeatmap[t.toLowerCase()]||0,r=Math.max(...Object.values(e.squareInquiryHeatmap).map(s=>s||0),1);return Math.round(n/r*100)}function FR(e,t){const n=e.tierStats[t];return!n||n.totalGames===0?0:Math.round(n.wins/n.totalGames*100)}function ui(e){return e===0?"-":e<1e3?`${Math.round(e)}ms`:`${(e/1e3).toFixed(1)}s`}function zR(){Ep({...Cp})}function VR(e){const t=[],n=hb(e);n.moves20>0&&n.moves40>0&&n.moves20-n.moves40>20&&t.push({type:"warning",category:"visualization",title:"Clarity Degradation",message:`Your accuracy drops from ${n.moves20}% at 20 moves to ${n.moves40}% at 40 moves. Focus on endgame visualization training.`}),e.visualizationCeiling>0&&t.push({type:"success",category:"visualization",title:"Visualization Ceiling",message:`You've beaten a ${e.visualizationCeiling} Elo bot without peeking! Keep pushing higher.`});const r=db(e);r>50&&t.push({type:"success",category:"visualization",title:"Peek-Free Progress",message:`${r}% of your games are peek-free. Your visualization is improving!`});const s=fb(e);if(s.endgame>0&&s.opening>0){const f=(s.endgame-s.opening)/s.opening*100;f>50&&t.push({type:"warning",category:"cognitive",title:"Endgame Drift Detected",message:`Your endgame response time is ${Math.round(f)}% slower than opening. The open board may be causing "mental blur."`})}const i=mb(e);i>20&&t.push({type:"tip",category:"cognitive",title:"Voice Accuracy",message:`You correct ${i}% of voice commands. Try speaking more slowly or using full square names.`}),e.stockfishThresholdElo&&t.push({type:"info",category:"tactical",title:"Stockfish Threshold",message:`Your win rate drops below 50% at ${e.stockfishThresholdElo} Elo. Focus training at this level.`});const a=DR(e),l=pb(e,3);if(l.length>0&&l[0].count>=3){const f=l.map(m=>m.square.toUpperCase()).join(", ");t.push({type:"warning",category:"tactical",title:"Board Blind Spots",message:`You frequently lose track of: ${f}. Focus on visualizing these squares.`})}const c=a.kingside,u=a.queenside;return c>u*2&&c>=5?t.push({type:"tip",category:"tactical",title:"Kingside Visualization",message:"Your mental image of the kingside is weaker. Practice visualizing the f, g, and h files."}):u>c*2&&u>=5&&t.push({type:"tip",category:"tactical",title:"Queenside Visualization",message:"Your mental image of the queenside is weaker. Practice visualizing the a, b, and c files."}),a.corners>=4&&t.push({type:"tip",category:"visualization",title:"Corner Awareness",message:"Your mental board is blurry in the corners (a1, h1, a8, h8). These squares need more focus."}),t}class gb{constructor(t){this.sqlite=t,this._connectionDict=new Map}async initWebStore(){try{return await this.sqlite.initWebStore(),Promise.resolve()}catch(t){return Promise.reject(t)}}async saveToStore(t){try{return await this.sqlite.saveToStore({database:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async saveToLocalDisk(t){try{return await this.sqlite.saveToLocalDisk({database:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async getFromLocalDiskToStore(t){const n=t??!0;try{return await this.sqlite.getFromLocalDiskToStore({overwrite:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async echo(t){try{const n=await this.sqlite.echo({value:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isSecretStored(){try{const t=await this.sqlite.isSecretStored();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async setEncryptionSecret(t){try{return await this.sqlite.setEncryptionSecret({passphrase:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async changeEncryptionSecret(t,n){try{return await this.sqlite.changeEncryptionSecret({passphrase:t,oldpassphrase:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async clearEncryptionSecret(){try{return await this.sqlite.clearEncryptionSecret(),Promise.resolve()}catch(t){return Promise.reject(t)}}async checkEncryptionSecret(t){try{const n=await this.sqlite.checkEncryptionSecret({passphrase:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async addUpgradeStatement(t,n){try{return t.endsWith(".db")&&(t=t.slice(0,-3)),await this.sqlite.addUpgradeStatement({database:t,upgrade:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async createConnection(t,n,r,s,i){try{t.endsWith(".db")&&(t=t.slice(0,-3)),await this.sqlite.createConnection({database:t,encrypted:n,mode:r,version:s,readonly:i});const a=new t0(t,i,this.sqlite),l=i?`RO_${t}`:`RW_${t}`;return this._connectionDict.set(l,a),Promise.resolve(a)}catch(a){return Promise.reject(a)}}async closeConnection(t,n){try{t.endsWith(".db")&&(t=t.slice(0,-3)),await this.sqlite.closeConnection({database:t,readonly:n});const r=n?`RO_${t}`:`RW_${t}`;return this._connectionDict.delete(r),Promise.resolve()}catch(r){return Promise.reject(r)}}async isConnection(t,n){const r={};t.endsWith(".db")&&(t=t.slice(0,-3));const s=n?`RO_${t}`:`RW_${t}`;return r.result=this._connectionDict.has(s),Promise.resolve(r)}async retrieveConnection(t,n){t.endsWith(".db")&&(t=t.slice(0,-3));const r=n?`RO_${t}`:`RW_${t}`;if(this._connectionDict.has(r)){const s=this._connectionDict.get(r);return typeof s<"u"?Promise.resolve(s):Promise.reject(`Connection ${t} is undefined`)}else return Promise.reject(`Connection ${t} does not exist`)}async getNCDatabasePath(t,n){try{const r=await this.sqlite.getNCDatabasePath({path:t,database:n});return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async createNCConnection(t,n){try{await this.sqlite.createNCConnection({databasePath:t,version:n});const r=new t0(t,!0,this.sqlite),s=`RO_${t})`;return this._connectionDict.set(s,r),Promise.resolve(r)}catch(r){return Promise.reject(r)}}async closeNCConnection(t){try{await this.sqlite.closeNCConnection({databasePath:t});const n=`RO_${t})`;return this._connectionDict.delete(n),Promise.resolve()}catch(n){return Promise.reject(n)}}async isNCConnection(t){const n={},r=`RO_${t})`;return n.result=this._connectionDict.has(r),Promise.resolve(n)}async retrieveNCConnection(t){if(this._connectionDict.has(t)){const n=`RO_${t})`,r=this._connectionDict.get(n);return typeof r<"u"?Promise.resolve(r):Promise.reject(`Connection ${t} is undefined`)}else return Promise.reject(`Connection ${t} does not exist`)}async isNCDatabase(t){try{const n=await this.sqlite.isNCDatabase({databasePath:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async retrieveAllConnections(){return this._connectionDict}async closeAllConnections(){const t=new Map;try{for(const n of this._connectionDict.keys()){const r=n.substring(3),s=n.substring(0,3)==="RO_";await this.sqlite.closeConnection({database:r,readonly:s}),t.set(n,null)}for(const n of t.keys())this._connectionDict.delete(n);return Promise.resolve()}catch(n){return Promise.reject(n)}}async checkConnectionsConsistency(){try{const t=[...this._connectionDict.keys()],n=[],r=[];for(const i of t)n.push(i.substring(0,2)),r.push(i.substring(3));const s=await this.sqlite.checkConnectionsConsistency({dbNames:r,openModes:n});return s.result||(this._connectionDict=new Map),Promise.resolve(s)}catch(t){return this._connectionDict=new Map,Promise.reject(t)}}async importFromJson(t){try{const n=await this.sqlite.importFromJson({jsonstring:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isJsonValid(t){try{const n=await this.sqlite.isJsonValid({jsonstring:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async copyFromAssets(t){const n=t??!0;try{return await this.sqlite.copyFromAssets({overwrite:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async getFromHTTPRequest(t,n){const r=n??!0;try{return await this.sqlite.getFromHTTPRequest({url:t,overwrite:r}),Promise.resolve()}catch(s){return Promise.reject(s)}}async isDatabaseEncrypted(t){t.endsWith(".db")&&(t=t.slice(0,-3));try{const n=await this.sqlite.isDatabaseEncrypted({database:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isInConfigEncryption(){try{const t=await this.sqlite.isInConfigEncryption();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isInConfigBiometricAuth(){try{const t=await this.sqlite.isInConfigBiometricAuth();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isDatabase(t){t.endsWith(".db")&&(t=t.slice(0,-3));try{const n=await this.sqlite.isDatabase({database:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async getDatabaseList(){try{const n=(await this.sqlite.getDatabaseList()).values;n.sort();const r={values:n};return Promise.resolve(r)}catch(t){return Promise.reject(t)}}async getMigratableDbList(t){const n=t||"default";try{const r=await this.sqlite.getMigratableDbList({folderPath:n});return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async addSQLiteSuffix(t,n){const r=t||"default",s=n||[];try{const i=await this.sqlite.addSQLiteSuffix({folderPath:r,dbNameList:s});return Promise.resolve(i)}catch(i){return Promise.reject(i)}}async deleteOldDatabases(t,n){const r=t||"default",s=n||[];try{const i=await this.sqlite.deleteOldDatabases({folderPath:r,dbNameList:s});return Promise.resolve(i)}catch(i){return Promise.reject(i)}}async moveDatabasesAndAddSuffix(t,n){const r=t||"default",s=n||[];return this.sqlite.moveDatabasesAndAddSuffix({folderPath:r,dbNameList:s})}}class t0{constructor(t,n,r){this.dbName=t,this.readonly=n,this.sqlite=r}getConnectionDBName(){return this.dbName}getConnectionReadOnly(){return this.readonly}async open(){try{return await this.sqlite.open({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async close(){try{return await this.sqlite.close({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async beginTransaction(){try{const t=await this.sqlite.beginTransaction({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async commitTransaction(){try{const t=await this.sqlite.commitTransaction({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async rollbackTransaction(){try{const t=await this.sqlite.rollbackTransaction({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isTransactionActive(){try{const t=await this.sqlite.isTransactionActive({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async loadExtension(t){try{return await this.sqlite.loadExtension({database:this.dbName,path:t,readonly:this.readonly}),Promise.resolve()}catch(n){return Promise.reject(n)}}async enableLoadExtension(t){try{return await this.sqlite.enableLoadExtension({database:this.dbName,toggle:t,readonly:this.readonly}),Promise.resolve()}catch(n){return Promise.reject(n)}}async getUrl(){try{const t=await this.sqlite.getUrl({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getVersion(){try{const t=await this.sqlite.getVersion({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getTableList(){try{const t=await this.sqlite.getTableList({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async execute(t,n=!0,r=!0){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const s=await this.sqlite.execute({database:this.dbName,statements:t,transaction:n,readonly:!1,isSQL92:r});return Promise.resolve(s)}}catch(s){return Promise.reject(s)}}async query(t,n,r=!0){let s;try{return n&&n.length>0?s=await this.sqlite.query({database:this.dbName,statement:t,values:n,readonly:this.readonly,isSQL92:!0}):s=await this.sqlite.query({database:this.dbName,statement:t,values:[],readonly:this.readonly,isSQL92:r}),s=await this.reorderRows(s),Promise.resolve(s)}catch(i){return Promise.reject(i)}}async run(t,n,r=!0,s="no",i=!0){let a;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(n&&n.length>0?a=await this.sqlite.run({database:this.dbName,statement:t,values:n,transaction:r,readonly:!1,returnMode:s,isSQL92:!0}):a=await this.sqlite.run({database:this.dbName,statement:t,values:[],transaction:r,readonly:!1,returnMode:s,isSQL92:i}),a.changes=await this.reorderRows(a.changes),Promise.resolve(a))}catch(l){return Promise.reject(l)}}async executeSet(t,n=!0,r="no",s=!0){let i;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(i=await this.sqlite.executeSet({database:this.dbName,set:t,transaction:n,readonly:!1,returnMode:r,isSQL92:s}),i.changes=await this.reorderRows(i.changes),Promise.resolve(i))}catch(a){return Promise.reject(a)}}async isExists(){try{const t=await this.sqlite.isDBExists({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isTable(t){try{const n=await this.sqlite.isTableExists({database:this.dbName,table:t,readonly:this.readonly});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isDBOpen(){try{const t=await this.sqlite.isDBOpen({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async delete(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteDatabase({database:this.dbName,readonly:!1}),Promise.resolve())}catch(t){return Promise.reject(t)}}async createSyncTable(){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const t=await this.sqlite.createSyncTable({database:this.dbName,readonly:!1});return Promise.resolve(t)}}catch(t){return Promise.reject(t)}}async setSyncDate(t){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.setSyncDate({database:this.dbName,syncdate:t,readonly:!1}),Promise.resolve())}catch(n){return Promise.reject(n)}}async getSyncDate(){try{const t=await this.sqlite.getSyncDate({database:this.dbName,readonly:this.readonly});let n="";return t.syncDate>0&&(n=new Date(t.syncDate*1e3).toISOString()),Promise.resolve(n)}catch(t){return Promise.reject(t)}}async exportToJson(t,n=!1){try{const r=await this.sqlite.exportToJson({database:this.dbName,jsonexportmode:t,readonly:this.readonly,encrypted:n});return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async deleteExportedRows(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteExportedRows({database:this.dbName,readonly:!1}),Promise.resolve())}catch(t){return Promise.reject(t)}}async executeTransaction(t,n=!0){let r=0,s=!1;if(this.readonly)return Promise.reject("not allowed in read-only mode");if(await this.sqlite.beginTransaction({database:this.dbName}),s=await this.sqlite.isTransactionActive({database:this.dbName}),!s)return Promise.reject("After Begin Transaction, no transaction active");try{for(const l of t){if(typeof l!="object"||!("statement"in l))throw new Error("Error a task.statement must be provided");if("values"in l&&l.values&&l.values.length>0){const c=l.statement.toUpperCase().includes("RETURNING")?"all":"no",u=await this.sqlite.run({database:this.dbName,statement:l.statement,values:l.values,transaction:!1,readonly:!1,returnMode:c,isSQL92:n});if(u.changes.changes<0)throw new Error("Error in transaction method run ");r+=u.changes.changes}else{const c=await this.sqlite.execute({database:this.dbName,statements:l.statement,transaction:!1,readonly:!1});if(c.changes.changes<0)throw new Error("Error in transaction method execute ");r+=c.changes.changes}}const i=await this.sqlite.commitTransaction({database:this.dbName});r+=i.changes.changes;const a={changes:{changes:r}};return Promise.resolve(a)}catch(i){const a=i.message?i.message:i;return await this.sqlite.rollbackTransaction({database:this.dbName}),Promise.reject(a)}}async reorderRows(t){const n=t;if(t!=null&&t.values&&typeof t.values[0]=="object"&&Object.keys(t.values[0]).includes("ios_columns")){const r=t.values[0].ios_columns,s=[];for(let i=1;i<t.values.length;i++){const a=t.values[i],l={};for(const c of r)l[c]=a[c];s.push(l)}n.values=s}return Promise.resolve(n)}}const vb=Zs("CapacitorSQLite",{web:()=>Ji(()=>import("./web-zgGXjo7A.js"),[]).then(e=>new e.CapacitorSQLiteWeb),electron:()=>window.CapacitorCustomPlatform.plugins.CapacitorSQLite}),sf="blindfold_chess";let ba=null,Kt=null,mu=!1,Mc=!1,ic=null;async function xb(){return Mc?!0:ic||(ic=qR(),ic)}async function qR(){var e;try{if(mu=Nn.isNativePlatform(),!mu)return console.log("[TrainingStats] Web platform - using localStorage fallback"),Mc=!0,!0;ba=new gb(vb);const t=await ba.checkConnectionsConsistency(),n=(await ba.isConnection(sf,!1)).result;t.result&&n?Kt=await ba.retrieveConnection(sf,!1):Kt=await ba.createConnection(sf,!1,"no-encryption",1,!1),await Kt.open(),await Kt.execute(`
      CREATE TABLE IF NOT EXISTS training_stats (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        mode TEXT NOT NULL,
        score REAL NOT NULL,
        streak INTEGER NOT NULL DEFAULT 0,
        achieved_at TEXT NOT NULL
      );
    `);try{((e=(await Kt.query("PRAGMA table_info(training_stats);")).values)==null?void 0:e.some(a=>a.name==="streak"))||(await Kt.execute("ALTER TABLE training_stats ADD COLUMN streak INTEGER NOT NULL DEFAULT 0;"),console.log("[TrainingStats] Migrated: Added streak column"))}catch(s){console.warn("[TrainingStats] Migration check failed:",s)}return console.log("[TrainingStats] Database initialized successfully"),Mc=!0,!0}catch(t){return console.error("[TrainingStats] Failed to initialize database:",t),Mc=!0,!1}}function yb(){try{const e=localStorage.getItem("blindfold_training_stats");return e?JSON.parse(e):[]}catch{return[]}}function WR(e){localStorage.setItem("blindfold_training_stats",JSON.stringify(e))}async function UR(e,t,n=0){var s,i;await xb();const r=new Date().toISOString();try{if(!mu){const c=yb(),u=c.length>0?Math.max(...c.map(m=>m.id))+1:1,f={id:u,mode:e,score:t,streak:n,achievedAt:r};return c.unshift(f),WR(c),console.log("[TrainingStats] Session saved to localStorage:",u),u}if(!Kt)return console.error("[TrainingStats] Database not initialized"),null;const l=await Kt.run(`
      INSERT INTO training_stats (mode, score, streak, achieved_at)
      VALUES (?, ?, ?, ?);
    `,[e,t,n,r]);return console.log("[TrainingStats] Session saved:",(s=l.changes)==null?void 0:s.lastId),((i=l.changes)==null?void 0:i.lastId)||null}catch(a){return console.error("[TrainingStats] Failed to save session:",a instanceof Error?a.message:String(a)),null}}async function pu(){var t,n,r,s,i,a,l,c,u,f,m,h,y,p,g,w,x,v,b,S,N,j,k,C,R,P,D,_,q,M,z,Q;await xb();const e={colorBlitzBest:null,colorBlitzBestDate:null,colorBlitzBestStreak:null,coordinateSniperBest:null,coordinateSniperBestDate:null,coordinateSniperBestStreak:null,voiceMoveMasterBest:null,voiceMoveMasterBestDate:null,voiceMoveMasterBestStreak:null,knightsPathBest:null,knightsPathBestDate:null,endgameDrillsBest:null,endgameDrillsBestDate:null,blindfoldMarathonBest:null,blindfoldMarathonBestDate:null,totalSessions:0,recentSessions:[]};try{if(!mu){const Re=yb(),Me=Re.filter(nt=>nt.mode==="color_blitz"),F=Re.filter(nt=>nt.mode==="coordinate_sniper"),H=Re.filter(nt=>nt.mode==="voice_move_master"),he=Re.filter(nt=>nt.mode==="knights_path"),ie=Re.filter(nt=>nt.mode==="endgame_drills"),ae=Re.filter(nt=>nt.mode==="blindfold_marathon");let $e=null,ke=null,Te=null;if(Me.length>0){const nt=Me.reduce((Ye,jt)=>jt.score>Ye.score?jt:Ye);$e=nt.score,ke=nt.achievedAt,Te=Me.reduce((Ye,jt)=>(jt.streak||0)>(Ye.streak||0)?jt:Ye).streak||null}let st=null,kt=null,Je=null;if(F.length>0){const nt=F.reduce((Ye,jt)=>jt.score<Ye.score?jt:Ye);st=nt.score,kt=nt.achievedAt,Je=F.reduce((Ye,jt)=>(jt.streak||0)>(Ye.streak||0)?jt:Ye).streak||null}let Wt=null,Qt=null,jn=null;if(H.length>0){const nt=H.reduce((Ye,jt)=>jt.score>Ye.score?jt:Ye);Wt=nt.score,Qt=nt.achievedAt,jn=H.reduce((Ye,jt)=>(jt.streak||0)>(Ye.streak||0)?jt:Ye).streak||null}let hn=null,Yt=null;if(he.length>0){const nt=he.reduce((Lt,Ye)=>Ye.score<Lt.score?Ye:Lt);hn=nt.score,Yt=nt.achievedAt}let vt=null,On=null;if(ie.length>0){const nt=ie.reduce((Lt,Ye)=>Ye.score<Lt.score?Ye:Lt);vt=nt.score,On=nt.achievedAt}let tn=null,gr=null;if(ae.length>0){const nt=ae.reduce((Lt,Ye)=>Ye.score<Lt.score?Ye:Lt);tn=nt.score,gr=nt.achievedAt}return{colorBlitzBest:$e,colorBlitzBestDate:ke,colorBlitzBestStreak:Te,coordinateSniperBest:st,coordinateSniperBestDate:kt,coordinateSniperBestStreak:Je,voiceMoveMasterBest:Wt,voiceMoveMasterBestDate:Qt,voiceMoveMasterBestStreak:jn,knightsPathBest:hn,knightsPathBestDate:Yt,endgameDrillsBest:vt,endgameDrillsBestDate:On,blindfoldMarathonBest:tn,blindfoldMarathonBestDate:gr,totalSessions:Re.length,recentSessions:Re.slice(0,10)}}if(!Kt)return e;const Y=`
      SELECT score as best_score, achieved_at
      FROM training_stats
      WHERE mode = 'color_blitz'
      ORDER BY score DESC
      LIMIT 1;
    `,T=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'color_blitz';
    `,$=`
      SELECT score as best_time, achieved_at
      FROM training_stats
      WHERE mode = 'coordinate_sniper'
      ORDER BY score ASC
      LIMIT 1;
    `,V=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'coordinate_sniper';
    `,G=`
      SELECT score as best_score, achieved_at
      FROM training_stats
      WHERE mode = 'voice_move_master'
      ORDER BY score DESC
      LIMIT 1;
    `,de=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'voice_move_master';
    `,ne=`
      SELECT score as best_time, achieved_at
      FROM training_stats
      WHERE mode = 'knights_path'
      ORDER BY score ASC
      LIMIT 1;
    `,ve=`
      SELECT score as best_time, achieved_at
      FROM training_stats
      WHERE mode = 'endgame_drills'
      ORDER BY score ASC
      LIMIT 1;
    `,fe=`
      SELECT score as best_time, achieved_at
      FROM training_stats
      WHERE mode = 'blindfold_marathon'
      ORDER BY score ASC
      LIMIT 1;
    `,A="SELECT COUNT(*) as total FROM training_stats;",B=`
      SELECT id, mode, score, streak, achieved_at as achievedAt
      FROM training_stats
      ORDER BY achieved_at DESC
      LIMIT 10;
    `,W=await Kt.query(Y),U=await Kt.query(T),re=await Kt.query($),se=await Kt.query(V),ye=await Kt.query(G),Fe=await Kt.query(de),ze=await Kt.query(ne),Ae=await Kt.query(ve),oe=await Kt.query(fe),Ne=await Kt.query(A),Ce=await Kt.query(B);return{colorBlitzBest:((n=(t=W.values)==null?void 0:t[0])==null?void 0:n.best_score)||null,colorBlitzBestDate:((s=(r=W.values)==null?void 0:r[0])==null?void 0:s.achieved_at)||null,colorBlitzBestStreak:((a=(i=U.values)==null?void 0:i[0])==null?void 0:a.best_streak)||null,coordinateSniperBest:((c=(l=re.values)==null?void 0:l[0])==null?void 0:c.best_time)||null,coordinateSniperBestDate:((f=(u=re.values)==null?void 0:u[0])==null?void 0:f.achieved_at)||null,coordinateSniperBestStreak:((h=(m=se.values)==null?void 0:m[0])==null?void 0:h.best_streak)||null,voiceMoveMasterBest:((p=(y=ye.values)==null?void 0:y[0])==null?void 0:p.best_score)||null,voiceMoveMasterBestDate:((w=(g=ye.values)==null?void 0:g[0])==null?void 0:w.achieved_at)||null,voiceMoveMasterBestStreak:((v=(x=Fe.values)==null?void 0:x[0])==null?void 0:v.best_streak)||null,knightsPathBest:((S=(b=ze.values)==null?void 0:b[0])==null?void 0:S.best_time)||null,knightsPathBestDate:((j=(N=ze.values)==null?void 0:N[0])==null?void 0:j.achieved_at)||null,endgameDrillsBest:((C=(k=Ae.values)==null?void 0:k[0])==null?void 0:C.best_time)||null,endgameDrillsBestDate:((P=(R=Ae.values)==null?void 0:R[0])==null?void 0:P.achieved_at)||null,blindfoldMarathonBest:((_=(D=oe.values)==null?void 0:D[0])==null?void 0:_.best_time)||null,blindfoldMarathonBestDate:((M=(q=oe.values)==null?void 0:q[0])==null?void 0:M.achieved_at)||null,totalSessions:((Q=(z=Ne.values)==null?void 0:z[0])==null?void 0:Q.total)||0,recentSessions:Ce.values||[]}}catch(Y){return console.error("[TrainingStats] Failed to get stats:",Y),e}}function HR(){return localStorage.getItem("blindfold_daily_goals")!=="false"}function KR(e){localStorage.setItem("blindfold_daily_goals",e?"true":"false")}function GR(){const[e,t]=d.useState(!1),[n,r]=d.useState("unknown"),[s,i]=d.useState(!1),[a,l]=d.useState(dC()),[c,u]=d.useState(Mh),[f,m]=d.useState(HR()),{toast:h}=xl();d.useEffect(()=>{e&&(kp().then(r),u(Mh()))},[e]),d.useEffect(()=>{const b=()=>t(!1);return window.addEventListener("closeAllDialogs",b),()=>window.removeEventListener("closeAllDialogs",b)},[]);const y=async()=>{i(!0);try{const b=await yR();r(b.status)}finally{i(!1)}},p=b=>{l(b),fC(b)},g=()=>{Nn.isNativePlatform()&&alert("To enable microphone access, please go to your device Settings > Apps > Blindfold Chess > Permissions > Microphone and select 'Allow'.")},x=(()=>{switch(n){case"granted":return{icon:qt,text:"Enabled",color:"text-green-500"};case"denied":case"prompt":return{icon:Hr,text:"Not enabled",color:"text-muted-foreground"};case"prompt-with-rationale":return{icon:Hr,text:"Blocked",color:"text-destructive"};default:return{icon:Hr,text:"Unknown",color:"text-muted-foreground"}}})(),v=x.icon;return o.jsxs(Di,{open:e,onOpenChange:t,children:[o.jsx(uu,{asChild:!0,children:o.jsxs(X,{variant:"ghost",size:"icon","data-testid":"button-settings",children:[o.jsx(C2,{className:"h-5 w-5"}),o.jsx("span",{className:"sr-only",children:"Settings"})]})}),o.jsxs(Mo,{className:"sm:max-w-md",children:[o.jsxs(_o,{children:[o.jsx(Ao,{children:"Settings"}),o.jsx(Y1,{children:"Configure app preferences"})]}),o.jsxs("div",{className:"space-y-6 pt-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"font-semibold",children:"Notifications"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[a?o.jsx(c2,{className:"h-4 w-4 text-muted-foreground"}):o.jsx(l2,{className:"h-4 w-4 text-muted-foreground"}),o.jsx(Ft,{htmlFor:"toast-toggle",className:"text-sm",children:"Toast notifications"})]}),o.jsx(wn,{id:"toast-toggle",checked:a,onCheckedChange:p,"data-testid":"switch-toast-notifications",className:"data-[state=checked]:bg-amber-400"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Show brief pop-up messages for game events"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"font-semibold",children:"Display"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(T2,{className:"h-4 w-4 text-muted-foreground"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(Ft,{htmlFor:"keep-awake-toggle",className:"text-sm",children:"Keep Screen Awake"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Prevents auto-sleep during games"})]})]}),o.jsx(wn,{id:"keep-awake-toggle",checked:c.keepAwakeEnabled,onCheckedChange:b=>{const S={...c,keepAwakeEnabled:b};u(S),_h(S),window.dispatchEvent(new CustomEvent("blindfoldSettingsChanged",{detail:S})),h({title:b?"Screen will stay active":"Screen may auto-sleep",description:b?"Screen will stay active during matches":"Normal screen timeout restored"})},"data-testid":"switch-keep-awake",className:"data-[state=checked]:bg-amber-400"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"font-semibold",children:"Training"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(bi,{className:"h-4 w-4 text-muted-foreground"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(Ft,{htmlFor:"daily-goals-toggle",className:"text-sm",children:"Daily Goals"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Show daily training reminders"})]})]}),o.jsx(wn,{id:"daily-goals-toggle",checked:f,onCheckedChange:b=>{m(b),KR(b),h({title:b?"Daily goals enabled":"Daily goals disabled",description:b?"You'll see training reminders":"Training reminders hidden"})},"data-testid":"switch-daily-goals",className:"data-[state=checked]:bg-amber-400"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"font-semibold",children:"Voice Control"}),o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(v,{className:`h-4 w-4 ${x.color}`}),o.jsxs("span",{className:"text-sm",children:["Microphone: ",o.jsx("span",{className:x.color,children:x.text})]})]})}),n==="granted"?o.jsx("p",{className:"text-xs text-muted-foreground",children:"Voice commands are ready to use"}):n==="prompt-with-rationale"?o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:"Microphone access was blocked. Voice control requires microphone permission for blindfold training."}),o.jsxs(X,{variant:"outline",size:"sm",onClick:g,className:"w-full","data-testid":"button-open-settings",children:[o.jsx(Ec,{className:"h-3 w-3 mr-2"}),"Open Device Settings"]})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable microphone access for voice-controlled chess moves"}),o.jsxs(X,{variant:"outline",size:"sm",onClick:y,disabled:s,className:"w-full","data-testid":"button-request-mic",children:[o.jsx(qt,{className:"h-3 w-3 mr-2"}),s?"Requesting...":"Enable Microphone"]})]})]})]})]})]})}function QR(){const[e,t]=d.useState(!1);return d.useEffect(()=>{const n=()=>t(!1);return window.addEventListener("closeAllDialogs",n),()=>window.removeEventListener("closeAllDialogs",n)},[]),o.jsxs(Di,{open:e,onOpenChange:t,children:[o.jsx(uu,{asChild:!0,children:o.jsxs(X,{variant:"ghost",size:"icon","data-testid":"button-about",children:[o.jsx(S2,{className:"h-5 w-5"}),o.jsx("span",{className:"sr-only",children:"About"})]})}),o.jsxs(Mo,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[o.jsx(_o,{children:o.jsx(Ao,{children:"About Blindfold Chess"})}),o.jsxs("div",{className:"space-y-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Privacy Policy"}),o.jsxs("p",{className:"text-muted-foreground",children:[o.jsx("strong",{children:"100% Offline & Private"}),"  This app is designed to be completely offline. We do not collect, store, or transmit any personal data, chess games, or voice recordings to external servers. All game history and settings are stored locally on your device."]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Open Source & Licenses"}),o.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Stockfish Chess Engine:"})," Licensed under the GNU GPL v3.",o.jsxs("a",{href:"https://stockfishchess.org",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 hover:underline ml-1 inline-flex items-center gap-1",children:["stockfishchess.org ",o.jsx(Ec,{className:"h-3 w-3"})]})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"2D Chess Imagery:"}),' "Cburnett" piece set by Colin M.L. Burnett (CC BY-SA 3.0).']}),o.jsxs("li",{children:[o.jsx("strong",{children:"Capacitor Runtime:"})," Licensed under the MIT License."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Vosk Speech Recognition:"})," Offline voice recognition by Alpha Cephei, licensed under Apache 2.0.",o.jsxs("a",{href:"https://alphacephei.com/vosk",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 hover:underline ml-1 inline-flex items-center gap-1",children:["alphacephei.com/vosk ",o.jsx(Ec,{className:"h-3 w-3"})]})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Project Links"}),o.jsx("div",{className:"flex flex-col gap-2",children:o.jsxs("a",{href:"https://github.com/official-stockfish/Stockfish",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 hover:underline inline-flex items-center gap-1",children:[o.jsx(Ec,{className:"h-3 w-3"})," Stockfish Source Code"]})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Technical Info"}),o.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Engine:"})," Stockfish 17.1 (WASM)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Version:"})," 1.0.0"]}),o.jsxs("li",{className:"flex items-center gap-1",children:[o.jsx(gw,{className:"h-3 w-3"}),o.jsx("strong",{children:"Auto-Sleep:"})," Disabled during active games"]})]})]})]})]})]})}var wb="AlertDialog",[YR,a3]=Un(wb,[R1]),ps=R1(),bb=e=>{const{__scopeAlertDialog:t,...n}=e,r=ps(t);return o.jsx(H1,{...r,...n,modal:!0})};bb.displayName=wb;var XR="AlertDialogTrigger",ZR=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ps(n);return o.jsx(K1,{...s,...r,ref:t})});ZR.displayName=XR;var JR="AlertDialogPortal",Sb=e=>{const{__scopeAlertDialog:t,...n}=e,r=ps(t);return o.jsx(G1,{...r,...n})};Sb.displayName=JR;var eM="AlertDialogOverlay",Nb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ps(n);return o.jsx(xp,{...s,...r,ref:t})});Nb.displayName=eM;var Ci="AlertDialogContent",[tM,nM]=YR(Ci),rM=Iy("AlertDialogContent"),kb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...s}=e,i=ps(n),a=d.useRef(null),l=Ge(t,a),c=d.useRef(null);return o.jsx(YT,{contentName:Ci,titleName:jb,docsSlug:"alert-dialog",children:o.jsx(tM,{scope:n,cancelRef:c,children:o.jsxs(yp,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:je(s.onOpenAutoFocus,u=>{var f;u.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[o.jsx(rM,{children:r}),o.jsx(oM,{contentRef:a})]})})})});kb.displayName=Ci;var jb="AlertDialogTitle",Cb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ps(n);return o.jsx(wp,{...s,...r,ref:t})});Cb.displayName=jb;var Eb="AlertDialogDescription",Pb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ps(n);return o.jsx(bp,{...s,...r,ref:t})});Pb.displayName=Eb;var sM="AlertDialogAction",Tb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ps(n);return o.jsx(Sp,{...s,...r,ref:t})});Tb.displayName=sM;var Rb="AlertDialogCancel",Mb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:s}=nM(Rb,n),i=ps(n),a=Ge(t,s);return o.jsx(Sp,{...i,...r,ref:a})});Mb.displayName=Rb;var oM=({contentRef:e})=>{const t=`\`${Ci}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ci}\` by passing a \`${Eb}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ci}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},iM=bb,aM=Sb,_b=Nb,Ab=kb,Lb=Tb,Ib=Mb,$b=Cb,Ob=Pb;const Qr=iM,lM=aM,Db=d.forwardRef(({className:e,...t},n)=>o.jsx(_b,{className:Be("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Db.displayName=_b.displayName;const Pr=d.forwardRef(({className:e,...t},n)=>o.jsxs(lM,{children:[o.jsx(Db,{}),o.jsx(Ab,{ref:n,className:Be("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Pr.displayName=Ab.displayName;const Tr=({className:e,...t})=>o.jsx("div",{className:Be("flex flex-col space-y-2 text-center sm:text-left",e),...t});Tr.displayName="AlertDialogHeader";const Rr=({className:e,...t})=>o.jsx("div",{className:Be("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Rr.displayName="AlertDialogFooter";const Mr=d.forwardRef(({className:e,...t},n)=>o.jsx($b,{ref:n,className:Be("text-lg font-semibold",e),...t}));Mr.displayName=$b.displayName;const _r=d.forwardRef(({className:e,...t},n)=>o.jsx(Ob,{ref:n,className:Be("text-sm text-muted-foreground",e),...t}));_r.displayName=Ob.displayName;const Ar=d.forwardRef(({className:e,...t},n)=>o.jsx(Lb,{ref:n,className:Be(cp(),e),...t}));Ar.displayName=Lb.displayName;const Lr=d.forwardRef(({className:e,...t},n)=>o.jsx(Ib,{ref:n,className:Be(cp({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Lr.displayName=Ib.displayName;var cM=d.createContext(void 0);function Nl(e){const t=d.useContext(cM);return e||t||"ltr"}var of="rovingFocusGroup.onEntryFocus",uM={bubbles:!1,cancelable:!0},ed="RovingFocusGroup",[Ah,Bb,dM]=Um(ed),[fM,Fb]=Un(ed,[dM]),[hM,mM]=fM(ed),zb=d.forwardRef((e,t)=>o.jsx(Ah.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(Ah.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(pM,{...e,ref:t})})}));zb.displayName=ed;var pM=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...m}=e,h=d.useRef(null),y=Ge(t,h),p=Nl(i),[g=null,w]=Eo({prop:a,defaultProp:l,onChange:c}),[x,v]=d.useState(!1),b=Vt(u),S=Bb(n),N=d.useRef(!1),[j,k]=d.useState(0);return d.useEffect(()=>{const C=h.current;if(C)return C.addEventListener(of,b),()=>C.removeEventListener(of,b)},[b]),o.jsx(hM,{scope:n,orientation:r,dir:p,loop:s,currentTabStopId:g,onItemFocus:d.useCallback(C=>w(C),[w]),onItemShiftTab:d.useCallback(()=>v(!0),[]),onFocusableItemAdd:d.useCallback(()=>k(C=>C+1),[]),onFocusableItemRemove:d.useCallback(()=>k(C=>C-1),[]),children:o.jsx(Oe.div,{tabIndex:x||j===0?-1:0,"data-orientation":r,...m,ref:y,style:{outline:"none",...e.style},onMouseDown:je(e.onMouseDown,()=>{N.current=!0}),onFocus:je(e.onFocus,C=>{const R=!N.current;if(C.target===C.currentTarget&&R&&!x){const P=new CustomEvent(of,uM);if(C.currentTarget.dispatchEvent(P),!P.defaultPrevented){const D=S().filter(Q=>Q.focusable),_=D.find(Q=>Q.active),q=D.find(Q=>Q.id===g),z=[_,q,...D].filter(Boolean).map(Q=>Q.ref.current);Wb(z,f)}}N.current=!1}),onBlur:je(e.onBlur,()=>v(!1))})})}),Vb="RovingFocusGroupItem",qb=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...a}=e,l=Vs(),c=i||l,u=mM(Vb,n),f=u.currentTabStopId===c,m=Bb(n),{onFocusableItemAdd:h,onFocusableItemRemove:y}=u;return d.useEffect(()=>{if(r)return h(),()=>y()},[r,h,y]),o.jsx(Ah.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:o.jsx(Oe.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:je(e.onMouseDown,p=>{r?u.onItemFocus(c):p.preventDefault()}),onFocus:je(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:je(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){u.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const g=xM(p,u.orientation,u.dir);if(g!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let x=m().filter(v=>v.focusable).map(v=>v.ref.current);if(g==="last")x.reverse();else if(g==="prev"||g==="next"){g==="prev"&&x.reverse();const v=x.indexOf(p.currentTarget);x=u.loop?yM(x,v+1):x.slice(v+1)}setTimeout(()=>Wb(x))}})})})});qb.displayName=Vb;var gM={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function vM(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function xM(e,t,n){const r=vM(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return gM[r]}function Wb(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function yM(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var wM=zb,bM=qb,Pp="Tabs",[SM,l3]=Un(Pp,[Fb]),Ub=Fb(),[NM,Tp]=SM(Pp),Hb=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=e,f=Nl(l),[m,h]=Eo({prop:r,onChange:s,defaultProp:i});return o.jsx(NM,{scope:n,baseId:Vs(),value:m,onValueChange:h,orientation:a,dir:f,activationMode:c,children:o.jsx(Oe.div,{dir:f,"data-orientation":a,...u,ref:t})})});Hb.displayName=Pp;var Kb="TabsList",Gb=d.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,i=Tp(Kb,n),a=Ub(n);return o.jsx(wM,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:o.jsx(Oe.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});Gb.displayName=Kb;var Qb="TabsTrigger",Yb=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=e,a=Tp(Qb,n),l=Ub(n),c=Jb(a.baseId,r),u=eS(a.baseId,r),f=r===a.value;return o.jsx(bM,{asChild:!0,...l,focusable:!s,active:f,children:o.jsx(Oe.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:t,onMouseDown:je(e.onMouseDown,m=>{!s&&m.button===0&&m.ctrlKey===!1?a.onValueChange(r):m.preventDefault()}),onKeyDown:je(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&a.onValueChange(r)}),onFocus:je(e.onFocus,()=>{const m=a.activationMode!=="manual";!f&&!s&&m&&a.onValueChange(r)})})})});Yb.displayName=Qb;var Xb="TabsContent",Zb=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...a}=e,l=Tp(Xb,n),c=Jb(l.baseId,r),u=eS(l.baseId,r),f=r===l.value,m=d.useRef(f);return d.useEffect(()=>{const h=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(h)},[]),o.jsx(Ir,{present:s||f,children:({present:h})=>o.jsx(Oe.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:h&&i})})});Zb.displayName=Xb;function Jb(e,t){return`${e}-trigger-${t}`}function eS(e,t){return`${e}-content-${t}`}var kM=Hb,tS=Gb,nS=Yb,rS=Zb;const ta=kM,zo=d.forwardRef(({className:e,...t},n)=>o.jsx(tS,{ref:n,className:Be("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));zo.displayName=tS.displayName;const Mn=d.forwardRef(({className:e,...t},n)=>o.jsx(nS,{ref:n,className:Be("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));Mn.displayName=nS.displayName;const di=d.forwardRef(({className:e,...t},n)=>o.jsx(rS,{ref:n,className:Be("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));di.displayName=rS.displayName;const Ze=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Be("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",e),...t}));Ze.displayName="Card";const Et=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Be("flex flex-col space-y-1.5 p-6",e),...t}));Et.displayName="CardHeader";const Pt=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Be("text-2xl font-semibold leading-none tracking-tight",e),...t}));Pt.displayName="CardTitle";const $t=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Be("text-sm text-muted-foreground",e),...t}));$t.displayName="CardDescription";const dt=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Be("p-6 pt-0",e),...t}));dt.displayName="CardContent";const jM=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Be("flex items-center p-6 pt-0",e),...t}));jM.displayName="CardFooter";const CM=zu("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function lt({className:e,variant:t,...n}){return o.jsx("div",{className:Be(CM({variant:t}),e),...n})}var Rp="Progress",Mp=100,[EM,c3]=Un(Rp),[PM,TM]=EM(Rp),sS=d.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=RM,...a}=e;(s||s===0)&&!n0(s)&&console.error(MM(`${s}`,"Progress"));const l=n0(s)?s:Mp;r!==null&&!r0(r,l)&&console.error(_M(`${r}`,"Progress"));const c=r0(r,l)?r:null,u=gu(c)?i(c,l):void 0;return o.jsx(PM,{scope:n,value:c,max:l,children:o.jsx(Oe.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":gu(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":aS(c,l),"data-value":c??void 0,"data-max":l,...a,ref:t})})});sS.displayName=Rp;var oS="ProgressIndicator",iS=d.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=TM(oS,n);return o.jsx(Oe.div,{"data-state":aS(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});iS.displayName=oS;function RM(e,t){return`${Math.round(e/t*100)}%`}function aS(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function gu(e){return typeof e=="number"}function n0(e){return gu(e)&&!isNaN(e)&&e>0}function r0(e,t){return gu(e)&&!isNaN(e)&&e<=t&&e>=0}function MM(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Mp}\`.`}function _M(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Mp} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var lS=sS,AM=iS;const qs=d.forwardRef(({className:e,value:t,...n},r)=>o.jsx(lS,{ref:r,className:Be("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...n,children:o.jsx(AM,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));qs.displayName=lS.displayName;var LM="Separator",s0="horizontal",IM=["horizontal","vertical"],cS=d.forwardRef((e,t)=>{const{decorative:n,orientation:r=s0,...s}=e,i=$M(r)?r:s0,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return o.jsx(Oe.div,{"data-orientation":i,...l,...s,ref:t})});cS.displayName=LM;function $M(e){return IM.includes(e)}var uS=cS;const qr=d.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>o.jsx(uS,{ref:s,decorative:n,orientation:t,className:Be("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));qr.displayName=uS.displayName;function af({insight:e}){const t={info:o.jsx(hv,{className:"h-4 w-4"}),warning:o.jsx(M2,{className:"h-4 w-4"}),success:o.jsx(m2,{className:"h-4 w-4"}),tip:o.jsx(hv,{className:"h-4 w-4"})},n={info:"text-blue-500",warning:"text-amber-500",success:"text-green-500",tip:"text-purple-500"};return o.jsxs("div",{className:"flex gap-3 p-3 rounded-md bg-muted/50",children:[o.jsx("div",{className:n[e.type],children:t[e.type]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium",children:e.title}),o.jsx("p",{className:"text-xs text-muted-foreground",children:e.message})]})]})}function Dn({label:e,value:t,subValue:n}){return o.jsxs("div",{className:"flex items-center justify-between py-2",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:e}),o.jsxs("div",{className:"text-right",children:[o.jsx("span",{className:"font-medium",children:t}),n&&o.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:n})]})]})}function OM({stats:e}){const t=["a","b","c","d","e","f","g","h"],n=["8","7","6","5","4","3","2","1"],r=s=>s===0?"bg-muted/30":s<25?"bg-amber-200 dark:bg-amber-900/40":s<50?"bg-amber-400 dark:bg-amber-700/60":s<75?"bg-red-400 dark:bg-red-700/70":"bg-red-600 dark:bg-red-600/80";return o.jsx("div",{className:"grid grid-cols-8 gap-0.5 aspect-square max-w-[200px] mx-auto",children:n.map(s=>t.map(i=>{const a=`${i}${s}`,l=BR(e,a);return o.jsx("div",{className:`aspect-square ${r(l)} rounded-sm flex items-center justify-center`,title:`${a.toUpperCase()}: ${e.squareInquiryHeatmap[a]||0} inquiries`,children:l>50&&o.jsx("span",{className:"text-[6px] text-white font-bold",children:a})},a)}))})}function DM(e){const t=Math.floor(e/1e3),n=Math.floor(e%1e3/100);return`${t}.${n}s`}function BM({stats:e}){const t=d.useMemo(()=>VR(e),[e]),n=db(e),r=OR(e),s=fb(e),i=hb(e),a=mb(e),l=$R(e),c=pb(e,5),[u,f]=d.useState(null);d.useEffect(()=>{pu().then(f);const p=()=>{pu().then(f)};return window.addEventListener("trainingStatsUpdated",p),()=>{window.removeEventListener("trainingStatsUpdated",p)}},[]);const m=t.filter(p=>p.category==="visualization"),h=t.filter(p=>p.category==="cognitive"),y=t.filter(p=>p.category==="tactical");return o.jsxs(ta,{defaultValue:"tactical",className:"w-full",children:[o.jsxs(zo,{className:"grid w-full grid-cols-4 mb-4",children:[o.jsxs(Mn,{value:"tactical",className:"flex items-center gap-1 text-xs",children:[o.jsx(bi,{className:"h-3 w-3"}),o.jsx("span",{className:"hidden sm:inline",children:"Tactics"})]}),o.jsxs(Mn,{value:"cognitive",className:"flex items-center gap-1 text-xs",children:[o.jsx(Vu,{className:"h-3 w-3"}),o.jsx("span",{className:"hidden sm:inline",children:"Mind"})]}),o.jsxs(Mn,{value:"visualization",className:"flex items-center gap-1 text-xs",children:[o.jsx(Uu,{className:"h-3 w-3"}),o.jsx("span",{className:"hidden sm:inline",children:"Vision"})]}),o.jsxs(Mn,{value:"training",className:"flex items-center gap-1 text-xs",children:[o.jsx(fw,{className:"h-3 w-3"}),o.jsx("span",{className:"hidden sm:inline",children:"Training"})]})]}),o.jsxs(di,{value:"visualization",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[o.jsxs(Ze,{children:[o.jsxs(Et,{className:"pb-2",children:[o.jsxs(Pt,{className:"text-sm flex items-center gap-2",children:[o.jsx(Jn,{className:"h-4 w-4 text-amber-500"}),"Visualization Ceiling"]}),o.jsx($t,{className:"text-xs",children:"The strongest opponent you've beaten without peeking at the board"})]}),o.jsx(dt,{children:e.visualizationCeiling>0?o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-3xl font-bold text-amber-500",children:e.visualizationCeiling}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Highest Elo beaten without peeking"}),e.visualizationCeilingElo&&o.jsxs(lt,{variant:"outline",className:"mt-2",children:[e.visualizationCeilingElo," Elo"]})]}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Beat a bot without peeking to set your ceiling!"})})]}),o.jsxs(Ze,{children:[o.jsxs(Et,{className:"pb-2",children:[o.jsx(Pt,{className:"text-sm",children:"Peek-Free Progress"}),o.jsx($t,{className:"text-xs",children:"How often you complete games without looking at the board"})]}),o.jsxs(dt,{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-2xl font-bold",children:[n,"%"]}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.totalPeekFreeGames," of ",e.blindfoldGamesPlayed||0," blindfold games"]})]}),o.jsx(qs,{value:n,className:"h-2"}),o.jsx(qr,{}),o.jsx(Dn,{label:"Best Peek-Free Streak",value:`${e.bestPeekFreeGameStreak} games`}),o.jsx(Dn,{label:"Best Peek-Free Moves",value:e.bestPeekFreeStreak,subValue:"in a single game"})]})]}),o.jsxs(Ze,{children:[o.jsxs(Et,{className:"pb-2",children:[o.jsx(Pt,{className:"text-sm",children:"Reconstruction by Game Length"}),o.jsx($t,{className:"text-xs",children:"How well you remember the board position as games get longer"})]}),o.jsx(dt,{className:"space-y-2",children:o.jsx("div",{className:"space-y-2",children:[{label:"10 moves",value:i.moves10},{label:"11-20 moves",value:i.moves20},{label:"21-30 moves",value:i.moves30},{label:"31-40 moves",value:i.moves40},{label:"40+ moves",value:i.moves50plus}].map(({label:p,value:g})=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xs text-muted-foreground w-20",children:p}),o.jsx(qs,{value:g,className:"flex-1 h-2"}),o.jsx("span",{className:"text-xs font-medium w-10 text-right",children:g>0?`${g}%`:"-"})]},p))})})]}),o.jsxs(Ze,{children:[o.jsxs(Et,{className:"pb-2",children:[o.jsxs(Pt,{className:"text-sm flex items-center gap-2",children:[o.jsx(hw,{className:"h-4 w-4"}),"Confusion Heatmap"]}),o.jsx($t,{className:"text-xs",children:'Squares you inquire about most often - your mental "blind spots"'})]}),o.jsx(dt,{children:e.totalSquareInquiries>0?o.jsxs(o.Fragment,{children:[o.jsx(OM,{stats:e}),o.jsx("p",{className:"text-xs text-muted-foreground text-center mt-3",children:"Red = frequently forgotten, Gray = clear"}),c.length>0&&o.jsxs("div",{className:"mt-4 space-y-1",children:[o.jsx("p",{className:"text-xs font-medium",children:"Top Blind Spots:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:c.map(({square:p,count:g})=>o.jsxs(lt,{variant:"secondary",className:"text-xs",children:[p.toUpperCase()," (",g,")"]},p))})]})]}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Ask about squares during games to see which ones you forget!"})})]}),m.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Insights"}),m.map((p,g)=>o.jsx(af,{insight:p},g))]})]}),o.jsxs(di,{value:"cognitive",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[o.jsxs(Ze,{children:[o.jsxs(Et,{className:"pb-2",children:[o.jsxs(Pt,{className:"text-sm flex items-center gap-2",children:["Endgame Drift",e.lastGameEndgameDrift>30?o.jsx(bw,{className:"h-4 w-4 text-red-500"}):o.jsx(Sw,{className:"h-4 w-4 text-green-500"})]}),o.jsx($t,{className:"text-xs",children:'Slowing down late-game may indicate "mental blur" from fewer pieces'})]}),o.jsxs(dt,{children:[o.jsx("div",{className:"text-center",children:o.jsx("p",{className:`text-3xl font-bold ${e.lastGameEndgameDrift>30?"text-red-500":"text-green-500"}`,children:e.lastGameEndgameDrift>0?`+${e.lastGameEndgameDrift}%`:"0%"})}),e.lastGameEndgameDrift>50&&o.jsx("p",{className:"text-xs text-amber-500 text-center mt-3",children:'High drift may indicate "mental blur" - difficulty tracking fewer pieces'})]})]}),o.jsxs(Ze,{children:[o.jsxs(Et,{className:"pb-2",children:[o.jsx(Pt,{className:"text-sm",children:"Voice Accuracy"}),o.jsx($t,{className:"text-xs",children:"How often your voice commands are understood correctly"})]}),o.jsxs(dt,{children:[o.jsx(Dn,{label:"Total Voice Commands",value:e.voiceCommandsTotal}),o.jsx(Dn,{label:"Corrections Needed",value:e.voiceCorrections}),o.jsx(Dn,{label:"Correction Rate",value:`${a}%`}),o.jsx(Dn,{label:"Last Game Corrections",value:e.lastGameVoiceCorrections})]})]}),o.jsxs(Ze,{children:[o.jsxs(Et,{className:"pb-2",children:[o.jsx(Pt,{className:"text-sm",children:"Mental Clarity"}),o.jsx($t,{className:"text-xs",children:"Moments when you took much longer than usual - may indicate confusion"})]}),o.jsx(dt,{children:o.jsx(Dn,{label:"Mental Blur Events",value:e.mentalBlurCount})})]}),o.jsxs(Ze,{children:[o.jsxs(Et,{className:"pb-2",children:[o.jsx(Pt,{className:"text-sm",children:"Voice vs Touch"}),o.jsx($t,{className:"text-xs",children:"How you input your moves during games"})]}),o.jsx(dt,{children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qt,{className:"h-4 w-4 text-blue-500"}),o.jsxs("span",{className:"font-medium",children:[r.voice,"%"]})]}),o.jsx("div",{className:"flex-1 h-2 bg-muted rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-blue-500",style:{width:`${r.voice}%`}})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"font-medium",children:[r.touch,"%"]}),o.jsx(x2,{className:"h-4 w-4 text-orange-500"})]})]})})]}),h.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Insights"}),h.map((p,g)=>o.jsx(af,{insight:p},g))]})]}),o.jsxs(di,{value:"tactical",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[o.jsxs(Ze,{children:[o.jsxs(Et,{className:"pb-2",children:[o.jsx(Pt,{className:"text-sm",children:"Overall Record"}),o.jsx($t,{className:"text-xs",children:"Your wins, draws, and losses across all games"})]}),o.jsxs(dt,{children:[o.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.wins}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Wins"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-2xl font-bold text-gray-500",children:e.draws}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Draws"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-2xl font-bold text-red-600",children:e.losses}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Losses"})]})]}),o.jsxs("p",{className:"text-xs text-muted-foreground text-center mt-3",children:[e.blindfoldGamesPlayed||0," of ",e.totalGamesPlayed," games were blindfold"]}),o.jsx(qr,{className:"my-4"}),o.jsx(Dn,{label:"Current Win Streak",value:e.currentWinStreak}),o.jsx(Dn,{label:"Best Win Streak",value:e.bestWinStreak}),o.jsx(Dn,{label:"Fastest Win",value:e.fastestWin>0?`${e.fastestWin} moves`:"-"}),o.jsx(Dn,{label:"Longest Game",value:e.longestGame>0?`${e.longestGame} moves`:"-"})]})]}),e.stockfishThresholdElo&&o.jsxs(Ze,{children:[o.jsxs(Et,{className:"pb-2",children:[o.jsxs(Pt,{className:"text-sm flex items-center gap-2",children:[o.jsx(bi,{className:"h-4 w-4 text-amber-500"}),"Stockfish Threshold"]}),o.jsx($t,{className:"text-xs",children:"The difficulty level where your win rate starts dropping"})]}),o.jsx(dt,{children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-3xl font-bold text-amber-500",children:e.stockfishThresholdElo}),o.jsxs(lt,{variant:"outline",className:"mt-2",children:[e.stockfishThresholdElo," Elo"]})]})})]}),o.jsxs(Ze,{children:[o.jsxs(Et,{className:"pb-2",children:[o.jsxs(Pt,{className:"text-sm flex items-center gap-2",children:[o.jsx(wo,{className:"h-4 w-4"}),"Mean Response Time"]}),o.jsx($t,{className:"text-xs",children:"How quickly you find moves - faster often means clearer visualization"})]}),o.jsxs(dt,{children:[o.jsx("div",{className:"text-center mb-4",children:o.jsx("p",{className:"text-3xl font-bold",children:ui(l)})}),o.jsx(qr,{className:"my-4"}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"By Game Phase"}),o.jsx(Dn,{label:"Opening (moves 1-10)",value:ui(s.opening)}),o.jsx(Dn,{label:"Middlegame (moves 11-30)",value:ui(s.middlegame)}),o.jsx(Dn,{label:"Endgame (moves 31+)",value:ui(s.endgame)})]})]})]}),o.jsxs(Ze,{children:[o.jsxs(Et,{className:"pb-2",children:[o.jsx(Pt,{className:"text-sm",children:"Win Rate by Rating"}),o.jsx($t,{className:"text-xs",children:"Your success rate at each Elo level"})]}),o.jsx(dt,{children:o.jsx("div",{className:"space-y-2",children:jp.map(p=>{const g=e.tierStats[p],w=FR(e,p),x=(g==null?void 0:g.totalGames)||0;return x===0?null:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-xs text-muted-foreground w-24 truncate",children:[p," Elo"]}),o.jsx(qs,{value:w,className:"flex-1 h-2"}),o.jsxs("span",{className:"text-xs font-medium w-16 text-right",children:[w,"% (",x,"g)"]})]},p)})})})]}),y.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Insights"}),y.map((p,g)=>o.jsx(af,{insight:p},g))]})]}),o.jsxs(di,{value:"training",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[o.jsxs(Ze,{children:[o.jsxs(Et,{className:"pb-2",children:[o.jsxs(Pt,{className:"text-sm flex items-center gap-2",children:[o.jsx(qt,{className:"h-4 w-4 text-purple-500"}),"Voice Move Master"]}),o.jsx($t,{className:"text-xs",children:"Announce chess moves by voice"})]}),o.jsx(dt,{children:u&&u.voiceMoveMasterBest!==null?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Personal Best"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Jn,{className:"h-4 w-4 text-purple-500"}),o.jsx("span",{className:"text-2xl font-bold text-purple-500",children:u.voiceMoveMasterBest}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"moves"})]})]}),u.voiceMoveMasterBestStreak!==null&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Streak"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qd,{className:"h-4 w-4 text-orange-500"}),o.jsx("span",{className:"text-lg font-bold text-orange-500",children:u.voiceMoveMasterBestStreak}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"in a row"})]})]}),u.voiceMoveMasterBestDate&&o.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:["Achieved ",new Date(u.voiceMoveMasterBestDate).toLocaleDateString()]}),u.voiceMoveMasterBest>=15?o.jsx(lt,{className:"bg-purple-500 text-white",children:"Gold Tier"}):u.voiceMoveMasterBest>=8?o.jsx(lt,{variant:"secondary",children:"Silver Tier"}):o.jsx(lt,{variant:"outline",children:"Bronze Tier"})]}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete a Voice Move Master session to set your first record!"})})]}),o.jsxs(Ze,{children:[o.jsxs(Et,{className:"pb-2",children:[o.jsxs(Pt,{className:"text-sm flex items-center gap-2",children:[o.jsx(Ym,{className:"h-4 w-4 text-amber-500"}),"Color Blitz"]}),o.jsx($t,{className:"text-xs",children:"Name square colors in 60 seconds"})]}),o.jsx(dt,{children:u&&u.colorBlitzBest!==null?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Personal Best"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Jn,{className:"h-4 w-4 text-amber-500"}),o.jsx("span",{className:"text-2xl font-bold text-amber-500",children:u.colorBlitzBest}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"correct"})]})]}),u.colorBlitzBestStreak!==null&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Streak"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qd,{className:"h-4 w-4 text-orange-500"}),o.jsx("span",{className:"text-lg font-bold text-orange-500",children:u.colorBlitzBestStreak}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"in a row"})]})]}),u.colorBlitzBestDate&&o.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:["Achieved ",new Date(u.colorBlitzBestDate).toLocaleDateString()]}),u.colorBlitzBest>=40?o.jsx(lt,{className:"bg-amber-500 text-white",children:"Gold Tier"}):u.colorBlitzBest>=20?o.jsx(lt,{variant:"secondary",children:"Silver Tier"}):o.jsx(lt,{variant:"outline",children:"Bronze Tier"})]}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete a Color Blitz session to set your first record!"})})]}),o.jsxs(Ze,{children:[o.jsxs(Et,{className:"pb-2",children:[o.jsxs(Pt,{className:"text-sm flex items-center gap-2",children:[o.jsx(bi,{className:"h-4 w-4 text-blue-500"}),"Coordinate Sniper"]}),o.jsx($t,{className:"text-xs",children:"Find 10 squares as fast as possible"})]}),o.jsx(dt,{children:u&&u.coordinateSniperBest!==null?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Personal Best"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Jn,{className:"h-4 w-4 text-blue-500"}),o.jsx("span",{className:"text-2xl font-bold text-blue-500",children:DM(u.coordinateSniperBest)})]})]}),u.coordinateSniperBestStreak!==null&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Streak"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qd,{className:"h-4 w-4 text-orange-500"}),o.jsx("span",{className:"text-lg font-bold text-orange-500",children:u.coordinateSniperBestStreak}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"in a row"})]})]}),u.coordinateSniperBestDate&&o.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:["Achieved ",new Date(u.coordinateSniperBestDate).toLocaleDateString()]}),u.coordinateSniperBest<=1e4?o.jsx(lt,{className:"bg-blue-500 text-white",children:"Gold Tier"}):u.coordinateSniperBest<=2e4?o.jsx(lt,{variant:"secondary",children:"Silver Tier"}):o.jsx(lt,{variant:"outline",children:"Bronze Tier"})]}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete a Coordinate Sniper session to set your first record!"})})]})]})]})}function FM(e){return e!==null?{comment:e,variations:[]}:{variations:[]}}function zM(e,t,n,r,s){const i={move:e,variations:s};return t&&(i.suffix=t),n&&(i.nag=n),r!==null&&(i.comment=r),i}function VM(...e){const[t,...n]=e;let r=t;for(const s of n)s!==null&&(r.variations=[s,...s.variations],s.variations=[],r=s);return t}function qM(e,t){if(t.marker&&t.marker.comment){let n=t.root;for(;;){const r=n.variations[0];if(!r){n.comment=t.marker.comment;break}n=r}}return{headers:e,root:t.root,result:(t.marker&&t.marker.result)??void 0}}function WM(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function zi(e,t,n,r){var s=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(s,zi.prototype),s.expected=t,s.found=n,s.location=r,s.name="SyntaxError",s}WM(zi,Error);function lf(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,n+=n.repeat(t),e+n.slice(0,t))}zi.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n=null,r;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){n=e[r].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,i=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,a=this.location.source+":"+i.line+":"+i.column;if(n){var l=this.location.end,c=lf("",i.line.toString().length," "),u=n[s.line-1],f=s.line===l.line?l.column:u.length+1,m=f-s.column||1;t+=`
 --> `+a+`
`+c+` |
`+i.line+" | "+u+`
`+c+" | "+lf("",s.column-1," ")+lf("",m,"^")}else t+=`
 at `+a}return t};zi.buildMessage=function(e,t){var n={literal:function(u){return'"'+s(u.text)+'"'},class:function(u){var f=u.parts.map(function(m){return Array.isArray(m)?i(m[0])+"-"+i(m[1]):i(m)});return"["+(u.inverted?"^":"")+f.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(u){return u.description}};function r(u){return u.charCodeAt(0).toString(16).toUpperCase()}function s(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(f){return"\\x0"+r(f)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(f){return"\\x"+r(f)})}function i(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(f){return"\\x0"+r(f)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(f){return"\\x"+r(f)})}function a(u){return n[u.type](u)}function l(u){var f=u.map(a),m,h;if(f.sort(),f.length>0){for(m=1,h=1;m<f.length;m++)f[m-1]!==f[m]&&(f[h]=f[m],h++);f.length=h}switch(f.length){case 1:return f[0];case 2:return f[0]+" or "+f[1];default:return f.slice(0,-1).join(", ")+", or "+f[f.length-1]}}function c(u){return u?'"'+s(u)+'"':"end of input"}return"Expected "+l(e)+" but "+c(t)+" found."};function UM(e,t){t=t!==void 0?t:{};var n={},r=t.grammarSource,s={pgn:vs},i=vs,a="[",l='"',c="]",u=".",f="O-O-O",m="O-O",h="0-0-0",y="0-0",p="$",g="{",w="}",x=";",v="(",b=")",S="1-0",N="0-1",j="1/2-1/2",k="*",C=/^[a-zA-Z]/,R=/^[^"]/,P=/^[0-9]/,D=/^[.]/,_=/^[a-zA-Z1-8\-=]/,q=/^[+#]/,M=/^[!?]/,z=/^[^}]/,Q=/^[^\r\n]/,Y=/^[ \t\r\n]/,T=Cn("tag pair"),$=Ut("[",!1),V=Ut('"',!1),G=Ut("]",!1),de=Cn("tag name"),ne=Dt([["a","z"],["A","Z"]],!1,!1),ve=Cn("tag value"),fe=Dt(['"'],!0,!1),A=Cn("move number"),B=Dt([["0","9"]],!1,!1),W=Ut(".",!1),U=Dt(["."],!1,!1),re=Cn("standard algebraic notation"),se=Ut("O-O-O",!1),ye=Ut("O-O",!1),Fe=Ut("0-0-0",!1),ze=Ut("0-0",!1),Ae=Dt([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),oe=Dt(["+","#"],!1,!1),Ne=Cn("suffix annotation"),Ce=Dt(["!","?"],!1,!1),Re=Cn("NAG"),Me=Ut("$",!1),F=Cn("brace comment"),H=Ut("{",!1),he=Dt(["}"],!0,!1),ie=Ut("}",!1),ae=Cn("rest of line comment"),$e=Ut(";",!1),ke=Dt(["\r",`
`],!0,!1),Te=Cn("variation"),st=Ut("(",!1),kt=Ut(")",!1),Je=Cn("game termination marker"),Wt=Ut("1-0",!1),Qt=Ut("0-1",!1),jn=Ut("1/2-1/2",!1),hn=Ut("*",!1),Yt=Cn("whitespace"),vt=Dt([" ","	","\r",`
`],!1,!1),On=function(E,O){return qM(E,O)},tn=function(E){return Object.fromEntries(E)},gr=function(E,O){return[E,O]},nt=function(E,O){return{root:E,marker:O}},Lt=function(E,O){return VM(FM(E),...O.flat())},Ye=function(E,O,I,we,Pe){return zM(E,O,I,we,Pe)},jt=function(E){return E},We=function(E){return E.replace(/[\r\n]+/g," ")},El=function(E){return E.trim()},ld=function(E){return E},oa=function(E,O){return{result:E,comment:O}},L=t.peg$currPos|0,Ke=[{line:1,column:1}],mt=L,Hn=t.peg$maxFailExpected||[],Z=t.peg$silentFails|0,to;if(t.startRule){if(!(t.startRule in s))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');i=s[t.startRule]}function Ut(E,O){return{type:"literal",text:E,ignoreCase:O}}function Dt(E,O,I){return{type:"class",parts:E,inverted:O,ignoreCase:I}}function gs(){return{type:"end"}}function Cn(E){return{type:"other",description:E}}function no(E){var O=Ke[E],I;if(O)return O;if(E>=Ke.length)I=Ke.length-1;else for(I=E;!Ke[--I];);for(O=Ke[I],O={line:O.line,column:O.column};I<E;)e.charCodeAt(I)===10?(O.line++,O.column=1):O.column++,I++;return Ke[E]=O,O}function ir(E,O,I){var we=no(E),Pe=no(O),at={source:r,start:{offset:E,line:we.line,column:we.column},end:{offset:O,line:Pe.line,column:Pe.column}};return at}function Ee(E){L<mt||(L>mt&&(mt=L,Hn=[]),Hn.push(E))}function Vo(E,O,I){return new zi(zi.buildMessage(E,O),E,O,I)}function vs(){var E,O,I;return E=L,O=ia(),I=qo(),E=On(O,I),E}function ia(){var E,O,I;for(E=L,O=[],I=ro();I!==n;)O.push(I),I=ro();return I=Xt(),E=tn(O),E}function ro(){var E,O,I,we,Pe,at,Jr;return Z++,E=L,Xt(),e.charCodeAt(L)===91?(O=a,L++):(O=n,Z===0&&Ee($)),O!==n?(Xt(),I=so(),I!==n?(Xt(),e.charCodeAt(L)===34?(we=l,L++):(we=n,Z===0&&Ee(V)),we!==n?(Pe=Pl(),e.charCodeAt(L)===34?(at=l,L++):(at=n,Z===0&&Ee(V)),at!==n?(Xt(),e.charCodeAt(L)===93?(Jr=c,L++):(Jr=n,Z===0&&Ee(G)),Jr!==n?E=gr(I,Pe):(L=E,E=n)):(L=E,E=n)):(L=E,E=n)):(L=E,E=n)):(L=E,E=n),Z--,E===n&&Z===0&&Ee(T),E}function so(){var E,O,I;if(Z++,E=L,O=[],I=e.charAt(L),C.test(I)?L++:(I=n,Z===0&&Ee(ne)),I!==n)for(;I!==n;)O.push(I),I=e.charAt(L),C.test(I)?L++:(I=n,Z===0&&Ee(ne));else O=n;return O!==n?E=e.substring(E,L):E=O,Z--,E===n&&(O=n,Z===0&&Ee(de)),E}function Pl(){var E,O,I;for(Z++,E=L,O=[],I=e.charAt(L),R.test(I)?L++:(I=n,Z===0&&Ee(fe));I!==n;)O.push(I),I=e.charAt(L),R.test(I)?L++:(I=n,Z===0&&Ee(fe));return E=e.substring(E,L),Z--,O=n,Z===0&&Ee(ve),E}function qo(){var E,O,I;return E=L,O=ar(),Xt(),I=fd(),I===n&&(I=null),Xt(),E=nt(O,I),E}function ar(){var E,O,I,we;for(E=L,O=aa(),O===n&&(O=null),I=[],we=xs();we!==n;)I.push(we),we=xs();return E=Lt(O,I),E}function xs(){var E,O,I,we,Pe,at,Jr,Dr;if(E=L,Xt(),Wo(),Xt(),O=Or(),O!==n){for(I=cd(),I===n&&(I=null),we=[],Pe=Zr();Pe!==n;)we.push(Pe),Pe=Zr();for(Pe=Xt(),at=aa(),at===n&&(at=null),Jr=[],Dr=Tl();Dr!==n;)Jr.push(Dr),Dr=Tl();E=Ye(O,I,we,at,Jr)}else L=E,E=n;return E}function Wo(){var E,O,I,we,Pe,at;for(Z++,E=L,O=[],I=e.charAt(L),P.test(I)?L++:(I=n,Z===0&&Ee(B));I!==n;)O.push(I),I=e.charAt(L),P.test(I)?L++:(I=n,Z===0&&Ee(B));if(e.charCodeAt(L)===46?(I=u,L++):(I=n,Z===0&&Ee(W)),I!==n){for(we=Xt(),Pe=[],at=e.charAt(L),D.test(at)?L++:(at=n,Z===0&&Ee(U));at!==n;)Pe.push(at),at=e.charAt(L),D.test(at)?L++:(at=n,Z===0&&Ee(U));O=[O,I,we,Pe],E=O}else L=E,E=n;return Z--,E===n&&(O=n,Z===0&&Ee(A)),E}function Or(){var E,O,I,we,Pe,at;if(Z++,E=L,O=L,e.substr(L,5)===f?(I=f,L+=5):(I=n,Z===0&&Ee(se)),I===n&&(e.substr(L,3)===m?(I=m,L+=3):(I=n,Z===0&&Ee(ye)),I===n&&(e.substr(L,5)===h?(I=h,L+=5):(I=n,Z===0&&Ee(Fe)),I===n&&(e.substr(L,3)===y?(I=y,L+=3):(I=n,Z===0&&Ee(ze)),I===n))))if(I=L,we=e.charAt(L),C.test(we)?L++:(we=n,Z===0&&Ee(ne)),we!==n){if(Pe=[],at=e.charAt(L),_.test(at)?L++:(at=n,Z===0&&Ee(Ae)),at!==n)for(;at!==n;)Pe.push(at),at=e.charAt(L),_.test(at)?L++:(at=n,Z===0&&Ee(Ae));else Pe=n;Pe!==n?(we=[we,Pe],I=we):(L=I,I=n)}else L=I,I=n;return I!==n?(we=e.charAt(L),q.test(we)?L++:(we=n,Z===0&&Ee(oe)),we===n&&(we=null),I=[I,we],O=I):(L=O,O=n),O!==n?E=e.substring(E,L):E=O,Z--,E===n&&(O=n,Z===0&&Ee(re)),E}function cd(){var E,O,I;for(Z++,E=L,O=[],I=e.charAt(L),M.test(I)?L++:(I=n,Z===0&&Ee(Ce));I!==n;)O.push(I),O.length>=2?I=n:(I=e.charAt(L),M.test(I)?L++:(I=n,Z===0&&Ee(Ce)));return O.length<1?(L=E,E=n):E=O,Z--,E===n&&(O=n,Z===0&&Ee(Ne)),E}function Zr(){var E,O,I,we,Pe;if(Z++,E=L,Xt(),e.charCodeAt(L)===36?(O=p,L++):(O=n,Z===0&&Ee(Me)),O!==n){if(I=L,we=[],Pe=e.charAt(L),P.test(Pe)?L++:(Pe=n,Z===0&&Ee(B)),Pe!==n)for(;Pe!==n;)we.push(Pe),Pe=e.charAt(L),P.test(Pe)?L++:(Pe=n,Z===0&&Ee(B));else we=n;we!==n?I=e.substring(I,L):I=we,I!==n?E=jt(I):(L=E,E=n)}else L=E,E=n;return Z--,E===n&&Z===0&&Ee(Re),E}function aa(){var E;return E=ud(),E===n&&(E=dd()),E}function ud(){var E,O,I,we,Pe;if(Z++,E=L,e.charCodeAt(L)===123?(O=g,L++):(O=n,Z===0&&Ee(H)),O!==n){for(I=L,we=[],Pe=e.charAt(L),z.test(Pe)?L++:(Pe=n,Z===0&&Ee(he));Pe!==n;)we.push(Pe),Pe=e.charAt(L),z.test(Pe)?L++:(Pe=n,Z===0&&Ee(he));I=e.substring(I,L),e.charCodeAt(L)===125?(we=w,L++):(we=n,Z===0&&Ee(ie)),we!==n?E=We(I):(L=E,E=n)}else L=E,E=n;return Z--,E===n&&(O=n,Z===0&&Ee(F)),E}function dd(){var E,O,I,we,Pe;if(Z++,E=L,e.charCodeAt(L)===59?(O=x,L++):(O=n,Z===0&&Ee($e)),O!==n){for(I=L,we=[],Pe=e.charAt(L),Q.test(Pe)?L++:(Pe=n,Z===0&&Ee(ke));Pe!==n;)we.push(Pe),Pe=e.charAt(L),Q.test(Pe)?L++:(Pe=n,Z===0&&Ee(ke));I=e.substring(I,L),E=El(I)}else L=E,E=n;return Z--,E===n&&(O=n,Z===0&&Ee(ae)),E}function Tl(){var E,O,I,we;return Z++,E=L,Xt(),e.charCodeAt(L)===40?(O=v,L++):(O=n,Z===0&&Ee(st)),O!==n?(I=ar(),I!==n?(Xt(),e.charCodeAt(L)===41?(we=b,L++):(we=n,Z===0&&Ee(kt)),we!==n?E=ld(I):(L=E,E=n)):(L=E,E=n)):(L=E,E=n),Z--,E===n&&Z===0&&Ee(Te),E}function fd(){var E,O,I;return Z++,E=L,e.substr(L,3)===S?(O=S,L+=3):(O=n,Z===0&&Ee(Wt)),O===n&&(e.substr(L,3)===N?(O=N,L+=3):(O=n,Z===0&&Ee(Qt)),O===n&&(e.substr(L,7)===j?(O=j,L+=7):(O=n,Z===0&&Ee(jn)),O===n&&(e.charCodeAt(L)===42?(O=k,L++):(O=n,Z===0&&Ee(hn))))),O!==n?(Xt(),I=aa(),I===n&&(I=null),E=oa(O,I)):(L=E,E=n),Z--,E===n&&(O=n,Z===0&&Ee(Je)),E}function Xt(){var E,O;for(Z++,E=[],O=e.charAt(L),Y.test(O)?L++:(O=n,Z===0&&Ee(vt));O!==n;)E.push(O),O=e.charAt(L),Y.test(O)?L++:(O=n,Z===0&&Ee(vt));return Z--,O=n,Z===0&&Ee(Yt),E}if(to=i(),t.peg$library)return{peg$result:to,peg$currPos:L,peg$FAILED:n,peg$maxFailExpected:Hn,peg$maxFailPos:mt};if(to!==n&&L===e.length)return to;throw to!==n&&L<e.length&&Ee(gs()),Vo(Hn,mt<e.length?e.charAt(mt):null,mt<e.length?ir(mt,mt+1):ir(mt,mt))}/**
 * @license
 * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const _c=0xffffffffffffffffn;function cf(e,t){return(e<<t|e>>64n-t)&0xffffffffffffffffn}function o0(e,t){return e*t&_c}function HM(e){return function(){let t=BigInt(e&_c),n=BigInt(e>>64n&_c);const r=o0(cf(o0(t,5n),7n),9n);return n^=t,t=(cf(t,24n)^n^n<<16n)&_c,n=cf(n,37n),e=n<<64n|t,r}}const td=HM(0xa187eb39cdcaed8f31c4b365b102e01en),KM=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>td()))),GM=Array.from({length:8},()=>td()),QM=Array.from({length:16},()=>td()),uf=td(),xn="w",Gn="b",Ht="p",Lh="n",Ac="b",Ta="r",Ps="q",Zt="k",df="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class ac{constructor(t,n){Ct(this,"color");Ct(this,"from");Ct(this,"to");Ct(this,"piece");Ct(this,"captured");Ct(this,"promotion");Ct(this,"flags");Ct(this,"san");Ct(this,"lan");Ct(this,"before");Ct(this,"after");const{color:r,piece:s,from:i,to:a,flags:l,captured:c,promotion:u}=n,f=sn(i),m=sn(a);this.color=r,this.piece=s,this.from=f,this.to=m,this.san=t._moveToSan(n,t._moves({legal:!0})),this.lan=f+m,this.before=t.fen(),t._makeMove(n),this.after=t.fen(),t._undoMove(),this.flags="";for(const h in Ve)Ve[h]&l&&(this.flags+=uo[h]);c&&(this.captured=c),u&&(this.promotion=u,this.lan+=u)}isCapture(){return this.flags.indexOf(uo.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(uo.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(uo.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(uo.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(uo.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(uo.BIG_PAWN)>-1}}const cn=-1,uo={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},Ve={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},Ih={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},YM={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},XM={...Ih,...YM},De={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},ff={b:[16,32,17,15],w:[-16,-32,-17,-15]},i0={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},ZM=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],JM=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],e_={p:1,n:2,b:4,r:8,q:16,k:32},t_="pnbrqkPNBRQK",a0=[Lh,Ac,Ta,Ps],n_=7,r_=6,s_=1,o_=0,lc={[Zt]:Ve.KSIDE_CASTLE,[Ps]:Ve.QSIDE_CASTLE},Ns={w:[{square:De.a1,flag:Ve.QSIDE_CASTLE},{square:De.h1,flag:Ve.KSIDE_CASTLE}],b:[{square:De.a8,flag:Ve.QSIDE_CASTLE},{square:De.h8,flag:Ve.KSIDE_CASTLE}]},i_={b:s_,w:r_},hf="--";function bo(e){return e>>4}function ll(e){return e&15}function dS(e){return"0123456789".indexOf(e)!==-1}function sn(e){const t=ll(e),n=bo(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function Sa(e){return e===xn?Gn:xn}function a_(e){const t=e.split(/\s+/);if(t.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(t[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(t[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const s=t[0].split("/");if(s.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let a=0;a<s.length;a++){let l=0,c=!1;for(let u=0;u<s[a].length;u++)if(dS(s[a][u])){if(c)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};l+=parseInt(s[a][u],10),c=!0}else{if(!/^[prnbqkPRNBQK]$/.test(s[a][u]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};l+=1,c=!1}if(l!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(t[3][1]=="3"&&t[1]=="w"||t[3][1]=="6"&&t[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const i=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:a,regex:l}of i){if(!l.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${a} king`};if((t[0].match(l)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${a} kings`}}return Array.from(s[0]+s[7]).some(a=>a.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function l_(e,t){const n=e.from,r=e.to,s=e.piece;let i=0,a=0,l=0;for(let c=0,u=t.length;c<u;c++){const f=t[c].from,m=t[c].to,h=t[c].piece;s===h&&n!==f&&r===m&&(i++,bo(n)===bo(f)&&a++,ll(n)===ll(f)&&l++)}return i>0?a>0&&l>0?sn(n):l>0?sn(n).charAt(1):sn(n).charAt(0):""}function ks(e,t,n,r,s,i=void 0,a=Ve.NORMAL){const l=bo(r);if(s===Ht&&(l===n_||l===o_))for(let c=0;c<a0.length;c++){const u=a0[c];e.push({color:t,from:n,to:r,piece:s,captured:i,promotion:u,flags:a|Ve.PROMOTION})}else e.push({color:t,from:n,to:r,piece:s,captured:i,flags:a})}function l0(e){let t=e.charAt(0);return t>="a"&&t<="h"?e.match(/[a-h]\d.*[a-h]\d/)?void 0:Ht:(t=t.toLowerCase(),t==="o"?Zt:t)}function mf(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class Ln{constructor(t=df,{skipValidation:n=!1}={}){Ct(this,"_board",new Array(128));Ct(this,"_turn",xn);Ct(this,"_header",{});Ct(this,"_kings",{w:cn,b:cn});Ct(this,"_epSquare",-1);Ct(this,"_halfMoves",0);Ct(this,"_moveNumber",0);Ct(this,"_history",[]);Ct(this,"_comments",{});Ct(this,"_castling",{w:0,b:0});Ct(this,"_hash",0n);Ct(this,"_positionCount",new Map);this.load(t,{skipValidation:n})}clear({preserveHeaders:t=!1}={}){this._board=new Array(128),this._kings={w:cn,b:cn},this._turn=xn,this._castling={w:0,b:0},this._epSquare=cn,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=t?this._header:{...XM},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(t,{skipValidation:n=!1,preserveHeaders:r=!1}={}){let s=t.split(/\s+/);if(s.length>=2&&s.length<6){const l=["-","-","0","1"];t=s.concat(l.slice(-(6-s.length))).join(" ")}if(s=t.split(/\s+/),!n){const{ok:l,error:c}=a_(t);if(!l)throw new Error(c)}const i=s[0];let a=0;this.clear({preserveHeaders:r});for(let l=0;l<i.length;l++){const c=i.charAt(l);if(c==="/")a+=8;else if(dS(c))a+=parseInt(c,10);else{const u=c<"a"?xn:Gn;this._put({type:c.toLowerCase(),color:u},sn(a)),a++}}this._turn=s[1],s[2].indexOf("K")>-1&&(this._castling.w|=Ve.KSIDE_CASTLE),s[2].indexOf("Q")>-1&&(this._castling.w|=Ve.QSIDE_CASTLE),s[2].indexOf("k")>-1&&(this._castling.b|=Ve.KSIDE_CASTLE),s[2].indexOf("q")>-1&&(this._castling.b|=Ve.QSIDE_CASTLE),this._epSquare=s[3]==="-"?cn:De[s[3]],this._halfMoves=parseInt(s[4],10),this._moveNumber=parseInt(s[5],10),this._hash=this._computeHash(),this._updateSetup(t),this._incPositionCount()}fen({forceEnpassantSquare:t=!1}={}){var a,l;let n=0,r="";for(let c=De.a8;c<=De.h1;c++){if(this._board[c]){n>0&&(r+=n,n=0);const{color:u,type:f}=this._board[c];r+=u===xn?f.toUpperCase():f.toLowerCase()}else n++;c+1&136&&(n>0&&(r+=n),c!==De.h1&&(r+="/"),n=0,c+=8)}let s="";this._castling[xn]&Ve.KSIDE_CASTLE&&(s+="K"),this._castling[xn]&Ve.QSIDE_CASTLE&&(s+="Q"),this._castling[Gn]&Ve.KSIDE_CASTLE&&(s+="k"),this._castling[Gn]&Ve.QSIDE_CASTLE&&(s+="q"),s=s||"-";let i="-";if(this._epSquare!==cn)if(t)i=sn(this._epSquare);else{const c=this._epSquare+(this._turn===xn?16:-16),u=[c+1,c-1];for(const f of u){if(f&136)continue;const m=this._turn;if(((a=this._board[f])==null?void 0:a.color)===m&&((l=this._board[f])==null?void 0:l.type)===Ht){this._makeMove({color:m,from:f,to:this._epSquare,piece:Ht,captured:Ht,flags:Ve.EP_CAPTURE});const h=!this._isKingAttacked(m);if(this._undoMove(),h){i=sn(this._epSquare);break}}}}return[r,this._turn,s,i,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(t){if(!this._board[t])return 0n;const{color:n,type:r}=this._board[t],s={w:0,b:1}[n],i={p:0,n:1,b:2,r:3,q:4,k:5}[r];return KM[s][i][t]}_epKey(){return this._epSquare===cn?0n:GM[this._epSquare&7]}_castlingKey(){const t=this._castling.w>>5|this._castling.b>>3;return QM[t]}_computeHash(){let t=0n;for(let n=De.a8;n<=De.h1;n++){if(n&136){n+=7;continue}this._board[n]&&(t^=this._pieceKey(n))}return t^=this._epKey(),t^=this._castlingKey(),this._turn==="b"&&(t^=uf),t}_updateSetup(t){this._history.length>0||(t!==df?(this._header.SetUp="1",this._header.FEN=t):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(df)}get(t){return this._board[De[t]]}findPiece(t){var r;const n=[];for(let s=De.a8;s<=De.h1;s++){if(s&136){s+=7;continue}!this._board[s]||((r=this._board[s])==null?void 0:r.color)!==t.color||this._board[s].color===t.color&&this._board[s].type===t.type&&n.push(sn(s))}return n}put({type:t,color:n},r){return this._put({type:t,color:n},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(t,n){this._hash^=this._pieceKey(t),this._board[t]=n,this._hash^=this._pieceKey(t)}_put({type:t,color:n},r){if(t_.indexOf(t.toLowerCase())===-1||!(r in De))return!1;const s=De[r];if(t==Zt&&!(this._kings[n]==cn||this._kings[n]==s))return!1;const i=this._board[s];return i&&i.type===Zt&&(this._kings[i.color]=cn),this._set(s,{type:t,color:n}),t===Zt&&(this._kings[n]=s),!0}_clear(t){this._hash^=this._pieceKey(t),delete this._board[t]}remove(t){const n=this.get(t);return this._clear(De[t]),n&&n.type===Zt&&(this._kings[n.color]=cn),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){var r,s,i,a,l,c,u,f,m,h,y,p;this._hash^=this._castlingKey();const t=((r=this._board[De.e1])==null?void 0:r.type)===Zt&&((s=this._board[De.e1])==null?void 0:s.color)===xn,n=((i=this._board[De.e8])==null?void 0:i.type)===Zt&&((a=this._board[De.e8])==null?void 0:a.color)===Gn;(!t||((l=this._board[De.a1])==null?void 0:l.type)!==Ta||((c=this._board[De.a1])==null?void 0:c.color)!==xn)&&(this._castling.w&=-65),(!t||((u=this._board[De.h1])==null?void 0:u.type)!==Ta||((f=this._board[De.h1])==null?void 0:f.color)!==xn)&&(this._castling.w&=-33),(!n||((m=this._board[De.a8])==null?void 0:m.type)!==Ta||((h=this._board[De.a8])==null?void 0:h.color)!==Gn)&&(this._castling.b&=-65),(!n||((y=this._board[De.h8])==null?void 0:y.type)!==Ta||((p=this._board[De.h8])==null?void 0:p.color)!==Gn)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){var i,a;if(this._epSquare===cn)return;const t=this._epSquare+(this._turn===xn?-16:16),n=this._epSquare+(this._turn===xn?16:-16),r=[n+1,n-1];if(this._board[t]!==null||this._board[this._epSquare]!==null||((i=this._board[n])==null?void 0:i.color)!==Sa(this._turn)||((a=this._board[n])==null?void 0:a.type)!==Ht){this._hash^=this._epKey(),this._epSquare=cn;return}const s=l=>{var c,u;return!(l&136)&&((c=this._board[l])==null?void 0:c.color)===this._turn&&((u=this._board[l])==null?void 0:u.type)===Ht};r.some(s)||(this._hash^=this._epKey(),this._epSquare=cn)}_attacked(t,n,r){const s=[];for(let i=De.a8;i<=De.h1;i++){if(i&136){i+=7;continue}if(this._board[i]===void 0||this._board[i].color!==t)continue;const a=this._board[i],l=i-n;if(l===0)continue;const c=l+119;if(ZM[c]&e_[a.type]){if(a.type===Ht){if(l>0&&a.color===xn||l<=0&&a.color===Gn)if(r)s.push(sn(i));else return!0;continue}if(a.type==="n"||a.type==="k")if(r){s.push(sn(i));continue}else return!0;const u=JM[c];let f=i+u,m=!1;for(;f!==n;){if(this._board[f]!=null){m=!0;break}f+=u}if(!m)if(r){s.push(sn(i));continue}else return!0}}return r?s:!1}attackers(t,n){return n?this._attacked(n,De[t],!0):this._attacked(this._turn,De[t],!0)}_isKingAttacked(t){const n=this._kings[t];return n===-1?!1:this._attacked(Sa(t),n)}hash(){return this._hash.toString(16)}isAttacked(t,n){return this._attacked(n,De[t])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const t={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let r=0,s=0;for(let i=De.a8;i<=De.h1;i++){if(s=(s+1)%2,i&136){i+=7;continue}const a=this._board[i];a&&(t[a.type]=a.type in t?t[a.type]+1:1,a.type===Ac&&n.push(s),r++)}if(r===2)return!0;if(r===3&&(t[Ac]===1||t[Lh]===1))return!0;if(r===t[Ac]+2){let i=0;const a=n.length;for(let l=0;l<a;l++)i+=n[l];if(i===0||i===a)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:t=!1,square:n=void 0,piece:r=void 0}={}){const s=this._moves({square:n,piece:r});return t?s.map(i=>new ac(this,i)):s.map(i=>this._moveToSan(i,s))}_moves({legal:t=!0,piece:n=void 0,square:r=void 0}={}){var y;const s=r?r.toLowerCase():void 0,i=n==null?void 0:n.toLowerCase(),a=[],l=this._turn,c=Sa(l);let u=De.a8,f=De.h1,m=!1;if(s)if(s in De)u=f=De[s],m=!0;else return[];for(let p=u;p<=f;p++){if(p&136){p+=7;continue}if(!this._board[p]||this._board[p].color===c)continue;const{type:g}=this._board[p];let w;if(g===Ht){if(i&&i!==g)continue;w=p+ff[l][0],this._board[w]||(ks(a,l,p,w,Ht),w=p+ff[l][1],i_[l]===bo(p)&&!this._board[w]&&ks(a,l,p,w,Ht,void 0,Ve.BIG_PAWN));for(let x=2;x<4;x++)w=p+ff[l][x],!(w&136)&&(((y=this._board[w])==null?void 0:y.color)===c?ks(a,l,p,w,Ht,this._board[w].type,Ve.CAPTURE):w===this._epSquare&&ks(a,l,p,w,Ht,Ht,Ve.EP_CAPTURE))}else{if(i&&i!==g)continue;for(let x=0,v=i0[g].length;x<v;x++){const b=i0[g][x];for(w=p;w+=b,!(w&136);){if(!this._board[w])ks(a,l,p,w,g);else{if(this._board[w].color===l)break;ks(a,l,p,w,g,this._board[w].type,Ve.CAPTURE);break}if(g===Lh||g===Zt)break}}}}if((i===void 0||i===Zt)&&(!m||f===this._kings[l])){if(this._castling[l]&Ve.KSIDE_CASTLE){const p=this._kings[l],g=p+2;!this._board[p+1]&&!this._board[g]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,p+1)&&!this._attacked(c,g)&&ks(a,l,this._kings[l],g,Zt,void 0,Ve.KSIDE_CASTLE)}if(this._castling[l]&Ve.QSIDE_CASTLE){const p=this._kings[l],g=p-2;!this._board[p-1]&&!this._board[p-2]&&!this._board[p-3]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,p-1)&&!this._attacked(c,g)&&ks(a,l,this._kings[l],g,Zt,void 0,Ve.QSIDE_CASTLE)}}if(!t||this._kings[l]===-1)return a;const h=[];for(let p=0,g=a.length;p<g;p++)this._makeMove(a[p]),this._isKingAttacked(l)||h.push(a[p]),this._undoMove();return h}move(t,{strict:n=!1}={}){let r=null;if(typeof t=="string")r=this._moveFromSan(t,n);else if(t===null)r=this._moveFromSan(hf,n);else if(typeof t=="object"){const i=this._moves();for(let a=0,l=i.length;a<l;a++)if(t.from===sn(i[a].from)&&t.to===sn(i[a].to)&&(!("promotion"in i[a])||t.promotion===i[a].promotion)){r=i[a];break}}if(!r)throw typeof t=="string"?new Error(`Invalid move: ${t}`):new Error(`Invalid move: ${JSON.stringify(t)}`);if(this.isCheck()&&r.flags&Ve.NULL_MOVE)throw new Error("Null move not allowed when in check");const s=new ac(this,r);return this._makeMove(r),this._incPositionCount(),s}_push(t){this._history.push({move:t,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(t,n){this._hash^=this._pieceKey(t),this._board[n]=this._board[t],delete this._board[t],this._hash^=this._pieceKey(n)}_makeMove(t){var s,i,a,l;const n=this._turn,r=Sa(n);if(this._push(t),t.flags&Ve.NULL_MOVE){n===Gn&&this._moveNumber++,this._halfMoves++,this._turn=r,this._epSquare=cn;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),t.captured&&(this._hash^=this._pieceKey(t.to)),this._movePiece(t.from,t.to),t.flags&Ve.EP_CAPTURE&&(this._turn===Gn?this._clear(t.to-16):this._clear(t.to+16)),t.promotion&&(this._clear(t.to),this._set(t.to,{type:t.promotion,color:n})),this._board[t.to].type===Zt){if(this._kings[n]=t.to,t.flags&Ve.KSIDE_CASTLE){const c=t.to-1,u=t.to+1;this._movePiece(u,c)}else if(t.flags&Ve.QSIDE_CASTLE){const c=t.to+1,u=t.to-2;this._movePiece(u,c)}this._castling[n]=0}if(this._castling[n]){for(let c=0,u=Ns[n].length;c<u;c++)if(t.from===Ns[n][c].square&&this._castling[n]&Ns[n][c].flag){this._castling[n]^=Ns[n][c].flag;break}}if(this._castling[r]){for(let c=0,u=Ns[r].length;c<u;c++)if(t.to===Ns[r][c].square&&this._castling[r]&Ns[r][c].flag){this._castling[r]^=Ns[r][c].flag;break}}if(this._hash^=this._castlingKey(),t.flags&Ve.BIG_PAWN){let c;n===Gn?c=t.to-16:c=t.to+16,!(t.to-1&136)&&((s=this._board[t.to-1])==null?void 0:s.type)===Ht&&((i=this._board[t.to-1])==null?void 0:i.color)===r||!(t.to+1&136)&&((a=this._board[t.to+1])==null?void 0:a.type)===Ht&&((l=this._board[t.to+1])==null?void 0:l.color)===r?(this._epSquare=c,this._hash^=this._epKey()):this._epSquare=cn}else this._epSquare=cn;t.piece===Ht?this._halfMoves=0:t.flags&(Ve.CAPTURE|Ve.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===Gn&&this._moveNumber++,this._turn=r,this._hash^=uf}undo(){const t=this._hash,n=this._undoMove();if(n){const r=new ac(this,n);return this._decPositionCount(t),r}return null}_undoMove(){const t=this._history.pop();if(t===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const n=t.move;this._kings=t.kings,this._turn=t.turn,this._castling=t.castling,this._epSquare=t.epSquare,this._halfMoves=t.halfMoves,this._moveNumber=t.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=uf;const r=this._turn,s=Sa(r);if(n.flags&Ve.NULL_MOVE)return n;if(this._movePiece(n.to,n.from),n.piece&&(this._clear(n.from),this._set(n.from,{type:n.piece,color:r})),n.captured)if(n.flags&Ve.EP_CAPTURE){let i;r===Gn?i=n.to-16:i=n.to+16,this._set(i,{type:Ht,color:s})}else this._set(n.to,{type:n.captured,color:s});if(n.flags&(Ve.KSIDE_CASTLE|Ve.QSIDE_CASTLE)){let i,a;n.flags&Ve.KSIDE_CASTLE?(i=n.to+1,a=n.to-1):(i=n.to-2,a=n.to+1),this._movePiece(a,i)}return n}pgn({newline:t=`
`,maxWidth:n=0}={}){const r=[];let s=!1;for(const h in this._header)this._header[h]&&r.push(`[${h} "${this._header[h]}"]`+t),s=!0;s&&this._history.length&&r.push(t);const i=h=>{const y=this._comments[this.fen()];if(typeof y<"u"){const p=h.length>0?" ":"";h=`${h}${p}{${y}}`}return h},a=[];for(;this._history.length>0;)a.push(this._undoMove());const l=[];let c="";for(a.length===0&&l.push(i(""));a.length>0;){c=i(c);const h=a.pop();if(!h)break;if(!this._history.length&&h.color==="b"){const y=`${this._moveNumber}. ...`;c=c?`${c} ${y}`:y}else h.color==="w"&&(c.length&&l.push(c),c=this._moveNumber+".");c=c+" "+this._moveToSan(h,this._moves({legal:!0})),this._makeMove(h)}if(c.length&&l.push(i(c)),l.push(this._header.Result||"*"),n===0)return r.join("")+l.join(" ");const u=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},f=function(h,y){for(const p of y.split(" "))if(p){if(h+p.length>n){for(;u();)h--;r.push(t),h=0}r.push(p),h+=p.length,r.push(" "),h++}return u()&&h--,h};let m=0;for(let h=0;h<l.length;h++){if(m+l[h].length>n&&l[h].includes("{")){m=f(m,l[h]);continue}m+l[h].length>n&&h!==0?(r[r.length-1]===" "&&r.pop(),r.push(t),m=0):h!==0&&(r.push(" "),m++),r.push(l[h]),m+=l[h].length}return r.join("")}header(...t){for(let n=0;n<t.length;n+=2)typeof t[n]=="string"&&typeof t[n+1]=="string"&&(this._header[t[n]]=t[n+1]);return this._header}setHeader(t,n){return this._header[t]=n??Ih[t]??null,this.getHeaders()}removeHeader(t){return t in this._header?(this._header[t]=Ih[t]||null,!0):!1}getHeaders(){const t={};for(const[n,r]of Object.entries(this._header))r!==null&&(t[n]=r);return t}loadPgn(t,{strict:n=!1,newlineChar:r=`\r?
`}={}){r!==`\r?
`&&(t=t.replace(new RegExp(r,"g"),`
`));const s=UM(t);this.reset();const i=s.headers;let a="";for(const u in i)u.toLowerCase()==="fen"&&(a=i[u]),this.header(u,i[u]);if(!n)a&&this.load(a,{preserveHeaders:!0});else if(i.SetUp==="1"){if(!("FEN"in i))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(i.FEN,{preserveHeaders:!0})}let l=s.root;for(;l;){if(l.move){const u=this._moveFromSan(l.move,n);if(u==null)throw new Error(`Invalid move in PGN: ${l.move}`);this._makeMove(u),this._incPositionCount()}l.comment!==void 0&&(this._comments[this.fen()]=l.comment),l=l.variations[0]}const c=s.result;c&&Object.keys(this._header).length&&this._header.Result!==c&&this.setHeader("Result",c)}_moveToSan(t,n){let r="";if(t.flags&Ve.KSIDE_CASTLE)r="O-O";else if(t.flags&Ve.QSIDE_CASTLE)r="O-O-O";else{if(t.flags&Ve.NULL_MOVE)return hf;if(t.piece!==Ht){const s=l_(t,n);r+=t.piece.toUpperCase()+s}t.flags&(Ve.CAPTURE|Ve.EP_CAPTURE)&&(t.piece===Ht&&(r+=sn(t.from)[0]),r+="x"),r+=sn(t.to),t.promotion&&(r+="="+t.promotion.toUpperCase())}return this._makeMove(t),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(t,n=!1){let r=mf(t);if(n||(r==="0-0"?r="O-O":r==="0-0-0"&&(r="O-O-O")),r==hf)return{color:this._turn,from:0,to:0,piece:"k",flags:Ve.NULL_MOVE};let s=l0(r),i=this._moves({legal:!0,piece:s});for(let h=0,y=i.length;h<y;h++)if(r===mf(this._moveToSan(i[h],i)))return i[h];if(n)return null;let a,l,c,u,f,m=!1;if(l=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),l?(a=l[1],c=l[2],u=l[3],f=l[4],c.length==1&&(m=!0)):(l=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),l&&(a=l[1],c=l[2],u=l[3],f=l[4],c.length==1&&(m=!0))),s=l0(r),i=this._moves({legal:!0,piece:a||s}),!u)return null;for(let h=0,y=i.length;h<y;h++)if(c){if((!a||a.toLowerCase()==i[h].piece)&&De[c]==i[h].from&&De[u]==i[h].to&&(!f||f.toLowerCase()==i[h].promotion))return i[h];if(m){const p=sn(i[h].from);if((!a||a.toLowerCase()==i[h].piece)&&De[u]==i[h].to&&(c==p[0]||c==p[1])&&(!f||f.toLowerCase()==i[h].promotion))return i[h]}}else if(r===mf(this._moveToSan(i[h],i)).replace("x",""))return i[h];return null}ascii(){let t=`   +------------------------+
`;for(let n=De.a8;n<=De.h1;n++){if(ll(n)===0&&(t+=" "+"87654321"[bo(n)]+" |"),this._board[n]){const r=this._board[n].type,i=this._board[n].color===xn?r.toUpperCase():r.toLowerCase();t+=" "+i+" "}else t+=" . ";n+1&136&&(t+=`|
`,n+=8)}return t+=`   +------------------------+
`,t+="     a  b  c  d  e  f  g  h",t}perft(t){const n=this._moves({legal:!1});let r=0;const s=this._turn;for(let i=0,a=n.length;i<a;i++)this._makeMove(n[i]),this._isKingAttacked(s)||(t-1>0?r+=this.perft(t-1):r++),this._undoMove();return r}setTurn(t){return this._turn==t?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const t=[];let n=[];for(let r=De.a8;r<=De.h1;r++)this._board[r]==null?n.push(null):n.push({square:sn(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(t.push(n),n=[],r+=8);return t}squareColor(t){if(t in De){const n=De[t];return(bo(n)+ll(n))%2===0?"light":"dark"}return null}history({verbose:t=!1}={}){const n=[],r=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const s=n.pop();if(!s)break;t?r.push(new ac(this,s)):r.push(this._moveToSan(s,this._moves())),this._makeMove(s)}return r}_getPositionCount(t){return this._positionCount.get(t)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(t){const n=this._positionCount.get(t)??0;n===1?this._positionCount.delete(t):this._positionCount.set(t,n-1)}_pruneComments(){const t=[],n={},r=s=>{s in this._comments&&(n[s]=this._comments[s])};for(;this._history.length>0;)t.push(this._undoMove());for(r(this.fen());;){const s=t.pop();if(!s)break;this._makeMove(s),r(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(t){this._comments[this.fen()]=t.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const t=this._comments[this.fen()];return delete this._comments[this.fen()],t}getComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>({fen:t,comment:this._comments[t]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>{const n=this._comments[t];return delete this._comments[t],{fen:t,comment:n}})}setCastlingRights(t,n){for(const s of[Zt,Ps])n[s]!==void 0&&(n[s]?this._castling[t]|=lc[s]:this._castling[t]&=~lc[s]);this._updateCastlingRights();const r=this.getCastlingRights(t);return(n[Zt]===void 0||n[Zt]===r[Zt])&&(n[Ps]===void 0||n[Ps]===r[Ps])}getCastlingRights(t){return{[Zt]:(this._castling[t]&lc[Zt])!==0,[Ps]:(this._castling[t]&lc[Ps])!==0}}moveNumber(){return this._moveNumber}}const fi=["a","b","c","d","e","f","g","h"],cc=["8","7","6","5","4","3","2","1"],vu=e=>({file:fi.indexOf(e[0]),rank:parseInt(e[1])-1}),c0=(e,t)=>`${fi[e]}${t+1}`,c_=(e,t)=>{const n=vu(e),r=vu(t),s=Math.abs(r.file-n.file),i=Math.abs(r.rank-n.rank);return s===2&&i===1||s===1&&i===2},u_=(e,t)=>{const n=vu(e),r=vu(t),s=r.file-n.file;return Math.abs(s)===2?c0(r.file,n.rank):c0(n.file,r.rank)},d_={K:"/pieces/wK.svg",Q:"/pieces/wQ.svg",R:"/pieces/wR.svg",B:"/pieces/wB.svg",N:"/pieces/wN.svg",P:"/pieces/wP.svg",k:"/pieces/bK.svg",q:"/pieces/bQ.svg",r:"/pieces/bR.svg",b:"/pieces/bB.svg",n:"/pieces/bN.svg",p:"/pieces/bP.svg"};function f_({fen:e="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",orientation:t="white",showCoordinates:n=!0,highlightedSquares:r=[],legalMoveSquares:s=[],lastMoveSquares:i=[],lastMove:a,selectedSquare:l=null,lockedPiece:c=null,onSquareClick:u,onMove:f,interactionMode:m="free",className:h="",noCard:y=!1,enableArrows:p=!0,enablePremoves:g=!1,isPlayerTurn:w=!0,premove:x=null,onPremove:v,arrowDrawMode:b=!1,highlightColor:S="yellow",customHighlightColors:N,hideSelectionHighlight:j=!1}){const k=(N==null?void 0:N.selectedPiece)||(S==="red"?"#ef4444":"#facc15"),C=(N==null?void 0:N.lastMove)||"#f97316",R=(N==null?void 0:N.availableMoves)||"#fbbf24",[P,D]=d.useState(null),_=l!==null?l:P,[q,M]=d.useState([]),[z,Q]=d.useState(null),[Y,T]=d.useState(!1),[$,V]=d.useState(null),G=d.useRef(null),de=a?[a.from,a.to]:i;d.useEffect(()=>{D(null)},[e]),d.useEffect(()=>{b||V(null)},[b]);const ve=(F=>{const H=F.split(" ")[0].split("/"),he=[];for(const ie of H){const ae=[];for(const $e of ie)if(isNaN(parseInt($e)))ae.push($e);else for(let ke=0;ke<parseInt($e);ke++)ae.push(null);he.push(ae)}return he})(e),fe=t==="white"?cc:[...cc].reverse(),A=t==="white"?fi:[...fi].reverse(),B=d.useCallback((F,H)=>{if(!G.current)return null;const he=G.current.getBoundingClientRect(),ie=F-he.left,ae=H-he.top,$e=he.width/8,ke=he.height/8,Te=Math.floor(ie/$e),st=Math.floor(ae/ke);if(Te<0||Te>7||st<0||st>7)return null;const kt=A[Te],Je=fe[st];return`${kt}${Je}`},[A,fe]),W=(F,H,he)=>{const ie=`${F}${H}`;if(m==="viewOnly")return;if(b){if($===null)V(ie);else if($===ie)V(null);else{const Te={from:$,to:ie},st=q.findIndex(kt=>kt.from===Te.from&&kt.to===Te.to);st>=0?M(q.filter((kt,Je)=>Je!==st)):M([...q,Te]),V(null)}return}he&&M([]);const ae=Te=>Te===Te.toUpperCase(),ke=(()=>{var Wt;if(!_)return null;const Te=_[0],st=_[1],kt=cc.indexOf(st),Je=fi.indexOf(Te);return((Wt=ve[kt])==null?void 0:Wt[Je])||null})();if(he&&ke&&_!==ie){const Te=ae(ke),st=ae(he);if(Te===st){if(c){u==null||u(ie);return}D(ie),u==null||u(ie);return}}if(f&&_&&_!==ie){if(f(_,ie)){D(null);return}if(he&&l===null&&!c){D(ie),u==null||u(ie);return}}he?l===null&&!c&&D(ie):_&&!c&&D(null),u==null||u(ie)},U=d.useCallback(F=>{F.preventDefault()},[]),re=d.useCallback(F=>{if(!(!p||m==="viewOnly")&&(F.button===2||b)){F.preventDefault(),T(!0);const H=B(F.clientX,F.clientY);H&&Q({from:H,currentSquare:H})}},[p,b,B]),se=d.useCallback(F=>{if(!z||!Y)return;const H=B(F.clientX,F.clientY);H&&H!==z.currentSquare&&Q({...z,currentSquare:H})},[z,Y,B]),ye=d.useCallback(F=>{if(p&&(F.button===2||b)&&z&&Y){const H=B(F.clientX,F.clientY);if(H&&H!==z.from){const he={from:z.from,to:H},ie=q.findIndex(ae=>ae.from===he.from&&ae.to===he.to);ie>=0?M(q.filter((ae,$e)=>$e!==ie)):M([...q,he])}Q(null),T(!1)}},[p,b,z,Y,q,B]),Fe=d.useCallback(F=>{},[]),ze=d.useCallback(F=>{},[]),Ae=d.useCallback(F=>{},[]),oe=d.useCallback(F=>{const H=F[0],he=F[1],ie=A.indexOf(H),ae=fe.indexOf(he);return{x:(ie+.5)*12.5,y:(ae+.5)*12.5}},[A,fe]),Ne=(F,H)=>(F+H)%2===0?"bg-board-light":"bg-board-dark",Ce=F=>x&&(x.from===F||x.to===F),Re=(F,H,he=!1)=>{const ie=oe(F.from),ae=oe(F.to),$e=he?"rgba(255, 170, 0, 0.7)":"rgba(255, 170, 0, 0.8)";if(c_(F.from,F.to)){const hn=u_(F.from,F.to),Yt=oe(hn),vt=ae.x-Yt.x,On=ae.y-Yt.y,tn=Math.sqrt(vt*vt+On*On),Lt=(tn-3*.7)/tn,Ye=Yt.x+vt*Lt,jt=Yt.y+On*Lt;return o.jsxs("g",{children:[o.jsx("line",{x1:ie.x,y1:ie.y,x2:Yt.x,y2:Yt.y,stroke:$e,strokeWidth:"2.5",strokeLinecap:"round"}),o.jsx("line",{x1:Yt.x,y1:Yt.y,x2:Ye,y2:jt,stroke:$e,strokeWidth:"2.5",strokeLinecap:"round"}),o.jsx("polygon",{points:"0,-2 4,0 0,2",fill:$e,transform:`translate(${ae.x},${ae.y}) rotate(${Math.atan2(On,vt)*180/Math.PI})`})]},`arrow-${H}`)}const ke=ae.x-ie.x,Te=ae.y-ie.y,st=Math.sqrt(ke*ke+Te*Te),Wt=(st-3*.7)/st,Qt=ie.x+ke*Wt,jn=ie.y+Te*Wt;return o.jsxs("g",{children:[o.jsx("line",{x1:ie.x,y1:ie.y,x2:Qt,y2:jn,stroke:$e,strokeWidth:"2.5",strokeLinecap:"round"}),o.jsx("polygon",{points:"0,-2 4,0 0,2",fill:$e,transform:`translate(${ae.x},${ae.y}) rotate(${Math.atan2(Te,ke)*180/Math.PI})`})]},`arrow-${H}`)},Me=o.jsxs("div",{ref:G,className:"relative w-full h-full select-none",onContextMenu:U,onMouseDown:re,onMouseMove:se,onMouseUp:ye,onMouseLeave:()=>{Y&&(Q(null),T(!1))},onTouchStart:Fe,onTouchMove:ze,onTouchEnd:Ae,children:[o.jsx("div",{className:"grid grid-cols-8 grid-rows-8 gap-0 w-full h-full",children:fe.map((F,H)=>A.map((he,ie)=>{var On;const ae=`${he}${F}`,$e=cc.indexOf(F),ke=fi.indexOf(he),Te=(On=ve[$e])==null?void 0:On[ke],st=r.includes(ae),kt=_===ae,Je=c===ae,Wt=de.includes(ae),Qt=Ce(ae),jn=s.includes(ae),hn=jn&&Te!==null,Yt=$===ae,vt=(tn,gr)=>{const nt=parseInt(tn.slice(1,3),16),Lt=parseInt(tn.slice(3,5),16),Ye=parseInt(tn.slice(5,7),16);return`rgba(${nt}, ${Lt}, ${Ye}, ${gr})`};return o.jsxs("div",{"data-testid":`square-${ae}`,"data-square":ae,onClick:()=>W(he,F,Te),className:`
                    relative flex items-center justify-center cursor-pointer
                    ${Ne(ie,H)}
                    ${st?"ring-2 ring-primary ring-inset":""}
                    ${Qt?"bg-opacity-80 after:absolute after:inset-0 after:bg-blue-500/40":""}
                    ${Yt?"ring-4 ring-orange-400 ring-inset":""}
                    hover-elevate
                  `,style:{...!j&&kt&&!Je?{boxShadow:`inset 0 0 0 4px ${k}`}:{},...!j&&Je?{boxShadow:`inset 0 0 0 4px ${k}`}:{}},children:[Wt&&o.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{backgroundColor:vt(C,.3)}}),Te&&o.jsx("img",{src:d_[Te],alt:Te,className:"w-[75%] h-[75%] select-none relative z-10 pointer-events-none",draggable:!1}),jn&&!hn&&o.jsx("div",{className:"absolute w-3 h-3 sm:w-4 sm:h-4 rounded-full pointer-events-none z-10",style:{backgroundColor:vt(R,.4)}}),hn&&o.jsx("div",{className:"absolute inset-0 rounded-full pointer-events-none z-10",style:{border:`3px solid ${vt(R,.5)}`}}),n&&ie===0&&o.jsx("span",{className:"absolute bottom-0.5 left-1 text-xs font-semibold select-none opacity-70",children:F}),n&&H===7&&o.jsx("span",{className:"absolute bottom-0.5 right-1 text-xs font-semibold select-none opacity-70",children:he})]},ae)}))}),(q.length>0||z)&&o.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[q.map((F,H)=>Re(F,H)),z&&z.from!==z.currentSquare&&Re({from:z.from,to:z.currentSquare},-1,!0)]})]});return y?o.jsx("div",{className:`aspect-square w-full ${h}`,children:Me}):o.jsx(Ze,{className:`aspect-square w-full max-w-full md:max-w-[600px] p-1 md:p-2 ${h}`,children:Me})}const h_=[{key:"q",name:"Queen",white:"/pieces/wQ.svg",black:"/pieces/bQ.svg"},{key:"r",name:"Rook",white:"/pieces/wR.svg",black:"/pieces/bR.svg"},{key:"b",name:"Bishop",white:"/pieces/wB.svg",black:"/pieces/bB.svg"},{key:"n",name:"Knight",white:"/pieces/wN.svg",black:"/pieces/bN.svg"}];function m_({open:e,color:t,onSelect:n}){return o.jsx(Di,{open:e,onOpenChange:()=>{},children:o.jsxs(Mo,{className:"sm:max-w-md",onPointerDownOutside:r=>r.preventDefault(),children:[o.jsx(_o,{children:o.jsx(Ao,{className:"text-center",children:"Promote Pawn"})}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:h_.map(r=>o.jsx(X,{variant:"outline",className:"h-20 hover-elevate",onClick:()=>n(r.key),"data-testid":`button-promote-${r.key}`,children:o.jsx("img",{src:t==="white"?r.white:r.black,alt:r.name,className:"w-12 h-12",draggable:!1})},r.key))}),o.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"Select a piece to promote your pawn"})]})})}function cl(e,[t,n]){return Math.min(n,Math.max(t,e))}var p_=[" ","Enter","ArrowUp","ArrowDown"],g_=[" ","Enter"],kl="Select",[nd,rd,v_]=Um(kl),[na,u3]=Un(kl,[v_,Yu]),sd=Yu(),[x_,Js]=na(kl),[y_,w_]=na(kl),fS=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:u,name:f,autoComplete:m,disabled:h,required:y,form:p}=e,g=sd(t),[w,x]=d.useState(null),[v,b]=d.useState(null),[S,N]=d.useState(!1),j=Nl(u),[k=!1,C]=Eo({prop:r,defaultProp:s,onChange:i}),[R,P]=Eo({prop:a,defaultProp:l,onChange:c}),D=d.useRef(null),_=w?p||!!w.closest("form"):!0,[q,M]=d.useState(new Set),z=Array.from(q).map(Q=>Q.props.value).join(";");return o.jsx(bP,{...g,children:o.jsxs(x_,{required:y,scope:t,trigger:w,onTriggerChange:x,valueNode:v,onValueNodeChange:b,valueNodeHasChildren:S,onValueNodeHasChildrenChange:N,contentId:Vs(),value:R,onValueChange:P,open:k,onOpenChange:C,dir:j,triggerPointerDownPosRef:D,disabled:h,children:[o.jsx(nd.Provider,{scope:t,children:o.jsx(y_,{scope:e.__scopeSelect,onNativeOptionAdd:d.useCallback(Q=>{M(Y=>new Set(Y).add(Q))},[]),onNativeOptionRemove:d.useCallback(Q=>{M(Y=>{const T=new Set(Y);return T.delete(Q),T})},[]),children:n})}),_?o.jsxs(OS,{"aria-hidden":!0,required:y,tabIndex:-1,name:f,autoComplete:m,value:R,onChange:Q=>P(Q.target.value),disabled:h,form:p,children:[R===void 0?o.jsx("option",{value:""}):null,Array.from(q)]},z):null]})})};fS.displayName=kl;var hS="SelectTrigger",mS=d.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,i=sd(n),a=Js(hS,n),l=a.disabled||r,c=Ge(t,a.onTriggerChange),u=rd(n),f=d.useRef("touch"),[m,h,y]=DS(g=>{const w=u().filter(b=>!b.disabled),x=w.find(b=>b.value===a.value),v=BS(w,g,x);v!==void 0&&a.onValueChange(v.value)}),p=g=>{l||(a.onOpenChange(!0),y()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return o.jsx(Jw,{asChild:!0,...i,children:o.jsx(Oe.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":$S(a.value)?"":void 0,...s,ref:c,onClick:je(s.onClick,g=>{g.currentTarget.focus(),f.current!=="mouse"&&p(g)}),onPointerDown:je(s.onPointerDown,g=>{f.current=g.pointerType;const w=g.target;w.hasPointerCapture(g.pointerId)&&w.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(p(g),g.preventDefault())}),onKeyDown:je(s.onKeyDown,g=>{const w=m.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&h(g.key),!(w&&g.key===" ")&&p_.includes(g.key)&&(p(),g.preventDefault())})})})});mS.displayName=hS;var pS="SelectValue",gS=d.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=e,c=Js(pS,n),{onValueNodeHasChildrenChange:u}=c,f=i!==void 0,m=Ge(t,c.onValueNodeChange);return ln(()=>{u(f)},[u,f]),o.jsx(Oe.span,{...l,ref:m,style:{pointerEvents:"none"},children:$S(c.value)?o.jsx(o.Fragment,{children:a}):i})});gS.displayName=pS;var b_="SelectIcon",vS=d.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return o.jsx(Oe.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});vS.displayName=b_;var S_="SelectPortal",xS=e=>o.jsx(Du,{asChild:!0,...e});xS.displayName=S_;var Lo="SelectContent",yS=d.forwardRef((e,t)=>{const n=Js(Lo,e.__scopeSelect),[r,s]=d.useState();if(ln(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Do.createPortal(o.jsx(wS,{scope:e.__scopeSelect,children:o.jsx(nd.Slot,{scope:e.__scopeSelect,children:o.jsx("div",{children:e.children})})}),i):null}return o.jsx(bS,{...e,ref:t})});yS.displayName=Lo;var xr=10,[wS,eo]=na(Lo),N_="SelectContentImpl",k_=Ii("SelectContent.RemoveScroll"),bS=d.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:m,collisionBoundary:h,collisionPadding:y,sticky:p,hideWhenDetached:g,avoidCollisions:w,...x}=e,v=Js(Lo,n),[b,S]=d.useState(null),[N,j]=d.useState(null),k=Ge(t,B=>S(B)),[C,R]=d.useState(null),[P,D]=d.useState(null),_=rd(n),[q,M]=d.useState(!1),z=d.useRef(!1);d.useEffect(()=>{if(b)return P1(b)},[b]),y1();const Q=d.useCallback(B=>{const[W,...U]=_().map(ye=>ye.ref.current),[re]=U.slice(-1),se=document.activeElement;for(const ye of B)if(ye===se||(ye==null||ye.scrollIntoView({block:"nearest"}),ye===W&&N&&(N.scrollTop=0),ye===re&&N&&(N.scrollTop=N.scrollHeight),ye==null||ye.focus(),document.activeElement!==se))return},[_,N]),Y=d.useCallback(()=>Q([C,b]),[Q,C,b]);d.useEffect(()=>{q&&Y()},[q,Y]);const{onOpenChange:T,triggerPointerDownPosRef:$}=v;d.useEffect(()=>{if(b){let B={x:0,y:0};const W=re=>{var se,ye;B={x:Math.abs(Math.round(re.pageX)-(((se=$.current)==null?void 0:se.x)??0)),y:Math.abs(Math.round(re.pageY)-(((ye=$.current)==null?void 0:ye.y)??0))}},U=re=>{B.x<=10&&B.y<=10?re.preventDefault():b.contains(re.target)||T(!1),document.removeEventListener("pointermove",W),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",W),document.addEventListener("pointerup",U,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",W),document.removeEventListener("pointerup",U,{capture:!0})}}},[b,T,$]),d.useEffect(()=>{const B=()=>T(!1);return window.addEventListener("blur",B),window.addEventListener("resize",B),()=>{window.removeEventListener("blur",B),window.removeEventListener("resize",B)}},[T]);const[V,G]=DS(B=>{const W=_().filter(se=>!se.disabled),U=W.find(se=>se.ref.current===document.activeElement),re=BS(W,B,U);re&&setTimeout(()=>re.ref.current.focus())}),de=d.useCallback((B,W,U)=>{const re=!z.current&&!U;(v.value!==void 0&&v.value===W||re)&&(R(B),re&&(z.current=!0))},[v.value]),ne=d.useCallback(()=>b==null?void 0:b.focus(),[b]),ve=d.useCallback((B,W,U)=>{const re=!z.current&&!U;(v.value!==void 0&&v.value===W||re)&&D(B)},[v.value]),fe=r==="popper"?$h:SS,A=fe===$h?{side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:m,collisionBoundary:h,collisionPadding:y,sticky:p,hideWhenDetached:g,avoidCollisions:w}:{};return o.jsx(wS,{scope:n,content:b,viewport:N,onViewportChange:j,itemRefCallback:de,selectedItem:C,onItemLeave:ne,itemTextRefCallback:ve,focusSelectedItem:Y,selectedItemText:P,position:r,isPositioned:q,searchRef:V,children:o.jsx(hp,{as:k_,allowPinchZoom:!0,children:o.jsx(fp,{asChild:!0,trapped:v.open,onMountAutoFocus:B=>{B.preventDefault()},onUnmountAutoFocus:je(s,B=>{var W;(W=v.trigger)==null||W.focus({preventScroll:!0}),B.preventDefault()}),children:o.jsx(yl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:B=>B.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:o.jsx(fe,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:B=>B.preventDefault(),...x,...A,onPlaced:()=>M(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:je(x.onKeyDown,B=>{const W=B.ctrlKey||B.altKey||B.metaKey;if(B.key==="Tab"&&B.preventDefault(),!W&&B.key.length===1&&G(B.key),["ArrowUp","ArrowDown","Home","End"].includes(B.key)){let re=_().filter(se=>!se.disabled).map(se=>se.ref.current);if(["ArrowUp","End"].includes(B.key)&&(re=re.slice().reverse()),["ArrowUp","ArrowDown"].includes(B.key)){const se=B.target,ye=re.indexOf(se);re=re.slice(ye+1)}setTimeout(()=>Q(re)),B.preventDefault()}})})})})})})});bS.displayName=N_;var j_="SelectItemAlignedPosition",SS=d.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,i=Js(Lo,n),a=eo(Lo,n),[l,c]=d.useState(null),[u,f]=d.useState(null),m=Ge(t,k=>f(k)),h=rd(n),y=d.useRef(!1),p=d.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:x,focusSelectedItem:v}=a,b=d.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&g&&w&&x){const k=i.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),R=i.valueNode.getBoundingClientRect(),P=x.getBoundingClientRect();if(i.dir!=="rtl"){const se=P.left-C.left,ye=R.left-se,Fe=k.left-ye,ze=k.width+Fe,Ae=Math.max(ze,C.width),oe=window.innerWidth-xr,Ne=cl(ye,[xr,Math.max(xr,oe-Ae)]);l.style.minWidth=ze+"px",l.style.left=Ne+"px"}else{const se=C.right-P.right,ye=window.innerWidth-R.right-se,Fe=window.innerWidth-k.right-ye,ze=k.width+Fe,Ae=Math.max(ze,C.width),oe=window.innerWidth-xr,Ne=cl(ye,[xr,Math.max(xr,oe-Ae)]);l.style.minWidth=ze+"px",l.style.right=Ne+"px"}const D=h(),_=window.innerHeight-xr*2,q=g.scrollHeight,M=window.getComputedStyle(u),z=parseInt(M.borderTopWidth,10),Q=parseInt(M.paddingTop,10),Y=parseInt(M.borderBottomWidth,10),T=parseInt(M.paddingBottom,10),$=z+Q+q+T+Y,V=Math.min(w.offsetHeight*5,$),G=window.getComputedStyle(g),de=parseInt(G.paddingTop,10),ne=parseInt(G.paddingBottom,10),ve=k.top+k.height/2-xr,fe=_-ve,A=w.offsetHeight/2,B=w.offsetTop+A,W=z+Q+B,U=$-W;if(W<=ve){const se=D.length>0&&w===D[D.length-1].ref.current;l.style.bottom="0px";const ye=u.clientHeight-g.offsetTop-g.offsetHeight,Fe=Math.max(fe,A+(se?ne:0)+ye+Y),ze=W+Fe;l.style.height=ze+"px"}else{const se=D.length>0&&w===D[0].ref.current;l.style.top="0px";const Fe=Math.max(ve,z+g.offsetTop+(se?de:0)+A)+U;l.style.height=Fe+"px",g.scrollTop=W-ve+g.offsetTop}l.style.margin=`${xr}px 0`,l.style.minHeight=V+"px",l.style.maxHeight=_+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[h,i.trigger,i.valueNode,l,u,g,w,x,i.dir,r]);ln(()=>b(),[b]);const[S,N]=d.useState();ln(()=>{u&&N(window.getComputedStyle(u).zIndex)},[u]);const j=d.useCallback(k=>{k&&p.current===!0&&(b(),v==null||v(),p.current=!1)},[b,v]);return o.jsx(E_,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:j,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:o.jsx(Oe.div,{...s,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});SS.displayName=j_;var C_="SelectPopperPosition",$h=d.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=xr,...i}=e,a=sd(n);return o.jsx(e1,{...a,...i,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});$h.displayName=C_;var[E_,_p]=na(Lo,{}),Oh="SelectViewport",NS=d.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,i=eo(Oh,n),a=_p(Oh,n),l=Ge(t,i.onViewportChange),c=d.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(nd.Slot,{scope:n,children:o.jsx(Oe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:je(s.onScroll,u=>{const f=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&m){const y=Math.abs(c.current-f.scrollTop);if(y>0){const p=window.innerHeight-xr*2,g=parseFloat(m.style.minHeight),w=parseFloat(m.style.height),x=Math.max(g,w);if(x<p){const v=x+y,b=Math.min(p,v),S=v-b;m.style.height=b+"px",m.style.bottom==="0px"&&(f.scrollTop=S>0?S:0,m.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});NS.displayName=Oh;var kS="SelectGroup",[P_,T_]=na(kS),R_=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Vs();return o.jsx(P_,{scope:n,id:s,children:o.jsx(Oe.div,{role:"group","aria-labelledby":s,...r,ref:t})})});R_.displayName=kS;var jS="SelectLabel",CS=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=T_(jS,n);return o.jsx(Oe.div,{id:s.id,...r,ref:t})});CS.displayName=jS;var xu="SelectItem",[M_,ES]=na(xu),PS=d.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=e,l=Js(xu,n),c=eo(xu,n),u=l.value===r,[f,m]=d.useState(i??""),[h,y]=d.useState(!1),p=Ge(t,v=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,v,r,s)}),g=Vs(),w=d.useRef("touch"),x=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(M_,{scope:n,value:r,disabled:s,textId:g,isSelected:u,onItemTextChange:d.useCallback(v=>{m(b=>b||((v==null?void 0:v.textContent)??"").trim())},[]),children:o.jsx(nd.ItemSlot,{scope:n,value:r,disabled:s,textValue:f,children:o.jsx(Oe.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:p,onFocus:je(a.onFocus,()=>y(!0)),onBlur:je(a.onBlur,()=>y(!1)),onClick:je(a.onClick,()=>{w.current!=="mouse"&&x()}),onPointerUp:je(a.onPointerUp,()=>{w.current==="mouse"&&x()}),onPointerDown:je(a.onPointerDown,v=>{w.current=v.pointerType}),onPointerMove:je(a.onPointerMove,v=>{var b;w.current=v.pointerType,s?(b=c.onItemLeave)==null||b.call(c):w.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:je(a.onPointerLeave,v=>{var b;v.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:je(a.onKeyDown,v=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&v.key===" "||(g_.includes(v.key)&&x(),v.key===" "&&v.preventDefault())})})})})});PS.displayName=xu;var Ra="SelectItemText",TS=d.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...i}=e,a=Js(Ra,n),l=eo(Ra,n),c=ES(Ra,n),u=w_(Ra,n),[f,m]=d.useState(null),h=Ge(t,x=>m(x),c.onItemTextChange,x=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,x,c.value,c.disabled)}),y=f==null?void 0:f.textContent,p=d.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:y},c.value),[c.disabled,c.value,y]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=u;return ln(()=>(g(p),()=>w(p)),[g,w,p]),o.jsxs(o.Fragment,{children:[o.jsx(Oe.span,{id:c.textId,...i,ref:h}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Do.createPortal(i.children,a.valueNode):null]})});TS.displayName=Ra;var RS="SelectItemIndicator",MS=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return ES(RS,n).isSelected?o.jsx(Oe.span,{"aria-hidden":!0,...r,ref:t}):null});MS.displayName=RS;var Dh="SelectScrollUpButton",_S=d.forwardRef((e,t)=>{const n=eo(Dh,e.__scopeSelect),r=_p(Dh,e.__scopeSelect),[s,i]=d.useState(!1),a=Ge(t,r.onScrollButtonChange);return ln(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(LS,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});_S.displayName=Dh;var Bh="SelectScrollDownButton",AS=d.forwardRef((e,t)=>{const n=eo(Bh,e.__scopeSelect),r=_p(Bh,e.__scopeSelect),[s,i]=d.useState(!1),a=Ge(t,r.onScrollButtonChange);return ln(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<u;i(f)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(LS,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});AS.displayName=Bh;var LS=d.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,i=eo("SelectScrollButton",n),a=d.useRef(null),l=rd(n),c=d.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return d.useEffect(()=>()=>c(),[c]),ln(()=>{var f;const u=l().find(m=>m.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),o.jsx(Oe.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:je(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:je(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:je(s.onPointerLeave,()=>{c()})})}),__="SelectSeparator",IS=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return o.jsx(Oe.div,{"aria-hidden":!0,...r,ref:t})});IS.displayName=__;var Fh="SelectArrow",A_=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=sd(n),i=Js(Fh,n),a=eo(Fh,n);return i.open&&a.position==="popper"?o.jsx(t1,{...s,...r,ref:t}):null});A_.displayName=Fh;function $S(e){return e===""||e===void 0}var OS=d.forwardRef((e,t)=>{const{value:n,...r}=e,s=d.useRef(null),i=Ge(t,s),a=up(n);return d.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&f){const m=new Event("change",{bubbles:!0});f.call(l,n),l.dispatchEvent(m)}},[a,n]),o.jsx(wl,{asChild:!0,children:o.jsx("select",{...r,ref:i,defaultValue:n})})});OS.displayName="BubbleSelect";function DS(e){const t=Vt(e),n=d.useRef(""),r=d.useRef(0),s=d.useCallback(a=>{const l=n.current+a;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=d.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function BS(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let a=L_(e,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function L_(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var I_=fS,FS=mS,$_=gS,O_=vS,D_=xS,zS=yS,B_=NS,VS=CS,qS=PS,F_=TS,z_=MS,WS=_S,US=AS,HS=IS;const ul=I_,dl=$_,Vi=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(FS,{ref:r,className:Be("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,o.jsx(O_,{asChild:!0,children:o.jsx(uw,{className:"h-4 w-4 opacity-50"})})]}));Vi.displayName=FS.displayName;const KS=d.forwardRef(({className:e,...t},n)=>o.jsx(WS,{ref:n,className:Be("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(u2,{className:"h-4 w-4"})}));KS.displayName=WS.displayName;const GS=d.forwardRef(({className:e,...t},n)=>o.jsx(US,{ref:n,className:Be("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(uw,{className:"h-4 w-4"})}));GS.displayName=US.displayName;const qi=d.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>o.jsx(D_,{children:o.jsxs(zS,{ref:s,className:Be("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[o.jsx(KS,{}),o.jsx(B_,{className:Be("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),o.jsx(GS,{})]})}));qi.displayName=zS.displayName;const V_=d.forwardRef(({className:e,...t},n)=>o.jsx(VS,{ref:n,className:Be("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));V_.displayName=VS.displayName;const Qn=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(qS,{ref:r,className:Be("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(z_,{children:o.jsx(bl,{className:"h-4 w-4"})})}),o.jsx(F_,{children:t})]}));Qn.displayName=qS.displayName;const q_=d.forwardRef(({className:e,...t},n)=>o.jsx(HS,{ref:n,className:Be("-mx-1 my-1 h-px bg-muted",e),...t}));q_.displayName=HS.displayName;function hi(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}var W_=R0[" useInsertionEffect ".trim().toString()]||ln;function U_({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,i,a]=H_({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const f=d.useRef(e!==void 0);d.useEffect(()=>{const m=f.current;m!==l&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const u=d.useCallback(f=>{var m;if(l){const h=K_(f)?f(e):f;h!==e&&((m=a.current)==null||m.call(a,h))}else i(f)},[l,e,i,a]);return[c,u]}function H_({defaultProp:e,onChange:t}){const[n,r]=d.useState(e),s=d.useRef(n),i=d.useRef(t);return W_(()=>{i.current=t},[t]),d.useEffect(()=>{var a;s.current!==n&&((a=i.current)==null||a.call(i,n),s.current=n)},[n,s]),[n,r,i]}function K_(e){return typeof e=="function"}function zh(e){const t=G_(e),n=d.forwardRef((r,s)=>{const{children:i,...a}=r,l=d.Children.toArray(i),c=l.find(Y_);if(c){const u=c.props.children,f=l.map(m=>m===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:m);return o.jsx(t,{...a,ref:s,children:d.isValidElement(u)?d.cloneElement(u,void 0,f):null})}return o.jsx(t,{...a,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}function G_(e){const t=d.forwardRef((n,r)=>{const{children:s,...i}=n;if(d.isValidElement(s)){const a=Z_(s),l=X_(i,s.props);return s.type!==d.Fragment&&(l.ref=r?Wm(r,a):a),d.cloneElement(s,l)}return d.Children.count(s)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Q_=Symbol("radix.slottable");function Y_(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Q_}function X_(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function Z_(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var J_=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],jl=J_.reduce((e,t)=>{const n=zh(`Primitive.${t}`),r=d.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function e4(e){const t=e+"CollectionProvider",[n,r]=Un(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:w,children:x}=g,v=Rn.useRef(null),b=Rn.useRef(new Map).current;return o.jsx(s,{scope:w,itemMap:b,collectionRef:v,children:x})};a.displayName=t;const l=e+"CollectionSlot",c=zh(l),u=Rn.forwardRef((g,w)=>{const{scope:x,children:v}=g,b=i(l,x),S=Ge(w,b.collectionRef);return o.jsx(c,{ref:S,children:v})});u.displayName=l;const f=e+"CollectionItemSlot",m="data-radix-collection-item",h=zh(f),y=Rn.forwardRef((g,w)=>{const{scope:x,children:v,...b}=g,S=Rn.useRef(null),N=Ge(w,S),j=i(f,x);return Rn.useEffect(()=>(j.itemMap.set(S,{ref:S,...b}),()=>void j.itemMap.delete(S))),o.jsx(h,{[m]:"",ref:N,children:v})});y.displayName=f;function p(g){const w=i(e+"CollectionConsumer",g);return Rn.useCallback(()=>{const v=w.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${m}]`));return Array.from(w.itemMap.values()).sort((j,k)=>b.indexOf(j.ref.current)-b.indexOf(k.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:u,ItemSlot:y},p,r]}var QS=["PageUp","PageDown"],YS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],XS={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ra="Slider",[Vh,t4,n4]=e4(ra),[ZS,d3]=Un(ra,[n4]),[r4,od]=ZS(ra),JS=d.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:i=1,orientation:a="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:f,onValueChange:m=()=>{},onValueCommit:h=()=>{},inverted:y=!1,form:p,...g}=e,w=d.useRef(new Set),x=d.useRef(0),b=a==="horizontal"?s4:o4,[S=[],N]=U_({prop:f,defaultProp:u,onChange:D=>{var q;(q=[...w.current][x.current])==null||q.focus(),m(D)}}),j=d.useRef(S);function k(D){const _=u4(S,D);P(D,_)}function C(D){P(D,x.current)}function R(){const D=j.current[x.current];S[x.current]!==D&&h(S)}function P(D,_,{commit:q}={commit:!1}){const M=m4(i),z=p4(Math.round((D-r)/i)*i+r,M),Q=cl(z,[r,s]);N((Y=[])=>{const T=l4(Y,Q,_);if(h4(T,c*i)){x.current=T.indexOf(Q);const $=String(T)!==String(Y);return $&&q&&h(T),$?T:Y}else return Y})}return o.jsx(r4,{scope:e.__scopeSlider,name:n,disabled:l,min:r,max:s,valueIndexToChangeRef:x,thumbs:w.current,values:S,orientation:a,form:p,children:o.jsx(Vh.Provider,{scope:e.__scopeSlider,children:o.jsx(Vh.Slot,{scope:e.__scopeSlider,children:o.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:t,onPointerDown:hi(g.onPointerDown,()=>{l||(j.current=S)}),min:r,max:s,inverted:y,onSlideStart:l?void 0:k,onSlideMove:l?void 0:C,onSlideEnd:l?void 0:R,onHomeKeyDown:()=>!l&&P(r,0,{commit:!0}),onEndKeyDown:()=>!l&&P(s,S.length-1,{commit:!0}),onStepKeyDown:({event:D,direction:_})=>{if(!l){const z=QS.includes(D.key)||D.shiftKey&&YS.includes(D.key)?10:1,Q=x.current,Y=S[Q],T=i*z*_;P(Y+T,Q,{commit:!0})}}})})})})});JS.displayName=ra;var[eN,tN]=ZS(ra,{startEdge:"left",endEdge:"right",size:"width",direction:1}),s4=d.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:i,onSlideStart:a,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...f}=e,[m,h]=d.useState(null),y=Ge(t,b=>h(b)),p=d.useRef(void 0),g=Nl(s),w=g==="ltr",x=w&&!i||!w&&i;function v(b){const S=p.current||m.getBoundingClientRect(),N=[0,S.width],k=Ap(N,x?[n,r]:[r,n]);return p.current=S,k(b-S.left)}return o.jsx(eN,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:o.jsx(nN,{dir:g,"data-orientation":"horizontal",...f,ref:y,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const S=v(b.clientX);a==null||a(S)},onSlideMove:b=>{const S=v(b.clientX);l==null||l(S)},onSlideEnd:()=>{p.current=void 0,c==null||c()},onStepKeyDown:b=>{const N=XS[x?"from-left":"from-right"].includes(b.key);u==null||u({event:b,direction:N?-1:1})}})})}),o4=d.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:i,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=e,f=d.useRef(null),m=Ge(t,f),h=d.useRef(void 0),y=!s;function p(g){const w=h.current||f.current.getBoundingClientRect(),x=[0,w.height],b=Ap(x,y?[r,n]:[n,r]);return h.current=w,b(g-w.top)}return o.jsx(eN,{scope:e.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:o.jsx(nN,{"data-orientation":"vertical",...u,ref:m,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const w=p(g.clientY);i==null||i(w)},onSlideMove:g=>{const w=p(g.clientY);a==null||a(w)},onSlideEnd:()=>{h.current=void 0,l==null||l()},onStepKeyDown:g=>{const x=XS[y?"from-bottom":"from-top"].includes(g.key);c==null||c({event:g,direction:x?-1:1})}})})}),nN=d.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:a,onEndKeyDown:l,onStepKeyDown:c,...u}=e,f=od(ra,n);return o.jsx(jl.span,{...u,ref:t,onKeyDown:hi(e.onKeyDown,m=>{m.key==="Home"?(a(m),m.preventDefault()):m.key==="End"?(l(m),m.preventDefault()):QS.concat(YS).includes(m.key)&&(c(m),m.preventDefault())}),onPointerDown:hi(e.onPointerDown,m=>{const h=m.target;h.setPointerCapture(m.pointerId),m.preventDefault(),f.thumbs.has(h)?h.focus():r(m)}),onPointerMove:hi(e.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&s(m)}),onPointerUp:hi(e.onPointerUp,m=>{const h=m.target;h.hasPointerCapture(m.pointerId)&&(h.releasePointerCapture(m.pointerId),i(m))})})}),rN="SliderTrack",sN=d.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=od(rN,n);return o.jsx(jl.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});sN.displayName=rN;var qh="SliderRange",oN=d.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=od(qh,n),i=tN(qh,n),a=d.useRef(null),l=Ge(t,a),c=s.values.length,u=s.values.map(h=>lN(h,s.min,s.max)),f=c>1?Math.min(...u):0,m=100-Math.max(...u);return o.jsx(jl.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:l,style:{...e.style,[i.startEdge]:f+"%",[i.endEdge]:m+"%"}})});oN.displayName=qh;var Wh="SliderThumb",iN=d.forwardRef((e,t)=>{const n=t4(e.__scopeSlider),[r,s]=d.useState(null),i=Ge(t,l=>s(l)),a=d.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return o.jsx(i4,{...e,ref:i,index:a})}),i4=d.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...i}=e,a=od(Wh,n),l=tN(Wh,n),[c,u]=d.useState(null),f=Ge(t,v=>u(v)),m=c?a.form||!!c.closest("form"):!0,h=op(c),y=a.values[r],p=y===void 0?0:lN(y,a.min,a.max),g=c4(r,a.values.length),w=h==null?void 0:h[l.size],x=w?d4(w,p,l.direction):0;return d.useEffect(()=>{if(c)return a.thumbs.add(c),()=>{a.thumbs.delete(c)}},[c,a.thumbs]),o.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${p}% + ${x}px)`},children:[o.jsx(Vh.ItemSlot,{scope:e.__scopeSlider,children:o.jsx(jl.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":a.min,"aria-valuenow":y,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...i,ref:f,style:y===void 0?{display:"none"}:e.style,onFocus:hi(e.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),m&&o.jsx(aN,{name:s??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:y},r)]})});iN.displayName=Wh;var a4="RadioBubbleInput",aN=d.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const s=d.useRef(null),i=Ge(s,r),a=up(t);return d.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==t&&f){const m=new Event("input",{bubbles:!0});f.call(l,t),l.dispatchEvent(m)}},[a,t]),o.jsx(jl.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});aN.displayName=a4;function l4(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,i)=>s-i)}function lN(e,t,n){const i=100/(n-t)*(e-t);return cl(i,[0,100])}function c4(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function u4(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function d4(e,t,n){const r=e/2,i=Ap([0,50],[0,r]);return(r-i(t)*n)*n}function f4(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function h4(e,t){if(t>0){const n=f4(e);return Math.min(...n)>=t}return!0}function Ap(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function m4(e){return(String(e).split(".")[1]||"").length}function p4(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var cN=JS,g4=sN,v4=oN,x4=iN;const uN=d.forwardRef(({className:e,...t},n)=>o.jsxs(cN,{ref:n,className:Be("relative flex w-full touch-none select-none items-center",e),...t,children:[o.jsx(g4,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-muted",children:o.jsx(v4,{className:"absolute h-full bg-primary"})}),o.jsx(x4,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));uN.displayName=cN.displayName;function y4(e,t){return d.useReducer((n,r)=>t[n][r]??n,e)}var Lp="ScrollArea",[dN,f3]=Un(Lp),[w4,pr]=dN(Lp),fN=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...a}=e,[l,c]=d.useState(null),[u,f]=d.useState(null),[m,h]=d.useState(null),[y,p]=d.useState(null),[g,w]=d.useState(null),[x,v]=d.useState(0),[b,S]=d.useState(0),[N,j]=d.useState(!1),[k,C]=d.useState(!1),R=Ge(t,D=>c(D)),P=Nl(s);return o.jsx(w4,{scope:n,type:r,dir:P,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:f,content:m,onContentChange:h,scrollbarX:y,onScrollbarXChange:p,scrollbarXEnabled:N,onScrollbarXEnabledChange:j,scrollbarY:g,onScrollbarYChange:w,scrollbarYEnabled:k,onScrollbarYEnabledChange:C,onCornerWidthChange:v,onCornerHeightChange:S,children:o.jsx(Oe.div,{dir:P,...a,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});fN.displayName=Lp;var hN="ScrollAreaViewport",mN=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=e,a=pr(hN,n),l=d.useRef(null),c=Ge(t,l,a.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(Oe.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:o.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});mN.displayName=hN;var Xr="ScrollAreaScrollbar",Ip=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=pr(Xr,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,l=e.orientation==="horizontal";return d.useEffect(()=>(l?i(!0):a(!0),()=>{l?i(!1):a(!1)}),[l,i,a]),s.type==="hover"?o.jsx(b4,{...r,ref:t,forceMount:n}):s.type==="scroll"?o.jsx(S4,{...r,ref:t,forceMount:n}):s.type==="auto"?o.jsx(pN,{...r,ref:t,forceMount:n}):s.type==="always"?o.jsx($p,{...r,ref:t}):null});Ip.displayName=Xr;var b4=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=pr(Xr,e.__scopeScrollArea),[i,a]=d.useState(!1);return d.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),a(!0)},f=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx(Ir,{present:n||i,children:o.jsx(pN,{"data-state":i?"visible":"hidden",...r,ref:t})})}),S4=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=pr(Xr,e.__scopeScrollArea),i=e.orientation==="horizontal",a=ad(()=>c("SCROLL_END"),100),[l,c]=y4("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),d.useEffect(()=>{const u=s.viewport,f=i?"scrollLeft":"scrollTop";if(u){let m=u[f];const h=()=>{const y=u[f];m!==y&&(c("SCROLL"),a()),m=y};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[s.viewport,i,c,a]),o.jsx(Ir,{present:n||l!=="hidden",children:o.jsx($p,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:je(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:je(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),pN=d.forwardRef((e,t)=>{const n=pr(Xr,e.__scopeScrollArea),{forceMount:r,...s}=e,[i,a]=d.useState(!1),l=e.orientation==="horizontal",c=ad(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?u:f)}},10);return Wi(n.viewport,c),Wi(n.content,c),o.jsx(Ir,{present:r||i,children:o.jsx($p,{"data-state":i?"visible":"hidden",...s,ref:t})})}),$p=d.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=pr(Xr,e.__scopeScrollArea),i=d.useRef(null),a=d.useRef(0),[l,c]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=wN(l.viewport,l.content),f={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:h=>a.current=h};function m(h,y){return P4(h,a.current,l,y)}return n==="horizontal"?o.jsx(N4,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const h=s.viewport.scrollLeft,y=u0(h,l,s.dir);i.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=m(h,s.dir))}}):n==="vertical"?o.jsx(k4,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const h=s.viewport.scrollTop,y=u0(h,l);i.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=m(h))}}):null}),N4=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=pr(Xr,e.__scopeScrollArea),[a,l]=d.useState(),c=d.useRef(null),u=Ge(t,c,i.onScrollbarXChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(vN,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":id(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,m)=>{if(i.viewport){const h=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),SN(h,m)&&f.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:wu(a.paddingLeft),paddingEnd:wu(a.paddingRight)}})}})}),k4=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=pr(Xr,e.__scopeScrollArea),[a,l]=d.useState(),c=d.useRef(null),u=Ge(t,c,i.onScrollbarYChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(vN,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":id(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,m)=>{if(i.viewport){const h=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),SN(h,m)&&f.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:wu(a.paddingTop),paddingEnd:wu(a.paddingBottom)}})}})}),[j4,gN]=dN(Xr),vN=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:f,onResize:m,...h}=e,y=pr(Xr,n),[p,g]=d.useState(null),w=Ge(t,R=>g(R)),x=d.useRef(null),v=d.useRef(""),b=y.viewport,S=r.content-r.viewport,N=Vt(f),j=Vt(c),k=ad(m,10);function C(R){if(x.current){const P=R.clientX-x.current.left,D=R.clientY-x.current.top;u({x:P,y:D})}}return d.useEffect(()=>{const R=P=>{const D=P.target;(p==null?void 0:p.contains(D))&&N(P,S)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[b,p,S,N]),d.useEffect(j,[r,j]),Wi(p,k),Wi(y.content,k),o.jsx(j4,{scope:n,scrollbar:p,hasThumb:s,onThumbChange:Vt(i),onThumbPointerUp:Vt(a),onThumbPositionChange:j,onThumbPointerDown:Vt(l),children:o.jsx(Oe.div,{...h,ref:w,style:{position:"absolute",...h.style},onPointerDown:je(e.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),x.current=p.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),C(R))}),onPointerMove:je(e.onPointerMove,C),onPointerUp:je(e.onPointerUp,R=>{const P=R.target;P.hasPointerCapture(R.pointerId)&&P.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=v.current,y.viewport&&(y.viewport.style.scrollBehavior=""),x.current=null})})})}),yu="ScrollAreaThumb",xN=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=gN(yu,e.__scopeScrollArea);return o.jsx(Ir,{present:n||s.hasThumb,children:o.jsx(C4,{ref:t,...r})})}),C4=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,i=pr(yu,n),a=gN(yu,n),{onThumbPositionChange:l}=a,c=Ge(t,m=>a.onThumbChange(m)),u=d.useRef(void 0),f=ad(()=>{u.current&&(u.current(),u.current=void 0)},100);return d.useEffect(()=>{const m=i.viewport;if(m){const h=()=>{if(f(),!u.current){const y=T4(m,l);u.current=y,l()}};return l(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[i.viewport,f,l]),o.jsx(Oe.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:je(e.onPointerDownCapture,m=>{const y=m.target.getBoundingClientRect(),p=m.clientX-y.left,g=m.clientY-y.top;a.onThumbPointerDown({x:p,y:g})}),onPointerUp:je(e.onPointerUp,a.onThumbPointerUp)})});xN.displayName=yu;var Op="ScrollAreaCorner",yN=d.forwardRef((e,t)=>{const n=pr(Op,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?o.jsx(E4,{...e,ref:t}):null});yN.displayName=Op;var E4=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=pr(Op,n),[i,a]=d.useState(0),[l,c]=d.useState(0),u=!!(i&&l);return Wi(s.scrollbarX,()=>{var m;const f=((m=s.scrollbarX)==null?void 0:m.offsetHeight)||0;s.onCornerHeightChange(f),c(f)}),Wi(s.scrollbarY,()=>{var m;const f=((m=s.scrollbarY)==null?void 0:m.offsetWidth)||0;s.onCornerWidthChange(f),a(f)}),u?o.jsx(Oe.div,{...r,ref:t,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function wu(e){return e?parseInt(e,10):0}function wN(e,t){const n=e/t;return isNaN(n)?0:n}function id(e){const t=wN(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function P4(e,t,n,r="ltr"){const s=id(n),i=s/2,a=t||i,l=s-a,c=n.scrollbar.paddingStart+a,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,m=r==="ltr"?[0,f]:[f*-1,0];return bN([c,u],m)(e)}function u0(e,t,n="ltr"){const r=id(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,a=t.content-t.viewport,l=i-r,c=n==="ltr"?[0,a]:[a*-1,0],u=cl(e,c);return bN([0,a],[0,l])(u)}function bN(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function SN(e,t){return e>0&&e<t}var T4=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const i={left:e.scrollLeft,top:e.scrollTop},a=n.left!==i.left,l=n.top!==i.top;(a||l)&&t(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function ad(e,t){const n=Vt(e),r=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(r.current),[]),d.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Wi(e,t){const n=Vt(t);ln(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var NN=fN,R4=mN,M4=yN;const Dp=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(NN,{ref:r,className:Be("relative overflow-hidden",e),...n,children:[o.jsx(R4,{className:"h-full w-full rounded-[inherit]",children:t}),o.jsx(kN,{}),o.jsx(M4,{})]}));Dp.displayName=NN.displayName;const kN=d.forwardRef(({className:e,orientation:t="vertical",...n},r)=>o.jsx(Ip,{ref:r,orientation:t,className:Be("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:o.jsx(xN,{className:"relative flex-1 rounded-full bg-border"})}));kN.displayName=Ip.displayName;const _4="/assets/title_cropped-BD2iTFVW.webp",pf={wK:"/pieces/wK.svg",wQ:"/pieces/wQ.svg",wR:"/pieces/wR.svg",wB:"/pieces/wB.svg",wN:"/pieces/wN.svg",wP:"/pieces/wP.svg",bK:"/pieces/bK.svg",bQ:"/pieces/bQ.svg",bR:"/pieces/bR.svg",bB:"/pieces/bB.svg",bN:"/pieces/bN.svg",bP:"/pieces/bP.svg"},A4=["wK","wQ","wR","wB","wN","wP","bK","bQ","bR","bB","bN","bP"],L4={K:["king"],Q:["queen"],R:["rook","castle","rock","brook"],B:["bishop","bish","bishup"],N:["knight","night","horse","nite"],P:["pawn","pond"]},I4={ay:"a",aye:"a",eh:"a",bee:"b",be:"b",cee:"c",see:"c",sea:"c",dee:"d",eee:"e",ee:"e",ef:"f",eff:"f",gee:"g",jee:"g",aitch:"h",ach:"h",alpha:"a",alfa:"a",apple:"a",able:"a",bravo:"b",boy:"b",baker:"b",charlie:"c",cat:"c",delta:"d",dog:"d",david:"d",echo:"e",easy:"e",edward:"e",foxtrot:"f",fox:"f",frank:"f",golf:"g",george:"g",hotel:"h",henry:"h"};function $4(e){let t=e.toLowerCase();return t=t.replace(/\bbefore\b/g,"b 4"),t=t.replace(/\bsci\s*fi\b/g,"c 5"),t=t.replace(/\bscifi\b/g,"c 5"),t=t.replace(/\bquincy\b/g,"queen c"),t=t.replace(/\bhe\s+([1-8])\b/g,"e $1"),t=t.replace(/\bhe\s+(one|two|three|four|five|six|seven|eight|for)\b/gi,"e $1"),t=t.replace(/\bthe\s+([1-8])\b/g,"d $1"),t=t.replace(/\bthe\s+(one|two|three|four|five|six|seven|eight)\b/gi,"d $1"),t=t.replace(/\b([a-h])\s+for\b/g,"$1 4"),t}const O4={one:"1",won:"1",first:"1",two:"2",too:"2",second:"2",three:"3",free:"3",third:"3",tree:"3",four:"4",fore:"4",forth:"4",fourth:"4",for:"4",five:"5",fifth:"5",six:"6",sixth:"6",sicks:"6",seven:"7",seventh:"7",eight:"8",ate:"8",eighth:"8"};function D4(e){const t=Array(8).fill(null).map(()=>Array(8).fill(null)),[n]=e.split(" "),r=n.split("/"),s={K:"wK",Q:"wQ",R:"wR",B:"wB",N:"wN",P:"wP",k:"bK",q:"bQ",r:"bR",b:"bB",n:"bN",p:"bP"};return r.forEach((i,a)=>{let l=0;for(const c of i)/\d/.test(c)?l+=parseInt(c):s[c]&&(t[a][l]=s[c],l++)}),t}function B4(e,t){let n=0,r=0;for(let s=0;s<8;s++)for(let i=0;i<8;i++){const a=t[s][i],l=e[s][i];a!==null&&(r++,a===l&&n++)}return r===0?100:Math.round(n/r*100)}function d0(e){const n=$4(e).toLowerCase().trim();let r=null,s=null;for(const[i,a]of Object.entries(I4))if(n.includes(i)){r=a;break}if(!r){const i=n.match(/\b([a-h])\b/);i&&(r=i[1])}for(const[i,a]of Object.entries(O4))if(n.includes(i)){s=a;break}if(!s){const i=n.match(/[1-8]/);i&&(s=i[0])}if(!r||!s){const i=n.match(/([a-h])\s*([1-8])/);if(i)return{file:i[1],rank:i[2]}}return r&&s?{file:r,rank:s}:null}function F4(e){const t=e.toLowerCase();for(const[n,r]of Object.entries(L4))for(const s of r)if(t.includes(s))return n;return null}function f0(e){const t=e.toLowerCase();return t.includes("white")?"w":t.includes("black")?"b":null}function z4({actualFen:e,playerColor:t,onComplete:n,onSkip:r,onContinue:s,onViewReport:i}){const[a,l]=d.useState("ready"),[c,u]=d.useState(Array(8).fill(null).map(()=>Array(8).fill(null))),[f,m]=d.useState(null),[h,y]=d.useState(!1),[p,g]=d.useState(null),[w,x]=d.useState(100),[v,b]=d.useState(!1),[S,N]=d.useState(null),[j,k]=d.useState(""),[C,R]=d.useState(!0),[P,D]=d.useState(null),[_,q]=d.useState("w"),M=d.useRef("w"),[z,Q]=d.useState(new Set),Y=d.useRef(0),T=d.useRef(0),$=d.useRef(null),V=d.useRef(!0),G=D4(e);d.useEffect(()=>{M.current=_},[_]);const de=d.useCallback((F,H)=>{const he=F.charCodeAt(0)-97;return{row:8-parseInt(H),col:he}},[]),ne=d.useCallback((F,H,he,ie)=>{u($e=>{const ke=$e.map(Te=>[...Te]);return ke[H][he]=F,ke});const ae=F.charAt(0);if(q(ae),M.current=ae,ie){Y.current++;const $e=`${H}-${he}`;Q(ke=>new Set(ke).add($e)),setTimeout(()=>{Q(ke=>{const Te=new Set(ke);return Te.delete($e),Te})},300)}else T.current++},[]),ve=d.useCallback((F,H,he)=>{u(ie=>{const ae=ie.map($e=>[...$e]);return ae[F][H]&&(he?Y.current++:T.current++,ae[F][H]=null),ae})},[]),fe=d.useCallback(F=>{const H=F.toLowerCase().trim();if(k(F),H.includes("clear all")||H.includes("reset board")||H.includes("reset")){u(Array(8).fill(null).map(()=>Array(8).fill(null))),N(null);return}if(H.includes("done")||H.includes("submit")||H.includes("check position")){$.current&&$.current();return}if(H==="white"||H==="switch to white"||H==="white pieces"){q("w"),M.current="w";return}if(H==="black"||H==="switch to black"||H==="black pieces"){q("b"),M.current="b";return}if(S){const $e=f0(H);if($e){const ke=$e+S.pieceType,{row:Te,col:st}=de(S.square.file,S.square.rank);ne(ke,Te,st,!0),N(null);return}}if(H.includes("clear")||H.includes("remove")||H.includes("delete")){const $e=d0(H);if($e){const{row:ke,col:Te}=de($e.file,$e.rank);ve(ke,Te,!0)}return}const he=F4(H),ie=d0(H),ae=f0(H);if(ae&&(q(ae),M.current=ae),he&&ie){const ke=(ae||M.current)+he,{row:Te,col:st}=de(ie.file,ie.rank);ne(ke,Te,st,!0),N(null)}},[S,de,ne,ve]),A=d.useRef(fe);d.useEffect(()=>{A.current=fe},[fe]);const B=d.useCallback(async()=>{if(h)return;if(await nb(),!await rb()){console.warn("[Reconstruction] Microphone permission not granted"),await kp()==="prompt-with-rationale"&&alert("Voice control requires microphone access. Please enable it in your device Settings > Apps > Blindfold Chess > Permissions.");return}await ft.start({mode:"placement",onTranscript:he=>{A.current(he)},onListeningChange:he=>{b(he)}})&&console.log("[Reconstruction] Voice started via voiceMaster")},[h]),W=d.useCallback(()=>{ft.stop(),b(!1),N(null)},[]);d.useEffect(()=>(V.current=!0,()=>{V.current=!1,ft.stop(),Fi.clearProtectedLane()}),[]),d.useEffect(()=>{if(a==="ready"){const F=setInterval(()=>{R(H=>!H)},800);return()=>clearInterval(F)}},[a]);const U=d.useRef(!1);d.useEffect(()=>{if(a==="ready"){U.current=!1;return}if(a==="playing"&&!h&&!U.current){U.current=!0;const F=setTimeout(()=>{B()},500);return()=>clearTimeout(F)}},[a,h,B]);const re=d.useCallback((F,H)=>{h||(f?ne(f,F,H,!1):c[F][H]&&ve(F,H,!1))},[f,c,h,ne,ve]),se=d.useCallback((F,H)=>{h||(F.dataTransfer.setData("piece",H),F.dataTransfer.effectAllowed="copy",D(H))},[h]),ye=d.useCallback(()=>{D(null)},[]),Fe=d.useCallback(F=>{F.preventDefault(),F.dataTransfer.dropEffect="copy"},[]),ze=d.useCallback((F,H,he)=>{if(F.preventDefault(),h)return;const ie=F.dataTransfer.getData("piece");ie&&ne(ie,H,he,!1),D(null)},[h,ne]),Ae=d.useCallback((F,H)=>{h||m(H)},[h]),oe=()=>{u(Array(8).fill(null).map(()=>Array(8).fill(null))),m(null),Y.current=0,T.current=0},Ne=d.useCallback(()=>{const F=B4(c,G);g(F);const H=Y.current+T.current,he=H>0?Math.round(Y.current/H*100):0;x(he),y(!0),W(),n(F,he,Y.current,T.current)},[c,G,W,n]);d.useEffect(()=>{$.current=Ne},[Ne]);const Ce=t==="white"?["a","b","c","d","e","f","g","h"]:["h","g","f","e","d","c","b","a"],Re=t==="white"?["8","7","6","5","4","3","2","1"]:["1","2","3","4","5","6","7","8"],Me=(S==null?void 0:S.type)==="color"?"animate-pulse ring-4 ring-amber-400":"";return a==="ready"?o.jsxs(Ze,{className:"w-full max-w-md mx-auto",children:[o.jsx(Et,{className:"pb-2",children:o.jsxs(Pt,{className:"text-lg flex items-center justify-between",children:[o.jsx("span",{children:"Board Reconstruction"}),o.jsx(X,{variant:"ghost",size:"sm",onClick:r,"data-testid":"button-skip-reconstruction-ready",children:"Skip"})]})}),o.jsxs(dt,{className:"flex flex-col items-center justify-center py-12 gap-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx(qt,{className:`h-16 w-16 text-blue-500 transition-transform duration-300 ${C?"scale-110":"scale-100"}`}),o.jsx("div",{className:`absolute -top-1 -right-1 h-4 w-4 rounded-full ${C?"bg-green-500":"bg-green-400"} transition-colors duration-300`})]}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Ready to Reconstruct?"}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"Rebuild the position from memory using voice commands"}),o.jsx("p",{className:"text-muted-foreground text-xs",children:'Say pieces like "White Knight F3" or "Black Queen D8"'})]}),o.jsxs(X,{size:"lg",onClick:()=>{Fi.register("reconstruction"),l("playing")},className:"mt-4","data-testid":"button-start-reconstruction",children:[o.jsx(qt,{className:"h-5 w-5 mr-2"}),"Start"]})]})]}):o.jsxs(Ze,{className:"w-full max-w-md mx-auto",children:[o.jsx(Et,{className:"pb-2",children:o.jsxs(Pt,{className:"text-lg flex items-center justify-between",children:[o.jsx("span",{children:"Reconstruct the Board"}),o.jsxs("div",{className:"flex items-center gap-2",children:[p!==null&&o.jsxs(lt,{variant:p>=80?"default":p>=50?"secondary":"destructive",children:[p,"%"]}),h&&w>0&&o.jsxs(lt,{variant:"outline",className:"text-amber-600 border-amber-400",children:["Voice: ",w,"%"]})]})]})}),o.jsxs(dt,{className:"space-y-3",children:[!h&&o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"flex-1",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:S?`Say "White" or "Black" for ${S.pieceType==="K"?"King":S.pieceType==="Q"?"Queen":S.pieceType==="R"?"Rook":S.pieceType==="B"?"Bishop":S.pieceType==="N"?"Knight":"Pawn"} on ${S.square.file}${S.square.rank}`:v?`"${j||"Knight f3"}"`:"Drag pieces or use voice commands"})}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>q(F=>F==="w"?"b":"w"),className:`w-7 h-7 rounded flex items-center justify-center transition-all border-2 ${_==="w"?"bg-white border-stone-400":"bg-stone-800 border-stone-600"}`,title:`Placing ${_==="w"?"White":"Black"} pieces - tap to switch`,"data-testid":"button-sticky-color",children:o.jsx("span",{className:`text-xs font-bold ${_==="w"?"text-stone-800":"text-white"}`,children:_==="w"?"W":"B"})}),o.jsx(X,{size:"icon",variant:v?"destructive":"outline",onClick:v?W:B,className:v?"animate-pulse":"","data-testid":"button-reconstruction-mic",children:v?o.jsx(qt,{className:"h-4 w-4"}):o.jsx(Hr,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-1 justify-center p-2 bg-muted rounded-md",style:{touchAction:"none"},children:[A4.map(F=>o.jsx("div",{draggable:!h,onDragStart:H=>se(H,F),onDragEnd:ye,onTouchStart:H=>Ae(H,F),onClick:()=>!h&&m(f===F?null:F),className:`w-8 h-8 rounded transition-all cursor-grab active:cursor-grabbing ${f===F?"ring-2 ring-amber-400 bg-amber-100":P===F?"opacity-50":"hover:bg-muted-foreground/20"} ${h?"opacity-50 cursor-not-allowed":""}`,"data-testid":`piece-palette-${F}`,children:o.jsx("img",{src:pf[F],alt:F,className:"w-full h-full pointer-events-none",draggable:!1})},F)),o.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center bg-red-100 hover:bg-red-200 cursor-pointer",onClick:()=>m(null),"data-testid":"piece-palette-eraser",children:o.jsx(ww,{className:"h-4 w-4 text-red-600"})})]}),o.jsx("div",{className:`aspect-square w-full max-w-xs mx-auto rounded ${Me}`,children:o.jsx("div",{className:"grid grid-cols-8 grid-rows-8 w-full h-full border border-stone-400",style:{touchAction:"none"},children:Array.from({length:64}).map((F,H)=>{const he=Math.floor(H/8),ie=H%8,ae=t==="white"?he:7-he,$e=t==="white"?ie:7-ie,ke=(he+ie)%2===0,Te=c[ae][$e],st=G[ae][$e],kt=`${ae}-${$e}`,Je=z.has(kt);let Wt=ke?"bg-amber-100":"bg-amber-700";const Qt=Te===st,jn=!Te&&st;return h&&(Qt?Te!==null&&(Wt=ke?"bg-green-200":"bg-green-600"):Wt=ke?"bg-red-200":"bg-red-500"),o.jsxs("div",{onClick:()=>re(ae,$e),onDragOver:Fe,onDrop:hn=>ze(hn,ae,$e),className:`relative flex items-center justify-center cursor-pointer ${Wt} ${!h&&(f||P)?"hover:ring-2 hover:ring-amber-400 hover:ring-inset":""}`,style:{touchAction:"none"},"data-testid":`reconstruction-square-${Ce[ie]}${Re[he]}`,children:[h&&st&&!Qt&&o.jsx("img",{src:pf[st],alt:`actual-${st}`,className:"absolute w-[85%] h-[85%] opacity-30 pointer-events-none",draggable:!1}),Te&&o.jsx("img",{src:pf[Te],alt:Te,className:`w-[85%] h-[85%] pointer-events-none z-10 transition-transform ${Je?"animate-[voicePop_0.2s_ease-out]":""} ${h&&!Qt?"animate-[shake_0.5s_ease-in-out]":""}`,draggable:!1}),h&&jn&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center animate-[fadeSlideIn_0.6s_ease-out_forwards]",style:{animationDelay:`${(ae*8+$e)*30}ms`},children:o.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"})}),ie===0&&o.jsx("span",{className:"absolute top-0.5 left-0.5 text-[8px] font-semibold select-none opacity-70",children:Re[he]}),he===7&&o.jsx("span",{className:"absolute bottom-0.5 right-0.5 text-[8px] font-semibold select-none opacity-70",children:Ce[ie]})]},H)})})}),o.jsx("div",{className:"flex gap-2",children:h?o.jsxs("div",{className:"flex gap-2 w-full",children:[i&&o.jsxs(X,{variant:"outline",size:"sm",onClick:i,className:"flex-1","data-testid":"button-reconstruction-view-report",children:[o.jsx(cw,{className:"mr-1 h-4 w-4"}),"View Report"]}),o.jsx(X,{size:"sm",onClick:s||r,className:"flex-1 bg-amber-400 hover:bg-amber-500 text-stone-900","data-testid":"button-reconstruction-continue",children:"Main Menu"})]}):o.jsxs(o.Fragment,{children:[o.jsxs(X,{variant:"outline",size:"sm",onClick:oe,className:"flex-1","data-testid":"button-reconstruction-reset",children:[o.jsx(vw,{className:"mr-1 h-4 w-4"}),"Reset"]}),o.jsx(X,{variant:"outline",size:"sm",onClick:()=>{W(),r()},className:"flex-1","data-testid":"button-reconstruction-skip",children:"Skip"}),o.jsxs(X,{size:"sm",onClick:Ne,className:"flex-1 bg-amber-400 hover:bg-amber-500 text-stone-900","data-testid":"button-reconstruction-submit",children:[o.jsx(j2,{className:"mr-1 h-4 w-4"}),"Check"]})]})}),h&&o.jsx("div",{className:"text-center text-sm",children:p!==null&&p>=80?o.jsxs("p",{className:"text-green-600 flex items-center justify-center gap-1",children:[o.jsx(bl,{className:"h-4 w-4"})," Excellent memory!"]}):p!==null&&p>=50?o.jsx("p",{className:"text-amber-600",children:"Good effort! Keep practicing."}):o.jsxs("p",{className:"text-red-600 flex items-center justify-center gap-1",children:[o.jsx(Po,{className:"h-4 w-4"})," Keep training your visualization!"]})})]})]})}function V4({responseTimes:e,onJumpToMove:t}){if(e.length<3)return o.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"Not enough moves to display stamina graph"});const n=Math.max(...e,1),r=e.length,i=Math.max(100,r*(4+2)),a=(y,p)=>{const g=y/p;return g<.15?"bg-green-500":g<.6?"bg-amber-400":"bg-red-400"},l=Math.floor(r*.15),c=Math.floor(r*.6),u={opening:e.slice(0,l),middlegame:e.slice(l,c),endgame:e.slice(c)},f=u.opening.length>0?u.opening.reduce((y,p)=>y+p,0)/u.opening.length:0,m=u.endgame.length>0?u.endgame.reduce((y,p)=>y+p,0)/u.endgame.length:0,h=f>0?Math.round((m-f)/f*100):0;return o.jsxs("div",{className:"space-y-3","data-testid":"mental-stamina-graph",children:[o.jsx("div",{className:"w-full overflow-x-auto pb-1",children:o.jsxs("div",{className:"h-24 flex items-end bg-muted/30 rounded-md p-2 relative",style:{width:`${i}px`,minWidth:"100%"},children:[e.map((y,p)=>{const g=Math.max(4,y/n*100),w=a(p,r);return o.jsx("div",{className:`${w} rounded-t-sm flex-1 cursor-pointer hover:opacity-80 active:opacity-60`,style:{height:`${g}%`,minWidth:"4px",marginLeft:"1px",marginRight:"1px"},onClick:()=>t==null?void 0:t(p),title:`Move ${p+1}: ${ui(y)}`,"data-testid":`stamina-bar-${p}`},p)}),o.jsx("div",{className:"absolute bottom-0 w-full h-[1px] bg-muted-foreground/20"})]})}),o.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded"}),o.jsx("span",{children:"Opening"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded"}),o.jsx("span",{children:"Middlegame"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-red-400 rounded"}),o.jsx("span",{children:"Endgame"})]})]}),h!==0&&o.jsx("div",{className:"flex items-center justify-center gap-2 text-sm",children:h>0?o.jsxs(o.Fragment,{children:[o.jsx(bw,{className:"h-4 w-4 text-red-500"}),o.jsxs("span",{className:"text-red-500",children:[h,"% slower in endgame"]})]}):o.jsxs(o.Fragment,{children:[o.jsx(Sw,{className:"h-4 w-4 text-green-500"}),o.jsxs("span",{className:"text-green-500",children:[Math.abs(h),"% faster in endgame"]})]})})]})}function q4({squareInquiries:e}){const t=["a","b","c","d","e","f","g","h"],n=["8","7","6","5","4","3","2","1"],r={};for(const a of e){const l=a.toLowerCase();r[l]=(r[l]||0)+1}const s=Math.max(...Object.values(r),1),i=a=>{const l=r[a]||0;if(l===0)return"bg-muted/30";const c=l/s*100;return c<25?"bg-amber-200 dark:bg-amber-900/40":c<50?"bg-amber-400 dark:bg-amber-700/60":c<75?"bg-red-400 dark:bg-red-700/70":"bg-red-600 dark:bg-red-600/80"};return e.length===0?o.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"No square inquiries this game"}):o.jsxs("div",{className:"space-y-2","data-testid":"spatial-blur-heatmap",children:[o.jsx("div",{className:"grid grid-cols-8 gap-0.5 aspect-square max-w-[180px] mx-auto",children:n.map(a=>t.map(l=>{const c=`${l}${a}`,u=r[c]||0;return o.jsx("div",{className:`${i(c)} rounded-sm flex items-center justify-center text-[8px] font-mono`,title:`${c.toUpperCase()}: ${u} inquiries`,"data-testid":`heatmap-square-${c}`,children:u>0&&o.jsx("span",{className:"text-foreground/70",children:u})},c)}))}),o.jsxs("p",{className:"text-xs text-muted-foreground text-center","data-testid":"text-total-inquiries",children:[e.length," total inquiries"]})]})}function W4({open:e,gameResult:t,playerColor:n,clarityScore:r,responseTimes:s,squareInquiries:i,reconstructionScore:a,reconstructionVoicePurity:l,reconstructionEnabled:c,onRematch:u,onMainMenu:f,onAnalyze:m}){const h=t==="white_win"&&n==="white"||t==="black_win"&&n==="black",y=t==="draw"?"Game Drawn":h?"Victory":"Defeat",p=t==="draw"?"text-amber-500":h?"text-green-500":"text-red-500",g=s.length>0?s.reduce((w,x)=>w+x,0)/s.length:0;return o.jsx(Di,{open:e,children:o.jsxs(Mo,{className:"max-w-md max-h-[90vh] overflow-y-auto [&>button.absolute]:hidden",onPointerDownOutside:w=>w.preventDefault(),onInteractOutside:w=>w.preventDefault(),onEscapeKeyDown:w=>w.preventDefault(),children:[o.jsxs(X,{variant:"ghost",size:"icon",className:"absolute right-4 top-4 h-6 w-6 rounded-sm opacity-70 hover:opacity-100",onClick:f,"data-testid":"button-postmortem-close",children:[o.jsx(Po,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]}),o.jsx(_o,{children:o.jsxs(Ao,{className:"flex items-center gap-3",children:[o.jsx(Jn,{className:`h-6 w-6 ${p}`}),o.jsx("span",{className:p,children:y})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx(Ze,{className:"bg-muted/30 border-0",children:o.jsxs(dt,{className:"p-3 text-center",children:[o.jsx(Vu,{className:"h-5 w-5 mx-auto mb-1 text-amber-500"}),o.jsxs("p",{className:"text-2xl font-bold text-amber-500",children:[r,"%"]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Reconstruction Score"})]})}),o.jsx(Ze,{className:"bg-muted/30 border-0",children:o.jsxs(dt,{className:"p-3 text-center",children:[o.jsx(wo,{className:"h-5 w-5 mx-auto mb-1 text-blue-500"}),o.jsx("p",{className:"text-2xl font-bold",children:ui(g)}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Response"})]})})]}),o.jsx(qr,{}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(a2,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium",children:"Mental Stamina"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Response time changes throughout the game"}),o.jsx(V4,{responseTimes:s})]}),o.jsx(qr,{}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(hw,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium",children:"Spatial Blurs"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Squares you needed to inquire about"}),o.jsx(q4,{squareInquiries:i})]}),c&&a!==null&&o.jsxs(o.Fragment,{children:[o.jsx(qr,{}),o.jsxs("div",{className:"space-y-2","data-testid":"reconstruction-stats",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(N2,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium",children:"Board Reconstruction"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx(Ze,{className:"bg-muted/30 border-0",children:o.jsxs(dt,{className:"p-3 text-center",children:[o.jsxs("p",{className:`text-xl font-bold ${a>=80?"text-green-500":a>=50?"text-amber-500":"text-red-500"}`,children:[a,"%"]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Accuracy"})]})}),l!==null&&o.jsx(Ze,{className:"bg-muted/30 border-0",children:o.jsxs(dt,{className:"p-3 text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-1 mb-0.5",children:[o.jsx(qt,{className:"h-3 w-3 text-purple-500"}),o.jsxs("p",{className:`text-xl font-bold ${l>=80?"text-purple-500":l>=50?"text-amber-500":"text-muted-foreground"}`,children:[l,"%"]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Voice Purity"})]})})]})]})]}),o.jsx(qr,{}),m&&o.jsxs(X,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:m,"data-testid":"button-postmortem-analyze",children:[o.jsx(xw,{className:"mr-2 h-4 w-4"}),"Analyze Game"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(X,{className:"flex-1 bg-black hover:bg-stone-800 text-white",onClick:u,"data-testid":"button-postmortem-rematch",children:[o.jsx(vw,{className:"mr-2 h-4 w-4"}),"Rematch"]}),o.jsxs(X,{variant:"outline",className:"flex-1 bg-amber-400 hover:bg-amber-500 text-black border-black",onClick:f,"data-testid":"button-postmortem-menu",children:[o.jsx(w2,{className:"mr-2 h-4 w-4"}),"Menu"]})]})]})]})})}const h0=10;function m0(e){return Math.max(-h0,Math.min(h0,e))}class U4{constructor(){this.worker=null,this.isReady=!1,this.isSearching=!1,this.messageHandlers=[],this.initPromise=null,this.requestQueue=Promise.resolve()}async init(){if(!this.isReady)return this.initPromise?this.initPromise:(this.initPromise=new Promise((t,n)=>{try{typeof WebAssembly=="object"&&WebAssembly.validate(Uint8Array.of(0,97,115,109,1,0,0,0))||console.warn("[ClientStockfish] WebAssembly not supported, using slower JS fallback");const s="/stockfish/stockfish-17.1-lite-single-03e3232.js";this.worker=new Worker(s),this.worker.onmessage=l=>{const c=typeof l.data=="string"?l.data:"";for(const u of this.messageHandlers)u(c)},this.worker.onerror=l=>{console.error("[ClientStockfish] Worker error:",l),n(l)},this.sendCommand("uci");let i=!1;const a=l=>{l==="uciok"&&(i=!0,this.sendCommand("setoption name Hash value 16"),console.log("[ClientStockfish] Set Hash table to 16MB for mobile optimization"),this.sendCommand("isready")),l==="readyok"&&i&&(this.removeHandler(a),this.isReady=!0,console.log("[ClientStockfish] Engine ready"),t())};this.addHandler(a),setTimeout(()=>{this.isReady||n(new Error("Stockfish initialization timeout"))},3e4)}catch(r){n(r)}}),this.initPromise)}addHandler(t){this.messageHandlers.push(t)}removeHandler(t){const n=this.messageHandlers.indexOf(t);n>-1&&this.messageHandlers.splice(n,1)}sendCommand(t){this.worker&&this.worker.postMessage(t)}async getBestMove(t,n={}){const r=()=>new Promise(async(i,a)=>{const l=setTimeout(()=>{a(new Error("getBestMove timeout"))},3e4);try{this.isReady||await this.init(),n.skillLevel!==void 0&&this.sendCommand(`setoption name Skill Level value ${n.skillLevel}`),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`);let c="go";n.depth?c+=` depth ${n.depth}`:n.nodes?c+=` nodes ${n.nodes}`:n.moveTime?c+=` movetime ${n.moveTime}`:c+=" depth 15",this.isSearching=!0,this.sendCommand(c);let u,f;const m=h=>{if(h.startsWith("info depth")){const y=h.match(/depth (\d+)/),p=h.match(/score cp (-?\d+)/),g=h.match(/score mate (-?\d+)/);y&&(f=parseInt(y[1])),p&&(u=parseInt(p[1])/100),g&&(u=parseInt(g[1])>0?100:-100)}if(h.startsWith("bestmove")){clearTimeout(l),this.removeHandler(m),this.isSearching=!1;const y=h.match(/bestmove (\S+)/);y?i({bestMove:y[1],evaluation:u,depth:f}):a(new Error("Failed to parse bestmove"))}};this.addHandler(m)}catch(c){clearTimeout(l),this.isSearching=!1,a(c)}}),s=this.requestQueue.then(r,r);return this.requestQueue=s.catch(()=>{}),s}async analyzePosition(t,n=1e6){const r=()=>new Promise(async(i,a)=>{const l=setTimeout(()=>{a(new Error("analyzePosition timeout"))},6e4);try{this.isReady||await this.init(),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`),this.isSearching=!0,this.sendCommand(`go nodes ${n}`);let c=0,u=0,f="",m=[],h=!1,y;const p=g=>{if(g.startsWith("info depth")&&g.includes(" pv ")){const w=g.match(/depth (\d+)/),x=g.match(/score cp (-?\d+)/),v=g.match(/score mate (-?\d+)/),b=g.match(/ pv (.+)/);if(w&&(u=parseInt(w[1])),x&&(c=parseInt(x[1])/100,h=!1,y=void 0),v){const S=parseInt(v[1]);c=S>0?999:-999,h=!0,y=Math.abs(S)}b&&(m=b[1].trim().split(" "))}if(g.startsWith("bestmove")){clearTimeout(l),this.removeHandler(p),this.isSearching=!1;const w=g.match(/bestmove (\S+)/);w?(f=w[1],i({evaluation:m0(c),bestMove:f,bestMoveEval:m0(c),principalVariation:m,depth:u,isMate:h,mateIn:y})):a(new Error("Failed to parse bestmove"))}};this.addHandler(p)}catch(c){clearTimeout(l),this.isSearching=!1,a(c)}}),s=this.requestQueue.then(r,r);return this.requestQueue=s.catch(()=>{}),s}async getTopMoves(t,n=3,r=1e6,s){const i=s===void 0||s==="w"?1:-1,a=()=>new Promise(async(c,u)=>{const f=setTimeout(()=>{this.sendCommand("setoption name MultiPV value 1"),c([])},3e4);try{this.isReady||await this.init(),this.sendCommand("stop"),this.sendCommand("ucinewgame"),this.sendCommand(`setoption name MultiPV value ${n}`),this.sendCommand(`position fen ${t}`),this.isSearching=!0,this.sendCommand(`go nodes ${r}`);const m=new Map,h=y=>{if(y.startsWith("info depth")&&y.includes(" pv ")){const p=y.match(/multipv (\d+)/),g=y.match(/score cp (-?\d+)/),w=y.match(/score mate (-?\d+)/),x=y.match(/ pv (.+)/),v=p?parseInt(p[1]):1;if(x){const b=x[1].trim().split(" "),S=b[0];let N=0,j=!1,k;if(g&&(N=parseInt(g[1])/100*i),w){const C=parseInt(w[1]);N=(C>0?999:-999)*i,j=!0,k=Math.abs(C)}m.set(v,{move:S,evaluation:N,isMate:j,mateIn:k,principalVariation:b})}}if(y.startsWith("bestmove")){clearTimeout(f),this.removeHandler(h),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1");const p=[];for(let g=1;g<=n;g++){const w=m.get(g);w&&p.push(w)}c(p)}};this.addHandler(h)}catch(m){clearTimeout(f),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1"),u(m)}}),l=this.requestQueue.then(a,a);return this.requestQueue=l.catch(()=>{}),l}async getBotMove(t,n){const r=u=>u<=400?0:u<=600?2:u<=800?4:u<=1e3?6:u<=1200?8:u<=1400?11:u<=1600?14:u<=1800?17:u<=2e3?18:u<=2200?19:20,s=u=>u<=600?5:u<=1e3?4:u<=1400?3:u<=1800?2:1,i=u=>u<=400?500:u<=600?1e3:u<=800?2e3:u<=1e3?5e3:u<=1200?1e4:u<=1400?2e4:u<=1600?5e4:u<=1800?1e5:u<=2e3?25e4:u<=2200?5e5:u<=2400?1e6:15e5,a=u=>u<=400||u<=600?1:u<=800?2:u<=1e3?3:u<=1200?4:u<=1400?5:u<=1600?6:0,l=()=>new Promise(async(u,f)=>{const m=setTimeout(()=>{f(new Error("getBotMove timeout"))},3e4);try{this.isReady||await this.init();const h=r(n),y=s(n),p=i(n),g=a(n);this.sendCommand(`setoption name Skill Level value ${h}`),this.sendCommand("setoption name UCI_LimitStrength value true"),this.sendCommand(`setoption name UCI_Elo value ${Math.min(Math.max(n,400),3200)}`),this.sendCommand(`setoption name MultiPV value ${y}`),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`),this.isSearching=!0,g>0?this.sendCommand(`go depth ${g} nodes ${p}`):this.sendCommand(`go nodes ${p}`);const w=new Map,x=v=>{var b;if(v.startsWith("info depth")&&v.includes(" pv ")){const S=v.match(/multipv (\d+)/),N=v.match(/ pv (\S+)/),j=v.match(/score cp (-?\d+)/),k=S?parseInt(S[1]):1,C=N?N[1]:null,R=j?parseInt(j[1])/100:void 0;C&&w.set(k,{move:C,eval:R})}if(v.startsWith("bestmove")){clearTimeout(m),this.removeHandler(x),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1"),this.sendCommand("setoption name UCI_LimitStrength value false"),this.sendCommand("setoption name Skill Level value 20");let S;const N=Array.from(w.values()).slice(0,y);if(N.length===0){const j=v.match(/bestmove (\S+)/);S=j?j[1]:void 0}else if(N.length===1)S=N[0].move;else{const j=Math.random()*100;n<=600?j<40?S=N[0].move:j<70&&N[1]?S=N[1].move:j<90&&N[2]?S=N[2].move:S=N[Math.min(Math.floor(j/25),N.length-1)].move:n<=1e3?j<55?S=N[0].move:j<80&&N[1]?S=N[1].move:j<95&&N[2]?S=N[2].move:S=N[Math.min(Math.floor(j/25),N.length-1)].move:n<=1400?j<70?S=N[0].move:j<90&&N[1]?S=N[1].move:N[2]?S=N[2].move:S=N[0].move:n<=1800?j<85?S=N[0].move:j<97&&N[1]?S=N[1].move:N[2]?S=N[2].move:S=N[0].move:j<95?S=N[0].move:N[1]?S=N[1].move:S=N[0].move}S?u({bestMove:S,evaluation:(b=w.get(1))==null?void 0:b.eval,isFreeCapture:!1}):f(new Error("Failed to get bot move"))}};this.addHandler(x)}catch(h){clearTimeout(m),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1"),this.sendCommand("setoption name UCI_LimitStrength value false"),this.sendCommand("setoption name Skill Level value 20"),f(h)}}),c=this.requestQueue.then(l,l);return this.requestQueue=c.catch(()=>{}),c}async getDepthLimitedMove(t,n){const r=()=>new Promise(async(i,a)=>{const l=setTimeout(()=>{a(new Error("getDepthLimitedMove timeout"))},3e4);try{this.isReady||await this.init(),this.sendCommand("setoption name UCI_LimitStrength value false"),this.sendCommand("setoption name Skill Level value 20"),this.sendCommand("setoption name MultiPV value 1"),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`),this.isSearching=!0,this.sendCommand(`go depth ${n}`);let c,u;const f=m=>{if(m.startsWith("info depth")&&m.includes(" pv ")){const h=m.match(/ pv (\S+)/),y=m.match(/score cp (-?\d+)/),p=m.match(/score mate (-?\d+)/);h&&(c=h[1]),y?u=parseInt(y[1])/100:p&&(u=parseInt(p[1])>0?100:-100)}if(m.startsWith("bestmove")){clearTimeout(l),this.removeHandler(f),this.isSearching=!1;const h=m.match(/bestmove (\S+)/);h&&(c=h[1]),c?i({bestMove:c,evaluation:u,isFreeCapture:!1}):a(new Error("Failed to get depth-limited move"))}};this.addHandler(f)}catch(c){clearTimeout(l),this.isSearching=!1,a(c)}}),s=this.requestQueue.then(r,r);return this.requestQueue=s.catch(()=>{}),s}stopAnalysis(){this.worker&&this.isSearching&&(this.sendCommand("stop"),this.isSearching=!1,console.debug("[ClientStockfish] Analysis halted safely."))}shutdown(){this.worker&&(this.sendCommand("quit"),this.worker.terminate(),this.worker=null,this.isReady=!1,this.initPromise=null)}isInitialized(){return this.isReady}}const Ei=new U4;function H4({evaluation:e,isLoading:t,isMate:n,mateIn:r,playerColor:s}){const i=e!==null?s==="black"?-e:e:null,l=e!==null?(y=>n?y>0?100:0:50+Math.max(-10,Math.min(10,y))/10*50)(e):50,c=y=>y===null?"...":n&&r!==void 0?y>0?`M${r}`:`-M${r}`:`${y>=0?"+":""}${y.toFixed(1)}`,u=s==="black",f=u?"bg-white":"bg-stone-900",m=u?"bg-stone-900":"bg-white",h=u?l:100-l;return o.jsxs("div",{className:"flex flex-col items-center w-full h-full","data-testid":"evaluation-bar",children:[o.jsx("div",{className:"text-xs font-mono font-bold mb-1 flex-shrink-0","data-testid":"evaluation-value",children:c(i)}),o.jsxs("div",{className:`relative w-full rounded overflow-hidden border border-border ${m} flex-1 min-h-0`,children:[o.jsx("div",{className:`absolute top-0 left-0 right-0 ${f} transition-all duration-300`,style:{height:`${h}%`}}),o.jsx("div",{className:"absolute left-0 right-0 h-[2px] bg-amber-500",style:{top:"50%",transform:"translateY(-50%)"}}),t&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:o.jsx(mw,{className:"h-3 w-3 animate-spin text-white"})})]})]})}function K4({position:e,flipped:t,lastMove:n,bestMoveSquares:r}){const s=new Ln(e),i=["a","b","c","d","e","f","g","h"],a=["8","7","6","5","4","3","2","1"],l=t?[...i].reverse():i,c=t?[...a].reverse():a,u={K:"",Q:"",R:"",B:"",N:"",P:"",k:"",q:"",r:"",b:"",n:"",p:""};return o.jsx("div",{className:"aspect-square w-full","data-testid":"analysis-board",children:o.jsx("div",{className:"grid grid-cols-8 grid-rows-8 w-full h-full border border-stone-400",children:c.map(f=>l.map(m=>{const h=`${m}${f}`,y=s.get(h),p=(i.indexOf(m)+a.indexOf(f))%2===0,g=n&&(n.from===h||n.to===h),w=r&&(r.from===h||r.to===h);return o.jsx("div",{className:`aspect-square flex items-center justify-center text-2xl sm:text-3xl
                  ${p?"bg-amber-100 dark:bg-amber-200":"bg-amber-600 dark:bg-amber-700"}
                  ${g?"ring-2 ring-inset ring-amber-400":""}
                  ${w?"ring-2 ring-inset ring-emerald-500":""}
                `,"data-testid":`analysis-square-${h}`,children:y&&o.jsx("span",{className:y.color==="w"?"text-white drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)]":"text-black",children:u[y.color==="w"?y.type.toUpperCase():y.type]})},h)}))})})}function p0({moveHistory:e,playerColor:t,onClose:n,gameResult:r,botElo:s}){const{toast:i}=xl(),[a,l]=d.useState(0),[c,u]=d.useState(!0),[f,m]=d.useState(!1),[h,y]=d.useState(!0),[p,g]=d.useState(0),[w,x]=d.useState(new Map),v=d.useRef(!1);d.useEffect(()=>{const A=document.getElementById(`move-${a}`);A&&A.scrollIntoView({behavior:"smooth",block:"nearest"})},[a]);const b=d.useMemo(()=>{const A=new Ln,B=r==="white_win"?"1-0":r==="black_win"?"0-1":r==="draw"?"1/2-1/2":"*",W=new Date,U=`${W.getFullYear()}.${String(W.getMonth()+1).padStart(2,"0")}.${String(W.getDate()).padStart(2,"0")}`;return A.header("Event","Blindfold Chess Challenge","Site","Mobile App","Date",U,"Round","?","White",t==="white"?"User":`Stockfish (Elo ${s||"?"})`,"Black",t==="black"?"User":`Stockfish (Elo ${s||"?"})`,"Result",B),e.forEach(re=>{try{A.move(re)}catch{console.warn("[PGN] Could not add move:",re)}}),A.pgn()},[e,t,r,s]),S=async()=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(b);else{const A=document.createElement("textarea");A.value=b,A.style.position="fixed",A.style.left="-9999px",document.body.appendChild(A),A.focus(),A.select(),document.execCommand("copy"),document.body.removeChild(A)}m(!0),i({title:"PGN Copied",description:"Game notation copied to clipboard",duration:2e3}),setTimeout(()=>m(!1),2e3)}catch(A){console.error("[PGN] Copy failed:",A),i({title:"Copy Failed",description:"Could not copy to clipboard",variant:"destructive",duration:2e3})}},N=()=>{const A=new Date,W=`blindfold-game-${`${A.getFullYear()}${String(A.getMonth()+1).padStart(2,"0")}${String(A.getDate()).padStart(2,"0")}-${String(A.getHours()).padStart(2,"0")}${String(A.getMinutes()).padStart(2,"0")}`}.pgn.txt`,U=document.createElement("a"),re=new Blob([b],{type:"text/plain"});U.href=URL.createObjectURL(re),U.download=W,document.body.appendChild(U),U.click(),document.body.removeChild(U),URL.revokeObjectURL(U.href),i({title:"PGN Downloaded",description:W,duration:2e3})},j=d.useMemo(()=>{const A=[],B=new Ln;A.push({fen:B.fen(),lastMove:null});for(let W=0;W<e.length;W++)try{const U=B.move(e[W]);U?A.push({fen:B.fen(),lastMove:{from:U.from,to:U.to}}):console.warn(`[Analysis] Move returned null at index ${W}: ${e[W]}`)}catch(U){console.warn(`[Analysis] Skipping invalid move at index ${W}: ${e[W]}`,U)}return console.log(`[Analysis] Built ${A.length} positions from ${e.length} moves`),A},[e]);d.useEffect(()=>((async()=>{y(!0),g(0),v.current=!1;const B=new Map,W=j.length;for(let U=0;U<W&&!v.current;U++){const{fen:re}=j[U];try{const se=await Ei.analyzePosition(re,5e5);if(v.current)break;const Fe=re.split(" ")[1]==="b",ze=Fe?-se.evaluation:se.evaluation,Ae=se.mateIn!==void 0&&Fe?-se.mateIn:se.mateIn;B.set(U,{eval:ze,isMate:se.isMate,mateIn:Ae!==void 0?Math.abs(Ae):void 0,bestMove:se.bestMove})}catch(se){if(v.current)break;console.error(`[Analysis] Error evaluating position ${U}:`,se)}v.current||(g(Math.round((U+1)/W*100)),x(new Map(B))),await new Promise(se=>setTimeout(se,10))}v.current||y(!1)})(),()=>{v.current=!0}),[j]);const k=j[a]||j[0],C=k.fen,R=k.lastMove,P=w.get(a),D=(P==null?void 0:P.eval)??null,_=(P==null?void 0:P.isMate)??!1,q=P==null?void 0:P.mateIn,M=(P==null?void 0:P.bestMove)??null,z=()=>l(0),Q=()=>l(Math.max(0,a-1)),Y=()=>l(Math.min(j.length-1,a+1)),T=()=>l(j.length-1),$=A=>l(Math.min(A,j.length-1)),G=(()=>{const A=[];for(let B=0;B<e.length;B+=2)A.push({moveNumber:Math.floor(B/2)+1,white:e[B],black:e[B+1],whiteIndex:B+1,blackIndex:e[B+1]?B+2:void 0});return A})(),de=A=>!A||A.length<4?null:{from:A.slice(0,2),to:A.slice(2,4)},ne=A=>{if(!A)return null;try{const W=new Ln(C).move({from:A.slice(0,2),to:A.slice(2,4),promotion:A.length>4?A[4]:void 0});return W?W.san:A}catch{return A}},ve=c?de(M):null,fe=ne(M);return h&&p<100?o.jsxs("div",{className:"fixed inset-0 z-50 bg-background flex flex-col","data-testid":"analysis-view",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Game Analysis"}),o.jsx(X,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-analysis-close",children:o.jsx(Po,{className:"h-5 w-5"})})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 gap-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(mw,{className:"h-6 w-6 animate-spin text-amber-500"}),o.jsx("span",{className:"text-lg font-medium",children:"Analyzing game..."})]}),o.jsxs("div",{className:"w-full max-w-xs space-y-2",children:[o.jsx(qs,{value:p,className:"h-3"}),o.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:[p,"% complete (",Math.round(p/100*j.length)," / ",j.length," positions)"]})]}),o.jsx("p",{className:"text-sm text-muted-foreground text-center max-w-sm",children:"This will take a few seconds. Once complete, you can navigate through moves instantly."})]})]}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-background flex flex-col","data-testid":"analysis-view",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Game Analysis"}),o.jsx(X,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-analysis-close",children:o.jsx(Po,{className:"h-5 w-5"})})]}),o.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[o.jsxs("div",{className:"flex flex-col gap-3 items-center",children:[o.jsxs("div",{className:"grid grid-cols-[24px_1fr] gap-2 w-full max-w-[352px]",children:[o.jsx(H4,{evaluation:D,isLoading:!1,isMate:_,mateIn:q,playerColor:t}),o.jsx(K4,{position:C,flipped:t==="black",lastMove:R,bestMoveSquares:ve})]}),o.jsxs("div",{className:"flex justify-center gap-1",children:[o.jsx(X,{variant:"outline",size:"icon",onClick:z,disabled:a===0,"data-testid":"button-analysis-start",children:o.jsx(d2,{className:"h-4 w-4"})}),o.jsx(X,{variant:"outline",size:"icon",onClick:Q,disabled:a===0,"data-testid":"button-analysis-back",children:o.jsx(Qm,{className:"h-4 w-4"})}),o.jsx(X,{variant:"outline",size:"icon",onClick:Y,disabled:a===j.length-1,"data-testid":"button-analysis-forward",children:o.jsx(qu,{className:"h-4 w-4"})}),o.jsx(X,{variant:"outline",size:"icon",onClick:T,disabled:a===j.length-1,"data-testid":"button-analysis-end",children:o.jsx(f2,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm","data-testid":"best-move-display",children:[o.jsx(X,{variant:c?"default":"outline",size:"sm",onClick:()=>u(!c),className:"h-7 px-2","data-testid":"button-toggle-best-move",children:c?"Hide Best":"Show Best"}),c&&fe&&o.jsxs("span",{className:"font-mono bg-emerald-500/20 text-emerald-600 dark:text-emerald-400 px-2 py-1 rounded","data-testid":"text-best-move",children:["Best: ",fe]})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-4 mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Move List"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs(X,{variant:"outline",size:"sm",onClick:S,className:"h-7 px-2","data-testid":"button-copy-pgn",children:[f?o.jsx(bl,{className:"h-3 w-3 mr-1"}):o.jsx(dw,{className:"h-3 w-3 mr-1"}),f?"Copied":"Copy"]}),o.jsxs(X,{variant:"outline",size:"sm",onClick:N,className:"h-7 px-2","data-testid":"button-download-pgn",children:[o.jsx(g2,{className:"h-3 w-3 mr-1"}),"Download"]})]})]}),o.jsx(Ze,{className:"p-3 max-h-40 overflow-y-auto scroll-smooth","data-testid":"analysis-move-list",children:o.jsx("div",{className:"grid grid-cols-[auto_1fr_1fr] gap-x-3 gap-y-1 text-sm font-mono",children:G.map(A=>o.jsxs(d.Fragment,{children:[o.jsxs("span",{className:"text-muted-foreground",children:[A.moveNumber,"."]}),o.jsx("button",{id:`move-${A.whiteIndex}`,onClick:()=>$(A.whiteIndex),className:`text-left px-1 rounded hover:bg-muted transition-colors ${a===A.whiteIndex?"bg-amber-400 text-black font-bold":""}`,"data-testid":`move-white-${A.moveNumber}`,children:A.white}),A.black?o.jsx("button",{id:`move-${A.blackIndex}`,onClick:()=>$(A.blackIndex),className:`text-left px-1 rounded hover:bg-muted transition-colors ${a===A.blackIndex?"bg-amber-400 text-black font-bold":""}`,"data-testid":`move-black-${A.moveNumber}`,children:A.black}):o.jsx("span",{})]},A.moveNumber))})})]})]})}const gf=Zs("KeepAwake",{web:()=>Ji(()=>import("./web-CK3rkuDD.js"),[]).then(e=>new e.KeepAwakeWeb)});var He;(function(e){e.Heavy="HEAVY",e.Medium="MEDIUM",e.Light="LIGHT"})(He||(He={}));var Ui;(function(e){e.Success="SUCCESS",e.Warning="WARNING",e.Error="ERROR"})(Ui||(Ui={}));const qe=Zs("Haptics",{web:()=>Ji(()=>import("./web-Bv9gMFRd.js"),[]).then(e=>new e.HapticsWeb)}),jN=Object.freeze(Object.defineProperty({__proto__:null,Haptics:qe,get ImpactStyle(){return He},get NotificationType(){return Ui}},Symbol.toStringTag,{value:"Module"}));new BigUint64Array(768);new BigUint64Array(4);new BigUint64Array(8);const rs=[];function G4(){if(rs.length>0)return;let e=new Array(781);e[0]=1n;for(let t=1;t<781;t++)e[t]=e[t-1]*6364136223846793005n+1442695040888963407n&0xFFFFFFFFFFFFFFFFn;for(let t=0;t<781;t++)rs[t]=e[t]}const Q4={p:0,P:1,n:2,N:3,b:4,B:5,r:6,R:7,q:8,Q:9,k:10,K:11};function Y4(e,t,n){const r=[],s=e.split("/");for(let l=0;l<8;l++){const c=s[l],u=[];for(const f of c)if(f>="1"&&f<="8")for(let m=0;m<parseInt(f);m++)u.push("");else u.push(f);r.push(u)}const i=t==="w"?"P":"p",a=t==="w"?3:4;return n>0&&r[a][n-1]===i||n<7&&r[a][n+1]===i}function X4(e){G4();const t=e.split(" "),n=t[0],r=t[1]||"w",s=t[2]||"-",i=t[3]||"-";let a=0n,l=56;for(const c of n)if(c==="/")l-=16;else if(c>="1"&&c<="8")l+=parseInt(c);else{const u=Q4[c];if(u!==void 0){const f=64*u+l;f<768&&(a^=rs[f])}l++}if(s.includes("K")&&(a^=rs[768]),s.includes("Q")&&(a^=rs[769]),s.includes("k")&&(a^=rs[770]),s.includes("q")&&(a^=rs[771]),i!=="-"){const c=i.charCodeAt(0)-97;c>=0&&c<8&&Y4(n,r,c)&&(a^=rs[772+c])}return r==="w"&&(a^=rs[780]),a}function Z4(e){const t=e&7,n=e>>3&7,r=e>>6&7,s=e>>9&7,i=e>>12&7,a="abcdefgh",l=a[r]+(s+1),c=a[t]+(n+1);let u;return i>0&&(u=["","n","b","r","q"][i]),{from:l,to:c,promotion:u}}let vf=null,br=[],xf=!1,uc=null;async function J4(){if(!xf)return uc||(uc=(async()=>{try{const e=await fetch("/openings.bin");if(!e.ok)throw new Error(`Failed to load opening book: ${e.status}`);vf=await e.arrayBuffer();const t=new DataView(vf),n=vf.byteLength/16;br=[];for(let r=0;r<n;r++){const s=r*16,i=t.getUint32(s,!1),a=t.getUint32(s+4,!1),l=BigInt(i)<<32n|BigInt(a),c=t.getUint16(s+8,!1),u=t.getUint16(s+10,!1);br.push({key:l,move:c,weight:u})}br.sort((r,s)=>r.key<s.key?-1:r.key>s.key?1:0),xf=!0,console.log(`[OpeningBook] Loaded ${n} entries from Polyglot book`)}catch(e){console.error("[OpeningBook] Failed to load opening book:",e),br=[],xf=!0}})(),uc)}function eA(e){const t=[];let n=0,r=br.length-1,s=-1;for(;n<=r;){const i=Math.floor((n+r)/2);br[i].key===e?(s=i,r=i-1):br[i].key<e?n=i+1:r=i-1}if(s===-1)return t;for(let i=s;i<br.length&&br[i].key===e;i++)t.push({move:br[i].move,weight:br[i].weight});return t}async function tA(e){await J4();const t=X4(e),r=eA(t).map(s=>{const i=Z4(s.move);return{from:i.from,to:i.to,promotion:i.promotion,weight:s.weight}});return r.sort((s,i)=>i.weight-s.weight),{moves:r}}function nA(e){return e<30}function rA(e,t){const n=e.split(" ")[0];let r=0;if(t==="white")for(const s of n)s>="A"&&s<="Z"&&r++;else for(const s of n)s>="a"&&s<="z"&&r++;return r}function sA(e,t){if(!e||!e.captured)return!1;try{const r=new Ln(t).moves({verbose:!0}),s=e.to;return r.some(i=>i.to===s&&i.captured)}catch{return!1}}function oA(e,t){try{const n=new Ln(e),r=t.slice(0,2),s=t.slice(2,4),i=n.move({from:r,to:s,promotion:t.length>4?t[4]:void 0});return!i||!i.captured?!1:!n.moves({verbose:!0}).some(l=>l.to===s&&l.captured)}catch{return!1}}function iA(e,t,n,r,s){let i=500+Math.random()*1e3;return sA(s,n)?Math.min(i,800):(e<=10&&(i*=.7),rA(n,r)>=10&&e>10&&e<30&&(i*=1.3),t<60?i*=.5:t<180&&(i*=.7),Math.max(300,Math.min(3e3,i)))}function aA(e){const t=e.split(" ")[0];let n=0;for(const r of t)/[pnbrqkPNBRQK]/.test(r)&&n++;return n}function lA(e,t,n,r="blitz"){if(n<30)return 500;if(n<60)return 1e3;const i=r==="classical"?2:r==="rapid"?1.5:1,a=(c,u)=>(Math.random()*(u-c)+c)*1e3;let l;return e<=6?l=a(1,2):e<=10?l=a(2,3):e<=15?l=a(3,8):e<=20||t>=26?l=a(4,8):t>=20?l=a(4,7):t>=14?l=a(3,6):t>=9?l=a(2,4):l=a(1,2),l*i}function cA(e){try{const n=new Ln(e).moves({verbose:!0});if(n.length===0)return null;const r=n[Math.floor(Math.random()*n.length)];return r.from+r.to+(r.promotion||"")}catch{return null}}async function uA(e,t,n,r){try{const s=hu(t);if(s.randomPercent>0&&Math.random()*100<s.randomPercent){const l=cA(e);if(l)return console.log(`[BotEngine] Elo ${t}: Playing random move (${s.randomPercent}% chance)`),{move:l,isBookMove:!1}}if(nA((n==null?void 0:n.length)||0)){const l=await tA(e);if(l.moves.length>0){const c=l.moves,u=c.reduce((h,y)=>h+y.weight,0);let f=Math.random()*u;for(const h of c)if(f-=h.weight,f<=0)return{move:h.from+h.to+(h.promotion||""),isBookMove:!0};const m=c[0];return{move:m.from+m.to+(m.promotion||""),isBookMove:!0}}}let i;s.depth>0?(i=await Ei.getBestMove(e,{depth:s.depth,skillLevel:s.skillLevel}),console.log(`[BotEngine] Elo ${t}: Depth ${s.depth}, Skill ${s.skillLevel}`)):(i=await Ei.getBestMove(e,{nodes:s.nodes||5e5,skillLevel:s.skillLevel}),console.log(`[BotEngine] Elo ${t}: Unleashed nodes ${s.nodes}, Skill ${s.skillLevel}`));const a=oA(e,i.bestMove);return{move:i.bestMove,evaluation:i.evaluation,isFreeCapture:a}}catch(s){return console.error("[BotEngine] Error getting bot move:",s),null}}const yf="blindfold_chess";let Na=null,_n=null,Io=!1,Uh=!1,dc=null;async function sa(){return Uh?!0:dc||(dc=dA(),dc)}async function dA(){try{if(Io=Nn.isNativePlatform(),!Io)return console.log("[GameHistory] Web platform - using localStorage fallback"),!0;Na=new gb(vb);const e=await Na.checkConnectionsConsistency(),t=(await Na.isConnection(yf,!1)).result;return e.result&&t?_n=await Na.retrieveConnection(yf,!1):_n=await Na.createConnection(yf,!1,"no-encryption",1,!1),await _n.open(),await _n.execute(`
      CREATE TABLE IF NOT EXISTS games (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        date TEXT NOT NULL,
        result TEXT NOT NULL,
        playerColor TEXT NOT NULL,
        botName TEXT NOT NULL,
        botElo INTEGER NOT NULL,
        moveCount INTEGER NOT NULL,
        pgn TEXT NOT NULL,
        clarityScore REAL NOT NULL,
        isFavorite INTEGER DEFAULT 0,
        timeControl TEXT NOT NULL
      );
    `),console.log("[GameHistory] Database initialized successfully"),Uh=!0,!0}catch(e){return console.error("[GameHistory] Failed to initialize database:",e),Uh=!0,!1}}function Cl(){try{const e=localStorage.getItem("blindfold_game_history");return e?JSON.parse(e):[]}catch{return[]}}function Bp(e){localStorage.setItem("blindfold_game_history",JSON.stringify(e))}async function g0(e){var t,n;await sa();try{if(!Io){const i=Cl(),a=i.length>0?Math.max(...i.map(c=>c.id))+1:1,l={...e,id:a};return i.unshift(l),Bp(i),console.log("[GameHistory] Game saved to localStorage:",a),a}if(!_n)return console.error("[GameHistory] Database not initialized"),null;const s=await _n.run(`
      INSERT INTO games (date, result, playerColor, botName, botElo, moveCount, pgn, clarityScore, isFavorite, timeControl)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
    `,[e.date,e.result,e.playerColor,e.botName,e.botElo,e.moveCount,e.pgn,e.clarityScore,e.isFavorite?1:0,e.timeControl]);return console.log("[GameHistory] Game saved:",(t=s.changes)==null?void 0:t.lastId),((n=s.changes)==null?void 0:n.lastId)??null}catch(r){return console.error("[GameHistory] Failed to save game:",r),null}}async function fA(){await sa();try{if(!Io)return Cl();if(!_n)return console.error("[GameHistory] Database not initialized"),[];const e=await _n.query("SELECT * FROM games ORDER BY date DESC;");return e.values?e.values.map(t=>({id:t.id,date:t.date,result:t.result,playerColor:t.playerColor,botName:t.botName,botElo:t.botElo,moveCount:t.moveCount,pgn:t.pgn,clarityScore:t.clarityScore,isFavorite:t.isFavorite===1,timeControl:t.timeControl})):[]}catch(e){return console.error("[GameHistory] Failed to get games:",e),[]}}async function hA(){await sa();try{if(!Io)return Cl().filter(t=>t.isFavorite);if(!_n)return console.error("[GameHistory] Database not initialized"),[];const e=await _n.query("SELECT * FROM games WHERE isFavorite = 1 ORDER BY date DESC;");return e.values?e.values.map(t=>({id:t.id,date:t.date,result:t.result,playerColor:t.playerColor,botName:t.botName,botElo:t.botElo,moveCount:t.moveCount,pgn:t.pgn,clarityScore:t.clarityScore,isFavorite:t.isFavorite===1,timeControl:t.timeControl})):[]}catch(e){return console.error("[GameHistory] Failed to get favorite games:",e),[]}}async function CN(e){await sa();try{if(!Io){const r=Cl(),s=r.find(i=>i.id===e);return s?(s.isFavorite=!s.isFavorite,Bp(r),s.isFavorite):!1}if(!_n)return console.error("[GameHistory] Database not initialized"),!1;const t=await _n.query("SELECT isFavorite FROM games WHERE id = ?;",[e]);if(!t.values||t.values.length===0)return!1;const n=t.values[0].isFavorite===1?0:1;return await _n.run("UPDATE games SET isFavorite = ? WHERE id = ?;",[n,e]),console.log("[GameHistory] Toggled favorite for game:",e),n===1}catch(t){return console.error("[GameHistory] Failed to toggle favorite:",t),!1}}async function mA(e){await sa();try{if(!Io){const n=Cl().filter(r=>r.id!==e);return Bp(n),console.log("[GameHistory] Game deleted from localStorage:",e),!0}return _n?(await _n.run("DELETE FROM games WHERE id = ?;",[e]),console.log("[GameHistory] Game deleted:",e),!0):(console.error("[GameHistory] Database not initialized"),!1)}catch(t){return console.error("[GameHistory] Failed to delete game:",t),!1}}function pA({game:e,onView:t,onToggleFavorite:n,onDelete:r}){const s=e.result==="win"?o.jsx(Jn,{className:"h-5 w-5 text-amber-500"}):e.result==="loss"?o.jsx(Wu,{className:"h-5 w-5 text-stone-400"}):o.jsx(pw,{className:"h-5 w-5 text-stone-500"}),i=e.result==="win"?"Victory":e.result==="loss"?"Defeat":"Draw",a=e.result==="win"?"text-green-600 dark:text-green-400":e.result==="loss"?"text-red-600 dark:text-red-400":"text-muted-foreground",l=new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),c=new Date(e.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),u=async m=>{m.stopPropagation(),Nn.isNativePlatform()&&await qe.impact({style:He.Light}),n()},f=m=>{m.stopPropagation(),r()};return o.jsx(Ze,{className:"cursor-pointer hover-elevate active-elevate-2 transition-all",onClick:t,"data-testid":`card-game-${e.id}`,children:o.jsx(dt,{className:"p-3",children:o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[o.jsx("div",{className:"flex-shrink-0",children:s}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`font-semibold ${a}`,children:i}),o.jsx("span",{className:"text-muted-foreground",children:"vs"}),o.jsx("span",{className:"font-medium truncate",children:e.botName}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",e.botElo,")"]})]}),o.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mt-1",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(lw,{className:"h-3 w-3"}),l]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(wo,{className:"h-3 w-3"}),c]}),o.jsxs("span",{children:[e.moveCount," moves"]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:u,"data-testid":`button-favorite-${e.id}`,children:o.jsx(yw,{className:`h-5 w-5 ${e.isFavorite?"fill-amber-400 text-amber-400":"text-muted-foreground"}`})}),o.jsx(X,{variant:"ghost",size:"icon",onClick:f,"data-testid":`button-delete-${e.id}`,children:o.jsx(ww,{className:"h-5 w-5 text-muted-foreground hover:text-destructive"})})]})]})})})}function gA({onBack:e,onViewGame:t}){const[n,r]=d.useState([]),[s,i]=d.useState([]),[a,l]=d.useState(!0),[c,u]=d.useState(null),[f,m]=d.useState("all"),h=async()=>{l(!0);const[w,x]=await Promise.all([fA(),hA()]);r(w.filter(v=>v.moveCount>0)),i(x.filter(v=>v.moveCount>0)),l(!1)};d.useEffect(()=>{h()},[]);const y=async w=>{const x=await CN(w.id);r(v=>v.map(b=>b.id===w.id?{...b,isFavorite:x}:b)),i(x?v=>[{...w,isFavorite:!0},...v.filter(b=>b.id!==w.id)]:v=>v.filter(b=>b.id!==w.id))},p=async()=>{if(!c)return;await mA(c.id)&&(r(x=>x.filter(v=>v.id!==c.id)),i(x=>x.filter(v=>v.id!==c.id))),u(null)},g=f==="favorites"?s:n;return o.jsxs("div",{className:"min-h-screen bg-background flex flex-col","data-testid":"game-history-page",children:[o.jsxs("header",{className:"flex items-center gap-2 p-3 border-b border-border",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-history-back",children:o.jsx(Qm,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-lg font-semibold",children:"Game History"})]}),o.jsxs(ta,{value:f,onValueChange:m,className:"flex-1 flex flex-col",children:[o.jsx("div",{className:"px-3 pt-3",children:o.jsxs(zo,{className:"grid w-full grid-cols-2",children:[o.jsxs(Mn,{value:"all","data-testid":"tab-all-games",children:["All Games (",n.length,")"]}),o.jsxs(Mn,{value:"favorites","data-testid":"tab-favorites",children:["Favorites (",s.length,")"]})]})}),o.jsx(di,{value:f,className:"flex-1 mt-0 px-3 pb-3",children:o.jsx(Dp,{className:"h-[calc(100vh-140px)]",children:a?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"animate-pulse text-muted-foreground",children:"Loading games..."})}):g.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[o.jsx("div",{className:"text-muted-foreground mb-2",children:f==="favorites"?"No favorite games yet":"No games played yet"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:f==="favorites"?"Star a game to add it to your favorites":"Complete a game to see it here"})]}):o.jsx("div",{className:"space-y-2 py-2",children:g.map(w=>o.jsx(pA,{game:w,onView:()=>t(w),onToggleFavorite:()=>y(w),onDelete:()=>u(w)},w.id))})})})]}),o.jsx(Qr,{open:c!==null,onOpenChange:()=>u(null),children:o.jsxs(Pr,{children:[o.jsxs(Tr,{children:[o.jsx(Mr,{children:"Delete this game from history?"}),o.jsx(_r,{children:"This action cannot be undone. The game record will be permanently removed."})]}),o.jsxs(Rr,{children:[o.jsx(Lr,{"data-testid":"button-delete-cancel",children:"Cancel"}),o.jsx(Ar,{onClick:p,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90","data-testid":"button-delete-confirm",children:"Delete"})]})]})})]})}async function vA(e,t){const n=t||`blindfold-chess-${Date.now()}.pgn`;if(typeof navigator<"u"&&navigator.share)try{const r=new Blob([e],{type:"application/vnd.chess-pgn"}),s=new File([r],n,{type:"application/vnd.chess-pgn"});return navigator.canShare&&navigator.canShare({files:[s]})?(await navigator.share({files:[s],title:"Blindfold Chess Game"}),!0):(await navigator.share({text:e,title:"Blindfold Chess Game"}),!0)}catch(r){if(r.name==="AbortError")return!1;console.warn("Share API failed, falling back to clipboard:",r)}return EN(e)}async function EN(e){try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(e),!0;const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-9999px",document.body.appendChild(t),t.select();const n=document.execCommand("copy");return document.body.removeChild(t),n}catch(t){return console.error("Failed to copy PGN to clipboard:",t),!1}}function xA(e){const t=[],n=/\d+\.\s*(\S+)(?:\s+(\S+))?/g;let r;const s=["1-0","0-1","1/2-1/2","*"];for(;(r=n.exec(e))!==null;)r[1]&&!s.includes(r[1])&&t.push(r[1]),r[2]&&!s.includes(r[2])&&t.push(r[2]);return t}function yA({game:e,open:t,onClose:n,onAnalyze:r}){const[s,i]=d.useState((e==null?void 0:e.isFavorite)??!1),[a,l]=d.useState(!1),{toast:c}=xl();if(d.useEffect(()=>{e&&i(e.isFavorite)},[e]),!e||!t)return null;const u=async()=>{Nn.isNativePlatform()&&await qe.impact({style:He.Light});const v=await vA(e.pgn,`blindfold-vs-${e.botElo}.pgn`);c(v?{title:"PGN shared",description:"Game exported successfully"}:{title:"Share failed",description:"Could not share the game",variant:"destructive"})},f=async()=>{Nn.isNativePlatform()&&await qe.impact({style:He.Light}),await EN(e.pgn)?(l(!0),c({title:"Copied",description:"PGN copied to clipboard"}),setTimeout(()=>l(!1),2e3)):c({title:"Copy failed",description:"Could not copy PGN",variant:"destructive"})},m=e.result==="win"?o.jsx(Jn,{className:"h-10 w-10 text-amber-500"}):e.result==="loss"?o.jsx(Wu,{className:"h-10 w-10 text-stone-400"}):o.jsx(pw,{className:"h-10 w-10 text-stone-500"}),h=e.result==="win"?"Victory":e.result==="loss"?"Defeat":"Draw",y=e.result==="win"?"text-green-600 dark:text-green-400":e.result==="loss"?"text-red-600 dark:text-red-400":"text-muted-foreground",p=new Date(e.date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),g=new Date(e.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),w=()=>{const v=xA(e.pgn);r(v)},x=async()=>{Nn.isNativePlatform()&&await qe.impact({style:He.Light});const v=await CN(e.id);i(v)};return o.jsxs("div",{className:"min-h-screen bg-background flex flex-col","data-testid":"history-game-report",children:[o.jsxs("header",{className:"flex items-center justify-between p-3 border-b border-border",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-history-report-back",children:o.jsx(Qm,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-lg font-semibold",children:"Game Details"}),o.jsx(X,{variant:"ghost",size:"icon",onClick:x,"data-testid":"button-history-report-favorite",children:o.jsx(yw,{className:`h-5 w-5 ${s?"fill-amber-400 text-amber-400":""}`})})]}),o.jsx("div",{className:"flex-1 p-4 overflow-auto",children:o.jsx(Ze,{children:o.jsxs(dt,{className:"pt-6 space-y-4",children:[o.jsxs("div",{className:"flex flex-col items-center gap-3 py-4",children:[m,o.jsx("h2",{className:`text-3xl font-bold ${y}`,children:h}),o.jsxs("p",{className:"text-lg",children:["vs ",o.jsx("span",{className:"font-semibold",children:e.botName}),o.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",e.botElo,")"]})]})]}),o.jsx(qr,{}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(lw,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{children:p})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(wo,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{children:g})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Played as"}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("div",{className:`w-4 h-4 rounded-full ${e.playerColor==="white"?"bg-white border border-stone-400":"bg-black"}`}),o.jsx("span",{className:"font-medium capitalize",children:e.playerColor})]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Moves"}),o.jsx("p",{className:"font-medium mt-1",children:e.moveCount})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Time Control"}),o.jsx("p",{className:"font-medium mt-1",children:e.timeControl})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Reconstruction Score"}),o.jsxs("p",{className:"font-medium mt-1",children:[Math.round(e.clarityScore),"%"]})]})]}),o.jsx(qr,{}),o.jsxs(X,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:w,"data-testid":"button-history-analyze",children:[o.jsx(xw,{className:"mr-2 h-4 w-4"}),"Analyze Game"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(X,{variant:"outline",className:"flex-1",onClick:u,"data-testid":"button-history-share-pgn",children:[o.jsx(E2,{className:"mr-2 h-4 w-4"}),"Share PGN"]}),o.jsxs(X,{variant:"outline",className:"flex-1",onClick:f,"data-testid":"button-history-copy-pgn",children:[a?o.jsx(bl,{className:"mr-2 h-4 w-4"}):o.jsx(dw,{className:"mr-2 h-4 w-4"}),a?"Copied":"Copy PGN"]})]})]})})})]})}function Fp(){const[e,t]=d.useState(null),[n,r]=d.useState(!0),[s,i]=d.useState(null),[a,l]=d.useState([]),c=d.useRef(null);if(d.useEffect(()=>{const f=hR(t),m=async()=>{try{const h=await te.getStatus();i(h);const y=await te.getLogs();if(y&&y.logs){const p=y.logs;l(p.slice(-10))}}catch{}};return m(),c.current=window.setInterval(m,2e3),()=>{f(),c.current&&clearInterval(c.current)}},[]),!e)return null;const u=({ok:f})=>f?o.jsx(bl,{className:"w-3 h-3 text-green-400"}):o.jsx(Po,{className:"w-3 h-3 text-red-400"});return o.jsxs("div",{className:"fixed bottom-4 left-4 z-50 bg-black/90 text-white text-xs rounded-lg shadow-lg max-w-[280px]",onClick:()=>r(!n),"data-testid":"voice-debug-overlay",children:[o.jsxs("div",{className:"flex items-center gap-2 p-2 border-b border-white/20",children:[e.micListening?o.jsx(qt,{className:"w-4 h-4 text-green-400 animate-pulse"}):o.jsx(Hr,{className:"w-4 h-4 text-red-400"}),o.jsx("span",{className:"font-bold",children:"Voice Debug"}),o.jsx("span",{className:"text-white/50 ml-auto",children:n?"":""})]}),n&&o.jsxs("div",{className:"p-2 space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(u,{ok:e.permissionStatus==="granted"}),o.jsxs("span",{children:["Permission: ",e.permissionStatus]})]}),o.jsx("div",{className:"text-white/50 text-[10px] mt-1 mb-1",children:"--- Native Status (polled) ---"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(u,{ok:(s==null?void 0:s.serviceBound)??!1}),o.jsxs("span",{children:["Service Bound: ",s!=null&&s.serviceBound?"Yes":"No"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(u,{ok:(s==null?void 0:s.modelReady)??!1}),o.jsxs("span",{children:["Model Ready: ",s!=null&&s.modelReady?"Yes":"No"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(u,{ok:(s==null?void 0:s.sessionActive)??!1}),o.jsxs("span",{children:["Session Active: ",s!=null&&s.sessionActive?"Yes":"No"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(u,{ok:e.micListening}),o.jsxs("span",{children:["Mic Listening: ",e.micListening?"Yes":"No"]})]}),e.lastResult&&o.jsx("div",{className:"mt-2 p-1 bg-green-900/50 rounded",children:o.jsxs("span",{className:"text-green-300",children:['Last: "',e.lastResult,'"']})}),e.lastError&&o.jsxs("div",{className:"mt-2 p-1 bg-red-900/50 rounded flex items-start gap-1",children:[o.jsx(h2,{className:"w-3 h-3 text-red-400 mt-0.5 shrink-0"}),o.jsx("span",{className:"text-red-300 break-all",children:e.lastError})]}),a.length>0&&o.jsxs("div",{className:"mt-2 p-1 bg-blue-900/50 rounded",children:[o.jsx("div",{className:"text-blue-300 text-[10px]",children:"Native Logs:"}),a.map((f,m)=>o.jsx("div",{className:"text-blue-200 text-[9px] truncate",children:f},m))]}),o.jsxs("div",{className:"text-white/30 mt-1",children:["Updated: ",new Date(e.timestamp).toLocaleTimeString()]})]})]})}const wA={p:100,n:320,b:330,r:500,q:900,k:2e4},zp="blindfold-saved-game";function bA(e){try{localStorage.setItem(zp,JSON.stringify(e))}catch(t){console.warn("Failed to save game state:",t)}}function SA(){try{const e=localStorage.getItem(zp);if(e)return JSON.parse(e)}catch(e){console.warn("Failed to load saved game:",e)}return null}function fc(){try{localStorage.removeItem(zp)}catch(e){console.warn("Failed to clear saved game:",e)}}function NA(e){if(e)return{from:e.from,to:e.to,captured:e.captured,capturedValue:e.captured?wA[e.captured]:void 0}}function kA(e){return new Promise(t=>setTimeout(t,e))}const jA={easy:{maxPeeks:Number.POSITIVE_INFINITY},medium:{maxPeeks:20},hard:{maxPeeks:10},expert:{maxPeeks:5},master:{maxPeeks:2},grandmaster:{maxPeeks:0}};function CA({historyTrigger:e,onStateChange:t,returnToTitleRef:n,onTrainNowClick:r}){const{toast:s}=xl(),[i,a]=d.useState(!0),[l,c]=d.useState(null),[u,f]=d.useState(!1),[m,h]=d.useState("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"),[y,p]=d.useState([]),[g,w]=d.useState(null),[x,v]=d.useState([]),[b,S]=d.useState(null),[N,j]=d.useState("white"),[k,C]=d.useState(null),[R,P]=d.useState(300),[D,_]=d.useState(300),[q,M]=d.useState(()=>localStorage.getItem("blindfold-settings-time")||"blitz"),[z,Q]=d.useState(!1),[Y,T]=d.useState("medium"),[$,V]=d.useState("empty_board"),[G,de]=d.useState(!0),[ne,ve]=d.useState(Number.POSITIVE_INFINITY),[fe,A]=d.useState(!1),B=d.useRef(null),W=d.useRef(0),[U,re]=d.useState(0),[se,ye]=d.useState(0),Fe=d.useRef(!1),ze=d.useRef(null),Ae=d.useRef([]),oe=d.useRef(0),Ne=d.useRef(0),Ce=d.useRef(0),Re=d.useRef(0),Me=d.useRef(0),F=d.useRef(0),H=d.useRef(0),he=d.useRef([]),ie=d.useRef(!1),ae=d.useRef(null),$e=d.useRef(1200),[ke,Te]=d.useState(()=>Mh()),[st,kt]=d.useState(()=>za());d.useEffect(()=>{sa();const K=SA();K&&(ia(K),Vo(!0))},[]),d.useEffect(()=>{const K=ue=>{const ge=ue;ge.detail&&Te(ge.detail)};return window.addEventListener("blindfoldSettingsChanged",K),()=>{window.removeEventListener("blindfoldSettingsChanged",K)}},[]);const[Je,Wt]=d.useState(null),[Qt,jn]=d.useState(!1),[hn,Yt]=d.useState(!1),[vt,On]=d.useState(()=>{const K=localStorage.getItem("blindfold-settings-elo");return K?Number(K):1200}),[tn,gr]=d.useState(()=>localStorage.getItem("blindfold-settings-color")||"white"),[nt,Lt]=d.useState(!1),[Ye,jt]=d.useState(!1),[We,El]=d.useState(!1),[ld,oa]=d.useState(!1),[L,Ke]=d.useState(null),[mt,Hn]=d.useState(null),Z=d.useRef(null),[to,Ut]=d.useState(0),Dt=d.useRef(""),[gs,Cn]=d.useState(null),[no,ir]=d.useState(!1),[Ee,Vo]=d.useState(!1),[vs,ia]=d.useState(null),[ro,so]=d.useState(!1),[Pl,qo]=d.useState(null),ar=d.useRef(null),[xs,Wo]=d.useState(null),Or=d.useRef(null),[cd,Zr]=d.useState(!1),[aa,ud]=d.useState([]),[dd,Tl]=d.useState([]),[fd,Xt]=d.useState(null),[E,O]=d.useState(null),[I,we]=d.useState(!1),[Pe,at]=d.useState([]),[Jr,Dr]=d.useState(!1),[Vp,Rl]=d.useState(null),_e=d.useRef(null),oo=d.useRef(300),io=d.useRef(300),It=d.useRef([]),mn=d.useRef(null),hd=d.useRef(!1),ao=d.useRef(!1),Uo=d.useRef(null),[qp,Wp]=d.useState(!1),Ml=Nn.isNativePlatform();d.useEffect(()=>()=>{Ei.stopAnalysis(),mn.current&&clearInterval(mn.current),Or.current&&clearTimeout(Or.current),ao.current&&(te.stopSession().catch(()=>{}),ao.current=!1),Uo.current&&(Uo.current.remove().catch(()=>{}),Uo.current=null)},[]),d.useEffect(()=>{localStorage.setItem("blindfold-settings-elo",String(vt))},[vt]),d.useEffect(()=>{localStorage.setItem("blindfold-settings-color",tn)},[tn]),d.useEffect(()=>{localStorage.setItem("blindfold-settings-time",q)},[q]),d.useEffect(()=>{e&&e>0&&Dr(!0)},[e]),d.useEffect(()=>{_e.current=l,oo.current=R,io.current=D,It.current=y},[l,R,D,y]),d.useEffect(()=>{if(!u||k||!l||!Je)return;const K={pgn:l.pgn(),playerColor:N,whiteTime:R,blackTime:D,timeControl:q,botElo:Je.elo,isBlindfold:z,blindfoldDifficulty:Y,remainingPeeks:ne,savedAt:Date.now()};bA(K)},[u,k,l,Je,y,N,R,D,q,z,Y,ne]);const _l=d.useCallback(()=>{fc(),mn.current&&(clearInterval(mn.current),mn.current=null),Z.current&&(clearTimeout(Z.current),Z.current=null),c(null),f(!1),C(null),h("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"),p([]),w(null),v([]),S(null),Wt(null),jn(!1),A(!1),Hn(null),rn.stop(),W.current=0,re(0),ye(0),Fe.current=!1,ze.current=null,Ae.current=[],oe.current=0,Ne.current=0,Ce.current=0,Re.current=0,Me.current=0,F.current=0,H.current=0,he.current=[],ie.current=!1,ae.current&&(clearTimeout(ae.current),ae.current=null),so(!1),qo(null),ar.current=null,Xt(null),O(null),Wo(null),Or.current&&(clearTimeout(Or.current),Or.current=null)},[]);d.useEffect(()=>{t&&t(ro?"reconstruction":I?"analysis":u&&!k?"in_game":i?"idle":"setup")},[ro,I,u,k,i,t]);const la=d.useCallback(()=>{if(u&&_e.current&&It.current.length>0&&!k&&Je){mn.current&&(clearInterval(mn.current),mn.current=null);const K=_e.current.pgn()||"",ue={date:new Date().toISOString(),result:"loss",playerColor:N,botName:String(Je.elo),botElo:Je.elo,moveCount:It.current.length,pgn:K,clarityScore:0,isFavorite:!1,timeControl:q};g0(ue).then(ge=>{ge&&console.log("[Game] Saved resigned game to history:",ge)})}rn.stop(),so(!1),we(!1),Zr(!1),Dr(!1),Rl(null),_l(),a(!0)},[u,k,Je,N,q,_l]);d.useEffect(()=>(n&&(n.current=la),()=>{n&&(n.current=null)}),[la,n]);const Ho=d.useCallback((K,ue,ge)=>{var ct;const Ue=K==="draw"?"draw":K==="white_win"&&N==="white"||K==="black_win"&&N==="black"?"win":"loss",Le=W.current===0;ud([...Ae.current]),Tl([...he.current]),at([...It.current]);const rt=It.current.length,ce=IR(Ue,W.current,se,Ae.current,ue,ge,{botElo:$e.current,wasPeekFree:Le,totalMoves:rt,voiceCorrections:Ne.current,voiceCommands:Ce.current,reconstructionVoiceInputs:Re.current,reconstructionTouchInputs:Me.current,gameVoiceMoves:F.current,gameTouchMoves:H.current,squareInquiries:he.current,isBlindfold:z,wasAssisted:ie.current});if(kt(ce),window.dispatchEvent(new CustomEvent("statsUpdated")),ke.boardReconstructionEnabled||Zr(!0),Je&&rt>0){const En=((ct=_e.current)==null?void 0:ct.pgn())||"",Pn={date:new Date().toISOString(),result:Ue,playerColor:N,botName:String(Je.elo),botElo:Je.elo,moveCount:rt,pgn:En,clarityScore:ue??0,isFavorite:!1,timeControl:q};g0(Pn).then(Kn=>{Kn&&console.log("[Game] Saved game to history:",Kn)})}else Je&&rt===0&&console.log("[Game] Zero-move game detected. Not saving to history.")},[N,se,z,Je,q]),Bt=d.useCallback(K=>{fc(),mn.current&&(clearInterval(mn.current),mn.current=null),C(K),rn.stop(),We&&Rt(K==="draw"?"Game drawn":K==="white_win"&&N==="white"||K==="black_win"&&N==="black"?"You win!":"You lose"),ke.boardReconstructionEnabled&&_e.current?(ar.current={result:K,fen:_e.current.fen()},qo(_e.current.fen()),Wo(3)):Ho(K)},[N,We,ke.boardReconstructionEnabled,Ho]);d.useEffect(()=>{if(xs!==null)return xs>0?Or.current=setTimeout(()=>{Wo(K=>K!==null?K-1:null)},1e3):(so(!0),Wo(null)),()=>{Or.current&&clearTimeout(Or.current)}},[xs]);const PN=d.useCallback((K,ue,ge,Ie)=>{Re.current=ge,Me.current=Ie,Xt(K),O(ue),ar.current&&(Ho(ar.current.result,K,ue),ar.current=null)},[Ho]),TN=d.useCallback(()=>{so(!1),qo(null),ar.current=null,la()},[la]),RN=d.useCallback(()=>{Xt(null),O(null),ar.current&&Ho(ar.current.result),so(!1),qo(null),ar.current=null,Zr(!0)},[Ho]),ca=d.useCallback(async(K,ue,ge,Ie)=>{if(!ue)return null;jn(!0);try{const Ue=N==="white"?io.current:oo.current,Le=(ge==null?void 0:ge.length)||0,rt=await uA(K,ue,ge,Ie);if(!rt)throw new Error("Bot failed to generate move");rt.isBookMove&&oe.current++;let ce;if(rt.isFreeCapture)ce=2e3;else if(ke.botThinkingTimeEnabled){const ct=Math.ceil((Le+2)/2),En=aA(K);ce=lA(ct,En,Ue,q)}else{const ct=Math.ceil((Le+2)/2);ce=iA(ct,Ue,K,N==="white"?"black":"white",Ie)}return ce>2e3&&Yt(!0),await kA(ce),Yt(!1),rt}catch(Ue){return console.error("Error getting bot move:",Ue),s({title:"Error",description:"Bot failed to respond",variant:"destructive"}),null}finally{jn(!1),Yt(!1)}},[s,N,ke.botThinkingTimeEnabled,q]),Up=async(K,ue)=>{W.current=0,$e.current=K.elo;const ge=new Ln;c(ge),_e.current=ge,h(ge.fen()),p([]),It.current=[],w(null),v([]),C(null),Wt(K);const Ie=ue==="random"?Math.random()<.5?"white":"black":ue;j(Ie);const Ue=q==="practice"?99999999:q==="blitz"?300:q==="rapid"?900:1800;if(P(Ue),_(Ue),oo.current=Ue,io.current=Ue,ve(z?jA[Y].maxPeeks:Number.POSITIVE_INFINITY),f(!0),Lt(!1),Ie==="black"){const Le=await ca(ge.fen(),K.elo);if(Le&&_e.current){const rt=_e.current.move(Le.move);rt&&S({from:rt.from,to:rt.to}),h(_e.current.fen());const ce=[Le.move];p(ce),It.current=ce,ze.current=Date.now();try{qe.impact({style:He.Medium}).catch(()=>{}),setTimeout(()=>{qe.impact({style:He.Medium}).catch(()=>{})},100)}catch{}if(We){const ct=Xo(Le.move,Le.move.includes("x"),_e.current.isCheck(),!1);Dt.current=ct,Rt(ct)}}}},MN=d.useCallback(async K=>{const ue=new Ln;ue.loadPgn(K.pgn);const ge=hu(K.botElo),Ie={id:`elo_${K.botElo}`,elo:K.botElo,difficulty:`elo_${Math.round(K.botElo/200)*200}`,depth:ge.depth,randomPercent:ge.randomPercent};W.current=0,$e.current=Ie.elo,re(0),ye(0),Fe.current=!1,ze.current=null,Ae.current=[],oe.current=0,Ne.current=0,Ce.current=0,Re.current=0,Me.current=0,F.current=0,H.current=0,he.current=[],c(ue),_e.current=ue,h(ue.fen());const Ue=ue.history();p(Ue),It.current=Ue,w(null),v([]),C(null),Wt(Ie),j(K.playerColor),P(K.whiteTime),_(K.blackTime),oo.current=K.whiteTime,io.current=K.blackTime,M(K.timeControl),Q(K.isBlindfold),T(K.blindfoldDifficulty),ve(K.remainingPeeks);const Le=ue.history({verbose:!0});if(Le.length>0){const ct=Le[Le.length-1];S({from:ct.from,to:ct.to})}a(!1),f(!0),Lt(!1),fc();const rt=ue.turn(),ce=K.playerColor==="white"?"b":"w";if(rt===ce){const ct=await ca(ue.fen(),Ie.elo,Ue);if(ct&&_e.current){const En=_e.current.move(ct.move);En&&S({from:En.from,to:En.to}),h(_e.current.fen());const Pn=[...It.current,ct.move];p(Pn),It.current=Pn,ze.current=Date.now();try{qe.impact({style:He.Medium}).catch(()=>{})}catch{}if(We){const Kn=Xo(ct.move,ct.move.includes("x"),_e.current.isCheck(),!1);Dt.current=Kn,Rt(Kn)}}}},[s,ca,We]);d.useEffect(()=>{if(k!==null){mn.current&&(clearInterval(mn.current),mn.current=null);return}if(u&&l&&q!=="practice"){const K=setInterval(()=>{l.turn()==="w"?P(ge=>{const Ie=Math.max(0,ge-1);return oo.current=Ie,Ie===0&&ge>0&&Bt("black_win"),Ie}):_(ge=>{const Ie=Math.max(0,ge-1);return io.current=Ie,Ie===0&&ge>0&&Bt("white_win"),Ie})},1e3);return mn.current=K,()=>{clearInterval(K),mn.current=null}}},[u,l,Bt,q,k]),d.useEffect(()=>((async()=>{try{u&&z&&ke.keepAwakeEnabled?(await gf.keepAwake(),console.log("[KeepAwake] Screen wake lock enabled for blindfold game")):(await gf.allowSleep(),console.log("[KeepAwake] Screen wake lock released"))}catch(ue){console.log("[KeepAwake] Plugin not available (web mode):",ue)}})(),()=>{gf.allowSleep().catch(()=>{})}),[u,z,ke.keepAwakeEnabled]),d.useEffect(()=>{if(!Ml||!Ye||!u||!_e.current||k!==null)return;let K=!1;return(async()=>{try{if(!await Fo()||K){console.warn("[NativeVoice] Voice not ready or cancelled");return}if(console.log("[NativeVoice] Starting voice session..."),Uo.current&&await Uo.current.remove(),K||(console.log("[NativeVoice] Setting up onSpeechResult listener..."),Uo.current=await te.addListener("onSpeechResult",Ie=>{console.log("[NativeVoice] *** RECEIVED onSpeechResult:",Ie.text);const Ue=Ie.text,Le=_e.current;if(!Le){console.log("[NativeVoice] No game ref, ignoring");return}const rt=Ue.trim();if(rt.length<2){console.log("[NativeVoice] Too short, ignoring:",rt);return}Ce.current++,Ke(Ue),console.log("[NativeVoice] Processing transcript:",Ue);const ce=Ue.toLowerCase();if(ce.includes("repeat")||ce.includes("say again")||ce==="again"||ce.includes("what was that")){Dt.current&&We?te.speakAndListen({text:Dt.current}).catch(()=>{}):te.startListening().catch(()=>{});return}if(no){if(ce.includes("yes")||ce.includes("confirm")||ce.includes("i confirm")){qe.impact({style:He.Medium}).catch(()=>{}),ir(!1),Bt(N==="white"?"black_win":"white_win"),Ke(null);return}if(ce.includes("no")||ce.includes("cancel")||ce.includes("never mind")){qe.impact({style:He.Light}).catch(()=>{}),ir(!1),Ke(null),te.startListening().catch(()=>{});return}te.startListening().catch(()=>{});return}if(mt){Z.current&&(clearTimeout(Z.current),Z.current=null);const pe=Hv(Ue);let ee=null;if(mt.isPawnCapture&&mt.pawnFiles&&pe.file?ee=Yv(mt.candidates,pe.file):(pe.file||pe.rank)&&(ee=Kv(mt.candidates,pe)),ee){Hn(null);try{const me=Le.move(ee);if(me){F.current++,S({from:me.from,to:me.to}),h(Le.fen());const be=[...It.current,ee];if(p(be),It.current=be,qe.impact({style:He.Light}).catch(()=>{}),We){const Qe=Xo(ee,ee.includes("x"),!1,!1);Dt.current=Qe,te.speakAndListen({text:Qe}).catch(()=>{})}else te.startListening().catch(()=>{});Le.isCheckmate()?Bt(Le.turn()==="w"?"black_win":"white_win"):Le.isDraw()&&Bt("draw"),Ke(null)}}catch(me){console.error("[NativeVoice] Disambiguation move error:",me),te.startListening().catch(()=>{})}return}Ne.current++;const le=mt.isPawnCapture?"I didn't catch that. Which file?":"I didn't catch that. Which piece?";We?te.speakAndListen({text:le}).catch(()=>{}):te.startListening().catch(()=>{});return}const ct=ce.match(/what(?:'?s| is)?\s+(?:on\s+)?([a-h])[\s-]?([1-8])/);if(ct){const pe=`${ct[1]}${ct[2]}`;z&&he.current.push(pe);const ee=Le.get(pe);let le="";ee?le=`${ee.color==="w"?"White":"Black"} ${{p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[ee.type]} on ${pe}`:le=`${pe.toUpperCase()} is empty`,qe.impact({style:He.Light}).catch(()=>{}),We?te.speakAndListen({text:le}).catch(()=>{}):te.startListening().catch(()=>{}),Ke(null);return}const En=ce.match(/where\s+(?:is|are)\s+(?:my\s+)?(\w+)/);if(En){const pe=En[1].toLowerCase(),le={king:"k",queen:"q",rook:"r",bishop:"b",knight:"n",pawn:"p",kings:"k",queens:"q",rooks:"r",bishops:"b",knights:"n",pawns:"p",horse:"n",horses:"n",castle:"r",castles:"r"}[pe];if(le){const me=N==="white"?"w":"b",be=[],Qe=["a","b","c","d","e","f","g","h"],ot=["1","2","3","4","5","6","7","8"];for(const ut of Qe)for(const xt of ot){const pn=`${ut}${xt}`,nn=Le.get(pn);nn&&nn.type===le&&nn.color===me&&be.push(pn.toUpperCase())}const et={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"};let pt="";be.length===0?pt=`You have no ${et[le]}`:be.length===1?pt=`Your ${et[le]} is on ${be[0]}`:pt=`Your ${et[le]}s are on ${be.join(" and ")}`,qe.impact({style:He.Light}).catch(()=>{}),We?te.speakAndListen({text:pt}).catch(()=>{}):te.startListening().catch(()=>{}),Ke(null);return}}if(ce.includes("last move")||ce.includes("previous move")||ce.includes("opponent's move")){qe.impact({style:He.Light}).catch(()=>{});const pe=Le.history({verbose:!0});let ee="";if(pe.length===0)ee="No moves have been made yet";else{const le=pe[pe.length-1],be={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[le.piece]||le.piece,Qe=le.captured?" takes":"",ot=le.to.toUpperCase();le.piece==="p"?ee=`${le.from.toUpperCase()}${Qe} ${ot}`:ee=`${be}${Qe} ${ot}`}We?te.speakAndListen({text:ee}).catch(()=>{}):te.startListening().catch(()=>{}),Ke(null);return}const Pn=ce.match(/legal\s+moves?\s+(?:for\s+)?(?:my\s+)?(\w+)/);if(Pn){const pe=Pn[1].toLowerCase(),le={king:"k",queen:"q",rook:"r",bishop:"b",knight:"n",pawn:"p",kings:"k",queens:"q",rooks:"r",bishops:"b",knights:"n",pawns:"p",horse:"n",horses:"n",castle:"r",castles:"r"}[pe];if(le){qe.impact({style:He.Light}).catch(()=>{});const be={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"}[le],ot=Le.moves({verbose:!0}).filter(ut=>ut.piece===le),et=Array.from(new Set(ot.map(ut=>ut.to.toUpperCase())));let pt="";if(et.length===0)pt=`Your ${be} has no legal moves`;else if(et.length<=4)pt=`Your ${be} can move to ${et.join(", ")}`;else{const ut=et.slice(0,3);pt=`Your ${be} has ${et.length} legal moves, including ${ut.join(", ")}`}We?te.speakAndListen({text:pt}).catch(()=>{}):te.startListening().catch(()=>{}),Ke(null);return}}if(ce.includes("resign")||ce.includes("quit")||ce.includes("give up")||ce.includes("i resign")){qe.impact({style:He.Medium}).catch(()=>{}),ir(!0),Ke(null),We?te.speakAndListen({text:"Resign? Say yes or no."}).catch(()=>{}):te.startListening().catch(()=>{});return}if(ce==="peek"||ce==="peak"){if(ne<=0||$==="no_board"||Y==="grandmaster"){We?te.speakAndListen({text:"Peeking is not allowed"}).catch(()=>{}):te.startListening().catch(()=>{}),Ke(null);return}qe.impact({style:He.Light}).catch(()=>{}),ie.current=!0,A(!0),ve(pe=>pe-1),ae.current&&clearTimeout(ae.current),ae.current=setTimeout(()=>{A(!1),ae.current=null},5e3),We?te.speakAndListen({text:"Board visible for 5 seconds"}).catch(()=>{}):te.startListening().catch(()=>{}),Ke(null);return}if(ce.includes("clock")||ce.includes("how much time")||ce.includes("time left")||ce.includes("remaining")){qe.impact({style:He.Light}).catch(()=>{});const pe=N==="white"?R:D,ee=Math.floor(pe/60),le=pe%60;let me="";ee>0?me=`${ee} minute${ee!==1?"s":""} and ${le} second${le!==1?"s":""} remaining`:me=`${le} second${le!==1?"s":""} remaining`,We?te.speakAndListen({text:me}).catch(()=>{}):te.startListening().catch(()=>{}),Ke(null);return}if(ce.includes("material")){qe.impact({style:He.Light}).catch(()=>{});const pe={p:1,n:3,b:3,r:5,q:9,k:0};let ee=0,le=0;const me=Le.board();for(const ot of me)for(const et of ot)if(et){const pt=pe[et.type]||0;et.color==="w"?ee+=pt:le+=pt}const be=ee-le;let Qe="";be>0?Qe=`White is up ${be} point${be!==1?"s":""}`:be<0?Qe=`Black is up ${Math.abs(be)} point${Math.abs(be)!==1?"s":""}`:Qe="Material is equal",We?te.speakAndListen({text:Qe}).catch(()=>{}):te.startListening().catch(()=>{}),Ke(null);return}if(ce.includes("eval")||ce.includes("evaluation")){qe.impact({style:He.Light}).catch(()=>{}),ie.current=!0,We&&te.speakAndListen({text:"Evaluating position"}).catch(()=>{}),Ei.analyzePosition(Le.fen(),5e5).then(pe=>{let ee="";if(pe.isMate&&pe.mateIn!==void 0)ee=pe.mateIn>0?`Mate in ${pe.mateIn} for white`:`Mate in ${Math.abs(pe.mateIn)} for black`;else{const le=Math.abs(pe.evaluation);le<.3?ee="Position is equal":pe.evaluation>0?ee=`White is better by ${le.toFixed(1)}`:ee=`Black is better by ${le.toFixed(1)}`}We?te.speakAndListen({text:ee}).catch(()=>{}):te.startListening().catch(()=>{})}).catch(()=>{We?te.speakAndListen({text:"Unable to evaluate position"}).catch(()=>{}):te.startListening().catch(()=>{})}),Ke(null);return}const Kn=Le.moves({verbose:!0}).map(pe=>pe.san),wt=Uv(Ue,Kn);if(wt.move&&!wt.isAmbiguous)try{const pe=Le.move(wt.move);if(pe){F.current++,S({from:pe.from,to:pe.to});const ee=Le.fen();h(ee);const le=[...It.current,wt.move];p(le),It.current=le,qe.impact({style:He.Light}).catch(()=>{}),Le.isCheckmate()?Bt(Le.turn()==="w"?"black_win":"white_win"):Le.isDraw()&&Bt("draw"),Ke(null),te.startListening().catch(()=>{})}}catch(pe){console.error("[NativeVoice] Move error:",pe),te.startListening().catch(()=>{})}else if(wt.isAmbiguous&&wt.candidates.length>1){const pe=Xv(wt.candidates),ee=pe?Qv(wt.candidates):[];let le;if(pe&&ee.length===2){const me=ee[0].toUpperCase(),be=ee[1].toUpperCase();le=`Did you mean ${me} takes ${wt.targetSquare} or ${be} takes ${wt.targetSquare}?`}else{const me=Gv(wt.candidates),be=wt.piece==="R"?"rook":wt.piece==="N"?"knight":wt.piece==="B"?"bishop":wt.piece==="Q"?"queen":"piece";le=me.length===2?`Two ${be}s can move to ${wt.targetSquare}. The one on ${me[0]} or ${me[1]}?`:`Multiple ${be}s can move to ${wt.targetSquare}. Which one?`}Hn({candidates:wt.candidates,piece:wt.piece,targetSquare:wt.targetSquare,isPawnCapture:pe,pawnFiles:ee}),Ke(`Clarify: ${wt.candidates.join(" or ")}`),We?te.speakAndListen({text:le}).catch(()=>{}):te.startListening().catch(()=>{}),Z.current=setTimeout(()=>{Hn(null),Ke(null),We?te.speakAndListen({text:"Move cancelled"}).catch(()=>{}):te.startListening().catch(()=>{})},1e4)}else Ke(null),te.startListening().catch(()=>{})}),K))return;console.log("[NativeVoice] Calling startSession..."),await te.startSession(),ao.current=!0,oa(!0),Wp(!1),console.log("[NativeVoice] Session started - listener active, waiting for speech")}catch(ge){console.error("[NativeVoice] Setup failed, falling back to web voice:",ge),Wp(!0),ao.current=!1}})(),()=>{K=!0,ao.current&&(te.stopSession().catch(()=>{}),ao.current=!1,oa(!1))}},[Ml,Ye,u,k,We,Bt]),d.useEffect(()=>{if(Ml&&!qp)return;if(!Ye){rn.stop();return}if(!u||!_e.current||k!==null){rn.stop();return}Fi.register("game"),rn.setOnResult(async(Ie,Ue)=>{const Le=_e.current;if(!Le)return;if(Ue.trim().length<2){console.log("[Game] Ignoring empty/short transcript:",Ue);return}Ce.current++,Ke(Ue);const ce=Ue.toLowerCase();if(no){if(ce.includes("yes")||ce.includes("confirm")||ce.includes("i confirm")){try{qe.impact({style:He.Medium}).catch(()=>{})}catch{}ir(!1),Bt(N==="white"?"black_win":"white_win"),Ke(null);return}if(ce.includes("no")||ce.includes("cancel")||ce.includes("never mind")){try{qe.impact({style:He.Light}).catch(()=>{})}catch{}ir(!1),Ke(null);return}return}if(ce.includes("repeat")||ce.includes("say again")||ce.includes("what was that")||ce.includes("again")){Dt.current&&We&&Rt(Dt.current).catch(ee=>console.warn("[Voice] Echo failed:",ee));return}const ct=ce.match(/what(?:'?s| is)?\s+(?:on\s+)?([a-h])[\s-]?([1-8])/);if(ct){const ee=`${ct[1]}${ct[2]}`;z&&he.current.push(ee);const le=Le.get(ee);let me="";if(le){const be=le.color==="w"?"White":"Black",ot={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[le.type]||le.type;me=`${be} ${ot} on ${ee}`}else me=`${ee.toUpperCase()} is empty`;We&&Rt(me).catch(be=>console.warn("[Voice] Echo failed:",be)),Ke(null);return}if(ce.includes("last move")||ce.includes("previous move")||ce.includes("opponent's move")){try{qe.impact({style:He.Light}).catch(()=>{})}catch{}const ee=Le.history({verbose:!0});let le="";if(ee.length===0)le="No moves have been made yet";else{const me=ee[ee.length-1],Qe={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[me.piece]||me.piece,ot=me.captured?" takes":"",et=me.from.toUpperCase(),pt=me.to.toUpperCase();me.piece==="p"?le=`${et}${ot} ${pt}`:le=`${Qe}${ot} ${pt}`}We&&Rt(le).catch(me=>console.warn("[Voice] Echo failed:",me)),Ke(null);return}if(/\b(how much time|what('?s| is) the time|time left|clock|my time)\b/.test(ce)){try{qe.impact({style:He.Light}).catch(()=>{})}catch{}const ee=N==="white"?oo.current:io.current,le=N==="white"?io.current:oo.current,me=Qe=>{const ot=Math.floor(Qe/60),et=Qe%60;return ot>0&&et>0?`${ot} minute${ot!==1?"s":""} ${et} second${et!==1?"s":""}`:ot>0?`${ot} minute${ot!==1?"s":""}`:`${et} second${et!==1?"s":""}`},be=`You have ${me(ee)}. Opponent has ${me(le)}.`;We&&Rt(be).catch(Qe=>console.warn("[Voice] Echo failed:",Qe)),Ke(null);return}const Pn=ce.match(/where(?:'?s| is| are)?\s+(?:my\s+)?(\w+)/);if(Pn){const ee=Pn[1].toLowerCase(),me={king:"k",kings:"k",queen:"q",queens:"q",rook:"r",rooks:"r",castle:"r",castles:"r",bishop:"b",bishops:"b",knight:"n",knights:"n",horse:"n",horses:"n",pawn:"p",pawns:"p"}[ee];if(me){try{qe.impact({style:He.Light}).catch(()=>{})}catch{}const be=N==="white"?"w":"b",ot={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"}[me],et=[],pt=["a","b","c","d","e","f","g","h"];for(const xt of pt)for(let pn=1;pn<=8;pn++){const nn=`${xt}${pn}`,lo=Le.get(nn);lo&&lo.type===me&&lo.color===be&&et.push(nn.toUpperCase())}let ut="";et.length===0?ut=`You have no ${ot}s`:et.length===1?ut=`Your ${ot} is on ${et[0]}`:ut=`You have ${ot}s on ${et.slice(0,-1).join(", ")} and ${et[et.length-1]}`,We&&Rt(ut).catch(xt=>console.warn("[Voice] Echo failed:",xt)),Ke(null);return}}if(ce.includes("material")){try{qe.impact({style:He.Light}).catch(()=>{})}catch{}const ee={p:1,n:3,b:3,r:5,q:9},le={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen"},me={p:0,n:0,b:0,r:0,q:0},be={p:0,n:0,b:0,r:0,q:0},Qe=["a","b","c","d","e","f","g","h"];for(const ut of Qe)for(let xt=1;xt<=8;xt++){const pn=`${ut}${xt}`,nn=Le.get(pn);nn&&nn.type!=="k"&&(nn.color==="w"?me[nn.type]++:be[nn.type]++)}const ot={};let et=0;for(const ut of["q","r","b","n","p"]){const xt=me[ut]-be[ut];xt!==0&&(ot[ut]=xt,et+=xt*ee[ut])}let pt="";if(et===0)pt="Material is equal";else{const ut=et>0?"White":"Black",xt=Math.abs(et),pn=[];for(const nn of["q","r","b","n","p"]){const lo=et>0?ot[nn]:-(ot[nn]||0);if(lo&&lo>0){const Gp=lo,Qp=le[nn];pn.push(Gp===1?`a ${Qp}`:`${Gp} ${Qp}s`)}}if(pn.length>0){const nn=pn.length===1?pn[0]:`${pn.slice(0,-1).join(", ")} and ${pn[pn.length-1]}`;pt=`${ut} is up ${nn}`}else pt=`${ut} is up by ${xt} point${xt!==1?"s":""}`}We&&Rt(pt).catch(ut=>console.warn("[Voice] Echo failed:",ut)),Ke(null);return}const Kn=ce.match(/legal\s+moves?\s+(?:for\s+)?(?:my\s+)?(\w+)/);if(Kn){const ee=Kn[1].toLowerCase(),me={king:"k",queen:"q",rook:"r",bishop:"b",knight:"n",pawn:"p",kings:"k",queens:"q",rooks:"r",bishops:"b",knights:"n",pawns:"p",horse:"n",horses:"n",castle:"r",castles:"r"}[ee];if(me){try{qe.impact({style:He.Light}).catch(()=>{})}catch{}const Qe={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"}[me],et=Le.moves({verbose:!0}).filter(xt=>xt.piece===me),pt=Array.from(new Set(et.map(xt=>xt.to.toUpperCase())));let ut="";if(pt.length===0)ut=`Your ${Qe} has no legal moves`;else if(pt.length<=4)ut=`Your ${Qe} can move to ${pt.join(", ")}`;else{const xt=pt.slice(0,3);ut=`Your ${Qe} has ${pt.length} legal moves, including ${xt.join(", ")}`}We&&Rt(ut).catch(xt=>console.warn("[Voice] Echo failed:",xt)),Ke(null);return}}if(ce.includes("resign")||ce.includes("quit")||ce.includes("give up")||ce.includes("i resign")){try{qe.impact({style:He.Medium}).catch(()=>{})}catch{}ir(!0),Ke(null);return}if(ce==="peek"||ce==="peak"){if($==="no_board"||Y==="grandmaster"){We&&Rt("Peeking is not allowed in this mode").catch(ee=>console.warn("[Voice] Echo failed:",ee)),Ke(null);return}try{qe.impact({style:He.Light}).catch(()=>{})}catch{}ie.current=!0,A(!0),ae.current&&clearTimeout(ae.current),ae.current=setTimeout(()=>{A(!1),ae.current=null},5e3),We&&Rt("Board visible for 5 seconds").catch(ee=>console.warn("[Voice] Echo failed:",ee)),Ke(null);return}if(ce.includes("eval")||ce.includes("evaluation")){try{qe.impact({style:He.Light}).catch(()=>{})}catch{}ie.current=!0,We&&(async()=>{try{const ee=await Ei.getBestMove(Le.fen(),{depth:12});let le="";if(ee.evaluation!==void 0){const me=ee.evaluation,be=me>=0?"plus":"minus",Qe=Math.abs(me).toFixed(1);Math.abs(me)>=100?le=me>0?"White has checkmate":"Black has checkmate":Math.abs(me)<.3?le="Position is equal":le=`Evaluation is ${be} ${Qe}`}else le="Unable to evaluate position";await Rt(le)}catch(ee){console.warn("[Voice] Eval failed:",ee),Rt("Unable to evaluate position").catch(()=>{})}})(),Ke(null);return}if(mt){Z.current&&(clearTimeout(Z.current),Z.current=null);const ee=Hv(Ue);let le=null;if(mt.isPawnCapture&&mt.pawnFiles&&ee.file?le=Yv(mt.candidates,ee.file):(ee.file||ee.rank)&&(le=Kv(mt.candidates,ee)),le){if(Hn(null),We){const Qe=Xo(le,le.includes("x"),!1,!1);Dt.current=Qe,Rt(Qe).catch(ot=>console.warn("[Voice] Echo failed:",ot))}if(!_e.current)return;const be=_e.current.move(le);if(be){F.current++,h(_e.current.fen()),S({from:be.from,to:be.to});const Qe=[...It.current,be.san];if(p(Qe),It.current=Qe,w(null),v([]),Ke(null),_e.current.isCheckmate()){const ot=_e.current.turn()==="w"?"black_win":"white_win";Bt(ot)}else(_e.current.isDraw()||_e.current.isStalemate()||_e.current.isThreefoldRepetition()||_e.current.isInsufficientMaterial())&&Bt("draw")}return}Ne.current++;const me=mt.isPawnCapture?"I didn't catch that. Which file?":"I didn't catch that. Which piece?";We&&Rt(me).catch(be=>console.warn("[Voice] Echo failed:",be)),Z.current=setTimeout(async()=>{Hn(null),Ke(null),We&&Rt("Move cancelled").catch(be=>console.warn("[Voice] Echo failed:",be))},1e4);return}const wt=Le.moves(),pe=Uv(Ue,wt);if(pe.move){if(We){const le=Xo(pe.move,pe.move.includes("x"),!1,!1);Dt.current=le,Rt(le).catch(me=>console.warn("[Voice] Echo failed:",me))}if(!_e.current)return;const ee=_e.current.move(pe.move);if(ee){if(ze.current!==null){const me=Date.now()-ze.current;Ae.current.push(me),ze.current=null}if(z){if(!Fe.current){const me=U+1;re(me),me>se&&ye(me)}Fe.current=!1}F.current++;try{qe.impact({style:He.Light}).catch(()=>{})}catch{}h(_e.current.fen()),S({from:ee.from,to:ee.to});const le=[...It.current,ee.san];if(p(le),It.current=le,w(null),v([]),Ke(null),_e.current.isCheckmate()){const me=_e.current.turn()==="w"?"black_win":"white_win";Bt(me)}else(_e.current.isDraw()||_e.current.isStalemate()||_e.current.isThreefoldRepetition()||_e.current.isInsufficientMaterial())&&Bt("draw")}}else if(pe.isAmbiguous&&pe.candidates.length>1){const ee=Xv(pe.candidates),le=ee?Qv(pe.candidates):[];let me;if(ee&&le.length===2){const be=le[0].toUpperCase(),Qe=le[1].toUpperCase();me=`Did you mean ${be} takes ${pe.targetSquare} or ${Qe} takes ${pe.targetSquare}?`}else{const be=Gv(pe.candidates),Qe=pe.piece==="R"?"rook":pe.piece==="N"?"knight":pe.piece==="B"?"bishop":pe.piece==="Q"?"queen":"piece";me=be.length===2?`Two ${Qe}s can move to ${pe.targetSquare}. The one on ${be[0]} or ${be[1]}?`:`Multiple ${Qe}s can move to ${pe.targetSquare}. Which one?`}Hn({candidates:pe.candidates,piece:pe.piece,targetSquare:pe.targetSquare,isPawnCapture:ee,pawnFiles:le}),Ke(`Clarify: ${pe.candidates.join(" or ")}`),We&&Rt(me).catch(be=>console.warn("[Voice] Echo failed:",be)),Z.current=setTimeout(async()=>{Hn(null),Ke(null),We&&Rt("Move cancelled").catch(be=>console.warn("[Voice] Echo failed:",be))},1e4)}else Ne.current++,s({title:"Didn't understand",description:`Heard: "${Ue}". Try again.`,variant:"destructive"}),Ut(ee=>ee+1)}),rn.setOnListeningChange(oa);const K=_e.current,ue=K.turn();if((ue==="w"&&N==="white"||ue==="b"&&N==="black")&&!Qt&&!gs&&k===null&&!hd.current){const Ie=K.moves();rn.setLegalMoves(Ie),rn.start(),rn.getMuted()&&rn.resumeLoop()}else k!==null&&rn.stop();return()=>{rn.reset(),Fi.clearProtectedLane(),Z.current&&(clearTimeout(Z.current),Z.current=null)}},[Ye,u,m,N,Qt,gs,k,We,s,Bt,mt,to,no,qp]),d.useEffect(()=>{if(!Je||!_e.current||k!==null)return;const K=_e.current,ue=K.turn();if((ue==="w"&&N==="black"||ue==="b"&&N==="white")&&u&&!Qt){const Ie=K.history(),Ue=K.fen(),Le=b?NA({from:b.from,to:b.to}):void 0;ca(Ue,Je.elo,Ie,Le).then(async rt=>{if(rt&&_e.current){const ce=_e.current.move(rt.move);ce&&S({from:ce.from,to:ce.to});const ct=_e.current.fen();h(ct);const En=[...It.current,rt.move];p(En),It.current=En,ze.current=Date.now();try{qe.impact({style:He.Medium}).catch(()=>{}),setTimeout(()=>{qe.impact({style:He.Medium}).catch(()=>{})},100)}catch{}if(We){const Pn=_e.current.isCheck(),Kn=_e.current.isCheckmate(),wt=rt.move.includes("x"),pe=Xo(rt.move,wt,Pn,Kn);if(Dt.current=pe,Ml&&ao.current&&Ye)try{await te.speakAndListen({text:pe})}catch(ee){console.error("[NativeVoice] TTS error:",ee)}else{hd.current=!0;try{await Rt(pe)}catch(ee){console.error("[Voice] TTS error:",ee)}finally{hd.current=!1}}}if(_e.current.isCheckmate()){const Pn=_e.current.turn()==="w"?"black_win":"white_win";Bt(Pn)}else(_e.current.isDraw()||_e.current.isStalemate()||_e.current.isThreefoldRepetition()||_e.current.isInsufficientMaterial())&&Bt("draw")}})}},[m,Je,N,u,Qt,k,We,Ye,ca,Bt,b]);const Al=K=>{if(K>=99999)return"";const ue=Math.floor(K/60),ge=K%60;return`${ue}:${ge.toString().padStart(2,"0")}`},_N=(K,ue)=>{if(!l)return!1;const ge=l.get(K);if(!ge||ge.type!=="p")return!1;const Ie=ue[1];return ge.color==="w"&&Ie==="8"||ge.color==="b"&&Ie==="1"},Hp=async(K,ue,ge="q")=>{if(l)try{const Ie=l.move({from:K,to:ue,promotion:ge});if(Ie){if(H.current++,ze.current!==null){const rt=Date.now()-ze.current;Ae.current.push(rt),ze.current=null}if(z){if(!Fe.current){const rt=U+1;re(rt),rt>se&&ye(rt)}Fe.current=!1}const Ue=l.fen();h(Ue),S({from:Ie.from,to:Ie.to});const Le=[...It.current,Ie.san];p(Le),It.current=Le,w(null),v([]),l.isCheckmate()?Bt(l.turn()==="w"?"black_win":"white_win"):(l.isDraw()||l.isStalemate()||l.isThreefoldRepetition()||l.isInsufficientMaterial())&&Bt("draw")}}catch(Ie){console.error("Invalid move:",Ie)}},AN=d.useCallback(K=>{if(!(!l||k||!(l.turn()==="w"&&N==="white"||l.turn()==="b"&&N==="black")))if(g)if(x.includes(K))_N(g,K)?Cn({from:g,to:K}):Hp(g,K);else{const ge=l.get(K);if(ge&&(ge.color==="w"&&N==="white"||ge.color==="b"&&N==="black")){w(K);const Ie=l.moves({square:K,verbose:!0});v(Ie.map(Ue=>Ue.to))}else w(null),v([])}else{const ge=l.get(K);if(ge&&(ge.color==="w"&&N==="white"||ge.color==="b"&&N==="black")){w(K);const Ie=l.moves({square:K,verbose:!0});v(Ie.map(Ue=>Ue.to))}}},[l,k,N,g,x]),Kp=()=>{ne<=0||(A(!0),B.current=Date.now(),Fe.current=!0,re(0))},Ll=()=>{if(fe&&ne>0&&(ve(K=>K-1),B.current)){const K=Date.now()-B.current;W.current+=K}A(!1),B.current=null};if(Vp)return o.jsx(yA,{game:Vp,open:!0,onClose:()=>{Rl(null),Dr(!0)},onAnalyze:K=>{at(K),Rl(null),Dr(!1),we(!0)}});if(Jr)return o.jsx(gA,{onBack:()=>Dr(!1),onViewGame:K=>{Rl(K)}});if(I&&Pe.length>0)return o.jsx(p0,{moveHistory:Pe,playerColor:N,gameResult:k,botElo:vt,onClose:()=>{we(!1),a(!0)}});if(i)return o.jsxs("div",{className:"h-full w-full flex flex-col items-center relative overflow-hidden bg-white","data-testid":"screen-title",children:[o.jsx("img",{src:_4,alt:"Blindfold Chess",className:"absolute inset-0 w-full h-full object-contain object-center z-0"}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-1 p-4 pt-2 w-full",children:[o.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-black text-center tracking-tight","data-testid":"text-title",children:"Blindfold Chess"}),o.jsx("p",{className:"text-black/70 text-center text-sm md:text-base",children:"Train your visualization and memory"})]}),o.jsx("div",{className:"flex-1"}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 p-4 pb-4 w-full max-w-sm",children:[o.jsxs(X,{size:"lg",variant:"ghost",className:"w-full text-base py-4 bg-amber-400 hover:bg-amber-500 text-stone-900 border border-amber-500 dark:bg-black dark:hover:bg-black/90 dark:text-white dark:border-black",onClick:()=>r==null?void 0:r(),"data-testid":"button-train-now",children:[o.jsx(fw,{className:"mr-2 h-5 w-5"}),"Train Now"]}),o.jsxs(X,{size:"lg",variant:"ghost",className:"w-full text-base py-4 bg-amber-400 hover:bg-amber-500 text-stone-900 border border-amber-500 dark:bg-black dark:hover:bg-black/90 dark:text-white dark:border-black",onClick:()=>a(!1),"data-testid":"button-start-now",children:[o.jsx(mv,{className:"mr-2 h-5 w-5"}),"Play Now"]})]})]});if(!u){const K=async()=>{const ue=hu(vt),ge={id:`elo_${vt}`,elo:vt,difficulty:`elo_${Math.round(vt/200)*200}`,depth:ue.depth,randomPercent:ue.randomPercent};try{await qe.impact({style:He.Heavy})}catch{}Lt(!0),setTimeout(()=>{Up(ge,tn)},200)};return o.jsxs("div",{className:`h-full flex flex-col max-w-lg mx-auto px-4 py-2 transition-opacity duration-200 ${nt?"opacity-0":"opacity-100"}`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:()=>a(!0),"data-testid":"button-setup-back",children:o.jsx(Sn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Game Set-up"})]}),o.jsxs(Ze,{className:"flex flex-col",children:[o.jsxs(dt,{className:"overflow-y-auto pt-4 pb-2 space-y-3",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Ft,{htmlFor:"blindfold-toggle",children:"Blindfold Challenge"}),o.jsx(wn,{id:"blindfold-toggle",checked:z,onCheckedChange:Q,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-blindfold"})]}),z&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ft,{children:"Blindfold Difficulty"}),o.jsxs(ul,{value:Y,onValueChange:ue=>T(ue),children:[o.jsx(Vi,{"data-testid":"select-blindfold-difficulty",children:o.jsx(dl,{})}),o.jsxs(qi,{children:[o.jsx(Qn,{value:"easy",children:"Easy (Unlimited Peeks)"}),o.jsx(Qn,{value:"medium",children:"Medium (20 Peeks)"}),o.jsx(Qn,{value:"hard",children:"Hard (10 Peeks)"}),o.jsx(Qn,{value:"expert",children:"Expert (5 Peeks)"}),o.jsx(Qn,{value:"master",children:"Master (2 Peeks)"}),o.jsx(Qn,{value:"grandmaster",children:"Grandmaster (No Peeks)"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ft,{children:"Display Mode"}),o.jsxs(ul,{value:$,onValueChange:ue=>{const ge=ue;V(ge),ge==="no_board"&&(de(!1),jt(!0),El(!0))},children:[o.jsx(Vi,{"data-testid":"select-blindfold-display",children:o.jsx(dl,{})}),o.jsxs(qi,{children:[o.jsx(Qn,{value:"empty_board",children:"Empty Board"}),o.jsx(Qn,{value:"black_overlay",children:"Black Overlay"}),o.jsx(Qn,{value:"no_board",children:"No Board"})]})]})]}),$!=="no_board"&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Ft,{htmlFor:"coordinates-toggle",children:"Show Coordinates (1-8, a-h)"}),o.jsx(wn,{id:"coordinates-toggle",checked:G,onCheckedChange:de,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-coordinates"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Ft,{htmlFor:"reconstruction-toggle",className:"text-sm",children:"Board Reconstruction Challenge"}),o.jsx(wn,{id:"reconstruction-toggle",checked:ke.boardReconstructionEnabled,onCheckedChange:ue=>{const ge={...ke,boardReconstructionEnabled:ue};Te(ge),_h(ge)},className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-board-reconstruction"})]}),ke.boardReconstructionEnabled&&o.jsx("p",{className:"text-xs text-muted-foreground",children:"After each game, reconstruct the final position to test your memory."}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qt,{className:"h-4 w-4"}),o.jsx(Ft,{htmlFor:"voice-input",children:"Voice Input"})]}),o.jsx(wn,{id:"voice-input",checked:Ye,onCheckedChange:jt,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-voice-input"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Hu,{className:"h-4 w-4"}),o.jsx(Ft,{htmlFor:"voice-output",children:"Voice Output"})]}),o.jsx(wn,{id:"voice-output",checked:We,onCheckedChange:El,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-voice-output"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex flex-col gap-0.5",children:[o.jsx(Ft,{htmlFor:"bot-thinking-toggle",className:"text-sm",children:"Bot Thinking Time"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Human-like delays"})]}),o.jsx(wn,{id:"bot-thinking-toggle",checked:ke.botThinkingTimeEnabled,onCheckedChange:ue=>{const ge={...ke,botThinkingTimeEnabled:ue};Te(ge),_h(ge)},className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-bot-thinking-time"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ft,{children:"Time Control"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs(X,{variant:"outline",size:"sm",className:q==="blitz"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>M("blitz"),"data-testid":"button-time-blitz",children:[o.jsx(wo,{className:"mr-1 h-3 w-3"}),"5 min"]}),o.jsxs(X,{variant:"outline",size:"sm",className:q==="rapid"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>M("rapid"),"data-testid":"button-time-rapid",children:[o.jsx(wo,{className:"mr-1 h-3 w-3"}),"15 min"]}),o.jsxs(X,{variant:"outline",size:"sm",className:q==="classical"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>M("classical"),"data-testid":"button-time-classical",children:[o.jsx(wo,{className:"mr-1 h-3 w-3"}),"30 min"]}),o.jsxs(X,{variant:"outline",size:"sm",className:q==="practice"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>M("practice"),"data-testid":"button-time-practice",children:[o.jsx(b2,{className:"mr-1 h-3 w-3"}),"Practice"]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Ft,{children:"Bot Rating"}),o.jsxs("span",{className:"text-sm font-medium text-amber-600 dark:text-amber-400",children:[vt," - ",ER(vt)]})]}),o.jsx(uN,{value:[vt],onValueChange:ue=>On(ue[0]),min:400,max:2600,step:50,className:"w-full","data-testid":"slider-bot-elo"}),o.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[o.jsx("span",{children:"400"}),o.jsx("span",{children:"1000"}),o.jsx("span",{children:"1600"}),o.jsx("span",{children:"2200"}),o.jsx("span",{children:"2600"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ft,{children:"Your Color"}),o.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[o.jsxs(X,{variant:"outline",size:"sm",className:tn==="white"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>gr("white"),"data-testid":"button-color-white",children:[o.jsx("div",{className:"w-4 h-4 rounded-full bg-white border border-gray-400 mr-1"}),"White"]}),o.jsxs(X,{variant:"outline",size:"sm",className:tn==="black"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>gr("black"),"data-testid":"button-color-black",children:[o.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-900 mr-1"}),"Black"]}),o.jsxs(X,{variant:"outline",size:"sm",className:tn==="random"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>gr("random"),"data-testid":"button-color-random",children:[o.jsx(P2,{className:"w-4 h-4 mr-1"}),"Random"]})]})]})]}),o.jsx("div",{className:"p-4 pt-2 border-t",children:o.jsxs(X,{size:"lg",className:"w-full bg-amber-400 hover:bg-amber-500 text-stone-900 border border-black",onClick:K,"data-testid":"button-start-game",children:[o.jsx(mv,{className:"mr-2 h-5 w-5"}),"Start Game"]})})]})]})}return o.jsxs("div",{className:"h-[100dvh] w-full flex flex-col overflow-hidden animate-in fade-in duration-300",children:[o.jsx(Fp,{}),ro&&Pl&&o.jsx("div",{className:"mb-3",children:o.jsx(z4,{actualFen:Pl,playerColor:N,onComplete:PN,onSkip:RN,onContinue:TN,onViewReport:()=>Zr(!0)})}),o.jsx(W4,{open:cd&&!I,gameResult:k,playerColor:N,clarityScore:st.lastClarityScore,responseTimes:aa,squareInquiries:dd,reconstructionScore:fd,reconstructionVoicePurity:E,reconstructionEnabled:ke.boardReconstructionEnabled,onRematch:()=>{if(Je){const K=N==="white"?"black":"white";Zr(!1),we(!1),_l(),setTimeout(()=>Up(Je,K),100)}},onMainMenu:()=>{Zr(!1),we(!1),_l(),la()},onAnalyze:()=>{we(!0)}}),I&&Pe.length>0&&o.jsx(p0,{moveHistory:Pe,playerColor:N,gameResult:k,botElo:vt,onClose:()=>we(!1)}),!ro&&o.jsxs("main",{className:"absolute inset-0 flex flex-col p-2 md:p-4 max-w-4xl mx-auto w-full overflow-hidden",children:[o.jsx(Ze,{className:`flex-none lg:hidden ${l&&(N==="white"&&l.turn()==="b"||N==="black"&&l.turn()==="w")?"ring-2 ring-amber-400":""}`,children:o.jsx(dt,{className:"py-2 px-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${N==="white"?"bg-black":"bg-white border border-gray-400"}`}),o.jsx(fv,{className:"h-4 w-4 text-amber-500"}),o.jsx("span",{className:"font-medium text-sm",children:Je?`${Je.elo} Elo Bot`:"Bot"}),Qt&&o.jsx("span",{className:`text-xs animate-pulse ${hn?"text-amber-500 font-medium":"text-primary"}`,children:hn?"Thinking...":"thinking..."})]}),o.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(N==="white"&&l.turn()==="b"||N==="black"&&l.turn()==="w")?"text-foreground":"text-muted-foreground"}`,children:Al(N==="white"?D:R)})]})})}),o.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-2 min-h-0 overflow-hidden",children:[o.jsxs("div",{className:"flex-1 flex flex-col gap-2 min-h-0 overflow-hidden",children:[o.jsx(Ze,{className:`hidden lg:block flex-none ${l&&(N==="white"&&l.turn()==="b"||N==="black"&&l.turn()==="w")?"ring-2 ring-amber-400":""}`,children:o.jsx(dt,{className:"py-2 px-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${N==="white"?"bg-black":"bg-white border border-gray-400"}`}),o.jsx(fv,{className:"h-4 w-4 text-amber-500"}),o.jsx("span",{className:"font-medium text-sm","data-testid":"text-opponent-name",children:Je?`${Je.elo} Elo Bot`:"Bot"}),Qt&&o.jsx("span",{className:`text-xs animate-pulse ${hn?"text-amber-500 font-medium":"text-primary"}`,"data-testid":"text-bot-thinking",children:hn?"Thinking...":"thinking..."})]}),o.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(N==="white"&&l.turn()==="b"||N==="black"&&l.turn()==="w")?"text-foreground":"text-muted-foreground"}`,"data-testid":"text-opponent-time",children:Al(N==="white"?D:R)})]})})}),o.jsx("div",{className:"flex-1 flex items-center justify-center min-h-0 overflow-hidden",children:o.jsx(Ze,{className:`aspect-square max-h-full max-w-full md:max-w-[600px] p-1 md:p-2 ${z&&$==="no_board"&&!fe?"invisible":""}`,children:o.jsxs("div",{className:"relative w-full h-full",children:[o.jsx(f_,{fen:m,orientation:N,showCoordinates:z&&G,highlightedSquares:x,lastMove:b||void 0,onSquareClick:AN,noCard:!0}),xs!==null&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 z-50","data-testid":"overlay-reconstruction-countdown","aria-live":"polite",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-8xl md:text-9xl font-bold text-amber-400 animate-pulse","data-testid":"text-countdown-number",children:xs}),o.jsx("div",{className:"text-lg md:text-xl text-white mt-4 font-medium",children:"Memorize the position..."})]})}),z&&!fe&&$==="empty_board"&&o.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-visible",children:o.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((K,ue)=>{const ge=Math.floor(ue/8),Ie=ue%8,Ue=(ge+Ie)%2===0,Le=N==="white"?["a","b","c","d","e","f","g","h"]:["h","g","f","e","d","c","b","a"],rt=N==="white"?["8","7","6","5","4","3","2","1"]:["1","2","3","4","5","6","7","8"],ce=Ie===0,ct=ge===7;return o.jsxs("div",{className:`relative ${Ue?"bg-amber-100":"bg-amber-700"}`,children:[G&&ce&&o.jsx("span",{className:`absolute bottom-0.5 left-1 text-xs font-semibold select-none ${Ue?"text-amber-800/70":"text-amber-100/70"}`,children:rt[ge]}),G&&ct&&o.jsx("span",{className:`absolute bottom-0.5 right-1 text-xs font-semibold select-none ${Ue?"text-amber-800/70":"text-amber-100/70"}`,children:Le[Ie]})]},ue)})})}),z&&!fe&&$==="black_overlay"&&o.jsxs("div",{className:"absolute inset-0 bg-black pointer-events-none overflow-visible",children:[o.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 8 8",preserveAspectRatio:"none",children:[Array.from({length:9}).map((K,ue)=>o.jsx("line",{x1:"0",y1:ue,x2:"8",y2:ue,stroke:"white",strokeWidth:"0.02"},`h-${ue}`)),Array.from({length:9}).map((K,ue)=>o.jsx("line",{x1:ue,y1:"0",x2:ue,y2:"8",stroke:"white",strokeWidth:"0.02"},`v-${ue}`))]}),G&&o.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((K,ue)=>{const ge=Math.floor(ue/8),Ie=ue%8,Ue=N==="white"?["a","b","c","d","e","f","g","h"]:["h","g","f","e","d","c","b","a"],Le=N==="white"?["8","7","6","5","4","3","2","1"]:["1","2","3","4","5","6","7","8"],rt=Ie===0,ce=ge===7;return o.jsxs("div",{className:"relative",children:[rt&&o.jsx("span",{className:"absolute bottom-0.5 left-1 text-xs font-semibold select-none text-white/70",children:Le[ge]}),ce&&o.jsx("span",{className:"absolute bottom-0.5 right-1 text-xs font-semibold select-none text-white/70",children:Ue[Ie]})]},ue)})})]})]})})}),o.jsx(Ze,{className:`flex-none hidden lg:flex ${l&&(N==="white"&&l.turn()==="w"||N==="black"&&l.turn()==="b")?"ring-2 ring-amber-400":""}`,children:o.jsx(dt,{className:"py-2 px-4 w-full",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${N==="white"?"bg-white border border-gray-400":"bg-black"}`}),o.jsx("span",{className:"font-medium text-sm","data-testid":"text-player-name",children:"You"})]}),o.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(N==="white"&&l.turn()==="w"||N==="black"&&l.turn()==="b")?"text-foreground":"text-muted-foreground"}`,"data-testid":"text-player-time",children:Al(N==="white"?R:D)})]})})})]}),o.jsxs("div",{className:"flex flex-col gap-2 lg:w-48 flex-none",children:[z&&Y!=="grandmaster"&&o.jsxs(X,{variant:fe?"default":"outline",className:`w-full ${fe?"bg-amber-400 hover:bg-amber-500 text-black":""}`,onMouseDown:Kp,onMouseUp:Ll,onMouseLeave:Ll,onTouchStart:Kp,onTouchEnd:Ll,onTouchCancel:Ll,disabled:ne<=0,"data-testid":"button-peek",children:[o.jsx(Uu,{className:"mr-2 h-4 w-4"}),fe?"Peeking...":"Hold to Peek"]}),z&&o.jsx("div",{className:"text-center text-sm text-muted-foreground","data-testid":"text-peeks-remaining",children:isFinite(ne)?`${ne} peeks left`:"Unlimited peeks"}),z&&o.jsxs("div",{className:"text-center text-sm","data-testid":"text-peek-free-streak",children:[o.jsx("span",{className:"text-muted-foreground",children:"Streak: "}),o.jsx("span",{className:"font-semibold text-amber-500",children:U}),se>0&&o.jsxs("span",{className:"text-muted-foreground/70 text-xs ml-1",children:["(best: ",se,")"]})]}),Ye&&o.jsx("div",{className:"flex items-center justify-center gap-2 text-sm",children:mt?o.jsxs(o.Fragment,{children:[o.jsx(qt,{className:"h-4 w-4 text-amber-500 animate-pulse"}),o.jsx("span",{className:"text-amber-500",children:"Which piece?"})]}):ld?o.jsxs(o.Fragment,{children:[o.jsx(qt,{className:"h-4 w-4 text-primary animate-pulse"}),o.jsx("span",{className:"text-primary",children:"Listening..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(Hr,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{className:"text-muted-foreground",children:"Voice paused"})]})}),L&&o.jsx("div",{className:`text-xs text-center ${mt?"text-amber-500 font-medium":"text-muted-foreground"}`,children:mt?L:`Heard: "${L}"`}),o.jsx(Ze,{className:`lg:hidden ${l&&(N==="white"&&l.turn()==="w"||N==="black"&&l.turn()==="b")?"ring-2 ring-amber-400":""}`,children:o.jsx(dt,{className:"py-2 px-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${N==="white"?"bg-white border border-gray-400":"bg-black"}`}),o.jsx("span",{className:"font-medium text-sm",children:"You"})]}),o.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(N==="white"&&l.turn()==="w"||N==="black"&&l.turn()==="b")?"text-foreground":"text-muted-foreground"}`,children:Al(N==="white"?R:D)})]})})}),o.jsx(Ze,{className:"flex-none",children:o.jsx(dt,{className:"p-2",children:o.jsx(Dp,{className:"h-16 lg:h-48",children:o.jsx("div",{className:"text-xs font-mono space-y-1",children:y.map((K,ue)=>o.jsxs("span",{className:ue%2===0?"font-semibold":"",children:[ue%2===0&&o.jsxs("span",{className:"text-muted-foreground",children:[Math.floor(ue/2)+1,". "]}),K," "]},ue))})})})}),!k&&o.jsxs(X,{variant:"outline",size:"sm",className:"w-full text-red-600 border-red-300 hover:bg-red-50",onClick:()=>ir(!0),"data-testid":"button-resign",children:[o.jsx(Bo,{className:"mr-2 h-4 w-4"}),"Resign"]})]})]})]}),o.jsx(m_,{open:!!gs,color:N,onSelect:K=>{gs&&(Hp(gs.from,gs.to,K),Cn(null))}}),o.jsx(Qr,{open:no,onOpenChange:ir,children:o.jsxs(Pr,{children:[o.jsxs(Tr,{children:[o.jsx(Mr,{children:"Resign Game?"}),o.jsx(_r,{children:"Are you sure you want to resign? This will count as a loss."})]}),o.jsxs(Rr,{children:[o.jsx(Lr,{"data-testid":"button-resign-cancel",children:"Cancel"}),o.jsx(Ar,{className:"bg-red-600 hover:bg-red-700",onClick:()=>{Bt(N==="white"?"black_win":"white_win"),ir(!1)},"data-testid":"button-resign-confirm",children:"Resign"})]})]})}),o.jsx(Qr,{open:Ee,onOpenChange:Vo,children:o.jsxs(Pr,{children:[o.jsxs(Tr,{children:[o.jsx(Mr,{children:"Resume Game?"}),o.jsxs(_r,{children:["You have an unfinished game",vs?` (${vs.playerColor==="white"?"White":"Black"} vs ${vs.botElo} Elo)`:"",". Would you like to continue?"]})]}),o.jsxs(Rr,{children:[o.jsx(Lr,{"data-testid":"button-resume-cancel",onClick:()=>{fc(),ia(null),Vo(!1)},children:"New Game"}),o.jsx(Ar,{onClick:()=>{vs&&(MN(vs),ia(null)),Vo(!1)},"data-testid":"button-resume-confirm",children:"Resume"})]})]})})]})}const EA=["a","b","c","d","e","f","g","h"],PA=["1","2","3","4","5","6","7","8"];function bu(e){const t=e.charCodeAt(0)-97;return(parseInt(e[1])-1)*8+t}function Hh(e){const t=EA[e%8],n=PA[Math.floor(e/8)];return`${t}${n}`}const TA=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];function RA(e,t){const n=bu(e),r=bu(t),s=[{index:n,path:[n]}],i=new Set([n]);for(;s.length>0;){const{index:a,path:l}=s.shift();if(a===r)return l.map(Hh);const c=Math.floor(a/8),u=a%8;for(const[f,m]of TA){const h=c+f,y=u+m;if(h>=0&&h<8&&y>=0&&y<8){const p=h*8+y;i.has(p)||(i.add(p),s.push({index:p,path:[...l,p]}))}}}return null}function wf(e=3,t=4){let n="",r="",s=null;for(;!s||s.length-1<e||s.length-1>t;){const i=Math.floor(Math.random()*64),a=Math.floor(Math.random()*64);n=Hh(i),r=Hh(a),n!==r&&(s=RA(n,r))}return{start:n,end:r,minPath:s}}function MA(e,t){if(!e||!t)return!1;const n=bu(e),r=bu(t),s=Math.floor(n/8),i=n%8,a=Math.floor(r/8),l=r%8,c=Math.abs(s-a),u=Math.abs(i-l);return c===2&&u===1||c===1&&u===2}const _A=["a","b","c","d","e","f","g","h"],AA=["1","2","3","4","5","6","7","8"];function ka(){return _A[Math.floor(Math.random()*8)]+AA[Math.floor(Math.random()*8)]}function LA(e,t){const n=e.charCodeAt(0),r=parseInt(e[1]),s=t.charCodeAt(0),i=parseInt(t[1]);return Math.abs(n-s)<=1&&Math.abs(r-i)<=1}function IA(e){const t=new Ln;let n=!1,r=0;for(;!n&&r<100;){t.clear(),r++;const i=ka();let a=ka();for(;i===a;)a=ka();if(LA(i,a))continue;t.put({type:"k",color:"w"},i),t.put({type:"k",color:"b"},a);const l=[i,a],c=m=>{let h=ka();for(;l.includes(h);)h=ka();t.put({type:m,color:"w"},h),l.push(h)};e==="KQ_vs_K"?c("q"):e==="KR_vs_K"&&c("r");const u=t.fen(),f=new Ln(u);f.isCheckmate()||f.isStalemate()||f.isDraw()||(n=!0)}const s={KQ_vs_K:"King & Queen vs King",KR_vs_K:"King & Rook vs King"};return{fen:t.fen(),type:e,description:s[e]}}function $A(){return[{value:"KQ_vs_K",label:"King & Queen vs King"},{value:"KR_vs_K",label:"King & Rook vs King"}]}function OA(e){return e.length}const v0=[{id:"scholars_mate",white:"Training",black:"Puzzle",description:"Scholar's Mate Defense",pgnMoves:["e4","e5","Bc4","Nc6","Qh5","g6","Qf3","Nf6","Qb3","Nd4"],solution:"Qxf7#"},{id:"legal_trap",white:"Training",black:"Puzzle",description:"Legal's Mate Trap",pgnMoves:["e4","e5","Nf3","d6","Bc4","Bg4","Nc3","g6","Nxe5","Bxd1","Bxf7+","Ke7"],solution:"Nd5#"},{id:"blackburne_shilling",white:"Training",black:"Puzzle",description:"Blackburne Shilling Gambit",pgnMoves:["e4","e5","Nf3","Nc6","Bc4","Nd4","Nxe5","Qg5","Nxf7","Qxg2","Rf1","Qxe4+","Be2","Nf3+"],solution:"Kf1"},{id:"fried_liver",white:"Training",black:"Puzzle",description:"Fried Liver Attack",pgnMoves:["e4","e5","Nf3","Nc6","Bc4","Nf6","Ng5","d5","exd5","Nxd5","Nxf7","Kxf7","Qf3+","Ke6","Nc3","Nb4"],solution:"Qe4+"},{id:"opera_game",white:"Paul Morphy",black:"Duke of Brunswick",description:"The Opera Game - A brilliant attack",pgnMoves:["e4","e5","Nf3","d6","d4","Bg4","dxe5","Bxf3","Qxf3","dxe5","Bc4","Nf6","Qb3","Qe7","Nc3","c6","Bg5","b5","Nxb5","cxb5","Bxb5+","Nbd7","O-O-O","Rd8","Rxd7","Rxd7","Rd1","Qe6","Bxd7+","Nxd7"],solution:"Qb8+"},{id:"short_trap",white:"Training",black:"Puzzle",description:"A quick opening trap",pgnMoves:["e4","e5","Nf3","Nc6","Bc4","Bc5","c3","Nf6","d4","exd4","cxd4","Bb4+","Nc3","Nxe4","O-O","Nxc3","bxc3","Bxc3","Ba3","Bxa1","Re1+","Ne7"],solution:"Rxe7+"},{id:"immortal_game",white:"Adolf Anderssen",black:"Lionel Kieseritzky",description:"The Immortal Game",pgnMoves:["e4","e5","f4","exf4","Bc4","Qh4+","Kf1","b5","Bxb5","Nf6","Nf3","Qh6","d3","Nh5","Nh4","Qg5","Nf5","c6","g4","Nf6","Rg1","cxb5","h4","Qg6","h5","Qg5","Qf3","Ng8","Bxf4","Qf6","Nc3","Bc5","Nd5","Qxb2","Bd6","Bxg1","e5","Qxa1+","Ke2","Na6","Nxg7+","Kd8","Qf6+","Nxf6","Be7+"],solution:"Kc7"},{id:"evergreen_game",white:"Adolf Anderssen",black:"Jean Dufresne",description:"The Evergreen Game",pgnMoves:["e4","e5","Nf3","Nc6","Bc4","Bc5","b4","Bxb4","c3","Ba5","d4","exd4","O-O","d3","Qb3","Qf6","e5","Qg6","Re1","Nge7","Ba3","b5","Qxb5","Rb8","Qa4","Bb6","Nbd2","Bb7","Ne4","Qf5","Bxd3","Qh5","Nf6+","gxf6","exf6","Rg8","Rad1","Qxf3","Rxe7+","Nxe7","Qxd7+","Kxd7","Bf5+","Ke8","Bd7+","Kf8"],solution:"Bxe7#"},{id:"game_of_century",white:"Donald Byrne",black:"Bobby Fischer",description:"The Game of the Century",pgnMoves:["Nf3","Nf6","c4","g6","Nc3","Bg7","d4","O-O","Bf4","d5","Qb3","dxc4","Qxc4","c6","e4","Nbd7","Rd1","Nb6","Qc5","Bg4","Bg5","Na4","Qa3","Nxc3","bxc3","Nxe4","Bxe7","Qb6","Bc4","Nxc3","Bc5","Rfe8+","Kf1","Be6","Bxb6","Bxc4+","Kg1","Ne2+","Kf1","Nxd4+","Kg1","Ne2+","Kf1","Nc3+","Kg1","axb6","Qb4","Ra4","Qxb6","Nxd1","h3","Rxa2","Kh2","Nxf2","Re1","Rxe1","Qd8+","Bf8","Nxe1","Bd5","Nf3","Ne4","Qb8","b5","h4","h5","Ne5","Kg7"],solution:"Kg1"},{id:"kasparov_topalov",white:"Garry Kasparov",black:"Veselin Topalov",description:"Kasparov's Immortal",pgnMoves:["e4","d6","d4","Nf6","Nc3","g6","Be3","Bg7","Qd2","c6","f3","b5","Nge2","Nbd7","Bh6","Bxh6","Qxh6","Bb7","a3","e5","O-O-O","Qe7","Kb1","a6","Nc1","O-O-O","Nb3","exd4","Rxd4","c5","Rd1","Nb6","g3","Kb8","Na5","Ba8","Bh3","d5","Qf4+","Ka7","Rhe1","d4","Nd5","Nbxd5","exd5","Qd6","Rxd4","cxd4","Re7+","Kb6","Qxd4+","Kxa5","b4+","Ka4","Qc3","Qxd5","Ra7","Bb7","Rxb7","Qc4","Qxf6","Kxa3","Qxa6+","Kxb4","c3+","Kxc3","Qa1+","Kd2","Qb2+","Kd1","Bf1","Rd2","Rd7","Rxd7","Bxc4","bxc4","Qxh8","Rd3"],solution:"Qa8"},{id:"deep_blue_game6",white:"Deep Blue",black:"Garry Kasparov",description:"Deep Blue vs Kasparov Game 6",pgnMoves:["e4","c6","d4","d5","Nc3","dxe4","Nxe4","Nd7","Ng5","Ngf6","Bd3","e6","N1f3","h6","Nxe6","Qe7","O-O","fxe6","Bg6+","Kd8","Bf4","b5","a4","Bb7","Re1","Nd5","Bg3","Kc8","axb5","cxb5","Qd3","Bc6","Bf5","exf5","Rxe7","Bxe7"],solution:"c4"},{id:"tal_larsen",white:"Mikhail Tal",black:"Bent Larsen",description:"Tal's Brilliant Exchange Sacrifice",pgnMoves:["e4","c5","Nf3","Nc6","d4","cxd4","Nxd4","e6","Nc3","d6","Be3","Nf6","f4","Be7","Qf3","O-O","O-O-O","Qc7","Nb3","a6","g4","b5","g5","Nd7","Bd3","Nb6","Qh3","b4","Na4","Nxa4","f5","e5","f6","gxf6","gxf6","Bxf6","Bxh7+","Kxh7","Qh5+","Kg7","Rdg1+","Kf8","Bh6+","Bg7","Rxg7","Qb6","Nd4","Qxd4","Rxf7+","Kxf7","Qh7+","Ke8","Re1","Qf6","Qxc2","Ra7","Qg6+","Rf7","Qg8+","Rf8","Bg7","Qf1","Rxf1","Rxg8"],solution:"Qe6+"}];function x0(){return[{value:"10-20",label:"10-20 moves",minMoves:10,maxMoves:20},{value:"20-30",label:"20-30 moves",minMoves:20,maxMoves:30},{value:"30-40",label:"30-40 moves",minMoves:30,maxMoves:40},{value:"40-50",label:"40-50 moves",minMoves:40,maxMoves:50},{value:"50-60",label:"50-60 moves",minMoves:50,maxMoves:60},{value:"60-70",label:"60-70 moves",minMoves:60,maxMoves:70}]}function DA(e,t){const n=v0.filter(i=>{const a=OA(i.pgnMoves);return a>=e&&a<t});if(n.length>0)return n[Math.floor(Math.random()*n.length)];const s=[...v0].sort((i,a)=>a.pgnMoves.length-i.pgnMoves.length)[0];return{...s,description:`${s.description} (Best available for ${e}-${t} moves)`}}const er=Nn.isNativePlatform();async function gt(e){if(er)try{await te.speakAndListen({text:e})}catch(t){console.error("[Training] speakAndListen error:",t)}else await Rt(e)}const dr=["a","b","c","d","e","f","g","h"],Hi=["1","2","3","4","5","6","7","8"];function Kh(e,t){return`${e==="a"?"ay":e} ${t}`}function fl(e,t){return(e+t)%2===0}function vo(){const e=Math.floor(Math.random()*8),t=Math.floor(Math.random()*8);return{file:dr[e],rank:Hi[t],fileIndex:e,rankIndex:t}}function bn(e){const t=Math.floor(e/1e3),n=Math.floor(e%1e3/100);return`${t}.${n}s`}function BA({onBack:e,onStateChange:t,returnToMenuRef:n}){const[r,s]=d.useState("menu"),[i,a]=d.useState(null),[l,c]=d.useState("ready");d.useEffect(()=>{pu().then(a)},[r]),d.useEffect(()=>{r==="menu"?t==null||t("menu"):t==null||t(l)},[r,l,t]),d.useEffect(()=>(n&&(n.current=()=>{s("menu"),c("ready")}),()=>{n&&(n.current=null)}),[n]);const u=async(f,m,h=0)=>{await UR(f,m,h),a(await pu()),window.dispatchEvent(new CustomEvent("trainingStatsUpdated"))};return r==="color_blitz"?o.jsx(FA,{onBack:()=>s("menu"),onComplete:(f,m)=>u("color_blitz",f,m),stats:i,onGameStateChange:c}):r==="coordinate_sniper"?o.jsx(zA,{onBack:()=>s("menu"),onComplete:(f,m)=>u("coordinate_sniper",f,m),stats:i,onGameStateChange:c}):r==="voice_move_master"?o.jsx(VA,{onBack:()=>s("menu"),onComplete:(f,m)=>u("voice_move_master",f,m),stats:i,onGameStateChange:c}):r==="knights_path"?o.jsx(XA,{onBack:()=>s("menu"),onComplete:f=>u("knights_path",f),stats:i,onGameStateChange:c}):r==="endgame_drills"?o.jsx(ZA,{onBack:()=>s("menu"),onComplete:f=>u("endgame_drills",f),stats:i,onGameStateChange:c}):r==="blindfold_marathon"?o.jsx(JA,{onBack:()=>s("menu"),onComplete:f=>u("blindfold_marathon",f),stats:i,onGameStateChange:c}):o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-training-back",children:o.jsx(Sn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Training Gym"})]}),o.jsxs("div",{className:"flex flex-col gap-2 flex-1",children:[o.jsx(Ze,{className:"hover-elevate cursor-pointer flex-1",onClick:()=>s("voice_move_master"),"data-testid":"card-voice-move-master",children:o.jsx(Et,{className:"h-full py-2 px-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-purple-500/20",children:o.jsx(Hu,{className:"h-5 w-5 text-purple-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pt,{className:"text-base",children:"Voice Move Master"}),i!==null&&i.voiceMoveMasterBest!==null&&o.jsx(lt,{variant:"secondary",className:"text-xs",children:i.voiceMoveMasterBest})]}),o.jsx($t,{className:"text-xs mt-0.5",children:"Announce chess moves by voice in 60 seconds"})]})]})})}),o.jsx(Ze,{className:"hover-elevate cursor-pointer flex-1",onClick:()=>s("color_blitz"),"data-testid":"card-color-blitz",children:o.jsx(Et,{className:"h-full py-2 px-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:o.jsx(Ym,{className:"h-5 w-5 text-amber-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pt,{className:"text-base",children:"Color Blitz"}),i!==null&&i.colorBlitzBest!==null&&o.jsx(lt,{variant:"secondary",className:"text-xs",children:i.colorBlitzBest})]}),o.jsx($t,{className:"text-xs mt-0.5",children:"Name square colors as fast as you can"})]})]})})}),o.jsx(Ze,{className:"hover-elevate cursor-pointer flex-1",onClick:()=>s("coordinate_sniper"),"data-testid":"card-coordinate-sniper",children:o.jsx(Et,{className:"h-full py-2 px-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:o.jsx(bi,{className:"h-5 w-5 text-blue-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pt,{className:"text-base",children:"Coordinate Sniper"}),i!==null&&i.coordinateSniperBest!==null&&o.jsx(lt,{variant:"secondary",className:"text-xs",children:bn(i.coordinateSniperBest)})]}),o.jsx($t,{className:"text-xs mt-0.5",children:"Find 10 squares as fast as possible"})]})]})})}),o.jsx(Ze,{className:"hover-elevate cursor-pointer flex-1",onClick:()=>s("knights_path"),"data-testid":"card-knights-path",children:o.jsx(Et,{className:"h-full py-2 px-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-green-500/20",children:o.jsx(qu,{className:"h-5 w-5 text-green-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pt,{className:"text-base",children:"Knight's Path"}),i!==null&&i.knightsPathBest!==null&&o.jsx(lt,{variant:"secondary",className:"text-xs",children:bn(i.knightsPathBest)})]}),o.jsx($t,{className:"text-xs mt-0.5",children:"Navigate the knight to the target square"})]})]})})}),o.jsx(Ze,{className:"hover-elevate cursor-pointer flex-1",onClick:()=>s("endgame_drills"),"data-testid":"card-endgame-drills",children:o.jsx(Et,{className:"h-full py-2 px-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-orange-500/20",children:o.jsx(Wu,{className:"h-5 w-5 text-orange-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pt,{className:"text-base",children:"Endgame Drills"}),i!==null&&i.endgameDrillsBest!==null&&o.jsx(lt,{variant:"secondary",className:"text-xs",children:bn(i.endgameDrillsBest)})]}),o.jsx($t,{className:"text-xs mt-0.5",children:"Checkmate with K+Q or K+R vs King blindfolded"})]})]})})}),o.jsx(Ze,{className:"hover-elevate cursor-pointer flex-1",onClick:()=>s("blindfold_marathon"),"data-testid":"card-blindfold-marathon",children:o.jsx(Et,{className:"h-full py-2 px-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-red-500/20",children:o.jsx(Vu,{className:"h-5 w-5 text-red-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pt,{className:"text-base",children:"Blindfold Marathon"}),i!==null&&i.blindfoldMarathonBest!==null&&o.jsx(lt,{variant:"secondary",className:"text-xs",children:bn(i.blindfoldMarathonBest)})]}),o.jsx($t,{className:"text-xs mt-0.5",children:"Visualize famous games and find the winning move"})]})]})})})]})]})}function FA({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,i]=d.useState("ready"),[a,l]=d.useState(()=>vo()),[c,u]=d.useState(0),[f,m]=d.useState(0),[h,y]=d.useState(0),[p,g]=d.useState(60),[w,x]=d.useState(!1),[v,b]=d.useState(!1),[S,N]=d.useState(!1),[j,k]=d.useState(!1),[C,R]=d.useState("challenge"),P=d.useRef(null),D=n!==null&&n.colorBlitzBest!==null&&c>n.colorBlitzBest,_=d.useRef(null),q=d.useRef(!1),M=d.useRef(null),z=d.useRef(!1),Q=async()=>{if(z.current){try{await te.stopSession()}catch{}z.current=!1}if(M.current){try{await M.current.remove()}catch{}M.current=null}N(!1)},Y=()=>{P.current&&clearInterval(P.current),Q(),e()},T=async(G=!1)=>{k(G),i("playing"),u(0),m(0),y(0),g(60),q.current=!1;const de=vo();l(de),setTimeout(async()=>{w&&(await gt(Kh(de.file,de.rank)),q.current=!0)},300)},$=()=>{P.current&&clearInterval(P.current),Q(),e()};d.useEffect(()=>{if(!er||!w||s!=="playing")return;let G=!1;return(async()=>{try{if(!await Fo()||G){console.warn("[ColorBlitz] Voice not ready or cancelled");return}if(console.log("[ColorBlitz] Starting voice session..."),M.current&&await M.current.remove(),G||(M.current=await te.addListener("onSpeechResult",ve=>{var W,U;const fe=ve.text.toLowerCase();console.log("[ColorBlitz] Voice:",fe),J1(fe);const A=["light","white","lie","lye","lite","lied","liked","right","bright","lyte","lit","like","life"],B=["dark","black","bark","duck","dock","doc","dork","dog","dart"];A.some(re=>fe.includes(re))?(W=_.current)==null||W.call(_,"light"):B.some(re=>fe.includes(re))&&((U=_.current)==null||U.call(_,"dark")),te.startListening().catch(()=>{})}),G))return;await te.startSession(),X1(!0),await te.startListening(),Z1(!0),z.current=!0,N(!0),console.log("[ColorBlitz] Native voice session started")}catch(ne){console.error("[ColorBlitz] Native voice setup failed:",ne),du(String(ne))}})(),()=>{G=!0,Q()}},[w,s]),d.useEffect(()=>(s==="playing"&&!j&&(P.current=setInterval(()=>{g(G=>G<=1?(i("finished"),0):G-1)},1e3)),()=>{P.current&&clearInterval(P.current)}),[s,j]),d.useEffect(()=>{s==="finished"&&!j&&t(c,h)},[s,c,h,t,j]),d.useEffect(()=>{r==null||r(s)},[s,r]);const V=d.useCallback(G=>{if(s!=="playing")return;if((G==="white"||G==="light"?"light":"dark")==="dark"===fl(a.fileIndex,a.rankIndex)){u(fe=>fe+1),m(fe=>{const A=fe+1;return y(B=>Math.max(B,A)),qe.notification({type:Ui.Success}).catch(()=>{}),A});const ve=vo();l(ve),w&&setTimeout(async()=>{await gt(Kh(ve.file,ve.rank))},300)}else m(0),qe.impact({style:He.Heavy}).catch(()=>{}),setTimeout(()=>{qe.impact({style:He.Heavy}).catch(()=>{})},100),w&&setTimeout(async()=>{await gt("Wrong")},300)},[s,a,w]);return d.useEffect(()=>{_.current=V},[V]),s==="ready"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:Y,"data-testid":"button-colorblitz-back",children:o.jsx(Sn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Color Blitz"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(Ym,{className:"h-12 w-12 text-amber-500 mx-auto"}),o.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"})]}),o.jsx(ta,{value:C,onValueChange:G=>R(G),className:"w-full max-w-xs",children:o.jsxs(zo,{className:"grid w-full grid-cols-2",children:[o.jsx(Mn,{value:"challenge","data-testid":"tab-colorblitz-challenge",children:"1 Minute Challenge"}),o.jsx(Mn,{value:"practice","data-testid":"tab-colorblitz-practice",children:"Practice"})]})}),o.jsx("p",{className:"text-muted-foreground text-center",children:C==="challenge"?"Name as many square colors as you can in 60 seconds!":"Practice at your own pace with unlimited time."}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(wn,{id:"voice-mode",checked:w,onCheckedChange:x,"data-testid":"switch-voice-mode"}),o.jsxs(Ft,{htmlFor:"voice-mode",className:"flex items-center gap-2",children:[w?o.jsx(qt,{className:"h-4 w-4"}):o.jsx(Hr,{className:"h-4 w-4"}),"Voice Mode"]})]}),C==="challenge"&&n!==null&&n.colorBlitzBest!==null&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",o.jsx("span",{className:"font-semibold text-amber-500",children:n.colorBlitzBest})," correct"]}),o.jsx(X,{size:"lg",onClick:()=>T(C==="practice"),"data-testid":"button-start-colorblitz",children:"Start"})]})]}):s==="finished"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:Y,"data-testid":"button-colorblitz-back-finished",children:o.jsx(Sn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Color Blitz"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsx(Jn,{className:`h-16 w-16 ${D?"text-amber-500":"text-muted-foreground"}`}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h2",{className:"text-4xl font-bold",children:c}),o.jsx("p",{className:"text-lg text-muted-foreground",children:"squares correct"}),D&&o.jsx(lt,{className:"bg-amber-500 text-white",children:"New Personal Best!"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(X,{variant:"outline",onClick:Y,"data-testid":"button-colorblitz-menu",children:"Menu"}),o.jsx(X,{onClick:()=>T(!1),"data-testid":"button-colorblitz-retry",children:"Play Again"})]})]})]}):o.jsxs(o.Fragment,{children:[er&&o.jsx(Fp,{}),o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[j?o.jsx(lt,{variant:"outline",children:"Practice"}):o.jsxs("span",{className:"text-2xl font-bold tabular-nums",children:[p,"s"]}),w&&S&&o.jsx(qt,{className:"h-4 w-4 text-red-500 animate-pulse"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-lg font-semibold",children:c}),f>=5&&o.jsxs(lt,{variant:"outline",className:"text-amber-500 border-amber-500",children:[f," streak"]})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[o.jsx("div",{className:"text-center",children:o.jsxs("p",{className:"text-6xl font-bold font-mono tracking-wider",children:[a.file,a.rank]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full",children:[o.jsx(X,{size:"lg",className:"h-20 text-xl bg-amber-100 hover:bg-amber-200 text-amber-900 dark:bg-amber-100 dark:hover:bg-amber-200",onClick:()=>V("light"),"data-testid":"button-answer-light",children:"Light"}),o.jsx(X,{size:"lg",className:"h-20 text-xl bg-amber-900 hover:bg-amber-800 text-amber-100",onClick:()=>V("dark"),"data-testid":"button-answer-dark",children:"Dark"})]}),o.jsxs(X,{variant:"outline",onClick:()=>b(!0),className:"mt-4","data-testid":"button-colorblitz-resign",children:[o.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Resign"]})]})]}),o.jsx(Qr,{open:v,onOpenChange:b,children:o.jsxs(Pr,{children:[o.jsxs(Tr,{children:[o.jsx(Mr,{children:"Quit Game?"}),o.jsxs(_r,{children:["Your current score of ",c," will not be saved."]})]}),o.jsxs(Rr,{children:[o.jsx(Lr,{"data-testid":"button-colorblitz-resign-cancel",children:"Continue"}),o.jsx(Ar,{onClick:$,"data-testid":"button-colorblitz-resign-confirm",children:"Quit"})]})]})})]})}function zA({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,i]=d.useState("ready"),[a,l]=d.useState(()=>vo()),[c,u]=d.useState(0),[f,m]=d.useState(0),[h,y]=d.useState(0),[p,g]=d.useState(0),[w,x]=d.useState(0),[v,b]=d.useState(null),[S,N]=d.useState(null),[j,k]=d.useState(!1),[C,R]=d.useState(!1),[P,D]=d.useState("challenge"),[_,q]=d.useState(!1),M=10,z=n!==null&&n.coordinateSniperBest!==null&&w<n.coordinateSniperBest&&w>0,Q=()=>{e()},Y=($=!1)=>{R($),i("playing"),u(0),m(0),y(0),g(Date.now()),x(0),b(null),N(null);const V=vo();l(V);const G=V.file==="a"?"ay":V.file;gt(`Find ${G} ${V.rank}`)};d.useEffect(()=>{let $=null;return s==="playing"&&($=setInterval(()=>{x(Date.now()-p)},100)),()=>{$&&clearInterval($)}},[s,p]),d.useEffect(()=>{r==null||r(s)},[s,r]);const T=d.useCallback(($,V)=>{if(s!=="playing")return;const G=`${a.file}${a.rank}`,de=`${$}${V}`;if(de===G){qe.impact({style:He.Light}).catch(()=>{}),b({square:de,correct:!0});const ne=c+1;u(ne);const ve=f+1;m(ve);const fe=Math.max(h,ve);if(y(fe),ne>=M&&!C){const A=Date.now()-p;x(A),i("finished"),t(A,fe),gt("Complete!")}else if(ne>=M&&C){u(0),m(0),y(0),setTimeout(()=>{b(null);const A=vo();l(A);const B=A.file==="a"?"ay":A.file;gt(`Great! Find ${B} ${A.rank}`)},200);return}else setTimeout(()=>{b(null);const A=vo();l(A);const B=A.file==="a"?"ay":A.file;gt(`Find ${B} ${A.rank}`)},200)}else qe.impact({style:He.Heavy}).catch(()=>{}),qe.impact({style:He.Heavy}).catch(()=>{}),b({square:de,correct:!1}),N(G),m(0),gt(`No, that's ${Kh($,V)}`),setTimeout(()=>{b(null),N(null)},1e3)},[s,a,c,f,h,p,t]);return s==="ready"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-sniper-back",children:o.jsx(Sn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Coordinate Sniper"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(bi,{className:"h-12 w-12 text-blue-500 mx-auto"}),o.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"})]}),o.jsx(ta,{value:P,onValueChange:$=>D($),className:"w-full max-w-xs",children:o.jsxs(zo,{className:"grid w-full grid-cols-2",children:[o.jsx(Mn,{value:"challenge","data-testid":"tab-sniper-challenge",children:"10 Square Race"}),o.jsx(Mn,{value:"practice","data-testid":"tab-sniper-practice",children:"Practice"})]})}),o.jsx("p",{className:"text-muted-foreground text-center",children:P==="challenge"?"Find 10 squares as fast as you can!":"Practice finding squares with no time pressure."}),o.jsxs("div",{className:"flex items-center gap-3 justify-center",children:[o.jsx(Ft,{htmlFor:"board-flip",className:"text-sm text-muted-foreground",children:"Play as Black"}),o.jsx(wn,{id:"board-flip",checked:_,onCheckedChange:q,"data-testid":"switch-board-flip"})]}),P==="challenge"&&n!==null&&n.coordinateSniperBest!==null&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",o.jsx("span",{className:"font-semibold text-blue-500",children:bn(n.coordinateSniperBest)})]}),o.jsx(X,{size:"lg",onClick:()=>Y(P==="practice"),"data-testid":"button-start-sniper",children:"Start"})]})]}):s==="finished"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-sniper-back-finished",children:o.jsx(Sn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Coordinate Sniper"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsx(Jn,{className:`h-16 w-16 ${z?"text-blue-500":"text-muted-foreground"}`}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h2",{className:"text-4xl font-bold",children:bn(w)}),o.jsx("p",{className:"text-lg text-muted-foreground",children:"to find 10 squares"}),z&&o.jsx(lt,{className:"bg-blue-500 text-white",children:"New Personal Best!"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(X,{variant:"outline",onClick:e,"data-testid":"button-sniper-menu",children:"Menu"}),o.jsx(X,{onClick:()=>Y(!1),"data-testid":"button-sniper-retry",children:"Play Again"})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("p",{className:"text-lg font-semibold",children:["Find: ",o.jsxs("span",{className:"text-2xl font-mono",children:[a.file,a.rank]})]}),o.jsx("div",{className:"flex items-center gap-2",children:C?o.jsx(lt,{variant:"outline",children:"Practice"}):o.jsx("span",{className:"text-lg font-mono tabular-nums",children:bn(w)})})]}),!C&&o.jsx(qs,{value:c/M*100,className:"mb-2"}),o.jsx("p",{className:"text-sm text-muted-foreground text-center mb-2",children:C?`${c} found`:`${c}/${M} found`}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[o.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:(_?["1","2","3","4","5","6","7","8"]:["8","7","6","5","4","3","2","1"]).map(($,V)=>(_?[...dr].reverse():dr).map((G,de)=>{const ne=`${G}${$}`,ve=dr.indexOf(G),fe=Hi.indexOf($),A=fl(ve,fe),B=(v==null?void 0:v.square)===ne,W=S===ne;let U=A?"bg-amber-700":"bg-amber-100";return B?U=v.correct?"bg-green-500":"bg-red-500":W&&(U="bg-green-500"),o.jsx("button",{className:`aspect-square ${U} transition-colors duration-100`,onClick:()=>T(G,$),"data-testid":`square-${ne}`},ne)}))}),o.jsxs(X,{variant:"outline",onClick:()=>k(!0),className:"mt-4","data-testid":"button-sniper-resign",children:[o.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Resign"]})]})]}),o.jsx(Qr,{open:j,onOpenChange:k,children:o.jsxs(Pr,{children:[o.jsxs(Tr,{children:[o.jsx(Mr,{children:"Quit Game?"}),o.jsxs(_r,{children:["Your progress (",c,"/",M," found) will not be saved."]})]}),o.jsxs(Rr,{children:[o.jsx(Lr,{"data-testid":"button-sniper-resign-cancel",children:"Continue"}),o.jsx(Ar,{onClick:Q,"data-testid":"button-sniper-resign-confirm",children:"Quit"})]})]})})]})}const Lc={p:"pawn",n:"knight",b:"bishop",r:"rook",q:"queen",k:"king"};function Gh(){const e=new Ln,t=5+Math.floor(Math.random()*11);for(let s=0;s<t;s++){const i=e.moves({verbose:!0});if(i.length===0)break;const a=i[Math.floor(Math.random()*i.length)];e.move(a)}const n=e.moves({verbose:!0});if(n.length===0)return Gh();const r=n[Math.floor(Math.random()*n.length)];return{chess:e,move:{from:r.from,to:r.to,san:r.san,piece:r.piece,captured:r.captured}}}function VA({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,i]=d.useState("ready"),[a,l]=d.useState(null),[c,u]=d.useState(0),[f,m]=d.useState(0),[h,y]=d.useState(0),[p,g]=d.useState(60),[w,x]=d.useState(!1),[v,b]=d.useState(!1),[S,N]=d.useState(!1),[j,k]=d.useState(null),[C,R]=d.useState(""),[P,D]=d.useState(!1),[_,q]=d.useState("challenge"),M=d.useRef(null),z=d.useRef(null),Q=n!==null&&n.voiceMoveMasterBest!==null&&c>n.voiceMoveMasterBest,Y=d.useRef(null),T=d.useRef(!1),$=d.useRef(null),V=async()=>{if(T.current){try{await te.stopSession()}catch{}T.current=!1}if(Y.current){try{await Y.current.remove()}catch{}Y.current=null}x(!1)},G=()=>{M.current&&clearInterval(M.current),z.current&&clearTimeout(z.current),V(),e()},de=async(W=!1)=>{D(W),i("playing"),u(0),m(0),y(0),g(60),k(null);const U=Gh();l(U),setTimeout(async()=>{await gt("Say the move.")},300)},ne=()=>{M.current&&clearInterval(M.current),z.current&&clearTimeout(z.current),V(),e()},ve=d.useCallback(W=>{var Fe,ze;if(!a||s!=="playing")return;const U=W.toLowerCase().trim();if(console.log("[VoiceMoveMaster] Processing:",U),U.includes("resign")||U.includes("quit")){N(!0),gt("Are you sure you want to resign? Say yes or no.");return}if(S){if(U.includes("yes")){b(!0),N(!1);return}else if(U.includes("no")){N(!1),gt("Okay, continue playing.");return}}if(U.includes("repeat")||U.includes("again")||U.includes("say again")){gt("Look at the highlighted squares on the board.");return}if(U.includes("time")||U.includes("clock")){gt(`${p} seconds remaining`);return}if(U.includes("material")){const Ae=qA(a.chess);gt(Ae);return}const re=U.match(/what'?s?\s+on\s+([a-h])\s*([1-8])/i);if(re){const Ae=`${re[1]}${re[2]}`,oe=a.chess.get(Ae);if(oe){const Ne=oe.color==="w"?"White":"Black",Ce=Lc[oe.type];gt(`${Ne} ${Ce}`)}else gt("Empty");return}const se=U.match(/where\s+is\s+my\s+(\w+)/i);if(se){const Ae=se[1].toLowerCase(),oe=(Fe=Object.entries(Lc).find(([,Ne])=>Ne===Ae))==null?void 0:Fe[0];if(oe){const Ne=a.chess.turn(),Ce=a.chess.board(),Re=[];for(let Me=0;Me<8;Me++)for(let F=0;F<8;F++){const H=Ce[Me][F];H&&H.type===oe&&H.color===Ne&&Re.push(`${dr[F]}${Hi[7-Me]}`)}Re.length>0?gt(`Your ${Ae} is on ${Re.slice(0,3).join(", ")}`):gt(`You don't have a ${Ae}`)}return}if(U.includes("eval")||U.includes("evaluate")){const Ae=WA(a.chess);Ae>0?gt(`White is up ${Ae} points`):Ae<0?gt(`Black is up ${Math.abs(Ae)} points`):gt("Position is equal");return}const ye=U.match(/legal\s+moves?\s+for\s+(\w+)/i);if(ye){const Ae=ye[1].toLowerCase(),oe=(ze=Object.entries(Lc).find(([,Ne])=>Ne===Ae))==null?void 0:ze[0];if(oe){const Ne=a.chess.moves({verbose:!0}).filter(Ce=>Ce.piece===oe).slice(0,4).map(Ce=>Ce.san);Ne.length>0?gt(`${Ae} can play ${Ne.join(", ")}`):gt(`No legal moves for ${Ae}`)}return}if(YA(U,a.move)){z.current&&(clearTimeout(z.current),z.current=null),qe.notification({type:Ui.Success}).catch(()=>{}),k({text:"Correct!",correct:!0});const Ae=c+1,oe=f+1;u(Ae),m(oe);const Ne=Math.max(h,oe);y(Ne),gt("Correct!"),setTimeout(()=>{k(null);const Ce=Gh();l(Ce)},500)}else m(0),z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{qe.notification({type:Ui.Error}).catch(()=>{}),k({text:"Try again",correct:!1}),setTimeout(()=>k(null),1e3)},1e3)},[a,s,c,f,h,p,S]);if(d.useEffect(()=>{$.current=ve},[ve]),d.useEffect(()=>{if(!er||s!=="playing")return;let W=!1;return(async()=>{try{if(!await Fo()||W){console.warn("[VoiceMoveMaster] Voice not ready or cancelled");return}if(console.log("[VoiceMoveMaster] Starting voice session..."),Y.current&&await Y.current.remove(),W||(Y.current=await te.addListener("onSpeechResult",se=>{var Fe;const ye=se.text;J1(ye),ye.length>=2&&((Fe=$.current)==null||Fe.call($,ye)),te.startListening().catch(()=>{})}),W))return;await te.startSession(),X1(!0),await te.startListening(),Z1(!0),T.current=!0,x(!0),console.log("[VoiceMoveMaster] Native voice session started")}catch(re){console.error("[VoiceMoveMaster] Native voice setup failed:",re),du(String(re))}})(),()=>{W=!0,V()}},[s]),d.useEffect(()=>(s==="playing"&&!P&&(M.current=setInterval(()=>{g(W=>W<=1?(i("finished"),0):W-1)},1e3)),()=>{M.current&&clearInterval(M.current)}),[s,P]),d.useEffect(()=>{s==="finished"&&!P&&t(c,h)},[s,c,h,t,P]),d.useEffect(()=>{r==null||r(s)},[s,r]),s==="ready")return o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:G,"data-testid":"button-voicemaster-back",children:o.jsx(Sn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Voice Move Master"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(Hu,{className:"h-12 w-12 text-purple-500 mx-auto"}),o.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"})]}),o.jsx(ta,{value:_,onValueChange:W=>q(W),className:"w-full max-w-xs",children:o.jsxs(zo,{className:"grid w-full grid-cols-2",children:[o.jsx(Mn,{value:"challenge","data-testid":"tab-voicemaster-challenge",children:"1 Minute Challenge"}),o.jsx(Mn,{value:"practice","data-testid":"tab-voicemaster-practice",children:"Practice"})]})}),o.jsx("p",{className:"text-muted-foreground text-center",children:_==="challenge"?"Say the highlighted move within 60 seconds!":"Practice announcing moves at your own pace."}),_==="challenge"&&n!==null&&n.voiceMoveMasterBest!==null&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",o.jsxs("span",{className:"font-semibold text-purple-500",children:[n.voiceMoveMasterBest," moves"]})]}),o.jsx(X,{size:"lg",onClick:()=>de(_==="practice"),"data-testid":"button-start-voicemaster",children:"Start"})]})]});if(s==="finished")return o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:G,"data-testid":"button-voicemaster-back-finished",children:o.jsx(Sn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Voice Move Master"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsx(Jn,{className:`h-16 w-16 ${Q?"text-purple-500":"text-muted-foreground"}`}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h2",{className:"text-4xl font-bold",children:c}),o.jsx("p",{className:"text-lg text-muted-foreground",children:"moves announced correctly"}),h>1&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Best streak: ",h]}),Q&&o.jsx(lt,{className:"bg-purple-500 text-white",children:"New Personal Best!"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(X,{variant:"outline",onClick:G,"data-testid":"button-voicemaster-menu",children:"Menu"}),o.jsx(X,{onClick:()=>de(!1),"data-testid":"button-voicemaster-retry",children:"Play Again"})]})]})]});const fe=(a==null?void 0:a.chess.board())||[],A=(a==null?void 0:a.move.from)||"",B=(a==null?void 0:a.move.to)||"";return o.jsxs(o.Fragment,{children:[er&&o.jsx(Fp,{}),o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[P?o.jsx(lt,{variant:"outline",children:"Practice"}):o.jsx("span",{className:"text-2xl font-mono font-bold tabular-nums",children:p}),w&&o.jsx(qt,{className:"h-5 w-5 text-red-500 animate-pulse"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-lg font-semibold",children:c}),f>=3&&o.jsxs(lt,{variant:"outline",className:"text-purple-500 border-purple-500",children:[f," streak"]})]})]}),j&&o.jsx("div",{className:`text-center py-2 mb-2 rounded ${j.correct?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:o.jsx("span",{className:"font-semibold",children:j.text})}),o.jsx("div",{className:"flex items-center justify-center mb-4",children:o.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:["8","7","6","5","4","3","2","1"].map((W,U)=>dr.map((re,se)=>{var Re;const ye=`${re}${W}`,Fe=(se+U)%2===1,ze=(Re=fe[U])==null?void 0:Re[se],Ae=ye===A,oe=ye===B;let Ne=Fe?"bg-amber-700":"bg-amber-100";Ae?Ne="bg-yellow-400":oe&&(Ne="bg-red-500");const Ce={wk:"",wq:"",wr:"",wb:"",wn:"",wp:"",bk:"",bq:"",br:"",bb:"",bn:"",bp:""};return o.jsx("div",{className:`aspect-square ${Ne} flex items-center justify-center text-2xl`,children:ze&&Ce[`${ze.color}${ze.type}`]},ye)}))})}),o.jsx("div",{className:"text-center mb-4",children:o.jsxs("p",{className:"text-lg",children:[er?"Say: ":"Type: ",o.jsx("span",{className:"font-bold text-purple-500",children:a==null?void 0:a.move.san})]})}),!er&&o.jsxs("form",{className:"flex gap-2 mb-4",onSubmit:W=>{W.preventDefault(),C.trim()&&(ve(C),R(""))},children:[o.jsx("input",{type:"text",value:C,onChange:W=>R(W.target.value),placeholder:"Type move here...",className:"flex-1 px-3 py-2 border rounded-md bg-background",autoFocus:!0,"data-testid":"input-voicemaster-text"}),o.jsx(X,{type:"submit","data-testid":"button-voicemaster-submit",children:"Submit"})]}),o.jsxs(X,{variant:"outline",onClick:()=>b(!0),className:"mx-auto mb-4","data-testid":"button-voicemaster-resign",children:[o.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Resign"]}),o.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(p2,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium",children:"Chess Notation"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs text-muted-foreground",children:[o.jsxs("span",{children:[o.jsx("strong",{children:"e4"})," = pawn to e4"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"R"})," = Rook"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"N"})," = Knight"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"B"})," = Bishop"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"Q"})," = Queen"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"K"})," = King"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"Bb2"})," = Bishop to b2"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"Nxc5"})," = Knight takes c5"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"0-0"})," = Kingside castle"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"0-0-0"})," = Queenside castle"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"+"})," = Check"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"#"})," = Checkmate"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"=Q"})," = Promote to Queen"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"e.p."})," = En passant"]}),o.jsxs("span",{className:"col-span-2",children:[o.jsx("strong",{children:"Rac1"})," = When 2 rooks can go to c1, specify which (a-file)"]})]})]})]}),o.jsx(Qr,{open:v,onOpenChange:b,children:o.jsxs(Pr,{children:[o.jsxs(Tr,{children:[o.jsx(Mr,{children:"Quit Game?"}),o.jsxs(_r,{children:["Your current score of ",c," will not be saved."]})]}),o.jsxs(Rr,{children:[o.jsx(Lr,{"data-testid":"button-voicemaster-resign-cancel",children:"Continue"}),o.jsx(Ar,{onClick:ne,"data-testid":"button-voicemaster-resign-confirm",children:"Quit"})]})]})})]})}function qA(e){const t=e.board();let n=0,r=0;const s={p:1,n:3,b:3,r:5,q:9,k:0};for(const a of t)for(const l of a)if(l){const c=s[l.type];l.color==="w"?n+=c:r+=c}const i=n-r;return i>0?`White is up ${i} point${i!==1?"s":""}`:i<0?`Black is up ${Math.abs(i)} point${Math.abs(i)!==1?"s":""}`:"Material is equal"}function WA(e){const t=e.board();let n=0;const r={p:1,n:3,b:3,r:5,q:9,k:0};for(const s of t)for(const i of s)if(i){const a=r[i.type];n+=i.color==="w"?a:-a}return n}const UA=["to","takes","captures","moves","x","move"],HA={one:"1",won:"1",first:"1",two:"2",too:"2",second:"2",three:"3",free:"3",tree:"3",third:"3",four:"4",fore:"4",forth:"4",fourth:"4",five:"5",fifth:"5",six:"6",sixth:"6",sicks:"6",seven:"7",seventh:"7",eight:"8",ate:"8",eighth:"8"},KA={night:"knight",nite:"knight",horse:"knight",rock:"rook",castle:"rook",brook:"rook",bish:"bishop",bishup:"bishop",pond:"pawn"},GA={ay:"a",aye:"a",eh:"a",alpha:"a",alfa:"a",apple:"a",able:"a",bee:"b",be:"b",bravo:"b",boy:"b",baker:"b",cee:"c",see:"c",sea:"c",charlie:"c",cat:"c",dee:"d",delta:"d",dog:"d",david:"d",eee:"e",ee:"e",echo:"e",easy:"e",edward:"e",ef:"f",eff:"f",foxtrot:"f",fox:"f",frank:"f",if:"f",of:"f",gee:"g",jee:"g",golf:"g",george:"g",aitch:"h",ach:"h",hotel:"h",henry:"h"};function QA(e){let t=e.toLowerCase();t=t.replace(/\bbefore\b/g,"b 4"),t=t.replace(/\bsci\s*fi\b/g,"c 5"),t=t.replace(/\bscifi\b/g,"c 5"),t=t.replace(/\bquincy\b/g,"queen c");for(const[n,r]of Object.entries(GA))t=t.replace(new RegExp(`\\b${n}\\b`,"g"),r);t=t.replace(/\bhe\s+([1-8])\b/g,"e $1"),t=t.replace(/\bhe\s+(one|two|three|four|five|six|seven|eight|won|too|free|fore|for|fifth|sixth|seventh|eighth)\b/gi,"e $1"),t=t.replace(/\bthe\s+([1-8])\b/g,"d $1"),t=t.replace(/\bthe\s+(one|two|three|four|five|six|seven|eight)\b/gi,"d $1"),t=t.replace(/\b([a-h])\s+for\b/g,"$1 4");for(const[n,r]of Object.entries(HA))t=t.replace(new RegExp(`\\b${n}\\b`,"g"),r);for(const[n,r]of Object.entries(KA))t=t.replace(new RegExp(`\\b${n}\\b`,"g"),r);return t}function YA(e,t){const n=QA(e);console.log("[matchesMove] Input:",e," Normalized:",n," Target:",t.san);let r=n.replace(/[^a-z0-9\s]/g,"");const i=r.split(/\s+/).filter(w=>!UA.includes(w)),a=i.join(" "),l=r.replace(/\s+/g,"").match(/^([a-h])([1-8])$/);if(l&&t.piece==="p"){const w=l[1]+l[2];if(t.to===w)return!0}const c=a.replace(/\s+/g,"").match(/^([a-h])([1-8])$/);if(c&&t.piece==="p"){const w=c[1]+c[2];if(t.to===w)return!0}const u=t.san.toLowerCase().replace(/[+#x]/g,"");if(a.replace(/\s+/g,"").includes(u))return!0;const f=["knight","night","bishop","rook","queen","king","pawn"],m=Lc[t.piece],h=i.some(w=>m==="pawn"&&!f.some(x=>x!=="pawn"&&a.includes(x))||a.includes(m)||m==="knight"&&a.includes("night")),y=t.to[0],p=t.to[1],g=a.includes(t.to)||a.includes(y)&&a.includes(p);return!!(h&&g)}function XA({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,i]=d.useState("ready"),[a,l]=d.useState(()=>wf(3,4)),[c,u]=d.useState(""),[f,m]=d.useState([]),[h,y]=d.useState(0),[p,g]=d.useState(0),[w,x]=d.useState(0),[v,b]=d.useState(!1),[S,N]=d.useState(!1),[j,k]=d.useState("challenge"),[C,R]=d.useState(null),[P,D]=d.useState(!1),[_,q]=d.useState(!1),[M,z]=d.useState(!1),Q=d.useRef(null),Y=d.useRef(null),T=d.useRef(!1),$=5,V=(n==null?void 0:n.knightsPathBest)!==null&&p>0&&p<((n==null?void 0:n.knightsPathBest)||1/0);d.useEffect(()=>{r==null||r(s)},[s,r]),d.useEffect(()=>{let fe=null;return s==="playing"&&(fe=setInterval(()=>{g(Date.now()-h)},100)),()=>{fe&&clearInterval(fe)}},[s,h]);const G=d.useCallback(async()=>{T.current=!1;try{await te.stopSession()}catch{}if(Q.current){try{await Q.current.remove()}catch{}Q.current=null}z(!1)},[]);d.useEffect(()=>()=>{G()},[G]);const de=d.useCallback(fe=>{const A=fe.toLowerCase().replace(/[^a-z0-9]/g,""),B={alpha:"a",alfa:"a",bravo:"b",charlie:"c",delta:"d",echo:"e",foxtrot:"f",golf:"g",hotel:"h",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8"};let W=fe.toLowerCase();for(const[re,se]of Object.entries(B))W=W.replace(new RegExp(re,"g"),se);W=W.replace(/[^a-h1-8]/g,"");const U=W.match(/([a-h])([1-8])/);if(U)return`${U[1]}${U[2]}`;if(A.length>=2){const re=A.match(/[a-h]/),se=A.match(/[1-8]/);if(re&&se)return`${re[0]}${se[0]}`}return null},[]);d.useEffect(()=>{if(!er||!_||s!=="playing"){er&&(s!=="playing"||!_)&&G();return}let fe=!1;return(async()=>{try{if(await Fo(),fe)return;Q.current=await te.addListener("onSpeechResult",B=>{var U,re;if(!T.current)return;const W=((U=B.text)==null?void 0:U.toLowerCase().trim())||"";if(W){const se=de(W);if(se&&se.length===2){const ye=se[0],Fe=se[1];(re=Y.current)==null||re.call(Y,ye,Fe)}T.current&&te.startListening().catch(()=>{})}}),T.current=!0,await te.startSession(),await te.startListening(),z(!0)}catch(B){console.error("[KnightsPath] Voice setup failed:",B)}})(),()=>{fe=!0,G()}},[s,_,G,de]);const ne=(fe=!1)=>{N(fe);const A=wf(3,4);l(A),u(A.start),m([A.start]),x(0),y(Date.now()),g(0),i("playing");const B=A.start[0]==="a"?"ay":A.start[0],W=A.end[0]==="a"?"ay":A.end[0];gt(`Knight on ${B} ${A.start[1]}. Get to ${W} ${A.end[1]}`)},ve=d.useCallback((fe,A)=>{if(s!=="playing")return;const B=`${fe}${A}`;if(!MA(c,B)){qe.impact({style:He.Heavy}).catch(()=>{}),R({square:B,correct:!1}),gt("Invalid knight move"),setTimeout(()=>R(null),500);return}if(qe.impact({style:He.Light}).catch(()=>{}),R({square:B,correct:!0}),u(B),m(W=>[...W,B]),B===a.end){const W=w+1;if(x(W),W>=$&&!S){const U=Date.now()-h;g(U),i("finished"),t(U),gt("Complete!")}else{const U=wf(3,4);setTimeout(()=>{l(U),u(U.start),m([U.start]),R(null);const re=U.start[0]==="a"?"ay":U.start[0],se=U.end[0]==="a"?"ay":U.end[0];gt(`Good! Knight on ${re} ${U.start[1]}. Get to ${se} ${U.end[1]}`)},300)}}else setTimeout(()=>R(null),200)},[s,c,a,w,S,h,t]);return d.useEffect(()=>{Y.current=ve},[ve]),s==="ready"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-knights-path-back",children:o.jsx(Sn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Knight's Path"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(qu,{className:"h-12 w-12 text-green-500 mx-auto"}),o.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"})]}),o.jsx(ta,{value:j,onValueChange:fe=>k(fe),className:"w-full max-w-xs",children:o.jsxs(zo,{className:"grid w-full grid-cols-2",children:[o.jsx(Mn,{value:"challenge","data-testid":"tab-knights-challenge",children:"5 Path Race"}),o.jsx(Mn,{value:"practice","data-testid":"tab-knights-practice",children:"Practice"})]})}),o.jsx("p",{className:"text-muted-foreground text-center",children:j==="challenge"?"Complete 5 knight paths as fast as you can!":"Practice knight movement with no time pressure."}),o.jsxs("div",{className:"flex items-center gap-3 w-full max-w-xs",children:[o.jsx(wn,{id:"hide-knight",checked:P,onCheckedChange:D,"data-testid":"switch-hide-knight"}),o.jsxs(Ft,{htmlFor:"hide-knight",className:"flex items-center gap-2",children:[P?o.jsx(v2,{className:"h-4 w-4"}):o.jsx(Uu,{className:"h-4 w-4"}),"Hide knight (blindfold mode)"]})]}),o.jsxs("div",{className:"flex items-center gap-3 w-full max-w-xs",children:[o.jsx(wn,{id:"audio-input",checked:_,onCheckedChange:q,"data-testid":"switch-audio-input-knights"}),o.jsxs(Ft,{htmlFor:"audio-input",className:"flex items-center gap-2",children:[_?o.jsx(qt,{className:"h-4 w-4"}):o.jsx(Hr,{className:"h-4 w-4"}),"Voice input (say coordinates)"]})]}),j==="challenge"&&(n==null?void 0:n.knightsPathBest)!==null&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",o.jsx("span",{className:"font-semibold text-green-500",children:bn(n.knightsPathBest)})]}),o.jsx(X,{size:"lg",onClick:()=>ne(j==="practice"),"data-testid":"button-start-knights",children:"Start"})]})]}):s==="finished"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-knights-back-finished",children:o.jsx(Sn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Knight's Path"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsx(Jn,{className:`h-16 w-16 ${V?"text-green-500":"text-muted-foreground"}`}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h2",{className:"text-4xl font-bold",children:bn(p)}),o.jsx("p",{className:"text-lg text-muted-foreground",children:"to complete 5 knight paths"}),V&&o.jsx(lt,{className:"bg-green-500 text-white",children:"New Personal Best!"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(X,{variant:"outline",onClick:e,"data-testid":"button-knights-menu",children:"Menu"}),o.jsx(X,{onClick:()=>ne(!1),"data-testid":"button-knights-retry",children:"Play Again"})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("p",{className:"text-lg font-semibold",children:["Get to: ",o.jsx("span",{className:"text-2xl font-mono",children:a.end})]}),o.jsx("div",{className:"flex items-center gap-2",children:S?o.jsx(lt,{variant:"outline",children:"Practice"}):o.jsx("span",{className:"text-lg font-mono tabular-nums",children:bn(p)})})]}),!S&&o.jsx(qs,{value:w/$*100,className:"mb-2"}),o.jsx("p",{className:"text-sm text-muted-foreground text-center mb-2",children:S?`${w} paths completed`:`${w}/${$} paths`}),_&&M&&o.jsxs("div",{className:"flex items-center gap-2 text-green-500 mb-2",children:[o.jsx(qt,{className:"h-4 w-4 animate-pulse"}),o.jsx("span",{className:"text-sm",children:"Listening..."})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[o.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:["8","7","6","5","4","3","2","1"].map(fe=>dr.map(A=>{const B=`${A}${fe}`,W=dr.indexOf(A),U=Hi.indexOf(fe),re=fl(W,U),se=B===c,ye=B===a.end,Fe=(C==null?void 0:C.square)===B,ze=f.includes(B),Ae=B===a.start;let oe=re?"bg-amber-700":"bg-amber-100";return Fe?oe=C.correct?"bg-green-500":"bg-red-500":ye?oe="bg-blue-400":Ae?oe="bg-yellow-400":ze&&!se&&(oe=re?"bg-green-700":"bg-green-300"),o.jsx("button",{className:`aspect-square ${oe} transition-colors duration-100 flex items-center justify-center`,onClick:()=>ve(A,fe),"data-testid":`square-${B}`,children:se&&!P&&o.jsx("img",{src:"/pieces/bN.svg",alt:"Knight",className:"w-4/5 h-4/5"})},B)}))}),o.jsxs(X,{variant:"outline",onClick:()=>b(!0),className:"mt-4","data-testid":"button-knights-resign",children:[o.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Resign"]})]})]}),o.jsx(Qr,{open:v,onOpenChange:b,children:o.jsxs(Pr,{children:[o.jsxs(Tr,{children:[o.jsx(Mr,{children:"Quit Game?"}),o.jsxs(_r,{children:["Your progress (",w,"/",$," paths) will not be saved."]})]}),o.jsxs(Rr,{children:[o.jsx(Lr,{"data-testid":"button-knights-resign-cancel",children:"Continue"}),o.jsx(Ar,{onClick:e,"data-testid":"button-knights-resign-confirm",children:"Quit"})]})]})})]})}const bf={easy:{maxPeeks:Number.POSITIVE_INFINITY,label:"Easy (Unlimited Peeks)"},medium:{maxPeeks:20,label:"Medium (20 Peeks)"},hard:{maxPeeks:10,label:"Hard (10 Peeks)"},expert:{maxPeeks:5,label:"Expert (5 Peeks)"},master:{maxPeeks:2,label:"Master (2 Peeks)"},grandmaster:{maxPeeks:0,label:"Grandmaster (No Peeks)"}};function ZA({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,i]=d.useState("ready"),[a,l]=d.useState("KQ_vs_K"),[c,u]=d.useState("easy"),[f,m]=d.useState(Number.POSITIVE_INFINITY),[h,y]=d.useState(!1),[p,g]=d.useState(null),[w,x]=d.useState(0),[v,b]=d.useState(0),[S,N]=d.useState(0),[j,k]=d.useState(!1),[C,R]=d.useState(null),[P,D]=d.useState([]),[_,q]=d.useState(!0),[M,z]=d.useState(!0),[Q,Y]=d.useState(!1),[T,$]=d.useState(!1),[V,G]=d.useState([]),de=d.useRef(null),ne=d.useRef(null),ve=d.useRef(!1),fe=d.useRef(null),A=d.useRef(null),B=(n==null?void 0:n.endgameDrillsBest)!==null&&v>0&&v<((n==null?void 0:n.endgameDrillsBest)||1/0),W=()=>{f<=0||y(!0)},U=()=>{h&&f>0&&m(oe=>oe-1),y(!1)};d.useEffect(()=>{s==="memorizing"||s==="playing"?r==null||r("playing"):r==null||r(s)},[s,r]),d.useEffect(()=>{let oe=null;return s==="playing"&&(oe=setInterval(()=>{b(Date.now()-w)},100)),()=>{oe&&clearInterval(oe)}},[s,w]);const re=d.useCallback(async()=>{ve.current=!1;try{await te.stopSession()}catch{}if(de.current){try{await de.current.remove()}catch{}de.current=null}$(!1)},[]);d.useEffect(()=>()=>{re()},[re]);const se=d.useCallback(oe=>{const Ne=oe.toLowerCase(),Ce={alpha:"a",alfa:"a",bravo:"b",charlie:"c",delta:"d",echo:"e",foxtrot:"f",golf:"g",hotel:"h",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8"};let Re=Ne;for(const[F,H]of Object.entries(Ce))Re=Re.replace(new RegExp(F,"g"),H);Re=Re.replace(/[^a-h1-8]/g,"");const Me=Re.match(/([a-h])([1-8])/g);return Me&&Me.length>=2?{from:Me[0],to:Me[1]}:Me&&Me.length===1?{from:"",to:Me[0]}:null},[]);d.useEffect(()=>{if(!er||!Q||s!=="playing"){er&&(s!=="playing"||!Q)&&re();return}let oe=!1;return(async()=>{try{if(await Fo(),oe)return;de.current=await te.addListener("onSpeechResult",Ce=>{var Me,F,H,he;if(!ve.current)return;const Re=((Me=Ce.text)==null?void 0:Me.toLowerCase().trim())||"";if(Re){const ie=se(Re);if(ie&&ie.to)if(ie.from&&ie.from.length===2)(F=ne.current)==null||F.call(ne,ie.from[0],ie.from[1]),setTimeout(()=>{var ae;(ae=ne.current)==null||ae.call(ne,ie.to[0],ie.to[1])},100);else if(fe.current)(H=ne.current)==null||H.call(ne,ie.to[0],ie.to[1]);else{const ae=A.current;if(ae){const $e=ae.board().flat().filter(ke=>ke&&ke.color==="w");for(const ke of $e){if(!ke)continue;if(ae.moves({square:ke.square,verbose:!0}).find(kt=>kt.to===ie.to)){(he=ne.current)==null||he.call(ne,ke.square[0],ke.square[1]),setTimeout(()=>{var kt;(kt=ne.current)==null||kt.call(ne,ie.to[0],ie.to[1])},100);break}}}}ve.current&&te.startListening().catch(()=>{})}}),ve.current=!0,await te.startSession(),await te.startListening(),$(!0)}catch(Ce){console.error("[EndgameDrills] Voice setup failed:",Ce)}})(),()=>{oe=!0,re()}},[s,Q,re,se]);const ye=()=>{const oe=IA(a),Ne=new Ln(oe.fen);g(Ne),N(0),b(0),R(null),D([]),q(!0),y(!1),m(bf[c].maxPeeks),G([]),i("memorizing")},Fe=()=>{q(!1),x(Date.now()),i("playing")},ze=d.useCallback((oe,Ne)=>{if(s!=="playing"||!p)return;const Ce=`${oe}${Ne}`;if(C){const Re=p.moves({square:C,verbose:!0}).find(Me=>Me.to===Ce);if(Re){if(p.move(Re),N(Me=>Me+1),G(Me=>[...Me,Re.san]),qe.impact({style:He.Light}).catch(()=>{}),p.isCheckmate()){const Me=Date.now()-w;b(Me),i("finished"),t(Me)}else if(!p.isGameOver()){const Me=p.moves({verbose:!0});if(Me.length>0){const F=Me[Math.floor(Math.random()*Me.length)];setTimeout(()=>{p.move(F),G(H=>[...H,F.san]),M&&Rt(F.san).catch(()=>{}),g(new Ln(p.fen()))},300)}}R(null),D([]),g(new Ln(p.fen()))}else{const Me=p.get(Ce);if(Me&&Me.color==="w"){R(Ce);const F=p.moves({square:Ce,verbose:!0});D(F.map(H=>H.to))}else R(null),D([])}}else{const Re=p.get(Ce);if(Re&&Re.color==="w"){R(Ce);const Me=p.moves({square:Ce,verbose:!0});D(Me.map(F=>F.to))}}},[s,p,C,w,t,M]);d.useEffect(()=>{ne.current=ze},[ze]),d.useEffect(()=>{fe.current=C},[C]),d.useEffect(()=>{A.current=p},[p]);const Ae=oe=>{if(!oe)return null;const Ne={k:"K",q:"Q",r:"R",b:"B",n:"N",p:"P"},Ce=`${oe.color}${Ne[oe.type]}`;return o.jsx("img",{src:`/pieces/${Ce}.svg`,alt:Ce,className:"w-4/5 h-4/5"})};return s==="ready"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-endgame-back",children:o.jsx(Sn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Endgame Drills"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(Wu,{className:"h-12 w-12 text-orange-500 mx-auto"}),o.jsx("h2",{className:"text-2xl font-bold",children:"Select Endgame"})]}),o.jsxs(ul,{value:a,onValueChange:oe=>l(oe),children:[o.jsx(Vi,{className:"w-full max-w-xs","data-testid":"select-endgame-type",children:o.jsx(dl,{})}),o.jsx(qi,{children:$A().map(oe=>o.jsx(Qn,{value:oe.value,children:oe.label},oe.value))})]}),o.jsxs(ul,{value:c,onValueChange:oe=>u(oe),children:[o.jsx(Vi,{className:"w-full max-w-xs","data-testid":"select-peek-difficulty",children:o.jsx(dl,{})}),o.jsx(qi,{children:Object.keys(bf).map(oe=>o.jsx(Qn,{value:oe,children:bf[oe].label},oe))})]}),o.jsxs("div",{className:"flex items-center gap-3 w-full max-w-xs",children:[o.jsx(wn,{id:"audio-enabled",checked:M,onCheckedChange:z,"data-testid":"switch-audio-enabled"}),o.jsxs(Ft,{htmlFor:"audio-enabled",className:"flex items-center gap-2",children:[M?o.jsx(Hu,{className:"h-4 w-4"}):o.jsx(Hr,{className:"h-4 w-4"}),"Announce opponent moves"]})]}),o.jsxs("div",{className:"flex items-center gap-3 w-full max-w-xs",children:[o.jsx(wn,{id:"audio-input-endgame",checked:Q,onCheckedChange:Y,"data-testid":"switch-audio-input-endgame"}),o.jsxs(Ft,{htmlFor:"audio-input-endgame",className:"flex items-center gap-2",children:[Q?o.jsx(qt,{className:"h-4 w-4"}):o.jsx(Hr,{className:"h-4 w-4"}),"Voice input (say moves)"]})]}),o.jsx("p",{className:"text-muted-foreground text-center",children:"Checkmate the lone king as fast as possible!"}),(n==null?void 0:n.endgameDrillsBest)!==null&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",o.jsx("span",{className:"font-semibold text-orange-500",children:bn(n.endgameDrillsBest)})]}),o.jsx(X,{size:"lg",onClick:ye,"data-testid":"button-start-endgame",children:"Start"})]})]}):s==="memorizing"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-endgame-back-memorizing",children:o.jsx(Sn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Memorize the Position"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[o.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:["8","7","6","5","4","3","2","1"].map(oe=>dr.map(Ne=>{const Ce=`${Ne}${oe}`,Re=dr.indexOf(Ne),Me=Hi.indexOf(oe),F=fl(Re,Me),H=p==null?void 0:p.get(Ce),he=F?"bg-amber-700":"bg-amber-100";return o.jsx("div",{className:`aspect-square ${he} flex items-center justify-center`,"data-testid":`square-${Ce}`,children:Ae(H||null)},Ce)}))}),o.jsx("p",{className:"text-muted-foreground text-center mt-4 mb-2",children:"Study the position, then tap Start to play blindfolded"}),o.jsx(X,{size:"lg",onClick:Fe,className:"mt-2","data-testid":"button-start-playing",children:"Start Playing"})]})]}):s==="finished"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-endgame-back-finished",children:o.jsx(Sn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Endgame Drills"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsx(Jn,{className:`h-16 w-16 ${B?"text-orange-500":"text-muted-foreground"}`}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h2",{className:"text-4xl font-bold",children:bn(v)}),o.jsxs("p",{className:"text-lg text-muted-foreground",children:["Checkmate in ",S," moves"]}),B&&o.jsx(lt,{className:"bg-orange-500 text-white",children:"New Personal Best!"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(X,{variant:"outline",onClick:e,"data-testid":"button-endgame-menu",children:"Menu"}),o.jsx(X,{onClick:ye,"data-testid":"button-endgame-retry",children:"Play Again"})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("p",{className:"text-lg font-semibold",children:["Moves: ",o.jsx("span",{className:"text-2xl font-mono",children:S})]}),o.jsx("span",{className:"text-lg font-mono tabular-nums",children:bn(v)})]}),o.jsx("p",{className:"text-sm text-muted-foreground text-center mb-2",children:h?"Peeking at the board...":"Playing blindfolded - pieces are hidden"}),V.length>0&&o.jsxs("div",{className:"mb-2 p-2 bg-muted/50 rounded-md w-full max-w-sm mx-auto",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Move history:"}),o.jsx("div",{className:"text-sm font-mono flex flex-wrap gap-1",children:V.map((oe,Ne)=>o.jsxs("span",{className:Ne%2===0?"text-foreground":"text-muted-foreground",children:[Ne%2===0?`${Math.floor(Ne/2)+1}. `:"",oe]},Ne))})]}),Q&&T&&o.jsxs("div",{className:"flex items-center gap-2 text-green-500 mb-2",children:[o.jsx(qt,{className:"h-4 w-4 animate-pulse"}),o.jsx("span",{className:"text-sm",children:"Listening..."})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[o.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:["8","7","6","5","4","3","2","1"].map(oe=>dr.map(Ne=>{const Ce=`${Ne}${oe}`,Re=dr.indexOf(Ne),Me=Hi.indexOf(oe),F=fl(Re,Me),H=p==null?void 0:p.get(Ce),he=Ce===C,ie=P.includes(Ce);let ae=F?"bg-amber-700":"bg-amber-100";return he?ae="bg-yellow-400":ie&&(ae=F?"bg-green-600":"bg-green-300"),o.jsx("button",{className:`aspect-square ${ae} transition-colors duration-100 flex items-center justify-center`,onClick:()=>ze(Ne,oe),"data-testid":`square-${Ce}`,children:_||h?Ae(H||null):null},Ce)}))}),c!=="grandmaster"&&o.jsxs("div",{className:"mt-4 space-y-2 w-full max-w-xs",children:[o.jsxs(X,{variant:h?"default":"outline",className:`w-full ${h?"bg-amber-400 hover:bg-amber-500 text-black":""}`,onMouseDown:W,onMouseUp:U,onMouseLeave:U,onTouchStart:W,onTouchEnd:U,onTouchCancel:U,disabled:f<=0,"data-testid":"button-endgame-peek",children:[o.jsx(Uu,{className:"h-4 w-4 mr-2"}),h?"Peeking...":"Hold to Peek"]}),o.jsx("p",{className:"text-center text-sm text-muted-foreground","data-testid":"text-peeks-remaining",children:isFinite(f)?`${f} peeks left`:"Unlimited peeks"})]}),o.jsxs(X,{variant:"outline",onClick:()=>k(!0),className:"mt-4","data-testid":"button-endgame-resign",children:[o.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Resign"]})]})]}),o.jsx(Qr,{open:j,onOpenChange:k,children:o.jsxs(Pr,{children:[o.jsxs(Tr,{children:[o.jsx(Mr,{children:"Quit Game?"}),o.jsx(_r,{children:"Your progress will not be saved."})]}),o.jsxs(Rr,{children:[o.jsx(Lr,{"data-testid":"button-endgame-resign-cancel",children:"Continue"}),o.jsx(Ar,{onClick:e,"data-testid":"button-endgame-resign-confirm",children:"Quit"})]})]})})]})}function JA({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,i]=d.useState("ready"),[a,l]=d.useState("10-20"),[c,u]=d.useState(null),[f,m]=d.useState(0),[h,y]=d.useState(!0),[p,g]=d.useState(!1),[w,x]=d.useState(0),[v,b]=d.useState(0),[S,N]=d.useState(""),[j,k]=d.useState(null),[C,R]=d.useState(!1),[P,D]=d.useState(!1),_=d.useRef(null),q=(n==null?void 0:n.blindfoldMarathonBest)!==null&&v>0&&v<((n==null?void 0:n.blindfoldMarathonBest)||1/0);d.useEffect(()=>{r==null||r(s)},[s,r]);const M=d.useCallback(async()=>{try{await te.stopSession()}catch{}if(_.current){try{await _.current.remove()}catch{}_.current=null}D(!1)},[]);d.useEffect(()=>()=>{M()},[M]),d.useEffect(()=>{if(!er||!p){er&&!p&&M();return}let V=!1;return(async()=>{try{if(await Fo(),V)return;_.current=await te.addListener("onSpeechResult",de=>{var ve;const ne=((ve=de.text)==null?void 0:ve.toLowerCase().trim())||"";ne&&(N(ne),te.startListening().catch(()=>{}))}),await te.startSession(),await te.startListening(),D(!0)}catch(de){console.error("[Marathon] Voice setup failed:",de)}})(),()=>{V=!0,M()}},[p,M]),d.useEffect(()=>{let V=null;return s==="playing"&&p&&(V=setInterval(()=>{b(Date.now()-w)},100)),()=>{V&&clearInterval(V)}},[s,w,p]);const z=()=>{const V=x0().find(de=>de.value===a),G=DA(V.minMoves,V.maxMoves);u(G),m(0),y(!0),g(!1),N(""),k(null),i("playing")},Q=()=>{f>0&&m(V=>V-1)},Y=()=>{c&&(f<c.pgnMoves.length-1?m(V=>V+1):(y(!1),g(!0),x(Date.now())))},T=()=>{if(!c)return;const V=S.toLowerCase().replace(/[^a-z0-9]/g,""),G=c.solution.toLowerCase().replace(/[^a-z0-9]/g,""),de=V.includes(G)||G.includes(V);if(k(de),de){const ne=Date.now()-w;b(ne),i("finished"),t(ne)}else setTimeout(()=>{i("finished"),b(0)},1e3)},$=()=>{e()};return s==="ready"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-marathon-back",children:o.jsx(Sn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Blindfold Marathon"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(Vu,{className:"h-12 w-12 text-red-500 mx-auto"}),o.jsx("h2",{className:"text-2xl font-bold",children:"Select Difficulty"})]}),o.jsxs(ul,{value:a,onValueChange:V=>l(V),children:[o.jsx(Vi,{className:"w-full max-w-xs","data-testid":"select-marathon-difficulty",children:o.jsx(dl,{})}),o.jsx(qi,{children:x0().map(V=>o.jsx(Qn,{value:V.value,children:V.label},V.value))})]}),o.jsx("p",{className:"text-muted-foreground text-center text-sm",children:"Step through moves at your own pace, then find the winning move!"}),(n==null?void 0:n.blindfoldMarathonBest)!==null&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",o.jsx("span",{className:"font-semibold text-red-500",children:bn(n.blindfoldMarathonBest)})]}),o.jsx(X,{size:"lg",onClick:z,"data-testid":"button-start-marathon",children:"Start"})]})]}):s==="finished"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-marathon-back-finished",children:o.jsx(Sn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Blindfold Marathon"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsx(Jn,{className:`h-16 w-16 ${j&&q?"text-red-500":j?"text-green-500":"text-muted-foreground"}`}),o.jsx("div",{className:"text-center space-y-2",children:j?o.jsxs(o.Fragment,{children:[o.jsx("h2",{className:"text-4xl font-bold",children:bn(v)}),o.jsx("p",{className:"text-lg text-muted-foreground",children:"to find the winning move"}),q&&o.jsx(lt,{className:"bg-red-500 text-white",children:"New Personal Best!"})]}):o.jsxs(o.Fragment,{children:[o.jsx("h2",{className:"text-2xl font-bold text-red-500",children:"Incorrect"}),o.jsxs("p",{className:"text-lg text-muted-foreground",children:["The answer was: ",o.jsx("span",{className:"font-mono font-bold",children:c==null?void 0:c.solution})]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(X,{variant:"outline",onClick:e,"data-testid":"button-marathon-menu",children:"Menu"}),o.jsx(X,{onClick:z,"data-testid":"button-marathon-retry",children:"Try Again"})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h1",{className:"text-xl font-bold",children:c==null?void 0:c.description}),p&&o.jsx("span",{className:"text-lg font-mono tabular-nums",children:bn(v)})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[h?o.jsxs("div",{className:"text-center space-y-4 w-full max-w-xs",children:[o.jsxs("p",{className:"text-sm text-muted-foreground",children:[c==null?void 0:c.white," vs ",c==null?void 0:c.black]}),o.jsxs("div",{className:"text-5xl font-mono font-bold min-h-[4rem] flex items-center justify-center",children:[f%2===0?`${Math.floor(f/2)+1}. `:"",c==null?void 0:c.pgnMoves[f]]}),o.jsxs("p",{className:"text-muted-foreground",children:["Move ",f+1," of ",(c==null?void 0:c.pgnMoves.length)||0]}),o.jsx(qs,{value:(f+1)/((c==null?void 0:c.pgnMoves.length)||1)*100,className:"w-full"}),o.jsxs("div",{className:"flex gap-4 justify-center mt-4",children:[o.jsxs(X,{size:"lg",variant:"outline",onClick:Q,disabled:f===0,"data-testid":"button-marathon-back-move",children:[o.jsx(Sn,{className:"h-5 w-5 mr-1"}),"Back"]}),o.jsxs(X,{size:"lg",onClick:Y,"data-testid":"button-marathon-next-move",children:[f===((c==null?void 0:c.pgnMoves.length)||0)-1?"Done":"Next",f!==((c==null?void 0:c.pgnMoves.length)||0)-1&&o.jsx(qu,{className:"h-5 w-5 ml-1"})]})]})]}):p?o.jsxs("div",{className:"text-center space-y-4 w-full max-w-xs",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Find the Best Move!"}),o.jsxs("p",{className:"text-muted-foreground",children:[c==null?void 0:c.white," to move"]}),P&&o.jsxs("div",{className:"flex items-center justify-center gap-2 text-red-500",children:[o.jsx(qt,{className:"h-5 w-5 animate-pulse"}),o.jsx("span",{className:"text-sm",children:"Listening..."})]}),o.jsx("input",{type:"text",value:S,onChange:V=>N(V.target.value),placeholder:P?"Speak or type your move":"Enter your move (e.g., Qb8+)",className:"w-full px-4 py-2 border rounded-md text-center text-lg font-mono text-black bg-white",autoFocus:!0,"data-testid":"input-marathon-answer"}),o.jsx(X,{size:"lg",onClick:T,disabled:!S.trim(),"data-testid":"button-marathon-submit",children:"Submit Answer"})]}):null,o.jsxs(X,{variant:"outline",onClick:()=>R(!0),className:"mt-4","data-testid":"button-marathon-resign",children:[o.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Quit"]})]})]}),o.jsx(Qr,{open:C,onOpenChange:R,children:o.jsxs(Pr,{children:[o.jsxs(Tr,{children:[o.jsx(Mr,{children:"Quit Game?"}),o.jsx(_r,{children:"Your progress will not be saved."})]}),o.jsxs(Rr,{children:[o.jsx(Lr,{"data-testid":"button-marathon-resign-cancel",children:"Continue"}),o.jsx(Ar,{onClick:$,"data-testid":"button-marathon-resign-confirm",children:"Quit"})]})]})})]})}function e3(){const[e,t]=d.useState(!1),[n,r]=d.useState(!1),[s,i]=d.useState(za()),[a,l]=d.useState(0),[c,u]=d.useState("idle"),[f,m]=d.useState(!1),h=d.useRef(null),[y,p]=d.useState(!1),[g,w]=d.useState("menu"),x=d.useRef(null);d.useEffect(()=>{const j=()=>{i(za())};return window.addEventListener("statsUpdated",j),()=>window.removeEventListener("statsUpdated",j)},[]),d.useEffect(()=>{if(!Nn.isNativePlatform()){oc(!0);return}(async()=>{try{console.log("[App] Requesting mic permission on startup..."),Vv("requesting...");const k=await te.requestPermissions();if(console.log("[App] Mic permission result:",k.mic),Vv(k.mic),k.mic!=="granted"){console.warn("[App] Mic permission denied"),du("Mic permission denied"),oc(!1);return}console.log("[App] Permission granted, waiting for Vosk service..."),await te.waitUntilReady(),console.log("[App] Vosk service ready"),mR(!0),oc(!0)}catch(k){console.error("[App] Failed to initialize voice:",k),du(String(k)),oc(!1)}})()},[]);const v=()=>{l(j=>j+1)},b=()=>{if(y){if(g==="menu"||g==="ready"||g==="finished"){p(!1);return}m(!0);return}if(c==="idle"){r(!1),t(!1),window.dispatchEvent(new CustomEvent("closeAllDialogs"));return}if(c==="setup"){h.current&&h.current();return}m(!0)},S=()=>{if(m(!1),y){x.current&&x.current(),p(!1);return}h.current&&h.current()},N=()=>{if(y&&g==="playing")return"Quit this training game and return to title?";switch(c){case"in_game":return"Resign this game and return to title?";case"reconstruction":return"Leave this challenge and return to title?";case"analysis":return"Skip analysis and return to title?";default:return"Return to title?"}};return o.jsx(VP,{defaultTheme:"dark",children:o.jsxs(BP,{children:[o.jsxs("div",{className:"fixed inset-0 w-full h-full bg-background overflow-hidden",children:[o.jsxs("header",{className:"absolute top-0 left-0 right-0 z-50 grid grid-cols-3 items-center px-3 border-b border-border bg-background",style:{paddingTop:"var(--safe-area-top)",minHeight:"calc(56px + var(--safe-area-top, 0px))"},children:[o.jsx("div",{className:"flex justify-start",children:o.jsxs(Di,{open:n,onOpenChange:r,children:[o.jsx(uu,{asChild:!0,children:o.jsx(X,{variant:"ghost",size:"icon","data-testid":"button-voice-help",children:o.jsx(qt,{className:"h-5 w-5"})})}),o.jsxs(Mo,{children:[o.jsx(_o,{children:o.jsx(Ao,{children:"Voice Commands"})}),o.jsxs("div",{className:"space-y-4 text-sm max-h-[60vh] overflow-y-auto",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:"Basic Moves"}),o.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"e4"'})," - Move pawn to e4"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"knight f3"'})," - Move knight to f3"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"bishop takes c6"'})," - Capture on c6"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"castle kingside"'})," - Castle short (O-O)"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"castle queenside"'})," - Castle long (O-O-O)"]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:"When Two Pieces Can Move"}),o.jsx("p",{className:"text-muted-foreground",children:"If you have two pieces that can reach the same square, specify which one:"}),o.jsx("p",{className:"font-mono text-foreground",children:'"Rook F to D1"'})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:"Query Commands"}),o.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"say again"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"repeat"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"again"'})," - Hear the last move"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"last move"'})," - Hear opponent's last move"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:`"what's on e4"`})," - Check what piece is on a square"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"where is my queen"'})," - Find your piece locations"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"how much time"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"clock"'})," - Hear remaining time"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"resign"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"quit"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"give up"'})," - Resign the game"]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:"Resign Confirmation"}),o.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"yes"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"confirm"'})," - Confirm resignation"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"no"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"cancel"'})," - Cancel resignation"]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:"Pro Commands"}),o.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"material"'})," - Hear material balance"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"legal moves for knight"'})," - List piece's legal moves"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"peek"'})," - Show board for 5 seconds"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"evaluate"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"eval"'})," - Hear engine evaluation"]})]}),o.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:'Note: "peek" and "evaluate" mark the game as assisted'})]})]})]})]})}),o.jsx("button",{onClick:b,className:`text-lg font-bold text-center whitespace-nowrap cursor-pointer transition-colors bg-transparent border-none p-0 m-0 font-inherit text-inherit outline-none select-none ${c==="idle"?"cursor-default text-foreground":"text-foreground hover:text-primary"}`,style:{WebkitTapHighlightColor:"transparent",WebkitTouchCallout:"none"},"data-testid":"button-title-home",children:"Blindfold Chess"}),o.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[o.jsx(X,{variant:"ghost",size:"icon",onClick:v,"data-testid":"button-game-history",children:o.jsx(y2,{className:"h-5 w-5"})}),o.jsxs(Di,{open:e,onOpenChange:t,children:[o.jsx(uu,{asChild:!0,children:o.jsx(X,{variant:"ghost",size:"icon","data-testid":"button-stats",children:o.jsx(cw,{className:"h-5 w-5"})})}),o.jsxs(Mo,{className:"max-w-lg max-h-[85vh] overflow-hidden",children:[o.jsx(_o,{children:o.jsx(Ao,{children:"Training Metrics"})}),o.jsx(BM,{stats:s}),o.jsxs(X,{variant:"outline",size:"sm",className:"w-full text-muted-foreground mt-4",onClick:()=>{zR(),i(za())},"data-testid":"button-reset-stats",children:[o.jsx(k2,{className:"mr-2 h-3 w-3"}),"Reset All Statistics"]})]})]})]})]}),o.jsx("main",{className:"absolute left-0 right-0 z-0 overflow-hidden",style:{top:"calc(56px + var(--safe-area-top, 0px))",bottom:"calc(56px + var(--safe-area-bottom, 0px))"},children:y?o.jsx(BA,{onBack:()=>p(!1),onStateChange:w,returnToMenuRef:x}):o.jsx(CA,{historyTrigger:a,onStateChange:u,returnToTitleRef:h,onTrainNowClick:()=>p(!0)})}),o.jsxs("footer",{className:"absolute bottom-0 left-0 right-0 z-50 grid grid-cols-3 items-center px-2 border-t border-border bg-background",style:{paddingBottom:"var(--safe-area-bottom)",minHeight:"calc(56px + var(--safe-area-bottom, 0px))"},children:[o.jsx("div",{className:"flex justify-start",children:o.jsx(GR,{})}),o.jsx("div",{className:"flex justify-center",children:o.jsx(WP,{})}),o.jsx("div",{className:"flex justify-end",children:o.jsx(QR,{})})]})]}),o.jsx(Qr,{open:f,onOpenChange:m,children:o.jsxs(Pr,{children:[o.jsxs(Tr,{children:[o.jsx(Mr,{children:"Return to Title"}),o.jsx(_r,{children:N()})]}),o.jsxs(Rr,{children:[o.jsx(Lr,{"data-testid":"button-cancel-return",children:"Cancel"}),o.jsx(Ar,{onClick:S,"data-testid":"button-confirm-return",children:"Confirm"})]})]})}),o.jsx(hE,{})]})})}Ay(document.getElementById("root")).render(o.jsx(e3,{}));export{He as I,Ui as N,Np as W};
