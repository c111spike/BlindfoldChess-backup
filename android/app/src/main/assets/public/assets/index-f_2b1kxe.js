var LN=Object.defineProperty;var IN=(e,t,n)=>t in e?LN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var kt=(e,t,n)=>IN(e,typeof t!="symbol"?t+"":t,n);function $N(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function y0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w0={exports:{}},Su={},b0={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fl=Symbol.for("react.element"),ON=Symbol.for("react.portal"),DN=Symbol.for("react.fragment"),BN=Symbol.for("react.strict_mode"),FN=Symbol.for("react.profiler"),zN=Symbol.for("react.provider"),VN=Symbol.for("react.context"),qN=Symbol.for("react.forward_ref"),WN=Symbol.for("react.suspense"),UN=Symbol.for("react.memo"),HN=Symbol.for("react.lazy"),Yp=Symbol.iterator;function KN(e){return e===null||typeof e!="object"?null:(e=Yp&&e[Yp]||e["@@iterator"],typeof e=="function"?e:null)}var S0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N0=Object.assign,k0={};function Hi(e,t,n){this.props=e,this.context=t,this.refs=k0,this.updater=n||S0}Hi.prototype.isReactComponent={};Hi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Hi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function j0(){}j0.prototype=Hi.prototype;function Qh(e,t,n){this.props=e,this.context=t,this.refs=k0,this.updater=n||S0}var Yh=Qh.prototype=new j0;Yh.constructor=Qh;N0(Yh,Hi.prototype);Yh.isPureReactComponent=!0;var Xp=Array.isArray,C0=Object.prototype.hasOwnProperty,Xh={current:null},E0={key:!0,ref:!0,__self:!0,__source:!0};function P0(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)C0.call(t,r)&&!E0.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:fl,type:e,key:i,ref:a,props:s,_owner:Xh.current}}function GN(e,t){return{$$typeof:fl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Zh(e){return typeof e=="object"&&e!==null&&e.$$typeof===fl}function QN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Zp=/\/+/g;function md(e,t){return typeof e=="object"&&e!==null&&e.key!=null?QN(""+e.key):t.toString(36)}function hc(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case fl:case ON:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+md(a,0):r,Xp(s)?(n="",e!=null&&(n=e.replace(Zp,"$&/")+"/"),hc(s,t,n,"",function(u){return u})):s!=null&&(Zh(s)&&(s=GN(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Zp,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Xp(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+md(i,l);a+=hc(i,t,n,c,s)}else if(c=KN(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+md(i,l++),a+=hc(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Il(e,t,n){if(e==null)return e;var r=[],s=0;return hc(e,r,"","",function(i){return t.call(n,i,s++)}),r}function YN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ln={current:null},mc={transition:null},XN={ReactCurrentDispatcher:Ln,ReactCurrentBatchConfig:mc,ReactCurrentOwner:Xh};function T0(){throw Error("act(...) is not supported in production builds of React.")}Xe.Children={map:Il,forEach:function(e,t,n){Il(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Il(e,function(){t++}),t},toArray:function(e){return Il(e,function(t){return t})||[]},only:function(e){if(!Zh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Xe.Component=Hi;Xe.Fragment=DN;Xe.Profiler=FN;Xe.PureComponent=Qh;Xe.StrictMode=BN;Xe.Suspense=WN;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XN;Xe.act=T0;Xe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=N0({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Xh.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)C0.call(t,c)&&!E0.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:fl,type:e.type,key:s,ref:i,props:r,_owner:a}};Xe.createContext=function(e){return e={$$typeof:VN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:zN,_context:e},e.Consumer=e};Xe.createElement=P0;Xe.createFactory=function(e){var t=P0.bind(null,e);return t.type=e,t};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(e){return{$$typeof:qN,render:e}};Xe.isValidElement=Zh;Xe.lazy=function(e){return{$$typeof:HN,_payload:{_status:-1,_result:e},_init:YN}};Xe.memo=function(e,t){return{$$typeof:UN,type:e,compare:t===void 0?null:t}};Xe.startTransition=function(e){var t=mc.transition;mc.transition={};try{e()}finally{mc.transition=t}};Xe.unstable_act=T0;Xe.useCallback=function(e,t){return Ln.current.useCallback(e,t)};Xe.useContext=function(e){return Ln.current.useContext(e)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(e){return Ln.current.useDeferredValue(e)};Xe.useEffect=function(e,t){return Ln.current.useEffect(e,t)};Xe.useId=function(){return Ln.current.useId()};Xe.useImperativeHandle=function(e,t,n){return Ln.current.useImperativeHandle(e,t,n)};Xe.useInsertionEffect=function(e,t){return Ln.current.useInsertionEffect(e,t)};Xe.useLayoutEffect=function(e,t){return Ln.current.useLayoutEffect(e,t)};Xe.useMemo=function(e,t){return Ln.current.useMemo(e,t)};Xe.useReducer=function(e,t,n){return Ln.current.useReducer(e,t,n)};Xe.useRef=function(e){return Ln.current.useRef(e)};Xe.useState=function(e){return Ln.current.useState(e)};Xe.useSyncExternalStore=function(e,t,n){return Ln.current.useSyncExternalStore(e,t,n)};Xe.useTransition=function(){return Ln.current.useTransition()};Xe.version="18.3.1";b0.exports=Xe;var d=b0.exports;const Tn=y0(d),R0=$N({__proto__:null,default:Tn},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZN=d,JN=Symbol.for("react.element"),ek=Symbol.for("react.fragment"),tk=Object.prototype.hasOwnProperty,nk=ZN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rk={key:!0,ref:!0,__self:!0,__source:!0};function M0(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)tk.call(t,r)&&!rk.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:JN,type:e,key:i,ref:a,props:s,_owner:nk.current}}Su.Fragment=ek;Su.jsx=M0;Su.jsxs=M0;w0.exports=Su;var o=w0.exports,_0={exports:{}},rr={},A0={exports:{}},L0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,A){var O=E.length;E.push(A);e:for(;0<O;){var K=O-1>>>1,ae=E[K];if(0<s(ae,A))E[K]=A,E[O]=ae,O=K;else break e}}function n(E){return E.length===0?null:E[0]}function r(E){if(E.length===0)return null;var A=E[0],O=E.pop();if(O!==A){E[0]=O;e:for(var K=0,ae=E.length,he=ae>>>1;K<he;){var ve=2*(K+1)-1,te=E[ve],I=ve+1,B=E[I];if(0>s(te,O))I<ae&&0>s(B,te)?(E[K]=B,E[I]=O,K=I):(E[K]=te,E[ve]=O,K=ve);else if(I<ae&&0>s(B,O))E[K]=B,E[I]=O,K=I;else break e}}return A}function s(E,A){var O=E.sortIndex-A.sortIndex;return O!==0?O:E.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],f=1,m=null,h=3,y=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(E){for(var A=n(u);A!==null;){if(A.callback===null)r(u);else if(A.startTime<=E)r(u),A.sortIndex=A.expirationTime,t(c,A);else break;A=n(u)}}function S(E){if(g=!1,b(E),!p)if(n(c)!==null)p=!0,W(N);else{var A=n(u);A!==null&&q(S,A.startTime-E)}}function N(E,A){p=!1,g&&(g=!1,x(C),C=-1),y=!0;var O=h;try{for(b(A),m=n(c);m!==null&&(!(m.expirationTime>A)||E&&!F());){var K=m.callback;if(typeof K=="function"){m.callback=null,h=m.priorityLevel;var ae=K(m.expirationTime<=A);A=e.unstable_now(),typeof ae=="function"?m.callback=ae:m===n(c)&&r(c),b(A)}else r(c);m=n(c)}if(m!==null)var he=!0;else{var ve=n(u);ve!==null&&q(S,ve.startTime-A),he=!1}return he}finally{m=null,h=O,y=!1}}var j=!1,k=null,C=-1,R=5,T=-1;function F(){return!(e.unstable_now()-T<R)}function _(){if(k!==null){var E=e.unstable_now();T=E;var A=!0;try{A=k(!0,E)}finally{A?z():(j=!1,k=null)}}else j=!1}var z;if(typeof v=="function")z=function(){v(_)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,V=M.port2;M.port1.onmessage=_,z=function(){V.postMessage(null)}}else z=function(){w(_,0)};function W(E){k=E,j||(j=!0,z())}function q(E,A){C=w(function(){E(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){p||y||(p=!0,W(N))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(E){switch(h){case 1:case 2:case 3:var A=3;break;default:A=h}var O=h;h=A;try{return E()}finally{h=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,A){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var O=h;h=E;try{return A()}finally{h=O}},e.unstable_scheduleCallback=function(E,A,O){var K=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?K+O:K):O=K,E){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=O+ae,E={id:f++,callback:A,priorityLevel:E,startTime:O,expirationTime:ae,sortIndex:-1},O>K?(E.sortIndex=O,t(u,E),n(c)===null&&E===n(u)&&(g?(x(C),C=-1):g=!0,q(S,O-K))):(E.sortIndex=ae,t(c,E),p||y||(p=!0,W(N))),E},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(E){var A=h;return function(){var O=h;h=A;try{return E.apply(this,arguments)}finally{h=O}}}})(L0);A0.exports=L0;var sk=A0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ok=d,nr=sk;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var I0=new Set,Va={};function $o(e,t){Ei(e,t),Ei(e+"Capture",t)}function Ei(e,t){for(Va[e]=t,e=0;e<t.length;e++)I0.add(t[e])}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sf=Object.prototype.hasOwnProperty,ik=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jp={},eg={};function ak(e){return Sf.call(eg,e)?!0:Sf.call(Jp,e)?!1:ik.test(e)?eg[e]=!0:(Jp[e]=!0,!1)}function lk(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ck(e,t,n,r){if(t===null||typeof t>"u"||lk(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function In(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fn[e]=new In(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fn[t]=new In(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){fn[e]=new In(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fn[e]=new In(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fn[e]=new In(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){fn[e]=new In(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){fn[e]=new In(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){fn[e]=new In(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){fn[e]=new In(e,5,!1,e.toLowerCase(),null,!1,!1)});var Jh=/[\-:]([a-z])/g;function em(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Jh,em);fn[t]=new In(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Jh,em);fn[t]=new In(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Jh,em);fn[t]=new In(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){fn[e]=new In(e,1,!1,e.toLowerCase(),null,!1,!1)});fn.xlinkHref=new In("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){fn[e]=new In(e,1,!1,e.toLowerCase(),null,!0,!0)});function tm(e,t,n,r){var s=fn.hasOwnProperty(t)?fn[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ck(t,n,s,r)&&(n=null),r||s===null?ak(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var hs=ok.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$l=Symbol.for("react.element"),Xo=Symbol.for("react.portal"),Zo=Symbol.for("react.fragment"),nm=Symbol.for("react.strict_mode"),Nf=Symbol.for("react.profiler"),$0=Symbol.for("react.provider"),O0=Symbol.for("react.context"),rm=Symbol.for("react.forward_ref"),kf=Symbol.for("react.suspense"),jf=Symbol.for("react.suspense_list"),sm=Symbol.for("react.memo"),js=Symbol.for("react.lazy"),D0=Symbol.for("react.offscreen"),tg=Symbol.iterator;function ca(e){return e===null||typeof e!="object"?null:(e=tg&&e[tg]||e["@@iterator"],typeof e=="function"?e:null)}var Mt=Object.assign,pd;function ka(e){if(pd===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);pd=t&&t[1]||""}return`
`+pd+e}var gd=!1;function vd(e,t){if(!e||gd)return"";gd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{gd=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ka(e):""}function uk(e){switch(e.tag){case 5:return ka(e.type);case 16:return ka("Lazy");case 13:return ka("Suspense");case 19:return ka("SuspenseList");case 0:case 2:case 15:return e=vd(e.type,!1),e;case 11:return e=vd(e.type.render,!1),e;case 1:return e=vd(e.type,!0),e;default:return""}}function Cf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zo:return"Fragment";case Xo:return"Portal";case Nf:return"Profiler";case nm:return"StrictMode";case kf:return"Suspense";case jf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case O0:return(e.displayName||"Context")+".Consumer";case $0:return(e._context.displayName||"Context")+".Provider";case rm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case sm:return t=e.displayName||null,t!==null?t:Cf(e.type)||"Memo";case js:t=e._payload,e=e._init;try{return Cf(e(t))}catch{}}return null}function dk(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cf(t);case 8:return t===nm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ws(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function B0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fk(e){var t=B0(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ol(e){e._valueTracker||(e._valueTracker=fk(e))}function F0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=B0(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ic(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ef(e,t){var n=t.checked;return Mt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ng(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ws(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function z0(e,t){t=t.checked,t!=null&&tm(e,"checked",t,!1)}function Pf(e,t){z0(e,t);var n=Ws(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Tf(e,t.type,n):t.hasOwnProperty("defaultValue")&&Tf(e,t.type,Ws(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Tf(e,t,n){(t!=="number"||Ic(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ja=Array.isArray;function mi(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ws(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Rf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return Mt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sg(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(J(92));if(ja(n)){if(1<n.length)throw Error(J(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ws(n)}}function V0(e,t){var n=Ws(t.value),r=Ws(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function og(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function q0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?q0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Dl,W0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Dl=Dl||document.createElement("div"),Dl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Dl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qa(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hk=["Webkit","ms","Moz","O"];Object.keys(Ra).forEach(function(e){hk.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ra[t]=Ra[e]})});function U0(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ra.hasOwnProperty(e)&&Ra[e]?(""+t).trim():t+"px"}function H0(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=U0(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var mk=Mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _f(e,t){if(t){if(mk[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function Af(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lf=null;function om(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var If=null,pi=null,gi=null;function ig(e){if(e=pl(e)){if(typeof If!="function")throw Error(J(280));var t=e.stateNode;t&&(t=Eu(t),If(e.stateNode,e.type,t))}}function K0(e){pi?gi?gi.push(e):gi=[e]:pi=e}function G0(){if(pi){var e=pi,t=gi;if(gi=pi=null,ig(e),t)for(e=0;e<t.length;e++)ig(t[e])}}function Q0(e,t){return e(t)}function Y0(){}var xd=!1;function X0(e,t,n){if(xd)return e(t,n);xd=!0;try{return Q0(e,t,n)}finally{xd=!1,(pi!==null||gi!==null)&&(Y0(),G0())}}function Wa(e,t){var n=e.stateNode;if(n===null)return null;var r=Eu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(J(231,t,typeof n));return n}var $f=!1;if(as)try{var ua={};Object.defineProperty(ua,"passive",{get:function(){$f=!0}}),window.addEventListener("test",ua,ua),window.removeEventListener("test",ua,ua)}catch{$f=!1}function pk(e,t,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var Ma=!1,$c=null,Oc=!1,Of=null,gk={onError:function(e){Ma=!0,$c=e}};function vk(e,t,n,r,s,i,a,l,c){Ma=!1,$c=null,pk.apply(gk,arguments)}function xk(e,t,n,r,s,i,a,l,c){if(vk.apply(this,arguments),Ma){if(Ma){var u=$c;Ma=!1,$c=null}else throw Error(J(198));Oc||(Oc=!0,Of=u)}}function Oo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Z0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ag(e){if(Oo(e)!==e)throw Error(J(188))}function yk(e){var t=e.alternate;if(!t){if(t=Oo(e),t===null)throw Error(J(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ag(s),e;if(i===r)return ag(s),t;i=i.sibling}throw Error(J(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?e:t}function J0(e){return e=yk(e),e!==null?ex(e):null}function ex(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ex(e);if(t!==null)return t;e=e.sibling}return null}var tx=nr.unstable_scheduleCallback,lg=nr.unstable_cancelCallback,wk=nr.unstable_shouldYield,bk=nr.unstable_requestPaint,Dt=nr.unstable_now,Sk=nr.unstable_getCurrentPriorityLevel,im=nr.unstable_ImmediatePriority,nx=nr.unstable_UserBlockingPriority,Dc=nr.unstable_NormalPriority,Nk=nr.unstable_LowPriority,rx=nr.unstable_IdlePriority,Nu=null,qr=null;function kk(e){if(qr&&typeof qr.onCommitFiberRoot=="function")try{qr.onCommitFiberRoot(Nu,e,void 0,(e.current.flags&128)===128)}catch{}}var Sr=Math.clz32?Math.clz32:Ek,jk=Math.log,Ck=Math.LN2;function Ek(e){return e>>>=0,e===0?32:31-(jk(e)/Ck|0)|0}var Bl=64,Fl=4194304;function Ca(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Bc(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Ca(l):(i&=a,i!==0&&(r=Ca(i)))}else a=n&~s,a!==0?r=Ca(a):i!==0&&(r=Ca(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Sr(t),s=1<<n,r|=e[n],t&=~s;return r}function Pk(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tk(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Sr(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=Pk(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Df(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sx(){var e=Bl;return Bl<<=1,!(Bl&4194240)&&(Bl=64),e}function yd(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function hl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Sr(t),e[t]=n}function Rk(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Sr(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function am(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Sr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ft=0;function ox(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ix,lm,ax,lx,cx,Bf=!1,zl=[],As=null,Ls=null,Is=null,Ua=new Map,Ha=new Map,Ps=[],Mk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cg(e,t){switch(e){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":Ua.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ha.delete(t.pointerId)}}function da(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=pl(t),t!==null&&lm(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function _k(e,t,n,r,s){switch(t){case"focusin":return As=da(As,e,t,n,r,s),!0;case"dragenter":return Ls=da(Ls,e,t,n,r,s),!0;case"mouseover":return Is=da(Is,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ua.set(i,da(Ua.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ha.set(i,da(Ha.get(i)||null,e,t,n,r,s)),!0}return!1}function ux(e){var t=mo(e.target);if(t!==null){var n=Oo(t);if(n!==null){if(t=n.tag,t===13){if(t=Z0(n),t!==null){e.blockedOn=t,cx(e.priority,function(){ax(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ff(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Lf=r,n.target.dispatchEvent(r),Lf=null}else return t=pl(n),t!==null&&lm(t),e.blockedOn=n,!1;t.shift()}return!0}function ug(e,t,n){pc(e)&&n.delete(t)}function Ak(){Bf=!1,As!==null&&pc(As)&&(As=null),Ls!==null&&pc(Ls)&&(Ls=null),Is!==null&&pc(Is)&&(Is=null),Ua.forEach(ug),Ha.forEach(ug)}function fa(e,t){e.blockedOn===t&&(e.blockedOn=null,Bf||(Bf=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,Ak)))}function Ka(e){function t(s){return fa(s,e)}if(0<zl.length){fa(zl[0],e);for(var n=1;n<zl.length;n++){var r=zl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(As!==null&&fa(As,e),Ls!==null&&fa(Ls,e),Is!==null&&fa(Is,e),Ua.forEach(t),Ha.forEach(t),n=0;n<Ps.length;n++)r=Ps[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ps.length&&(n=Ps[0],n.blockedOn===null);)ux(n),n.blockedOn===null&&Ps.shift()}var vi=hs.ReactCurrentBatchConfig,Fc=!0;function Lk(e,t,n,r){var s=ft,i=vi.transition;vi.transition=null;try{ft=1,cm(e,t,n,r)}finally{ft=s,vi.transition=i}}function Ik(e,t,n,r){var s=ft,i=vi.transition;vi.transition=null;try{ft=4,cm(e,t,n,r)}finally{ft=s,vi.transition=i}}function cm(e,t,n,r){if(Fc){var s=Ff(e,t,n,r);if(s===null)Td(e,t,r,zc,n),cg(e,r);else if(_k(s,e,t,n,r))r.stopPropagation();else if(cg(e,r),t&4&&-1<Mk.indexOf(e)){for(;s!==null;){var i=pl(s);if(i!==null&&ix(i),i=Ff(e,t,n,r),i===null&&Td(e,t,r,zc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Td(e,t,r,null,n)}}var zc=null;function Ff(e,t,n,r){if(zc=null,e=om(r),e=mo(e),e!==null)if(t=Oo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Z0(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return zc=e,null}function dx(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sk()){case im:return 1;case nx:return 4;case Dc:case Nk:return 16;case rx:return 536870912;default:return 16}default:return 16}}var Rs=null,um=null,gc=null;function fx(){if(gc)return gc;var e,t=um,n=t.length,r,s="value"in Rs?Rs.value:Rs.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return gc=s.slice(e,1<r?1-r:void 0)}function vc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vl(){return!0}function dg(){return!1}function sr(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Vl:dg,this.isPropagationStopped=dg,this}return Mt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vl)},persist:function(){},isPersistent:Vl}),t}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dm=sr(Ki),ml=Mt({},Ki,{view:0,detail:0}),$k=sr(ml),wd,bd,ha,ku=Mt({},ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ha&&(ha&&e.type==="mousemove"?(wd=e.screenX-ha.screenX,bd=e.screenY-ha.screenY):bd=wd=0,ha=e),wd)},movementY:function(e){return"movementY"in e?e.movementY:bd}}),fg=sr(ku),Ok=Mt({},ku,{dataTransfer:0}),Dk=sr(Ok),Bk=Mt({},ml,{relatedTarget:0}),Sd=sr(Bk),Fk=Mt({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),zk=sr(Fk),Vk=Mt({},Ki,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qk=sr(Vk),Wk=Mt({},Ki,{data:0}),hg=sr(Wk),Uk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Kk[e])?!!t[e]:!1}function fm(){return Gk}var Qk=Mt({},ml,{key:function(e){if(e.key){var t=Uk[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=vc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Hk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fm,charCode:function(e){return e.type==="keypress"?vc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yk=sr(Qk),Xk=Mt({},ku,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mg=sr(Xk),Zk=Mt({},ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fm}),Jk=sr(Zk),ej=Mt({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),tj=sr(ej),nj=Mt({},ku,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rj=sr(nj),sj=[9,13,27,32],hm=as&&"CompositionEvent"in window,_a=null;as&&"documentMode"in document&&(_a=document.documentMode);var oj=as&&"TextEvent"in window&&!_a,hx=as&&(!hm||_a&&8<_a&&11>=_a),pg=" ",gg=!1;function mx(e,t){switch(e){case"keyup":return sj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function px(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Jo=!1;function ij(e,t){switch(e){case"compositionend":return px(t);case"keypress":return t.which!==32?null:(gg=!0,pg);case"textInput":return e=t.data,e===pg&&gg?null:e;default:return null}}function aj(e,t){if(Jo)return e==="compositionend"||!hm&&mx(e,t)?(e=fx(),gc=um=Rs=null,Jo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return hx&&t.locale!=="ko"?null:t.data;default:return null}}var lj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!lj[e.type]:t==="textarea"}function gx(e,t,n,r){K0(r),t=Vc(t,"onChange"),0<t.length&&(n=new dm("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Aa=null,Ga=null;function cj(e){Ex(e,0)}function ju(e){var t=ni(e);if(F0(t))return e}function uj(e,t){if(e==="change")return t}var vx=!1;if(as){var Nd;if(as){var kd="oninput"in document;if(!kd){var xg=document.createElement("div");xg.setAttribute("oninput","return;"),kd=typeof xg.oninput=="function"}Nd=kd}else Nd=!1;vx=Nd&&(!document.documentMode||9<document.documentMode)}function yg(){Aa&&(Aa.detachEvent("onpropertychange",xx),Ga=Aa=null)}function xx(e){if(e.propertyName==="value"&&ju(Ga)){var t=[];gx(t,Ga,e,om(e)),X0(cj,t)}}function dj(e,t,n){e==="focusin"?(yg(),Aa=t,Ga=n,Aa.attachEvent("onpropertychange",xx)):e==="focusout"&&yg()}function fj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ju(Ga)}function hj(e,t){if(e==="click")return ju(t)}function mj(e,t){if(e==="input"||e==="change")return ju(t)}function pj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kr=typeof Object.is=="function"?Object.is:pj;function Qa(e,t){if(kr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Sf.call(t,s)||!kr(e[s],t[s]))return!1}return!0}function wg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bg(e,t){var n=wg(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wg(n)}}function yx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?yx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function wx(){for(var e=window,t=Ic();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ic(e.document)}return t}function mm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function gj(e){var t=wx(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&yx(n.ownerDocument.documentElement,n)){if(r!==null&&mm(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=bg(n,i);var a=bg(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vj=as&&"documentMode"in document&&11>=document.documentMode,ei=null,zf=null,La=null,Vf=!1;function Sg(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vf||ei==null||ei!==Ic(r)||(r=ei,"selectionStart"in r&&mm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),La&&Qa(La,r)||(La=r,r=Vc(zf,"onSelect"),0<r.length&&(t=new dm("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ei)))}function ql(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ti={animationend:ql("Animation","AnimationEnd"),animationiteration:ql("Animation","AnimationIteration"),animationstart:ql("Animation","AnimationStart"),transitionend:ql("Transition","TransitionEnd")},jd={},bx={};as&&(bx=document.createElement("div").style,"AnimationEvent"in window||(delete ti.animationend.animation,delete ti.animationiteration.animation,delete ti.animationstart.animation),"TransitionEvent"in window||delete ti.transitionend.transition);function Cu(e){if(jd[e])return jd[e];if(!ti[e])return e;var t=ti[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in bx)return jd[e]=t[n];return e}var Sx=Cu("animationend"),Nx=Cu("animationiteration"),kx=Cu("animationstart"),jx=Cu("transitionend"),Cx=new Map,Ng="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qs(e,t){Cx.set(e,t),$o(t,[e])}for(var Cd=0;Cd<Ng.length;Cd++){var Ed=Ng[Cd],xj=Ed.toLowerCase(),yj=Ed[0].toUpperCase()+Ed.slice(1);Qs(xj,"on"+yj)}Qs(Sx,"onAnimationEnd");Qs(Nx,"onAnimationIteration");Qs(kx,"onAnimationStart");Qs("dblclick","onDoubleClick");Qs("focusin","onFocus");Qs("focusout","onBlur");Qs(jx,"onTransitionEnd");Ei("onMouseEnter",["mouseout","mouseover"]);Ei("onMouseLeave",["mouseout","mouseover"]);Ei("onPointerEnter",["pointerout","pointerover"]);Ei("onPointerLeave",["pointerout","pointerover"]);$o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$o("onBeforeInput",["compositionend","keypress","textInput","paste"]);$o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ea));function kg(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,xk(r,t,void 0,e),e.currentTarget=null}function Ex(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;kg(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;kg(s,l,u),i=c}}}if(Oc)throw e=Of,Oc=!1,Of=null,e}function bt(e,t){var n=t[Kf];n===void 0&&(n=t[Kf]=new Set);var r=e+"__bubble";n.has(r)||(Px(t,e,2,!1),n.add(r))}function Pd(e,t,n){var r=0;t&&(r|=4),Px(n,e,r,t)}var Wl="_reactListening"+Math.random().toString(36).slice(2);function Ya(e){if(!e[Wl]){e[Wl]=!0,I0.forEach(function(n){n!=="selectionchange"&&(wj.has(n)||Pd(n,!1,e),Pd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wl]||(t[Wl]=!0,Pd("selectionchange",!1,t))}}function Px(e,t,n,r){switch(dx(t)){case 1:var s=Lk;break;case 4:s=Ik;break;default:s=cm}n=s.bind(null,t,n,e),s=void 0,!$f||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Td(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=mo(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}X0(function(){var u=i,f=om(n),m=[];e:{var h=Cx.get(e);if(h!==void 0){var y=dm,p=e;switch(e){case"keypress":if(vc(n)===0)break e;case"keydown":case"keyup":y=Yk;break;case"focusin":p="focus",y=Sd;break;case"focusout":p="blur",y=Sd;break;case"beforeblur":case"afterblur":y=Sd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=fg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Dk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Jk;break;case Sx:case Nx:case kx:y=zk;break;case jx:y=tj;break;case"scroll":y=$k;break;case"wheel":y=rj;break;case"copy":case"cut":case"paste":y=qk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=mg}var g=(t&4)!==0,w=!g&&e==="scroll",x=g?h!==null?h+"Capture":null:h;g=[];for(var v=u,b;v!==null;){b=v;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,x!==null&&(S=Wa(v,x),S!=null&&g.push(Xa(v,S,b)))),w)break;v=v.return}0<g.length&&(h=new y(h,p,null,n,f),m.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",h&&n!==Lf&&(p=n.relatedTarget||n.fromElement)&&(mo(p)||p[ls]))break e;if((y||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,y?(p=n.relatedTarget||n.toElement,y=u,p=p?mo(p):null,p!==null&&(w=Oo(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(y=null,p=u),y!==p)){if(g=fg,S="onMouseLeave",x="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=mg,S="onPointerLeave",x="onPointerEnter",v="pointer"),w=y==null?h:ni(y),b=p==null?h:ni(p),h=new g(S,v+"leave",y,n,f),h.target=w,h.relatedTarget=b,S=null,mo(f)===u&&(g=new g(x,v+"enter",p,n,f),g.target=b,g.relatedTarget=w,S=g),w=S,y&&p)t:{for(g=y,x=p,v=0,b=g;b;b=Ho(b))v++;for(b=0,S=x;S;S=Ho(S))b++;for(;0<v-b;)g=Ho(g),v--;for(;0<b-v;)x=Ho(x),b--;for(;v--;){if(g===x||x!==null&&g===x.alternate)break t;g=Ho(g),x=Ho(x)}g=null}else g=null;y!==null&&jg(m,h,y,g,!1),p!==null&&w!==null&&jg(m,w,p,g,!0)}}e:{if(h=u?ni(u):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var N=uj;else if(vg(h))if(vx)N=mj;else{N=fj;var j=dj}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=hj);if(N&&(N=N(e,u))){gx(m,N,n,f);break e}j&&j(e,h,u),e==="focusout"&&(j=h._wrapperState)&&j.controlled&&h.type==="number"&&Tf(h,"number",h.value)}switch(j=u?ni(u):window,e){case"focusin":(vg(j)||j.contentEditable==="true")&&(ei=j,zf=u,La=null);break;case"focusout":La=zf=ei=null;break;case"mousedown":Vf=!0;break;case"contextmenu":case"mouseup":case"dragend":Vf=!1,Sg(m,n,f);break;case"selectionchange":if(vj)break;case"keydown":case"keyup":Sg(m,n,f)}var k;if(hm)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Jo?mx(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(hx&&n.locale!=="ko"&&(Jo||C!=="onCompositionStart"?C==="onCompositionEnd"&&Jo&&(k=fx()):(Rs=f,um="value"in Rs?Rs.value:Rs.textContent,Jo=!0)),j=Vc(u,C),0<j.length&&(C=new hg(C,e,null,n,f),m.push({event:C,listeners:j}),k?C.data=k:(k=px(n),k!==null&&(C.data=k)))),(k=oj?ij(e,n):aj(e,n))&&(u=Vc(u,"onBeforeInput"),0<u.length&&(f=new hg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:u}),f.data=k))}Ex(m,t)})}function Xa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vc(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Wa(e,n),i!=null&&r.unshift(Xa(e,i,s)),i=Wa(e,t),i!=null&&r.push(Xa(e,i,s))),e=e.return}return r}function Ho(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function jg(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Wa(n,i),c!=null&&a.unshift(Xa(n,c,l))):s||(c=Wa(n,i),c!=null&&a.push(Xa(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var bj=/\r\n?/g,Sj=/\u0000|\uFFFD/g;function Cg(e){return(typeof e=="string"?e:""+e).replace(bj,`
`).replace(Sj,"")}function Ul(e,t,n){if(t=Cg(t),Cg(e)!==t&&n)throw Error(J(425))}function qc(){}var qf=null,Wf=null;function Uf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hf=typeof setTimeout=="function"?setTimeout:void 0,Nj=typeof clearTimeout=="function"?clearTimeout:void 0,Eg=typeof Promise=="function"?Promise:void 0,kj=typeof queueMicrotask=="function"?queueMicrotask:typeof Eg<"u"?function(e){return Eg.resolve(null).then(e).catch(jj)}:Hf;function jj(e){setTimeout(function(){throw e})}function Rd(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ka(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ka(t)}function $s(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Pg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Gi=Math.random().toString(36).slice(2),Fr="__reactFiber$"+Gi,Za="__reactProps$"+Gi,ls="__reactContainer$"+Gi,Kf="__reactEvents$"+Gi,Cj="__reactListeners$"+Gi,Ej="__reactHandles$"+Gi;function mo(e){var t=e[Fr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ls]||n[Fr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Pg(e);e!==null;){if(n=e[Fr])return n;e=Pg(e)}return t}e=n,n=e.parentNode}return null}function pl(e){return e=e[Fr]||e[ls],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ni(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function Eu(e){return e[Za]||null}var Gf=[],ri=-1;function Ys(e){return{current:e}}function St(e){0>ri||(e.current=Gf[ri],Gf[ri]=null,ri--)}function xt(e,t){ri++,Gf[ri]=e.current,e.current=t}var Us={},Nn=Ys(Us),Vn=Ys(!1),So=Us;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Us;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function qn(e){return e=e.childContextTypes,e!=null}function Wc(){St(Vn),St(Nn)}function Tg(e,t,n){if(Nn.current!==Us)throw Error(J(168));xt(Nn,t),xt(Vn,n)}function Tx(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(J(108,dk(e)||"Unknown",s));return Mt({},n,r)}function Uc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Us,So=Nn.current,xt(Nn,e),xt(Vn,Vn.current),!0}function Rg(e,t,n){var r=e.stateNode;if(!r)throw Error(J(169));n?(e=Tx(e,t,So),r.__reactInternalMemoizedMergedChildContext=e,St(Vn),St(Nn),xt(Nn,e)):St(Vn),xt(Vn,n)}var ns=null,Pu=!1,Md=!1;function Rx(e){ns===null?ns=[e]:ns.push(e)}function Pj(e){Pu=!0,Rx(e)}function Xs(){if(!Md&&ns!==null){Md=!0;var e=0,t=ft;try{var n=ns;for(ft=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ns=null,Pu=!1}catch(s){throw ns!==null&&(ns=ns.slice(e+1)),tx(im,Xs),s}finally{ft=t,Md=!1}}return null}var si=[],oi=0,Hc=null,Kc=0,ar=[],lr=0,No=null,rs=1,ss="";function fo(e,t){si[oi++]=Kc,si[oi++]=Hc,Hc=e,Kc=t}function Mx(e,t,n){ar[lr++]=rs,ar[lr++]=ss,ar[lr++]=No,No=e;var r=rs;e=ss;var s=32-Sr(r)-1;r&=~(1<<s),n+=1;var i=32-Sr(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,rs=1<<32-Sr(t)+s|n<<s|r,ss=i+e}else rs=1<<i|n<<s|r,ss=e}function pm(e){e.return!==null&&(fo(e,1),Mx(e,1,0))}function gm(e){for(;e===Hc;)Hc=si[--oi],si[oi]=null,Kc=si[--oi],si[oi]=null;for(;e===No;)No=ar[--lr],ar[lr]=null,ss=ar[--lr],ar[lr]=null,rs=ar[--lr],ar[lr]=null}var er=null,Zn=null,Et=!1,br=null;function _x(e,t){var n=cr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Mg(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,er=e,Zn=$s(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,er=e,Zn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=No!==null?{id:rs,overflow:ss}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=cr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,er=e,Zn=null,!0):!1;default:return!1}}function Qf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Yf(e){if(Et){var t=Zn;if(t){var n=t;if(!Mg(e,t)){if(Qf(e))throw Error(J(418));t=$s(n.nextSibling);var r=er;t&&Mg(e,t)?_x(r,n):(e.flags=e.flags&-4097|2,Et=!1,er=e)}}else{if(Qf(e))throw Error(J(418));e.flags=e.flags&-4097|2,Et=!1,er=e}}}function _g(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;er=e}function Hl(e){if(e!==er)return!1;if(!Et)return _g(e),Et=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Uf(e.type,e.memoizedProps)),t&&(t=Zn)){if(Qf(e))throw Ax(),Error(J(418));for(;t;)_x(e,t),t=$s(t.nextSibling)}if(_g(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Zn=$s(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Zn=null}}else Zn=er?$s(e.stateNode.nextSibling):null;return!0}function Ax(){for(var e=Zn;e;)e=$s(e.nextSibling)}function Ti(){Zn=er=null,Et=!1}function vm(e){br===null?br=[e]:br.push(e)}var Tj=hs.ReactCurrentBatchConfig;function ma(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,e))}return e}function Kl(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ag(e){var t=e._init;return t(e._payload)}function Lx(e){function t(x,v){if(e){var b=x.deletions;b===null?(x.deletions=[v],x.flags|=16):b.push(v)}}function n(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function s(x,v){return x=Fs(x,v),x.index=0,x.sibling=null,x}function i(x,v,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<v?(x.flags|=2,v):b):(x.flags|=2,v)):(x.flags|=1048576,v)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,v,b,S){return v===null||v.tag!==6?(v=Dd(b,x.mode,S),v.return=x,v):(v=s(v,b),v.return=x,v)}function c(x,v,b,S){var N=b.type;return N===Zo?f(x,v,b.props.children,S,b.key):v!==null&&(v.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===js&&Ag(N)===v.type)?(S=s(v,b.props),S.ref=ma(x,v,b),S.return=x,S):(S=kc(b.type,b.key,b.props,null,x.mode,S),S.ref=ma(x,v,b),S.return=x,S)}function u(x,v,b,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Bd(b,x.mode,S),v.return=x,v):(v=s(v,b.children||[]),v.return=x,v)}function f(x,v,b,S,N){return v===null||v.tag!==7?(v=yo(b,x.mode,S,N),v.return=x,v):(v=s(v,b),v.return=x,v)}function m(x,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Dd(""+v,x.mode,b),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case $l:return b=kc(v.type,v.key,v.props,null,x.mode,b),b.ref=ma(x,null,v),b.return=x,b;case Xo:return v=Bd(v,x.mode,b),v.return=x,v;case js:var S=v._init;return m(x,S(v._payload),b)}if(ja(v)||ca(v))return v=yo(v,x.mode,b,null),v.return=x,v;Kl(x,v)}return null}function h(x,v,b,S){var N=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return N!==null?null:l(x,v,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $l:return b.key===N?c(x,v,b,S):null;case Xo:return b.key===N?u(x,v,b,S):null;case js:return N=b._init,h(x,v,N(b._payload),S)}if(ja(b)||ca(b))return N!==null?null:f(x,v,b,S,null);Kl(x,b)}return null}function y(x,v,b,S,N){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(b)||null,l(v,x,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case $l:return x=x.get(S.key===null?b:S.key)||null,c(v,x,S,N);case Xo:return x=x.get(S.key===null?b:S.key)||null,u(v,x,S,N);case js:var j=S._init;return y(x,v,b,j(S._payload),N)}if(ja(S)||ca(S))return x=x.get(b)||null,f(v,x,S,N,null);Kl(v,S)}return null}function p(x,v,b,S){for(var N=null,j=null,k=v,C=v=0,R=null;k!==null&&C<b.length;C++){k.index>C?(R=k,k=null):R=k.sibling;var T=h(x,k,b[C],S);if(T===null){k===null&&(k=R);break}e&&k&&T.alternate===null&&t(x,k),v=i(T,v,C),j===null?N=T:j.sibling=T,j=T,k=R}if(C===b.length)return n(x,k),Et&&fo(x,C),N;if(k===null){for(;C<b.length;C++)k=m(x,b[C],S),k!==null&&(v=i(k,v,C),j===null?N=k:j.sibling=k,j=k);return Et&&fo(x,C),N}for(k=r(x,k);C<b.length;C++)R=y(k,x,C,b[C],S),R!==null&&(e&&R.alternate!==null&&k.delete(R.key===null?C:R.key),v=i(R,v,C),j===null?N=R:j.sibling=R,j=R);return e&&k.forEach(function(F){return t(x,F)}),Et&&fo(x,C),N}function g(x,v,b,S){var N=ca(b);if(typeof N!="function")throw Error(J(150));if(b=N.call(b),b==null)throw Error(J(151));for(var j=N=null,k=v,C=v=0,R=null,T=b.next();k!==null&&!T.done;C++,T=b.next()){k.index>C?(R=k,k=null):R=k.sibling;var F=h(x,k,T.value,S);if(F===null){k===null&&(k=R);break}e&&k&&F.alternate===null&&t(x,k),v=i(F,v,C),j===null?N=F:j.sibling=F,j=F,k=R}if(T.done)return n(x,k),Et&&fo(x,C),N;if(k===null){for(;!T.done;C++,T=b.next())T=m(x,T.value,S),T!==null&&(v=i(T,v,C),j===null?N=T:j.sibling=T,j=T);return Et&&fo(x,C),N}for(k=r(x,k);!T.done;C++,T=b.next())T=y(k,x,C,T.value,S),T!==null&&(e&&T.alternate!==null&&k.delete(T.key===null?C:T.key),v=i(T,v,C),j===null?N=T:j.sibling=T,j=T);return e&&k.forEach(function(_){return t(x,_)}),Et&&fo(x,C),N}function w(x,v,b,S){if(typeof b=="object"&&b!==null&&b.type===Zo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case $l:e:{for(var N=b.key,j=v;j!==null;){if(j.key===N){if(N=b.type,N===Zo){if(j.tag===7){n(x,j.sibling),v=s(j,b.props.children),v.return=x,x=v;break e}}else if(j.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===js&&Ag(N)===j.type){n(x,j.sibling),v=s(j,b.props),v.ref=ma(x,j,b),v.return=x,x=v;break e}n(x,j);break}else t(x,j);j=j.sibling}b.type===Zo?(v=yo(b.props.children,x.mode,S,b.key),v.return=x,x=v):(S=kc(b.type,b.key,b.props,null,x.mode,S),S.ref=ma(x,v,b),S.return=x,x=S)}return a(x);case Xo:e:{for(j=b.key;v!==null;){if(v.key===j)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(x,v.sibling),v=s(v,b.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else t(x,v);v=v.sibling}v=Bd(b,x.mode,S),v.return=x,x=v}return a(x);case js:return j=b._init,w(x,v,j(b._payload),S)}if(ja(b))return p(x,v,b,S);if(ca(b))return g(x,v,b,S);Kl(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(x,v.sibling),v=s(v,b),v.return=x,x=v):(n(x,v),v=Dd(b,x.mode,S),v.return=x,x=v),a(x)):n(x,v)}return w}var Ri=Lx(!0),Ix=Lx(!1),Gc=Ys(null),Qc=null,ii=null,xm=null;function ym(){xm=ii=Qc=null}function wm(e){var t=Gc.current;St(Gc),e._currentValue=t}function Xf(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xi(e,t){Qc=e,xm=ii=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(zn=!0),e.firstContext=null)}function fr(e){var t=e._currentValue;if(xm!==e)if(e={context:e,memoizedValue:t,next:null},ii===null){if(Qc===null)throw Error(J(308));ii=e,Qc.dependencies={lanes:0,firstContext:e}}else ii=ii.next=e;return t}var po=null;function bm(e){po===null?po=[e]:po.push(e)}function $x(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,bm(t)):(n.next=s.next,s.next=n),t.interleaved=n,cs(e,r)}function cs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Cs=!1;function Sm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ox(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function is(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,st&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,cs(e,n)}return s=r.interleaved,s===null?(t.next=t,bm(r)):(t.next=s.next,s.next=t),r.interleaved=t,cs(e,n)}function xc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,am(e,n)}}function Lg(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Yc(e,t,n,r){var s=e.updateQueue;Cs=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;a=0,f=u=c=null,l=i;do{var h=l.lane,y=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,g=l;switch(h=t,y=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){m=p.call(y,m,h);break e}m=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(y,m,h):p,h==null)break e;m=Mt({},m,h);break e;case 2:Cs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else y={eventTime:y,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=y,c=m):f=f.next=y,a|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(f===null&&(c=m),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);jo|=a,e.lanes=a,e.memoizedState=m}}function Ig(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(J(191,s));s.call(r)}}}var gl={},Wr=Ys(gl),Ja=Ys(gl),el=Ys(gl);function go(e){if(e===gl)throw Error(J(174));return e}function Nm(e,t){switch(xt(el,t),xt(Ja,e),xt(Wr,gl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Mf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Mf(t,e)}St(Wr),xt(Wr,t)}function Mi(){St(Wr),St(Ja),St(el)}function Dx(e){go(el.current);var t=go(Wr.current),n=Mf(t,e.type);t!==n&&(xt(Ja,e),xt(Wr,n))}function km(e){Ja.current===e&&(St(Wr),St(Ja))}var Tt=Ys(0);function Xc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _d=[];function jm(){for(var e=0;e<_d.length;e++)_d[e]._workInProgressVersionPrimary=null;_d.length=0}var yc=hs.ReactCurrentDispatcher,Ad=hs.ReactCurrentBatchConfig,ko=0,Rt=null,Zt=null,sn=null,Zc=!1,Ia=!1,tl=0,Rj=0;function gn(){throw Error(J(321))}function Cm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!kr(e[n],t[n]))return!1;return!0}function Em(e,t,n,r,s,i){if(ko=i,Rt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,yc.current=e===null||e.memoizedState===null?Lj:Ij,e=n(r,s),Ia){i=0;do{if(Ia=!1,tl=0,25<=i)throw Error(J(301));i+=1,sn=Zt=null,t.updateQueue=null,yc.current=$j,e=n(r,s)}while(Ia)}if(yc.current=Jc,t=Zt!==null&&Zt.next!==null,ko=0,sn=Zt=Rt=null,Zc=!1,t)throw Error(J(300));return e}function Pm(){var e=tl!==0;return tl=0,e}function Br(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Rt.memoizedState=sn=e:sn=sn.next=e,sn}function hr(){if(Zt===null){var e=Rt.alternate;e=e!==null?e.memoizedState:null}else e=Zt.next;var t=sn===null?Rt.memoizedState:sn.next;if(t!==null)sn=t,Zt=e;else{if(e===null)throw Error(J(310));Zt=e,e={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},sn===null?Rt.memoizedState=sn=e:sn=sn.next=e}return sn}function nl(e,t){return typeof t=="function"?t(e):t}function Ld(e){var t=hr(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=Zt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var f=u.lane;if((ko&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var m={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=m,a=r):c=c.next=m,Rt.lanes|=f,jo|=f}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,kr(r,t.memoizedState)||(zn=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Rt.lanes|=i,jo|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Id(e){var t=hr(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);kr(i,t.memoizedState)||(zn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Bx(){}function Fx(e,t){var n=Rt,r=hr(),s=t(),i=!kr(r.memoizedState,s);if(i&&(r.memoizedState=s,zn=!0),r=r.queue,Tm(qx.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||sn!==null&&sn.memoizedState.tag&1){if(n.flags|=2048,rl(9,Vx.bind(null,n,r,s,t),void 0,null),on===null)throw Error(J(349));ko&30||zx(n,t,s)}return s}function zx(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Rt.updateQueue,t===null?(t={lastEffect:null,stores:null},Rt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Vx(e,t,n,r){t.value=n,t.getSnapshot=r,Wx(t)&&Ux(e)}function qx(e,t,n){return n(function(){Wx(t)&&Ux(e)})}function Wx(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!kr(e,n)}catch{return!0}}function Ux(e){var t=cs(e,1);t!==null&&Nr(t,e,1,-1)}function $g(e){var t=Br();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nl,lastRenderedState:e},t.queue=e,e=e.dispatch=Aj.bind(null,Rt,e),[t.memoizedState,e]}function rl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Rt.updateQueue,t===null?(t={lastEffect:null,stores:null},Rt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Hx(){return hr().memoizedState}function wc(e,t,n,r){var s=Br();Rt.flags|=e,s.memoizedState=rl(1|t,n,void 0,r===void 0?null:r)}function Tu(e,t,n,r){var s=hr();r=r===void 0?null:r;var i=void 0;if(Zt!==null){var a=Zt.memoizedState;if(i=a.destroy,r!==null&&Cm(r,a.deps)){s.memoizedState=rl(t,n,i,r);return}}Rt.flags|=e,s.memoizedState=rl(1|t,n,i,r)}function Og(e,t){return wc(8390656,8,e,t)}function Tm(e,t){return Tu(2048,8,e,t)}function Kx(e,t){return Tu(4,2,e,t)}function Gx(e,t){return Tu(4,4,e,t)}function Qx(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Yx(e,t,n){return n=n!=null?n.concat([e]):null,Tu(4,4,Qx.bind(null,t,e),n)}function Rm(){}function Xx(e,t){var n=hr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Cm(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zx(e,t){var n=hr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Cm(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jx(e,t,n){return ko&21?(kr(n,t)||(n=sx(),Rt.lanes|=n,jo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,zn=!0),e.memoizedState=n)}function Mj(e,t){var n=ft;ft=n!==0&&4>n?n:4,e(!0);var r=Ad.transition;Ad.transition={};try{e(!1),t()}finally{ft=n,Ad.transition=r}}function ey(){return hr().memoizedState}function _j(e,t,n){var r=Bs(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ty(e))ny(t,n);else if(n=$x(e,t,n,r),n!==null){var s=_n();Nr(n,e,r,s),ry(n,t,r)}}function Aj(e,t,n){var r=Bs(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ty(e))ny(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,kr(l,a)){var c=t.interleaved;c===null?(s.next=s,bm(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=$x(e,t,s,r),n!==null&&(s=_n(),Nr(n,e,r,s),ry(n,t,r))}}function ty(e){var t=e.alternate;return e===Rt||t!==null&&t===Rt}function ny(e,t){Ia=Zc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ry(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,am(e,n)}}var Jc={readContext:fr,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useInsertionEffect:gn,useLayoutEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useMutableSource:gn,useSyncExternalStore:gn,useId:gn,unstable_isNewReconciler:!1},Lj={readContext:fr,useCallback:function(e,t){return Br().memoizedState=[e,t===void 0?null:t],e},useContext:fr,useEffect:Og,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,wc(4194308,4,Qx.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wc(4194308,4,e,t)},useInsertionEffect:function(e,t){return wc(4,2,e,t)},useMemo:function(e,t){var n=Br();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Br();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=_j.bind(null,Rt,e),[r.memoizedState,e]},useRef:function(e){var t=Br();return e={current:e},t.memoizedState=e},useState:$g,useDebugValue:Rm,useDeferredValue:function(e){return Br().memoizedState=e},useTransition:function(){var e=$g(!1),t=e[0];return e=Mj.bind(null,e[1]),Br().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Rt,s=Br();if(Et){if(n===void 0)throw Error(J(407));n=n()}else{if(n=t(),on===null)throw Error(J(349));ko&30||zx(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Og(qx.bind(null,r,i,e),[e]),r.flags|=2048,rl(9,Vx.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Br(),t=on.identifierPrefix;if(Et){var n=ss,r=rs;n=(r&~(1<<32-Sr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=tl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Rj++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ij={readContext:fr,useCallback:Xx,useContext:fr,useEffect:Tm,useImperativeHandle:Yx,useInsertionEffect:Kx,useLayoutEffect:Gx,useMemo:Zx,useReducer:Ld,useRef:Hx,useState:function(){return Ld(nl)},useDebugValue:Rm,useDeferredValue:function(e){var t=hr();return Jx(t,Zt.memoizedState,e)},useTransition:function(){var e=Ld(nl)[0],t=hr().memoizedState;return[e,t]},useMutableSource:Bx,useSyncExternalStore:Fx,useId:ey,unstable_isNewReconciler:!1},$j={readContext:fr,useCallback:Xx,useContext:fr,useEffect:Tm,useImperativeHandle:Yx,useInsertionEffect:Kx,useLayoutEffect:Gx,useMemo:Zx,useReducer:Id,useRef:Hx,useState:function(){return Id(nl)},useDebugValue:Rm,useDeferredValue:function(e){var t=hr();return Zt===null?t.memoizedState=e:Jx(t,Zt.memoizedState,e)},useTransition:function(){var e=Id(nl)[0],t=hr().memoizedState;return[e,t]},useMutableSource:Bx,useSyncExternalStore:Fx,useId:ey,unstable_isNewReconciler:!1};function xr(e,t){if(e&&e.defaultProps){t=Mt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Zf(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Mt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ru={isMounted:function(e){return(e=e._reactInternals)?Oo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=_n(),s=Bs(e),i=is(r,s);i.payload=t,n!=null&&(i.callback=n),t=Os(e,i,s),t!==null&&(Nr(t,e,s,r),xc(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=_n(),s=Bs(e),i=is(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Os(e,i,s),t!==null&&(Nr(t,e,s,r),xc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_n(),r=Bs(e),s=is(n,r);s.tag=2,t!=null&&(s.callback=t),t=Os(e,s,r),t!==null&&(Nr(t,e,r,n),xc(t,e,r))}};function Dg(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Qa(n,r)||!Qa(s,i):!0}function sy(e,t,n){var r=!1,s=Us,i=t.contextType;return typeof i=="object"&&i!==null?i=fr(i):(s=qn(t)?So:Nn.current,r=t.contextTypes,i=(r=r!=null)?Pi(e,s):Us),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ru,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Bg(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ru.enqueueReplaceState(t,t.state,null)}function Jf(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Sm(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=fr(i):(i=qn(t)?So:Nn.current,s.context=Pi(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Zf(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ru.enqueueReplaceState(s,s.state,null),Yc(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function _i(e,t){try{var n="",r=t;do n+=uk(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function $d(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function eh(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Oj=typeof WeakMap=="function"?WeakMap:Map;function oy(e,t,n){n=is(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){tu||(tu=!0,uh=r),eh(e,t)},n}function iy(e,t,n){n=is(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){eh(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){eh(e,t),typeof r!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Fg(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Oj;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Xj.bind(null,e,t,n),t.then(e,e))}function zg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vg(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=is(-1,1),t.tag=2,Os(n,t,1))),n.lanes|=1),e)}var Dj=hs.ReactCurrentOwner,zn=!1;function Pn(e,t,n,r){t.child=e===null?Ix(t,null,n,r):Ri(t,e.child,n,r)}function qg(e,t,n,r,s){n=n.render;var i=t.ref;return xi(t,s),r=Em(e,t,n,r,i,s),n=Pm(),e!==null&&!zn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,us(e,t,s)):(Et&&n&&pm(t),t.flags|=1,Pn(e,t,r,s),t.child)}function Wg(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Dm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,ay(e,t,i,r,s)):(e=kc(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Qa,n(a,r)&&e.ref===t.ref)return us(e,t,s)}return t.flags|=1,e=Fs(i,r),e.ref=t.ref,e.return=t,t.child=e}function ay(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Qa(i,r)&&e.ref===t.ref)if(zn=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(zn=!0);else return t.lanes=e.lanes,us(e,t,s)}return th(e,t,n,r,s)}function ly(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(li,Yn),Yn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xt(li,Yn),Yn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,xt(li,Yn),Yn|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,xt(li,Yn),Yn|=r;return Pn(e,t,s,n),t.child}function cy(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function th(e,t,n,r,s){var i=qn(n)?So:Nn.current;return i=Pi(t,i),xi(t,s),n=Em(e,t,n,r,i,s),r=Pm(),e!==null&&!zn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,us(e,t,s)):(Et&&r&&pm(t),t.flags|=1,Pn(e,t,n,s),t.child)}function Ug(e,t,n,r,s){if(qn(n)){var i=!0;Uc(t)}else i=!1;if(xi(t,s),t.stateNode===null)bc(e,t),sy(t,n,r),Jf(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=fr(u):(u=qn(n)?So:Nn.current,u=Pi(t,u));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Bg(t,a,r,u),Cs=!1;var h=t.memoizedState;a.state=h,Yc(t,r,a,s),c=t.memoizedState,l!==r||h!==c||Vn.current||Cs?(typeof f=="function"&&(Zf(t,n,f,r),c=t.memoizedState),(l=Cs||Dg(t,n,l,r,h,c,u))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ox(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:xr(t.type,l),a.props=u,m=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=fr(c):(c=qn(n)?So:Nn.current,c=Pi(t,c));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||h!==c)&&Bg(t,a,r,c),Cs=!1,h=t.memoizedState,a.state=h,Yc(t,r,a,s);var p=t.memoizedState;l!==m||h!==p||Vn.current||Cs?(typeof y=="function"&&(Zf(t,n,y,r),p=t.memoizedState),(u=Cs||Dg(t,n,u,r,h,p,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return nh(e,t,n,r,i,s)}function nh(e,t,n,r,s,i){cy(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Rg(t,n,!1),us(e,t,i);r=t.stateNode,Dj.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Ri(t,e.child,null,i),t.child=Ri(t,null,l,i)):Pn(e,t,l,i),t.memoizedState=r.state,s&&Rg(t,n,!0),t.child}function uy(e){var t=e.stateNode;t.pendingContext?Tg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Tg(e,t.context,!1),Nm(e,t.containerInfo)}function Hg(e,t,n,r,s){return Ti(),vm(s),t.flags|=256,Pn(e,t,n,r),t.child}var rh={dehydrated:null,treeContext:null,retryLane:0};function sh(e){return{baseLanes:e,cachePool:null,transitions:null}}function dy(e,t,n){var r=t.pendingProps,s=Tt.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),xt(Tt,s&1),e===null)return Yf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Au(a,r,0,null),e=yo(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=sh(n),t.memoizedState=rh,e):Mm(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Bj(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Fs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Fs(l,i):(i=yo(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?sh(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=rh,r}return i=e.child,e=i.sibling,r=Fs(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Mm(e,t){return t=Au({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gl(e,t,n,r){return r!==null&&vm(r),Ri(t,e.child,null,n),e=Mm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Bj(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=$d(Error(J(422))),Gl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Au({mode:"visible",children:r.children},s,0,null),i=yo(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Ri(t,e.child,null,a),t.child.memoizedState=sh(a),t.memoizedState=rh,i);if(!(t.mode&1))return Gl(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(J(419)),r=$d(i,r,void 0),Gl(e,t,a,r)}if(l=(a&e.childLanes)!==0,zn||l){if(r=on,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,cs(e,s),Nr(r,e,s,-1))}return Om(),r=$d(Error(J(421))),Gl(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Zj.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Zn=$s(s.nextSibling),er=t,Et=!0,br=null,e!==null&&(ar[lr++]=rs,ar[lr++]=ss,ar[lr++]=No,rs=e.id,ss=e.overflow,No=t),t=Mm(t,r.children),t.flags|=4096,t)}function Kg(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Xf(e.return,t,n)}function Od(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function fy(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Pn(e,t,r.children,n),r=Tt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Kg(e,n,t);else if(e.tag===19)Kg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xt(Tt,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Xc(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Od(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Xc(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Od(t,!0,n,null,i);break;case"together":Od(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function us(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),jo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,n=Fs(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Fs(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Fj(e,t,n){switch(t.tag){case 3:uy(t),Ti();break;case 5:Dx(t);break;case 1:qn(t.type)&&Uc(t);break;case 4:Nm(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;xt(Gc,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(xt(Tt,Tt.current&1),t.flags|=128,null):n&t.child.childLanes?dy(e,t,n):(xt(Tt,Tt.current&1),e=us(e,t,n),e!==null?e.sibling:null);xt(Tt,Tt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return fy(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),xt(Tt,Tt.current),r)break;return null;case 22:case 23:return t.lanes=0,ly(e,t,n)}return us(e,t,n)}var hy,oh,my,py;hy=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};oh=function(){};my=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,go(Wr.current);var i=null;switch(n){case"input":s=Ef(e,s),r=Ef(e,r),i=[];break;case"select":s=Mt({},s,{value:void 0}),r=Mt({},r,{value:void 0}),i=[];break;case"textarea":s=Rf(e,s),r=Rf(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=qc)}_f(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Va.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Va.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&bt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};py=function(e,t,n,r){n!==r&&(t.flags|=4)};function pa(e,t){if(!Et)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function vn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function zj(e,t,n){var r=t.pendingProps;switch(gm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(t),null;case 1:return qn(t.type)&&Wc(),vn(t),null;case 3:return r=t.stateNode,Mi(),St(Vn),St(Nn),jm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Hl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,br!==null&&(hh(br),br=null))),oh(e,t),vn(t),null;case 5:km(t);var s=go(el.current);if(n=t.type,e!==null&&t.stateNode!=null)my(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(J(166));return vn(t),null}if(e=go(Wr.current),Hl(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Fr]=t,r[Za]=i,e=(t.mode&1)!==0,n){case"dialog":bt("cancel",r),bt("close",r);break;case"iframe":case"object":case"embed":bt("load",r);break;case"video":case"audio":for(s=0;s<Ea.length;s++)bt(Ea[s],r);break;case"source":bt("error",r);break;case"img":case"image":case"link":bt("error",r),bt("load",r);break;case"details":bt("toggle",r);break;case"input":ng(r,i),bt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},bt("invalid",r);break;case"textarea":sg(r,i),bt("invalid",r)}_f(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ul(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ul(r.textContent,l,e),s=["children",""+l]):Va.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&bt("scroll",r)}switch(n){case"input":Ol(r),rg(r,i,!0);break;case"textarea":Ol(r),og(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=qc)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=q0(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Fr]=t,e[Za]=r,hy(e,t,!1,!1),t.stateNode=e;e:{switch(a=Af(n,r),n){case"dialog":bt("cancel",e),bt("close",e),s=r;break;case"iframe":case"object":case"embed":bt("load",e),s=r;break;case"video":case"audio":for(s=0;s<Ea.length;s++)bt(Ea[s],e);s=r;break;case"source":bt("error",e),s=r;break;case"img":case"image":case"link":bt("error",e),bt("load",e),s=r;break;case"details":bt("toggle",e),s=r;break;case"input":ng(e,r),s=Ef(e,r),bt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Mt({},r,{value:void 0}),bt("invalid",e);break;case"textarea":sg(e,r),s=Rf(e,r),bt("invalid",e);break;default:s=r}_f(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?H0(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&W0(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&qa(e,c):typeof c=="number"&&qa(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Va.hasOwnProperty(i)?c!=null&&i==="onScroll"&&bt("scroll",e):c!=null&&tm(e,i,c,a))}switch(n){case"input":Ol(e),rg(e,r,!1);break;case"textarea":Ol(e),og(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ws(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?mi(e,!!r.multiple,i,!1):r.defaultValue!=null&&mi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=qc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vn(t),null;case 6:if(e&&t.stateNode!=null)py(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(J(166));if(n=go(el.current),go(Wr.current),Hl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Fr]=t,(i=r.nodeValue!==n)&&(e=er,e!==null))switch(e.tag){case 3:Ul(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ul(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fr]=t,t.stateNode=r}return vn(t),null;case 13:if(St(Tt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Et&&Zn!==null&&t.mode&1&&!(t.flags&128))Ax(),Ti(),t.flags|=98560,i=!1;else if(i=Hl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(J(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(J(317));i[Fr]=t}else Ti(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vn(t),i=!1}else br!==null&&(hh(br),br=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Tt.current&1?Jt===0&&(Jt=3):Om())),t.updateQueue!==null&&(t.flags|=4),vn(t),null);case 4:return Mi(),oh(e,t),e===null&&Ya(t.stateNode.containerInfo),vn(t),null;case 10:return wm(t.type._context),vn(t),null;case 17:return qn(t.type)&&Wc(),vn(t),null;case 19:if(St(Tt),i=t.memoizedState,i===null)return vn(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)pa(i,!1);else{if(Jt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Xc(e),a!==null){for(t.flags|=128,pa(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xt(Tt,Tt.current&1|2),t.child}e=e.sibling}i.tail!==null&&Dt()>Ai&&(t.flags|=128,r=!0,pa(i,!1),t.lanes=4194304)}else{if(!r)if(e=Xc(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),pa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Et)return vn(t),null}else 2*Dt()-i.renderingStartTime>Ai&&n!==1073741824&&(t.flags|=128,r=!0,pa(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Dt(),t.sibling=null,n=Tt.current,xt(Tt,r?n&1|2:n&1),t):(vn(t),null);case 22:case 23:return $m(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Yn&1073741824&&(vn(t),t.subtreeFlags&6&&(t.flags|=8192)):vn(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function Vj(e,t){switch(gm(t),t.tag){case 1:return qn(t.type)&&Wc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Mi(),St(Vn),St(Nn),jm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return km(t),null;case 13:if(St(Tt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));Ti()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return St(Tt),null;case 4:return Mi(),null;case 10:return wm(t.type._context),null;case 22:case 23:return $m(),null;case 24:return null;default:return null}}var Ql=!1,yn=!1,qj=typeof WeakSet=="function"?WeakSet:Set,pe=null;function ai(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){It(e,t,r)}else n.current=null}function ih(e,t,n){try{n()}catch(r){It(e,t,r)}}var Gg=!1;function Wj(e,t){if(qf=Fc,e=wx(),mm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,f=0,m=e,h=null;t:for(;;){for(var y;m!==n||s!==0&&m.nodeType!==3||(l=a+s),m!==i||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(y=m.firstChild)!==null;)h=m,m=y;for(;;){if(m===e)break t;if(h===n&&++u===s&&(l=a),h===i&&++f===r&&(c=a),(y=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wf={focusedElem:e,selectionRange:n},Fc=!1,pe=t;pe!==null;)if(t=pe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pe=e;else for(;pe!==null;){t=pe;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:xr(t.type,g),w);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(S){It(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,pe=e;break}pe=t.return}return p=Gg,Gg=!1,p}function $a(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&ih(t,n,i)}s=s.next}while(s!==r)}}function Mu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ah(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function gy(e){var t=e.alternate;t!==null&&(e.alternate=null,gy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Fr],delete t[Za],delete t[Kf],delete t[Cj],delete t[Ej])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function vy(e){return e.tag===5||e.tag===3||e.tag===4}function Qg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=qc));else if(r!==4&&(e=e.child,e!==null))for(lh(e,t,n),e=e.sibling;e!==null;)lh(e,t,n),e=e.sibling}function ch(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ch(e,t,n),e=e.sibling;e!==null;)ch(e,t,n),e=e.sibling}var cn=null,yr=!1;function xs(e,t,n){for(n=n.child;n!==null;)xy(e,t,n),n=n.sibling}function xy(e,t,n){if(qr&&typeof qr.onCommitFiberUnmount=="function")try{qr.onCommitFiberUnmount(Nu,n)}catch{}switch(n.tag){case 5:yn||ai(n,t);case 6:var r=cn,s=yr;cn=null,xs(e,t,n),cn=r,yr=s,cn!==null&&(yr?(e=cn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):cn.removeChild(n.stateNode));break;case 18:cn!==null&&(yr?(e=cn,n=n.stateNode,e.nodeType===8?Rd(e.parentNode,n):e.nodeType===1&&Rd(e,n),Ka(e)):Rd(cn,n.stateNode));break;case 4:r=cn,s=yr,cn=n.stateNode.containerInfo,yr=!0,xs(e,t,n),cn=r,yr=s;break;case 0:case 11:case 14:case 15:if(!yn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&ih(n,t,a),s=s.next}while(s!==r)}xs(e,t,n);break;case 1:if(!yn&&(ai(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){It(n,t,l)}xs(e,t,n);break;case 21:xs(e,t,n);break;case 22:n.mode&1?(yn=(r=yn)||n.memoizedState!==null,xs(e,t,n),yn=r):xs(e,t,n);break;default:xs(e,t,n)}}function Yg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new qj),t.forEach(function(r){var s=Jj.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function gr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:cn=l.stateNode,yr=!1;break e;case 3:cn=l.stateNode.containerInfo,yr=!0;break e;case 4:cn=l.stateNode.containerInfo,yr=!0;break e}l=l.return}if(cn===null)throw Error(J(160));xy(i,a,s),cn=null,yr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){It(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yy(t,e),t=t.sibling}function yy(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gr(t,e),Dr(e),r&4){try{$a(3,e,e.return),Mu(3,e)}catch(g){It(e,e.return,g)}try{$a(5,e,e.return)}catch(g){It(e,e.return,g)}}break;case 1:gr(t,e),Dr(e),r&512&&n!==null&&ai(n,n.return);break;case 5:if(gr(t,e),Dr(e),r&512&&n!==null&&ai(n,n.return),e.flags&32){var s=e.stateNode;try{qa(s,"")}catch(g){It(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&z0(s,i),Af(l,a);var u=Af(l,i);for(a=0;a<c.length;a+=2){var f=c[a],m=c[a+1];f==="style"?H0(s,m):f==="dangerouslySetInnerHTML"?W0(s,m):f==="children"?qa(s,m):tm(s,f,m,u)}switch(l){case"input":Pf(s,i);break;case"textarea":V0(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?mi(s,!!i.multiple,y,!1):h!==!!i.multiple&&(i.defaultValue!=null?mi(s,!!i.multiple,i.defaultValue,!0):mi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Za]=i}catch(g){It(e,e.return,g)}}break;case 6:if(gr(t,e),Dr(e),r&4){if(e.stateNode===null)throw Error(J(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(g){It(e,e.return,g)}}break;case 3:if(gr(t,e),Dr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ka(t.containerInfo)}catch(g){It(e,e.return,g)}break;case 4:gr(t,e),Dr(e);break;case 13:gr(t,e),Dr(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Lm=Dt())),r&4&&Yg(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(yn=(u=yn)||f,gr(t,e),yn=u):gr(t,e),Dr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(pe=e,f=e.child;f!==null;){for(m=pe=f;pe!==null;){switch(h=pe,y=h.child,h.tag){case 0:case 11:case 14:case 15:$a(4,h,h.return);break;case 1:ai(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){It(r,n,g)}}break;case 5:ai(h,h.return);break;case 22:if(h.memoizedState!==null){Zg(m);continue}}y!==null?(y.return=h,pe=y):Zg(m)}f=f.sibling}e:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=U0("display",a))}catch(g){It(e,e.return,g)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(g){It(e,e.return,g)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:gr(t,e),Dr(e),r&4&&Yg(e);break;case 21:break;default:gr(t,e),Dr(e)}}function Dr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(vy(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(qa(s,""),r.flags&=-33);var i=Qg(e);ch(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Qg(e);lh(e,l,a);break;default:throw Error(J(161))}}catch(c){It(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Uj(e,t,n){pe=e,wy(e)}function wy(e,t,n){for(var r=(e.mode&1)!==0;pe!==null;){var s=pe,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Ql;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||yn;l=Ql;var u=yn;if(Ql=a,(yn=c)&&!u)for(pe=s;pe!==null;)a=pe,c=a.child,a.tag===22&&a.memoizedState!==null?Jg(s):c!==null?(c.return=a,pe=c):Jg(s);for(;i!==null;)pe=i,wy(i),i=i.sibling;pe=s,Ql=l,yn=u}Xg(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,pe=i):Xg(e)}}function Xg(e){for(;pe!==null;){var t=pe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:yn||Mu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!yn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:xr(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Ig(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ig(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ka(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}yn||t.flags&512&&ah(t)}catch(h){It(t,t.return,h)}}if(t===e){pe=null;break}if(n=t.sibling,n!==null){n.return=t.return,pe=n;break}pe=t.return}}function Zg(e){for(;pe!==null;){var t=pe;if(t===e){pe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,pe=n;break}pe=t.return}}function Jg(e){for(;pe!==null;){var t=pe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Mu(4,t)}catch(c){It(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){It(t,s,c)}}var i=t.return;try{ah(t)}catch(c){It(t,i,c)}break;case 5:var a=t.return;try{ah(t)}catch(c){It(t,a,c)}}}catch(c){It(t,t.return,c)}if(t===e){pe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,pe=l;break}pe=t.return}}var Hj=Math.ceil,eu=hs.ReactCurrentDispatcher,_m=hs.ReactCurrentOwner,dr=hs.ReactCurrentBatchConfig,st=0,on=null,Ut=null,un=0,Yn=0,li=Ys(0),Jt=0,sl=null,jo=0,_u=0,Am=0,Oa=null,Bn=null,Lm=0,Ai=1/0,Jr=null,tu=!1,uh=null,Ds=null,Yl=!1,Ms=null,nu=0,Da=0,dh=null,Sc=-1,Nc=0;function _n(){return st&6?Dt():Sc!==-1?Sc:Sc=Dt()}function Bs(e){return e.mode&1?st&2&&un!==0?un&-un:Tj.transition!==null?(Nc===0&&(Nc=sx()),Nc):(e=ft,e!==0||(e=window.event,e=e===void 0?16:dx(e.type)),e):1}function Nr(e,t,n,r){if(50<Da)throw Da=0,dh=null,Error(J(185));hl(e,n,r),(!(st&2)||e!==on)&&(e===on&&(!(st&2)&&(_u|=n),Jt===4&&Ts(e,un)),Wn(e,r),n===1&&st===0&&!(t.mode&1)&&(Ai=Dt()+500,Pu&&Xs()))}function Wn(e,t){var n=e.callbackNode;Tk(e,t);var r=Bc(e,e===on?un:0);if(r===0)n!==null&&lg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&lg(n),t===1)e.tag===0?Pj(ev.bind(null,e)):Rx(ev.bind(null,e)),kj(function(){!(st&6)&&Xs()}),n=null;else{switch(ox(r)){case 1:n=im;break;case 4:n=nx;break;case 16:n=Dc;break;case 536870912:n=rx;break;default:n=Dc}n=Py(n,by.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function by(e,t){if(Sc=-1,Nc=0,st&6)throw Error(J(327));var n=e.callbackNode;if(yi()&&e.callbackNode!==n)return null;var r=Bc(e,e===on?un:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ru(e,r);else{t=r;var s=st;st|=2;var i=Ny();(on!==e||un!==t)&&(Jr=null,Ai=Dt()+500,xo(e,t));do try{Qj();break}catch(l){Sy(e,l)}while(!0);ym(),eu.current=i,st=s,Ut!==null?t=0:(on=null,un=0,t=Jt)}if(t!==0){if(t===2&&(s=Df(e),s!==0&&(r=s,t=fh(e,s))),t===1)throw n=sl,xo(e,0),Ts(e,r),Wn(e,Dt()),n;if(t===6)Ts(e,r);else{if(s=e.current.alternate,!(r&30)&&!Kj(s)&&(t=ru(e,r),t===2&&(i=Df(e),i!==0&&(r=i,t=fh(e,i))),t===1))throw n=sl,xo(e,0),Ts(e,r),Wn(e,Dt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(J(345));case 2:ho(e,Bn,Jr);break;case 3:if(Ts(e,r),(r&130023424)===r&&(t=Lm+500-Dt(),10<t)){if(Bc(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){_n(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Hf(ho.bind(null,e,Bn,Jr),t);break}ho(e,Bn,Jr);break;case 4:if(Ts(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Sr(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=Dt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Hj(r/1960))-r,10<r){e.timeoutHandle=Hf(ho.bind(null,e,Bn,Jr),r);break}ho(e,Bn,Jr);break;case 5:ho(e,Bn,Jr);break;default:throw Error(J(329))}}}return Wn(e,Dt()),e.callbackNode===n?by.bind(null,e):null}function fh(e,t){var n=Oa;return e.current.memoizedState.isDehydrated&&(xo(e,t).flags|=256),e=ru(e,t),e!==2&&(t=Bn,Bn=n,t!==null&&hh(t)),e}function hh(e){Bn===null?Bn=e:Bn.push.apply(Bn,e)}function Kj(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!kr(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ts(e,t){for(t&=~Am,t&=~_u,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Sr(t),r=1<<n;e[n]=-1,t&=~r}}function ev(e){if(st&6)throw Error(J(327));yi();var t=Bc(e,0);if(!(t&1))return Wn(e,Dt()),null;var n=ru(e,t);if(e.tag!==0&&n===2){var r=Df(e);r!==0&&(t=r,n=fh(e,r))}if(n===1)throw n=sl,xo(e,0),Ts(e,t),Wn(e,Dt()),n;if(n===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ho(e,Bn,Jr),Wn(e,Dt()),null}function Im(e,t){var n=st;st|=1;try{return e(t)}finally{st=n,st===0&&(Ai=Dt()+500,Pu&&Xs())}}function Co(e){Ms!==null&&Ms.tag===0&&!(st&6)&&yi();var t=st;st|=1;var n=dr.transition,r=ft;try{if(dr.transition=null,ft=1,e)return e()}finally{ft=r,dr.transition=n,st=t,!(st&6)&&Xs()}}function $m(){Yn=li.current,St(li)}function xo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Nj(n)),Ut!==null)for(n=Ut.return;n!==null;){var r=n;switch(gm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wc();break;case 3:Mi(),St(Vn),St(Nn),jm();break;case 5:km(r);break;case 4:Mi();break;case 13:St(Tt);break;case 19:St(Tt);break;case 10:wm(r.type._context);break;case 22:case 23:$m()}n=n.return}if(on=e,Ut=e=Fs(e.current,null),un=Yn=t,Jt=0,sl=null,Am=_u=jo=0,Bn=Oa=null,po!==null){for(t=0;t<po.length;t++)if(n=po[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}po=null}return e}function Sy(e,t){do{var n=Ut;try{if(ym(),yc.current=Jc,Zc){for(var r=Rt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Zc=!1}if(ko=0,sn=Zt=Rt=null,Ia=!1,tl=0,_m.current=null,n===null||n.return===null){Jt=1,sl=t,Ut=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=un,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=zg(a);if(y!==null){y.flags&=-257,Vg(y,a,l,i,t),y.mode&1&&Fg(i,u,t),t=y,c=u;var p=t.updateQueue;if(p===null){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}else{if(!(t&1)){Fg(i,u,t),Om();break e}c=Error(J(426))}}else if(Et&&l.mode&1){var w=zg(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Vg(w,a,l,i,t),vm(_i(c,l));break e}}i=c=_i(c,l),Jt!==4&&(Jt=2),Oa===null?Oa=[i]:Oa.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=oy(i,c,t);Lg(i,x);break e;case 1:l=c;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ds===null||!Ds.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=iy(i,l,t);Lg(i,S);break e}}i=i.return}while(i!==null)}jy(n)}catch(N){t=N,Ut===n&&n!==null&&(Ut=n=n.return);continue}break}while(!0)}function Ny(){var e=eu.current;return eu.current=Jc,e===null?Jc:e}function Om(){(Jt===0||Jt===3||Jt===2)&&(Jt=4),on===null||!(jo&268435455)&&!(_u&268435455)||Ts(on,un)}function ru(e,t){var n=st;st|=2;var r=Ny();(on!==e||un!==t)&&(Jr=null,xo(e,t));do try{Gj();break}catch(s){Sy(e,s)}while(!0);if(ym(),st=n,eu.current=r,Ut!==null)throw Error(J(261));return on=null,un=0,Jt}function Gj(){for(;Ut!==null;)ky(Ut)}function Qj(){for(;Ut!==null&&!wk();)ky(Ut)}function ky(e){var t=Ey(e.alternate,e,Yn);e.memoizedProps=e.pendingProps,t===null?jy(e):Ut=t,_m.current=null}function jy(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Vj(n,t),n!==null){n.flags&=32767,Ut=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Jt=6,Ut=null;return}}else if(n=zj(n,t,Yn),n!==null){Ut=n;return}if(t=t.sibling,t!==null){Ut=t;return}Ut=t=e}while(t!==null);Jt===0&&(Jt=5)}function ho(e,t,n){var r=ft,s=dr.transition;try{dr.transition=null,ft=1,Yj(e,t,n,r)}finally{dr.transition=s,ft=r}return null}function Yj(e,t,n,r){do yi();while(Ms!==null);if(st&6)throw Error(J(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Rk(e,i),e===on&&(Ut=on=null,un=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yl||(Yl=!0,Py(Dc,function(){return yi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=dr.transition,dr.transition=null;var a=ft;ft=1;var l=st;st|=4,_m.current=null,Wj(e,n),yy(n,e),gj(Wf),Fc=!!qf,Wf=qf=null,e.current=n,Uj(n),bk(),st=l,ft=a,dr.transition=i}else e.current=n;if(Yl&&(Yl=!1,Ms=e,nu=s),i=e.pendingLanes,i===0&&(Ds=null),kk(n.stateNode),Wn(e,Dt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(tu)throw tu=!1,e=uh,uh=null,e;return nu&1&&e.tag!==0&&yi(),i=e.pendingLanes,i&1?e===dh?Da++:(Da=0,dh=e):Da=0,Xs(),null}function yi(){if(Ms!==null){var e=ox(nu),t=dr.transition,n=ft;try{if(dr.transition=null,ft=16>e?16:e,Ms===null)var r=!1;else{if(e=Ms,Ms=null,nu=0,st&6)throw Error(J(331));var s=st;for(st|=4,pe=e.current;pe!==null;){var i=pe,a=i.child;if(pe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(pe=u;pe!==null;){var f=pe;switch(f.tag){case 0:case 11:case 15:$a(8,f,i)}var m=f.child;if(m!==null)m.return=f,pe=m;else for(;pe!==null;){f=pe;var h=f.sibling,y=f.return;if(gy(f),f===u){pe=null;break}if(h!==null){h.return=y,pe=h;break}pe=y}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}pe=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,pe=a;else e:for(;pe!==null;){if(i=pe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:$a(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,pe=x;break e}pe=i.return}}var v=e.current;for(pe=v;pe!==null;){a=pe;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,pe=b;else e:for(a=v;pe!==null;){if(l=pe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Mu(9,l)}}catch(N){It(l,l.return,N)}if(l===a){pe=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,pe=S;break e}pe=l.return}}if(st=s,Xs(),qr&&typeof qr.onPostCommitFiberRoot=="function")try{qr.onPostCommitFiberRoot(Nu,e)}catch{}r=!0}return r}finally{ft=n,dr.transition=t}}return!1}function tv(e,t,n){t=_i(n,t),t=oy(e,t,1),e=Os(e,t,1),t=_n(),e!==null&&(hl(e,1,t),Wn(e,t))}function It(e,t,n){if(e.tag===3)tv(e,e,n);else for(;t!==null;){if(t.tag===3){tv(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ds===null||!Ds.has(r))){e=_i(n,e),e=iy(t,e,1),t=Os(t,e,1),e=_n(),t!==null&&(hl(t,1,e),Wn(t,e));break}}t=t.return}}function Xj(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=_n(),e.pingedLanes|=e.suspendedLanes&n,on===e&&(un&n)===n&&(Jt===4||Jt===3&&(un&130023424)===un&&500>Dt()-Lm?xo(e,0):Am|=n),Wn(e,t)}function Cy(e,t){t===0&&(e.mode&1?(t=Fl,Fl<<=1,!(Fl&130023424)&&(Fl=4194304)):t=1);var n=_n();e=cs(e,t),e!==null&&(hl(e,t,n),Wn(e,n))}function Zj(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Cy(e,n)}function Jj(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(t),Cy(e,n)}var Ey;Ey=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vn.current)zn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return zn=!1,Fj(e,t,n);zn=!!(e.flags&131072)}else zn=!1,Et&&t.flags&1048576&&Mx(t,Kc,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;bc(e,t),e=t.pendingProps;var s=Pi(t,Nn.current);xi(t,n),s=Em(null,t,r,e,s,n);var i=Pm();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qn(r)?(i=!0,Uc(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sm(t),s.updater=Ru,t.stateNode=s,s._reactInternals=t,Jf(t,r,e,n),t=nh(null,t,r,!0,i,n)):(t.tag=0,Et&&i&&pm(t),Pn(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(bc(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=tC(r),e=xr(r,e),s){case 0:t=th(null,t,r,e,n);break e;case 1:t=Ug(null,t,r,e,n);break e;case 11:t=qg(null,t,r,e,n);break e;case 14:t=Wg(null,t,r,xr(r.type,e),n);break e}throw Error(J(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:xr(r,s),th(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:xr(r,s),Ug(e,t,r,s,n);case 3:e:{if(uy(t),e===null)throw Error(J(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Ox(e,t),Yc(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=_i(Error(J(423)),t),t=Hg(e,t,r,n,s);break e}else if(r!==s){s=_i(Error(J(424)),t),t=Hg(e,t,r,n,s);break e}else for(Zn=$s(t.stateNode.containerInfo.firstChild),er=t,Et=!0,br=null,n=Ix(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ti(),r===s){t=us(e,t,n);break e}Pn(e,t,r,n)}t=t.child}return t;case 5:return Dx(t),e===null&&Yf(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,Uf(r,s)?a=null:i!==null&&Uf(r,i)&&(t.flags|=32),cy(e,t),Pn(e,t,a,n),t.child;case 6:return e===null&&Yf(t),null;case 13:return dy(e,t,n);case 4:return Nm(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ri(t,null,r,n):Pn(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:xr(r,s),qg(e,t,r,s,n);case 7:return Pn(e,t,t.pendingProps,n),t.child;case 8:return Pn(e,t,t.pendingProps.children,n),t.child;case 12:return Pn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,xt(Gc,r._currentValue),r._currentValue=a,i!==null)if(kr(i.value,a)){if(i.children===s.children&&!Vn.current){t=us(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=is(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Xf(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(J(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Xf(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Pn(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,xi(t,n),s=fr(s),r=r(s),t.flags|=1,Pn(e,t,r,n),t.child;case 14:return r=t.type,s=xr(r,t.pendingProps),s=xr(r.type,s),Wg(e,t,r,s,n);case 15:return ay(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:xr(r,s),bc(e,t),t.tag=1,qn(r)?(e=!0,Uc(t)):e=!1,xi(t,n),sy(t,r,s),Jf(t,r,s,n),nh(null,t,r,!0,e,n);case 19:return fy(e,t,n);case 22:return ly(e,t,n)}throw Error(J(156,t.tag))};function Py(e,t){return tx(e,t)}function eC(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(e,t,n,r){return new eC(e,t,n,r)}function Dm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tC(e){if(typeof e=="function")return Dm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rm)return 11;if(e===sm)return 14}return 2}function Fs(e,t){var n=e.alternate;return n===null?(n=cr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function kc(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")Dm(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Zo:return yo(n.children,s,i,t);case nm:a=8,s|=8;break;case Nf:return e=cr(12,n,t,s|2),e.elementType=Nf,e.lanes=i,e;case kf:return e=cr(13,n,t,s),e.elementType=kf,e.lanes=i,e;case jf:return e=cr(19,n,t,s),e.elementType=jf,e.lanes=i,e;case D0:return Au(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $0:a=10;break e;case O0:a=9;break e;case rm:a=11;break e;case sm:a=14;break e;case js:a=16,r=null;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=cr(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function yo(e,t,n,r){return e=cr(7,e,r,t),e.lanes=n,e}function Au(e,t,n,r){return e=cr(22,e,r,t),e.elementType=D0,e.lanes=n,e.stateNode={isHidden:!1},e}function Dd(e,t,n){return e=cr(6,e,null,t),e.lanes=n,e}function Bd(e,t,n){return t=cr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function nC(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yd(0),this.expirationTimes=yd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bm(e,t,n,r,s,i,a,l,c){return e=new nC(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=cr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sm(i),e}function rC(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ty(e){if(!e)return Us;e=e._reactInternals;e:{if(Oo(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var n=e.type;if(qn(n))return Tx(e,n,t)}return t}function Ry(e,t,n,r,s,i,a,l,c){return e=Bm(n,r,!0,e,s,i,a,l,c),e.context=Ty(null),n=e.current,r=_n(),s=Bs(n),i=is(r,s),i.callback=t??null,Os(n,i,s),e.current.lanes=s,hl(e,s,r),Wn(e,r),e}function Lu(e,t,n,r){var s=t.current,i=_n(),a=Bs(s);return n=Ty(n),t.context===null?t.context=n:t.pendingContext=n,t=is(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Os(s,t,a),e!==null&&(Nr(e,s,a,i),xc(e,s,a)),a}function su(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Fm(e,t){nv(e,t),(e=e.alternate)&&nv(e,t)}function sC(){return null}var My=typeof reportError=="function"?reportError:function(e){console.error(e)};function zm(e){this._internalRoot=e}Iu.prototype.render=zm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));Lu(e,t,null,null)};Iu.prototype.unmount=zm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Co(function(){Lu(null,e,null,null)}),t[ls]=null}};function Iu(e){this._internalRoot=e}Iu.prototype.unstable_scheduleHydration=function(e){if(e){var t=lx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ps.length&&t!==0&&t<Ps[n].priority;n++);Ps.splice(n,0,e),n===0&&ux(e)}};function Vm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rv(){}function oC(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=su(a);i.call(u)}}var a=Ry(t,r,e,0,null,!1,!1,"",rv);return e._reactRootContainer=a,e[ls]=a.current,Ya(e.nodeType===8?e.parentNode:e),Co(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=su(c);l.call(u)}}var c=Bm(e,0,!1,null,null,!1,!1,"",rv);return e._reactRootContainer=c,e[ls]=c.current,Ya(e.nodeType===8?e.parentNode:e),Co(function(){Lu(t,c,n,r)}),c}function Ou(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=su(a);l.call(c)}}Lu(t,a,e,s)}else a=oC(n,t,e,s,r);return su(a)}ix=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ca(t.pendingLanes);n!==0&&(am(t,n|1),Wn(t,Dt()),!(st&6)&&(Ai=Dt()+500,Xs()))}break;case 13:Co(function(){var r=cs(e,1);if(r!==null){var s=_n();Nr(r,e,1,s)}}),Fm(e,1)}};lm=function(e){if(e.tag===13){var t=cs(e,134217728);if(t!==null){var n=_n();Nr(t,e,134217728,n)}Fm(e,134217728)}};ax=function(e){if(e.tag===13){var t=Bs(e),n=cs(e,t);if(n!==null){var r=_n();Nr(n,e,t,r)}Fm(e,t)}};lx=function(){return ft};cx=function(e,t){var n=ft;try{return ft=e,t()}finally{ft=n}};If=function(e,t,n){switch(t){case"input":if(Pf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Eu(r);if(!s)throw Error(J(90));F0(r),Pf(r,s)}}}break;case"textarea":V0(e,n);break;case"select":t=n.value,t!=null&&mi(e,!!n.multiple,t,!1)}};Q0=Im;Y0=Co;var iC={usingClientEntryPoint:!1,Events:[pl,ni,Eu,K0,G0,Im]},ga={findFiberByHostInstance:mo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aC={bundleType:ga.bundleType,version:ga.version,rendererPackageName:ga.rendererPackageName,rendererConfig:ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=J0(e),e===null?null:e.stateNode},findFiberByHostInstance:ga.findFiberByHostInstance||sC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xl.isDisabled&&Xl.supportsFiber)try{Nu=Xl.inject(aC),qr=Xl}catch{}}rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iC;rr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vm(t))throw Error(J(200));return rC(e,t,null,n)};rr.createRoot=function(e,t){if(!Vm(e))throw Error(J(299));var n=!1,r="",s=My;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Bm(e,1,!1,null,null,n,!1,r,s),e[ls]=t.current,Ya(e.nodeType===8?e.parentNode:e),new zm(t)};rr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=J0(t),e=e===null?null:e.stateNode,e};rr.flushSync=function(e){return Co(e)};rr.hydrate=function(e,t,n){if(!$u(t))throw Error(J(200));return Ou(null,e,t,!0,n)};rr.hydrateRoot=function(e,t,n){if(!Vm(e))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=My;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Ry(t,null,e,1,n??null,s,!1,i,a),e[ls]=t.current,Ya(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Iu(t)};rr.render=function(e,t,n){if(!$u(t))throw Error(J(200));return Ou(null,e,t,!1,n)};rr.unmountComponentAtNode=function(e){if(!$u(e))throw Error(J(40));return e._reactRootContainer?(Co(function(){Ou(null,null,e,!1,function(){e._reactRootContainer=null,e[ls]=null})}),!0):!1};rr.unstable_batchedUpdates=Im;rr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$u(n))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return Ou(e,t,n,!1,r)};rr.version="18.3.1-next-f1338f8080-20240426";function _y(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_y)}catch(e){console.error(e)}}_y(),_0.exports=rr;var Do=_0.exports;const lC=y0(Do);var Ay,sv=Do;Ay=sv.createRoot,sv.hydrateRoot;const cC=1,uC=1e6,qm="simulchess_toasts_enabled";function dC(){if(typeof window>"u")return!0;const e=localStorage.getItem(qm);return e===null?!0:e==="true"}function fC(e){typeof window>"u"||localStorage.setItem(qm,String(e))}let Fd=0;function hC(){return Fd=(Fd+1)%Number.MAX_SAFE_INTEGER,Fd.toString()}const zd=new Map,ov=e=>{if(zd.has(e))return;const t=setTimeout(()=>{zd.delete(e),Ba({type:"REMOVE_TOAST",toastId:e})},uC);zd.set(e,t)},mC=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,cC)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?ov(n):e.toasts.forEach(r=>{ov(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},jc=[];let Cc={toasts:[]};function Ba(e){Cc=mC(Cc,e),jc.forEach(t=>{t(Cc)})}function pC({...e}){if(!(typeof window<"u"?localStorage.getItem(qm)!=="false":!0))return{id:"",dismiss:()=>{},update:()=>{}};const n=hC(),r=i=>Ba({type:"UPDATE_TOAST",toast:{...i,id:n}}),s=()=>Ba({type:"DISMISS_TOAST",toastId:n});return Ba({type:"ADD_TOAST",toast:{...e,id:n,open:!0,onOpenChange:i=>{i||s()}}}),{id:n,dismiss:s,update:r}}function vl(){const[e,t]=d.useState(Cc);return d.useEffect(()=>(jc.push(t),()=>{const n=jc.indexOf(t);n>-1&&jc.splice(n,1)}),[e]),{...e,toast:pC,dismiss:n=>Ba({type:"DISMISS_TOAST",toastId:n})}}function be(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function iv(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Wm(...e){return t=>{let n=!1;const r=e.map(s=>{const i=iv(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():iv(e[s],null)}}}}function Ve(...e){return d.useCallback(Wm(...e),e)}function gC(e,t){const n=d.createContext(t),r=i=>{const{children:a,...l}=i,c=d.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:a})};r.displayName=e+"Provider";function s(i){const a=d.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,s]}function Un(e,t=[]){let n=[];function r(i,a){const l=d.createContext(a),c=n.length;n=[...n,a];const u=m=>{var x;const{scope:h,children:y,...p}=m,g=((x=h==null?void 0:h[e])==null?void 0:x[c])||l,w=d.useMemo(()=>p,Object.values(p));return o.jsx(g.Provider,{value:w,children:y})};u.displayName=i+"Provider";function f(m,h){var g;const y=((g=h==null?void 0:h[e])==null?void 0:g[c])||l,p=d.useContext(y);if(p)return p;if(a!==void 0)return a;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[u,f]}const s=()=>{const i=n.map(a=>d.createContext(a));return function(l){const c=(l==null?void 0:l[e])||i;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,vC(s,...t)]}function vC(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const m=c(i)[`__scope${u}`];return{...l,...m}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function Li(e){const t=yC(e),n=d.forwardRef((r,s)=>{const{children:i,...a}=r,l=d.Children.toArray(i),c=l.find(wC);if(c){const u=c.props.children,f=l.map(m=>m===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:m);return o.jsx(t,{...a,ref:s,children:d.isValidElement(u)?d.cloneElement(u,void 0,f):null})}return o.jsx(t,{...a,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}var xC=Li("Slot");function yC(e){const t=d.forwardRef((n,r)=>{const{children:s,...i}=n;if(d.isValidElement(s)){const a=SC(s),l=bC(i,s.props);return s.type!==d.Fragment&&(l.ref=r?Wm(r,a):a),d.cloneElement(s,l)}return d.Children.count(s)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ly=Symbol("radix.slottable");function Iy(e){const t=({children:n})=>o.jsx(o.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Ly,t}function wC(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ly}function bC(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{i(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function SC(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Um(e){const t=e+"CollectionProvider",[n,r]=Un(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:w,children:x}=g,v=Tn.useRef(null),b=Tn.useRef(new Map).current;return o.jsx(s,{scope:w,itemMap:b,collectionRef:v,children:x})};a.displayName=t;const l=e+"CollectionSlot",c=Li(l),u=Tn.forwardRef((g,w)=>{const{scope:x,children:v}=g,b=i(l,x),S=Ve(w,b.collectionRef);return o.jsx(c,{ref:S,children:v})});u.displayName=l;const f=e+"CollectionItemSlot",m="data-radix-collection-item",h=Li(f),y=Tn.forwardRef((g,w)=>{const{scope:x,children:v,...b}=g,S=Tn.useRef(null),N=Ve(w,S),j=i(f,x);return Tn.useEffect(()=>(j.itemMap.set(S,{ref:S,...b}),()=>void j.itemMap.delete(S))),o.jsx(h,{[m]:"",ref:N,children:v})});y.displayName=f;function p(g){const w=i(e+"CollectionConsumer",g);return Tn.useCallback(()=>{const v=w.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${m}]`));return Array.from(w.itemMap.values()).sort((j,k)=>b.indexOf(j.ref.current)-b.indexOf(k.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:u,ItemSlot:y},p,r]}var NC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Re=NC.reduce((e,t)=>{const n=Li(`Primitive.${t}`),r=d.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function $y(e,t){e&&Do.flushSync(()=>e.dispatchEvent(t))}function Bt(e){const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function kC(e,t=globalThis==null?void 0:globalThis.document){const n=Bt(e);d.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var jC="DismissableLayer",mh="dismissableLayer.update",CC="dismissableLayer.pointerDownOutside",EC="dismissableLayer.focusOutside",av,Oy=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xl=d.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=e,u=d.useContext(Oy),[f,m]=d.useState(null),h=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=d.useState({}),p=Ve(t,k=>m(k)),g=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(w),v=f?g.indexOf(f):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,S=v>=x,N=TC(k=>{const C=k.target,R=[...u.branches].some(T=>T.contains(C));!S||R||(s==null||s(k),a==null||a(k),k.defaultPrevented||l==null||l())},h),j=RC(k=>{const C=k.target;[...u.branches].some(T=>T.contains(C))||(i==null||i(k),a==null||a(k),k.defaultPrevented||l==null||l())},h);return kC(k=>{v===u.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},h),d.useEffect(()=>{if(f)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(av=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),lv(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=av)}},[f,h,n,u]),d.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),lv())},[f,u]),d.useEffect(()=>{const k=()=>y({});return document.addEventListener(mh,k),()=>document.removeEventListener(mh,k)},[]),o.jsx(Re.div,{...c,ref:p,style:{pointerEvents:b?S?"auto":"none":void 0,...e.style},onFocusCapture:be(e.onFocusCapture,j.onFocusCapture),onBlurCapture:be(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:be(e.onPointerDownCapture,N.onPointerDownCapture)})});xl.displayName=jC;var PC="DismissableLayerBranch",Dy=d.forwardRef((e,t)=>{const n=d.useContext(Oy),r=d.useRef(null),s=Ve(t,r);return d.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(Re.div,{...e,ref:s})});Dy.displayName=PC;function TC(e,t=globalThis==null?void 0:globalThis.document){const n=Bt(e),r=d.useRef(!1),s=d.useRef(()=>{});return d.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){By(CC,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function RC(e,t=globalThis==null?void 0:globalThis.document){const n=Bt(e),r=d.useRef(!1);return d.useEffect(()=>{const s=i=>{i.target&&!r.current&&By(EC,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function lv(){const e=new CustomEvent(mh);document.dispatchEvent(e)}function By(e,t,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?$y(s,i):s.dispatchEvent(i)}var MC=xl,_C=Dy,an=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{},AC="Portal",Du=d.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[s,i]=d.useState(!1);an(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?lC.createPortal(o.jsx(Re.div,{...r,ref:t}),a):null});Du.displayName=AC;function LC(e,t){return d.useReducer((n,r)=>t[n][r]??n,e)}var Lr=e=>{const{present:t,children:n}=e,r=IC(t),s=typeof n=="function"?n({present:r.isPresent}):d.Children.only(n),i=Ve(r.ref,$C(s));return typeof n=="function"||r.isPresent?d.cloneElement(s,{ref:i}):null};Lr.displayName="Presence";function IC(e){const[t,n]=d.useState(),r=d.useRef({}),s=d.useRef(e),i=d.useRef("none"),a=e?"mounted":"unmounted",[l,c]=LC(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const u=Zl(r.current);i.current=l==="mounted"?u:"none"},[l]),an(()=>{const u=r.current,f=s.current;if(f!==e){const h=i.current,y=Zl(u);e?c("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&h!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),an(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,m=y=>{const g=Zl(r.current).includes(y.animationName);if(y.target===t&&g&&(c("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},h=y=>{y.target===t&&(i.current=Zl(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:d.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function Zl(e){return(e==null?void 0:e.animationName)||"none"}function $C(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Eo({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,s]=OC({defaultProp:t,onChange:n}),i=e!==void 0,a=i?e:r,l=Bt(n),c=d.useCallback(u=>{if(i){const m=typeof u=="function"?u(e):u;m!==e&&l(m)}else s(u)},[i,e,s,l]);return[a,c]}function OC({defaultProp:e,onChange:t}){const n=d.useState(e),[r]=n,s=d.useRef(r),i=Bt(t);return d.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var DC="VisuallyHidden",yl=d.forwardRef((e,t)=>o.jsx(Re.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));yl.displayName=DC;var BC=yl,Hm="ToastProvider",[Km,FC,zC]=Um("Toast"),[Fy,n3]=Un("Toast",[zC]),[VC,Bu]=Fy(Hm),zy=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=e,[l,c]=d.useState(null),[u,f]=d.useState(0),m=d.useRef(!1),h=d.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Hm}\`. Expected non-empty \`string\`.`),o.jsx(Km.Provider,{scope:t,children:o.jsx(VC,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:d.useCallback(()=>f(y=>y+1),[]),onToastRemove:d.useCallback(()=>f(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:h,children:a})})};zy.displayName=Hm;var Vy="ToastViewport",qC=["F8"],ph="toast.viewportPause",gh="toast.viewportResume",qy=d.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=qC,label:s="Notifications ({hotkey})",...i}=e,a=Bu(Vy,n),l=FC(n),c=d.useRef(null),u=d.useRef(null),f=d.useRef(null),m=d.useRef(null),h=Ve(t,m,a.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=a.toastCount>0;d.useEffect(()=>{const w=x=>{var b;r.length!==0&&r.every(S=>x[S]||x.code===S)&&((b=m.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),d.useEffect(()=>{const w=c.current,x=m.current;if(p&&w&&x){const v=()=>{if(!a.isClosePausedRef.current){const j=new CustomEvent(ph);x.dispatchEvent(j),a.isClosePausedRef.current=!0}},b=()=>{if(a.isClosePausedRef.current){const j=new CustomEvent(gh);x.dispatchEvent(j),a.isClosePausedRef.current=!1}},S=j=>{!w.contains(j.relatedTarget)&&b()},N=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",v),w.addEventListener("focusout",S),w.addEventListener("pointermove",v),w.addEventListener("pointerleave",N),window.addEventListener("blur",v),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",v),w.removeEventListener("focusout",S),w.removeEventListener("pointermove",v),w.removeEventListener("pointerleave",N),window.removeEventListener("blur",v),window.removeEventListener("focus",b)}}},[p,a.isClosePausedRef]);const g=d.useCallback(({tabbingDirection:w})=>{const v=l().map(b=>{const S=b.ref.current,N=[S,...n2(S)];return w==="forwards"?N:N.reverse()});return(w==="forwards"?v.reverse():v).flat()},[l]);return d.useEffect(()=>{const w=m.current;if(w){const x=v=>{var N,j,k;const b=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!b){const C=document.activeElement,R=v.shiftKey;if(v.target===w&&R){(N=u.current)==null||N.focus();return}const _=g({tabbingDirection:R?"backwards":"forwards"}),z=_.findIndex(M=>M===C);Vd(_.slice(z+1))?v.preventDefault():R?(j=u.current)==null||j.focus():(k=f.current)==null||k.focus()}};return w.addEventListener("keydown",x),()=>w.removeEventListener("keydown",x)}},[l,g]),o.jsxs(_C,{ref:c,role:"region","aria-label":s.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&o.jsx(vh,{ref:u,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"forwards"});Vd(w)}}),o.jsx(Km.Slot,{scope:n,children:o.jsx(Re.ol,{tabIndex:-1,...i,ref:h})}),p&&o.jsx(vh,{ref:f,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"backwards"});Vd(w)}})]})});qy.displayName=Vy;var Wy="ToastFocusProxy",vh=d.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,i=Bu(Wy,n);return o.jsx(yl,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});vh.displayName=Wy;var Fu="Toast",WC="toast.swipeStart",UC="toast.swipeMove",HC="toast.swipeCancel",KC="toast.swipeEnd",Uy=d.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...a}=e,[l=!0,c]=Eo({prop:r,defaultProp:s,onChange:i});return o.jsx(Lr,{present:n||l,children:o.jsx(YC,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:Bt(e.onPause),onResume:Bt(e.onResume),onSwipeStart:be(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:be(e.onSwipeMove,u=>{const{x:f,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:be(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:be(e.onSwipeEnd,u=>{const{x:f,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});Uy.displayName=Fu;var[GC,QC]=Fy(Fu,{onClose(){}}),YC=d.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:f,onSwipeMove:m,onSwipeCancel:h,onSwipeEnd:y,...p}=e,g=Bu(Fu,n),[w,x]=d.useState(null),v=Ve(t,M=>x(M)),b=d.useRef(null),S=d.useRef(null),N=s||g.duration,j=d.useRef(0),k=d.useRef(N),C=d.useRef(0),{onToastAdd:R,onToastRemove:T}=g,F=Bt(()=>{var V;(w==null?void 0:w.contains(document.activeElement))&&((V=g.viewport)==null||V.focus()),a()}),_=d.useCallback(M=>{!M||M===1/0||(window.clearTimeout(C.current),j.current=new Date().getTime(),C.current=window.setTimeout(F,M))},[F]);d.useEffect(()=>{const M=g.viewport;if(M){const V=()=>{_(k.current),u==null||u()},W=()=>{const q=new Date().getTime()-j.current;k.current=k.current-q,window.clearTimeout(C.current),c==null||c()};return M.addEventListener(ph,W),M.addEventListener(gh,V),()=>{M.removeEventListener(ph,W),M.removeEventListener(gh,V)}}},[g.viewport,N,c,u,_]),d.useEffect(()=>{i&&!g.isClosePausedRef.current&&_(N)},[i,N,g.isClosePausedRef,_]),d.useEffect(()=>(R(),()=>T()),[R,T]);const z=d.useMemo(()=>w?Zy(w):null,[w]);return g.viewport?o.jsxs(o.Fragment,{children:[z&&o.jsx(XC,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),o.jsx(GC,{scope:n,onClose:F,children:Do.createPortal(o.jsx(Km.ItemSlot,{scope:n,children:o.jsx(MC,{asChild:!0,onEscapeKeyDown:be(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||F(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(Re.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...p,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:be(e.onKeyDown,M=>{M.key==="Escape"&&(l==null||l(M.nativeEvent),M.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:be(e.onPointerDown,M=>{M.button===0&&(b.current={x:M.clientX,y:M.clientY})}),onPointerMove:be(e.onPointerMove,M=>{if(!b.current)return;const V=M.clientX-b.current.x,W=M.clientY-b.current.y,q=!!S.current,E=["left","right"].includes(g.swipeDirection),A=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,O=E?A(0,V):0,K=E?0:A(0,W),ae=M.pointerType==="touch"?10:2,he={x:O,y:K},ve={originalEvent:M,delta:he};q?(S.current=he,Jl(UC,m,ve,{discrete:!1})):cv(he,g.swipeDirection,ae)?(S.current=he,Jl(WC,f,ve,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(V)>ae||Math.abs(W)>ae)&&(b.current=null)}),onPointerUp:be(e.onPointerUp,M=>{const V=S.current,W=M.target;if(W.hasPointerCapture(M.pointerId)&&W.releasePointerCapture(M.pointerId),S.current=null,b.current=null,V){const q=M.currentTarget,E={originalEvent:M,delta:V};cv(V,g.swipeDirection,g.swipeThreshold)?Jl(KC,y,E,{discrete:!0}):Jl(HC,h,E,{discrete:!0}),q.addEventListener("click",A=>A.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),XC=e=>{const{__scopeToast:t,children:n,...r}=e,s=Bu(Fu,t),[i,a]=d.useState(!1),[l,c]=d.useState(!1);return e2(()=>a(!0)),d.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(Du,{asChild:!0,children:o.jsx(yl,{...r,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},ZC="ToastTitle",Hy=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return o.jsx(Re.div,{...r,ref:t})});Hy.displayName=ZC;var JC="ToastDescription",Ky=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return o.jsx(Re.div,{...r,ref:t})});Ky.displayName=JC;var Gy="ToastAction",Qy=d.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?o.jsx(Xy,{altText:n,asChild:!0,children:o.jsx(Gm,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Gy}\`. Expected non-empty \`string\`.`),null)});Qy.displayName=Gy;var Yy="ToastClose",Gm=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=QC(Yy,n);return o.jsx(Xy,{asChild:!0,children:o.jsx(Re.button,{type:"button",...r,ref:t,onClick:be(e.onClick,s.onClose)})})});Gm.displayName=Yy;var Xy=d.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return o.jsx(Re.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function Zy(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),t2(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...Zy(r))}}),t}function Jl(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?$y(s,i):s.dispatchEvent(i)}var cv=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),i=r>s;return t==="left"||t==="right"?i&&r>n:!i&&s>n};function e2(e=()=>{}){const t=Bt(e);an(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function t2(e){return e.nodeType===e.ELEMENT_NODE}function n2(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Vd(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var r2=zy,Jy=qy,ew=Uy,tw=Hy,nw=Ky,rw=Qy,sw=Gm;function ow(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=ow(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function iw(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=ow(e))&&(r&&(r+=" "),r+=t);return r}const uv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,dv=iw,zu=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return dv(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=t,a=Object.keys(s).map(u=>{const f=n==null?void 0:n[u],m=i==null?void 0:i[u];if(f===null)return null;const h=uv(f)||uv(m);return s[u][h]}),l=n&&Object.entries(n).reduce((u,f)=>{let[m,h]=f;return h===void 0||(u[m]=h),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,f)=>{let{class:m,className:h,...y}=f;return Object.entries(y).every(p=>{let[g,w]=p;return Array.isArray(w)?w.includes({...i,...l}[g]):{...i,...l}[g]===w})?[...u,m,h]:u},[]);return dv(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),aw=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=d.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>d.createElement("svg",{ref:c,...o2,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:aw("lucide",s),...l},[...a.map(([u,f])=>d.createElement(u,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(e,t)=>{const n=d.forwardRef(({className:r,...s},i)=>d.createElement(i2,{ref:i,iconNode:t,className:aw(`lucide-${s2(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=we("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=we("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=we("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=we("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=we("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=we("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=we("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=we("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=we("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=we("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=we("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=we("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=we("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=we("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=we("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=we("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=we("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=we("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=we("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=we("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=we("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=we("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=we("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=we("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=we("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=we("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=we("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=we("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=we("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=we("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=we("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=we("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=we("Infinity",[["path",{d:"M12 12c-2-2.67-4-4-6-4a4 4 0 1 0 0 8c2 0 4-1.33 6-4Zm0 0c2 2.67 4 4 6 4a4 4 0 0 0 0-8c-2 0-4 1.33-6 4Z",key:"1z0uae"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=we("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=we("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=we("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=we("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=we("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=we("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=we("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=we("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=we("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=we("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=we("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=we("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=we("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=we("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=we("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=we("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=we("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=we("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=we("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=we("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=we("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=we("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=we("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=we("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=we("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=we("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Xm="-",_2=e=>{const t=L2(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const l=a.split(Xm);return l[0]===""&&l.length!==1&&l.shift(),Nw(l,t)||A2(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},Nw=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?Nw(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(Xm);return(a=t.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},pv=/^\[(.+)\]$/,A2=e=>{if(pv.test(e)){const t=pv.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},L2=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return $2(Object.entries(e.classGroups),n).forEach(([i,a])=>{xh(a,r,i,t)}),r},xh=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:gv(t,s);i.classGroupId=n;return}if(typeof s=="function"){if(I2(s)){xh(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{xh(a,gv(t,i),n,r)})})},gv=(e,t)=>{let n=e;return t.split(Xm).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},I2=e=>e.isThemeGetter,$2=(e,t)=>t?e.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[t+a,l])):i);return[n,s]}):e,O2=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},kw="!",D2=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],i=t.length,a=l=>{const c=[];let u=0,f=0,m;for(let w=0;w<l.length;w++){let x=l[w];if(u===0){if(x===s&&(r||l.slice(w,w+i)===t)){c.push(l.slice(f,w)),f=w+i;continue}if(x==="/"){m=w;continue}}x==="["?u++:x==="]"&&u--}const h=c.length===0?l:l.substring(f),y=h.startsWith(kw),p=y?h.substring(1):h,g=m&&m>f?m-f:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:p,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:a}):a},B2=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},F2=e=>({cache:O2(e.cacheSize),parseClassName:D2(e),..._2(e)}),z2=/\s+/,V2=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,i=[],a=e.trim().split(z2);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:f,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:y}=n(u);let p=!!y,g=r(p?h.substring(0,y):h);if(!g){if(!p){l=u+(l.length>0?" "+l:l);continue}if(g=r(h),!g){l=u+(l.length>0?" "+l:l);continue}p=!1}const w=B2(f).join(":"),x=m?w+kw:w,v=x+g;if(i.includes(v))continue;i.push(v);const b=s(g,p);for(let S=0;S<b.length;++S){const N=b[S];i.push(x+N)}l=u+(l.length>0?" "+l:l)}return l};function q2(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=jw(t))&&(r&&(r+=" "),r+=n);return r}const jw=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=jw(e[r]))&&(n&&(n+=" "),n+=t);return n};function W2(e,...t){let n,r,s,i=a;function a(c){const u=t.reduce((f,m)=>m(f),e());return n=F2(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const f=V2(c,n);return s(c,f),f}return function(){return i(q2.apply(null,arguments))}}const wt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Cw=/^\[(?:([a-z-]+):)?(.+)\]$/i,U2=/^\d+\/\d+$/,H2=new Set(["px","full","screen"]),K2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,G2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Q2=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Y2=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,X2=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zr=e=>bi(e)||H2.has(e)||U2.test(e),ys=e=>Qi(e,"length",oE),bi=e=>!!e&&!Number.isNaN(Number(e)),Wd=e=>Qi(e,"number",bi),va=e=>!!e&&Number.isInteger(Number(e)),Z2=e=>e.endsWith("%")&&bi(e.slice(0,-1)),He=e=>Cw.test(e),ws=e=>K2.test(e),J2=new Set(["length","size","percentage"]),eE=e=>Qi(e,J2,Ew),tE=e=>Qi(e,"position",Ew),nE=new Set(["image","url"]),rE=e=>Qi(e,nE,aE),sE=e=>Qi(e,"",iE),xa=()=>!0,Qi=(e,t,n)=>{const r=Cw.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},oE=e=>G2.test(e)&&!Q2.test(e),Ew=()=>!1,iE=e=>Y2.test(e),aE=e=>X2.test(e),lE=()=>{const e=wt("colors"),t=wt("spacing"),n=wt("blur"),r=wt("brightness"),s=wt("borderColor"),i=wt("borderRadius"),a=wt("borderSpacing"),l=wt("borderWidth"),c=wt("contrast"),u=wt("grayscale"),f=wt("hueRotate"),m=wt("invert"),h=wt("gap"),y=wt("gradientColorStops"),p=wt("gradientColorStopPositions"),g=wt("inset"),w=wt("margin"),x=wt("opacity"),v=wt("padding"),b=wt("saturate"),S=wt("scale"),N=wt("sepia"),j=wt("skew"),k=wt("space"),C=wt("translate"),R=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",He,t],_=()=>[He,t],z=()=>["",Zr,ys],M=()=>["auto",bi,He],V=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],W=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],E=()=>["start","end","center","between","around","evenly","stretch"],A=()=>["","0",He],O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>[bi,He];return{cacheSize:500,separator:":",theme:{colors:[xa],spacing:[Zr,ys],blur:["none","",ws,He],brightness:K(),borderColor:[e],borderRadius:["none","","full",ws,He],borderSpacing:_(),borderWidth:z(),contrast:K(),grayscale:A(),hueRotate:K(),invert:A(),gap:_(),gradientColorStops:[e],gradientColorStopPositions:[Z2,ys],inset:F(),margin:F(),opacity:K(),padding:_(),saturate:K(),scale:K(),sepia:A(),skew:K(),space:_(),translate:_()},classGroups:{aspect:[{aspect:["auto","square","video",He]}],container:["container"],columns:[{columns:[ws]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...V(),He]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",va,He]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",He]}],grow:[{grow:A()}],shrink:[{shrink:A()}],order:[{order:["first","last","none",va,He]}],"grid-cols":[{"grid-cols":[xa]}],"col-start-end":[{col:["auto",{span:["full",va,He]},He]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[xa]}],"row-start-end":[{row:["auto",{span:[va,He]},He]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",He]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",He]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...E()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...E(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...E(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",He,t]}],"min-w":[{"min-w":[He,t,"min","max","fit"]}],"max-w":[{"max-w":[He,t,"none","full","min","max","fit","prose",{screen:[ws]},ws]}],h:[{h:[He,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[He,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[He,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[He,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ws,ys]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Wd]}],"font-family":[{font:[xa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",He]}],"line-clamp":[{"line-clamp":["none",bi,Wd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Zr,He]}],"list-image":[{"list-image":["none",He]}],"list-style-type":[{list:["none","disc","decimal",He]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Zr,ys]}],"underline-offset":[{"underline-offset":["auto",Zr,He]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",He]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",He]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...V(),tE]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",eE]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},rE]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...W(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:W()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...W()]}],"outline-offset":[{"outline-offset":[Zr,He]}],"outline-w":[{outline:[Zr,ys]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Zr,ys]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ws,sE]}],"shadow-color":[{shadow:[xa]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ws,He]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[m]}],saturate:[{saturate:[b]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",He]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",He]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",He]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[va,He]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",He]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",He]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",He]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Zr,ys,Wd]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},cE=W2(lE);function Ae(...e){return cE(iw(e))}const uE=r2,Pw=d.forwardRef(({className:e,...t},n)=>o.jsx(Jy,{ref:n,className:Ae("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:right-0 sm:flex-col md:max-w-[420px]",e),...t}));Pw.displayName=Jy.displayName;const dE=zu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Tw=d.forwardRef(({className:e,variant:t,...n},r)=>o.jsx(ew,{ref:r,className:Ae(dE({variant:t}),e),...n}));Tw.displayName=ew.displayName;const fE=d.forwardRef(({className:e,...t},n)=>o.jsx(rw,{ref:n,className:Ae("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));fE.displayName=rw.displayName;const Rw=d.forwardRef(({className:e,...t},n)=>o.jsx(sw,{ref:n,className:Ae("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:o.jsx(Po,{className:"h-4 w-4"})}));Rw.displayName=sw.displayName;const Mw=d.forwardRef(({className:e,...t},n)=>o.jsx(tw,{ref:n,className:Ae("text-sm font-semibold",e),...t}));Mw.displayName=tw.displayName;const _w=d.forwardRef(({className:e,...t},n)=>o.jsx(nw,{ref:n,className:Ae("text-sm opacity-90",e),...t}));_w.displayName=nw.displayName;function hE(){const{toasts:e}=vl();return o.jsxs(uE,{children:[e.map(function({id:t,title:n,description:r,action:s,...i}){return o.jsxs(Tw,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(Mw,{children:n}),r&&o.jsx(_w,{children:r})]}),s,o.jsx(Rw,{})]},t)}),o.jsx(Pw,{})]})}var mE=R0[" useId ".trim().toString()]||(()=>{}),pE=0;function Vs(e){const[t,n]=d.useState(mE());return an(()=>{e||n(r=>r??String(pE++))},[e]),e||(t?`radix-${t}`:"")}const gE=["top","right","bottom","left"],Hs=Math.min,Xn=Math.max,ou=Math.round,ec=Math.floor,Ur=e=>({x:e,y:e}),vE={left:"right",right:"left",bottom:"top",top:"bottom"},xE={start:"end",end:"start"};function yh(e,t,n){return Xn(e,Hs(t,n))}function ds(e,t){return typeof e=="function"?e(t):e}function fs(e){return e.split("-")[0]}function Yi(e){return e.split("-")[1]}function Zm(e){return e==="x"?"y":"x"}function Jm(e){return e==="y"?"height":"width"}function Ks(e){return["top","bottom"].includes(fs(e))?"y":"x"}function ep(e){return Zm(Ks(e))}function yE(e,t,n){n===void 0&&(n=!1);const r=Yi(e),s=ep(e),i=Jm(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=iu(a)),[a,iu(a)]}function wE(e){const t=iu(e);return[wh(e),t,wh(t)]}function wh(e){return e.replace(/start|end/g,t=>xE[t])}function bE(e,t,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?i:a;default:return[]}}function SE(e,t,n,r){const s=Yi(e);let i=bE(fs(e),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),t&&(i=i.concat(i.map(wh)))),i}function iu(e){return e.replace(/left|right|bottom|top/g,t=>vE[t])}function NE(e){return{top:0,right:0,bottom:0,left:0,...e}}function Aw(e){return typeof e!="number"?NE(e):{top:e,right:e,bottom:e,left:e}}function au(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function vv(e,t,n){let{reference:r,floating:s}=e;const i=Ks(t),a=ep(t),l=Jm(a),c=fs(t),u=i==="y",f=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,h=r[l]/2-s[l]/2;let y;switch(c){case"top":y={x:f,y:r.y-s.height};break;case"bottom":y={x:f,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:m};break;case"left":y={x:r.x-s.width,y:m};break;default:y={x:r.x,y:r.y}}switch(Yi(t)){case"start":y[a]-=h*(n&&u?-1:1);break;case"end":y[a]+=h*(n&&u?-1:1);break}return y}const kE=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:m}=vv(u,r,c),h=r,y={},p=0;for(let g=0;g<l.length;g++){const{name:w,fn:x}=l[g],{x:v,y:b,data:S,reset:N}=await x({x:f,y:m,initialPlacement:r,placement:h,strategy:s,middlewareData:y,rects:u,platform:a,elements:{reference:e,floating:t}});f=v??f,m=b??m,y={...y,[w]:{...y[w],...S}},N&&p<=50&&(p++,typeof N=="object"&&(N.placement&&(h=N.placement),N.rects&&(u=N.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):N.rects),{x:f,y:m}=vv(u,h,c)),g=-1)}return{x:f,y:m,placement:h,strategy:s,middlewareData:y}};async function ol(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:h=!1,padding:y=0}=ds(t,e),p=Aw(y),w=l[h?m==="floating"?"reference":"floating":m],x=au(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),v=m==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),S=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},N=au(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:b,strategy:c}):v);return{top:(x.top-N.top+p.top)/S.y,bottom:(N.bottom-x.bottom+p.bottom)/S.y,left:(x.left-N.left+p.left)/S.x,right:(N.right-x.right+p.right)/S.x}}const jE=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:f=0}=ds(e,t)||{};if(u==null)return{};const m=Aw(f),h={x:n,y:r},y=ep(s),p=Jm(y),g=await a.getDimensions(u),w=y==="y",x=w?"top":"left",v=w?"bottom":"right",b=w?"clientHeight":"clientWidth",S=i.reference[p]+i.reference[y]-h[y]-i.floating[p],N=h[y]-i.reference[y],j=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let k=j?j[b]:0;(!k||!await(a.isElement==null?void 0:a.isElement(j)))&&(k=l.floating[b]||i.floating[p]);const C=S/2-N/2,R=k/2-g[p]/2-1,T=Hs(m[x],R),F=Hs(m[v],R),_=T,z=k-g[p]-F,M=k/2-g[p]/2+C,V=yh(_,M,z),W=!c.arrow&&Yi(s)!=null&&M!==V&&i.reference[p]/2-(M<_?T:F)-g[p]/2<0,q=W?M<_?M-_:M-z:0;return{[y]:h[y]+q,data:{[y]:V,centerOffset:M-V-q,...W&&{alignmentOffset:q}},reset:W}}}),CE=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...w}=ds(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=fs(s),v=Ks(l),b=fs(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(u.floating)),N=h||(b||!g?[iu(l)]:wE(l)),j=p!=="none";!h&&j&&N.push(...SE(l,g,p,S));const k=[l,...N],C=await ol(t,w),R=[];let T=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&R.push(C[x]),m){const M=yE(s,a,S);R.push(C[M[0]],C[M[1]])}if(T=[...T,{placement:s,overflows:R}],!R.every(M=>M<=0)){var F,_;const M=(((F=i.flip)==null?void 0:F.index)||0)+1,V=k[M];if(V)return{data:{index:M,overflows:T},reset:{placement:V}};let W=(_=T.filter(q=>q.overflows[0]<=0).sort((q,E)=>q.overflows[1]-E.overflows[1])[0])==null?void 0:_.placement;if(!W)switch(y){case"bestFit":{var z;const q=(z=T.filter(E=>{if(j){const A=Ks(E.placement);return A===v||A==="y"}return!0}).map(E=>[E.placement,E.overflows.filter(A=>A>0).reduce((A,O)=>A+O,0)]).sort((E,A)=>E[1]-A[1])[0])==null?void 0:z[0];q&&(W=q);break}case"initialPlacement":W=l;break}if(s!==W)return{reset:{placement:W}}}return{}}}};function xv(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function yv(e){return gE.some(t=>e[t]>=0)}const EE=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=ds(e,t);switch(r){case"referenceHidden":{const i=await ol(t,{...s,elementContext:"reference"}),a=xv(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:yv(a)}}}case"escaped":{const i=await ol(t,{...s,altBoundary:!0}),a=xv(i,n.floating);return{data:{escapedOffsets:a,escaped:yv(a)}}}default:return{}}}}};async function PE(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=fs(n),l=Yi(n),c=Ks(n)==="y",u=["left","top"].includes(a)?-1:1,f=i&&c?-1:1,m=ds(t,e);let{mainAxis:h,crossAxis:y,alignmentAxis:p}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof p=="number"&&(y=l==="end"?p*-1:p),c?{x:y*f,y:h*u}:{x:h*u,y:y*f}}const TE=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=t,c=await PE(t,e);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},RE=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:w=>{let{x,y:v}=w;return{x,y:v}}},...c}=ds(e,t),u={x:n,y:r},f=await ol(t,c),m=Ks(fs(s)),h=Zm(m);let y=u[h],p=u[m];if(i){const w=h==="y"?"top":"left",x=h==="y"?"bottom":"right",v=y+f[w],b=y-f[x];y=yh(v,y,b)}if(a){const w=m==="y"?"top":"left",x=m==="y"?"bottom":"right",v=p+f[w],b=p-f[x];p=yh(v,p,b)}const g=l.fn({...t,[h]:y,[m]:p});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[h]:i,[m]:a}}}}}},ME=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ds(e,t),f={x:n,y:r},m=Ks(s),h=Zm(m);let y=f[h],p=f[m];const g=ds(l,t),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=h==="y"?"height":"width",S=i.reference[h]-i.floating[b]+w.mainAxis,N=i.reference[h]+i.reference[b]-w.mainAxis;y<S?y=S:y>N&&(y=N)}if(u){var x,v;const b=h==="y"?"width":"height",S=["top","left"].includes(fs(s)),N=i.reference[m]-i.floating[b]+(S&&((x=a.offset)==null?void 0:x[m])||0)+(S?0:w.crossAxis),j=i.reference[m]+i.reference[b]+(S?0:((v=a.offset)==null?void 0:v[m])||0)-(S?w.crossAxis:0);p<N?p=N:p>j&&(p=j)}return{[h]:y,[m]:p}}}},_E=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:i,platform:a,elements:l}=t,{apply:c=()=>{},...u}=ds(e,t),f=await ol(t,u),m=fs(s),h=Yi(s),y=Ks(s)==="y",{width:p,height:g}=i.floating;let w,x;m==="top"||m==="bottom"?(w=m,x=h===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(x=m,w=h==="end"?"top":"bottom");const v=g-f.top-f.bottom,b=p-f.left-f.right,S=Hs(g-f[w],v),N=Hs(p-f[x],b),j=!t.middlewareData.shift;let k=S,C=N;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(C=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(k=v),j&&!h){const T=Xn(f.left,0),F=Xn(f.right,0),_=Xn(f.top,0),z=Xn(f.bottom,0);y?C=p-2*(T!==0||F!==0?T+F:Xn(f.left,f.right)):k=g-2*(_!==0||z!==0?_+z:Xn(f.top,f.bottom))}await c({...t,availableWidth:C,availableHeight:k});const R=await a.getDimensions(l.floating);return p!==R.width||g!==R.height?{reset:{rects:!0}}:{}}}};function Ku(){return typeof window<"u"}function Xi(e){return Lw(e)?(e.nodeName||"").toLowerCase():"#document"}function tr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Gr(e){var t;return(t=(Lw(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Lw(e){return Ku()?e instanceof Node||e instanceof tr(e).Node:!1}function jr(e){return Ku()?e instanceof Element||e instanceof tr(e).Element:!1}function Hr(e){return Ku()?e instanceof HTMLElement||e instanceof tr(e).HTMLElement:!1}function wv(e){return!Ku()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof tr(e).ShadowRoot}function bl(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Cr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function AE(e){return["table","td","th"].includes(Xi(e))}function Gu(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function tp(e){const t=np(),n=jr(e)?Cr(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function LE(e){let t=Gs(e);for(;Hr(t)&&!Ii(t);){if(tp(t))return t;if(Gu(t))return null;t=Gs(t)}return null}function np(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ii(e){return["html","body","#document"].includes(Xi(e))}function Cr(e){return tr(e).getComputedStyle(e)}function Qu(e){return jr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Gs(e){if(Xi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||wv(e)&&e.host||Gr(e);return wv(t)?t.host:t}function Iw(e){const t=Gs(e);return Ii(t)?e.ownerDocument?e.ownerDocument.body:e.body:Hr(t)&&bl(t)?t:Iw(t)}function il(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=Iw(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),a=tr(s);if(i){const l=bh(a);return t.concat(a,a.visualViewport||[],bl(s)?s:[],l&&n?il(l):[])}return t.concat(s,il(s,[],n))}function bh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function $w(e){const t=Cr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Hr(e),i=s?e.offsetWidth:n,a=s?e.offsetHeight:r,l=ou(n)!==i||ou(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function rp(e){return jr(e)?e:e.contextElement}function Si(e){const t=rp(e);if(!Hr(t))return Ur(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=$w(t);let a=(i?ou(n.width):n.width)/r,l=(i?ou(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const IE=Ur(0);function Ow(e){const t=tr(e);return!np()||!t.visualViewport?IE:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function $E(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==tr(e)?!1:t}function To(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=rp(e);let a=Ur(1);t&&(r?jr(r)&&(a=Si(r)):a=Si(e));const l=$E(i,n,r)?Ow(i):Ur(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,f=s.width/a.x,m=s.height/a.y;if(i){const h=tr(i),y=r&&jr(r)?tr(r):r;let p=h,g=bh(p);for(;g&&r&&y!==p;){const w=Si(g),x=g.getBoundingClientRect(),v=Cr(g),b=x.left+(g.clientLeft+parseFloat(v.paddingLeft))*w.x,S=x.top+(g.clientTop+parseFloat(v.paddingTop))*w.y;c*=w.x,u*=w.y,f*=w.x,m*=w.y,c+=b,u+=S,p=tr(g),g=bh(p)}}return au({width:f,height:m,x:c,y:u})}function sp(e,t){const n=Qu(e).scrollLeft;return t?t.left+n:To(Gr(e)).left+n}function Dw(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:sp(e,r)),i=r.top+t.scrollTop;return{x:s,y:i}}function OE(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",a=Gr(r),l=t?Gu(t.floating):!1;if(r===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Ur(1);const f=Ur(0),m=Hr(r);if((m||!m&&!i)&&((Xi(r)!=="body"||bl(a))&&(c=Qu(r)),Hr(r))){const y=To(r);u=Si(r),f.x=y.x+r.clientLeft,f.y=y.y+r.clientTop}const h=a&&!m&&!i?Dw(a,c,!0):Ur(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x+h.x,y:n.y*u.y-c.scrollTop*u.y+f.y+h.y}}function DE(e){return Array.from(e.getClientRects())}function BE(e){const t=Gr(e),n=Qu(e),r=e.ownerDocument.body,s=Xn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Xn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+sp(e);const l=-n.scrollTop;return Cr(r).direction==="rtl"&&(a+=Xn(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}function FE(e,t){const n=tr(e),r=Gr(e),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const u=np();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l,y:c}}function zE(e,t){const n=To(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=Hr(e)?Si(e):Ur(1),a=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:a,height:l,x:c,y:u}}function bv(e,t,n){let r;if(t==="viewport")r=FE(e,n);else if(t==="document")r=BE(Gr(e));else if(jr(t))r=zE(t,n);else{const s=Ow(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return au(r)}function Bw(e,t){const n=Gs(e);return n===t||!jr(n)||Ii(n)?!1:Cr(n).position==="fixed"||Bw(n,t)}function VE(e,t){const n=t.get(e);if(n)return n;let r=il(e,[],!1).filter(l=>jr(l)&&Xi(l)!=="body"),s=null;const i=Cr(e).position==="fixed";let a=i?Gs(e):e;for(;jr(a)&&!Ii(a);){const l=Cr(a),c=tp(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||bl(a)&&!c&&Bw(e,a))?r=r.filter(f=>f!==a):s=l,a=Gs(a)}return t.set(e,r),r}function qE(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const a=[...n==="clippingAncestors"?Gu(t)?[]:VE(t,this._c):[].concat(n),r],l=a[0],c=a.reduce((u,f)=>{const m=bv(t,f,s);return u.top=Xn(m.top,u.top),u.right=Hs(m.right,u.right),u.bottom=Hs(m.bottom,u.bottom),u.left=Xn(m.left,u.left),u},bv(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function WE(e){const{width:t,height:n}=$w(e);return{width:t,height:n}}function UE(e,t,n){const r=Hr(t),s=Gr(t),i=n==="fixed",a=To(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Ur(0);if(r||!r&&!i)if((Xi(t)!=="body"||bl(s))&&(l=Qu(t)),r){const h=To(t,!0,i,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else s&&(c.x=sp(s));const u=s&&!r&&!i?Dw(s,l):Ur(0),f=a.left+l.scrollLeft-c.x-u.x,m=a.top+l.scrollTop-c.y-u.y;return{x:f,y:m,width:a.width,height:a.height}}function Ud(e){return Cr(e).position==="static"}function Sv(e,t){if(!Hr(e)||Cr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Gr(e)===n&&(n=n.ownerDocument.body),n}function Fw(e,t){const n=tr(e);if(Gu(e))return n;if(!Hr(e)){let s=Gs(e);for(;s&&!Ii(s);){if(jr(s)&&!Ud(s))return s;s=Gs(s)}return n}let r=Sv(e,t);for(;r&&AE(r)&&Ud(r);)r=Sv(r,t);return r&&Ii(r)&&Ud(r)&&!tp(r)?n:r||LE(e)||n}const HE=async function(e){const t=this.getOffsetParent||Fw,n=this.getDimensions,r=await n(e.floating);return{reference:UE(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function KE(e){return Cr(e).direction==="rtl"}const GE={convertOffsetParentRelativeRectToViewportRelativeRect:OE,getDocumentElement:Gr,getClippingRect:qE,getOffsetParent:Fw,getElementRects:HE,getClientRects:DE,getDimensions:WE,getScale:Si,isElement:jr,isRTL:KE};function zw(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function QE(e,t){let n=null,r;const s=Gr(e);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:f,top:m,width:h,height:y}=u;if(l||t(),!h||!y)return;const p=ec(m),g=ec(s.clientWidth-(f+h)),w=ec(s.clientHeight-(m+y)),x=ec(f),b={rootMargin:-p+"px "+-g+"px "+-w+"px "+-x+"px",threshold:Xn(0,Hs(1,c))||1};let S=!0;function N(j){const k=j[0].intersectionRatio;if(k!==c){if(!S)return a();k?a(!1,k):r=setTimeout(()=>{a(!1,1e-7)},1e3)}k===1&&!zw(u,e.getBoundingClientRect())&&a(),S=!1}try{n=new IntersectionObserver(N,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(N,b)}n.observe(e)}return a(!0),i}function YE(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=rp(e),f=s||i?[...u?il(u):[],...il(t)]:[];f.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const m=u&&l?QE(u,n):null;let h=-1,y=null;a&&(y=new ResizeObserver(x=>{let[v]=x;v&&v.target===u&&y&&(y.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=y)==null||b.observe(t)})),n()}),u&&!c&&y.observe(u),y.observe(t));let p,g=c?To(e):null;c&&w();function w(){const x=To(e);g&&!zw(g,x)&&n(),g=x,p=requestAnimationFrame(w)}return n(),()=>{var x;f.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),m==null||m(),(x=y)==null||x.disconnect(),y=null,c&&cancelAnimationFrame(p)}}const XE=TE,ZE=RE,JE=CE,eP=_E,tP=EE,Nv=jE,nP=ME,rP=(e,t,n)=>{const r=new Map,s={platform:GE,...n},i={...s.platform,_c:r};return kE(e,t,{...s,platform:i})};var Pc=typeof document<"u"?d.useLayoutEffect:d.useEffect;function lu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!lu(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!lu(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function Vw(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function kv(e,t){const n=Vw(e);return Math.round(t*n)/n}function Hd(e){const t=d.useRef(e);return Pc(()=>{t.current=e}),t}function sP(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[f,m]=d.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,y]=d.useState(r);lu(h,r)||y(r);const[p,g]=d.useState(null),[w,x]=d.useState(null),v=d.useCallback(E=>{E!==j.current&&(j.current=E,g(E))},[]),b=d.useCallback(E=>{E!==k.current&&(k.current=E,x(E))},[]),S=i||p,N=a||w,j=d.useRef(null),k=d.useRef(null),C=d.useRef(f),R=c!=null,T=Hd(c),F=Hd(s),_=Hd(u),z=d.useCallback(()=>{if(!j.current||!k.current)return;const E={placement:t,strategy:n,middleware:h};F.current&&(E.platform=F.current),rP(j.current,k.current,E).then(A=>{const O={...A,isPositioned:_.current!==!1};M.current&&!lu(C.current,O)&&(C.current=O,Do.flushSync(()=>{m(O)}))})},[h,t,n,F,_]);Pc(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,m(E=>({...E,isPositioned:!1})))},[u]);const M=d.useRef(!1);Pc(()=>(M.current=!0,()=>{M.current=!1}),[]),Pc(()=>{if(S&&(j.current=S),N&&(k.current=N),S&&N){if(T.current)return T.current(S,N,z);z()}},[S,N,z,T,R]);const V=d.useMemo(()=>({reference:j,floating:k,setReference:v,setFloating:b}),[v,b]),W=d.useMemo(()=>({reference:S,floating:N}),[S,N]),q=d.useMemo(()=>{const E={position:n,left:0,top:0};if(!W.floating)return E;const A=kv(W.floating,f.x),O=kv(W.floating,f.y);return l?{...E,transform:"translate("+A+"px, "+O+"px)",...Vw(W.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:A,top:O}},[n,l,W.floating,f.x,f.y]);return d.useMemo(()=>({...f,update:z,refs:V,elements:W,floatingStyles:q}),[f,z,V,W,q])}const oP=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Nv({element:r.current,padding:s}).fn(n):{}:r?Nv({element:r,padding:s}).fn(n):{}}}},iP=(e,t)=>({...XE(e),options:[e,t]}),aP=(e,t)=>({...ZE(e),options:[e,t]}),lP=(e,t)=>({...nP(e),options:[e,t]}),cP=(e,t)=>({...JE(e),options:[e,t]}),uP=(e,t)=>({...eP(e),options:[e,t]}),dP=(e,t)=>({...tP(e),options:[e,t]}),fP=(e,t)=>({...oP(e),options:[e,t]});var hP="Arrow",qw=d.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...i}=e;return o.jsx(Re.svg,{...i,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});qw.displayName=hP;var mP=qw;function op(e){const[t,n]=d.useState(void 0);return an(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;n({width:a,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var ip="Popper",[Ww,Yu]=Un(ip),[pP,Uw]=Ww(ip),Hw=e=>{const{__scopePopper:t,children:n}=e,[r,s]=d.useState(null);return o.jsx(pP,{scope:t,anchor:r,onAnchorChange:s,children:n})};Hw.displayName=ip;var Kw="PopperAnchor",Gw=d.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,i=Uw(Kw,n),a=d.useRef(null),l=Ve(t,a);return d.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:o.jsx(Re.div,{...s,ref:l})});Gw.displayName=Kw;var ap="PopperContent",[gP,vP]=Ww(ap),Qw=d.forwardRef((e,t)=>{var B,Q,G,se,ce,Se;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:h=!1,updatePositionStrategy:y="optimized",onPlaced:p,...g}=e,w=Uw(ap,n),[x,v]=d.useState(null),b=Ve(t,qe=>v(qe)),[S,N]=d.useState(null),j=op(S),k=(j==null?void 0:j.width)??0,C=(j==null?void 0:j.height)??0,R=r+(i!=="center"?"-"+i:""),T=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},F=Array.isArray(u)?u:[u],_=F.length>0,z={padding:T,boundary:F.filter(yP),altBoundary:_},{refs:M,floatingStyles:V,placement:W,isPositioned:q,middlewareData:E}=sP({strategy:"fixed",placement:R,whileElementsMounted:(...qe)=>YE(...qe,{animationFrame:y==="always"}),elements:{reference:w.anchor},middleware:[iP({mainAxis:s+C,alignmentAxis:a}),c&&aP({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?lP():void 0,...z}),c&&cP({...z}),uP({...z,apply:({elements:qe,rects:Fe,availableWidth:Le,availableHeight:Je})=>{const{width:Ke,height:dt}=Fe.reference,tt=qe.floating.style;tt.setProperty("--radix-popper-available-width",`${Le}px`),tt.setProperty("--radix-popper-available-height",`${Je}px`),tt.setProperty("--radix-popper-anchor-width",`${Ke}px`),tt.setProperty("--radix-popper-anchor-height",`${dt}px`)}}),S&&fP({element:S,padding:l}),wP({arrowWidth:k,arrowHeight:C}),h&&dP({strategy:"referenceHidden",...z})]}),[A,O]=Zw(W),K=Bt(p);an(()=>{q&&(K==null||K())},[q,K]);const ae=(B=E.arrow)==null?void 0:B.x,he=(Q=E.arrow)==null?void 0:Q.y,ve=((G=E.arrow)==null?void 0:G.centerOffset)!==0,[te,I]=d.useState();return an(()=>{x&&I(window.getComputedStyle(x).zIndex)},[x]),o.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:q?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[(se=E.transformOrigin)==null?void 0:se.x,(ce=E.transformOrigin)==null?void 0:ce.y].join(" "),...((Se=E.hide)==null?void 0:Se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(gP,{scope:n,placedSide:A,onArrowChange:N,arrowX:ae,arrowY:he,shouldHideArrow:ve,children:o.jsx(Re.div,{"data-side":A,"data-align":O,...g,ref:b,style:{...g.style,animation:q?void 0:"none"}})})})});Qw.displayName=ap;var Yw="PopperArrow",xP={top:"bottom",right:"left",bottom:"top",left:"right"},Xw=d.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,i=vP(Yw,r),a=xP[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(mP,{...s,ref:n,style:{...s.style,display:"block"}})})});Xw.displayName=Yw;function yP(e){return e!==null}var wP=e=>({name:"transformOrigin",options:e,fn(t){var w,x,v;const{placement:n,rects:r,middlewareData:s}=t,a=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,f]=Zw(n),m={start:"0%",center:"50%",end:"100%"}[f],h=(((x=s.arrow)==null?void 0:x.x)??0)+l/2,y=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let p="",g="";return u==="bottom"?(p=a?m:`${h}px`,g=`${-c}px`):u==="top"?(p=a?m:`${h}px`,g=`${r.floating.height+c}px`):u==="right"?(p=`${-c}px`,g=a?m:`${y}px`):u==="left"&&(p=`${r.floating.width+c}px`,g=a?m:`${y}px`),{data:{x:p,y:g}}}});function Zw(e){const[t,n="center"]=e.split("-");return[t,n]}var bP=Hw,Jw=Gw,e1=Qw,t1=Xw,[Xu,r3]=Un("Tooltip",[Yu]),lp=Yu(),n1="TooltipProvider",SP=700,jv="tooltip.open",[NP,r1]=Xu(n1),s1=e=>{const{__scopeTooltip:t,delayDuration:n=SP,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=e,a=d.useRef(!0),l=d.useRef(!1),c=d.useRef(0);return d.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),o.jsx(NP,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:d.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:d.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:d.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};s1.displayName=n1;var o1="Tooltip",[s3,Zu]=Xu(o1),Sh="TooltipTrigger",kP=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Zu(Sh,n),i=r1(Sh,n),a=lp(n),l=d.useRef(null),c=Ve(t,l,s.onTriggerChange),u=d.useRef(!1),f=d.useRef(!1),m=d.useCallback(()=>u.current=!1,[]);return d.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),o.jsx(Jw,{asChild:!0,...a,children:o.jsx(Re.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:be(e.onPointerMove,h=>{h.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:be(e.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:be(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:be(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:be(e.onBlur,s.onClose),onClick:be(e.onClick,s.onClose)})})});kP.displayName=Sh;var jP="TooltipPortal",[o3,CP]=Xu(jP,{forceMount:void 0}),$i="TooltipContent",i1=d.forwardRef((e,t)=>{const n=CP($i,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=e,a=Zu($i,e.__scopeTooltip);return o.jsx(Lr,{present:r||a.open,children:a.disableHoverableContent?o.jsx(a1,{side:s,...i,ref:t}):o.jsx(EP,{side:s,...i,ref:t})})}),EP=d.forwardRef((e,t)=>{const n=Zu($i,e.__scopeTooltip),r=r1($i,e.__scopeTooltip),s=d.useRef(null),i=Ve(t,s),[a,l]=d.useState(null),{trigger:c,onClose:u}=n,f=s.current,{onPointerInTransitChange:m}=r,h=d.useCallback(()=>{l(null),m(!1)},[m]),y=d.useCallback((p,g)=>{const w=p.currentTarget,x={x:p.clientX,y:p.clientY},v=_P(x,w.getBoundingClientRect()),b=AP(x,v),S=LP(g.getBoundingClientRect()),N=$P([...b,...S]);l(N),m(!0)},[m]);return d.useEffect(()=>()=>h(),[h]),d.useEffect(()=>{if(c&&f){const p=w=>y(w,f),g=w=>y(w,c);return c.addEventListener("pointerleave",p),f.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",p),f.removeEventListener("pointerleave",g)}}},[c,f,y,h]),d.useEffect(()=>{if(a){const p=g=>{const w=g.target,x={x:g.clientX,y:g.clientY},v=(c==null?void 0:c.contains(w))||(f==null?void 0:f.contains(w)),b=!IP(x,a);v?h():b&&(h(),u())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[c,f,a,u,h]),o.jsx(a1,{...e,ref:i})}),[PP,TP]=Xu(o1,{isInside:!1}),RP=Iy("TooltipContent"),a1=d.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=e,c=Zu($i,n),u=lp(n),{onClose:f}=c;return d.useEffect(()=>(document.addEventListener(jv,f),()=>document.removeEventListener(jv,f)),[f]),d.useEffect(()=>{if(c.trigger){const m=h=>{const y=h.target;y!=null&&y.contains(c.trigger)&&f()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,f]),o.jsx(xl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:m=>m.preventDefault(),onDismiss:f,children:o.jsxs(e1,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(RP,{children:r}),o.jsx(PP,{scope:n,isInside:!0,children:o.jsx(BC,{id:c.contentId,role:"tooltip",children:s||r})})]})})});i1.displayName=$i;var l1="TooltipArrow",MP=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=lp(n);return TP(l1,n).isInside?null:o.jsx(t1,{...s,...r,ref:t})});MP.displayName=l1;function _P(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function AP(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function LP(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function IP(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const l=t[i].x,c=t[i].y,u=t[a].x,f=t[a].y;c>r!=f>r&&n<(u-l)*(r-c)/(f-c)+l&&(s=!s)}return s}function $P(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),OP(t)}function OP(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const i=t[t.length-1],a=t[t.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const i=n[n.length-1],a=n[n.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var DP=s1,c1=i1;const BP=DP,FP=d.forwardRef(({className:e,sideOffset:t=4,...n},r)=>o.jsx(c1,{ref:r,sideOffset:t,className:Ae("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));FP.displayName=c1.displayName;const zP={theme:"dark",setTheme:()=>null},u1=d.createContext(zP);function VP({children:e,defaultTheme:t="dark",storageKey:n="simul-chess-theme",...r}){const[s,i]=d.useState(()=>typeof window>"u"?t:localStorage.getItem(n)||t);d.useEffect(()=>{const l=window.document.documentElement;l.classList.remove("light","dark"),l.classList.add(s)},[s]);const a={theme:s,setTheme:l=>{localStorage.setItem(n,l),i(l)}};return o.jsx(u1.Provider,{...r,value:a,children:e})}const qP=()=>{const e=d.useContext(u1);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},cp=zu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Y=d.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},i)=>{const a=r?xC:"button";return o.jsx(a,{className:Ae(cp({variant:t,size:n,className:e})),ref:i,...s})});Y.displayName="Button";function WP(){const{theme:e,setTheme:t}=qP();return o.jsxs(Y,{variant:"ghost",size:"icon",onClick:()=>t(e==="light"?"dark":"light"),"data-testid":"button-theme-toggle",children:[o.jsx(R2,{className:"h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),o.jsx(gw,{className:"absolute h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),o.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function up(e){const t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var dp="Switch",[UP,i3]=Un(dp),[HP,KP]=UP(dp),d1=d.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:u,form:f,...m}=e,[h,y]=d.useState(null),p=Ve(t,b=>y(b)),g=d.useRef(!1),w=h?f||!!h.closest("form"):!0,[x=!1,v]=Eo({prop:s,defaultProp:i,onChange:u});return o.jsxs(HP,{scope:n,checked:x,disabled:l,children:[o.jsx(Re.button,{type:"button",role:"switch","aria-checked":x,"aria-required":a,"data-state":m1(x),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:p,onClick:be(e.onClick,b=>{v(S=>!S),w&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})}),w&&o.jsx(GP,{control:h,bubbles:!g.current,name:r,value:c,checked:x,required:a,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});d1.displayName=dp;var f1="SwitchThumb",h1=d.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=KP(f1,n);return o.jsx(Re.span,{"data-state":m1(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});h1.displayName=f1;var GP=e=>{const{control:t,checked:n,bubbles:r=!0,...s}=e,i=d.useRef(null),a=up(n),l=op(t);return d.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==n&&m){const h=new Event("click",{bubbles:r});m.call(c,n),c.dispatchEvent(h)}},[a,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function m1(e){return e?"checked":"unchecked"}var p1=d1,QP=h1;const Fn=d.forwardRef(({className:e,...t},n)=>o.jsx(p1,{className:Ae("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:o.jsx(QP,{className:Ae("pointer-events-none block h-5 w-5 rounded-full bg-stone-300 dark:bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Fn.displayName=p1.displayName;var YP="Label",g1=d.forwardRef((e,t)=>o.jsx(Re.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));g1.displayName=YP;var v1=g1;const XP=zu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Xt=d.forwardRef(({className:e,...t},n)=>o.jsx(v1,{ref:n,className:Ae(XP(),e),...t}));Xt.displayName=v1.displayName;var Kd="focusScope.autoFocusOnMount",Gd="focusScope.autoFocusOnUnmount",Cv={bubbles:!1,cancelable:!0},ZP="FocusScope",fp=d.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=e,[l,c]=d.useState(null),u=Bt(s),f=Bt(i),m=d.useRef(null),h=Ve(t,g=>c(g)),y=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(r){let g=function(b){if(y.paused||!l)return;const S=b.target;l.contains(S)?m.current=S:ks(m.current,{select:!0})},w=function(b){if(y.paused||!l)return;const S=b.relatedTarget;S!==null&&(l.contains(S)||ks(m.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const N of b)N.removedNodes.length>0&&ks(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const v=new MutationObserver(x);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),v.disconnect()}}},[r,l,y.paused]),d.useEffect(()=>{if(l){Pv.add(y);const g=document.activeElement;if(!l.contains(g)){const x=new CustomEvent(Kd,Cv);l.addEventListener(Kd,u),l.dispatchEvent(x),x.defaultPrevented||(JP(sT(x1(l)),{select:!0}),document.activeElement===g&&ks(l))}return()=>{l.removeEventListener(Kd,u),setTimeout(()=>{const x=new CustomEvent(Gd,Cv);l.addEventListener(Gd,f),l.dispatchEvent(x),x.defaultPrevented||ks(g??document.body,{select:!0}),l.removeEventListener(Gd,f),Pv.remove(y)},0)}}},[l,u,f,y]);const p=d.useCallback(g=>{if(!n&&!r||y.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(w&&x){const v=g.currentTarget,[b,S]=eT(v);b&&S?!g.shiftKey&&x===S?(g.preventDefault(),n&&ks(b,{select:!0})):g.shiftKey&&x===b&&(g.preventDefault(),n&&ks(S,{select:!0})):x===v&&g.preventDefault()}},[n,r,y.paused]);return o.jsx(Re.div,{tabIndex:-1,...a,ref:h,onKeyDown:p})});fp.displayName=ZP;function JP(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ks(r,{select:t}),document.activeElement!==n)return}function eT(e){const t=x1(e),n=Ev(t,e),r=Ev(t.reverse(),e);return[n,r]}function x1(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Ev(e,t){for(const n of e)if(!tT(n,{upTo:t}))return n}function tT(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function nT(e){return e instanceof HTMLInputElement&&"select"in e}function ks(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&nT(e)&&t&&e.select()}}var Pv=rT();function rT(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Tv(e,t),e.unshift(t)},remove(t){var n;e=Tv(e,t),(n=e[0])==null||n.resume()}}}function Tv(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function sT(e){return e.filter(t=>t.tagName!=="A")}var Qd=0;function y1(){d.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Rv()),document.body.insertAdjacentElement("beforeend",e[1]??Rv()),Qd++,()=>{Qd===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Qd--}},[])}function Rv(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var zr=function(){return zr=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},zr.apply(this,arguments)};function w1(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function oT(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Tc="right-scroll-bar-position",Rc="width-before-scroll-bar",iT="with-scroll-bars-hidden",aT="--removed-body-scroll-bar-size";function Yd(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function lT(e,t){var n=d.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var cT=typeof window<"u"?d.useLayoutEffect:d.useEffect,Mv=new WeakMap;function uT(e,t){var n=lT(null,function(r){return e.forEach(function(s){return Yd(s,r)})});return cT(function(){var r=Mv.get(n);if(r){var s=new Set(r),i=new Set(e),a=n.current;s.forEach(function(l){i.has(l)||Yd(l,null)}),i.forEach(function(l){s.has(l)||Yd(l,a)})}Mv.set(n,e)},[e]),n}function dT(e){return e}function fT(e,t){t===void 0&&(t=dT);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var a=t(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var f=a;a=[],f.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(f){a.push(f),u()},filter:function(f){return a=a.filter(f),n}}}};return s}function hT(e){e===void 0&&(e={});var t=fT(null);return t.options=zr({async:!0,ssr:!1},e),t}var b1=function(e){var t=e.sideCar,n=w1(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return d.createElement(r,zr({},n))};b1.isSideCarExport=!0;function mT(e,t){return e.useMedium(t),b1}var S1=hT(),Xd=function(){},Ju=d.forwardRef(function(e,t){var n=d.useRef(null),r=d.useState({onScrollCapture:Xd,onWheelCapture:Xd,onTouchMoveCapture:Xd}),s=r[0],i=r[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,m=e.shards,h=e.sideCar,y=e.noIsolation,p=e.inert,g=e.allowPinchZoom,w=e.as,x=w===void 0?"div":w,v=e.gapMode,b=w1(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,N=uT([n,t]),j=zr(zr({},b),s);return d.createElement(d.Fragment,null,f&&d.createElement(S,{sideCar:S1,removeScrollBar:u,shards:m,noIsolation:y,inert:p,setCallbacks:i,allowPinchZoom:!!g,lockRef:n,gapMode:v}),a?d.cloneElement(d.Children.only(l),zr(zr({},j),{ref:N})):d.createElement(x,zr({},j,{className:c,ref:N}),l))});Ju.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ju.classNames={fullWidth:Rc,zeroRight:Tc};var pT=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function gT(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=pT();return t&&e.setAttribute("nonce",t),e}function vT(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function xT(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var yT=function(){var e=0,t=null;return{add:function(n){e==0&&(t=gT())&&(vT(t,n),xT(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},wT=function(){var e=yT();return function(t,n){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},N1=function(){var e=wT(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},bT={left:0,top:0,right:0,gap:0},Zd=function(e){return parseInt(e||"",10)||0},ST=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Zd(n),Zd(r),Zd(s)]},NT=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return bT;var t=ST(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},kT=N1(),Ni="data-scroll-locked",jT=function(e,t,n,r){var s=e.left,i=e.top,a=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(iT,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Ni,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Tc,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Rc,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Tc," .").concat(Tc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Rc," .").concat(Rc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ni,`] {
    `).concat(aT,": ").concat(l,`px;
  }
`)},_v=function(){var e=parseInt(document.body.getAttribute(Ni)||"0",10);return isFinite(e)?e:0},CT=function(){d.useEffect(function(){return document.body.setAttribute(Ni,(_v()+1).toString()),function(){var e=_v()-1;e<=0?document.body.removeAttribute(Ni):document.body.setAttribute(Ni,e.toString())}},[])},ET=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;CT();var i=d.useMemo(function(){return NT(s)},[s]);return d.createElement(kT,{styles:jT(i,!t,s,n?"":"!important")})},Nh=!1;if(typeof window<"u")try{var tc=Object.defineProperty({},"passive",{get:function(){return Nh=!0,!0}});window.addEventListener("test",tc,tc),window.removeEventListener("test",tc,tc)}catch{Nh=!1}var Ko=Nh?{passive:!1}:!1,PT=function(e){return e.tagName==="TEXTAREA"},k1=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!PT(e)&&n[t]==="visible")},TT=function(e){return k1(e,"overflowY")},RT=function(e){return k1(e,"overflowX")},Av=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=j1(e,r);if(s){var i=C1(e,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},MT=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},_T=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},j1=function(e,t){return e==="v"?TT(t):RT(t)},C1=function(e,t){return e==="v"?MT(t):_T(t)},AT=function(e,t){return e==="h"&&t==="rtl"?-1:1},LT=function(e,t,n,r,s){var i=AT(e,window.getComputedStyle(t).direction),a=i*r,l=n.target,c=t.contains(l),u=!1,f=a>0,m=0,h=0;do{var y=C1(e,l),p=y[0],g=y[1],w=y[2],x=g-w-i*p;(p||x)&&j1(e,l)&&(m+=x,h+=p),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(Math.abs(m)<1||!s)||!f&&(Math.abs(h)<1||!s))&&(u=!0),u},nc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Lv=function(e){return[e.deltaX,e.deltaY]},Iv=function(e){return e&&"current"in e?e.current:e},IT=function(e,t){return e[0]===t[0]&&e[1]===t[1]},$T=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},OT=0,Go=[];function DT(e){var t=d.useRef([]),n=d.useRef([0,0]),r=d.useRef(),s=d.useState(OT++)[0],i=d.useState(N1)[0],a=d.useRef(e);d.useEffect(function(){a.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=oT([e.lockRef.current],(e.shards||[]).map(Iv),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=d.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var x=nc(g),v=n.current,b="deltaX"in g?g.deltaX:v[0]-x[0],S="deltaY"in g?g.deltaY:v[1]-x[1],N,j=g.target,k=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in g&&k==="h"&&j.type==="range")return!1;var C=Av(k,j);if(!C)return!0;if(C?N=k:(N=k==="v"?"h":"v",C=Av(k,j)),!C)return!1;if(!r.current&&"changedTouches"in g&&(b||S)&&(r.current=N),!N)return!0;var R=r.current||N;return LT(R,w,g,R==="h"?b:S,!0)},[]),c=d.useCallback(function(g){var w=g;if(!(!Go.length||Go[Go.length-1]!==i)){var x="deltaY"in w?Lv(w):nc(w),v=t.current.filter(function(N){return N.name===w.type&&(N.target===w.target||w.target===N.shadowParent)&&IT(N.delta,x)})[0];if(v&&v.should){w.cancelable&&w.preventDefault();return}if(!v){var b=(a.current.shards||[]).map(Iv).filter(Boolean).filter(function(N){return N.contains(w.target)}),S=b.length>0?l(w,b[0]):!a.current.noIsolation;S&&w.cancelable&&w.preventDefault()}}},[]),u=d.useCallback(function(g,w,x,v){var b={name:g,delta:w,target:x,should:v,shadowParent:BT(x)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(S){return S!==b})},1)},[]),f=d.useCallback(function(g){n.current=nc(g),r.current=void 0},[]),m=d.useCallback(function(g){u(g.type,Lv(g),g.target,l(g,e.lockRef.current))},[]),h=d.useCallback(function(g){u(g.type,nc(g),g.target,l(g,e.lockRef.current))},[]);d.useEffect(function(){return Go.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Ko),document.addEventListener("touchmove",c,Ko),document.addEventListener("touchstart",f,Ko),function(){Go=Go.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,Ko),document.removeEventListener("touchmove",c,Ko),document.removeEventListener("touchstart",f,Ko)}},[]);var y=e.removeScrollBar,p=e.inert;return d.createElement(d.Fragment,null,p?d.createElement(i,{styles:$T(s)}):null,y?d.createElement(ET,{gapMode:e.gapMode}):null)}function BT(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const FT=mT(S1,DT);var hp=d.forwardRef(function(e,t){return d.createElement(Ju,zr({},e,{ref:t,sideCar:FT}))});hp.classNames=Ju.classNames;var zT=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Qo=new WeakMap,rc=new WeakMap,sc={},Jd=0,E1=function(e){return e&&(e.host||E1(e.parentNode))},VT=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=E1(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},qT=function(e,t,n,r){var s=VT(t,Array.isArray(e)?e:[e]);sc[n]||(sc[n]=new WeakMap);var i=sc[n],a=[],l=new Set,c=new Set(s),u=function(m){!m||l.has(m)||(l.add(m),u(m.parentNode))};s.forEach(u);var f=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(h){if(l.has(h))f(h);else try{var y=h.getAttribute(r),p=y!==null&&y!=="false",g=(Qo.get(h)||0)+1,w=(i.get(h)||0)+1;Qo.set(h,g),i.set(h,w),a.push(h),g===1&&p&&rc.set(h,!0),w===1&&h.setAttribute(n,"true"),p||h.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return f(t),l.clear(),Jd++,function(){a.forEach(function(m){var h=Qo.get(m)-1,y=i.get(m)-1;Qo.set(m,h),i.set(m,y),h||(rc.has(m)||m.removeAttribute(r),rc.delete(m)),y||m.removeAttribute(n)}),Jd--,Jd||(Qo=new WeakMap,Qo=new WeakMap,rc=new WeakMap,sc={})}},P1=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=zT(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),qT(r,s,n,"aria-hidden")):function(){return null}},mp="Dialog",[T1,R1]=Un(mp),[WT,Ir]=T1(mp),M1=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=e,l=d.useRef(null),c=d.useRef(null),[u=!1,f]=Eo({prop:r,defaultProp:s,onChange:i});return o.jsx(WT,{scope:t,triggerRef:l,contentRef:c,contentId:Vs(),titleId:Vs(),descriptionId:Vs(),open:u,onOpenChange:f,onOpenToggle:d.useCallback(()=>f(m=>!m),[f]),modal:a,children:n})};M1.displayName=mp;var _1="DialogTrigger",A1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ir(_1,n),i=Ve(t,s.triggerRef);return o.jsx(Re.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":vp(s.open),...r,ref:i,onClick:be(e.onClick,s.onOpenToggle)})});A1.displayName=_1;var pp="DialogPortal",[UT,L1]=T1(pp,{forceMount:void 0}),I1=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,i=Ir(pp,t);return o.jsx(UT,{scope:t,forceMount:n,children:d.Children.map(r,a=>o.jsx(Lr,{present:n||i.open,children:o.jsx(Du,{asChild:!0,container:s,children:a})}))})};I1.displayName=pp;var cu="DialogOverlay",$1=d.forwardRef((e,t)=>{const n=L1(cu,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=Ir(cu,e.__scopeDialog);return i.modal?o.jsx(Lr,{present:r||i.open,children:o.jsx(KT,{...s,ref:t})}):null});$1.displayName=cu;var HT=Li("DialogOverlay.RemoveScroll"),KT=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ir(cu,n);return o.jsx(hp,{as:HT,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(Re.div,{"data-state":vp(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Ro="DialogContent",O1=d.forwardRef((e,t)=>{const n=L1(Ro,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=Ir(Ro,e.__scopeDialog);return o.jsx(Lr,{present:r||i.open,children:i.modal?o.jsx(GT,{...s,ref:t}):o.jsx(QT,{...s,ref:t})})});O1.displayName=Ro;var GT=d.forwardRef((e,t)=>{const n=Ir(Ro,e.__scopeDialog),r=d.useRef(null),s=Ve(t,n.contentRef,r);return d.useEffect(()=>{const i=r.current;if(i)return P1(i)},[]),o.jsx(D1,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:be(e.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:be(e.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:be(e.onFocusOutside,i=>i.preventDefault())})}),QT=d.forwardRef((e,t)=>{const n=Ir(Ro,e.__scopeDialog),r=d.useRef(!1),s=d.useRef(!1);return o.jsx(D1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),D1=d.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=e,l=Ir(Ro,n),c=d.useRef(null),u=Ve(t,c);return y1(),o.jsxs(o.Fragment,{children:[o.jsx(fp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(xl,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":vp(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(XT,{titleId:l.titleId}),o.jsx(JT,{contentRef:c,descriptionId:l.descriptionId})]})]})}),gp="DialogTitle",B1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ir(gp,n);return o.jsx(Re.h2,{id:s.titleId,...r,ref:t})});B1.displayName=gp;var F1="DialogDescription",z1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ir(F1,n);return o.jsx(Re.p,{id:s.descriptionId,...r,ref:t})});z1.displayName=F1;var V1="DialogClose",q1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ir(V1,n);return o.jsx(Re.button,{type:"button",...r,ref:t,onClick:be(e.onClick,()=>s.onOpenChange(!1))})});q1.displayName=V1;function vp(e){return e?"open":"closed"}var W1="DialogTitleWarning",[YT,U1]=gC(W1,{contentName:Ro,titleName:gp,docsSlug:"dialog"}),XT=({titleId:e})=>{const t=U1(W1),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},ZT="DialogDescriptionWarning",JT=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${U1(ZT).contentName}}.`;return d.useEffect(()=>{var i;const s=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},H1=M1,K1=A1,G1=I1,xp=$1,yp=O1,wp=B1,bp=z1,Sp=q1;const Oi=H1,uu=K1,eR=G1,Q1=d.forwardRef(({className:e,...t},n)=>o.jsx(xp,{ref:n,className:Ae("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Q1.displayName=xp.displayName;const Mo=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(eR,{children:[o.jsx(Q1,{}),o.jsxs(yp,{ref:r,className:Ae("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,o.jsxs(Sp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(Po,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Mo.displayName=yp.displayName;const _o=({className:e,...t})=>o.jsx("div",{className:Ae("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});_o.displayName="DialogHeader";const Ao=d.forwardRef(({className:e,...t},n)=>o.jsx(wp,{ref:n,className:Ae("text-lg font-semibold leading-none tracking-tight",e),...t}));Ao.displayName=wp.displayName;const Y1=d.forwardRef(({className:e,...t},n)=>o.jsx(bp,{ref:n,className:Ae("text-sm text-muted-foreground",e),...t}));Y1.displayName=bp.displayName;/*! Capacitor: https://capacitorjs.com/ - MIT License */var Di;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Di||(Di={}));class ef extends Error{constructor(t,n,r){super(t),this.message=t,this.code=n,this.data=r}}const tR=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},nR=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>t!==null?t.name:tR(e),i=()=>s()!=="web",a=m=>{const h=u.get(m);return!!(h!=null&&h.platforms.has(s())||l(m))},l=m=>{var h;return(h=n.PluginHeaders)===null||h===void 0?void 0:h.find(y=>y.name===m)},c=m=>e.console.error(m),u=new Map,f=(m,h={})=>{const y=u.get(m);if(y)return console.warn(`Capacitor plugin "${m}" already registered. Cannot register plugins twice.`),y.proxy;const p=s(),g=l(m);let w;const x=async()=>(!w&&p in h?w=typeof h[p]=="function"?w=await h[p]():w=h[p]:t!==null&&!w&&"web"in h&&(w=typeof h.web=="function"?w=await h.web():w=h.web),w),v=(C,R)=>{var T,F;if(g){const _=g==null?void 0:g.methods.find(z=>R===z.name);if(_)return _.rtype==="promise"?z=>n.nativePromise(m,R.toString(),z):(z,M)=>n.nativeCallback(m,R.toString(),z,M);if(C)return(T=C[R])===null||T===void 0?void 0:T.bind(C)}else{if(C)return(F=C[R])===null||F===void 0?void 0:F.bind(C);throw new ef(`"${m}" plugin is not implemented on ${p}`,Di.Unimplemented)}},b=C=>{let R;const T=(...F)=>{const _=x().then(z=>{const M=v(z,C);if(M){const V=M(...F);return R=V==null?void 0:V.remove,V}else throw new ef(`"${m}.${C}()" is not implemented on ${p}`,Di.Unimplemented)});return C==="addListener"&&(_.remove=async()=>R()),_};return T.toString=()=>`${C.toString()}() { [capacitor code] }`,Object.defineProperty(T,"name",{value:C,writable:!1,configurable:!1}),T},S=b("addListener"),N=b("removeListener"),j=(C,R)=>{const T=S({eventName:C},R),F=async()=>{const z=await T;N({eventName:C,callbackId:z},R)},_=new Promise(z=>T.then(()=>z({remove:F})));return _.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await F()},_},k=new Proxy({},{get(C,R){switch(R){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?j:S;case"removeListener":return N;default:return b(R)}}});return r[m]=k,u.set(m,{name:m,proxy:k,platforms:new Set([...Object.keys(h),...g?[p]:[]])}),k};return n.convertFileSrc||(n.convertFileSrc=m=>m),n.getPlatform=s,n.handleError=c,n.isNativePlatform=i,n.isPluginAvailable=a,n.registerPlugin=f,n.Exception=ef,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},rR=e=>e.Capacitor=nR(e),Sn=rR(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Zs=Sn.registerPlugin;class Np{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(n);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(t);const a=async()=>this.removeListener(t,n);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,r){const s=this.listeners[t];if(!s){if(r){let i=this.retainedEventArguments[t];i||(i=[]),i.push(n),this.retainedEventArguments[t]=i}return}s.forEach(i=>i(n))}hasListeners(t){var n;return!!(!((n=this.listeners[t])===null||n===void 0)&&n.length)}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(t="not implemented"){return new Sn.Exception(t,Di.Unimplemented)}unavailable(t="not available"){return new Sn.Exception(t,Di.Unavailable)}async removeListener(t,n){const r=this.listeners[t];if(!r)return;const s=r.indexOf(n);this.listeners[t].splice(s,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(r=>{this.notifyListeners(t,r)}))}}const $v=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Ov=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class sR extends Np{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[s,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=Ov(s).trim(),i=Ov(i).trim(),n[s]=i}),n}async setCookie(t){try{const n=$v(t.key),r=$v(t.value),s=`; expires=${(t.expires||"").replace("expires=","")}`,i=(t.path||"/").replace("path=",""),a=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${i}; ${a};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}Zs("CapacitorCookies",{web:()=>new sR});const oR=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;t(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(e)}),iR=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(s=>s.toLocaleLowerCase()).reduce((s,i,a)=>(s[i]=e[t[a]],s),{})},aR=(e,t=!0)=>e?Object.entries(e).reduce((r,s)=>{const[i,a]=s;let l,c;return Array.isArray(a)?(c="",a.forEach(u=>{l=t?encodeURIComponent(u):u,c+=`${i}=${l}&`}),c.slice(0,-1)):(l=t?encodeURIComponent(a):a,c=`${i}=${l}`),`${r}&${c}`},"").substr(1):null,lR=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),s=iR(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[a,l]of Object.entries(e.data||{}))i.set(a,l);n.body=i.toString()}else if(s.includes("multipart/form-data")||e.data instanceof FormData){const i=new FormData;if(e.data instanceof FormData)e.data.forEach((l,c)=>{i.append(c,l)});else for(const l of Object.keys(e.data))i.append(l,e.data[l]);n.body=i;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(s.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class cR extends Np{async request(t){const n=lR(t,t.webFetchExtra),r=aR(t.params,t.shouldEncodeUrlParams),s=r?`${t.url}?${r}`:t.url,i=await fetch(s,n),a=i.headers.get("content-type")||"";let{responseType:l="text"}=i.ok?t:{};a.includes("application/json")&&(l="json");let c,u;switch(l){case"arraybuffer":case"blob":u=await i.blob(),c=await oR(u);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const f={};return i.headers.forEach((m,h)=>{f[h]=m}),{data:c,headers:f,status:i.status,url:i.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}Zs("CapacitorHttp",{web:()=>new cR});var Dv;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(Dv||(Dv={}));var Bv;(function(e){e.StatusBar="StatusBar",e.NavigationBar="NavigationBar"})(Bv||(Bv={}));class uR extends Np{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}Zs("SystemBars",{web:()=>new uR});const dR="modulepreload",fR=function(e){return"/"+e},Fv={},Zi=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=fR(c),c in Fv)return;Fv[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":dR,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((h,y)=>{m.addEventListener("load",h),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},zv=Zs("SpeechSynthesis",{web:()=>Zi(()=>import("./web-cv0vkxnC.js"),[]).then(e=>new e.SpeechSynthesisWeb)}),kh={permissionStatus:"unknown",modelReady:!1,sessionActive:!1,micListening:!1,lastResult:"",lastError:"",timestamp:Date.now()},jh=new Set;function hR(e){return jh.add(e),e({...kh}),()=>jh.delete(e)}function Ji(e){Object.assign(kh,e,{timestamp:Date.now()}),jh.forEach(t=>t({...kh}))}function Vv(e){Ji({permissionStatus:e})}function mR(e){Ji({modelReady:e})}function X1(e){Ji({sessionActive:e})}function Z1(e){Ji({micListening:e})}function J1(e){Ji({lastResult:e})}function du(e){Ji({lastError:e})}const ie=Zs("BlindfoldNative");let Ch=null,Eh=null;const pR=new Promise((e,t)=>{Ch=e,Eh=t});let eb=!1,tb=!1;function oc(e){tb=e,eb=!0,e&&Ch?Ch():!e&&Eh&&Eh(new Error("Mic permission denied"))}async function Sl(){if(eb)return tb;try{return await pR,!0}catch{return!1}}let tf=null;async function nb(){if(Sn.isNativePlatform())try{tf||(tf=await Zi(()=>Promise.resolve().then(()=>jN),void 0));const{Haptics:e,ImpactStyle:t}=tf;await e.impact({style:t.Light})}catch{}}class gR{constructor(){this.sessions=new Map,this.isSpeaking=!1,this.micState="LISTENING",this.pendingRestarts=[],this.settlingTimeout=null,this.resumeDelayMs=350}register(t){this.sessions.set(t.id,t),console.log(`[VoiceController] Registered session: ${t.id}`)}unregister(t){this.sessions.delete(t),console.log(`[VoiceController] Unregistered session: ${t}`)}clearPendingForSession(t){const n=this.pendingRestarts.length;this.pendingRestarts=this.pendingRestarts.filter(r=>r!==t),n!==this.pendingRestarts.length&&console.log(`[VoiceController] Cleared pending restart for: ${t}`)}setActive(t,n){const r=this.sessions.get(t);r&&(r.shouldBeActive=n)}onTTSStart(){this.settlingTimeout&&(clearTimeout(this.settlingTimeout),this.settlingTimeout=null),this.isSpeaking=!0,this.micState="SPEAKING",console.log("[VoiceController] TTS starting, state -> SPEAKING, pausing all voice sessions"),Array.from(this.sessions.values()).forEach(t=>{t.shouldBeActive&&t.pause()})}onTTSEnd(){this.isSpeaking=!1,this.micState="SETTLING";const t=this.sessions.size,n=Array.from(this.sessions.keys()).join(", ");console.log(`[VoiceController] TTS ended, state -> SETTLING, waiting ${this.resumeDelayMs}ms, sessions: [${n}] (${t})`),this.settlingTimeout=setTimeout(()=>{if(this.isSpeaking)console.log("[VoiceController] Skipping resume - TTS started again during settling");else{this.micState="LISTENING",console.log("[VoiceController] Settling complete, state -> LISTENING"),Array.from(this.sessions.entries()).forEach(([a,l])=>{console.log(`[VoiceController] Session '${a}' shouldBeActive=${l.shouldBeActive}`)});const r=new Set,s=this.pendingRestarts.length>0;s&&(console.log(`[VoiceController] Processing ${this.pendingRestarts.length} pending restarts: ${this.pendingRestarts.join(", ")}`),this.playMicLiveClick(),this.pendingRestarts.forEach(a=>{const l=this.sessions.get(a);l&&l.shouldBeActive?(console.log(`[VoiceController] Executing pending restart for: ${a}`),l.resume(),r.add(a)):console.log(`[VoiceController] Skipping pending restart for '${a}' - session=${!!l}, shouldBeActive=${l==null?void 0:l.shouldBeActive}`)}),this.pendingRestarts=[]);const i=Array.from(this.sessions.values()).filter(a=>a.shouldBeActive&&!r.has(a.id));console.log(`[VoiceController] Sessions to resume: ${i.length}`),i.length>0?(s||this.playMicLiveClick(),i.forEach(a=>{console.log(`[VoiceController] Resuming session: ${a.id}`),a.resume()})):console.log("[VoiceController] No sessions to resume")}},this.resumeDelayMs)}queueRestart(t){if(this.micState==="LISTENING"){const n=this.sessions.get(t);n&&n.shouldBeActive&&(console.log(`[VoiceController] Instant restart for session: ${t}`),this.playMicLiveClick(),n.resume())}else this.pendingRestarts.includes(t)||(this.pendingRestarts.push(t),console.log(`[VoiceController] Queued restart for session: ${t} (state: ${this.micState})`))}getMicState(){return this.micState}canStartMic(){return this.micState==="LISTENING"}async playMicLiveClick(){try{if(Sn.isNativePlatform()){const{Haptics:t,ImpactStyle:n}=await Zi(async()=>{const{Haptics:r,ImpactStyle:s}=await Promise.resolve().then(()=>jN);return{Haptics:r,ImpactStyle:s}},void 0);await t.impact({style:n.Light})}console.log("[VoiceController] Mic live click")}catch{}}getIsSpeaking(){return this.isSpeaking}}const es=new gR,za=class za{constructor(){this.protectedSessionId=null,this.disposableSessionId=null,this.isPurging=!1}register(t){za.PROTECTED_SESSIONS.includes(t)?(this.protectedSessionId==="game"&&t==="reconstruction"&&console.log("[VoiceRegistry] HANDOVER: game  reconstruction (mic stays warm)"),this.protectedSessionId=t,console.log(`[VoiceRegistry] Protected lane: ${t}`)):(this.disposableSessionId=t,console.log(`[VoiceRegistry] Disposable lane: ${t}`))}unregister(t){const n=za.PROTECTED_SESSIONS.includes(t);n&&this.protectedSessionId===t?(this.protectedSessionId=null,console.log(`[VoiceRegistry] Unregistered protected: ${t}`)):!n&&this.disposableSessionId===t&&(this.disposableSessionId=null,console.log(`[VoiceRegistry] Unregistered disposable: ${t}`))}async purge(){if(this.isPurging){console.log("[VoiceRegistry] Already purging, skipping");return}this.isPurging=!0;const t=!!this.protectedSessionId;console.log(`[VoiceRegistry] PURGE: Killing disposable lane${t?" (game protected)":""}`);try{Zv.stop()}catch(n){console.log("[VoiceRegistry] trainingVoice.stop error:",n)}try{ut.stop()}catch(n){console.log("[VoiceRegistry] voiceMaster.stop error:",n)}if(!t)try{nn.stop()}catch(n){console.log("[VoiceRegistry] voiceRecognition.stop error:",n)}if(Dn&&!t)try{await ie.stopSession(),console.log("[VoiceRegistry] Stopped native session")}catch(n){console.log("[VoiceRegistry] stopSession error:",n)}try{ut.resetMicBusy()}catch(n){console.log("[VoiceRegistry] resetMicBusy error:",n)}try{nn.resetStartedFlag()}catch(n){console.log("[VoiceRegistry] resetStartedFlag error:",n)}this.disposableSessionId=null,await new Promise(n=>setTimeout(n,500)),this.isPurging=!1,console.log("[VoiceRegistry] PURGE complete - disposable lane cleared, flags reset")}async purgeAll(){if(this.isPurging){console.log("[VoiceRegistry] Already purging, skipping");return}this.isPurging=!0,console.log("[VoiceRegistry] NUCLEAR PURGE: Killing ALL sessions");try{nn.stop()}catch{}try{Zv.stop()}catch{}try{ut.stop()}catch{}if(Dn)try{await ie.stopSession()}catch{}try{ut.resetMicBusy()}catch{}try{nn.resetStartedFlag()}catch{}this.protectedSessionId=null,this.disposableSessionId=null,await new Promise(t=>setTimeout(t,500)),this.isPurging=!1,console.log("[VoiceRegistry] NUCLEAR PURGE complete")}clearProtectedLane(){this.protectedSessionId&&(console.log(`[VoiceRegistry] Clearing protected lane: ${this.protectedSessionId}`),this.protectedSessionId=null)}getProtectedSession(){return this.protectedSessionId}getDisposableSession(){return this.disposableSessionId}getActiveSession(){return this.protectedSessionId||this.disposableSessionId}};za.PROTECTED_SESSIONS=["game","reconstruction"];let Ph=za;const Bi=new Ph,qv={K:"King",Q:"Queen",R:"Rook",B:"Bishop",N:"Knight",P:"Pawn",k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"},_s={king:"K",queen:"Q",rook:"R",bishop:"B",bish:"B",bishup:"B",bishep:"B",bashop:"B",knight:"N",night:"N",nite:"N",kite:"N",horse:"N",pawn:"",castle:"R"},vR=["um","uh","the","a","an","like","so","well","just","actually","basically"];function xR(e){return e.toLowerCase().split(/\s+/).filter(r=>!vR.includes(r)).join(" ")}const ki={a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",alpha:"a",alfa:"a",bravo:"b",charlie:"c",delta:"d",echo:"e",foxtrot:"f",golf:"g",hotel:"h",able:"a",apple:"a",ay:"a",aye:"a",eh:"a",boy:"b",baker:"b",bee:"b",be:"b",cat:"c",see:"c",sea:"c",cee:"c",dog:"d",dee:"d",david:"d",easy:"e",edward:"e",eee:"e",ee:"e",fox:"f",frank:"f",eff:"f",ef:"f",if:"f",of:"f",george:"g",gee:"g",jee:"g",henry:"h",aitch:"h",ach:"h"},fu={1:"1",one:"1",won:"1",first:"1",2:"2",two:"2",to:"2",too:"2",second:"2",3:"3",three:"3",free:"3",third:"3",4:"4",four:"4",for:"4",forth:"4",fourth:"4",5:"5",five:"5",fifth:"5",6:"6",six:"6",sixth:"6",sicks:"6",7:"7",seven:"7",seventh:"7",8:"8",eight:"8",ate:"8",eighth:"8"};function Yo(e,t=!1,n=!1,r=!1){if(!e)return"";if(e==="O-O"||e==="0-0")return r?"Castles kingside, checkmate!":n?"Castles kingside, check":"Castles kingside";if(e==="O-O-O"||e==="0-0-0")return r?"Castles queenside, checkmate!":n?"Castles queenside, check":"Castles queenside";let s="",i=e.replace(/[+#=].*$/,"");const a=i.match(/^([KQRBN])/);a?(s=qv[a[1]]+" ",i=i.substring(1)):s="";const l=i.includes("x");i=i.replace("x","");const c=i.match(/([a-h])([1-8])/g);if(c&&c.length>0){const u=c[c.length-1],f=u[0],m=u[1];if(l||t){if(c.length>1||!a){const h=i[0];h&&h.match(/[a-h]/)&&(s+=h+" ")}s+="takes "+f+m}else s+=f+m}if(e.includes("=")){const u=e.match(/=([QRBN])/);u&&(s+=", promotes to "+qv[u[1]])}return r||e.includes("#")?s+=", checkmate!":(n||e.includes("+"))&&(s+=", check"),s.trim()}let bs=[],ya=!1,co=null,nf=!1;const Dn=Sn.isNativePlatform();async function kp(){if(!Dn){try{if(navigator.permissions){const e=await navigator.permissions.query({name:"microphone"});return e.state==="granted"?"granted":e.state==="denied"?"denied":"prompt"}}catch{}return"prompt"}try{return(await ie.checkPermissions()).mic}catch(e){return console.error("[Voice] Error checking permissions:",e),"unknown"}}async function rb(){if(!Dn)try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(t=>t.stop()),!0}catch{return console.warn("[Voice] Web microphone permission denied"),!1}try{const e=await ie.checkPermissions();return e.mic==="granted"?!0:e.mic==="denied"||e.mic==="prompt"?(await ie.requestPermissions()).mic==="granted":!1}catch(e){return console.error("[Voice] Permission handling error:",e),!1}}async function yR(){const e=await rb(),t=await kp();return{granted:e,status:t}}function wR(){return Dn?Promise.resolve([]):ya&&bs.length>0?Promise.resolve(bs):co||(co=new Promise(e=>{const t=window.speechSynthesis.getVoices();if(t.length>0){bs=t,ya=!0,co=null,e(t);return}const n=()=>{bs=window.speechSynthesis.getVoices(),ya=!0,co=null,window.speechSynthesis.removeEventListener("voiceschanged",n),e(bs)};window.speechSynthesis.addEventListener("voiceschanged",n),setTimeout(()=>{ya||(bs=window.speechSynthesis.getVoices(),ya=bs.length>0,co=null,window.speechSynthesis.removeEventListener("voiceschanged",n),e(bs))},1e3)}),co)}let Th=null;function bR(){Th&&Th.abort()}const SR={a:"Ay",b:"Bee",c:"See",d:"Dee",e:"e",f:"f",g:"Gee",h:"h"},NR={N:"Knight",B:"Bishop",R:"Rook",Q:"Queen",K:"King"},kR=new Set(["correct","wrong","next","say","the","move","look","okay","continue","seconds","remaining","are","you","sure","want","resign","yes","no","can","play","legal","moves","for","material","is","equal","white","black","up","point","points","at","highlighted","squares","on","board"]);function jR(e){const t=e.toLowerCase().replace(/[^a-z\s]/g,"").split(/\s+/).filter(i=>i.length>0);if(t.length>0&&t.every(i=>kR.has(i))||!/[a-h]\s*[1-8]|[NBRQK][a-h]|O-O/.test(e))return e;let s=e.replace(/O-O-O/gi,"queenside castle").replace(/O-O/gi,"kingside castle").replace(/x/g," takes ").replace(/\+/g," check").replace(/#/g," checkmate");for(const[i,a]of Object.entries(NR))s=s.replace(new RegExp(`\\b${i}([a-h])([1-8])`,"g"),`${a} $1$2`),s=s.replace(new RegExp(`\\b${i}\\s*takes\\s*([a-h])([1-8])`,"gi"),`${a} takes $1$2`),s=s.replace(new RegExp(`\\b${i}([a-h1-8])([a-h])([1-8])`,"g"),`${a} $1$2$3`);for(const[i,a]of Object.entries(SR))s=s.replace(new RegExp(`\\b${i}\\s*([1-8])`,"gi"),`${a} $1`);return s=s.replace(/\ba\s+([1-8])\b/gi,"Ay $1"),s=s.replace(/\s+/g," ").trim(),s}async function Pt(e,t=.9){es.onTTSStart(),nf=!0,bR(),console.log("[Voice] Mic muted: Bot is speaking");const n=jR(e);try{if(Dn)await new Promise(async r=>{let s=!1;const i=Math.max(2500,n.length*150),a=setTimeout(()=>{s||(console.warn("[Voice] TTS Event timeout - forcing resume after",i,"ms"),s=!0,l&&l.remove().catch(()=>{}),r())},i);let l=null;try{l=await zv.addListener("end",()=>{s||(console.log("[Voice] TTS End detected via event - mic resume now safe"),clearTimeout(a),s=!0,l&&l.remove().catch(()=>{}),r())})}catch(c){console.warn("[Voice] Failed to setup TTS listener:",c)}try{await zv.speak({text:n,language:"en-US",rate:t,pitch:1,volume:1})}catch(c){console.error("[Voice] Speak error:",c),clearTimeout(a),l&&l.remove().catch(()=>{}),s=!0,r()}l||(console.log("[Voice] No listener available, using fallback timing"),await new Promise(c=>setTimeout(c,Math.max(1e3,n.length*100))),s||(clearTimeout(a),s=!0,r()))});else{if(console.log("[Voice] speechSynthesis in window:","speechSynthesis"in window),console.log("[Voice] window.speechSynthesis:",typeof window.speechSynthesis),!("speechSynthesis"in window)||!window.speechSynthesis){console.warn("Speech synthesis not supported");return}try{window.speechSynthesis.cancel()}catch(s){console.warn("[Voice] Failed to cancel previous speech:",s)}await new Promise(s=>setTimeout(s,50));const r=await wR();console.log("[Voice] Loaded voices:",r.length),await new Promise(s=>{const i=new SpeechSynthesisUtterance(n);i.rate=t,i.pitch=1,i.volume=1;const a=r.find(l=>l.lang.startsWith("en-"));a?(i.voice=a,i.lang=a.lang):i.lang="en-US",i.onend=()=>{console.log("[Voice] Speech ended successfully"),s()},i.onerror=l=>{console.error("[Voice] Speech error:",l),s()},console.log("[Voice] Speaking:",n),window.speechSynthesis.speak(i)})}}finally{nf=!1,es.onTTSEnd(),setTimeout(()=>{nf||console.log("[Voice] Mic active: Listening for your move")},100)}}function sb(e){let t=e;return t=t.replace(/\bbefore\b/gi,"b 4"),t=t.replace(/\bsci\s*fi\b/gi,"c 5"),t=t.replace(/\bscifi\b/gi,"c 5"),t=t.replace(/\bquincy\b/gi,"queen c"),t=t.replace(/\brookie\b/gi,"rook e"),t=t.replace(/\brookies\b/gi,"rook e"),t=t.replace(/\brook\s+he\b/gi,"rook e"),t=t.replace(/\brock\s+([a-h])\b/gi,"rook $1"),t=t.replace(/\bhe\s+([1-8])\b/g,"e $1"),t=t.replace(/\bhe\s+(one|two|three|four|five|six|seven|eight|won|too|free|fore|for|fifth|sixth|seventh|eighth)\b/gi,"e $1"),t=t.replace(/\bthe\s+([1-8])\b/g,"d $1"),t=t.replace(/\bthe\s+(one|two|three|four|five|six|seven|eight)\b/gi,"d $1"),t=t.replace(/\b([a-h])\s+for\b/gi,"$1 4"),t}function Wv(e,t){const n=sb(e.toLowerCase().trim()),r=xR(n),s=r.replace(/\s+/g,"").match(/^([a-h])([1-8])$/);if(s){const g=s[1]+s[2],w=t.find(x=>!/^[KQRBN]/i.test(x)&&x.includes(g));if(w)return w}if(r.includes("castle")||r.includes("castles"))if(r.includes("queen")||r.includes("long")){if(t.includes("O-O-O"))return"O-O-O"}else if(r.includes("king")||r.includes("short")){if(t.includes("O-O"))return"O-O"}else{if(t.includes("O-O"))return"O-O";if(t.includes("O-O-O"))return"O-O-O"}let i="",a="",l="",c="",u="",f=!1,m="";const h=r.split(/\s+/);for(const g of h){const w=g.toLowerCase();_s[w]!==void 0&&(i=_s[w]),(w==="takes"||w==="captures"||w==="x")&&(f=!0),!(w==="promotes"||w==="promotion")&&(ki[w]&&(a?c||(c=a,a=ki[w]):a=ki[w]),fu[w]&&(l&&!u&&(u=l),l=fu[w]),["queen","rook","bishop","knight"].includes(w)&&(r.includes("promote")||r.includes("equals"))&&(m=_s[w]||"Q"))}for(const g of h){const w=g.match(/^([a-h])([1-8])$/i);w&&(a&&!c&&(c=a),l&&!u&&(u=l),a=w[1].toLowerCase(),l=w[2])}if(!m&&(l==="1"||l==="8")){const g=h[h.length-1].toLowerCase();["queen","rook","bishop","knight"].includes(g)&&(m=_s[g]||"Q")}if(!a||!l)return null;const y=a+l,p=t.filter(g=>{const w=g.replace(/[+#]/g,"");if(!w.includes(y))return!1;if(i){if(!w.startsWith(i))return!1}else if(w.match(/^[KQRBN]/))return!1;if(c){const x=w.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(x&&x[1]&&x[1]!==c)return!1}if(u){const x=w.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(x&&x[2]&&x[2]!==u)return!1}return!0});if(p.length===1){let g=p[0];return m&&g.includes("=")&&(g=g.replace(/=[QRBN]/,"="+m)),g}if(p.length>1){const g=p.filter(x=>x.includes("x")),w=p.filter(x=>!x.includes("x"));return f&&g.length===1?g[0]:!f&&w.length===1?w[0]:p[0]}return null}function Uv(e,t){const n=sb(e.toLowerCase().trim());if(n.includes("castle")||n.includes("castles"))if(n.includes("queen")||n.includes("long")){if(t.includes("O-O-O"))return{move:"O-O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""}}else if(n.includes("king")||n.includes("short")){if(t.includes("O-O"))return{move:"O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""}}else{if(t.includes("O-O"))return{move:"O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""};if(t.includes("O-O-O"))return{move:"O-O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""}}let r="",s="",i="",a="",l="",c=!1,u="";const f=n.split(/\s+/);for(const y of f){const p=y.toLowerCase();_s[p]!==void 0&&(r=_s[p]),(p==="takes"||p==="captures"||p==="x")&&(c=!0),!(p==="promotes"||p==="promotion")&&(ki[p]&&(s?a||(a=s,s=ki[p]):s=ki[p]),fu[p]&&(i&&!l&&(l=i),i=fu[p]),["queen","rook","bishop","knight"].includes(p)&&(n.includes("promote")||n.includes("equals"))&&(u=_s[p]||"Q"))}for(const y of f){const p=y.match(/^([a-h])([1-8])$/i);p&&(s&&!a&&(a=s),i&&!l&&(l=i),s=p[1].toLowerCase(),i=p[2])}if(!u&&(i==="1"||i==="8")){const y=f[f.length-1].toLowerCase();["queen","rook","bishop","knight"].includes(y)&&(u=_s[y]||"Q")}if(!s||!i)return{move:null,isAmbiguous:!1,candidates:[],piece:"",targetSquare:""};const m=s+i,h=t.filter(y=>{const p=y.replace(/[+#]/g,"");if(!p.includes(m))return!1;if(r){if(!p.startsWith(r))return!1}else if(p.match(/^[KQRBN]/))return!1;if(a){const g=p.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(g&&g[1]&&g[1]!==a)return!1}if(l){const g=p.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(g&&g[2]&&g[2]!==l)return!1}return!0});if(h.length===1){let y=h[0];return u&&y.includes("=")&&(y=y.replace(/=[QRBN]/,"="+u)),{move:y,isAmbiguous:!1,candidates:[],piece:r,targetSquare:m}}if(h.length>1){const y=h.filter(g=>g.includes("x")),p=h.filter(g=>!g.includes("x"));return c&&y.length===1?{move:y[0],isAmbiguous:!1,candidates:[],piece:r,targetSquare:m}:!c&&p.length===1?{move:p[0],isAmbiguous:!1,candidates:[],piece:r,targetSquare:m}:{move:null,isAmbiguous:!0,candidates:h,piece:r,targetSquare:m}}return{move:null,isAmbiguous:!1,candidates:[],piece:r,targetSquare:m}}const rf={one:"1",won:"1",want:"1",two:"2",too:"2",to:"2",three:"3",tree:"3",free:"3",four:"4",for:"4",fore:"4",five:"5",fife:"5",six:"6",sick:"6",sicks:"6",seven:"7",eight:"8",ate:"8",ait:"8",a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",alpha:"a",alfa:"a",bravo:"b",charlie:"c",delta:"d",echo:"e",foxtrot:"f",golf:"g",hotel:"h",ay:"a",aye:"a",apple:"a",bee:"b",be:"b",boy:"b",see:"c",sea:"c",cee:"c",dee:"d",the:"d",tea:"d",dog:"d",ee:"e",easy:"e",eff:"f",if:"f",of:"f",off:"f",fox:"f",gee:"g",jee:"g",aitch:"h",ach:"h"};function Hv(e){const t=e.toLowerCase().trim(),n=t.split(/\s+/);let r=null,s=null;for(const i of n){const a=rf[i];a?/^[a-h]$/.test(a)?r||(r=a):/^[1-8]$/.test(a)&&(s||(s=a)):i.length===1&&(/^[a-h]$/i.test(i)?r||(r=i.toLowerCase()):/^[1-8]$/.test(i)&&(s||(s=i)))}if(rf[t]){const i=rf[t];/^[a-h]$/.test(i)?r=i:/^[1-8]$/.test(i)&&(s=i)}return t.length===1&&(/^[a-h]$/i.test(t)?r=t.toLowerCase():/^[1-8]$/.test(t)&&(s=t)),{file:r,rank:s}}function Kv(e,t){for(const n of e){const s=n.replace(/[+#]/g,"").match(/^[KQRBN]([a-h])?([1-8])?x?[a-h][1-8]/);if(s){const i=s[1]||null,a=s[2]||null;if(t.file&&t.rank){if(i===t.file&&a===t.rank)return n}else if(t.file){if(i===t.file)return n}else if(t.rank&&a===t.rank)return n}}return null}function Gv(e){const t=[];for(const n of e){const s=n.replace(/[+#]/g,"").match(/^[KQRBN]([a-h])?([1-8])?x?[a-h][1-8]/);if(s){const i=s[1]||"",a=s[2]||"";(i||a)&&t.push(i+a)}}return t}function Qv(e){const t=[];for(const n of e){const s=n.replace(/[+#=QRBN]/g,"").match(/^([a-h])x[a-h][1-8]$/);s&&t.push(s[1])}return t}function Yv(e,t){for(const n of e)if(n.replace(/[+#]/g,"").startsWith(t+"x"))return n;return null}function Xv(e){return e.length<2?!1:e.every(t=>{const n=t.replace(/[+#=QRBN]/g,"");return/^[a-h]x[a-h][1-8]$/.test(n)})}class CR{constructor(){this.onResult=null,this.onListeningChange=null,this.legalMoves=[],this.isStarted=!1,this.isMuted=!1,this.unmuteTimeout=null}async pauseLoop(){console.log("[VoiceRecognition] pauseLoop"),await ut.pauseLoop(),this.isMuted=!0}resumeLoop(){console.log("[VoiceRecognition] resumeLoop"),this.isMuted=!1,ut.resumeLoop()}setMute(t,n=400){this.unmuteTimeout&&(clearTimeout(this.unmuteTimeout),this.unmuteTimeout=null),t?(this.isMuted=!0,console.log("[VoiceRecognition] Software MUTE: transcripts will be ignored")):this.unmuteTimeout=setTimeout(()=>{this.isMuted=!1,this.unmuteTimeout=null,console.log("[VoiceRecognition] Software UNMUTE: mic LIVE")},n)}getMuted(){return this.isMuted}setLegalMoves(t){this.legalMoves=t,this.isStarted&&ut.setLegalMoves(t)}setOnResult(t){this.onResult=t}setOnListeningChange(t){this.onListeningChange=t}async start(){if(this.isStarted){console.log("[VoiceRecognition] Already started, skipping duplicate start");return}await this.startInternal()}async startInternal(){try{const t=await ut.start({mode:"move",legalMoves:this.legalMoves,onTranscript:(n,r)=>{if(this.isMuted){console.log("[VoiceRecognition] Ignored while muted:",n);return}this.onResult&&this.onResult(r||null,n)},onListeningChange:n=>{this.onListeningChange&&this.onListeningChange(n)}});this.isStarted=t,console.log("[VoiceRecognition] startInternal result:",t)}catch(t){console.log("[VoiceRecognition] startInternal failed:",t),this.isStarted=!1}}async forceRestart(){console.log("[VoiceRecognition] Force restart - bypassing guard"),await this.startInternal()}stop(){this.isStarted&&(this.isStarted=!1,ut.stop())}async stopAndWait(){this.isStarted&&(this.isStarted=!1,await ut.stopAndWait())}resetStartedFlag(){this.isStarted=!1}abort(){this.stop()}async reset(){await this.stopAndWait(),this.onResult=null,this.onListeningChange=null,this.legalMoves=[]}isSupported(){return!0}getIsListening(){return ut.getIsListening()&&ut.getMode()==="move"}async waitForInitialization(){await ut.checkAvailability()}}const nn=new CR;Th=nn;const hi=class hi{constructor(){this.isListening=!1,this.shouldBeListening=!1,this.config=null,this.listenerHandle=null,this.stateListenerHandle=null,this.webRecognition=null,this.restartTimeout=null,this.availabilityChecked=!1,this.isAvailable=!1,this.lastErrorTime=0,this.consecutiveFailures=0,this.micBusy=!1,this.onMicBusyChange=null,this.onRetryNeeded=null,this.sessionId="master",this.isRegistered=!1,this.isPaused=!1,this.captureDebounceTimeout=null,this.pendingCaptureTranscript="",this.shouldRestart=!0,this.restartPromise=null,this.isStarting=!1,this.expectedStops=0,this.isMuted=!1,this.muteTimeout=null}async checkAvailability(){if(this.availabilityChecked)return this.isAvailable;if(Dn)try{return await Sl()?(this.isAvailable=!0,this.availabilityChecked=!0,!0):(console.log("[VoiceMaster] Voice service not ready (permission denied or init failed)"),this.isAvailable=!1,this.availabilityChecked=!0,!1)}catch(t){return console.error("[VoiceMaster] Error checking availability:",t),this.isAvailable=!1,this.availabilityChecked=!0,!1}else{const t=typeof window<"u"?window.SpeechRecognition||window.webkitSpeechRecognition:null;return this.isAvailable=!!t,this.availabilityChecked=!0,this.isAvailable}}setOnMicBusyChange(t){this.onMicBusyChange=t}setOnRetryNeeded(t){this.onRetryNeeded=t}isMicBusy(){return this.micBusy}resetMicBusy(){this.micBusy=!1,this.consecutiveFailures=0,this.lastErrorTime=0,this.onMicBusyChange&&this.onMicBusyChange(!1)}mute(t=400){this.isMuted=!0,this.muteTimeout&&clearTimeout(this.muteTimeout),this.muteTimeout=setTimeout(()=>{this.isMuted=!1,this.muteTimeout=null,console.log("[VoiceMaster] Mute window ended, listening again")},t),console.log(`[VoiceMaster] Mute window started: ${t}ms`)}setMute(t,n=400){this.muteTimeout&&(clearTimeout(this.muteTimeout),this.muteTimeout=null),t?(this.isMuted=!0,console.log("[VoiceMaster] Software MUTE: transcripts will be ignored")):this.muteTimeout=setTimeout(()=>{this.isMuted=!1,this.muteTimeout=null,console.log("[VoiceMaster] Software UNMUTE: mic LIVE")},n)}getIsMuted(){return this.isMuted}triggerRestart(){if(this.restartPromise){console.log("[VoiceMaster] Restart already in progress, skipping duplicate.");return}this.restartPromise=(async()=>{try{if(console.log("[VoiceMaster] Serialized restart sequence initiating..."),this.expectedStops++,console.log("[VoiceMaster] triggerRestart: expectedStops incremented to",this.expectedStops),console.log("[VoiceMaster] triggerRestart: preparing to restart listening"),this.expectedStops=0,await new Promise(t=>setTimeout(t,100)),this.shouldRestart&&!this.micBusy){console.log("[VoiceMaster] triggerRestart: restarting mic capture");try{await ie.startListening()}catch(t){console.warn("[VoiceMaster] triggerRestart startListening failed, scheduling retry:",t),setTimeout(()=>{this.shouldRestart&&!this.micBusy&&!this.restartPromise&&this.triggerRestart()},200)}}else console.log("[VoiceMaster] triggerRestart: shouldRestart=false or micBusy, skipping")}catch(t){console.warn("[VoiceMaster] Restart sequence failed:",t),setTimeout(()=>{this.shouldRestart&&!this.micBusy&&!this.restartPromise&&this.triggerRestart()},200)}finally{this.restartPromise=null}})()}async pauseLoop(){console.log("[VoiceMaster] Pausing Loop for TTS"),this.shouldRestart=!1,Dn&&console.log("[VoiceMaster] pauseLoop: mic paused (flag set, results ignored)")}resumeLoop(){if(console.log("[VoiceMaster] Resuming Loop after TTS"),this.shouldRestart=!0,!this.config){console.log("[VoiceMaster] resumeLoop: no config, skipping");return}this.triggerRestart()}getShouldRestartLoop(){return this.shouldRestart}async start(t){return this.micBusy=!1,this.isListening=!1,this.consecutiveFailures=0,this.isPaused=!1,this.shouldRestart=!0,this.isMuted=!1,console.log("[VoiceMaster] Atomic reset: state cleared for fresh start, loop enabled"),(this.listenerHandle||this.webRecognition||this.shouldBeListening)&&(console.log("[VoiceMaster] Clean handoff: stopping previous session"),await this.stop(),await new Promise(r=>setTimeout(r,100))),this.config=t,await this.checkAvailability()?(this.isRegistered||(es.register({id:this.sessionId,pause:()=>this.pauseInternal(),resume:()=>this.resumeInternal(),shouldBeActive:!0}),this.isRegistered=!0),es.setActive(this.sessionId,!0),Bi.register(this.sessionId),this.shouldBeListening=!0,console.log(`[VoiceMaster] Starting in '${t.mode}' mode`),es.canStartMic()?Dn?this.startNative():this.startWeb():(console.log("[VoiceMaster] TTS active or settling, queueing start for after TTS"),es.queueRestart(this.sessionId),t.onListeningChange&&t.onListeningChange(!0),!0)):(console.log("[VoiceMaster] Not available, cannot start"),!1)}setLegalMoves(t){this.config&&(this.config.legalMoves=t)}processTranscript(t){if(!this.config||!this.shouldBeListening)return;if(this.isMuted){console.log("[VoiceMaster] Ignoring transcript during mute window:",t);return}const n=this.config.mode;switch(console.log(`[VoiceMaster] Processing in '${n}' mode:`,t),n){case"raw":this.config.onTranscript(t);break;case"move":this.processMoveMode(t);break;case"placement":this.processPlacementMode(t);break}}processMoveMode(t){if(!this.config)return;const n=t.toLowerCase(),r=n.includes("takes")||n.includes("captures"),s=/\b(knight|bishop|rook|queen|king|horse|castle)\b/.test(n),i=/[a-h]\s*[1-8]/.test(n);if((s||r)&&!i){console.log("[VoiceMaster] Piece/capture detected, waiting for target square..."),this.pendingCaptureTranscript=t,this.captureDebounceTimeout&&clearTimeout(this.captureDebounceTimeout),this.captureDebounceTimeout=setTimeout(()=>{var c,u;console.log("[VoiceMaster] Debounce timeout, processing:",this.pendingCaptureTranscript);const l=Wv(this.pendingCaptureTranscript,((c=this.config)==null?void 0:c.legalMoves)||[]);(u=this.config)==null||u.onTranscript(this.pendingCaptureTranscript,l),this.pendingCaptureTranscript=""},hi.CAPTURE_DEBOUNCE_MS);return}this.pendingCaptureTranscript&&i&&(this.captureDebounceTimeout&&(clearTimeout(this.captureDebounceTimeout),this.captureDebounceTimeout=null),this.pendingCaptureTranscript="");const a=Wv(t,this.config.legalMoves||[]);this.config.onTranscript(t,a)}processPlacementMode(t){this.config&&this.config.onTranscript(t)}pauseInternal(){var t;if(console.log(`[VoiceMaster] pauseInternal called - isListening=${this.isListening}, shouldBeListening=${this.shouldBeListening}`),this.shouldRestart=!1,!this.isListening){console.log("[VoiceMaster] Not pausing - already not listening");return}if(this.isPaused=!0,console.log("[VoiceMaster] Pausing for TTS"),Dn)console.log("[VoiceMaster] Pausing - mic will resume on TTS end");else if(this.webRecognition)try{this.webRecognition.stop()}catch(n){console.log("[VoiceMaster] Web pause error:",n)}this.isListening=!1,(t=this.config)!=null&&t.onListeningChange&&this.config.onListeningChange(!1),console.log("[VoiceMaster] pauseInternal complete - isListening now false")}async resumeInternal(){if(console.log(`[VoiceMaster] resumeInternal called - shouldBeListening=${this.shouldBeListening}, isListening=${this.isListening}, isPaused=${this.isPaused}`),!this.shouldBeListening){console.log("[VoiceMaster] Not resuming - shouldBeListening is false");return}if(this.isListening){console.log("[VoiceMaster] Already listening, skipping resume");return}if(this.isPaused=!1,this.shouldRestart=!0,console.log("[VoiceMaster] Resuming after TTS"),Dn){if(this.restartPromise){console.log("[VoiceMaster] Waiting for pending restart to complete...");try{await this.restartPromise}catch{}}this.triggerRestart()}else this.startWeb()}async startNative(){var n;if(this.isStarting)return console.log("[VoiceMaster] startNative blocked: Already starting"),!1;if(this.micBusy)return console.log("[VoiceMaster] Mic is busy, not starting"),!1;const t=Date.now()-this.lastErrorTime;if(t<3e3&&this.lastErrorTime>0)return console.log(`[VoiceMaster] Lockout: ${3e3-t}ms remaining, queueing restart`),this.restartTimeout||this.scheduleRestart(),!0;this.isStarting=!0;try{return this.listenerHandle&&(await this.listenerHandle.remove(),this.listenerHandle=null),this.listenerHandle=await ie.addListener("onSpeechResult",r=>{if(!this.shouldRestart){console.log("[VoiceMaster] Loop paused, ignoring speech result");return}if(r.text&&this.shouldBeListening){const s=r.text;this.consecutiveFailures=0,this.processTranscript(s),this.shouldRestart&&this.shouldBeListening&&ie.startListening().catch(i=>{console.log("[VoiceMaster] startListening error after result:",i)})}}),console.log("[VoiceMaster] Starting BlindfoldNative session..."),await ie.startSession(),console.log("[VoiceMaster] Starting BlindfoldNative listening..."),await ie.startListening(),this.isListening=!0,this.consecutiveFailures=0,console.log("[VoiceMaster] Started native - isListening=true, shouldBeListening="+this.shouldBeListening),(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!0),await nb(),!0}catch(r){return console.error("[VoiceMaster] Failed to start native:",r),this.lastErrorTime=Date.now(),this.consecutiveFailures++,this.consecutiveFailures>=hi.MAX_CONSECUTIVE_FAILURES?(console.log("[VoiceMaster] Too many failures, mic is busy"),this.micBusy=!0,this.isListening=!1,this.onMicBusyChange&&this.onMicBusyChange(!0),this.onRetryNeeded&&this.onRetryNeeded(),!1):(this.shouldBeListening&&this.scheduleRestart(),!1)}finally{this.isStarting=!1}}startWeb(){try{const t=window.SpeechRecognition||window.webkitSpeechRecognition;return t?(this.webRecognition=new t,this.webRecognition.continuous=!0,this.webRecognition.interimResults=!1,this.webRecognition.lang="en-US",this.webRecognition.onresult=n=>{const r=n.results[n.results.length-1];if(r.isFinal&&this.shouldBeListening){const s=r[0].transcript;this.processTranscript(s)}},this.webRecognition.onerror=n=>{console.log("[VoiceMaster] Web error:",n.error),n.error!=="aborted"&&n.error!=="not-allowed"&&this.shouldBeListening&&this.scheduleRestart()},this.webRecognition.onend=()=>{var n;this.isListening=!1,(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!1),this.shouldBeListening&&this.scheduleRestart()},this.webRecognition.onstart=()=>{var n;this.isListening=!0,(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!0)},this.webRecognition.start(),console.log("[VoiceMaster] Started web"),!0):!1}catch(t){return console.error("[VoiceMaster] Failed to start web:",t),!1}}scheduleRestart(){const t=Date.now()-this.lastErrorTime;if(t<3e3&&this.lastErrorTime>0){this.restartTimeout&&clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>{this.scheduleRestart()},3e3-t+100);return}if(this.micBusy){console.log("[VoiceMaster] Mic busy, not scheduling restart");return}this.restartTimeout&&clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>{this.shouldBeListening&&!this.micBusy&&(console.log("[VoiceMaster] Scheduled restart firing via Gatekeeper"),Dn?this.triggerRestart():this.startWeb())},500)}async stop(){var t;if(console.log("[VoiceMaster] stop() called - beginning full cleanup"),this.shouldBeListening=!1,this.isPaused=!1,this.micBusy=!1,this.consecutiveFailures=0,this.lastErrorTime=0,this.captureDebounceTimeout&&(clearTimeout(this.captureDebounceTimeout),this.captureDebounceTimeout=null),this.pendingCaptureTranscript="",es.setActive(this.sessionId,!1),es.clearPendingForSession(this.sessionId),this.isRegistered&&(es.unregister(this.sessionId),Bi.unregister(this.sessionId),this.isRegistered=!1),this.restartTimeout&&(clearTimeout(this.restartTimeout),this.restartTimeout=null),Dn)try{await ie.stopSession(),this.listenerHandle&&(await this.listenerHandle.remove(),this.listenerHandle=null)}catch(n){console.log("[VoiceMaster] Stop error:",n)}else if(this.webRecognition){try{this.webRecognition.stop()}catch(n){console.log("[VoiceMaster] Web stop error:",n)}this.webRecognition=null}this.isListening=!1,(t=this.config)!=null&&t.onListeningChange&&this.config.onListeningChange(!1),this.config=null,console.log("[VoiceMaster] Stopped - all state reset, session fully cleaned")}async stopAndWait(){var n;if(this.shouldBeListening=!1,!this.listenerHandle&&!this.webRecognition){console.log("[VoiceMaster] stopAndWait: nothing to stop, fast path"),this.micBusy=!1,this.isListening=!1,this.consecutiveFailures=0,this.isPaused=!1,this.config=null;return}console.log("[VoiceMaster] stopAndWait: active session, stopping...");const t=async()=>{let r=!1;const s=this.stop().then(()=>{r=!0});if(await Promise.race([s,new Promise(i=>setTimeout(i,500))]),!r){if(console.warn("[VoiceMaster] Normal stop timed out, forcing native stop"),Dn)try{await ie.stopSession()}catch{}if(this.listenerHandle){try{await this.listenerHandle.remove()}catch{}this.listenerHandle=null}if(this.webRecognition){try{this.webRecognition.stop()}catch{}this.webRecognition=null}}};await Promise.race([t(),new Promise(r=>setTimeout(()=>{console.warn("[VoiceMaster] 800ms hard timeout - forcing cleanup"),r()},800))]),this.micBusy=!1,this.isListening=!1,this.consecutiveFailures=0,this.isPaused=!1,this.listenerHandle=null,this.stateListenerHandle=null,this.webRecognition=null,(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!1),this.config=null,console.log("[VoiceMaster] stopAndWait complete - state reset")}getIsListening(){return this.isListening}getMode(){var t;return((t=this.config)==null?void 0:t.mode)||null}};hi.CAPTURE_DEBOUNCE_MS=2e3,hi.MAX_CONSECUTIVE_FAILURES=3;let Rh=hi;const ut=new Rh,Zv={async start(e,t){return ut.start({mode:"raw",onTranscript:e,onListeningChange:t})},async stop(){return ut.stop()},async stopAndWait(){return ut.stopAndWait()},async checkAvailability(){return ut.checkAvailability()},getIsListening(){return ut.getIsListening()},setOnMicBusyChange(e){ut.setOnMicBusyChange(e)},setOnRetryNeeded(e){ut.setOnRetryNeeded(e)},isMicBusy(){return ut.isMicBusy()},resetMicBusy(){ut.resetMicBusy()},mute(e=400){ut.mute(e)},setMute(e,t=400){ut.setMute(e,t)},getIsMuted(){return ut.getIsMuted()},async pauseLoop(){return ut.pauseLoop()},resumeLoop(){ut.resumeLoop()}};function hu(e){const t=Math.max(400,Math.min(2600,e));if(t<=600){const i=(t-400)/200;return{elo:t,depth:1,randomPercent:Math.round(50-i*20),skillLevel:Math.round(i*2)}}if(t<=800){const i=(t-600)/200;return{elo:t,depth:1+Math.round(i),randomPercent:Math.round(30-i*10),skillLevel:Math.round(2+i*3)}}if(t<=1e3){const i=(t-800)/200;return{elo:t,depth:2+Math.round(i),randomPercent:Math.round(20-i*8),skillLevel:Math.round(5+i*3)}}if(t<=1200){const i=(t-1e3)/200;return{elo:t,depth:3+Math.round(i),randomPercent:Math.round(12-i*5),skillLevel:Math.round(8+i*2)}}if(t<=1400){const i=(t-1200)/200;return{elo:t,depth:4+Math.round(i),randomPercent:Math.round(7-i*4),skillLevel:Math.round(10+i*2)}}if(t<=1600){const i=(t-1400)/200;return{elo:t,depth:5+Math.round(i),randomPercent:Math.round(3-i*3),skillLevel:Math.round(12+i*3)}}if(t<=1800){const i=(t-1600)/200;return{elo:t,depth:6,randomPercent:0,skillLevel:Math.round(15+i*2)}}const n=(t-1800)/800,r=2e5;return{elo:t,depth:0,randomPercent:0,skillLevel:Math.round(17+n*3),nodes:Math.round(r+n*(2e6-r))}}function ER(e){return e<=600?"Beginner":e<=800?"Novice":e<=1e3?"Casual":e<=1200?"Intermediate":e<=1400?"Club Player":e<=1600?"Strong Club":e<=1800?"Expert":e<=2e3?"Master":e<=2200?"National Master":e<=2400?"International Master":"Grandmaster"}const ob=[400,600,800,1e3,1200,1400,1600,1800,2e3,2200,2400,2600];ob.map(e=>{const t=hu(e);return{id:`elo_${e}`,elo:e,difficulty:`elo_${e}`,depth:t.depth,randomPercent:t.randomPercent}});const jp=ob,PR={kingsideCornerWhite:["f1","g1","h1","f2","g2","h2"],queensideCornerWhite:["a1","b1","c1","a2","b2","c2"],kingsideCornerBlack:["f8","g8","h8","f7","g7","h7"],queensideCornerBlack:["a8","b8","c8","a7","b7","c7"],center:["d4","e4","d5","e5"],extendedCenter:["c3","d3","e3","f3","c4","f4","c5","f5","c6","d6","e6","f6"],kingside:["f1","g1","h1","f2","g2","h2","f3","g3","h3","f4","g4","h4","f5","g5","h5","f6","g6","h6","f7","g7","h7","f8","g8","h8"],queenside:["a1","b1","c1","a2","b2","c2","a3","b3","c3","a4","b4","c4","a5","b5","c5","a6","b6","c6","a7","b7","c7","a8","b8","c8"],corners:["a1","h1","a8","h8"]},ib="blindfold-chess-stats-v2",ab="blindfold-chess-settings",TR="blindfold-chess-stats",lb={moves10:{total:0,count:0},moves20:{total:0,count:0},moves30:{total:0,count:0},moves40:{total:0,count:0},moves50plus:{total:0,count:0}},cb={opening:{total:0,count:0},middlegame:{total:0,count:0},endgame:{total:0,count:0}},Cp={wins:0,draws:0,losses:0,lastGamePeekTime:0,totalPeekTime:0,gamesWithPeeks:0,bestPeekFreeStreak:0,lastGamePeekFreeStreak:0,lastGameAvgResponseTime:0,totalResponseTime:0,totalResponseMoves:0,bestClarityScore:0,lastClarityScore:0,lastVoicePurity:0,bestVoicePurity:0,tierStats:{},visualizationCeiling:0,visualizationCeilingElo:null,clarityByMoveCount:{...lb},totalPeekFreeGames:0,totalGamesPlayed:0,reconstructionVoiceInputs:0,reconstructionTouchInputs:0,gameVoiceMoves:0,gameTouchMoves:0,responseTimeByPhase:{...cb},lastGameEndgameDrift:0,voiceCorrections:0,voiceCommandsTotal:0,lastGameVoiceCorrections:0,mentalBlurCount:0,squareInquiryHeatmap:{},totalSquareInquiries:0,stockfishThresholdElo:null,longestGame:0,fastestWin:0,currentWinStreak:0,bestWinStreak:0,currentPeekFreeStreak:0,bestPeekFreeGameStreak:0,blindfoldGamesPlayed:0,assistedGamesCount:0,lastGameWasAssisted:!1},Jv={boardReconstructionEnabled:!1,botThinkingTimeEnabled:!1,keepAwakeEnabled:!0};function e0(e){const t={...Cp,...e};return t.clarityByMoveCount={...lb,...e.clarityByMoveCount||{}},t.responseTimeByPhase={...cb,...e.responseTimeByPhase||{}},t.tierStats=e.tierStats||{},t.squareInquiryHeatmap=e.squareInquiryHeatmap||{},t}function Fa(){try{const e=localStorage.getItem(ib);if(e){const n=JSON.parse(e);return e0(n)}const t=localStorage.getItem(TR);if(t){const n=JSON.parse(t),r=e0(n);return Ep(r),r}}catch(e){console.error("Failed to load stats:",e)}return{...Cp}}function Ep(e){try{localStorage.setItem(ib,JSON.stringify(e))}catch(t){console.error("Failed to save stats:",t)}}function Mh(){try{const e=localStorage.getItem(ab);if(e){const t=JSON.parse(e);return{...Jv,...t}}}catch(e){console.error("Failed to load settings:",e)}return{...Jv}}function _h(e){try{localStorage.setItem(ab,JSON.stringify(e))}catch(t){console.error("Failed to save settings:",t)}}function RR(e){return e<=10?"moves10":e<=20?"moves20":e<=30?"moves30":e<=40?"moves40":"moves50plus"}function ub(e){return{opening:e.slice(0,10),middlegame:e.slice(10,30),endgame:e.slice(30)}}function MR(e){const t=ub(e);if(t.opening.length===0||t.endgame.length===0)return 0;const n=t.opening.reduce((i,a)=>i+a,0)/t.opening.length,r=t.endgame.reduce((i,a)=>i+a,0)/t.endgame.length;if(n===0)return 0;const s=(r-n)/n*100;return Math.max(0,Math.round(s))}function _R(e){if(e.length<3)return 0;const n=e.reduce((r,s)=>r+s,0)/e.length*2;return e.filter(r=>r>n).length}function AR(e){for(const t of jp){const n=e[t];if(!n||n.totalGames<3)continue;if(n.wins/n.totalGames<.5)return t}return null}function LR(e){let t=0;for(const n of jp){const r=e[n];r&&r.peekFreeWins>0&&n>t&&(t=n)}return{elo:t}}function IR(e,t,n=0,r=[],s,i,a){const l=Fa(),c=(a==null?void 0:a.botElo)||1200,u=(a==null?void 0:a.wasPeekFree)??t===0,f=(a==null?void 0:a.totalMoves)||r.length,m=(a==null?void 0:a.voiceCorrections)||0,h=(a==null?void 0:a.voiceCommands)||0,y=(a==null?void 0:a.reconstructionVoiceInputs)||0,p=(a==null?void 0:a.reconstructionTouchInputs)||0,g=(a==null?void 0:a.gameVoiceMoves)||0,w=(a==null?void 0:a.gameTouchMoves)||0,x=(a==null?void 0:a.squareInquiries)||[],v=(a==null?void 0:a.isBlindfold)??!1,b=(a==null?void 0:a.wasAssisted)??!1;e==="win"?l.wins++:e==="loss"?l.losses++:l.draws++,l.totalGamesPlayed++,v?(l.blindfoldGamesPlayed++,l.lastGamePeekTime=t,t>0&&(l.totalPeekTime+=t,l.gamesWithPeeks++),u?(l.totalPeekFreeGames++,l.currentPeekFreeStreak++,l.currentPeekFreeStreak>l.bestPeekFreeGameStreak&&(l.bestPeekFreeGameStreak=l.currentPeekFreeStreak)):l.currentPeekFreeStreak=0,l.lastGamePeekFreeStreak=n,n>l.bestPeekFreeStreak&&(l.bestPeekFreeStreak=n)):(l.lastGamePeekTime=0,l.lastGamePeekFreeStreak=0,l.currentPeekFreeStreak=0),l.tierStats[c]||(l.tierStats[c]={wins:0,losses:0,draws:0,peekFreeWins:0,totalPeeks:0,totalGames:0});const S=l.tierStats[c];S.totalGames++,e==="win"?(S.wins++,v&&u&&S.peekFreeWins++,l.currentWinStreak++,l.currentWinStreak>l.bestWinStreak&&(l.bestWinStreak=l.currentWinStreak),(l.fastestWin===0||f<l.fastestWin)&&(l.fastestWin=f)):e==="loss"?(S.losses++,l.currentWinStreak=0):S.draws++,v&&!u&&S.totalPeeks++,f>l.longestGame&&(l.longestGame=f);const N=LR(l.tierStats);if(l.visualizationCeiling=N.elo,l.visualizationCeilingElo=N.elo||null,l.stockfishThresholdElo=AR(l.tierStats),r.length>0){const j=r.reduce((C,R)=>C+R,0)/r.length;l.lastGameAvgResponseTime=j,l.totalResponseTime+=r.reduce((C,R)=>C+R,0),l.totalResponseMoves+=r.length;const k=ub(r);k.opening.length>0&&(l.responseTimeByPhase.opening.total+=k.opening.reduce((C,R)=>C+R,0),l.responseTimeByPhase.opening.count+=k.opening.length),k.middlegame.length>0&&(l.responseTimeByPhase.middlegame.total+=k.middlegame.reduce((C,R)=>C+R,0),l.responseTimeByPhase.middlegame.count+=k.middlegame.length),k.endgame.length>0&&(l.responseTimeByPhase.endgame.total+=k.endgame.reduce((C,R)=>C+R,0),l.responseTimeByPhase.endgame.count+=k.endgame.length),l.lastGameEndgameDrift=MR(r),l.mentalBlurCount+=_R(r)}else l.lastGameAvgResponseTime=0,l.lastGameEndgameDrift=0;if(l.lastGameWasAssisted=b,b&&l.assistedGamesCount++,s!==void 0){const j=b?Math.min(s,50):s;l.lastClarityScore=j,j>l.bestClarityScore&&(l.bestClarityScore=j);const k=RR(f);l.clarityByMoveCount[k].total+=j,l.clarityByMoveCount[k].count++}if(i!==void 0&&(l.lastVoicePurity=i,i>l.bestVoicePurity&&(l.bestVoicePurity=i)),l.voiceCorrections+=m,l.voiceCommandsTotal+=h,l.lastGameVoiceCorrections=m,l.reconstructionVoiceInputs+=y,l.reconstructionTouchInputs+=p,l.gameVoiceMoves+=g,l.gameTouchMoves+=w,x.length>0){l.totalSquareInquiries+=x.length;for(const j of x){const k=j.toLowerCase();l.squareInquiryHeatmap[k]=(l.squareInquiryHeatmap[k]||0)+1}}return Ep(l),l}function $R(e){return e.totalResponseMoves===0?0:e.totalResponseTime/e.totalResponseMoves}function db(e){const t=e.blindfoldGamesPlayed||0;return t===0?0:Math.round(e.totalPeekFreeGames/t*100)}function OR(e){const t=e.gameVoiceMoves+e.gameTouchMoves;return t===0?{voice:0,touch:0}:{voice:Math.round(e.gameVoiceMoves/t*100),touch:Math.round(e.gameTouchMoves/t*100)}}function fb(e){const t=e.responseTimeByPhase.opening,n=e.responseTimeByPhase.middlegame,r=e.responseTimeByPhase.endgame;return{opening:t.count>0?Math.round(t.total/t.count):0,middlegame:n.count>0?Math.round(n.total/n.count):0,endgame:r.count>0?Math.round(r.total/r.count):0}}function hb(e){const t=e.clarityByMoveCount;return{moves10:t.moves10.count>0?Math.round(t.moves10.total/t.moves10.count):0,moves20:t.moves20.count>0?Math.round(t.moves20.total/t.moves20.count):0,moves30:t.moves30.count>0?Math.round(t.moves30.total/t.moves30.count):0,moves40:t.moves40.count>0?Math.round(t.moves40.total/t.moves40.count):0,moves50plus:t.moves50plus.count>0?Math.round(t.moves50plus.total/t.moves50plus.count):0}}function mb(e){return e.voiceCommandsTotal===0?0:Math.round(e.voiceCorrections/e.voiceCommandsTotal*100)}function DR(e){const t={kingsideCornerWhite:0,queensideCornerWhite:0,kingsideCornerBlack:0,queensideCornerBlack:0,center:0,extendedCenter:0,kingside:0,queenside:0,corners:0};for(const[n,r]of Object.entries(e.squareInquiryHeatmap))for(const[s,i]of Object.entries(PR))i.includes(n)&&(t[s]+=r||0);return t}function pb(e,t=5){return Object.entries(e.squareInquiryHeatmap).map(([n,r])=>({square:n,count:r||0})).sort((n,r)=>r.count-n.count).slice(0,t)}function BR(e,t){if(e.totalSquareInquiries===0)return 0;const n=e.squareInquiryHeatmap[t.toLowerCase()]||0,r=Math.max(...Object.values(e.squareInquiryHeatmap).map(s=>s||0),1);return Math.round(n/r*100)}function FR(e,t){const n=e.tierStats[t];return!n||n.totalGames===0?0:Math.round(n.wins/n.totalGames*100)}function ci(e){return e===0?"-":e<1e3?`${Math.round(e)}ms`:`${(e/1e3).toFixed(1)}s`}function zR(){Ep({...Cp})}function VR(e){const t=[],n=hb(e);n.moves20>0&&n.moves40>0&&n.moves20-n.moves40>20&&t.push({type:"warning",category:"visualization",title:"Clarity Degradation",message:`Your accuracy drops from ${n.moves20}% at 20 moves to ${n.moves40}% at 40 moves. Focus on endgame visualization training.`}),e.visualizationCeiling>0&&t.push({type:"success",category:"visualization",title:"Visualization Ceiling",message:`You've beaten a ${e.visualizationCeiling} Elo bot without peeking! Keep pushing higher.`});const r=db(e);r>50&&t.push({type:"success",category:"visualization",title:"Peek-Free Progress",message:`${r}% of your games are peek-free. Your visualization is improving!`});const s=fb(e);if(s.endgame>0&&s.opening>0){const f=(s.endgame-s.opening)/s.opening*100;f>50&&t.push({type:"warning",category:"cognitive",title:"Endgame Drift Detected",message:`Your endgame response time is ${Math.round(f)}% slower than opening. The open board may be causing "mental blur."`})}const i=mb(e);i>20&&t.push({type:"tip",category:"cognitive",title:"Voice Accuracy",message:`You correct ${i}% of voice commands. Try speaking more slowly or using full square names.`}),e.stockfishThresholdElo&&t.push({type:"info",category:"tactical",title:"Stockfish Threshold",message:`Your win rate drops below 50% at ${e.stockfishThresholdElo} Elo. Focus training at this level.`});const a=DR(e),l=pb(e,3);if(l.length>0&&l[0].count>=3){const f=l.map(m=>m.square.toUpperCase()).join(", ");t.push({type:"warning",category:"tactical",title:"Board Blind Spots",message:`You frequently lose track of: ${f}. Focus on visualizing these squares.`})}const c=a.kingside,u=a.queenside;return c>u*2&&c>=5?t.push({type:"tip",category:"tactical",title:"Kingside Visualization",message:"Your mental image of the kingside is weaker. Practice visualizing the f, g, and h files."}):u>c*2&&u>=5&&t.push({type:"tip",category:"tactical",title:"Queenside Visualization",message:"Your mental image of the queenside is weaker. Practice visualizing the a, b, and c files."}),a.corners>=4&&t.push({type:"tip",category:"visualization",title:"Corner Awareness",message:"Your mental board is blurry in the corners (a1, h1, a8, h8). These squares need more focus."}),t}class gb{constructor(t){this.sqlite=t,this._connectionDict=new Map}async initWebStore(){try{return await this.sqlite.initWebStore(),Promise.resolve()}catch(t){return Promise.reject(t)}}async saveToStore(t){try{return await this.sqlite.saveToStore({database:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async saveToLocalDisk(t){try{return await this.sqlite.saveToLocalDisk({database:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async getFromLocalDiskToStore(t){const n=t??!0;try{return await this.sqlite.getFromLocalDiskToStore({overwrite:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async echo(t){try{const n=await this.sqlite.echo({value:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isSecretStored(){try{const t=await this.sqlite.isSecretStored();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async setEncryptionSecret(t){try{return await this.sqlite.setEncryptionSecret({passphrase:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async changeEncryptionSecret(t,n){try{return await this.sqlite.changeEncryptionSecret({passphrase:t,oldpassphrase:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async clearEncryptionSecret(){try{return await this.sqlite.clearEncryptionSecret(),Promise.resolve()}catch(t){return Promise.reject(t)}}async checkEncryptionSecret(t){try{const n=await this.sqlite.checkEncryptionSecret({passphrase:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async addUpgradeStatement(t,n){try{return t.endsWith(".db")&&(t=t.slice(0,-3)),await this.sqlite.addUpgradeStatement({database:t,upgrade:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async createConnection(t,n,r,s,i){try{t.endsWith(".db")&&(t=t.slice(0,-3)),await this.sqlite.createConnection({database:t,encrypted:n,mode:r,version:s,readonly:i});const a=new t0(t,i,this.sqlite),l=i?`RO_${t}`:`RW_${t}`;return this._connectionDict.set(l,a),Promise.resolve(a)}catch(a){return Promise.reject(a)}}async closeConnection(t,n){try{t.endsWith(".db")&&(t=t.slice(0,-3)),await this.sqlite.closeConnection({database:t,readonly:n});const r=n?`RO_${t}`:`RW_${t}`;return this._connectionDict.delete(r),Promise.resolve()}catch(r){return Promise.reject(r)}}async isConnection(t,n){const r={};t.endsWith(".db")&&(t=t.slice(0,-3));const s=n?`RO_${t}`:`RW_${t}`;return r.result=this._connectionDict.has(s),Promise.resolve(r)}async retrieveConnection(t,n){t.endsWith(".db")&&(t=t.slice(0,-3));const r=n?`RO_${t}`:`RW_${t}`;if(this._connectionDict.has(r)){const s=this._connectionDict.get(r);return typeof s<"u"?Promise.resolve(s):Promise.reject(`Connection ${t} is undefined`)}else return Promise.reject(`Connection ${t} does not exist`)}async getNCDatabasePath(t,n){try{const r=await this.sqlite.getNCDatabasePath({path:t,database:n});return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async createNCConnection(t,n){try{await this.sqlite.createNCConnection({databasePath:t,version:n});const r=new t0(t,!0,this.sqlite),s=`RO_${t})`;return this._connectionDict.set(s,r),Promise.resolve(r)}catch(r){return Promise.reject(r)}}async closeNCConnection(t){try{await this.sqlite.closeNCConnection({databasePath:t});const n=`RO_${t})`;return this._connectionDict.delete(n),Promise.resolve()}catch(n){return Promise.reject(n)}}async isNCConnection(t){const n={},r=`RO_${t})`;return n.result=this._connectionDict.has(r),Promise.resolve(n)}async retrieveNCConnection(t){if(this._connectionDict.has(t)){const n=`RO_${t})`,r=this._connectionDict.get(n);return typeof r<"u"?Promise.resolve(r):Promise.reject(`Connection ${t} is undefined`)}else return Promise.reject(`Connection ${t} does not exist`)}async isNCDatabase(t){try{const n=await this.sqlite.isNCDatabase({databasePath:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async retrieveAllConnections(){return this._connectionDict}async closeAllConnections(){const t=new Map;try{for(const n of this._connectionDict.keys()){const r=n.substring(3),s=n.substring(0,3)==="RO_";await this.sqlite.closeConnection({database:r,readonly:s}),t.set(n,null)}for(const n of t.keys())this._connectionDict.delete(n);return Promise.resolve()}catch(n){return Promise.reject(n)}}async checkConnectionsConsistency(){try{const t=[...this._connectionDict.keys()],n=[],r=[];for(const i of t)n.push(i.substring(0,2)),r.push(i.substring(3));const s=await this.sqlite.checkConnectionsConsistency({dbNames:r,openModes:n});return s.result||(this._connectionDict=new Map),Promise.resolve(s)}catch(t){return this._connectionDict=new Map,Promise.reject(t)}}async importFromJson(t){try{const n=await this.sqlite.importFromJson({jsonstring:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isJsonValid(t){try{const n=await this.sqlite.isJsonValid({jsonstring:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async copyFromAssets(t){const n=t??!0;try{return await this.sqlite.copyFromAssets({overwrite:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async getFromHTTPRequest(t,n){const r=n??!0;try{return await this.sqlite.getFromHTTPRequest({url:t,overwrite:r}),Promise.resolve()}catch(s){return Promise.reject(s)}}async isDatabaseEncrypted(t){t.endsWith(".db")&&(t=t.slice(0,-3));try{const n=await this.sqlite.isDatabaseEncrypted({database:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isInConfigEncryption(){try{const t=await this.sqlite.isInConfigEncryption();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isInConfigBiometricAuth(){try{const t=await this.sqlite.isInConfigBiometricAuth();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isDatabase(t){t.endsWith(".db")&&(t=t.slice(0,-3));try{const n=await this.sqlite.isDatabase({database:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async getDatabaseList(){try{const n=(await this.sqlite.getDatabaseList()).values;n.sort();const r={values:n};return Promise.resolve(r)}catch(t){return Promise.reject(t)}}async getMigratableDbList(t){const n=t||"default";try{const r=await this.sqlite.getMigratableDbList({folderPath:n});return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async addSQLiteSuffix(t,n){const r=t||"default",s=n||[];try{const i=await this.sqlite.addSQLiteSuffix({folderPath:r,dbNameList:s});return Promise.resolve(i)}catch(i){return Promise.reject(i)}}async deleteOldDatabases(t,n){const r=t||"default",s=n||[];try{const i=await this.sqlite.deleteOldDatabases({folderPath:r,dbNameList:s});return Promise.resolve(i)}catch(i){return Promise.reject(i)}}async moveDatabasesAndAddSuffix(t,n){const r=t||"default",s=n||[];return this.sqlite.moveDatabasesAndAddSuffix({folderPath:r,dbNameList:s})}}class t0{constructor(t,n,r){this.dbName=t,this.readonly=n,this.sqlite=r}getConnectionDBName(){return this.dbName}getConnectionReadOnly(){return this.readonly}async open(){try{return await this.sqlite.open({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async close(){try{return await this.sqlite.close({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async beginTransaction(){try{const t=await this.sqlite.beginTransaction({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async commitTransaction(){try{const t=await this.sqlite.commitTransaction({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async rollbackTransaction(){try{const t=await this.sqlite.rollbackTransaction({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isTransactionActive(){try{const t=await this.sqlite.isTransactionActive({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async loadExtension(t){try{return await this.sqlite.loadExtension({database:this.dbName,path:t,readonly:this.readonly}),Promise.resolve()}catch(n){return Promise.reject(n)}}async enableLoadExtension(t){try{return await this.sqlite.enableLoadExtension({database:this.dbName,toggle:t,readonly:this.readonly}),Promise.resolve()}catch(n){return Promise.reject(n)}}async getUrl(){try{const t=await this.sqlite.getUrl({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getVersion(){try{const t=await this.sqlite.getVersion({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getTableList(){try{const t=await this.sqlite.getTableList({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async execute(t,n=!0,r=!0){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const s=await this.sqlite.execute({database:this.dbName,statements:t,transaction:n,readonly:!1,isSQL92:r});return Promise.resolve(s)}}catch(s){return Promise.reject(s)}}async query(t,n,r=!0){let s;try{return n&&n.length>0?s=await this.sqlite.query({database:this.dbName,statement:t,values:n,readonly:this.readonly,isSQL92:!0}):s=await this.sqlite.query({database:this.dbName,statement:t,values:[],readonly:this.readonly,isSQL92:r}),s=await this.reorderRows(s),Promise.resolve(s)}catch(i){return Promise.reject(i)}}async run(t,n,r=!0,s="no",i=!0){let a;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(n&&n.length>0?a=await this.sqlite.run({database:this.dbName,statement:t,values:n,transaction:r,readonly:!1,returnMode:s,isSQL92:!0}):a=await this.sqlite.run({database:this.dbName,statement:t,values:[],transaction:r,readonly:!1,returnMode:s,isSQL92:i}),a.changes=await this.reorderRows(a.changes),Promise.resolve(a))}catch(l){return Promise.reject(l)}}async executeSet(t,n=!0,r="no",s=!0){let i;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(i=await this.sqlite.executeSet({database:this.dbName,set:t,transaction:n,readonly:!1,returnMode:r,isSQL92:s}),i.changes=await this.reorderRows(i.changes),Promise.resolve(i))}catch(a){return Promise.reject(a)}}async isExists(){try{const t=await this.sqlite.isDBExists({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isTable(t){try{const n=await this.sqlite.isTableExists({database:this.dbName,table:t,readonly:this.readonly});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isDBOpen(){try{const t=await this.sqlite.isDBOpen({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async delete(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteDatabase({database:this.dbName,readonly:!1}),Promise.resolve())}catch(t){return Promise.reject(t)}}async createSyncTable(){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const t=await this.sqlite.createSyncTable({database:this.dbName,readonly:!1});return Promise.resolve(t)}}catch(t){return Promise.reject(t)}}async setSyncDate(t){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.setSyncDate({database:this.dbName,syncdate:t,readonly:!1}),Promise.resolve())}catch(n){return Promise.reject(n)}}async getSyncDate(){try{const t=await this.sqlite.getSyncDate({database:this.dbName,readonly:this.readonly});let n="";return t.syncDate>0&&(n=new Date(t.syncDate*1e3).toISOString()),Promise.resolve(n)}catch(t){return Promise.reject(t)}}async exportToJson(t,n=!1){try{const r=await this.sqlite.exportToJson({database:this.dbName,jsonexportmode:t,readonly:this.readonly,encrypted:n});return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async deleteExportedRows(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteExportedRows({database:this.dbName,readonly:!1}),Promise.resolve())}catch(t){return Promise.reject(t)}}async executeTransaction(t,n=!0){let r=0,s=!1;if(this.readonly)return Promise.reject("not allowed in read-only mode");if(await this.sqlite.beginTransaction({database:this.dbName}),s=await this.sqlite.isTransactionActive({database:this.dbName}),!s)return Promise.reject("After Begin Transaction, no transaction active");try{for(const l of t){if(typeof l!="object"||!("statement"in l))throw new Error("Error a task.statement must be provided");if("values"in l&&l.values&&l.values.length>0){const c=l.statement.toUpperCase().includes("RETURNING")?"all":"no",u=await this.sqlite.run({database:this.dbName,statement:l.statement,values:l.values,transaction:!1,readonly:!1,returnMode:c,isSQL92:n});if(u.changes.changes<0)throw new Error("Error in transaction method run ");r+=u.changes.changes}else{const c=await this.sqlite.execute({database:this.dbName,statements:l.statement,transaction:!1,readonly:!1});if(c.changes.changes<0)throw new Error("Error in transaction method execute ");r+=c.changes.changes}}const i=await this.sqlite.commitTransaction({database:this.dbName});r+=i.changes.changes;const a={changes:{changes:r}};return Promise.resolve(a)}catch(i){const a=i.message?i.message:i;return await this.sqlite.rollbackTransaction({database:this.dbName}),Promise.reject(a)}}async reorderRows(t){const n=t;if(t!=null&&t.values&&typeof t.values[0]=="object"&&Object.keys(t.values[0]).includes("ios_columns")){const r=t.values[0].ios_columns,s=[];for(let i=1;i<t.values.length;i++){const a=t.values[i],l={};for(const c of r)l[c]=a[c];s.push(l)}n.values=s}return Promise.resolve(n)}}const vb=Zs("CapacitorSQLite",{web:()=>Zi(()=>import("./web-Buu7KMWT.js"),[]).then(e=>new e.CapacitorSQLiteWeb),electron:()=>window.CapacitorCustomPlatform.plugins.CapacitorSQLite}),sf="blindfold_chess";let wa=null,Wt=null,mu=!1,Mc=!1,ic=null;async function xb(){return Mc?!0:ic||(ic=qR(),ic)}async function qR(){var e;try{if(mu=Sn.isNativePlatform(),!mu)return console.log("[TrainingStats] Web platform - using localStorage fallback"),Mc=!0,!0;wa=new gb(vb);const t=await wa.checkConnectionsConsistency(),n=(await wa.isConnection(sf,!1)).result;t.result&&n?Wt=await wa.retrieveConnection(sf,!1):Wt=await wa.createConnection(sf,!1,"no-encryption",1,!1),await Wt.open(),await Wt.execute(`
      CREATE TABLE IF NOT EXISTS training_stats (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        mode TEXT NOT NULL,
        score REAL NOT NULL,
        streak INTEGER NOT NULL DEFAULT 0,
        achieved_at TEXT NOT NULL
      );
    `);try{((e=(await Wt.query("PRAGMA table_info(training_stats);")).values)==null?void 0:e.some(a=>a.name==="streak"))||(await Wt.execute("ALTER TABLE training_stats ADD COLUMN streak INTEGER NOT NULL DEFAULT 0;"),console.log("[TrainingStats] Migrated: Added streak column"))}catch(s){console.warn("[TrainingStats] Migration check failed:",s)}return console.log("[TrainingStats] Database initialized successfully"),Mc=!0,!0}catch(t){return console.error("[TrainingStats] Failed to initialize database:",t),Mc=!0,!1}}function yb(){try{const e=localStorage.getItem("blindfold_training_stats");return e?JSON.parse(e):[]}catch{return[]}}function WR(e){localStorage.setItem("blindfold_training_stats",JSON.stringify(e))}async function UR(e,t,n=0){var s,i;await xb();const r=new Date().toISOString();try{if(!mu){const c=yb(),u=c.length>0?Math.max(...c.map(m=>m.id))+1:1,f={id:u,mode:e,score:t,streak:n,achievedAt:r};return c.unshift(f),WR(c),console.log("[TrainingStats] Session saved to localStorage:",u),u}if(!Wt)return console.error("[TrainingStats] Database not initialized"),null;const l=await Wt.run(`
      INSERT INTO training_stats (mode, score, streak, achieved_at)
      VALUES (?, ?, ?, ?);
    `,[e,t,n,r]);return console.log("[TrainingStats] Session saved:",(s=l.changes)==null?void 0:s.lastId),((i=l.changes)==null?void 0:i.lastId)||null}catch(a){return console.error("[TrainingStats] Failed to save session:",a instanceof Error?a.message:String(a)),null}}async function pu(){var t,n,r,s,i,a,l,c,u,f,m,h,y,p,g,w,x,v,b,S,N,j,k,C,R,T,F,_,z,M,V,W;await xb();const e={colorBlitzBest:null,colorBlitzBestDate:null,colorBlitzBestStreak:null,coordinateSniperBest:null,coordinateSniperBestDate:null,coordinateSniperBestStreak:null,voiceMoveMasterBest:null,voiceMoveMasterBestDate:null,voiceMoveMasterBestStreak:null,knightsPathBest:null,knightsPathBestDate:null,endgameDrillsBest:null,endgameDrillsBestDate:null,blindfoldMarathonBest:null,blindfoldMarathonBestDate:null,totalSessions:0,recentSessions:[]};try{if(!mu){const tt=yb(),Ft=tt.filter(Ze=>Ze.mode==="color_blitz"),H=tt.filter(Ze=>Ze.mode==="coordinate_sniper"),X=tt.filter(Ze=>Ze.mode==="voice_move_master"),me=tt.filter(Ze=>Ze.mode==="knights_path"),ge=tt.filter(Ze=>Ze.mode==="endgame_drills"),de=tt.filter(Ze=>Ze.mode==="blindfold_marathon");let _e=null,Ee=null,je=null;if(Ft.length>0){const Ze=Ft.reduce((Ue,Nt)=>Nt.score>Ue.score?Nt:Ue);_e=Ze.score,Ee=Ze.achievedAt,je=Ft.reduce((Ue,Nt)=>(Nt.streak||0)>(Ue.streak||0)?Nt:Ue).streak||null}let nt=null,Ht=null,Qe=null;if(H.length>0){const Ze=H.reduce((Ue,Nt)=>Nt.score<Ue.score?Nt:Ue);nt=Ze.score,Ht=Ze.achievedAt,Qe=H.reduce((Ue,Nt)=>(Nt.streak||0)>(Ue.streak||0)?Nt:Ue).streak||null}let zt=null,Kt=null,kn=null;if(X.length>0){const Ze=X.reduce((Ue,Nt)=>Nt.score>Ue.score?Nt:Ue);zt=Ze.score,Kt=Ze.achievedAt,kn=X.reduce((Ue,Nt)=>(Nt.streak||0)>(Ue.streak||0)?Nt:Ue).streak||null}let hn=null,Gt=null;if(me.length>0){const Ze=me.reduce((_t,Ue)=>Ue.score<_t.score?Ue:_t);hn=Ze.score,Gt=Ze.achievedAt}let gt=null,$n=null;if(ge.length>0){const Ze=ge.reduce((_t,Ue)=>Ue.score<_t.score?Ue:_t);gt=Ze.score,$n=Ze.achievedAt}let en=null,pr=null;if(de.length>0){const Ze=de.reduce((_t,Ue)=>Ue.score<_t.score?Ue:_t);en=Ze.score,pr=Ze.achievedAt}return{colorBlitzBest:_e,colorBlitzBestDate:Ee,colorBlitzBestStreak:je,coordinateSniperBest:nt,coordinateSniperBestDate:Ht,coordinateSniperBestStreak:Qe,voiceMoveMasterBest:zt,voiceMoveMasterBestDate:Kt,voiceMoveMasterBestStreak:kn,knightsPathBest:hn,knightsPathBestDate:Gt,endgameDrillsBest:gt,endgameDrillsBestDate:$n,blindfoldMarathonBest:en,blindfoldMarathonBestDate:pr,totalSessions:tt.length,recentSessions:tt.slice(0,10)}}if(!Wt)return e;const q=`
      SELECT score as best_score, achieved_at
      FROM training_stats
      WHERE mode = 'color_blitz'
      ORDER BY score DESC
      LIMIT 1;
    `,E=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'color_blitz';
    `,A=`
      SELECT score as best_time, achieved_at
      FROM training_stats
      WHERE mode = 'coordinate_sniper'
      ORDER BY score ASC
      LIMIT 1;
    `,O=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'coordinate_sniper';
    `,K=`
      SELECT score as best_score, achieved_at
      FROM training_stats
      WHERE mode = 'voice_move_master'
      ORDER BY score DESC
      LIMIT 1;
    `,ae=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'voice_move_master';
    `,he=`
      SELECT score as best_time, achieved_at
      FROM training_stats
      WHERE mode = 'knights_path'
      ORDER BY score ASC
      LIMIT 1;
    `,ve=`
      SELECT score as best_time, achieved_at
      FROM training_stats
      WHERE mode = 'endgame_drills'
      ORDER BY score ASC
      LIMIT 1;
    `,te=`
      SELECT score as best_time, achieved_at
      FROM training_stats
      WHERE mode = 'blindfold_marathon'
      ORDER BY score ASC
      LIMIT 1;
    `,I="SELECT COUNT(*) as total FROM training_stats;",B=`
      SELECT id, mode, score, streak, achieved_at as achievedAt
      FROM training_stats
      ORDER BY achieved_at DESC
      LIMIT 10;
    `,Q=await Wt.query(q),G=await Wt.query(E),se=await Wt.query(A),ce=await Wt.query(O),Se=await Wt.query(K),qe=await Wt.query(ae),Fe=await Wt.query(he),Le=await Wt.query(ve),Je=await Wt.query(te),Ke=await Wt.query(I),dt=await Wt.query(B);return{colorBlitzBest:((n=(t=Q.values)==null?void 0:t[0])==null?void 0:n.best_score)||null,colorBlitzBestDate:((s=(r=Q.values)==null?void 0:r[0])==null?void 0:s.achieved_at)||null,colorBlitzBestStreak:((a=(i=G.values)==null?void 0:i[0])==null?void 0:a.best_streak)||null,coordinateSniperBest:((c=(l=se.values)==null?void 0:l[0])==null?void 0:c.best_time)||null,coordinateSniperBestDate:((f=(u=se.values)==null?void 0:u[0])==null?void 0:f.achieved_at)||null,coordinateSniperBestStreak:((h=(m=ce.values)==null?void 0:m[0])==null?void 0:h.best_streak)||null,voiceMoveMasterBest:((p=(y=Se.values)==null?void 0:y[0])==null?void 0:p.best_score)||null,voiceMoveMasterBestDate:((w=(g=Se.values)==null?void 0:g[0])==null?void 0:w.achieved_at)||null,voiceMoveMasterBestStreak:((v=(x=qe.values)==null?void 0:x[0])==null?void 0:v.best_streak)||null,knightsPathBest:((S=(b=Fe.values)==null?void 0:b[0])==null?void 0:S.best_time)||null,knightsPathBestDate:((j=(N=Fe.values)==null?void 0:N[0])==null?void 0:j.achieved_at)||null,endgameDrillsBest:((C=(k=Le.values)==null?void 0:k[0])==null?void 0:C.best_time)||null,endgameDrillsBestDate:((T=(R=Le.values)==null?void 0:R[0])==null?void 0:T.achieved_at)||null,blindfoldMarathonBest:((_=(F=Je.values)==null?void 0:F[0])==null?void 0:_.best_time)||null,blindfoldMarathonBestDate:((M=(z=Je.values)==null?void 0:z[0])==null?void 0:M.achieved_at)||null,totalSessions:((W=(V=Ke.values)==null?void 0:V[0])==null?void 0:W.total)||0,recentSessions:dt.values||[]}}catch(q){return console.error("[TrainingStats] Failed to get stats:",q),e}}function HR(){return localStorage.getItem("blindfold_daily_goals")!=="false"}function KR(e){localStorage.setItem("blindfold_daily_goals",e?"true":"false")}function GR(){const[e,t]=d.useState(!1),[n,r]=d.useState("unknown"),[s,i]=d.useState(!1),[a,l]=d.useState(dC()),[c,u]=d.useState(Mh),[f,m]=d.useState(HR()),{toast:h}=vl();d.useEffect(()=>{e&&(kp().then(r),u(Mh()))},[e]),d.useEffect(()=>{const b=()=>t(!1);return window.addEventListener("closeAllDialogs",b),()=>window.removeEventListener("closeAllDialogs",b)},[]);const y=async()=>{i(!0);try{const b=await yR();r(b.status)}finally{i(!1)}},p=b=>{l(b),fC(b)},g=()=>{Sn.isNativePlatform()&&alert("To enable microphone access, please go to your device Settings > Apps > Blindfold Chess > Permissions > Microphone and select 'Allow'.")},x=(()=>{switch(n){case"granted":return{icon:dn,text:"Enabled",color:"text-green-500"};case"denied":case"prompt":return{icon:zs,text:"Not enabled",color:"text-muted-foreground"};case"prompt-with-rationale":return{icon:zs,text:"Blocked",color:"text-destructive"};default:return{icon:zs,text:"Unknown",color:"text-muted-foreground"}}})(),v=x.icon;return o.jsxs(Oi,{open:e,onOpenChange:t,children:[o.jsx(uu,{asChild:!0,children:o.jsxs(Y,{variant:"ghost",size:"icon","data-testid":"button-settings",children:[o.jsx(C2,{className:"h-5 w-5"}),o.jsx("span",{className:"sr-only",children:"Settings"})]})}),o.jsxs(Mo,{className:"sm:max-w-md",children:[o.jsxs(_o,{children:[o.jsx(Ao,{children:"Settings"}),o.jsx(Y1,{children:"Configure app preferences"})]}),o.jsxs("div",{className:"space-y-6 pt-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"font-semibold",children:"Notifications"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[a?o.jsx(c2,{className:"h-4 w-4 text-muted-foreground"}):o.jsx(l2,{className:"h-4 w-4 text-muted-foreground"}),o.jsx(Xt,{htmlFor:"toast-toggle",className:"text-sm",children:"Toast notifications"})]}),o.jsx(Fn,{id:"toast-toggle",checked:a,onCheckedChange:p,"data-testid":"switch-toast-notifications",className:"data-[state=checked]:bg-amber-400"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Show brief pop-up messages for game events"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"font-semibold",children:"Display"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(T2,{className:"h-4 w-4 text-muted-foreground"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(Xt,{htmlFor:"keep-awake-toggle",className:"text-sm",children:"Keep Screen Awake"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Prevents auto-sleep during games"})]})]}),o.jsx(Fn,{id:"keep-awake-toggle",checked:c.keepAwakeEnabled,onCheckedChange:b=>{const S={...c,keepAwakeEnabled:b};u(S),_h(S),window.dispatchEvent(new CustomEvent("blindfoldSettingsChanged",{detail:S})),h({title:b?"Screen will stay active":"Screen may auto-sleep",description:b?"Screen will stay active during matches":"Normal screen timeout restored"})},"data-testid":"switch-keep-awake",className:"data-[state=checked]:bg-amber-400"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"font-semibold",children:"Training"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(wi,{className:"h-4 w-4 text-muted-foreground"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(Xt,{htmlFor:"daily-goals-toggle",className:"text-sm",children:"Daily Goals"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Show daily training reminders"})]})]}),o.jsx(Fn,{id:"daily-goals-toggle",checked:f,onCheckedChange:b=>{m(b),KR(b),h({title:b?"Daily goals enabled":"Daily goals disabled",description:b?"You'll see training reminders":"Training reminders hidden"})},"data-testid":"switch-daily-goals",className:"data-[state=checked]:bg-amber-400"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"font-semibold",children:"Voice Control"}),o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(v,{className:`h-4 w-4 ${x.color}`}),o.jsxs("span",{className:"text-sm",children:["Microphone: ",o.jsx("span",{className:x.color,children:x.text})]})]})}),n==="granted"?o.jsx("p",{className:"text-xs text-muted-foreground",children:"Voice commands are ready to use"}):n==="prompt-with-rationale"?o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:"Microphone access was blocked. Voice control requires microphone permission for blindfold training."}),o.jsxs(Y,{variant:"outline",size:"sm",onClick:g,className:"w-full","data-testid":"button-open-settings",children:[o.jsx(Ec,{className:"h-3 w-3 mr-2"}),"Open Device Settings"]})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable microphone access for voice-controlled chess moves"}),o.jsxs(Y,{variant:"outline",size:"sm",onClick:y,disabled:s,className:"w-full","data-testid":"button-request-mic",children:[o.jsx(dn,{className:"h-3 w-3 mr-2"}),s?"Requesting...":"Enable Microphone"]})]})]})]})]})]})}function QR(){const[e,t]=d.useState(!1);return d.useEffect(()=>{const n=()=>t(!1);return window.addEventListener("closeAllDialogs",n),()=>window.removeEventListener("closeAllDialogs",n)},[]),o.jsxs(Oi,{open:e,onOpenChange:t,children:[o.jsx(uu,{asChild:!0,children:o.jsxs(Y,{variant:"ghost",size:"icon","data-testid":"button-about",children:[o.jsx(S2,{className:"h-5 w-5"}),o.jsx("span",{className:"sr-only",children:"About"})]})}),o.jsxs(Mo,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[o.jsx(_o,{children:o.jsx(Ao,{children:"About Blindfold Chess"})}),o.jsxs("div",{className:"space-y-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Privacy Policy"}),o.jsxs("p",{className:"text-muted-foreground",children:[o.jsx("strong",{children:"100% Offline & Private"}),"  This app is designed to be completely offline. We do not collect, store, or transmit any personal data, chess games, or voice recordings to external servers. All game history and settings are stored locally on your device."]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Open Source & Licenses"}),o.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Stockfish Chess Engine:"})," Licensed under the GNU GPL v3.",o.jsxs("a",{href:"https://stockfishchess.org",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 hover:underline ml-1 inline-flex items-center gap-1",children:["stockfishchess.org ",o.jsx(Ec,{className:"h-3 w-3"})]})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"2D Chess Imagery:"}),' "Cburnett" piece set by Colin M.L. Burnett (CC BY-SA 3.0).']}),o.jsxs("li",{children:[o.jsx("strong",{children:"Capacitor Runtime:"})," Licensed under the MIT License."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Vosk Speech Recognition:"})," Offline voice recognition by Alpha Cephei, licensed under Apache 2.0.",o.jsxs("a",{href:"https://alphacephei.com/vosk",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 hover:underline ml-1 inline-flex items-center gap-1",children:["alphacephei.com/vosk ",o.jsx(Ec,{className:"h-3 w-3"})]})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Project Links"}),o.jsx("div",{className:"flex flex-col gap-2",children:o.jsxs("a",{href:"https://github.com/official-stockfish/Stockfish",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 hover:underline inline-flex items-center gap-1",children:[o.jsx(Ec,{className:"h-3 w-3"})," Stockfish Source Code"]})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Technical Info"}),o.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Engine:"})," Stockfish 17.1 (WASM)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Version:"})," 1.0.0"]}),o.jsxs("li",{className:"flex items-center gap-1",children:[o.jsx(gw,{className:"h-3 w-3"}),o.jsx("strong",{children:"Auto-Sleep:"})," Disabled during active games"]})]})]})]})]})]})}var wb="AlertDialog",[YR,a3]=Un(wb,[R1]),ms=R1(),bb=e=>{const{__scopeAlertDialog:t,...n}=e,r=ms(t);return o.jsx(H1,{...r,...n,modal:!0})};bb.displayName=wb;var XR="AlertDialogTrigger",ZR=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ms(n);return o.jsx(K1,{...s,...r,ref:t})});ZR.displayName=XR;var JR="AlertDialogPortal",Sb=e=>{const{__scopeAlertDialog:t,...n}=e,r=ms(t);return o.jsx(G1,{...r,...n})};Sb.displayName=JR;var eM="AlertDialogOverlay",Nb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ms(n);return o.jsx(xp,{...s,...r,ref:t})});Nb.displayName=eM;var ji="AlertDialogContent",[tM,nM]=YR(ji),rM=Iy("AlertDialogContent"),kb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...s}=e,i=ms(n),a=d.useRef(null),l=Ve(t,a),c=d.useRef(null);return o.jsx(YT,{contentName:ji,titleName:jb,docsSlug:"alert-dialog",children:o.jsx(tM,{scope:n,cancelRef:c,children:o.jsxs(yp,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:be(s.onOpenAutoFocus,u=>{var f;u.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[o.jsx(rM,{children:r}),o.jsx(oM,{contentRef:a})]})})})});kb.displayName=ji;var jb="AlertDialogTitle",Cb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ms(n);return o.jsx(wp,{...s,...r,ref:t})});Cb.displayName=jb;var Eb="AlertDialogDescription",Pb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ms(n);return o.jsx(bp,{...s,...r,ref:t})});Pb.displayName=Eb;var sM="AlertDialogAction",Tb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ms(n);return o.jsx(Sp,{...s,...r,ref:t})});Tb.displayName=sM;var Rb="AlertDialogCancel",Mb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:s}=nM(Rb,n),i=ms(n),a=Ve(t,s);return o.jsx(Sp,{...i,...r,ref:a})});Mb.displayName=Rb;var oM=({contentRef:e})=>{const t=`\`${ji}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ji}\` by passing a \`${Eb}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ji}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},iM=bb,aM=Sb,_b=Nb,Ab=kb,Lb=Tb,Ib=Mb,$b=Cb,Ob=Pb;const Kr=iM,lM=aM,Db=d.forwardRef(({className:e,...t},n)=>o.jsx(_b,{className:Ae("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Db.displayName=_b.displayName;const Er=d.forwardRef(({className:e,...t},n)=>o.jsxs(lM,{children:[o.jsx(Db,{}),o.jsx(Ab,{ref:n,className:Ae("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Er.displayName=Ab.displayName;const Pr=({className:e,...t})=>o.jsx("div",{className:Ae("flex flex-col space-y-2 text-center sm:text-left",e),...t});Pr.displayName="AlertDialogHeader";const Tr=({className:e,...t})=>o.jsx("div",{className:Ae("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Tr.displayName="AlertDialogFooter";const Rr=d.forwardRef(({className:e,...t},n)=>o.jsx($b,{ref:n,className:Ae("text-lg font-semibold",e),...t}));Rr.displayName=$b.displayName;const Mr=d.forwardRef(({className:e,...t},n)=>o.jsx(Ob,{ref:n,className:Ae("text-sm text-muted-foreground",e),...t}));Mr.displayName=Ob.displayName;const _r=d.forwardRef(({className:e,...t},n)=>o.jsx(Lb,{ref:n,className:Ae(cp(),e),...t}));_r.displayName=Lb.displayName;const Ar=d.forwardRef(({className:e,...t},n)=>o.jsx(Ib,{ref:n,className:Ae(cp({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Ar.displayName=Ib.displayName;var cM=d.createContext(void 0);function Nl(e){const t=d.useContext(cM);return e||t||"ltr"}var of="rovingFocusGroup.onEntryFocus",uM={bubbles:!1,cancelable:!0},ed="RovingFocusGroup",[Ah,Bb,dM]=Um(ed),[fM,Fb]=Un(ed,[dM]),[hM,mM]=fM(ed),zb=d.forwardRef((e,t)=>o.jsx(Ah.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(Ah.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(pM,{...e,ref:t})})}));zb.displayName=ed;var pM=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...m}=e,h=d.useRef(null),y=Ve(t,h),p=Nl(i),[g=null,w]=Eo({prop:a,defaultProp:l,onChange:c}),[x,v]=d.useState(!1),b=Bt(u),S=Bb(n),N=d.useRef(!1),[j,k]=d.useState(0);return d.useEffect(()=>{const C=h.current;if(C)return C.addEventListener(of,b),()=>C.removeEventListener(of,b)},[b]),o.jsx(hM,{scope:n,orientation:r,dir:p,loop:s,currentTabStopId:g,onItemFocus:d.useCallback(C=>w(C),[w]),onItemShiftTab:d.useCallback(()=>v(!0),[]),onFocusableItemAdd:d.useCallback(()=>k(C=>C+1),[]),onFocusableItemRemove:d.useCallback(()=>k(C=>C-1),[]),children:o.jsx(Re.div,{tabIndex:x||j===0?-1:0,"data-orientation":r,...m,ref:y,style:{outline:"none",...e.style},onMouseDown:be(e.onMouseDown,()=>{N.current=!0}),onFocus:be(e.onFocus,C=>{const R=!N.current;if(C.target===C.currentTarget&&R&&!x){const T=new CustomEvent(of,uM);if(C.currentTarget.dispatchEvent(T),!T.defaultPrevented){const F=S().filter(W=>W.focusable),_=F.find(W=>W.active),z=F.find(W=>W.id===g),V=[_,z,...F].filter(Boolean).map(W=>W.ref.current);Wb(V,f)}}N.current=!1}),onBlur:be(e.onBlur,()=>v(!1))})})}),Vb="RovingFocusGroupItem",qb=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...a}=e,l=Vs(),c=i||l,u=mM(Vb,n),f=u.currentTabStopId===c,m=Bb(n),{onFocusableItemAdd:h,onFocusableItemRemove:y}=u;return d.useEffect(()=>{if(r)return h(),()=>y()},[r,h,y]),o.jsx(Ah.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:o.jsx(Re.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:be(e.onMouseDown,p=>{r?u.onItemFocus(c):p.preventDefault()}),onFocus:be(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:be(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){u.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const g=xM(p,u.orientation,u.dir);if(g!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let x=m().filter(v=>v.focusable).map(v=>v.ref.current);if(g==="last")x.reverse();else if(g==="prev"||g==="next"){g==="prev"&&x.reverse();const v=x.indexOf(p.currentTarget);x=u.loop?yM(x,v+1):x.slice(v+1)}setTimeout(()=>Wb(x))}})})})});qb.displayName=Vb;var gM={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function vM(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function xM(e,t,n){const r=vM(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return gM[r]}function Wb(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function yM(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var wM=zb,bM=qb,Pp="Tabs",[SM,l3]=Un(Pp,[Fb]),Ub=Fb(),[NM,Tp]=SM(Pp),Hb=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=e,f=Nl(l),[m,h]=Eo({prop:r,onChange:s,defaultProp:i});return o.jsx(NM,{scope:n,baseId:Vs(),value:m,onValueChange:h,orientation:a,dir:f,activationMode:c,children:o.jsx(Re.div,{dir:f,"data-orientation":a,...u,ref:t})})});Hb.displayName=Pp;var Kb="TabsList",Gb=d.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,i=Tp(Kb,n),a=Ub(n);return o.jsx(wM,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:o.jsx(Re.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});Gb.displayName=Kb;var Qb="TabsTrigger",Yb=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=e,a=Tp(Qb,n),l=Ub(n),c=Jb(a.baseId,r),u=eS(a.baseId,r),f=r===a.value;return o.jsx(bM,{asChild:!0,...l,focusable:!s,active:f,children:o.jsx(Re.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:t,onMouseDown:be(e.onMouseDown,m=>{!s&&m.button===0&&m.ctrlKey===!1?a.onValueChange(r):m.preventDefault()}),onKeyDown:be(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&a.onValueChange(r)}),onFocus:be(e.onFocus,()=>{const m=a.activationMode!=="manual";!f&&!s&&m&&a.onValueChange(r)})})})});Yb.displayName=Qb;var Xb="TabsContent",Zb=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...a}=e,l=Tp(Xb,n),c=Jb(l.baseId,r),u=eS(l.baseId,r),f=r===l.value,m=d.useRef(f);return d.useEffect(()=>{const h=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(h)},[]),o.jsx(Lr,{present:s||f,children:({present:h})=>o.jsx(Re.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:h&&i})})});Zb.displayName=Xb;function Jb(e,t){return`${e}-trigger-${t}`}function eS(e,t){return`${e}-content-${t}`}var kM=Hb,tS=Gb,nS=Yb,rS=Zb;const ea=kM,Fo=d.forwardRef(({className:e,...t},n)=>o.jsx(tS,{ref:n,className:Ae("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));Fo.displayName=tS.displayName;const Rn=d.forwardRef(({className:e,...t},n)=>o.jsx(nS,{ref:n,className:Ae("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));Rn.displayName=nS.displayName;const ui=d.forwardRef(({className:e,...t},n)=>o.jsx(rS,{ref:n,className:Ae("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));ui.displayName=rS.displayName;const Ge=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Ae("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",e),...t}));Ge.displayName="Card";const jt=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Ae("flex flex-col space-y-1.5 p-6",e),...t}));jt.displayName="CardHeader";const Ct=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Ae("text-2xl font-semibold leading-none tracking-tight",e),...t}));Ct.displayName="CardTitle";const Lt=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Ae("text-sm text-muted-foreground",e),...t}));Lt.displayName="CardDescription";const ct=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Ae("p-6 pt-0",e),...t}));ct.displayName="CardContent";const jM=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Ae("flex items-center p-6 pt-0",e),...t}));jM.displayName="CardFooter";const CM=zu("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function it({className:e,variant:t,...n}){return o.jsx("div",{className:Ae(CM({variant:t}),e),...n})}var Rp="Progress",Mp=100,[EM,c3]=Un(Rp),[PM,TM]=EM(Rp),sS=d.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=RM,...a}=e;(s||s===0)&&!n0(s)&&console.error(MM(`${s}`,"Progress"));const l=n0(s)?s:Mp;r!==null&&!r0(r,l)&&console.error(_M(`${r}`,"Progress"));const c=r0(r,l)?r:null,u=gu(c)?i(c,l):void 0;return o.jsx(PM,{scope:n,value:c,max:l,children:o.jsx(Re.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":gu(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":aS(c,l),"data-value":c??void 0,"data-max":l,...a,ref:t})})});sS.displayName=Rp;var oS="ProgressIndicator",iS=d.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=TM(oS,n);return o.jsx(Re.div,{"data-state":aS(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});iS.displayName=oS;function RM(e,t){return`${Math.round(e/t*100)}%`}function aS(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function gu(e){return typeof e=="number"}function n0(e){return gu(e)&&!isNaN(e)&&e>0}function r0(e,t){return gu(e)&&!isNaN(e)&&e<=t&&e>=0}function MM(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Mp}\`.`}function _M(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Mp} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var lS=sS,AM=iS;const qs=d.forwardRef(({className:e,value:t,...n},r)=>o.jsx(lS,{ref:r,className:Ae("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...n,children:o.jsx(AM,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));qs.displayName=lS.displayName;var LM="Separator",s0="horizontal",IM=["horizontal","vertical"],cS=d.forwardRef((e,t)=>{const{decorative:n,orientation:r=s0,...s}=e,i=$M(r)?r:s0,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return o.jsx(Re.div,{"data-orientation":i,...l,...s,ref:t})});cS.displayName=LM;function $M(e){return IM.includes(e)}var uS=cS;const Vr=d.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>o.jsx(uS,{ref:s,decorative:n,orientation:t,className:Ae("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Vr.displayName=uS.displayName;function af({insight:e}){const t={info:o.jsx(hv,{className:"h-4 w-4"}),warning:o.jsx(M2,{className:"h-4 w-4"}),success:o.jsx(m2,{className:"h-4 w-4"}),tip:o.jsx(hv,{className:"h-4 w-4"})},n={info:"text-blue-500",warning:"text-amber-500",success:"text-green-500",tip:"text-purple-500"};return o.jsxs("div",{className:"flex gap-3 p-3 rounded-md bg-muted/50",children:[o.jsx("div",{className:n[e.type],children:t[e.type]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium",children:e.title}),o.jsx("p",{className:"text-xs text-muted-foreground",children:e.message})]})]})}function On({label:e,value:t,subValue:n}){return o.jsxs("div",{className:"flex items-center justify-between py-2",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:e}),o.jsxs("div",{className:"text-right",children:[o.jsx("span",{className:"font-medium",children:t}),n&&o.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:n})]})]})}function OM({stats:e}){const t=["a","b","c","d","e","f","g","h"],n=["8","7","6","5","4","3","2","1"],r=s=>s===0?"bg-muted/30":s<25?"bg-amber-200 dark:bg-amber-900/40":s<50?"bg-amber-400 dark:bg-amber-700/60":s<75?"bg-red-400 dark:bg-red-700/70":"bg-red-600 dark:bg-red-600/80";return o.jsx("div",{className:"grid grid-cols-8 gap-0.5 aspect-square max-w-[200px] mx-auto",children:n.map(s=>t.map(i=>{const a=`${i}${s}`,l=BR(e,a);return o.jsx("div",{className:`aspect-square ${r(l)} rounded-sm flex items-center justify-center`,title:`${a.toUpperCase()}: ${e.squareInquiryHeatmap[a]||0} inquiries`,children:l>50&&o.jsx("span",{className:"text-[6px] text-white font-bold",children:a})},a)}))})}function DM(e){const t=Math.floor(e/1e3),n=Math.floor(e%1e3/100);return`${t}.${n}s`}function BM({stats:e}){const t=d.useMemo(()=>VR(e),[e]),n=db(e),r=OR(e),s=fb(e),i=hb(e),a=mb(e),l=$R(e),c=pb(e,5),[u,f]=d.useState(null);d.useEffect(()=>{pu().then(f);const p=()=>{pu().then(f)};return window.addEventListener("trainingStatsUpdated",p),()=>{window.removeEventListener("trainingStatsUpdated",p)}},[]);const m=t.filter(p=>p.category==="visualization"),h=t.filter(p=>p.category==="cognitive"),y=t.filter(p=>p.category==="tactical");return o.jsxs(ea,{defaultValue:"tactical",className:"w-full",children:[o.jsxs(Fo,{className:"grid w-full grid-cols-4 mb-4",children:[o.jsxs(Rn,{value:"tactical",className:"flex items-center gap-1 text-xs",children:[o.jsx(wi,{className:"h-3 w-3"}),o.jsx("span",{className:"hidden sm:inline",children:"Tactics"})]}),o.jsxs(Rn,{value:"cognitive",className:"flex items-center gap-1 text-xs",children:[o.jsx(Vu,{className:"h-3 w-3"}),o.jsx("span",{className:"hidden sm:inline",children:"Mind"})]}),o.jsxs(Rn,{value:"visualization",className:"flex items-center gap-1 text-xs",children:[o.jsx(Uu,{className:"h-3 w-3"}),o.jsx("span",{className:"hidden sm:inline",children:"Vision"})]}),o.jsxs(Rn,{value:"training",className:"flex items-center gap-1 text-xs",children:[o.jsx(fw,{className:"h-3 w-3"}),o.jsx("span",{className:"hidden sm:inline",children:"Training"})]})]}),o.jsxs(ui,{value:"visualization",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[o.jsxs(Ge,{children:[o.jsxs(jt,{className:"pb-2",children:[o.jsxs(Ct,{className:"text-sm flex items-center gap-2",children:[o.jsx(Jn,{className:"h-4 w-4 text-amber-500"}),"Visualization Ceiling"]}),o.jsx(Lt,{className:"text-xs",children:"The strongest opponent you've beaten without peeking at the board"})]}),o.jsx(ct,{children:e.visualizationCeiling>0?o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-3xl font-bold text-amber-500",children:e.visualizationCeiling}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Highest Elo beaten without peeking"}),e.visualizationCeilingElo&&o.jsxs(it,{variant:"outline",className:"mt-2",children:[e.visualizationCeilingElo," Elo"]})]}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Beat a bot without peeking to set your ceiling!"})})]}),o.jsxs(Ge,{children:[o.jsxs(jt,{className:"pb-2",children:[o.jsx(Ct,{className:"text-sm",children:"Peek-Free Progress"}),o.jsx(Lt,{className:"text-xs",children:"How often you complete games without looking at the board"})]}),o.jsxs(ct,{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-2xl font-bold",children:[n,"%"]}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.totalPeekFreeGames," of ",e.blindfoldGamesPlayed||0," blindfold games"]})]}),o.jsx(qs,{value:n,className:"h-2"}),o.jsx(Vr,{}),o.jsx(On,{label:"Best Peek-Free Streak",value:`${e.bestPeekFreeGameStreak} games`}),o.jsx(On,{label:"Best Peek-Free Moves",value:e.bestPeekFreeStreak,subValue:"in a single game"})]})]}),o.jsxs(Ge,{children:[o.jsxs(jt,{className:"pb-2",children:[o.jsx(Ct,{className:"text-sm",children:"Reconstruction by Game Length"}),o.jsx(Lt,{className:"text-xs",children:"How well you remember the board position as games get longer"})]}),o.jsx(ct,{className:"space-y-2",children:o.jsx("div",{className:"space-y-2",children:[{label:"10 moves",value:i.moves10},{label:"11-20 moves",value:i.moves20},{label:"21-30 moves",value:i.moves30},{label:"31-40 moves",value:i.moves40},{label:"40+ moves",value:i.moves50plus}].map(({label:p,value:g})=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xs text-muted-foreground w-20",children:p}),o.jsx(qs,{value:g,className:"flex-1 h-2"}),o.jsx("span",{className:"text-xs font-medium w-10 text-right",children:g>0?`${g}%`:"-"})]},p))})})]}),o.jsxs(Ge,{children:[o.jsxs(jt,{className:"pb-2",children:[o.jsxs(Ct,{className:"text-sm flex items-center gap-2",children:[o.jsx(hw,{className:"h-4 w-4"}),"Confusion Heatmap"]}),o.jsx(Lt,{className:"text-xs",children:'Squares you inquire about most often - your mental "blind spots"'})]}),o.jsx(ct,{children:e.totalSquareInquiries>0?o.jsxs(o.Fragment,{children:[o.jsx(OM,{stats:e}),o.jsx("p",{className:"text-xs text-muted-foreground text-center mt-3",children:"Red = frequently forgotten, Gray = clear"}),c.length>0&&o.jsxs("div",{className:"mt-4 space-y-1",children:[o.jsx("p",{className:"text-xs font-medium",children:"Top Blind Spots:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:c.map(({square:p,count:g})=>o.jsxs(it,{variant:"secondary",className:"text-xs",children:[p.toUpperCase()," (",g,")"]},p))})]})]}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Ask about squares during games to see which ones you forget!"})})]}),m.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Insights"}),m.map((p,g)=>o.jsx(af,{insight:p},g))]})]}),o.jsxs(ui,{value:"cognitive",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[o.jsxs(Ge,{children:[o.jsxs(jt,{className:"pb-2",children:[o.jsxs(Ct,{className:"text-sm flex items-center gap-2",children:["Endgame Drift",e.lastGameEndgameDrift>30?o.jsx(bw,{className:"h-4 w-4 text-red-500"}):o.jsx(Sw,{className:"h-4 w-4 text-green-500"})]}),o.jsx(Lt,{className:"text-xs",children:'Slowing down late-game may indicate "mental blur" from fewer pieces'})]}),o.jsxs(ct,{children:[o.jsx("div",{className:"text-center",children:o.jsx("p",{className:`text-3xl font-bold ${e.lastGameEndgameDrift>30?"text-red-500":"text-green-500"}`,children:e.lastGameEndgameDrift>0?`+${e.lastGameEndgameDrift}%`:"0%"})}),e.lastGameEndgameDrift>50&&o.jsx("p",{className:"text-xs text-amber-500 text-center mt-3",children:'High drift may indicate "mental blur" - difficulty tracking fewer pieces'})]})]}),o.jsxs(Ge,{children:[o.jsxs(jt,{className:"pb-2",children:[o.jsx(Ct,{className:"text-sm",children:"Voice Accuracy"}),o.jsx(Lt,{className:"text-xs",children:"How often your voice commands are understood correctly"})]}),o.jsxs(ct,{children:[o.jsx(On,{label:"Total Voice Commands",value:e.voiceCommandsTotal}),o.jsx(On,{label:"Corrections Needed",value:e.voiceCorrections}),o.jsx(On,{label:"Correction Rate",value:`${a}%`}),o.jsx(On,{label:"Last Game Corrections",value:e.lastGameVoiceCorrections})]})]}),o.jsxs(Ge,{children:[o.jsxs(jt,{className:"pb-2",children:[o.jsx(Ct,{className:"text-sm",children:"Mental Clarity"}),o.jsx(Lt,{className:"text-xs",children:"Moments when you took much longer than usual - may indicate confusion"})]}),o.jsx(ct,{children:o.jsx(On,{label:"Mental Blur Events",value:e.mentalBlurCount})})]}),o.jsxs(Ge,{children:[o.jsxs(jt,{className:"pb-2",children:[o.jsx(Ct,{className:"text-sm",children:"Voice vs Touch"}),o.jsx(Lt,{className:"text-xs",children:"How you input your moves during games"})]}),o.jsx(ct,{children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(dn,{className:"h-4 w-4 text-blue-500"}),o.jsxs("span",{className:"font-medium",children:[r.voice,"%"]})]}),o.jsx("div",{className:"flex-1 h-2 bg-muted rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-blue-500",style:{width:`${r.voice}%`}})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"font-medium",children:[r.touch,"%"]}),o.jsx(x2,{className:"h-4 w-4 text-orange-500"})]})]})})]}),h.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Insights"}),h.map((p,g)=>o.jsx(af,{insight:p},g))]})]}),o.jsxs(ui,{value:"tactical",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[o.jsxs(Ge,{children:[o.jsxs(jt,{className:"pb-2",children:[o.jsx(Ct,{className:"text-sm",children:"Overall Record"}),o.jsx(Lt,{className:"text-xs",children:"Your wins, draws, and losses across all games"})]}),o.jsxs(ct,{children:[o.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.wins}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Wins"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-2xl font-bold text-gray-500",children:e.draws}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Draws"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-2xl font-bold text-red-600",children:e.losses}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Losses"})]})]}),o.jsxs("p",{className:"text-xs text-muted-foreground text-center mt-3",children:[e.blindfoldGamesPlayed||0," of ",e.totalGamesPlayed," games were blindfold"]}),o.jsx(Vr,{className:"my-4"}),o.jsx(On,{label:"Current Win Streak",value:e.currentWinStreak}),o.jsx(On,{label:"Best Win Streak",value:e.bestWinStreak}),o.jsx(On,{label:"Fastest Win",value:e.fastestWin>0?`${e.fastestWin} moves`:"-"}),o.jsx(On,{label:"Longest Game",value:e.longestGame>0?`${e.longestGame} moves`:"-"})]})]}),e.stockfishThresholdElo&&o.jsxs(Ge,{children:[o.jsxs(jt,{className:"pb-2",children:[o.jsxs(Ct,{className:"text-sm flex items-center gap-2",children:[o.jsx(wi,{className:"h-4 w-4 text-amber-500"}),"Stockfish Threshold"]}),o.jsx(Lt,{className:"text-xs",children:"The difficulty level where your win rate starts dropping"})]}),o.jsx(ct,{children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-3xl font-bold text-amber-500",children:e.stockfishThresholdElo}),o.jsxs(it,{variant:"outline",className:"mt-2",children:[e.stockfishThresholdElo," Elo"]})]})})]}),o.jsxs(Ge,{children:[o.jsxs(jt,{className:"pb-2",children:[o.jsxs(Ct,{className:"text-sm flex items-center gap-2",children:[o.jsx(wo,{className:"h-4 w-4"}),"Mean Response Time"]}),o.jsx(Lt,{className:"text-xs",children:"How quickly you find moves - faster often means clearer visualization"})]}),o.jsxs(ct,{children:[o.jsx("div",{className:"text-center mb-4",children:o.jsx("p",{className:"text-3xl font-bold",children:ci(l)})}),o.jsx(Vr,{className:"my-4"}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"By Game Phase"}),o.jsx(On,{label:"Opening (moves 1-10)",value:ci(s.opening)}),o.jsx(On,{label:"Middlegame (moves 11-30)",value:ci(s.middlegame)}),o.jsx(On,{label:"Endgame (moves 31+)",value:ci(s.endgame)})]})]})]}),o.jsxs(Ge,{children:[o.jsxs(jt,{className:"pb-2",children:[o.jsx(Ct,{className:"text-sm",children:"Win Rate by Rating"}),o.jsx(Lt,{className:"text-xs",children:"Your success rate at each Elo level"})]}),o.jsx(ct,{children:o.jsx("div",{className:"space-y-2",children:jp.map(p=>{const g=e.tierStats[p],w=FR(e,p),x=(g==null?void 0:g.totalGames)||0;return x===0?null:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-xs text-muted-foreground w-24 truncate",children:[p," Elo"]}),o.jsx(qs,{value:w,className:"flex-1 h-2"}),o.jsxs("span",{className:"text-xs font-medium w-16 text-right",children:[w,"% (",x,"g)"]})]},p)})})})]}),y.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Insights"}),y.map((p,g)=>o.jsx(af,{insight:p},g))]})]}),o.jsxs(ui,{value:"training",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[o.jsxs(Ge,{children:[o.jsxs(jt,{className:"pb-2",children:[o.jsxs(Ct,{className:"text-sm flex items-center gap-2",children:[o.jsx(dn,{className:"h-4 w-4 text-purple-500"}),"Voice Move Master"]}),o.jsx(Lt,{className:"text-xs",children:"Announce chess moves by voice"})]}),o.jsx(ct,{children:u&&u.voiceMoveMasterBest!==null?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Personal Best"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Jn,{className:"h-4 w-4 text-purple-500"}),o.jsx("span",{className:"text-2xl font-bold text-purple-500",children:u.voiceMoveMasterBest}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"moves"})]})]}),u.voiceMoveMasterBestStreak!==null&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Streak"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qd,{className:"h-4 w-4 text-orange-500"}),o.jsx("span",{className:"text-lg font-bold text-orange-500",children:u.voiceMoveMasterBestStreak}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"in a row"})]})]}),u.voiceMoveMasterBestDate&&o.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:["Achieved ",new Date(u.voiceMoveMasterBestDate).toLocaleDateString()]}),u.voiceMoveMasterBest>=15?o.jsx(it,{className:"bg-purple-500 text-white",children:"Gold Tier"}):u.voiceMoveMasterBest>=8?o.jsx(it,{variant:"secondary",children:"Silver Tier"}):o.jsx(it,{variant:"outline",children:"Bronze Tier"})]}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete a Voice Move Master session to set your first record!"})})]}),o.jsxs(Ge,{children:[o.jsxs(jt,{className:"pb-2",children:[o.jsxs(Ct,{className:"text-sm flex items-center gap-2",children:[o.jsx(Ym,{className:"h-4 w-4 text-amber-500"}),"Color Blitz"]}),o.jsx(Lt,{className:"text-xs",children:"Name square colors in 60 seconds"})]}),o.jsx(ct,{children:u&&u.colorBlitzBest!==null?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Personal Best"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Jn,{className:"h-4 w-4 text-amber-500"}),o.jsx("span",{className:"text-2xl font-bold text-amber-500",children:u.colorBlitzBest}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"correct"})]})]}),u.colorBlitzBestStreak!==null&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Streak"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qd,{className:"h-4 w-4 text-orange-500"}),o.jsx("span",{className:"text-lg font-bold text-orange-500",children:u.colorBlitzBestStreak}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"in a row"})]})]}),u.colorBlitzBestDate&&o.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:["Achieved ",new Date(u.colorBlitzBestDate).toLocaleDateString()]}),u.colorBlitzBest>=40?o.jsx(it,{className:"bg-amber-500 text-white",children:"Gold Tier"}):u.colorBlitzBest>=20?o.jsx(it,{variant:"secondary",children:"Silver Tier"}):o.jsx(it,{variant:"outline",children:"Bronze Tier"})]}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete a Color Blitz session to set your first record!"})})]}),o.jsxs(Ge,{children:[o.jsxs(jt,{className:"pb-2",children:[o.jsxs(Ct,{className:"text-sm flex items-center gap-2",children:[o.jsx(wi,{className:"h-4 w-4 text-blue-500"}),"Coordinate Sniper"]}),o.jsx(Lt,{className:"text-xs",children:"Find 10 squares as fast as possible"})]}),o.jsx(ct,{children:u&&u.coordinateSniperBest!==null?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Personal Best"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Jn,{className:"h-4 w-4 text-blue-500"}),o.jsx("span",{className:"text-2xl font-bold text-blue-500",children:DM(u.coordinateSniperBest)})]})]}),u.coordinateSniperBestStreak!==null&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Streak"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qd,{className:"h-4 w-4 text-orange-500"}),o.jsx("span",{className:"text-lg font-bold text-orange-500",children:u.coordinateSniperBestStreak}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"in a row"})]})]}),u.coordinateSniperBestDate&&o.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:["Achieved ",new Date(u.coordinateSniperBestDate).toLocaleDateString()]}),u.coordinateSniperBest<=1e4?o.jsx(it,{className:"bg-blue-500 text-white",children:"Gold Tier"}):u.coordinateSniperBest<=2e4?o.jsx(it,{variant:"secondary",children:"Silver Tier"}):o.jsx(it,{variant:"outline",children:"Bronze Tier"})]}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete a Coordinate Sniper session to set your first record!"})})]})]})]})}function FM(e){return e!==null?{comment:e,variations:[]}:{variations:[]}}function zM(e,t,n,r,s){const i={move:e,variations:s};return t&&(i.suffix=t),n&&(i.nag=n),r!==null&&(i.comment=r),i}function VM(...e){const[t,...n]=e;let r=t;for(const s of n)s!==null&&(r.variations=[s,...s.variations],s.variations=[],r=s);return t}function qM(e,t){if(t.marker&&t.marker.comment){let n=t.root;for(;;){const r=n.variations[0];if(!r){n.comment=t.marker.comment;break}n=r}}return{headers:e,root:t.root,result:(t.marker&&t.marker.result)??void 0}}function WM(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function Fi(e,t,n,r){var s=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(s,Fi.prototype),s.expected=t,s.found=n,s.location=r,s.name="SyntaxError",s}WM(Fi,Error);function lf(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,n+=n.repeat(t),e+n.slice(0,t))}Fi.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n=null,r;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){n=e[r].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,i=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,a=this.location.source+":"+i.line+":"+i.column;if(n){var l=this.location.end,c=lf("",i.line.toString().length," "),u=n[s.line-1],f=s.line===l.line?l.column:u.length+1,m=f-s.column||1;t+=`
 --> `+a+`
`+c+` |
`+i.line+" | "+u+`
`+c+" | "+lf("",s.column-1," ")+lf("",m,"^")}else t+=`
 at `+a}return t};Fi.buildMessage=function(e,t){var n={literal:function(u){return'"'+s(u.text)+'"'},class:function(u){var f=u.parts.map(function(m){return Array.isArray(m)?i(m[0])+"-"+i(m[1]):i(m)});return"["+(u.inverted?"^":"")+f.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(u){return u.description}};function r(u){return u.charCodeAt(0).toString(16).toUpperCase()}function s(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(f){return"\\x0"+r(f)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(f){return"\\x"+r(f)})}function i(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(f){return"\\x0"+r(f)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(f){return"\\x"+r(f)})}function a(u){return n[u.type](u)}function l(u){var f=u.map(a),m,h;if(f.sort(),f.length>0){for(m=1,h=1;m<f.length;m++)f[m-1]!==f[m]&&(f[h]=f[m],h++);f.length=h}switch(f.length){case 1:return f[0];case 2:return f[0]+" or "+f[1];default:return f.slice(0,-1).join(", ")+", or "+f[f.length-1]}}function c(u){return u?'"'+s(u)+'"':"end of input"}return"Expected "+l(e)+" but "+c(t)+" found."};function UM(e,t){t=t!==void 0?t:{};var n={},r=t.grammarSource,s={pgn:gs},i=gs,a="[",l='"',c="]",u=".",f="O-O-O",m="O-O",h="0-0-0",y="0-0",p="$",g="{",w="}",x=";",v="(",b=")",S="1-0",N="0-1",j="1/2-1/2",k="*",C=/^[a-zA-Z]/,R=/^[^"]/,T=/^[0-9]/,F=/^[.]/,_=/^[a-zA-Z1-8\-=]/,z=/^[+#]/,M=/^[!?]/,V=/^[^}]/,W=/^[^\r\n]/,q=/^[ \t\r\n]/,E=jn("tag pair"),A=Vt("[",!1),O=Vt('"',!1),K=Vt("]",!1),ae=jn("tag name"),he=$t([["a","z"],["A","Z"]],!1,!1),ve=jn("tag value"),te=$t(['"'],!0,!1),I=jn("move number"),B=$t([["0","9"]],!1,!1),Q=Vt(".",!1),G=$t(["."],!1,!1),se=jn("standard algebraic notation"),ce=Vt("O-O-O",!1),Se=Vt("O-O",!1),qe=Vt("0-0-0",!1),Fe=Vt("0-0",!1),Le=$t([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Je=$t(["+","#"],!1,!1),Ke=jn("suffix annotation"),dt=$t(["!","?"],!1,!1),tt=jn("NAG"),Ft=Vt("$",!1),H=jn("brace comment"),X=Vt("{",!1),me=$t(["}"],!0,!1),ge=Vt("}",!1),de=jn("rest of line comment"),_e=Vt(";",!1),Ee=$t(["\r",`
`],!0,!1),je=jn("variation"),nt=Vt("(",!1),Ht=Vt(")",!1),Qe=jn("game termination marker"),zt=Vt("1-0",!1),Kt=Vt("0-1",!1),kn=Vt("1/2-1/2",!1),hn=Vt("*",!1),Gt=jn("whitespace"),gt=$t([" ","	","\r",`
`],!1,!1),$n=function(P,D){return qM(P,D)},en=function(P){return Object.fromEntries(P)},pr=function(P,D){return[P,D]},Ze=function(P,D){return{root:P,marker:D}},_t=function(P,D){return VM(FM(P),...D.flat())},Ue=function(P,D,$,xe,ke){return zM(P,D,$,xe,ke)},Nt=function(P){return P},Oe=function(P){return P.replace(/[\r\n]+/g," ")},El=function(P){return P.trim()},ld=function(P){return P},sa=function(P,D){return{result:P,comment:D}},L=t.peg$currPos|0,ze=[{line:1,column:1}],ht=L,Hn=t.peg$maxFailExpected||[],Z=t.peg$silentFails|0,to;if(t.startRule){if(!(t.startRule in s))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');i=s[t.startRule]}function Vt(P,D){return{type:"literal",text:P,ignoreCase:D}}function $t(P,D,$){return{type:"class",parts:P,inverted:D,ignoreCase:$}}function ps(){return{type:"end"}}function jn(P){return{type:"other",description:P}}function no(P){var D=ze[P],$;if(D)return D;if(P>=ze.length)$=ze.length-1;else for($=P;!ze[--$];);for(D=ze[$],D={line:D.line,column:D.column};$<P;)e.charCodeAt($)===10?(D.line++,D.column=1):D.column++,$++;return ze[P]=D,D}function or(P,D,$){var xe=no(P),ke=no(D),ot={source:r,start:{offset:P,line:xe.line,column:xe.column},end:{offset:D,line:ke.line,column:ke.column}};return ot}function Ne(P){L<ht||(L>ht&&(ht=L,Hn=[]),Hn.push(P))}function zo(P,D,$){return new Fi(Fi.buildMessage(P,D),P,D,$)}function gs(){var P,D,$;return P=L,D=oa(),$=Vo(),P=$n(D,$),P}function oa(){var P,D,$;for(P=L,D=[],$=ro();$!==n;)D.push($),$=ro();return $=Qt(),P=en(D),P}function ro(){var P,D,$,xe,ke,ot,Xr;return Z++,P=L,Qt(),e.charCodeAt(L)===91?(D=a,L++):(D=n,Z===0&&Ne(A)),D!==n?(Qt(),$=so(),$!==n?(Qt(),e.charCodeAt(L)===34?(xe=l,L++):(xe=n,Z===0&&Ne(O)),xe!==n?(ke=Pl(),e.charCodeAt(L)===34?(ot=l,L++):(ot=n,Z===0&&Ne(O)),ot!==n?(Qt(),e.charCodeAt(L)===93?(Xr=c,L++):(Xr=n,Z===0&&Ne(K)),Xr!==n?P=pr($,ke):(L=P,P=n)):(L=P,P=n)):(L=P,P=n)):(L=P,P=n)):(L=P,P=n),Z--,P===n&&Z===0&&Ne(E),P}function so(){var P,D,$;if(Z++,P=L,D=[],$=e.charAt(L),C.test($)?L++:($=n,Z===0&&Ne(he)),$!==n)for(;$!==n;)D.push($),$=e.charAt(L),C.test($)?L++:($=n,Z===0&&Ne(he));else D=n;return D!==n?P=e.substring(P,L):P=D,Z--,P===n&&(D=n,Z===0&&Ne(ae)),P}function Pl(){var P,D,$;for(Z++,P=L,D=[],$=e.charAt(L),R.test($)?L++:($=n,Z===0&&Ne(te));$!==n;)D.push($),$=e.charAt(L),R.test($)?L++:($=n,Z===0&&Ne(te));return P=e.substring(P,L),Z--,D=n,Z===0&&Ne(ve),P}function Vo(){var P,D,$;return P=L,D=ir(),Qt(),$=fd(),$===n&&($=null),Qt(),P=Ze(D,$),P}function ir(){var P,D,$,xe;for(P=L,D=ia(),D===n&&(D=null),$=[],xe=vs();xe!==n;)$.push(xe),xe=vs();return P=_t(D,$),P}function vs(){var P,D,$,xe,ke,ot,Xr,Or;if(P=L,Qt(),qo(),Qt(),D=$r(),D!==n){for($=cd(),$===n&&($=null),xe=[],ke=Yr();ke!==n;)xe.push(ke),ke=Yr();for(ke=Qt(),ot=ia(),ot===n&&(ot=null),Xr=[],Or=Tl();Or!==n;)Xr.push(Or),Or=Tl();P=Ue(D,$,xe,ot,Xr)}else L=P,P=n;return P}function qo(){var P,D,$,xe,ke,ot;for(Z++,P=L,D=[],$=e.charAt(L),T.test($)?L++:($=n,Z===0&&Ne(B));$!==n;)D.push($),$=e.charAt(L),T.test($)?L++:($=n,Z===0&&Ne(B));if(e.charCodeAt(L)===46?($=u,L++):($=n,Z===0&&Ne(Q)),$!==n){for(xe=Qt(),ke=[],ot=e.charAt(L),F.test(ot)?L++:(ot=n,Z===0&&Ne(G));ot!==n;)ke.push(ot),ot=e.charAt(L),F.test(ot)?L++:(ot=n,Z===0&&Ne(G));D=[D,$,xe,ke],P=D}else L=P,P=n;return Z--,P===n&&(D=n,Z===0&&Ne(I)),P}function $r(){var P,D,$,xe,ke,ot;if(Z++,P=L,D=L,e.substr(L,5)===f?($=f,L+=5):($=n,Z===0&&Ne(ce)),$===n&&(e.substr(L,3)===m?($=m,L+=3):($=n,Z===0&&Ne(Se)),$===n&&(e.substr(L,5)===h?($=h,L+=5):($=n,Z===0&&Ne(qe)),$===n&&(e.substr(L,3)===y?($=y,L+=3):($=n,Z===0&&Ne(Fe)),$===n))))if($=L,xe=e.charAt(L),C.test(xe)?L++:(xe=n,Z===0&&Ne(he)),xe!==n){if(ke=[],ot=e.charAt(L),_.test(ot)?L++:(ot=n,Z===0&&Ne(Le)),ot!==n)for(;ot!==n;)ke.push(ot),ot=e.charAt(L),_.test(ot)?L++:(ot=n,Z===0&&Ne(Le));else ke=n;ke!==n?(xe=[xe,ke],$=xe):(L=$,$=n)}else L=$,$=n;return $!==n?(xe=e.charAt(L),z.test(xe)?L++:(xe=n,Z===0&&Ne(Je)),xe===n&&(xe=null),$=[$,xe],D=$):(L=D,D=n),D!==n?P=e.substring(P,L):P=D,Z--,P===n&&(D=n,Z===0&&Ne(se)),P}function cd(){var P,D,$;for(Z++,P=L,D=[],$=e.charAt(L),M.test($)?L++:($=n,Z===0&&Ne(dt));$!==n;)D.push($),D.length>=2?$=n:($=e.charAt(L),M.test($)?L++:($=n,Z===0&&Ne(dt)));return D.length<1?(L=P,P=n):P=D,Z--,P===n&&(D=n,Z===0&&Ne(Ke)),P}function Yr(){var P,D,$,xe,ke;if(Z++,P=L,Qt(),e.charCodeAt(L)===36?(D=p,L++):(D=n,Z===0&&Ne(Ft)),D!==n){if($=L,xe=[],ke=e.charAt(L),T.test(ke)?L++:(ke=n,Z===0&&Ne(B)),ke!==n)for(;ke!==n;)xe.push(ke),ke=e.charAt(L),T.test(ke)?L++:(ke=n,Z===0&&Ne(B));else xe=n;xe!==n?$=e.substring($,L):$=xe,$!==n?P=Nt($):(L=P,P=n)}else L=P,P=n;return Z--,P===n&&Z===0&&Ne(tt),P}function ia(){var P;return P=ud(),P===n&&(P=dd()),P}function ud(){var P,D,$,xe,ke;if(Z++,P=L,e.charCodeAt(L)===123?(D=g,L++):(D=n,Z===0&&Ne(X)),D!==n){for($=L,xe=[],ke=e.charAt(L),V.test(ke)?L++:(ke=n,Z===0&&Ne(me));ke!==n;)xe.push(ke),ke=e.charAt(L),V.test(ke)?L++:(ke=n,Z===0&&Ne(me));$=e.substring($,L),e.charCodeAt(L)===125?(xe=w,L++):(xe=n,Z===0&&Ne(ge)),xe!==n?P=Oe($):(L=P,P=n)}else L=P,P=n;return Z--,P===n&&(D=n,Z===0&&Ne(H)),P}function dd(){var P,D,$,xe,ke;if(Z++,P=L,e.charCodeAt(L)===59?(D=x,L++):(D=n,Z===0&&Ne(_e)),D!==n){for($=L,xe=[],ke=e.charAt(L),W.test(ke)?L++:(ke=n,Z===0&&Ne(Ee));ke!==n;)xe.push(ke),ke=e.charAt(L),W.test(ke)?L++:(ke=n,Z===0&&Ne(Ee));$=e.substring($,L),P=El($)}else L=P,P=n;return Z--,P===n&&(D=n,Z===0&&Ne(de)),P}function Tl(){var P,D,$,xe;return Z++,P=L,Qt(),e.charCodeAt(L)===40?(D=v,L++):(D=n,Z===0&&Ne(nt)),D!==n?($=ir(),$!==n?(Qt(),e.charCodeAt(L)===41?(xe=b,L++):(xe=n,Z===0&&Ne(Ht)),xe!==n?P=ld($):(L=P,P=n)):(L=P,P=n)):(L=P,P=n),Z--,P===n&&Z===0&&Ne(je),P}function fd(){var P,D,$;return Z++,P=L,e.substr(L,3)===S?(D=S,L+=3):(D=n,Z===0&&Ne(zt)),D===n&&(e.substr(L,3)===N?(D=N,L+=3):(D=n,Z===0&&Ne(Kt)),D===n&&(e.substr(L,7)===j?(D=j,L+=7):(D=n,Z===0&&Ne(kn)),D===n&&(e.charCodeAt(L)===42?(D=k,L++):(D=n,Z===0&&Ne(hn))))),D!==n?(Qt(),$=ia(),$===n&&($=null),P=sa(D,$)):(L=P,P=n),Z--,P===n&&(D=n,Z===0&&Ne(Qe)),P}function Qt(){var P,D;for(Z++,P=[],D=e.charAt(L),q.test(D)?L++:(D=n,Z===0&&Ne(gt));D!==n;)P.push(D),D=e.charAt(L),q.test(D)?L++:(D=n,Z===0&&Ne(gt));return Z--,D=n,Z===0&&Ne(Gt),P}if(to=i(),t.peg$library)return{peg$result:to,peg$currPos:L,peg$FAILED:n,peg$maxFailExpected:Hn,peg$maxFailPos:ht};if(to!==n&&L===e.length)return to;throw to!==n&&L<e.length&&Ne(ps()),zo(Hn,ht<e.length?e.charAt(ht):null,ht<e.length?or(ht,ht+1):or(ht,ht))}/**
 * @license
 * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const _c=0xffffffffffffffffn;function cf(e,t){return(e<<t|e>>64n-t)&0xffffffffffffffffn}function o0(e,t){return e*t&_c}function HM(e){return function(){let t=BigInt(e&_c),n=BigInt(e>>64n&_c);const r=o0(cf(o0(t,5n),7n),9n);return n^=t,t=(cf(t,24n)^n^n<<16n)&_c,n=cf(n,37n),e=n<<64n|t,r}}const td=HM(0xa187eb39cdcaed8f31c4b365b102e01en),KM=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>td()))),GM=Array.from({length:8},()=>td()),QM=Array.from({length:16},()=>td()),uf=td(),xn="w",Gn="b",qt="p",Lh="n",Ac="b",Pa="r",Es="q",Yt="k",df="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class ac{constructor(t,n){kt(this,"color");kt(this,"from");kt(this,"to");kt(this,"piece");kt(this,"captured");kt(this,"promotion");kt(this,"flags");kt(this,"san");kt(this,"lan");kt(this,"before");kt(this,"after");const{color:r,piece:s,from:i,to:a,flags:l,captured:c,promotion:u}=n,f=rn(i),m=rn(a);this.color=r,this.piece=s,this.from=f,this.to=m,this.san=t._moveToSan(n,t._moves({legal:!0})),this.lan=f+m,this.before=t.fen(),t._makeMove(n),this.after=t.fen(),t._undoMove(),this.flags="";for(const h in Ie)Ie[h]&l&&(this.flags+=uo[h]);c&&(this.captured=c),u&&(this.promotion=u,this.lan+=u)}isCapture(){return this.flags.indexOf(uo.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(uo.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(uo.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(uo.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(uo.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(uo.BIG_PAWN)>-1}}const ln=-1,uo={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},Ie={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},Ih={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},YM={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},XM={...Ih,...YM},Me={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},ff={b:[16,32,17,15],w:[-16,-32,-17,-15]},i0={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},ZM=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],JM=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],e_={p:1,n:2,b:4,r:8,q:16,k:32},t_="pnbrqkPNBRQK",a0=[Lh,Ac,Pa,Es],n_=7,r_=6,s_=1,o_=0,lc={[Yt]:Ie.KSIDE_CASTLE,[Es]:Ie.QSIDE_CASTLE},Ss={w:[{square:Me.a1,flag:Ie.QSIDE_CASTLE},{square:Me.h1,flag:Ie.KSIDE_CASTLE}],b:[{square:Me.a8,flag:Ie.QSIDE_CASTLE},{square:Me.h8,flag:Ie.KSIDE_CASTLE}]},i_={b:s_,w:r_},hf="--";function bo(e){return e>>4}function al(e){return e&15}function dS(e){return"0123456789".indexOf(e)!==-1}function rn(e){const t=al(e),n=bo(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function ba(e){return e===xn?Gn:xn}function a_(e){const t=e.split(/\s+/);if(t.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(t[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(t[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const s=t[0].split("/");if(s.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let a=0;a<s.length;a++){let l=0,c=!1;for(let u=0;u<s[a].length;u++)if(dS(s[a][u])){if(c)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};l+=parseInt(s[a][u],10),c=!0}else{if(!/^[prnbqkPRNBQK]$/.test(s[a][u]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};l+=1,c=!1}if(l!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(t[3][1]=="3"&&t[1]=="w"||t[3][1]=="6"&&t[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const i=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:a,regex:l}of i){if(!l.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${a} king`};if((t[0].match(l)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${a} kings`}}return Array.from(s[0]+s[7]).some(a=>a.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function l_(e,t){const n=e.from,r=e.to,s=e.piece;let i=0,a=0,l=0;for(let c=0,u=t.length;c<u;c++){const f=t[c].from,m=t[c].to,h=t[c].piece;s===h&&n!==f&&r===m&&(i++,bo(n)===bo(f)&&a++,al(n)===al(f)&&l++)}return i>0?a>0&&l>0?rn(n):l>0?rn(n).charAt(1):rn(n).charAt(0):""}function Ns(e,t,n,r,s,i=void 0,a=Ie.NORMAL){const l=bo(r);if(s===qt&&(l===n_||l===o_))for(let c=0;c<a0.length;c++){const u=a0[c];e.push({color:t,from:n,to:r,piece:s,captured:i,promotion:u,flags:a|Ie.PROMOTION})}else e.push({color:t,from:n,to:r,piece:s,captured:i,flags:a})}function l0(e){let t=e.charAt(0);return t>="a"&&t<="h"?e.match(/[a-h]\d.*[a-h]\d/)?void 0:qt:(t=t.toLowerCase(),t==="o"?Yt:t)}function mf(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class An{constructor(t=df,{skipValidation:n=!1}={}){kt(this,"_board",new Array(128));kt(this,"_turn",xn);kt(this,"_header",{});kt(this,"_kings",{w:ln,b:ln});kt(this,"_epSquare",-1);kt(this,"_halfMoves",0);kt(this,"_moveNumber",0);kt(this,"_history",[]);kt(this,"_comments",{});kt(this,"_castling",{w:0,b:0});kt(this,"_hash",0n);kt(this,"_positionCount",new Map);this.load(t,{skipValidation:n})}clear({preserveHeaders:t=!1}={}){this._board=new Array(128),this._kings={w:ln,b:ln},this._turn=xn,this._castling={w:0,b:0},this._epSquare=ln,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=t?this._header:{...XM},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(t,{skipValidation:n=!1,preserveHeaders:r=!1}={}){let s=t.split(/\s+/);if(s.length>=2&&s.length<6){const l=["-","-","0","1"];t=s.concat(l.slice(-(6-s.length))).join(" ")}if(s=t.split(/\s+/),!n){const{ok:l,error:c}=a_(t);if(!l)throw new Error(c)}const i=s[0];let a=0;this.clear({preserveHeaders:r});for(let l=0;l<i.length;l++){const c=i.charAt(l);if(c==="/")a+=8;else if(dS(c))a+=parseInt(c,10);else{const u=c<"a"?xn:Gn;this._put({type:c.toLowerCase(),color:u},rn(a)),a++}}this._turn=s[1],s[2].indexOf("K")>-1&&(this._castling.w|=Ie.KSIDE_CASTLE),s[2].indexOf("Q")>-1&&(this._castling.w|=Ie.QSIDE_CASTLE),s[2].indexOf("k")>-1&&(this._castling.b|=Ie.KSIDE_CASTLE),s[2].indexOf("q")>-1&&(this._castling.b|=Ie.QSIDE_CASTLE),this._epSquare=s[3]==="-"?ln:Me[s[3]],this._halfMoves=parseInt(s[4],10),this._moveNumber=parseInt(s[5],10),this._hash=this._computeHash(),this._updateSetup(t),this._incPositionCount()}fen({forceEnpassantSquare:t=!1}={}){var a,l;let n=0,r="";for(let c=Me.a8;c<=Me.h1;c++){if(this._board[c]){n>0&&(r+=n,n=0);const{color:u,type:f}=this._board[c];r+=u===xn?f.toUpperCase():f.toLowerCase()}else n++;c+1&136&&(n>0&&(r+=n),c!==Me.h1&&(r+="/"),n=0,c+=8)}let s="";this._castling[xn]&Ie.KSIDE_CASTLE&&(s+="K"),this._castling[xn]&Ie.QSIDE_CASTLE&&(s+="Q"),this._castling[Gn]&Ie.KSIDE_CASTLE&&(s+="k"),this._castling[Gn]&Ie.QSIDE_CASTLE&&(s+="q"),s=s||"-";let i="-";if(this._epSquare!==ln)if(t)i=rn(this._epSquare);else{const c=this._epSquare+(this._turn===xn?16:-16),u=[c+1,c-1];for(const f of u){if(f&136)continue;const m=this._turn;if(((a=this._board[f])==null?void 0:a.color)===m&&((l=this._board[f])==null?void 0:l.type)===qt){this._makeMove({color:m,from:f,to:this._epSquare,piece:qt,captured:qt,flags:Ie.EP_CAPTURE});const h=!this._isKingAttacked(m);if(this._undoMove(),h){i=rn(this._epSquare);break}}}}return[r,this._turn,s,i,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(t){if(!this._board[t])return 0n;const{color:n,type:r}=this._board[t],s={w:0,b:1}[n],i={p:0,n:1,b:2,r:3,q:4,k:5}[r];return KM[s][i][t]}_epKey(){return this._epSquare===ln?0n:GM[this._epSquare&7]}_castlingKey(){const t=this._castling.w>>5|this._castling.b>>3;return QM[t]}_computeHash(){let t=0n;for(let n=Me.a8;n<=Me.h1;n++){if(n&136){n+=7;continue}this._board[n]&&(t^=this._pieceKey(n))}return t^=this._epKey(),t^=this._castlingKey(),this._turn==="b"&&(t^=uf),t}_updateSetup(t){this._history.length>0||(t!==df?(this._header.SetUp="1",this._header.FEN=t):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(df)}get(t){return this._board[Me[t]]}findPiece(t){var r;const n=[];for(let s=Me.a8;s<=Me.h1;s++){if(s&136){s+=7;continue}!this._board[s]||((r=this._board[s])==null?void 0:r.color)!==t.color||this._board[s].color===t.color&&this._board[s].type===t.type&&n.push(rn(s))}return n}put({type:t,color:n},r){return this._put({type:t,color:n},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(t,n){this._hash^=this._pieceKey(t),this._board[t]=n,this._hash^=this._pieceKey(t)}_put({type:t,color:n},r){if(t_.indexOf(t.toLowerCase())===-1||!(r in Me))return!1;const s=Me[r];if(t==Yt&&!(this._kings[n]==ln||this._kings[n]==s))return!1;const i=this._board[s];return i&&i.type===Yt&&(this._kings[i.color]=ln),this._set(s,{type:t,color:n}),t===Yt&&(this._kings[n]=s),!0}_clear(t){this._hash^=this._pieceKey(t),delete this._board[t]}remove(t){const n=this.get(t);return this._clear(Me[t]),n&&n.type===Yt&&(this._kings[n.color]=ln),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){var r,s,i,a,l,c,u,f,m,h,y,p;this._hash^=this._castlingKey();const t=((r=this._board[Me.e1])==null?void 0:r.type)===Yt&&((s=this._board[Me.e1])==null?void 0:s.color)===xn,n=((i=this._board[Me.e8])==null?void 0:i.type)===Yt&&((a=this._board[Me.e8])==null?void 0:a.color)===Gn;(!t||((l=this._board[Me.a1])==null?void 0:l.type)!==Pa||((c=this._board[Me.a1])==null?void 0:c.color)!==xn)&&(this._castling.w&=-65),(!t||((u=this._board[Me.h1])==null?void 0:u.type)!==Pa||((f=this._board[Me.h1])==null?void 0:f.color)!==xn)&&(this._castling.w&=-33),(!n||((m=this._board[Me.a8])==null?void 0:m.type)!==Pa||((h=this._board[Me.a8])==null?void 0:h.color)!==Gn)&&(this._castling.b&=-65),(!n||((y=this._board[Me.h8])==null?void 0:y.type)!==Pa||((p=this._board[Me.h8])==null?void 0:p.color)!==Gn)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){var i,a;if(this._epSquare===ln)return;const t=this._epSquare+(this._turn===xn?-16:16),n=this._epSquare+(this._turn===xn?16:-16),r=[n+1,n-1];if(this._board[t]!==null||this._board[this._epSquare]!==null||((i=this._board[n])==null?void 0:i.color)!==ba(this._turn)||((a=this._board[n])==null?void 0:a.type)!==qt){this._hash^=this._epKey(),this._epSquare=ln;return}const s=l=>{var c,u;return!(l&136)&&((c=this._board[l])==null?void 0:c.color)===this._turn&&((u=this._board[l])==null?void 0:u.type)===qt};r.some(s)||(this._hash^=this._epKey(),this._epSquare=ln)}_attacked(t,n,r){const s=[];for(let i=Me.a8;i<=Me.h1;i++){if(i&136){i+=7;continue}if(this._board[i]===void 0||this._board[i].color!==t)continue;const a=this._board[i],l=i-n;if(l===0)continue;const c=l+119;if(ZM[c]&e_[a.type]){if(a.type===qt){if(l>0&&a.color===xn||l<=0&&a.color===Gn)if(r)s.push(rn(i));else return!0;continue}if(a.type==="n"||a.type==="k")if(r){s.push(rn(i));continue}else return!0;const u=JM[c];let f=i+u,m=!1;for(;f!==n;){if(this._board[f]!=null){m=!0;break}f+=u}if(!m)if(r){s.push(rn(i));continue}else return!0}}return r?s:!1}attackers(t,n){return n?this._attacked(n,Me[t],!0):this._attacked(this._turn,Me[t],!0)}_isKingAttacked(t){const n=this._kings[t];return n===-1?!1:this._attacked(ba(t),n)}hash(){return this._hash.toString(16)}isAttacked(t,n){return this._attacked(n,Me[t])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const t={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let r=0,s=0;for(let i=Me.a8;i<=Me.h1;i++){if(s=(s+1)%2,i&136){i+=7;continue}const a=this._board[i];a&&(t[a.type]=a.type in t?t[a.type]+1:1,a.type===Ac&&n.push(s),r++)}if(r===2)return!0;if(r===3&&(t[Ac]===1||t[Lh]===1))return!0;if(r===t[Ac]+2){let i=0;const a=n.length;for(let l=0;l<a;l++)i+=n[l];if(i===0||i===a)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:t=!1,square:n=void 0,piece:r=void 0}={}){const s=this._moves({square:n,piece:r});return t?s.map(i=>new ac(this,i)):s.map(i=>this._moveToSan(i,s))}_moves({legal:t=!0,piece:n=void 0,square:r=void 0}={}){var y;const s=r?r.toLowerCase():void 0,i=n==null?void 0:n.toLowerCase(),a=[],l=this._turn,c=ba(l);let u=Me.a8,f=Me.h1,m=!1;if(s)if(s in Me)u=f=Me[s],m=!0;else return[];for(let p=u;p<=f;p++){if(p&136){p+=7;continue}if(!this._board[p]||this._board[p].color===c)continue;const{type:g}=this._board[p];let w;if(g===qt){if(i&&i!==g)continue;w=p+ff[l][0],this._board[w]||(Ns(a,l,p,w,qt),w=p+ff[l][1],i_[l]===bo(p)&&!this._board[w]&&Ns(a,l,p,w,qt,void 0,Ie.BIG_PAWN));for(let x=2;x<4;x++)w=p+ff[l][x],!(w&136)&&(((y=this._board[w])==null?void 0:y.color)===c?Ns(a,l,p,w,qt,this._board[w].type,Ie.CAPTURE):w===this._epSquare&&Ns(a,l,p,w,qt,qt,Ie.EP_CAPTURE))}else{if(i&&i!==g)continue;for(let x=0,v=i0[g].length;x<v;x++){const b=i0[g][x];for(w=p;w+=b,!(w&136);){if(!this._board[w])Ns(a,l,p,w,g);else{if(this._board[w].color===l)break;Ns(a,l,p,w,g,this._board[w].type,Ie.CAPTURE);break}if(g===Lh||g===Yt)break}}}}if((i===void 0||i===Yt)&&(!m||f===this._kings[l])){if(this._castling[l]&Ie.KSIDE_CASTLE){const p=this._kings[l],g=p+2;!this._board[p+1]&&!this._board[g]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,p+1)&&!this._attacked(c,g)&&Ns(a,l,this._kings[l],g,Yt,void 0,Ie.KSIDE_CASTLE)}if(this._castling[l]&Ie.QSIDE_CASTLE){const p=this._kings[l],g=p-2;!this._board[p-1]&&!this._board[p-2]&&!this._board[p-3]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,p-1)&&!this._attacked(c,g)&&Ns(a,l,this._kings[l],g,Yt,void 0,Ie.QSIDE_CASTLE)}}if(!t||this._kings[l]===-1)return a;const h=[];for(let p=0,g=a.length;p<g;p++)this._makeMove(a[p]),this._isKingAttacked(l)||h.push(a[p]),this._undoMove();return h}move(t,{strict:n=!1}={}){let r=null;if(typeof t=="string")r=this._moveFromSan(t,n);else if(t===null)r=this._moveFromSan(hf,n);else if(typeof t=="object"){const i=this._moves();for(let a=0,l=i.length;a<l;a++)if(t.from===rn(i[a].from)&&t.to===rn(i[a].to)&&(!("promotion"in i[a])||t.promotion===i[a].promotion)){r=i[a];break}}if(!r)throw typeof t=="string"?new Error(`Invalid move: ${t}`):new Error(`Invalid move: ${JSON.stringify(t)}`);if(this.isCheck()&&r.flags&Ie.NULL_MOVE)throw new Error("Null move not allowed when in check");const s=new ac(this,r);return this._makeMove(r),this._incPositionCount(),s}_push(t){this._history.push({move:t,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(t,n){this._hash^=this._pieceKey(t),this._board[n]=this._board[t],delete this._board[t],this._hash^=this._pieceKey(n)}_makeMove(t){var s,i,a,l;const n=this._turn,r=ba(n);if(this._push(t),t.flags&Ie.NULL_MOVE){n===Gn&&this._moveNumber++,this._halfMoves++,this._turn=r,this._epSquare=ln;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),t.captured&&(this._hash^=this._pieceKey(t.to)),this._movePiece(t.from,t.to),t.flags&Ie.EP_CAPTURE&&(this._turn===Gn?this._clear(t.to-16):this._clear(t.to+16)),t.promotion&&(this._clear(t.to),this._set(t.to,{type:t.promotion,color:n})),this._board[t.to].type===Yt){if(this._kings[n]=t.to,t.flags&Ie.KSIDE_CASTLE){const c=t.to-1,u=t.to+1;this._movePiece(u,c)}else if(t.flags&Ie.QSIDE_CASTLE){const c=t.to+1,u=t.to-2;this._movePiece(u,c)}this._castling[n]=0}if(this._castling[n]){for(let c=0,u=Ss[n].length;c<u;c++)if(t.from===Ss[n][c].square&&this._castling[n]&Ss[n][c].flag){this._castling[n]^=Ss[n][c].flag;break}}if(this._castling[r]){for(let c=0,u=Ss[r].length;c<u;c++)if(t.to===Ss[r][c].square&&this._castling[r]&Ss[r][c].flag){this._castling[r]^=Ss[r][c].flag;break}}if(this._hash^=this._castlingKey(),t.flags&Ie.BIG_PAWN){let c;n===Gn?c=t.to-16:c=t.to+16,!(t.to-1&136)&&((s=this._board[t.to-1])==null?void 0:s.type)===qt&&((i=this._board[t.to-1])==null?void 0:i.color)===r||!(t.to+1&136)&&((a=this._board[t.to+1])==null?void 0:a.type)===qt&&((l=this._board[t.to+1])==null?void 0:l.color)===r?(this._epSquare=c,this._hash^=this._epKey()):this._epSquare=ln}else this._epSquare=ln;t.piece===qt?this._halfMoves=0:t.flags&(Ie.CAPTURE|Ie.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===Gn&&this._moveNumber++,this._turn=r,this._hash^=uf}undo(){const t=this._hash,n=this._undoMove();if(n){const r=new ac(this,n);return this._decPositionCount(t),r}return null}_undoMove(){const t=this._history.pop();if(t===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const n=t.move;this._kings=t.kings,this._turn=t.turn,this._castling=t.castling,this._epSquare=t.epSquare,this._halfMoves=t.halfMoves,this._moveNumber=t.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=uf;const r=this._turn,s=ba(r);if(n.flags&Ie.NULL_MOVE)return n;if(this._movePiece(n.to,n.from),n.piece&&(this._clear(n.from),this._set(n.from,{type:n.piece,color:r})),n.captured)if(n.flags&Ie.EP_CAPTURE){let i;r===Gn?i=n.to-16:i=n.to+16,this._set(i,{type:qt,color:s})}else this._set(n.to,{type:n.captured,color:s});if(n.flags&(Ie.KSIDE_CASTLE|Ie.QSIDE_CASTLE)){let i,a;n.flags&Ie.KSIDE_CASTLE?(i=n.to+1,a=n.to-1):(i=n.to-2,a=n.to+1),this._movePiece(a,i)}return n}pgn({newline:t=`
`,maxWidth:n=0}={}){const r=[];let s=!1;for(const h in this._header)this._header[h]&&r.push(`[${h} "${this._header[h]}"]`+t),s=!0;s&&this._history.length&&r.push(t);const i=h=>{const y=this._comments[this.fen()];if(typeof y<"u"){const p=h.length>0?" ":"";h=`${h}${p}{${y}}`}return h},a=[];for(;this._history.length>0;)a.push(this._undoMove());const l=[];let c="";for(a.length===0&&l.push(i(""));a.length>0;){c=i(c);const h=a.pop();if(!h)break;if(!this._history.length&&h.color==="b"){const y=`${this._moveNumber}. ...`;c=c?`${c} ${y}`:y}else h.color==="w"&&(c.length&&l.push(c),c=this._moveNumber+".");c=c+" "+this._moveToSan(h,this._moves({legal:!0})),this._makeMove(h)}if(c.length&&l.push(i(c)),l.push(this._header.Result||"*"),n===0)return r.join("")+l.join(" ");const u=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},f=function(h,y){for(const p of y.split(" "))if(p){if(h+p.length>n){for(;u();)h--;r.push(t),h=0}r.push(p),h+=p.length,r.push(" "),h++}return u()&&h--,h};let m=0;for(let h=0;h<l.length;h++){if(m+l[h].length>n&&l[h].includes("{")){m=f(m,l[h]);continue}m+l[h].length>n&&h!==0?(r[r.length-1]===" "&&r.pop(),r.push(t),m=0):h!==0&&(r.push(" "),m++),r.push(l[h]),m+=l[h].length}return r.join("")}header(...t){for(let n=0;n<t.length;n+=2)typeof t[n]=="string"&&typeof t[n+1]=="string"&&(this._header[t[n]]=t[n+1]);return this._header}setHeader(t,n){return this._header[t]=n??Ih[t]??null,this.getHeaders()}removeHeader(t){return t in this._header?(this._header[t]=Ih[t]||null,!0):!1}getHeaders(){const t={};for(const[n,r]of Object.entries(this._header))r!==null&&(t[n]=r);return t}loadPgn(t,{strict:n=!1,newlineChar:r=`\r?
`}={}){r!==`\r?
`&&(t=t.replace(new RegExp(r,"g"),`
`));const s=UM(t);this.reset();const i=s.headers;let a="";for(const u in i)u.toLowerCase()==="fen"&&(a=i[u]),this.header(u,i[u]);if(!n)a&&this.load(a,{preserveHeaders:!0});else if(i.SetUp==="1"){if(!("FEN"in i))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(i.FEN,{preserveHeaders:!0})}let l=s.root;for(;l;){if(l.move){const u=this._moveFromSan(l.move,n);if(u==null)throw new Error(`Invalid move in PGN: ${l.move}`);this._makeMove(u),this._incPositionCount()}l.comment!==void 0&&(this._comments[this.fen()]=l.comment),l=l.variations[0]}const c=s.result;c&&Object.keys(this._header).length&&this._header.Result!==c&&this.setHeader("Result",c)}_moveToSan(t,n){let r="";if(t.flags&Ie.KSIDE_CASTLE)r="O-O";else if(t.flags&Ie.QSIDE_CASTLE)r="O-O-O";else{if(t.flags&Ie.NULL_MOVE)return hf;if(t.piece!==qt){const s=l_(t,n);r+=t.piece.toUpperCase()+s}t.flags&(Ie.CAPTURE|Ie.EP_CAPTURE)&&(t.piece===qt&&(r+=rn(t.from)[0]),r+="x"),r+=rn(t.to),t.promotion&&(r+="="+t.promotion.toUpperCase())}return this._makeMove(t),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(t,n=!1){let r=mf(t);if(n||(r==="0-0"?r="O-O":r==="0-0-0"&&(r="O-O-O")),r==hf)return{color:this._turn,from:0,to:0,piece:"k",flags:Ie.NULL_MOVE};let s=l0(r),i=this._moves({legal:!0,piece:s});for(let h=0,y=i.length;h<y;h++)if(r===mf(this._moveToSan(i[h],i)))return i[h];if(n)return null;let a,l,c,u,f,m=!1;if(l=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),l?(a=l[1],c=l[2],u=l[3],f=l[4],c.length==1&&(m=!0)):(l=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),l&&(a=l[1],c=l[2],u=l[3],f=l[4],c.length==1&&(m=!0))),s=l0(r),i=this._moves({legal:!0,piece:a||s}),!u)return null;for(let h=0,y=i.length;h<y;h++)if(c){if((!a||a.toLowerCase()==i[h].piece)&&Me[c]==i[h].from&&Me[u]==i[h].to&&(!f||f.toLowerCase()==i[h].promotion))return i[h];if(m){const p=rn(i[h].from);if((!a||a.toLowerCase()==i[h].piece)&&Me[u]==i[h].to&&(c==p[0]||c==p[1])&&(!f||f.toLowerCase()==i[h].promotion))return i[h]}}else if(r===mf(this._moveToSan(i[h],i)).replace("x",""))return i[h];return null}ascii(){let t=`   +------------------------+
`;for(let n=Me.a8;n<=Me.h1;n++){if(al(n)===0&&(t+=" "+"87654321"[bo(n)]+" |"),this._board[n]){const r=this._board[n].type,i=this._board[n].color===xn?r.toUpperCase():r.toLowerCase();t+=" "+i+" "}else t+=" . ";n+1&136&&(t+=`|
`,n+=8)}return t+=`   +------------------------+
`,t+="     a  b  c  d  e  f  g  h",t}perft(t){const n=this._moves({legal:!1});let r=0;const s=this._turn;for(let i=0,a=n.length;i<a;i++)this._makeMove(n[i]),this._isKingAttacked(s)||(t-1>0?r+=this.perft(t-1):r++),this._undoMove();return r}setTurn(t){return this._turn==t?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const t=[];let n=[];for(let r=Me.a8;r<=Me.h1;r++)this._board[r]==null?n.push(null):n.push({square:rn(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(t.push(n),n=[],r+=8);return t}squareColor(t){if(t in Me){const n=Me[t];return(bo(n)+al(n))%2===0?"light":"dark"}return null}history({verbose:t=!1}={}){const n=[],r=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const s=n.pop();if(!s)break;t?r.push(new ac(this,s)):r.push(this._moveToSan(s,this._moves())),this._makeMove(s)}return r}_getPositionCount(t){return this._positionCount.get(t)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(t){const n=this._positionCount.get(t)??0;n===1?this._positionCount.delete(t):this._positionCount.set(t,n-1)}_pruneComments(){const t=[],n={},r=s=>{s in this._comments&&(n[s]=this._comments[s])};for(;this._history.length>0;)t.push(this._undoMove());for(r(this.fen());;){const s=t.pop();if(!s)break;this._makeMove(s),r(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(t){this._comments[this.fen()]=t.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const t=this._comments[this.fen()];return delete this._comments[this.fen()],t}getComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>({fen:t,comment:this._comments[t]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>{const n=this._comments[t];return delete this._comments[t],{fen:t,comment:n}})}setCastlingRights(t,n){for(const s of[Yt,Es])n[s]!==void 0&&(n[s]?this._castling[t]|=lc[s]:this._castling[t]&=~lc[s]);this._updateCastlingRights();const r=this.getCastlingRights(t);return(n[Yt]===void 0||n[Yt]===r[Yt])&&(n[Es]===void 0||n[Es]===r[Es])}getCastlingRights(t){return{[Yt]:(this._castling[t]&lc[Yt])!==0,[Es]:(this._castling[t]&lc[Es])!==0}}moveNumber(){return this._moveNumber}}const di=["a","b","c","d","e","f","g","h"],cc=["8","7","6","5","4","3","2","1"],vu=e=>({file:di.indexOf(e[0]),rank:parseInt(e[1])-1}),c0=(e,t)=>`${di[e]}${t+1}`,c_=(e,t)=>{const n=vu(e),r=vu(t),s=Math.abs(r.file-n.file),i=Math.abs(r.rank-n.rank);return s===2&&i===1||s===1&&i===2},u_=(e,t)=>{const n=vu(e),r=vu(t),s=r.file-n.file;return Math.abs(s)===2?c0(r.file,n.rank):c0(n.file,r.rank)},d_={K:"/pieces/wK.svg",Q:"/pieces/wQ.svg",R:"/pieces/wR.svg",B:"/pieces/wB.svg",N:"/pieces/wN.svg",P:"/pieces/wP.svg",k:"/pieces/bK.svg",q:"/pieces/bQ.svg",r:"/pieces/bR.svg",b:"/pieces/bB.svg",n:"/pieces/bN.svg",p:"/pieces/bP.svg"};function f_({fen:e="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",orientation:t="white",showCoordinates:n=!0,highlightedSquares:r=[],legalMoveSquares:s=[],lastMoveSquares:i=[],lastMove:a,selectedSquare:l=null,lockedPiece:c=null,onSquareClick:u,onMove:f,interactionMode:m="free",className:h="",noCard:y=!1,enableArrows:p=!0,enablePremoves:g=!1,isPlayerTurn:w=!0,premove:x=null,onPremove:v,arrowDrawMode:b=!1,highlightColor:S="yellow",customHighlightColors:N,hideSelectionHighlight:j=!1}){const k=(N==null?void 0:N.selectedPiece)||(S==="red"?"#ef4444":"#facc15"),C=(N==null?void 0:N.lastMove)||"#f97316",R=(N==null?void 0:N.availableMoves)||"#fbbf24",[T,F]=d.useState(null),_=l!==null?l:T,[z,M]=d.useState([]),[V,W]=d.useState(null),[q,E]=d.useState(!1),[A,O]=d.useState(null),K=d.useRef(null),ae=a?[a.from,a.to]:i;d.useEffect(()=>{F(null)},[e]),d.useEffect(()=>{b||O(null)},[b]);const ve=(H=>{const X=H.split(" ")[0].split("/"),me=[];for(const ge of X){const de=[];for(const _e of ge)if(isNaN(parseInt(_e)))de.push(_e);else for(let Ee=0;Ee<parseInt(_e);Ee++)de.push(null);me.push(de)}return me})(e),te=t==="white"?cc:[...cc].reverse(),I=t==="white"?di:[...di].reverse(),B=d.useCallback((H,X)=>{if(!K.current)return null;const me=K.current.getBoundingClientRect(),ge=H-me.left,de=X-me.top,_e=me.width/8,Ee=me.height/8,je=Math.floor(ge/_e),nt=Math.floor(de/Ee);if(je<0||je>7||nt<0||nt>7)return null;const Ht=I[je],Qe=te[nt];return`${Ht}${Qe}`},[I,te]),Q=(H,X,me)=>{const ge=`${H}${X}`;if(m==="viewOnly")return;if(b){if(A===null)O(ge);else if(A===ge)O(null);else{const je={from:A,to:ge},nt=z.findIndex(Ht=>Ht.from===je.from&&Ht.to===je.to);nt>=0?M(z.filter((Ht,Qe)=>Qe!==nt)):M([...z,je]),O(null)}return}me&&M([]);const de=je=>je===je.toUpperCase(),Ee=(()=>{var zt;if(!_)return null;const je=_[0],nt=_[1],Ht=cc.indexOf(nt),Qe=di.indexOf(je);return((zt=ve[Ht])==null?void 0:zt[Qe])||null})();if(me&&Ee&&_!==ge){const je=de(Ee),nt=de(me);if(je===nt){if(c){u==null||u(ge);return}F(ge),u==null||u(ge);return}}if(f&&_&&_!==ge){if(f(_,ge)){F(null);return}if(me&&l===null&&!c){F(ge),u==null||u(ge);return}}me?l===null&&!c&&F(ge):_&&!c&&F(null),u==null||u(ge)},G=d.useCallback(H=>{H.preventDefault()},[]),se=d.useCallback(H=>{if(!(!p||m==="viewOnly")&&(H.button===2||b)){H.preventDefault(),E(!0);const X=B(H.clientX,H.clientY);X&&W({from:X,currentSquare:X})}},[p,b,B]),ce=d.useCallback(H=>{if(!V||!q)return;const X=B(H.clientX,H.clientY);X&&X!==V.currentSquare&&W({...V,currentSquare:X})},[V,q,B]),Se=d.useCallback(H=>{if(p&&(H.button===2||b)&&V&&q){const X=B(H.clientX,H.clientY);if(X&&X!==V.from){const me={from:V.from,to:X},ge=z.findIndex(de=>de.from===me.from&&de.to===me.to);ge>=0?M(z.filter((de,_e)=>_e!==ge)):M([...z,me])}W(null),E(!1)}},[p,b,V,q,z,B]),qe=d.useCallback(H=>{},[]),Fe=d.useCallback(H=>{},[]),Le=d.useCallback(H=>{},[]),Je=d.useCallback(H=>{const X=H[0],me=H[1],ge=I.indexOf(X),de=te.indexOf(me);return{x:(ge+.5)*12.5,y:(de+.5)*12.5}},[I,te]),Ke=(H,X)=>(H+X)%2===0?"bg-board-light":"bg-board-dark",dt=H=>x&&(x.from===H||x.to===H),tt=(H,X,me=!1)=>{const ge=Je(H.from),de=Je(H.to),_e=me?"rgba(255, 170, 0, 0.7)":"rgba(255, 170, 0, 0.8)";if(c_(H.from,H.to)){const hn=u_(H.from,H.to),Gt=Je(hn),gt=de.x-Gt.x,$n=de.y-Gt.y,en=Math.sqrt(gt*gt+$n*$n),_t=(en-3*.7)/en,Ue=Gt.x+gt*_t,Nt=Gt.y+$n*_t;return o.jsxs("g",{children:[o.jsx("line",{x1:ge.x,y1:ge.y,x2:Gt.x,y2:Gt.y,stroke:_e,strokeWidth:"2.5",strokeLinecap:"round"}),o.jsx("line",{x1:Gt.x,y1:Gt.y,x2:Ue,y2:Nt,stroke:_e,strokeWidth:"2.5",strokeLinecap:"round"}),o.jsx("polygon",{points:"0,-2 4,0 0,2",fill:_e,transform:`translate(${de.x},${de.y}) rotate(${Math.atan2($n,gt)*180/Math.PI})`})]},`arrow-${X}`)}const Ee=de.x-ge.x,je=de.y-ge.y,nt=Math.sqrt(Ee*Ee+je*je),zt=(nt-3*.7)/nt,Kt=ge.x+Ee*zt,kn=ge.y+je*zt;return o.jsxs("g",{children:[o.jsx("line",{x1:ge.x,y1:ge.y,x2:Kt,y2:kn,stroke:_e,strokeWidth:"2.5",strokeLinecap:"round"}),o.jsx("polygon",{points:"0,-2 4,0 0,2",fill:_e,transform:`translate(${de.x},${de.y}) rotate(${Math.atan2(je,Ee)*180/Math.PI})`})]},`arrow-${X}`)},Ft=o.jsxs("div",{ref:K,className:"relative w-full h-full select-none",onContextMenu:G,onMouseDown:se,onMouseMove:ce,onMouseUp:Se,onMouseLeave:()=>{q&&(W(null),E(!1))},onTouchStart:qe,onTouchMove:Fe,onTouchEnd:Le,children:[o.jsx("div",{className:"grid grid-cols-8 grid-rows-8 gap-0 w-full h-full",children:te.map((H,X)=>I.map((me,ge)=>{var $n;const de=`${me}${H}`,_e=cc.indexOf(H),Ee=di.indexOf(me),je=($n=ve[_e])==null?void 0:$n[Ee],nt=r.includes(de),Ht=_===de,Qe=c===de,zt=ae.includes(de),Kt=dt(de),kn=s.includes(de),hn=kn&&je!==null,Gt=A===de,gt=(en,pr)=>{const Ze=parseInt(en.slice(1,3),16),_t=parseInt(en.slice(3,5),16),Ue=parseInt(en.slice(5,7),16);return`rgba(${Ze}, ${_t}, ${Ue}, ${pr})`};return o.jsxs("div",{"data-testid":`square-${de}`,"data-square":de,onClick:()=>Q(me,H,je),className:`
                    relative flex items-center justify-center cursor-pointer
                    ${Ke(ge,X)}
                    ${nt?"ring-2 ring-primary ring-inset":""}
                    ${Kt?"bg-opacity-80 after:absolute after:inset-0 after:bg-blue-500/40":""}
                    ${Gt?"ring-4 ring-orange-400 ring-inset":""}
                    hover-elevate
                  `,style:{...!j&&Ht&&!Qe?{boxShadow:`inset 0 0 0 4px ${k}`}:{},...!j&&Qe?{boxShadow:`inset 0 0 0 4px ${k}`}:{}},children:[zt&&o.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{backgroundColor:gt(C,.3)}}),je&&o.jsx("img",{src:d_[je],alt:je,className:"w-[75%] h-[75%] select-none relative z-10 pointer-events-none",draggable:!1}),kn&&!hn&&o.jsx("div",{className:"absolute w-3 h-3 sm:w-4 sm:h-4 rounded-full pointer-events-none z-10",style:{backgroundColor:gt(R,.4)}}),hn&&o.jsx("div",{className:"absolute inset-0 rounded-full pointer-events-none z-10",style:{border:`3px solid ${gt(R,.5)}`}}),n&&ge===0&&o.jsx("span",{className:"absolute bottom-0.5 left-1 text-xs font-semibold select-none opacity-70",children:H}),n&&X===7&&o.jsx("span",{className:"absolute bottom-0.5 right-1 text-xs font-semibold select-none opacity-70",children:me})]},de)}))}),(z.length>0||V)&&o.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[z.map((H,X)=>tt(H,X)),V&&V.from!==V.currentSquare&&tt({from:V.from,to:V.currentSquare},-1,!0)]})]});return y?o.jsx("div",{className:`aspect-square w-full ${h}`,children:Ft}):o.jsx(Ge,{className:`aspect-square w-full max-w-full md:max-w-[600px] p-1 md:p-2 ${h}`,children:Ft})}const h_=[{key:"q",name:"Queen",white:"/pieces/wQ.svg",black:"/pieces/bQ.svg"},{key:"r",name:"Rook",white:"/pieces/wR.svg",black:"/pieces/bR.svg"},{key:"b",name:"Bishop",white:"/pieces/wB.svg",black:"/pieces/bB.svg"},{key:"n",name:"Knight",white:"/pieces/wN.svg",black:"/pieces/bN.svg"}];function m_({open:e,color:t,onSelect:n}){return o.jsx(Oi,{open:e,onOpenChange:()=>{},children:o.jsxs(Mo,{className:"sm:max-w-md",onPointerDownOutside:r=>r.preventDefault(),children:[o.jsx(_o,{children:o.jsx(Ao,{className:"text-center",children:"Promote Pawn"})}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:h_.map(r=>o.jsx(Y,{variant:"outline",className:"h-20 hover-elevate",onClick:()=>n(r.key),"data-testid":`button-promote-${r.key}`,children:o.jsx("img",{src:t==="white"?r.white:r.black,alt:r.name,className:"w-12 h-12",draggable:!1})},r.key))}),o.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"Select a piece to promote your pawn"})]})})}function ll(e,[t,n]){return Math.min(n,Math.max(t,e))}var p_=[" ","Enter","ArrowUp","ArrowDown"],g_=[" ","Enter"],kl="Select",[nd,rd,v_]=Um(kl),[ta,u3]=Un(kl,[v_,Yu]),sd=Yu(),[x_,Js]=ta(kl),[y_,w_]=ta(kl),fS=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:u,name:f,autoComplete:m,disabled:h,required:y,form:p}=e,g=sd(t),[w,x]=d.useState(null),[v,b]=d.useState(null),[S,N]=d.useState(!1),j=Nl(u),[k=!1,C]=Eo({prop:r,defaultProp:s,onChange:i}),[R,T]=Eo({prop:a,defaultProp:l,onChange:c}),F=d.useRef(null),_=w?p||!!w.closest("form"):!0,[z,M]=d.useState(new Set),V=Array.from(z).map(W=>W.props.value).join(";");return o.jsx(bP,{...g,children:o.jsxs(x_,{required:y,scope:t,trigger:w,onTriggerChange:x,valueNode:v,onValueNodeChange:b,valueNodeHasChildren:S,onValueNodeHasChildrenChange:N,contentId:Vs(),value:R,onValueChange:T,open:k,onOpenChange:C,dir:j,triggerPointerDownPosRef:F,disabled:h,children:[o.jsx(nd.Provider,{scope:t,children:o.jsx(y_,{scope:e.__scopeSelect,onNativeOptionAdd:d.useCallback(W=>{M(q=>new Set(q).add(W))},[]),onNativeOptionRemove:d.useCallback(W=>{M(q=>{const E=new Set(q);return E.delete(W),E})},[]),children:n})}),_?o.jsxs(OS,{"aria-hidden":!0,required:y,tabIndex:-1,name:f,autoComplete:m,value:R,onChange:W=>T(W.target.value),disabled:h,form:p,children:[R===void 0?o.jsx("option",{value:""}):null,Array.from(z)]},V):null]})})};fS.displayName=kl;var hS="SelectTrigger",mS=d.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,i=sd(n),a=Js(hS,n),l=a.disabled||r,c=Ve(t,a.onTriggerChange),u=rd(n),f=d.useRef("touch"),[m,h,y]=DS(g=>{const w=u().filter(b=>!b.disabled),x=w.find(b=>b.value===a.value),v=BS(w,g,x);v!==void 0&&a.onValueChange(v.value)}),p=g=>{l||(a.onOpenChange(!0),y()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return o.jsx(Jw,{asChild:!0,...i,children:o.jsx(Re.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":$S(a.value)?"":void 0,...s,ref:c,onClick:be(s.onClick,g=>{g.currentTarget.focus(),f.current!=="mouse"&&p(g)}),onPointerDown:be(s.onPointerDown,g=>{f.current=g.pointerType;const w=g.target;w.hasPointerCapture(g.pointerId)&&w.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(p(g),g.preventDefault())}),onKeyDown:be(s.onKeyDown,g=>{const w=m.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&h(g.key),!(w&&g.key===" ")&&p_.includes(g.key)&&(p(),g.preventDefault())})})})});mS.displayName=hS;var pS="SelectValue",gS=d.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=e,c=Js(pS,n),{onValueNodeHasChildrenChange:u}=c,f=i!==void 0,m=Ve(t,c.onValueNodeChange);return an(()=>{u(f)},[u,f]),o.jsx(Re.span,{...l,ref:m,style:{pointerEvents:"none"},children:$S(c.value)?o.jsx(o.Fragment,{children:a}):i})});gS.displayName=pS;var b_="SelectIcon",vS=d.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return o.jsx(Re.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});vS.displayName=b_;var S_="SelectPortal",xS=e=>o.jsx(Du,{asChild:!0,...e});xS.displayName=S_;var Lo="SelectContent",yS=d.forwardRef((e,t)=>{const n=Js(Lo,e.__scopeSelect),[r,s]=d.useState();if(an(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Do.createPortal(o.jsx(wS,{scope:e.__scopeSelect,children:o.jsx(nd.Slot,{scope:e.__scopeSelect,children:o.jsx("div",{children:e.children})})}),i):null}return o.jsx(bS,{...e,ref:t})});yS.displayName=Lo;var vr=10,[wS,eo]=ta(Lo),N_="SelectContentImpl",k_=Li("SelectContent.RemoveScroll"),bS=d.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:m,collisionBoundary:h,collisionPadding:y,sticky:p,hideWhenDetached:g,avoidCollisions:w,...x}=e,v=Js(Lo,n),[b,S]=d.useState(null),[N,j]=d.useState(null),k=Ve(t,B=>S(B)),[C,R]=d.useState(null),[T,F]=d.useState(null),_=rd(n),[z,M]=d.useState(!1),V=d.useRef(!1);d.useEffect(()=>{if(b)return P1(b)},[b]),y1();const W=d.useCallback(B=>{const[Q,...G]=_().map(Se=>Se.ref.current),[se]=G.slice(-1),ce=document.activeElement;for(const Se of B)if(Se===ce||(Se==null||Se.scrollIntoView({block:"nearest"}),Se===Q&&N&&(N.scrollTop=0),Se===se&&N&&(N.scrollTop=N.scrollHeight),Se==null||Se.focus(),document.activeElement!==ce))return},[_,N]),q=d.useCallback(()=>W([C,b]),[W,C,b]);d.useEffect(()=>{z&&q()},[z,q]);const{onOpenChange:E,triggerPointerDownPosRef:A}=v;d.useEffect(()=>{if(b){let B={x:0,y:0};const Q=se=>{var ce,Se;B={x:Math.abs(Math.round(se.pageX)-(((ce=A.current)==null?void 0:ce.x)??0)),y:Math.abs(Math.round(se.pageY)-(((Se=A.current)==null?void 0:Se.y)??0))}},G=se=>{B.x<=10&&B.y<=10?se.preventDefault():b.contains(se.target)||E(!1),document.removeEventListener("pointermove",Q),A.current=null};return A.current!==null&&(document.addEventListener("pointermove",Q),document.addEventListener("pointerup",G,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Q),document.removeEventListener("pointerup",G,{capture:!0})}}},[b,E,A]),d.useEffect(()=>{const B=()=>E(!1);return window.addEventListener("blur",B),window.addEventListener("resize",B),()=>{window.removeEventListener("blur",B),window.removeEventListener("resize",B)}},[E]);const[O,K]=DS(B=>{const Q=_().filter(ce=>!ce.disabled),G=Q.find(ce=>ce.ref.current===document.activeElement),se=BS(Q,B,G);se&&setTimeout(()=>se.ref.current.focus())}),ae=d.useCallback((B,Q,G)=>{const se=!V.current&&!G;(v.value!==void 0&&v.value===Q||se)&&(R(B),se&&(V.current=!0))},[v.value]),he=d.useCallback(()=>b==null?void 0:b.focus(),[b]),ve=d.useCallback((B,Q,G)=>{const se=!V.current&&!G;(v.value!==void 0&&v.value===Q||se)&&F(B)},[v.value]),te=r==="popper"?$h:SS,I=te===$h?{side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:m,collisionBoundary:h,collisionPadding:y,sticky:p,hideWhenDetached:g,avoidCollisions:w}:{};return o.jsx(wS,{scope:n,content:b,viewport:N,onViewportChange:j,itemRefCallback:ae,selectedItem:C,onItemLeave:he,itemTextRefCallback:ve,focusSelectedItem:q,selectedItemText:T,position:r,isPositioned:z,searchRef:O,children:o.jsx(hp,{as:k_,allowPinchZoom:!0,children:o.jsx(fp,{asChild:!0,trapped:v.open,onMountAutoFocus:B=>{B.preventDefault()},onUnmountAutoFocus:be(s,B=>{var Q;(Q=v.trigger)==null||Q.focus({preventScroll:!0}),B.preventDefault()}),children:o.jsx(xl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:B=>B.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:o.jsx(te,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:B=>B.preventDefault(),...x,...I,onPlaced:()=>M(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:be(x.onKeyDown,B=>{const Q=B.ctrlKey||B.altKey||B.metaKey;if(B.key==="Tab"&&B.preventDefault(),!Q&&B.key.length===1&&K(B.key),["ArrowUp","ArrowDown","Home","End"].includes(B.key)){let se=_().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);if(["ArrowUp","End"].includes(B.key)&&(se=se.slice().reverse()),["ArrowUp","ArrowDown"].includes(B.key)){const ce=B.target,Se=se.indexOf(ce);se=se.slice(Se+1)}setTimeout(()=>W(se)),B.preventDefault()}})})})})})})});bS.displayName=N_;var j_="SelectItemAlignedPosition",SS=d.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,i=Js(Lo,n),a=eo(Lo,n),[l,c]=d.useState(null),[u,f]=d.useState(null),m=Ve(t,k=>f(k)),h=rd(n),y=d.useRef(!1),p=d.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:x,focusSelectedItem:v}=a,b=d.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&g&&w&&x){const k=i.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),R=i.valueNode.getBoundingClientRect(),T=x.getBoundingClientRect();if(i.dir!=="rtl"){const ce=T.left-C.left,Se=R.left-ce,qe=k.left-Se,Fe=k.width+qe,Le=Math.max(Fe,C.width),Je=window.innerWidth-vr,Ke=ll(Se,[vr,Math.max(vr,Je-Le)]);l.style.minWidth=Fe+"px",l.style.left=Ke+"px"}else{const ce=C.right-T.right,Se=window.innerWidth-R.right-ce,qe=window.innerWidth-k.right-Se,Fe=k.width+qe,Le=Math.max(Fe,C.width),Je=window.innerWidth-vr,Ke=ll(Se,[vr,Math.max(vr,Je-Le)]);l.style.minWidth=Fe+"px",l.style.right=Ke+"px"}const F=h(),_=window.innerHeight-vr*2,z=g.scrollHeight,M=window.getComputedStyle(u),V=parseInt(M.borderTopWidth,10),W=parseInt(M.paddingTop,10),q=parseInt(M.borderBottomWidth,10),E=parseInt(M.paddingBottom,10),A=V+W+z+E+q,O=Math.min(w.offsetHeight*5,A),K=window.getComputedStyle(g),ae=parseInt(K.paddingTop,10),he=parseInt(K.paddingBottom,10),ve=k.top+k.height/2-vr,te=_-ve,I=w.offsetHeight/2,B=w.offsetTop+I,Q=V+W+B,G=A-Q;if(Q<=ve){const ce=F.length>0&&w===F[F.length-1].ref.current;l.style.bottom="0px";const Se=u.clientHeight-g.offsetTop-g.offsetHeight,qe=Math.max(te,I+(ce?he:0)+Se+q),Fe=Q+qe;l.style.height=Fe+"px"}else{const ce=F.length>0&&w===F[0].ref.current;l.style.top="0px";const qe=Math.max(ve,V+g.offsetTop+(ce?ae:0)+I)+G;l.style.height=qe+"px",g.scrollTop=Q-ve+g.offsetTop}l.style.margin=`${vr}px 0`,l.style.minHeight=O+"px",l.style.maxHeight=_+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[h,i.trigger,i.valueNode,l,u,g,w,x,i.dir,r]);an(()=>b(),[b]);const[S,N]=d.useState();an(()=>{u&&N(window.getComputedStyle(u).zIndex)},[u]);const j=d.useCallback(k=>{k&&p.current===!0&&(b(),v==null||v(),p.current=!1)},[b,v]);return o.jsx(E_,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:j,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:o.jsx(Re.div,{...s,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});SS.displayName=j_;var C_="SelectPopperPosition",$h=d.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=vr,...i}=e,a=sd(n);return o.jsx(e1,{...a,...i,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});$h.displayName=C_;var[E_,_p]=ta(Lo,{}),Oh="SelectViewport",NS=d.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,i=eo(Oh,n),a=_p(Oh,n),l=Ve(t,i.onViewportChange),c=d.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(nd.Slot,{scope:n,children:o.jsx(Re.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:be(s.onScroll,u=>{const f=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&m){const y=Math.abs(c.current-f.scrollTop);if(y>0){const p=window.innerHeight-vr*2,g=parseFloat(m.style.minHeight),w=parseFloat(m.style.height),x=Math.max(g,w);if(x<p){const v=x+y,b=Math.min(p,v),S=v-b;m.style.height=b+"px",m.style.bottom==="0px"&&(f.scrollTop=S>0?S:0,m.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});NS.displayName=Oh;var kS="SelectGroup",[P_,T_]=ta(kS),R_=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Vs();return o.jsx(P_,{scope:n,id:s,children:o.jsx(Re.div,{role:"group","aria-labelledby":s,...r,ref:t})})});R_.displayName=kS;var jS="SelectLabel",CS=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=T_(jS,n);return o.jsx(Re.div,{id:s.id,...r,ref:t})});CS.displayName=jS;var xu="SelectItem",[M_,ES]=ta(xu),PS=d.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=e,l=Js(xu,n),c=eo(xu,n),u=l.value===r,[f,m]=d.useState(i??""),[h,y]=d.useState(!1),p=Ve(t,v=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,v,r,s)}),g=Vs(),w=d.useRef("touch"),x=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(M_,{scope:n,value:r,disabled:s,textId:g,isSelected:u,onItemTextChange:d.useCallback(v=>{m(b=>b||((v==null?void 0:v.textContent)??"").trim())},[]),children:o.jsx(nd.ItemSlot,{scope:n,value:r,disabled:s,textValue:f,children:o.jsx(Re.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:p,onFocus:be(a.onFocus,()=>y(!0)),onBlur:be(a.onBlur,()=>y(!1)),onClick:be(a.onClick,()=>{w.current!=="mouse"&&x()}),onPointerUp:be(a.onPointerUp,()=>{w.current==="mouse"&&x()}),onPointerDown:be(a.onPointerDown,v=>{w.current=v.pointerType}),onPointerMove:be(a.onPointerMove,v=>{var b;w.current=v.pointerType,s?(b=c.onItemLeave)==null||b.call(c):w.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:be(a.onPointerLeave,v=>{var b;v.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:be(a.onKeyDown,v=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&v.key===" "||(g_.includes(v.key)&&x(),v.key===" "&&v.preventDefault())})})})})});PS.displayName=xu;var Ta="SelectItemText",TS=d.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...i}=e,a=Js(Ta,n),l=eo(Ta,n),c=ES(Ta,n),u=w_(Ta,n),[f,m]=d.useState(null),h=Ve(t,x=>m(x),c.onItemTextChange,x=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,x,c.value,c.disabled)}),y=f==null?void 0:f.textContent,p=d.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:y},c.value),[c.disabled,c.value,y]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=u;return an(()=>(g(p),()=>w(p)),[g,w,p]),o.jsxs(o.Fragment,{children:[o.jsx(Re.span,{id:c.textId,...i,ref:h}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Do.createPortal(i.children,a.valueNode):null]})});TS.displayName=Ta;var RS="SelectItemIndicator",MS=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return ES(RS,n).isSelected?o.jsx(Re.span,{"aria-hidden":!0,...r,ref:t}):null});MS.displayName=RS;var Dh="SelectScrollUpButton",_S=d.forwardRef((e,t)=>{const n=eo(Dh,e.__scopeSelect),r=_p(Dh,e.__scopeSelect),[s,i]=d.useState(!1),a=Ve(t,r.onScrollButtonChange);return an(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(LS,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});_S.displayName=Dh;var Bh="SelectScrollDownButton",AS=d.forwardRef((e,t)=>{const n=eo(Bh,e.__scopeSelect),r=_p(Bh,e.__scopeSelect),[s,i]=d.useState(!1),a=Ve(t,r.onScrollButtonChange);return an(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<u;i(f)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(LS,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});AS.displayName=Bh;var LS=d.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,i=eo("SelectScrollButton",n),a=d.useRef(null),l=rd(n),c=d.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return d.useEffect(()=>()=>c(),[c]),an(()=>{var f;const u=l().find(m=>m.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),o.jsx(Re.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:be(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:be(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:be(s.onPointerLeave,()=>{c()})})}),__="SelectSeparator",IS=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return o.jsx(Re.div,{"aria-hidden":!0,...r,ref:t})});IS.displayName=__;var Fh="SelectArrow",A_=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=sd(n),i=Js(Fh,n),a=eo(Fh,n);return i.open&&a.position==="popper"?o.jsx(t1,{...s,...r,ref:t}):null});A_.displayName=Fh;function $S(e){return e===""||e===void 0}var OS=d.forwardRef((e,t)=>{const{value:n,...r}=e,s=d.useRef(null),i=Ve(t,s),a=up(n);return d.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&f){const m=new Event("change",{bubbles:!0});f.call(l,n),l.dispatchEvent(m)}},[a,n]),o.jsx(yl,{asChild:!0,children:o.jsx("select",{...r,ref:i,defaultValue:n})})});OS.displayName="BubbleSelect";function DS(e){const t=Bt(e),n=d.useRef(""),r=d.useRef(0),s=d.useCallback(a=>{const l=n.current+a;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=d.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function BS(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let a=L_(e,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function L_(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var I_=fS,FS=mS,$_=gS,O_=vS,D_=xS,zS=yS,B_=NS,VS=CS,qS=PS,F_=TS,z_=MS,WS=_S,US=AS,HS=IS;const cl=I_,ul=$_,zi=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(FS,{ref:r,className:Ae("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,o.jsx(O_,{asChild:!0,children:o.jsx(uw,{className:"h-4 w-4 opacity-50"})})]}));zi.displayName=FS.displayName;const KS=d.forwardRef(({className:e,...t},n)=>o.jsx(WS,{ref:n,className:Ae("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(u2,{className:"h-4 w-4"})}));KS.displayName=WS.displayName;const GS=d.forwardRef(({className:e,...t},n)=>o.jsx(US,{ref:n,className:Ae("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(uw,{className:"h-4 w-4"})}));GS.displayName=US.displayName;const Vi=d.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>o.jsx(D_,{children:o.jsxs(zS,{ref:s,className:Ae("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[o.jsx(KS,{}),o.jsx(B_,{className:Ae("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),o.jsx(GS,{})]})}));Vi.displayName=zS.displayName;const V_=d.forwardRef(({className:e,...t},n)=>o.jsx(VS,{ref:n,className:Ae("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));V_.displayName=VS.displayName;const Qn=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(qS,{ref:r,className:Ae("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(z_,{children:o.jsx(wl,{className:"h-4 w-4"})})}),o.jsx(F_,{children:t})]}));Qn.displayName=qS.displayName;const q_=d.forwardRef(({className:e,...t},n)=>o.jsx(HS,{ref:n,className:Ae("-mx-1 my-1 h-px bg-muted",e),...t}));q_.displayName=HS.displayName;function fi(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}var W_=R0[" useInsertionEffect ".trim().toString()]||an;function U_({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,i,a]=H_({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const f=d.useRef(e!==void 0);d.useEffect(()=>{const m=f.current;m!==l&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const u=d.useCallback(f=>{var m;if(l){const h=K_(f)?f(e):f;h!==e&&((m=a.current)==null||m.call(a,h))}else i(f)},[l,e,i,a]);return[c,u]}function H_({defaultProp:e,onChange:t}){const[n,r]=d.useState(e),s=d.useRef(n),i=d.useRef(t);return W_(()=>{i.current=t},[t]),d.useEffect(()=>{var a;s.current!==n&&((a=i.current)==null||a.call(i,n),s.current=n)},[n,s]),[n,r,i]}function K_(e){return typeof e=="function"}function zh(e){const t=G_(e),n=d.forwardRef((r,s)=>{const{children:i,...a}=r,l=d.Children.toArray(i),c=l.find(Y_);if(c){const u=c.props.children,f=l.map(m=>m===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:m);return o.jsx(t,{...a,ref:s,children:d.isValidElement(u)?d.cloneElement(u,void 0,f):null})}return o.jsx(t,{...a,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}function G_(e){const t=d.forwardRef((n,r)=>{const{children:s,...i}=n;if(d.isValidElement(s)){const a=Z_(s),l=X_(i,s.props);return s.type!==d.Fragment&&(l.ref=r?Wm(r,a):a),d.cloneElement(s,l)}return d.Children.count(s)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Q_=Symbol("radix.slottable");function Y_(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Q_}function X_(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function Z_(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var J_=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],jl=J_.reduce((e,t)=>{const n=zh(`Primitive.${t}`),r=d.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function e4(e){const t=e+"CollectionProvider",[n,r]=Un(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:w,children:x}=g,v=Tn.useRef(null),b=Tn.useRef(new Map).current;return o.jsx(s,{scope:w,itemMap:b,collectionRef:v,children:x})};a.displayName=t;const l=e+"CollectionSlot",c=zh(l),u=Tn.forwardRef((g,w)=>{const{scope:x,children:v}=g,b=i(l,x),S=Ve(w,b.collectionRef);return o.jsx(c,{ref:S,children:v})});u.displayName=l;const f=e+"CollectionItemSlot",m="data-radix-collection-item",h=zh(f),y=Tn.forwardRef((g,w)=>{const{scope:x,children:v,...b}=g,S=Tn.useRef(null),N=Ve(w,S),j=i(f,x);return Tn.useEffect(()=>(j.itemMap.set(S,{ref:S,...b}),()=>void j.itemMap.delete(S))),o.jsx(h,{[m]:"",ref:N,children:v})});y.displayName=f;function p(g){const w=i(e+"CollectionConsumer",g);return Tn.useCallback(()=>{const v=w.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${m}]`));return Array.from(w.itemMap.values()).sort((j,k)=>b.indexOf(j.ref.current)-b.indexOf(k.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:u,ItemSlot:y},p,r]}var QS=["PageUp","PageDown"],YS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],XS={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},na="Slider",[Vh,t4,n4]=e4(na),[ZS,d3]=Un(na,[n4]),[r4,od]=ZS(na),JS=d.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:i=1,orientation:a="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:f,onValueChange:m=()=>{},onValueCommit:h=()=>{},inverted:y=!1,form:p,...g}=e,w=d.useRef(new Set),x=d.useRef(0),b=a==="horizontal"?s4:o4,[S=[],N]=U_({prop:f,defaultProp:u,onChange:F=>{var z;(z=[...w.current][x.current])==null||z.focus(),m(F)}}),j=d.useRef(S);function k(F){const _=u4(S,F);T(F,_)}function C(F){T(F,x.current)}function R(){const F=j.current[x.current];S[x.current]!==F&&h(S)}function T(F,_,{commit:z}={commit:!1}){const M=m4(i),V=p4(Math.round((F-r)/i)*i+r,M),W=ll(V,[r,s]);N((q=[])=>{const E=l4(q,W,_);if(h4(E,c*i)){x.current=E.indexOf(W);const A=String(E)!==String(q);return A&&z&&h(E),A?E:q}else return q})}return o.jsx(r4,{scope:e.__scopeSlider,name:n,disabled:l,min:r,max:s,valueIndexToChangeRef:x,thumbs:w.current,values:S,orientation:a,form:p,children:o.jsx(Vh.Provider,{scope:e.__scopeSlider,children:o.jsx(Vh.Slot,{scope:e.__scopeSlider,children:o.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:t,onPointerDown:fi(g.onPointerDown,()=>{l||(j.current=S)}),min:r,max:s,inverted:y,onSlideStart:l?void 0:k,onSlideMove:l?void 0:C,onSlideEnd:l?void 0:R,onHomeKeyDown:()=>!l&&T(r,0,{commit:!0}),onEndKeyDown:()=>!l&&T(s,S.length-1,{commit:!0}),onStepKeyDown:({event:F,direction:_})=>{if(!l){const V=QS.includes(F.key)||F.shiftKey&&YS.includes(F.key)?10:1,W=x.current,q=S[W],E=i*V*_;T(q+E,W,{commit:!0})}}})})})})});JS.displayName=na;var[eN,tN]=ZS(na,{startEdge:"left",endEdge:"right",size:"width",direction:1}),s4=d.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:i,onSlideStart:a,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...f}=e,[m,h]=d.useState(null),y=Ve(t,b=>h(b)),p=d.useRef(void 0),g=Nl(s),w=g==="ltr",x=w&&!i||!w&&i;function v(b){const S=p.current||m.getBoundingClientRect(),N=[0,S.width],k=Ap(N,x?[n,r]:[r,n]);return p.current=S,k(b-S.left)}return o.jsx(eN,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:o.jsx(nN,{dir:g,"data-orientation":"horizontal",...f,ref:y,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const S=v(b.clientX);a==null||a(S)},onSlideMove:b=>{const S=v(b.clientX);l==null||l(S)},onSlideEnd:()=>{p.current=void 0,c==null||c()},onStepKeyDown:b=>{const N=XS[x?"from-left":"from-right"].includes(b.key);u==null||u({event:b,direction:N?-1:1})}})})}),o4=d.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:i,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=e,f=d.useRef(null),m=Ve(t,f),h=d.useRef(void 0),y=!s;function p(g){const w=h.current||f.current.getBoundingClientRect(),x=[0,w.height],b=Ap(x,y?[r,n]:[n,r]);return h.current=w,b(g-w.top)}return o.jsx(eN,{scope:e.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:o.jsx(nN,{"data-orientation":"vertical",...u,ref:m,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const w=p(g.clientY);i==null||i(w)},onSlideMove:g=>{const w=p(g.clientY);a==null||a(w)},onSlideEnd:()=>{h.current=void 0,l==null||l()},onStepKeyDown:g=>{const x=XS[y?"from-bottom":"from-top"].includes(g.key);c==null||c({event:g,direction:x?-1:1})}})})}),nN=d.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:a,onEndKeyDown:l,onStepKeyDown:c,...u}=e,f=od(na,n);return o.jsx(jl.span,{...u,ref:t,onKeyDown:fi(e.onKeyDown,m=>{m.key==="Home"?(a(m),m.preventDefault()):m.key==="End"?(l(m),m.preventDefault()):QS.concat(YS).includes(m.key)&&(c(m),m.preventDefault())}),onPointerDown:fi(e.onPointerDown,m=>{const h=m.target;h.setPointerCapture(m.pointerId),m.preventDefault(),f.thumbs.has(h)?h.focus():r(m)}),onPointerMove:fi(e.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&s(m)}),onPointerUp:fi(e.onPointerUp,m=>{const h=m.target;h.hasPointerCapture(m.pointerId)&&(h.releasePointerCapture(m.pointerId),i(m))})})}),rN="SliderTrack",sN=d.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=od(rN,n);return o.jsx(jl.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});sN.displayName=rN;var qh="SliderRange",oN=d.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=od(qh,n),i=tN(qh,n),a=d.useRef(null),l=Ve(t,a),c=s.values.length,u=s.values.map(h=>lN(h,s.min,s.max)),f=c>1?Math.min(...u):0,m=100-Math.max(...u);return o.jsx(jl.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:l,style:{...e.style,[i.startEdge]:f+"%",[i.endEdge]:m+"%"}})});oN.displayName=qh;var Wh="SliderThumb",iN=d.forwardRef((e,t)=>{const n=t4(e.__scopeSlider),[r,s]=d.useState(null),i=Ve(t,l=>s(l)),a=d.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return o.jsx(i4,{...e,ref:i,index:a})}),i4=d.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...i}=e,a=od(Wh,n),l=tN(Wh,n),[c,u]=d.useState(null),f=Ve(t,v=>u(v)),m=c?a.form||!!c.closest("form"):!0,h=op(c),y=a.values[r],p=y===void 0?0:lN(y,a.min,a.max),g=c4(r,a.values.length),w=h==null?void 0:h[l.size],x=w?d4(w,p,l.direction):0;return d.useEffect(()=>{if(c)return a.thumbs.add(c),()=>{a.thumbs.delete(c)}},[c,a.thumbs]),o.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${p}% + ${x}px)`},children:[o.jsx(Vh.ItemSlot,{scope:e.__scopeSlider,children:o.jsx(jl.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":a.min,"aria-valuenow":y,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...i,ref:f,style:y===void 0?{display:"none"}:e.style,onFocus:fi(e.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),m&&o.jsx(aN,{name:s??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:y},r)]})});iN.displayName=Wh;var a4="RadioBubbleInput",aN=d.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const s=d.useRef(null),i=Ve(s,r),a=up(t);return d.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==t&&f){const m=new Event("input",{bubbles:!0});f.call(l,t),l.dispatchEvent(m)}},[a,t]),o.jsx(jl.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});aN.displayName=a4;function l4(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,i)=>s-i)}function lN(e,t,n){const i=100/(n-t)*(e-t);return ll(i,[0,100])}function c4(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function u4(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function d4(e,t,n){const r=e/2,i=Ap([0,50],[0,r]);return(r-i(t)*n)*n}function f4(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function h4(e,t){if(t>0){const n=f4(e);return Math.min(...n)>=t}return!0}function Ap(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function m4(e){return(String(e).split(".")[1]||"").length}function p4(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var cN=JS,g4=sN,v4=oN,x4=iN;const uN=d.forwardRef(({className:e,...t},n)=>o.jsxs(cN,{ref:n,className:Ae("relative flex w-full touch-none select-none items-center",e),...t,children:[o.jsx(g4,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-muted",children:o.jsx(v4,{className:"absolute h-full bg-primary"})}),o.jsx(x4,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));uN.displayName=cN.displayName;function y4(e,t){return d.useReducer((n,r)=>t[n][r]??n,e)}var Lp="ScrollArea",[dN,f3]=Un(Lp),[w4,mr]=dN(Lp),fN=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...a}=e,[l,c]=d.useState(null),[u,f]=d.useState(null),[m,h]=d.useState(null),[y,p]=d.useState(null),[g,w]=d.useState(null),[x,v]=d.useState(0),[b,S]=d.useState(0),[N,j]=d.useState(!1),[k,C]=d.useState(!1),R=Ve(t,F=>c(F)),T=Nl(s);return o.jsx(w4,{scope:n,type:r,dir:T,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:f,content:m,onContentChange:h,scrollbarX:y,onScrollbarXChange:p,scrollbarXEnabled:N,onScrollbarXEnabledChange:j,scrollbarY:g,onScrollbarYChange:w,scrollbarYEnabled:k,onScrollbarYEnabledChange:C,onCornerWidthChange:v,onCornerHeightChange:S,children:o.jsx(Re.div,{dir:T,...a,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});fN.displayName=Lp;var hN="ScrollAreaViewport",mN=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=e,a=mr(hN,n),l=d.useRef(null),c=Ve(t,l,a.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(Re.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:o.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});mN.displayName=hN;var Qr="ScrollAreaScrollbar",Ip=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=mr(Qr,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,l=e.orientation==="horizontal";return d.useEffect(()=>(l?i(!0):a(!0),()=>{l?i(!1):a(!1)}),[l,i,a]),s.type==="hover"?o.jsx(b4,{...r,ref:t,forceMount:n}):s.type==="scroll"?o.jsx(S4,{...r,ref:t,forceMount:n}):s.type==="auto"?o.jsx(pN,{...r,ref:t,forceMount:n}):s.type==="always"?o.jsx($p,{...r,ref:t}):null});Ip.displayName=Qr;var b4=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=mr(Qr,e.__scopeScrollArea),[i,a]=d.useState(!1);return d.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),a(!0)},f=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx(Lr,{present:n||i,children:o.jsx(pN,{"data-state":i?"visible":"hidden",...r,ref:t})})}),S4=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=mr(Qr,e.__scopeScrollArea),i=e.orientation==="horizontal",a=ad(()=>c("SCROLL_END"),100),[l,c]=y4("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),d.useEffect(()=>{const u=s.viewport,f=i?"scrollLeft":"scrollTop";if(u){let m=u[f];const h=()=>{const y=u[f];m!==y&&(c("SCROLL"),a()),m=y};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[s.viewport,i,c,a]),o.jsx(Lr,{present:n||l!=="hidden",children:o.jsx($p,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:be(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:be(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),pN=d.forwardRef((e,t)=>{const n=mr(Qr,e.__scopeScrollArea),{forceMount:r,...s}=e,[i,a]=d.useState(!1),l=e.orientation==="horizontal",c=ad(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?u:f)}},10);return qi(n.viewport,c),qi(n.content,c),o.jsx(Lr,{present:r||i,children:o.jsx($p,{"data-state":i?"visible":"hidden",...s,ref:t})})}),$p=d.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=mr(Qr,e.__scopeScrollArea),i=d.useRef(null),a=d.useRef(0),[l,c]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=wN(l.viewport,l.content),f={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:h=>a.current=h};function m(h,y){return P4(h,a.current,l,y)}return n==="horizontal"?o.jsx(N4,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const h=s.viewport.scrollLeft,y=u0(h,l,s.dir);i.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=m(h,s.dir))}}):n==="vertical"?o.jsx(k4,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const h=s.viewport.scrollTop,y=u0(h,l);i.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=m(h))}}):null}),N4=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=mr(Qr,e.__scopeScrollArea),[a,l]=d.useState(),c=d.useRef(null),u=Ve(t,c,i.onScrollbarXChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(vN,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":id(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,m)=>{if(i.viewport){const h=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),SN(h,m)&&f.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:wu(a.paddingLeft),paddingEnd:wu(a.paddingRight)}})}})}),k4=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=mr(Qr,e.__scopeScrollArea),[a,l]=d.useState(),c=d.useRef(null),u=Ve(t,c,i.onScrollbarYChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(vN,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":id(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,m)=>{if(i.viewport){const h=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),SN(h,m)&&f.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:wu(a.paddingTop),paddingEnd:wu(a.paddingBottom)}})}})}),[j4,gN]=dN(Qr),vN=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:f,onResize:m,...h}=e,y=mr(Qr,n),[p,g]=d.useState(null),w=Ve(t,R=>g(R)),x=d.useRef(null),v=d.useRef(""),b=y.viewport,S=r.content-r.viewport,N=Bt(f),j=Bt(c),k=ad(m,10);function C(R){if(x.current){const T=R.clientX-x.current.left,F=R.clientY-x.current.top;u({x:T,y:F})}}return d.useEffect(()=>{const R=T=>{const F=T.target;(p==null?void 0:p.contains(F))&&N(T,S)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[b,p,S,N]),d.useEffect(j,[r,j]),qi(p,k),qi(y.content,k),o.jsx(j4,{scope:n,scrollbar:p,hasThumb:s,onThumbChange:Bt(i),onThumbPointerUp:Bt(a),onThumbPositionChange:j,onThumbPointerDown:Bt(l),children:o.jsx(Re.div,{...h,ref:w,style:{position:"absolute",...h.style},onPointerDown:be(e.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),x.current=p.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),C(R))}),onPointerMove:be(e.onPointerMove,C),onPointerUp:be(e.onPointerUp,R=>{const T=R.target;T.hasPointerCapture(R.pointerId)&&T.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=v.current,y.viewport&&(y.viewport.style.scrollBehavior=""),x.current=null})})})}),yu="ScrollAreaThumb",xN=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=gN(yu,e.__scopeScrollArea);return o.jsx(Lr,{present:n||s.hasThumb,children:o.jsx(C4,{ref:t,...r})})}),C4=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,i=mr(yu,n),a=gN(yu,n),{onThumbPositionChange:l}=a,c=Ve(t,m=>a.onThumbChange(m)),u=d.useRef(void 0),f=ad(()=>{u.current&&(u.current(),u.current=void 0)},100);return d.useEffect(()=>{const m=i.viewport;if(m){const h=()=>{if(f(),!u.current){const y=T4(m,l);u.current=y,l()}};return l(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[i.viewport,f,l]),o.jsx(Re.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:be(e.onPointerDownCapture,m=>{const y=m.target.getBoundingClientRect(),p=m.clientX-y.left,g=m.clientY-y.top;a.onThumbPointerDown({x:p,y:g})}),onPointerUp:be(e.onPointerUp,a.onThumbPointerUp)})});xN.displayName=yu;var Op="ScrollAreaCorner",yN=d.forwardRef((e,t)=>{const n=mr(Op,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?o.jsx(E4,{...e,ref:t}):null});yN.displayName=Op;var E4=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=mr(Op,n),[i,a]=d.useState(0),[l,c]=d.useState(0),u=!!(i&&l);return qi(s.scrollbarX,()=>{var m;const f=((m=s.scrollbarX)==null?void 0:m.offsetHeight)||0;s.onCornerHeightChange(f),c(f)}),qi(s.scrollbarY,()=>{var m;const f=((m=s.scrollbarY)==null?void 0:m.offsetWidth)||0;s.onCornerWidthChange(f),a(f)}),u?o.jsx(Re.div,{...r,ref:t,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function wu(e){return e?parseInt(e,10):0}function wN(e,t){const n=e/t;return isNaN(n)?0:n}function id(e){const t=wN(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function P4(e,t,n,r="ltr"){const s=id(n),i=s/2,a=t||i,l=s-a,c=n.scrollbar.paddingStart+a,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,m=r==="ltr"?[0,f]:[f*-1,0];return bN([c,u],m)(e)}function u0(e,t,n="ltr"){const r=id(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,a=t.content-t.viewport,l=i-r,c=n==="ltr"?[0,a]:[a*-1,0],u=ll(e,c);return bN([0,a],[0,l])(u)}function bN(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function SN(e,t){return e>0&&e<t}var T4=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const i={left:e.scrollLeft,top:e.scrollTop},a=n.left!==i.left,l=n.top!==i.top;(a||l)&&t(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function ad(e,t){const n=Bt(e),r=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(r.current),[]),d.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function qi(e,t){const n=Bt(t);an(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var NN=fN,R4=mN,M4=yN;const Dp=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(NN,{ref:r,className:Ae("relative overflow-hidden",e),...n,children:[o.jsx(R4,{className:"h-full w-full rounded-[inherit]",children:t}),o.jsx(kN,{}),o.jsx(M4,{})]}));Dp.displayName=NN.displayName;const kN=d.forwardRef(({className:e,orientation:t="vertical",...n},r)=>o.jsx(Ip,{ref:r,orientation:t,className:Ae("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:o.jsx(xN,{className:"relative flex-1 rounded-full bg-border"})}));kN.displayName=Ip.displayName;const _4="/assets/title_cropped-BD2iTFVW.webp",pf={wK:"/pieces/wK.svg",wQ:"/pieces/wQ.svg",wR:"/pieces/wR.svg",wB:"/pieces/wB.svg",wN:"/pieces/wN.svg",wP:"/pieces/wP.svg",bK:"/pieces/bK.svg",bQ:"/pieces/bQ.svg",bR:"/pieces/bR.svg",bB:"/pieces/bB.svg",bN:"/pieces/bN.svg",bP:"/pieces/bP.svg"},A4=["wK","wQ","wR","wB","wN","wP","bK","bQ","bR","bB","bN","bP"],L4={K:["king"],Q:["queen"],R:["rook","castle","rock","brook"],B:["bishop","bish","bishup"],N:["knight","night","horse","nite"],P:["pawn","pond"]},I4={ay:"a",aye:"a",eh:"a",bee:"b",be:"b",cee:"c",see:"c",sea:"c",dee:"d",eee:"e",ee:"e",ef:"f",eff:"f",gee:"g",jee:"g",aitch:"h",ach:"h",alpha:"a",alfa:"a",apple:"a",able:"a",bravo:"b",boy:"b",baker:"b",charlie:"c",cat:"c",delta:"d",dog:"d",david:"d",echo:"e",easy:"e",edward:"e",foxtrot:"f",fox:"f",frank:"f",golf:"g",george:"g",hotel:"h",henry:"h"};function $4(e){let t=e.toLowerCase();return t=t.replace(/\bbefore\b/g,"b 4"),t=t.replace(/\bsci\s*fi\b/g,"c 5"),t=t.replace(/\bscifi\b/g,"c 5"),t=t.replace(/\bquincy\b/g,"queen c"),t=t.replace(/\bhe\s+([1-8])\b/g,"e $1"),t=t.replace(/\bhe\s+(one|two|three|four|five|six|seven|eight|for)\b/gi,"e $1"),t=t.replace(/\bthe\s+([1-8])\b/g,"d $1"),t=t.replace(/\bthe\s+(one|two|three|four|five|six|seven|eight)\b/gi,"d $1"),t=t.replace(/\b([a-h])\s+for\b/g,"$1 4"),t}const O4={one:"1",won:"1",first:"1",two:"2",too:"2",second:"2",three:"3",free:"3",third:"3",tree:"3",four:"4",fore:"4",forth:"4",fourth:"4",for:"4",five:"5",fifth:"5",six:"6",sixth:"6",sicks:"6",seven:"7",seventh:"7",eight:"8",ate:"8",eighth:"8"};function D4(e){const t=Array(8).fill(null).map(()=>Array(8).fill(null)),[n]=e.split(" "),r=n.split("/"),s={K:"wK",Q:"wQ",R:"wR",B:"wB",N:"wN",P:"wP",k:"bK",q:"bQ",r:"bR",b:"bB",n:"bN",p:"bP"};return r.forEach((i,a)=>{let l=0;for(const c of i)/\d/.test(c)?l+=parseInt(c):s[c]&&(t[a][l]=s[c],l++)}),t}function B4(e,t){let n=0,r=0;for(let s=0;s<8;s++)for(let i=0;i<8;i++){const a=t[s][i],l=e[s][i];a!==null&&(r++,a===l&&n++)}return r===0?100:Math.round(n/r*100)}function d0(e){const n=$4(e).toLowerCase().trim();let r=null,s=null;for(const[i,a]of Object.entries(I4))if(n.includes(i)){r=a;break}if(!r){const i=n.match(/\b([a-h])\b/);i&&(r=i[1])}for(const[i,a]of Object.entries(O4))if(n.includes(i)){s=a;break}if(!s){const i=n.match(/[1-8]/);i&&(s=i[0])}if(!r||!s){const i=n.match(/([a-h])\s*([1-8])/);if(i)return{file:i[1],rank:i[2]}}return r&&s?{file:r,rank:s}:null}function F4(e){const t=e.toLowerCase();for(const[n,r]of Object.entries(L4))for(const s of r)if(t.includes(s))return n;return null}function f0(e){const t=e.toLowerCase();return t.includes("white")?"w":t.includes("black")?"b":null}function z4({actualFen:e,playerColor:t,onComplete:n,onSkip:r,onContinue:s,onViewReport:i}){const[a,l]=d.useState("ready"),[c,u]=d.useState(Array(8).fill(null).map(()=>Array(8).fill(null))),[f,m]=d.useState(null),[h,y]=d.useState(!1),[p,g]=d.useState(null),[w,x]=d.useState(100),[v,b]=d.useState(!1),[S,N]=d.useState(null),[j,k]=d.useState(""),[C,R]=d.useState(!0),[T,F]=d.useState(null),[_,z]=d.useState("w"),M=d.useRef("w"),[V,W]=d.useState(new Set),q=d.useRef(0),E=d.useRef(0),A=d.useRef(null),O=d.useRef(!0),K=D4(e);d.useEffect(()=>{M.current=_},[_]);const ae=d.useCallback((H,X)=>{const me=H.charCodeAt(0)-97;return{row:8-parseInt(X),col:me}},[]),he=d.useCallback((H,X,me,ge)=>{u(_e=>{const Ee=_e.map(je=>[...je]);return Ee[X][me]=H,Ee});const de=H.charAt(0);if(z(de),M.current=de,ge){q.current++;const _e=`${X}-${me}`;W(Ee=>new Set(Ee).add(_e)),setTimeout(()=>{W(Ee=>{const je=new Set(Ee);return je.delete(_e),je})},300)}else E.current++},[]),ve=d.useCallback((H,X,me)=>{u(ge=>{const de=ge.map(_e=>[..._e]);return de[H][X]&&(me?q.current++:E.current++,de[H][X]=null),de})},[]),te=d.useCallback(H=>{const X=H.toLowerCase().trim();if(k(H),X.includes("clear all")||X.includes("reset board")||X.includes("reset")){u(Array(8).fill(null).map(()=>Array(8).fill(null))),N(null);return}if(X.includes("done")||X.includes("submit")||X.includes("check position")){A.current&&A.current();return}if(X==="white"||X==="switch to white"||X==="white pieces"){z("w"),M.current="w";return}if(X==="black"||X==="switch to black"||X==="black pieces"){z("b"),M.current="b";return}if(S){const _e=f0(X);if(_e){const Ee=_e+S.pieceType,{row:je,col:nt}=ae(S.square.file,S.square.rank);he(Ee,je,nt,!0),N(null);return}}if(X.includes("clear")||X.includes("remove")||X.includes("delete")){const _e=d0(X);if(_e){const{row:Ee,col:je}=ae(_e.file,_e.rank);ve(Ee,je,!0)}return}const me=F4(X),ge=d0(X),de=f0(X);if(de&&(z(de),M.current=de),me&&ge){const Ee=(de||M.current)+me,{row:je,col:nt}=ae(ge.file,ge.rank);he(Ee,je,nt,!0),N(null)}},[S,ae,he,ve]),I=d.useRef(te);d.useEffect(()=>{I.current=te},[te]);const B=d.useCallback(async()=>{if(h)return;if(await nb(),!await rb()){console.warn("[Reconstruction] Microphone permission not granted"),await kp()==="prompt-with-rationale"&&alert("Voice control requires microphone access. Please enable it in your device Settings > Apps > Blindfold Chess > Permissions.");return}await ut.start({mode:"placement",onTranscript:me=>{I.current(me)},onListeningChange:me=>{b(me)}})&&console.log("[Reconstruction] Voice started via voiceMaster")},[h]),Q=d.useCallback(()=>{ut.stop(),b(!1),N(null)},[]);d.useEffect(()=>(O.current=!0,()=>{O.current=!1,ut.stop(),Bi.clearProtectedLane()}),[]),d.useEffect(()=>{if(a==="ready"){const H=setInterval(()=>{R(X=>!X)},800);return()=>clearInterval(H)}},[a]);const G=d.useRef(!1);d.useEffect(()=>{if(a==="ready"){G.current=!1;return}if(a==="playing"&&!h&&!G.current){G.current=!0;const H=setTimeout(()=>{B()},500);return()=>clearTimeout(H)}},[a,h,B]);const se=d.useCallback((H,X)=>{h||(f?he(f,H,X,!1):c[H][X]&&ve(H,X,!1))},[f,c,h,he,ve]),ce=d.useCallback((H,X)=>{h||(H.dataTransfer.setData("piece",X),H.dataTransfer.effectAllowed="copy",F(X))},[h]),Se=d.useCallback(()=>{F(null)},[]),qe=d.useCallback(H=>{H.preventDefault(),H.dataTransfer.dropEffect="copy"},[]),Fe=d.useCallback((H,X,me)=>{if(H.preventDefault(),h)return;const ge=H.dataTransfer.getData("piece");ge&&he(ge,X,me,!1),F(null)},[h,he]),Le=d.useCallback((H,X)=>{h||m(X)},[h]),Je=()=>{u(Array(8).fill(null).map(()=>Array(8).fill(null))),m(null),q.current=0,E.current=0},Ke=d.useCallback(()=>{const H=B4(c,K);g(H);const X=q.current+E.current,me=X>0?Math.round(q.current/X*100):0;x(me),y(!0),Q(),n(H,me,q.current,E.current)},[c,K,Q,n]);d.useEffect(()=>{A.current=Ke},[Ke]);const dt=t==="white"?["a","b","c","d","e","f","g","h"]:["h","g","f","e","d","c","b","a"],tt=t==="white"?["8","7","6","5","4","3","2","1"]:["1","2","3","4","5","6","7","8"],Ft=(S==null?void 0:S.type)==="color"?"animate-pulse ring-4 ring-amber-400":"";return a==="ready"?o.jsxs(Ge,{className:"w-full max-w-md mx-auto",children:[o.jsx(jt,{className:"pb-2",children:o.jsxs(Ct,{className:"text-lg flex items-center justify-between",children:[o.jsx("span",{children:"Board Reconstruction"}),o.jsx(Y,{variant:"ghost",size:"sm",onClick:r,"data-testid":"button-skip-reconstruction-ready",children:"Skip"})]})}),o.jsxs(ct,{className:"flex flex-col items-center justify-center py-12 gap-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx(dn,{className:`h-16 w-16 text-blue-500 transition-transform duration-300 ${C?"scale-110":"scale-100"}`}),o.jsx("div",{className:`absolute -top-1 -right-1 h-4 w-4 rounded-full ${C?"bg-green-500":"bg-green-400"} transition-colors duration-300`})]}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Ready to Reconstruct?"}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"Rebuild the position from memory using voice commands"}),o.jsx("p",{className:"text-muted-foreground text-xs",children:'Say pieces like "White Knight F3" or "Black Queen D8"'})]}),o.jsxs(Y,{size:"lg",onClick:()=>{Bi.register("reconstruction"),l("playing")},className:"mt-4","data-testid":"button-start-reconstruction",children:[o.jsx(dn,{className:"h-5 w-5 mr-2"}),"Start"]})]})]}):o.jsxs(Ge,{className:"w-full max-w-md mx-auto",children:[o.jsx(jt,{className:"pb-2",children:o.jsxs(Ct,{className:"text-lg flex items-center justify-between",children:[o.jsx("span",{children:"Reconstruct the Board"}),o.jsxs("div",{className:"flex items-center gap-2",children:[p!==null&&o.jsxs(it,{variant:p>=80?"default":p>=50?"secondary":"destructive",children:[p,"%"]}),h&&w>0&&o.jsxs(it,{variant:"outline",className:"text-amber-600 border-amber-400",children:["Voice: ",w,"%"]})]})]})}),o.jsxs(ct,{className:"space-y-3",children:[!h&&o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"flex-1",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:S?`Say "White" or "Black" for ${S.pieceType==="K"?"King":S.pieceType==="Q"?"Queen":S.pieceType==="R"?"Rook":S.pieceType==="B"?"Bishop":S.pieceType==="N"?"Knight":"Pawn"} on ${S.square.file}${S.square.rank}`:v?`"${j||"Knight f3"}"`:"Drag pieces or use voice commands"})}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>z(H=>H==="w"?"b":"w"),className:`w-7 h-7 rounded flex items-center justify-center transition-all border-2 ${_==="w"?"bg-white border-stone-400":"bg-stone-800 border-stone-600"}`,title:`Placing ${_==="w"?"White":"Black"} pieces - tap to switch`,"data-testid":"button-sticky-color",children:o.jsx("span",{className:`text-xs font-bold ${_==="w"?"text-stone-800":"text-white"}`,children:_==="w"?"W":"B"})}),o.jsx(Y,{size:"icon",variant:v?"destructive":"outline",onClick:v?Q:B,className:v?"animate-pulse":"","data-testid":"button-reconstruction-mic",children:v?o.jsx(dn,{className:"h-4 w-4"}):o.jsx(zs,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-1 justify-center p-2 bg-muted rounded-md",style:{touchAction:"none"},children:[A4.map(H=>o.jsx("div",{draggable:!h,onDragStart:X=>ce(X,H),onDragEnd:Se,onTouchStart:X=>Le(X,H),onClick:()=>!h&&m(f===H?null:H),className:`w-8 h-8 rounded transition-all cursor-grab active:cursor-grabbing ${f===H?"ring-2 ring-amber-400 bg-amber-100":T===H?"opacity-50":"hover:bg-muted-foreground/20"} ${h?"opacity-50 cursor-not-allowed":""}`,"data-testid":`piece-palette-${H}`,children:o.jsx("img",{src:pf[H],alt:H,className:"w-full h-full pointer-events-none",draggable:!1})},H)),o.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center bg-red-100 hover:bg-red-200 cursor-pointer",onClick:()=>m(null),"data-testid":"piece-palette-eraser",children:o.jsx(ww,{className:"h-4 w-4 text-red-600"})})]}),o.jsx("div",{className:`aspect-square w-full max-w-xs mx-auto rounded ${Ft}`,children:o.jsx("div",{className:"grid grid-cols-8 grid-rows-8 w-full h-full border border-stone-400",style:{touchAction:"none"},children:Array.from({length:64}).map((H,X)=>{const me=Math.floor(X/8),ge=X%8,de=t==="white"?me:7-me,_e=t==="white"?ge:7-ge,Ee=(me+ge)%2===0,je=c[de][_e],nt=K[de][_e],Ht=`${de}-${_e}`,Qe=V.has(Ht);let zt=Ee?"bg-amber-100":"bg-amber-700";const Kt=je===nt,kn=!je&&nt;return h&&(Kt?je!==null&&(zt=Ee?"bg-green-200":"bg-green-600"):zt=Ee?"bg-red-200":"bg-red-500"),o.jsxs("div",{onClick:()=>se(de,_e),onDragOver:qe,onDrop:hn=>Fe(hn,de,_e),className:`relative flex items-center justify-center cursor-pointer ${zt} ${!h&&(f||T)?"hover:ring-2 hover:ring-amber-400 hover:ring-inset":""}`,style:{touchAction:"none"},"data-testid":`reconstruction-square-${dt[ge]}${tt[me]}`,children:[h&&nt&&!Kt&&o.jsx("img",{src:pf[nt],alt:`actual-${nt}`,className:"absolute w-[85%] h-[85%] opacity-30 pointer-events-none",draggable:!1}),je&&o.jsx("img",{src:pf[je],alt:je,className:`w-[85%] h-[85%] pointer-events-none z-10 transition-transform ${Qe?"animate-[voicePop_0.2s_ease-out]":""} ${h&&!Kt?"animate-[shake_0.5s_ease-in-out]":""}`,draggable:!1}),h&&kn&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center animate-[fadeSlideIn_0.6s_ease-out_forwards]",style:{animationDelay:`${(de*8+_e)*30}ms`},children:o.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"})}),ge===0&&o.jsx("span",{className:"absolute top-0.5 left-0.5 text-[8px] font-semibold select-none opacity-70",children:tt[me]}),me===7&&o.jsx("span",{className:"absolute bottom-0.5 right-0.5 text-[8px] font-semibold select-none opacity-70",children:dt[ge]})]},X)})})}),o.jsx("div",{className:"flex gap-2",children:h?o.jsxs("div",{className:"flex gap-2 w-full",children:[i&&o.jsxs(Y,{variant:"outline",size:"sm",onClick:i,className:"flex-1","data-testid":"button-reconstruction-view-report",children:[o.jsx(cw,{className:"mr-1 h-4 w-4"}),"View Report"]}),o.jsx(Y,{size:"sm",onClick:s||r,className:"flex-1 bg-amber-400 hover:bg-amber-500 text-stone-900","data-testid":"button-reconstruction-continue",children:"Main Menu"})]}):o.jsxs(o.Fragment,{children:[o.jsxs(Y,{variant:"outline",size:"sm",onClick:Je,className:"flex-1","data-testid":"button-reconstruction-reset",children:[o.jsx(vw,{className:"mr-1 h-4 w-4"}),"Reset"]}),o.jsx(Y,{variant:"outline",size:"sm",onClick:()=>{Q(),r()},className:"flex-1","data-testid":"button-reconstruction-skip",children:"Skip"}),o.jsxs(Y,{size:"sm",onClick:Ke,className:"flex-1 bg-amber-400 hover:bg-amber-500 text-stone-900","data-testid":"button-reconstruction-submit",children:[o.jsx(j2,{className:"mr-1 h-4 w-4"}),"Check"]})]})}),h&&o.jsx("div",{className:"text-center text-sm",children:p!==null&&p>=80?o.jsxs("p",{className:"text-green-600 flex items-center justify-center gap-1",children:[o.jsx(wl,{className:"h-4 w-4"})," Excellent memory!"]}):p!==null&&p>=50?o.jsx("p",{className:"text-amber-600",children:"Good effort! Keep practicing."}):o.jsxs("p",{className:"text-red-600 flex items-center justify-center gap-1",children:[o.jsx(Po,{className:"h-4 w-4"})," Keep training your visualization!"]})})]})]})}function V4({responseTimes:e,onJumpToMove:t}){if(e.length<3)return o.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"Not enough moves to display stamina graph"});const n=Math.max(...e,1),r=e.length,i=Math.max(100,r*(4+2)),a=(y,p)=>{const g=y/p;return g<.15?"bg-green-500":g<.6?"bg-amber-400":"bg-red-400"},l=Math.floor(r*.15),c=Math.floor(r*.6),u={opening:e.slice(0,l),middlegame:e.slice(l,c),endgame:e.slice(c)},f=u.opening.length>0?u.opening.reduce((y,p)=>y+p,0)/u.opening.length:0,m=u.endgame.length>0?u.endgame.reduce((y,p)=>y+p,0)/u.endgame.length:0,h=f>0?Math.round((m-f)/f*100):0;return o.jsxs("div",{className:"space-y-3","data-testid":"mental-stamina-graph",children:[o.jsx("div",{className:"w-full overflow-x-auto pb-1",children:o.jsxs("div",{className:"h-24 flex items-end bg-muted/30 rounded-md p-2 relative",style:{width:`${i}px`,minWidth:"100%"},children:[e.map((y,p)=>{const g=Math.max(4,y/n*100),w=a(p,r);return o.jsx("div",{className:`${w} rounded-t-sm flex-1 cursor-pointer hover:opacity-80 active:opacity-60`,style:{height:`${g}%`,minWidth:"4px",marginLeft:"1px",marginRight:"1px"},onClick:()=>t==null?void 0:t(p),title:`Move ${p+1}: ${ci(y)}`,"data-testid":`stamina-bar-${p}`},p)}),o.jsx("div",{className:"absolute bottom-0 w-full h-[1px] bg-muted-foreground/20"})]})}),o.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded"}),o.jsx("span",{children:"Opening"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded"}),o.jsx("span",{children:"Middlegame"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-red-400 rounded"}),o.jsx("span",{children:"Endgame"})]})]}),h!==0&&o.jsx("div",{className:"flex items-center justify-center gap-2 text-sm",children:h>0?o.jsxs(o.Fragment,{children:[o.jsx(bw,{className:"h-4 w-4 text-red-500"}),o.jsxs("span",{className:"text-red-500",children:[h,"% slower in endgame"]})]}):o.jsxs(o.Fragment,{children:[o.jsx(Sw,{className:"h-4 w-4 text-green-500"}),o.jsxs("span",{className:"text-green-500",children:[Math.abs(h),"% faster in endgame"]})]})})]})}function q4({squareInquiries:e}){const t=["a","b","c","d","e","f","g","h"],n=["8","7","6","5","4","3","2","1"],r={};for(const a of e){const l=a.toLowerCase();r[l]=(r[l]||0)+1}const s=Math.max(...Object.values(r),1),i=a=>{const l=r[a]||0;if(l===0)return"bg-muted/30";const c=l/s*100;return c<25?"bg-amber-200 dark:bg-amber-900/40":c<50?"bg-amber-400 dark:bg-amber-700/60":c<75?"bg-red-400 dark:bg-red-700/70":"bg-red-600 dark:bg-red-600/80"};return e.length===0?o.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"No square inquiries this game"}):o.jsxs("div",{className:"space-y-2","data-testid":"spatial-blur-heatmap",children:[o.jsx("div",{className:"grid grid-cols-8 gap-0.5 aspect-square max-w-[180px] mx-auto",children:n.map(a=>t.map(l=>{const c=`${l}${a}`,u=r[c]||0;return o.jsx("div",{className:`${i(c)} rounded-sm flex items-center justify-center text-[8px] font-mono`,title:`${c.toUpperCase()}: ${u} inquiries`,"data-testid":`heatmap-square-${c}`,children:u>0&&o.jsx("span",{className:"text-foreground/70",children:u})},c)}))}),o.jsxs("p",{className:"text-xs text-muted-foreground text-center","data-testid":"text-total-inquiries",children:[e.length," total inquiries"]})]})}function W4({open:e,gameResult:t,playerColor:n,clarityScore:r,responseTimes:s,squareInquiries:i,reconstructionScore:a,reconstructionVoicePurity:l,reconstructionEnabled:c,onRematch:u,onMainMenu:f,onAnalyze:m}){const h=t==="white_win"&&n==="white"||t==="black_win"&&n==="black",y=t==="draw"?"Game Drawn":h?"Victory":"Defeat",p=t==="draw"?"text-amber-500":h?"text-green-500":"text-red-500",g=s.length>0?s.reduce((w,x)=>w+x,0)/s.length:0;return o.jsx(Oi,{open:e,children:o.jsxs(Mo,{className:"max-w-md max-h-[90vh] overflow-y-auto [&>button.absolute]:hidden",onPointerDownOutside:w=>w.preventDefault(),onInteractOutside:w=>w.preventDefault(),onEscapeKeyDown:w=>w.preventDefault(),children:[o.jsxs(Y,{variant:"ghost",size:"icon",className:"absolute right-4 top-4 h-6 w-6 rounded-sm opacity-70 hover:opacity-100",onClick:f,"data-testid":"button-postmortem-close",children:[o.jsx(Po,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]}),o.jsx(_o,{children:o.jsxs(Ao,{className:"flex items-center gap-3",children:[o.jsx(Jn,{className:`h-6 w-6 ${p}`}),o.jsx("span",{className:p,children:y})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx(Ge,{className:"bg-muted/30 border-0",children:o.jsxs(ct,{className:"p-3 text-center",children:[o.jsx(Vu,{className:"h-5 w-5 mx-auto mb-1 text-amber-500"}),o.jsxs("p",{className:"text-2xl font-bold text-amber-500",children:[r,"%"]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Reconstruction Score"})]})}),o.jsx(Ge,{className:"bg-muted/30 border-0",children:o.jsxs(ct,{className:"p-3 text-center",children:[o.jsx(wo,{className:"h-5 w-5 mx-auto mb-1 text-blue-500"}),o.jsx("p",{className:"text-2xl font-bold",children:ci(g)}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Response"})]})})]}),o.jsx(Vr,{}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(a2,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium",children:"Mental Stamina"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Response time changes throughout the game"}),o.jsx(V4,{responseTimes:s})]}),o.jsx(Vr,{}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(hw,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium",children:"Spatial Blurs"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Squares you needed to inquire about"}),o.jsx(q4,{squareInquiries:i})]}),c&&a!==null&&o.jsxs(o.Fragment,{children:[o.jsx(Vr,{}),o.jsxs("div",{className:"space-y-2","data-testid":"reconstruction-stats",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(N2,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium",children:"Board Reconstruction"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx(Ge,{className:"bg-muted/30 border-0",children:o.jsxs(ct,{className:"p-3 text-center",children:[o.jsxs("p",{className:`text-xl font-bold ${a>=80?"text-green-500":a>=50?"text-amber-500":"text-red-500"}`,children:[a,"%"]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Accuracy"})]})}),l!==null&&o.jsx(Ge,{className:"bg-muted/30 border-0",children:o.jsxs(ct,{className:"p-3 text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-1 mb-0.5",children:[o.jsx(dn,{className:"h-3 w-3 text-purple-500"}),o.jsxs("p",{className:`text-xl font-bold ${l>=80?"text-purple-500":l>=50?"text-amber-500":"text-muted-foreground"}`,children:[l,"%"]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Voice Purity"})]})})]})]})]}),o.jsx(Vr,{}),m&&o.jsxs(Y,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:m,"data-testid":"button-postmortem-analyze",children:[o.jsx(xw,{className:"mr-2 h-4 w-4"}),"Analyze Game"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Y,{className:"flex-1 bg-black hover:bg-stone-800 text-white",onClick:u,"data-testid":"button-postmortem-rematch",children:[o.jsx(vw,{className:"mr-2 h-4 w-4"}),"Rematch"]}),o.jsxs(Y,{variant:"outline",className:"flex-1 bg-amber-400 hover:bg-amber-500 text-black border-black",onClick:f,"data-testid":"button-postmortem-menu",children:[o.jsx(w2,{className:"mr-2 h-4 w-4"}),"Menu"]})]})]})]})})}const h0=10;function m0(e){return Math.max(-h0,Math.min(h0,e))}class U4{constructor(){this.worker=null,this.isReady=!1,this.isSearching=!1,this.messageHandlers=[],this.initPromise=null,this.requestQueue=Promise.resolve()}async init(){if(!this.isReady)return this.initPromise?this.initPromise:(this.initPromise=new Promise((t,n)=>{try{typeof WebAssembly=="object"&&WebAssembly.validate(Uint8Array.of(0,97,115,109,1,0,0,0))||console.warn("[ClientStockfish] WebAssembly not supported, using slower JS fallback");const s="/stockfish/stockfish-17.1-lite-single-03e3232.js";this.worker=new Worker(s),this.worker.onmessage=l=>{const c=typeof l.data=="string"?l.data:"";for(const u of this.messageHandlers)u(c)},this.worker.onerror=l=>{console.error("[ClientStockfish] Worker error:",l),n(l)},this.sendCommand("uci");let i=!1;const a=l=>{l==="uciok"&&(i=!0,this.sendCommand("setoption name Hash value 16"),console.log("[ClientStockfish] Set Hash table to 16MB for mobile optimization"),this.sendCommand("isready")),l==="readyok"&&i&&(this.removeHandler(a),this.isReady=!0,console.log("[ClientStockfish] Engine ready"),t())};this.addHandler(a),setTimeout(()=>{this.isReady||n(new Error("Stockfish initialization timeout"))},3e4)}catch(r){n(r)}}),this.initPromise)}addHandler(t){this.messageHandlers.push(t)}removeHandler(t){const n=this.messageHandlers.indexOf(t);n>-1&&this.messageHandlers.splice(n,1)}sendCommand(t){this.worker&&this.worker.postMessage(t)}async getBestMove(t,n={}){const r=()=>new Promise(async(i,a)=>{const l=setTimeout(()=>{a(new Error("getBestMove timeout"))},3e4);try{this.isReady||await this.init(),n.skillLevel!==void 0&&this.sendCommand(`setoption name Skill Level value ${n.skillLevel}`),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`);let c="go";n.depth?c+=` depth ${n.depth}`:n.nodes?c+=` nodes ${n.nodes}`:n.moveTime?c+=` movetime ${n.moveTime}`:c+=" depth 15",this.isSearching=!0,this.sendCommand(c);let u,f;const m=h=>{if(h.startsWith("info depth")){const y=h.match(/depth (\d+)/),p=h.match(/score cp (-?\d+)/),g=h.match(/score mate (-?\d+)/);y&&(f=parseInt(y[1])),p&&(u=parseInt(p[1])/100),g&&(u=parseInt(g[1])>0?100:-100)}if(h.startsWith("bestmove")){clearTimeout(l),this.removeHandler(m),this.isSearching=!1;const y=h.match(/bestmove (\S+)/);y?i({bestMove:y[1],evaluation:u,depth:f}):a(new Error("Failed to parse bestmove"))}};this.addHandler(m)}catch(c){clearTimeout(l),this.isSearching=!1,a(c)}}),s=this.requestQueue.then(r,r);return this.requestQueue=s.catch(()=>{}),s}async analyzePosition(t,n=1e6){const r=()=>new Promise(async(i,a)=>{const l=setTimeout(()=>{a(new Error("analyzePosition timeout"))},6e4);try{this.isReady||await this.init(),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`),this.isSearching=!0,this.sendCommand(`go nodes ${n}`);let c=0,u=0,f="",m=[],h=!1,y;const p=g=>{if(g.startsWith("info depth")&&g.includes(" pv ")){const w=g.match(/depth (\d+)/),x=g.match(/score cp (-?\d+)/),v=g.match(/score mate (-?\d+)/),b=g.match(/ pv (.+)/);if(w&&(u=parseInt(w[1])),x&&(c=parseInt(x[1])/100,h=!1,y=void 0),v){const S=parseInt(v[1]);c=S>0?999:-999,h=!0,y=Math.abs(S)}b&&(m=b[1].trim().split(" "))}if(g.startsWith("bestmove")){clearTimeout(l),this.removeHandler(p),this.isSearching=!1;const w=g.match(/bestmove (\S+)/);w?(f=w[1],i({evaluation:m0(c),bestMove:f,bestMoveEval:m0(c),principalVariation:m,depth:u,isMate:h,mateIn:y})):a(new Error("Failed to parse bestmove"))}};this.addHandler(p)}catch(c){clearTimeout(l),this.isSearching=!1,a(c)}}),s=this.requestQueue.then(r,r);return this.requestQueue=s.catch(()=>{}),s}async getTopMoves(t,n=3,r=1e6,s){const i=s===void 0||s==="w"?1:-1,a=()=>new Promise(async(c,u)=>{const f=setTimeout(()=>{this.sendCommand("setoption name MultiPV value 1"),c([])},3e4);try{this.isReady||await this.init(),this.sendCommand("stop"),this.sendCommand("ucinewgame"),this.sendCommand(`setoption name MultiPV value ${n}`),this.sendCommand(`position fen ${t}`),this.isSearching=!0,this.sendCommand(`go nodes ${r}`);const m=new Map,h=y=>{if(y.startsWith("info depth")&&y.includes(" pv ")){const p=y.match(/multipv (\d+)/),g=y.match(/score cp (-?\d+)/),w=y.match(/score mate (-?\d+)/),x=y.match(/ pv (.+)/),v=p?parseInt(p[1]):1;if(x){const b=x[1].trim().split(" "),S=b[0];let N=0,j=!1,k;if(g&&(N=parseInt(g[1])/100*i),w){const C=parseInt(w[1]);N=(C>0?999:-999)*i,j=!0,k=Math.abs(C)}m.set(v,{move:S,evaluation:N,isMate:j,mateIn:k,principalVariation:b})}}if(y.startsWith("bestmove")){clearTimeout(f),this.removeHandler(h),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1");const p=[];for(let g=1;g<=n;g++){const w=m.get(g);w&&p.push(w)}c(p)}};this.addHandler(h)}catch(m){clearTimeout(f),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1"),u(m)}}),l=this.requestQueue.then(a,a);return this.requestQueue=l.catch(()=>{}),l}async getBotMove(t,n){const r=u=>u<=400?0:u<=600?2:u<=800?4:u<=1e3?6:u<=1200?8:u<=1400?11:u<=1600?14:u<=1800?17:u<=2e3?18:u<=2200?19:20,s=u=>u<=600?5:u<=1e3?4:u<=1400?3:u<=1800?2:1,i=u=>u<=400?500:u<=600?1e3:u<=800?2e3:u<=1e3?5e3:u<=1200?1e4:u<=1400?2e4:u<=1600?5e4:u<=1800?1e5:u<=2e3?25e4:u<=2200?5e5:u<=2400?1e6:15e5,a=u=>u<=400||u<=600?1:u<=800?2:u<=1e3?3:u<=1200?4:u<=1400?5:u<=1600?6:0,l=()=>new Promise(async(u,f)=>{const m=setTimeout(()=>{f(new Error("getBotMove timeout"))},3e4);try{this.isReady||await this.init();const h=r(n),y=s(n),p=i(n),g=a(n);this.sendCommand(`setoption name Skill Level value ${h}`),this.sendCommand("setoption name UCI_LimitStrength value true"),this.sendCommand(`setoption name UCI_Elo value ${Math.min(Math.max(n,400),3200)}`),this.sendCommand(`setoption name MultiPV value ${y}`),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`),this.isSearching=!0,g>0?this.sendCommand(`go depth ${g} nodes ${p}`):this.sendCommand(`go nodes ${p}`);const w=new Map,x=v=>{var b;if(v.startsWith("info depth")&&v.includes(" pv ")){const S=v.match(/multipv (\d+)/),N=v.match(/ pv (\S+)/),j=v.match(/score cp (-?\d+)/),k=S?parseInt(S[1]):1,C=N?N[1]:null,R=j?parseInt(j[1])/100:void 0;C&&w.set(k,{move:C,eval:R})}if(v.startsWith("bestmove")){clearTimeout(m),this.removeHandler(x),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1"),this.sendCommand("setoption name UCI_LimitStrength value false"),this.sendCommand("setoption name Skill Level value 20");let S;const N=Array.from(w.values()).slice(0,y);if(N.length===0){const j=v.match(/bestmove (\S+)/);S=j?j[1]:void 0}else if(N.length===1)S=N[0].move;else{const j=Math.random()*100;n<=600?j<40?S=N[0].move:j<70&&N[1]?S=N[1].move:j<90&&N[2]?S=N[2].move:S=N[Math.min(Math.floor(j/25),N.length-1)].move:n<=1e3?j<55?S=N[0].move:j<80&&N[1]?S=N[1].move:j<95&&N[2]?S=N[2].move:S=N[Math.min(Math.floor(j/25),N.length-1)].move:n<=1400?j<70?S=N[0].move:j<90&&N[1]?S=N[1].move:N[2]?S=N[2].move:S=N[0].move:n<=1800?j<85?S=N[0].move:j<97&&N[1]?S=N[1].move:N[2]?S=N[2].move:S=N[0].move:j<95?S=N[0].move:N[1]?S=N[1].move:S=N[0].move}S?u({bestMove:S,evaluation:(b=w.get(1))==null?void 0:b.eval,isFreeCapture:!1}):f(new Error("Failed to get bot move"))}};this.addHandler(x)}catch(h){clearTimeout(m),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1"),this.sendCommand("setoption name UCI_LimitStrength value false"),this.sendCommand("setoption name Skill Level value 20"),f(h)}}),c=this.requestQueue.then(l,l);return this.requestQueue=c.catch(()=>{}),c}async getDepthLimitedMove(t,n){const r=()=>new Promise(async(i,a)=>{const l=setTimeout(()=>{a(new Error("getDepthLimitedMove timeout"))},3e4);try{this.isReady||await this.init(),this.sendCommand("setoption name UCI_LimitStrength value false"),this.sendCommand("setoption name Skill Level value 20"),this.sendCommand("setoption name MultiPV value 1"),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`),this.isSearching=!0,this.sendCommand(`go depth ${n}`);let c,u;const f=m=>{if(m.startsWith("info depth")&&m.includes(" pv ")){const h=m.match(/ pv (\S+)/),y=m.match(/score cp (-?\d+)/),p=m.match(/score mate (-?\d+)/);h&&(c=h[1]),y?u=parseInt(y[1])/100:p&&(u=parseInt(p[1])>0?100:-100)}if(m.startsWith("bestmove")){clearTimeout(l),this.removeHandler(f),this.isSearching=!1;const h=m.match(/bestmove (\S+)/);h&&(c=h[1]),c?i({bestMove:c,evaluation:u,isFreeCapture:!1}):a(new Error("Failed to get depth-limited move"))}};this.addHandler(f)}catch(c){clearTimeout(l),this.isSearching=!1,a(c)}}),s=this.requestQueue.then(r,r);return this.requestQueue=s.catch(()=>{}),s}stopAnalysis(){this.worker&&this.isSearching&&(this.sendCommand("stop"),this.isSearching=!1,console.debug("[ClientStockfish] Analysis halted safely."))}shutdown(){this.worker&&(this.sendCommand("quit"),this.worker.terminate(),this.worker=null,this.isReady=!1,this.initPromise=null)}isInitialized(){return this.isReady}}const Ci=new U4;function H4({evaluation:e,isLoading:t,isMate:n,mateIn:r,playerColor:s}){const i=e!==null?s==="black"?-e:e:null,l=e!==null?(y=>n?y>0?100:0:50+Math.max(-10,Math.min(10,y))/10*50)(e):50,c=y=>y===null?"...":n&&r!==void 0?y>0?`M${r}`:`-M${r}`:`${y>=0?"+":""}${y.toFixed(1)}`,u=s==="black",f=u?"bg-white":"bg-stone-900",m=u?"bg-stone-900":"bg-white",h=u?l:100-l;return o.jsxs("div",{className:"flex flex-col items-center w-full h-full","data-testid":"evaluation-bar",children:[o.jsx("div",{className:"text-xs font-mono font-bold mb-1 flex-shrink-0","data-testid":"evaluation-value",children:c(i)}),o.jsxs("div",{className:`relative w-full rounded overflow-hidden border border-border ${m} flex-1 min-h-0`,children:[o.jsx("div",{className:`absolute top-0 left-0 right-0 ${f} transition-all duration-300`,style:{height:`${h}%`}}),o.jsx("div",{className:"absolute left-0 right-0 h-[2px] bg-amber-500",style:{top:"50%",transform:"translateY(-50%)"}}),t&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:o.jsx(mw,{className:"h-3 w-3 animate-spin text-white"})})]})]})}function K4({position:e,flipped:t,lastMove:n,bestMoveSquares:r}){const s=new An(e),i=["a","b","c","d","e","f","g","h"],a=["8","7","6","5","4","3","2","1"],l=t?[...i].reverse():i,c=t?[...a].reverse():a,u={K:"",Q:"",R:"",B:"",N:"",P:"",k:"",q:"",r:"",b:"",n:"",p:""};return o.jsx("div",{className:"aspect-square w-full","data-testid":"analysis-board",children:o.jsx("div",{className:"grid grid-cols-8 grid-rows-8 w-full h-full border border-stone-400",children:c.map(f=>l.map(m=>{const h=`${m}${f}`,y=s.get(h),p=(i.indexOf(m)+a.indexOf(f))%2===0,g=n&&(n.from===h||n.to===h),w=r&&(r.from===h||r.to===h);return o.jsx("div",{className:`aspect-square flex items-center justify-center text-2xl sm:text-3xl
                  ${p?"bg-amber-100 dark:bg-amber-200":"bg-amber-600 dark:bg-amber-700"}
                  ${g?"ring-2 ring-inset ring-amber-400":""}
                  ${w?"ring-2 ring-inset ring-emerald-500":""}
                `,"data-testid":`analysis-square-${h}`,children:y&&o.jsx("span",{className:y.color==="w"?"text-white drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)]":"text-black",children:u[y.color==="w"?y.type.toUpperCase():y.type]})},h)}))})})}function p0({moveHistory:e,playerColor:t,onClose:n,gameResult:r,botElo:s}){const{toast:i}=vl(),[a,l]=d.useState(0),[c,u]=d.useState(!0),[f,m]=d.useState(!1),[h,y]=d.useState(!0),[p,g]=d.useState(0),[w,x]=d.useState(new Map),v=d.useRef(!1);d.useEffect(()=>{const I=document.getElementById(`move-${a}`);I&&I.scrollIntoView({behavior:"smooth",block:"nearest"})},[a]);const b=d.useMemo(()=>{const I=new An,B=r==="white_win"?"1-0":r==="black_win"?"0-1":r==="draw"?"1/2-1/2":"*",Q=new Date,G=`${Q.getFullYear()}.${String(Q.getMonth()+1).padStart(2,"0")}.${String(Q.getDate()).padStart(2,"0")}`;return I.header("Event","Blindfold Chess Challenge","Site","Mobile App","Date",G,"Round","?","White",t==="white"?"User":`Stockfish (Elo ${s||"?"})`,"Black",t==="black"?"User":`Stockfish (Elo ${s||"?"})`,"Result",B),e.forEach(se=>{try{I.move(se)}catch{console.warn("[PGN] Could not add move:",se)}}),I.pgn()},[e,t,r,s]),S=async()=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(b);else{const I=document.createElement("textarea");I.value=b,I.style.position="fixed",I.style.left="-9999px",document.body.appendChild(I),I.focus(),I.select(),document.execCommand("copy"),document.body.removeChild(I)}m(!0),i({title:"PGN Copied",description:"Game notation copied to clipboard",duration:2e3}),setTimeout(()=>m(!1),2e3)}catch(I){console.error("[PGN] Copy failed:",I),i({title:"Copy Failed",description:"Could not copy to clipboard",variant:"destructive",duration:2e3})}},N=()=>{const I=new Date,Q=`blindfold-game-${`${I.getFullYear()}${String(I.getMonth()+1).padStart(2,"0")}${String(I.getDate()).padStart(2,"0")}-${String(I.getHours()).padStart(2,"0")}${String(I.getMinutes()).padStart(2,"0")}`}.pgn.txt`,G=document.createElement("a"),se=new Blob([b],{type:"text/plain"});G.href=URL.createObjectURL(se),G.download=Q,document.body.appendChild(G),G.click(),document.body.removeChild(G),URL.revokeObjectURL(G.href),i({title:"PGN Downloaded",description:Q,duration:2e3})},j=d.useMemo(()=>{const I=[],B=new An;I.push({fen:B.fen(),lastMove:null});for(let Q=0;Q<e.length;Q++)try{const G=B.move(e[Q]);G?I.push({fen:B.fen(),lastMove:{from:G.from,to:G.to}}):console.warn(`[Analysis] Move returned null at index ${Q}: ${e[Q]}`)}catch(G){console.warn(`[Analysis] Skipping invalid move at index ${Q}: ${e[Q]}`,G)}return console.log(`[Analysis] Built ${I.length} positions from ${e.length} moves`),I},[e]);d.useEffect(()=>((async()=>{y(!0),g(0),v.current=!1;const B=new Map,Q=j.length;for(let G=0;G<Q&&!v.current;G++){const{fen:se}=j[G];try{const ce=await Ci.analyzePosition(se,5e5);if(v.current)break;const qe=se.split(" ")[1]==="b",Fe=qe?-ce.evaluation:ce.evaluation,Le=ce.mateIn!==void 0&&qe?-ce.mateIn:ce.mateIn;B.set(G,{eval:Fe,isMate:ce.isMate,mateIn:Le!==void 0?Math.abs(Le):void 0,bestMove:ce.bestMove})}catch(ce){if(v.current)break;console.error(`[Analysis] Error evaluating position ${G}:`,ce)}v.current||(g(Math.round((G+1)/Q*100)),x(new Map(B))),await new Promise(ce=>setTimeout(ce,10))}v.current||y(!1)})(),()=>{v.current=!0}),[j]);const k=j[a]||j[0],C=k.fen,R=k.lastMove,T=w.get(a),F=(T==null?void 0:T.eval)??null,_=(T==null?void 0:T.isMate)??!1,z=T==null?void 0:T.mateIn,M=(T==null?void 0:T.bestMove)??null,V=()=>l(0),W=()=>l(Math.max(0,a-1)),q=()=>l(Math.min(j.length-1,a+1)),E=()=>l(j.length-1),A=I=>l(Math.min(I,j.length-1)),K=(()=>{const I=[];for(let B=0;B<e.length;B+=2)I.push({moveNumber:Math.floor(B/2)+1,white:e[B],black:e[B+1],whiteIndex:B+1,blackIndex:e[B+1]?B+2:void 0});return I})(),ae=I=>!I||I.length<4?null:{from:I.slice(0,2),to:I.slice(2,4)},he=I=>{if(!I)return null;try{const Q=new An(C).move({from:I.slice(0,2),to:I.slice(2,4),promotion:I.length>4?I[4]:void 0});return Q?Q.san:I}catch{return I}},ve=c?ae(M):null,te=he(M);return h&&p<100?o.jsxs("div",{className:"fixed inset-0 z-50 bg-background flex flex-col","data-testid":"analysis-view",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Game Analysis"}),o.jsx(Y,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-analysis-close",children:o.jsx(Po,{className:"h-5 w-5"})})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 gap-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(mw,{className:"h-6 w-6 animate-spin text-amber-500"}),o.jsx("span",{className:"text-lg font-medium",children:"Analyzing game..."})]}),o.jsxs("div",{className:"w-full max-w-xs space-y-2",children:[o.jsx(qs,{value:p,className:"h-3"}),o.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:[p,"% complete (",Math.round(p/100*j.length)," / ",j.length," positions)"]})]}),o.jsx("p",{className:"text-sm text-muted-foreground text-center max-w-sm",children:"This will take a few seconds. Once complete, you can navigate through moves instantly."})]})]}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-background flex flex-col","data-testid":"analysis-view",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Game Analysis"}),o.jsx(Y,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-analysis-close",children:o.jsx(Po,{className:"h-5 w-5"})})]}),o.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[o.jsxs("div",{className:"flex flex-col gap-3 items-center",children:[o.jsxs("div",{className:"grid grid-cols-[24px_1fr] gap-2 w-full max-w-[352px]",children:[o.jsx(H4,{evaluation:F,isLoading:!1,isMate:_,mateIn:z,playerColor:t}),o.jsx(K4,{position:C,flipped:t==="black",lastMove:R,bestMoveSquares:ve})]}),o.jsxs("div",{className:"flex justify-center gap-1",children:[o.jsx(Y,{variant:"outline",size:"icon",onClick:V,disabled:a===0,"data-testid":"button-analysis-start",children:o.jsx(d2,{className:"h-4 w-4"})}),o.jsx(Y,{variant:"outline",size:"icon",onClick:W,disabled:a===0,"data-testid":"button-analysis-back",children:o.jsx(Qm,{className:"h-4 w-4"})}),o.jsx(Y,{variant:"outline",size:"icon",onClick:q,disabled:a===j.length-1,"data-testid":"button-analysis-forward",children:o.jsx(qu,{className:"h-4 w-4"})}),o.jsx(Y,{variant:"outline",size:"icon",onClick:E,disabled:a===j.length-1,"data-testid":"button-analysis-end",children:o.jsx(f2,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm","data-testid":"best-move-display",children:[o.jsx(Y,{variant:c?"default":"outline",size:"sm",onClick:()=>u(!c),className:"h-7 px-2","data-testid":"button-toggle-best-move",children:c?"Hide Best":"Show Best"}),c&&te&&o.jsxs("span",{className:"font-mono bg-emerald-500/20 text-emerald-600 dark:text-emerald-400 px-2 py-1 rounded","data-testid":"text-best-move",children:["Best: ",te]})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-4 mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Move List"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs(Y,{variant:"outline",size:"sm",onClick:S,className:"h-7 px-2","data-testid":"button-copy-pgn",children:[f?o.jsx(wl,{className:"h-3 w-3 mr-1"}):o.jsx(dw,{className:"h-3 w-3 mr-1"}),f?"Copied":"Copy"]}),o.jsxs(Y,{variant:"outline",size:"sm",onClick:N,className:"h-7 px-2","data-testid":"button-download-pgn",children:[o.jsx(g2,{className:"h-3 w-3 mr-1"}),"Download"]})]})]}),o.jsx(Ge,{className:"p-3 max-h-40 overflow-y-auto scroll-smooth","data-testid":"analysis-move-list",children:o.jsx("div",{className:"grid grid-cols-[auto_1fr_1fr] gap-x-3 gap-y-1 text-sm font-mono",children:K.map(I=>o.jsxs(d.Fragment,{children:[o.jsxs("span",{className:"text-muted-foreground",children:[I.moveNumber,"."]}),o.jsx("button",{id:`move-${I.whiteIndex}`,onClick:()=>A(I.whiteIndex),className:`text-left px-1 rounded hover:bg-muted transition-colors ${a===I.whiteIndex?"bg-amber-400 text-black font-bold":""}`,"data-testid":`move-white-${I.moveNumber}`,children:I.white}),I.black?o.jsx("button",{id:`move-${I.blackIndex}`,onClick:()=>A(I.blackIndex),className:`text-left px-1 rounded hover:bg-muted transition-colors ${a===I.blackIndex?"bg-amber-400 text-black font-bold":""}`,"data-testid":`move-black-${I.moveNumber}`,children:I.black}):o.jsx("span",{})]},I.moveNumber))})})]})]})}const gf=Zs("KeepAwake",{web:()=>Zi(()=>import("./web-DNRtp7CB.js"),[]).then(e=>new e.KeepAwakeWeb)});var Be;(function(e){e.Heavy="HEAVY",e.Medium="MEDIUM",e.Light="LIGHT"})(Be||(Be={}));var Wi;(function(e){e.Success="SUCCESS",e.Warning="WARNING",e.Error="ERROR"})(Wi||(Wi={}));const $e=Zs("Haptics",{web:()=>Zi(()=>import("./web-0w4_fiOu.js"),[]).then(e=>new e.HapticsWeb)}),jN=Object.freeze(Object.defineProperty({__proto__:null,Haptics:$e,get ImpactStyle(){return Be},get NotificationType(){return Wi}},Symbol.toStringTag,{value:"Module"}));new BigUint64Array(768);new BigUint64Array(4);new BigUint64Array(8);const ts=[];function G4(){if(ts.length>0)return;let e=new Array(781);e[0]=1n;for(let t=1;t<781;t++)e[t]=e[t-1]*6364136223846793005n+1442695040888963407n&0xFFFFFFFFFFFFFFFFn;for(let t=0;t<781;t++)ts[t]=e[t]}const Q4={p:0,P:1,n:2,N:3,b:4,B:5,r:6,R:7,q:8,Q:9,k:10,K:11};function Y4(e,t,n){const r=[],s=e.split("/");for(let l=0;l<8;l++){const c=s[l],u=[];for(const f of c)if(f>="1"&&f<="8")for(let m=0;m<parseInt(f);m++)u.push("");else u.push(f);r.push(u)}const i=t==="w"?"P":"p",a=t==="w"?3:4;return n>0&&r[a][n-1]===i||n<7&&r[a][n+1]===i}function X4(e){G4();const t=e.split(" "),n=t[0],r=t[1]||"w",s=t[2]||"-",i=t[3]||"-";let a=0n,l=56;for(const c of n)if(c==="/")l-=16;else if(c>="1"&&c<="8")l+=parseInt(c);else{const u=Q4[c];if(u!==void 0){const f=64*u+l;f<768&&(a^=ts[f])}l++}if(s.includes("K")&&(a^=ts[768]),s.includes("Q")&&(a^=ts[769]),s.includes("k")&&(a^=ts[770]),s.includes("q")&&(a^=ts[771]),i!=="-"){const c=i.charCodeAt(0)-97;c>=0&&c<8&&Y4(n,r,c)&&(a^=ts[772+c])}return r==="w"&&(a^=ts[780]),a}function Z4(e){const t=e&7,n=e>>3&7,r=e>>6&7,s=e>>9&7,i=e>>12&7,a="abcdefgh",l=a[r]+(s+1),c=a[t]+(n+1);let u;return i>0&&(u=["","n","b","r","q"][i]),{from:l,to:c,promotion:u}}let vf=null,wr=[],xf=!1,uc=null;async function J4(){if(!xf)return uc||(uc=(async()=>{try{const e=await fetch("/openings.bin");if(!e.ok)throw new Error(`Failed to load opening book: ${e.status}`);vf=await e.arrayBuffer();const t=new DataView(vf),n=vf.byteLength/16;wr=[];for(let r=0;r<n;r++){const s=r*16,i=t.getUint32(s,!1),a=t.getUint32(s+4,!1),l=BigInt(i)<<32n|BigInt(a),c=t.getUint16(s+8,!1),u=t.getUint16(s+10,!1);wr.push({key:l,move:c,weight:u})}wr.sort((r,s)=>r.key<s.key?-1:r.key>s.key?1:0),xf=!0,console.log(`[OpeningBook] Loaded ${n} entries from Polyglot book`)}catch(e){console.error("[OpeningBook] Failed to load opening book:",e),wr=[],xf=!0}})(),uc)}function eA(e){const t=[];let n=0,r=wr.length-1,s=-1;for(;n<=r;){const i=Math.floor((n+r)/2);wr[i].key===e?(s=i,r=i-1):wr[i].key<e?n=i+1:r=i-1}if(s===-1)return t;for(let i=s;i<wr.length&&wr[i].key===e;i++)t.push({move:wr[i].move,weight:wr[i].weight});return t}async function tA(e){await J4();const t=X4(e),r=eA(t).map(s=>{const i=Z4(s.move);return{from:i.from,to:i.to,promotion:i.promotion,weight:s.weight}});return r.sort((s,i)=>i.weight-s.weight),{moves:r}}function nA(e){return e<30}function rA(e,t){const n=e.split(" ")[0];let r=0;if(t==="white")for(const s of n)s>="A"&&s<="Z"&&r++;else for(const s of n)s>="a"&&s<="z"&&r++;return r}function sA(e,t){if(!e||!e.captured)return!1;try{const r=new An(t).moves({verbose:!0}),s=e.to;return r.some(i=>i.to===s&&i.captured)}catch{return!1}}function oA(e,t){try{const n=new An(e),r=t.slice(0,2),s=t.slice(2,4),i=n.move({from:r,to:s,promotion:t.length>4?t[4]:void 0});return!i||!i.captured?!1:!n.moves({verbose:!0}).some(l=>l.to===s&&l.captured)}catch{return!1}}function iA(e,t,n,r,s){let i=500+Math.random()*1e3;return sA(s,n)?Math.min(i,800):(e<=10&&(i*=.7),rA(n,r)>=10&&e>10&&e<30&&(i*=1.3),t<60?i*=.5:t<180&&(i*=.7),Math.max(300,Math.min(3e3,i)))}function aA(e){const t=e.split(" ")[0];let n=0;for(const r of t)/[pnbrqkPNBRQK]/.test(r)&&n++;return n}function lA(e,t,n,r="blitz"){if(n<30)return 500;if(n<60)return 1e3;const i=r==="classical"?2:r==="rapid"?1.5:1,a=(c,u)=>(Math.random()*(u-c)+c)*1e3;let l;return e<=6?l=a(1,2):e<=10?l=a(2,3):e<=15?l=a(3,8):e<=20||t>=26?l=a(4,8):t>=20?l=a(4,7):t>=14?l=a(3,6):t>=9?l=a(2,4):l=a(1,2),l*i}function cA(e){try{const n=new An(e).moves({verbose:!0});if(n.length===0)return null;const r=n[Math.floor(Math.random()*n.length)];return r.from+r.to+(r.promotion||"")}catch{return null}}async function uA(e,t,n,r){try{const s=hu(t);if(s.randomPercent>0&&Math.random()*100<s.randomPercent){const l=cA(e);if(l)return console.log(`[BotEngine] Elo ${t}: Playing random move (${s.randomPercent}% chance)`),{move:l,isBookMove:!1}}if(nA((n==null?void 0:n.length)||0)){const l=await tA(e);if(l.moves.length>0){const c=l.moves,u=c.reduce((h,y)=>h+y.weight,0);let f=Math.random()*u;for(const h of c)if(f-=h.weight,f<=0)return{move:h.from+h.to+(h.promotion||""),isBookMove:!0};const m=c[0];return{move:m.from+m.to+(m.promotion||""),isBookMove:!0}}}let i;s.depth>0?(i=await Ci.getBestMove(e,{depth:s.depth,skillLevel:s.skillLevel}),console.log(`[BotEngine] Elo ${t}: Depth ${s.depth}, Skill ${s.skillLevel}`)):(i=await Ci.getBestMove(e,{nodes:s.nodes||5e5,skillLevel:s.skillLevel}),console.log(`[BotEngine] Elo ${t}: Unleashed nodes ${s.nodes}, Skill ${s.skillLevel}`));const a=oA(e,i.bestMove);return{move:i.bestMove,evaluation:i.evaluation,isFreeCapture:a}}catch(s){return console.error("[BotEngine] Error getting bot move:",s),null}}const yf="blindfold_chess";let Sa=null,Mn=null,Io=!1,Uh=!1,dc=null;async function ra(){return Uh?!0:dc||(dc=dA(),dc)}async function dA(){try{if(Io=Sn.isNativePlatform(),!Io)return console.log("[GameHistory] Web platform - using localStorage fallback"),!0;Sa=new gb(vb);const e=await Sa.checkConnectionsConsistency(),t=(await Sa.isConnection(yf,!1)).result;return e.result&&t?Mn=await Sa.retrieveConnection(yf,!1):Mn=await Sa.createConnection(yf,!1,"no-encryption",1,!1),await Mn.open(),await Mn.execute(`
      CREATE TABLE IF NOT EXISTS games (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        date TEXT NOT NULL,
        result TEXT NOT NULL,
        playerColor TEXT NOT NULL,
        botName TEXT NOT NULL,
        botElo INTEGER NOT NULL,
        moveCount INTEGER NOT NULL,
        pgn TEXT NOT NULL,
        clarityScore REAL NOT NULL,
        isFavorite INTEGER DEFAULT 0,
        timeControl TEXT NOT NULL
      );
    `),console.log("[GameHistory] Database initialized successfully"),Uh=!0,!0}catch(e){return console.error("[GameHistory] Failed to initialize database:",e),Uh=!0,!1}}function Cl(){try{const e=localStorage.getItem("blindfold_game_history");return e?JSON.parse(e):[]}catch{return[]}}function Bp(e){localStorage.setItem("blindfold_game_history",JSON.stringify(e))}async function g0(e){var t,n;await ra();try{if(!Io){const i=Cl(),a=i.length>0?Math.max(...i.map(c=>c.id))+1:1,l={...e,id:a};return i.unshift(l),Bp(i),console.log("[GameHistory] Game saved to localStorage:",a),a}if(!Mn)return console.error("[GameHistory] Database not initialized"),null;const s=await Mn.run(`
      INSERT INTO games (date, result, playerColor, botName, botElo, moveCount, pgn, clarityScore, isFavorite, timeControl)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
    `,[e.date,e.result,e.playerColor,e.botName,e.botElo,e.moveCount,e.pgn,e.clarityScore,e.isFavorite?1:0,e.timeControl]);return console.log("[GameHistory] Game saved:",(t=s.changes)==null?void 0:t.lastId),((n=s.changes)==null?void 0:n.lastId)??null}catch(r){return console.error("[GameHistory] Failed to save game:",r),null}}async function fA(){await ra();try{if(!Io)return Cl();if(!Mn)return console.error("[GameHistory] Database not initialized"),[];const e=await Mn.query("SELECT * FROM games ORDER BY date DESC;");return e.values?e.values.map(t=>({id:t.id,date:t.date,result:t.result,playerColor:t.playerColor,botName:t.botName,botElo:t.botElo,moveCount:t.moveCount,pgn:t.pgn,clarityScore:t.clarityScore,isFavorite:t.isFavorite===1,timeControl:t.timeControl})):[]}catch(e){return console.error("[GameHistory] Failed to get games:",e),[]}}async function hA(){await ra();try{if(!Io)return Cl().filter(t=>t.isFavorite);if(!Mn)return console.error("[GameHistory] Database not initialized"),[];const e=await Mn.query("SELECT * FROM games WHERE isFavorite = 1 ORDER BY date DESC;");return e.values?e.values.map(t=>({id:t.id,date:t.date,result:t.result,playerColor:t.playerColor,botName:t.botName,botElo:t.botElo,moveCount:t.moveCount,pgn:t.pgn,clarityScore:t.clarityScore,isFavorite:t.isFavorite===1,timeControl:t.timeControl})):[]}catch(e){return console.error("[GameHistory] Failed to get favorite games:",e),[]}}async function CN(e){await ra();try{if(!Io){const r=Cl(),s=r.find(i=>i.id===e);return s?(s.isFavorite=!s.isFavorite,Bp(r),s.isFavorite):!1}if(!Mn)return console.error("[GameHistory] Database not initialized"),!1;const t=await Mn.query("SELECT isFavorite FROM games WHERE id = ?;",[e]);if(!t.values||t.values.length===0)return!1;const n=t.values[0].isFavorite===1?0:1;return await Mn.run("UPDATE games SET isFavorite = ? WHERE id = ?;",[n,e]),console.log("[GameHistory] Toggled favorite for game:",e),n===1}catch(t){return console.error("[GameHistory] Failed to toggle favorite:",t),!1}}async function mA(e){await ra();try{if(!Io){const n=Cl().filter(r=>r.id!==e);return Bp(n),console.log("[GameHistory] Game deleted from localStorage:",e),!0}return Mn?(await Mn.run("DELETE FROM games WHERE id = ?;",[e]),console.log("[GameHistory] Game deleted:",e),!0):(console.error("[GameHistory] Database not initialized"),!1)}catch(t){return console.error("[GameHistory] Failed to delete game:",t),!1}}function pA({game:e,onView:t,onToggleFavorite:n,onDelete:r}){const s=e.result==="win"?o.jsx(Jn,{className:"h-5 w-5 text-amber-500"}):e.result==="loss"?o.jsx(Wu,{className:"h-5 w-5 text-stone-400"}):o.jsx(pw,{className:"h-5 w-5 text-stone-500"}),i=e.result==="win"?"Victory":e.result==="loss"?"Defeat":"Draw",a=e.result==="win"?"text-green-600 dark:text-green-400":e.result==="loss"?"text-red-600 dark:text-red-400":"text-muted-foreground",l=new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),c=new Date(e.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),u=async m=>{m.stopPropagation(),Sn.isNativePlatform()&&await $e.impact({style:Be.Light}),n()},f=m=>{m.stopPropagation(),r()};return o.jsx(Ge,{className:"cursor-pointer hover-elevate active-elevate-2 transition-all",onClick:t,"data-testid":`card-game-${e.id}`,children:o.jsx(ct,{className:"p-3",children:o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[o.jsx("div",{className:"flex-shrink-0",children:s}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`font-semibold ${a}`,children:i}),o.jsx("span",{className:"text-muted-foreground",children:"vs"}),o.jsx("span",{className:"font-medium truncate",children:e.botName}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",e.botElo,")"]})]}),o.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mt-1",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(lw,{className:"h-3 w-3"}),l]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(wo,{className:"h-3 w-3"}),c]}),o.jsxs("span",{children:[e.moveCount," moves"]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:u,"data-testid":`button-favorite-${e.id}`,children:o.jsx(yw,{className:`h-5 w-5 ${e.isFavorite?"fill-amber-400 text-amber-400":"text-muted-foreground"}`})}),o.jsx(Y,{variant:"ghost",size:"icon",onClick:f,"data-testid":`button-delete-${e.id}`,children:o.jsx(ww,{className:"h-5 w-5 text-muted-foreground hover:text-destructive"})})]})]})})})}function gA({onBack:e,onViewGame:t}){const[n,r]=d.useState([]),[s,i]=d.useState([]),[a,l]=d.useState(!0),[c,u]=d.useState(null),[f,m]=d.useState("all"),h=async()=>{l(!0);const[w,x]=await Promise.all([fA(),hA()]);r(w.filter(v=>v.moveCount>0)),i(x.filter(v=>v.moveCount>0)),l(!1)};d.useEffect(()=>{h()},[]);const y=async w=>{const x=await CN(w.id);r(v=>v.map(b=>b.id===w.id?{...b,isFavorite:x}:b)),i(x?v=>[{...w,isFavorite:!0},...v.filter(b=>b.id!==w.id)]:v=>v.filter(b=>b.id!==w.id))},p=async()=>{if(!c)return;await mA(c.id)&&(r(x=>x.filter(v=>v.id!==c.id)),i(x=>x.filter(v=>v.id!==c.id))),u(null)},g=f==="favorites"?s:n;return o.jsxs("div",{className:"min-h-screen bg-background flex flex-col","data-testid":"game-history-page",children:[o.jsxs("header",{className:"flex items-center gap-2 p-3 border-b border-border",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-history-back",children:o.jsx(Qm,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-lg font-semibold",children:"Game History"})]}),o.jsxs(ea,{value:f,onValueChange:m,className:"flex-1 flex flex-col",children:[o.jsx("div",{className:"px-3 pt-3",children:o.jsxs(Fo,{className:"grid w-full grid-cols-2",children:[o.jsxs(Rn,{value:"all","data-testid":"tab-all-games",children:["All Games (",n.length,")"]}),o.jsxs(Rn,{value:"favorites","data-testid":"tab-favorites",children:["Favorites (",s.length,")"]})]})}),o.jsx(ui,{value:f,className:"flex-1 mt-0 px-3 pb-3",children:o.jsx(Dp,{className:"h-[calc(100vh-140px)]",children:a?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"animate-pulse text-muted-foreground",children:"Loading games..."})}):g.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[o.jsx("div",{className:"text-muted-foreground mb-2",children:f==="favorites"?"No favorite games yet":"No games played yet"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:f==="favorites"?"Star a game to add it to your favorites":"Complete a game to see it here"})]}):o.jsx("div",{className:"space-y-2 py-2",children:g.map(w=>o.jsx(pA,{game:w,onView:()=>t(w),onToggleFavorite:()=>y(w),onDelete:()=>u(w)},w.id))})})})]}),o.jsx(Kr,{open:c!==null,onOpenChange:()=>u(null),children:o.jsxs(Er,{children:[o.jsxs(Pr,{children:[o.jsx(Rr,{children:"Delete this game from history?"}),o.jsx(Mr,{children:"This action cannot be undone. The game record will be permanently removed."})]}),o.jsxs(Tr,{children:[o.jsx(Ar,{"data-testid":"button-delete-cancel",children:"Cancel"}),o.jsx(_r,{onClick:p,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90","data-testid":"button-delete-confirm",children:"Delete"})]})]})})]})}async function vA(e,t){const n=t||`blindfold-chess-${Date.now()}.pgn`;if(typeof navigator<"u"&&navigator.share)try{const r=new Blob([e],{type:"application/vnd.chess-pgn"}),s=new File([r],n,{type:"application/vnd.chess-pgn"});return navigator.canShare&&navigator.canShare({files:[s]})?(await navigator.share({files:[s],title:"Blindfold Chess Game"}),!0):(await navigator.share({text:e,title:"Blindfold Chess Game"}),!0)}catch(r){if(r.name==="AbortError")return!1;console.warn("Share API failed, falling back to clipboard:",r)}return EN(e)}async function EN(e){try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(e),!0;const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-9999px",document.body.appendChild(t),t.select();const n=document.execCommand("copy");return document.body.removeChild(t),n}catch(t){return console.error("Failed to copy PGN to clipboard:",t),!1}}function xA(e){const t=[],n=/\d+\.\s*(\S+)(?:\s+(\S+))?/g;let r;const s=["1-0","0-1","1/2-1/2","*"];for(;(r=n.exec(e))!==null;)r[1]&&!s.includes(r[1])&&t.push(r[1]),r[2]&&!s.includes(r[2])&&t.push(r[2]);return t}function yA({game:e,open:t,onClose:n,onAnalyze:r}){const[s,i]=d.useState((e==null?void 0:e.isFavorite)??!1),[a,l]=d.useState(!1),{toast:c}=vl();if(d.useEffect(()=>{e&&i(e.isFavorite)},[e]),!e||!t)return null;const u=async()=>{Sn.isNativePlatform()&&await $e.impact({style:Be.Light});const v=await vA(e.pgn,`blindfold-vs-${e.botElo}.pgn`);c(v?{title:"PGN shared",description:"Game exported successfully"}:{title:"Share failed",description:"Could not share the game",variant:"destructive"})},f=async()=>{Sn.isNativePlatform()&&await $e.impact({style:Be.Light}),await EN(e.pgn)?(l(!0),c({title:"Copied",description:"PGN copied to clipboard"}),setTimeout(()=>l(!1),2e3)):c({title:"Copy failed",description:"Could not copy PGN",variant:"destructive"})},m=e.result==="win"?o.jsx(Jn,{className:"h-10 w-10 text-amber-500"}):e.result==="loss"?o.jsx(Wu,{className:"h-10 w-10 text-stone-400"}):o.jsx(pw,{className:"h-10 w-10 text-stone-500"}),h=e.result==="win"?"Victory":e.result==="loss"?"Defeat":"Draw",y=e.result==="win"?"text-green-600 dark:text-green-400":e.result==="loss"?"text-red-600 dark:text-red-400":"text-muted-foreground",p=new Date(e.date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),g=new Date(e.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),w=()=>{const v=xA(e.pgn);r(v)},x=async()=>{Sn.isNativePlatform()&&await $e.impact({style:Be.Light});const v=await CN(e.id);i(v)};return o.jsxs("div",{className:"min-h-screen bg-background flex flex-col","data-testid":"history-game-report",children:[o.jsxs("header",{className:"flex items-center justify-between p-3 border-b border-border",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-history-report-back",children:o.jsx(Qm,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-lg font-semibold",children:"Game Details"}),o.jsx(Y,{variant:"ghost",size:"icon",onClick:x,"data-testid":"button-history-report-favorite",children:o.jsx(yw,{className:`h-5 w-5 ${s?"fill-amber-400 text-amber-400":""}`})})]}),o.jsx("div",{className:"flex-1 p-4 overflow-auto",children:o.jsx(Ge,{children:o.jsxs(ct,{className:"pt-6 space-y-4",children:[o.jsxs("div",{className:"flex flex-col items-center gap-3 py-4",children:[m,o.jsx("h2",{className:`text-3xl font-bold ${y}`,children:h}),o.jsxs("p",{className:"text-lg",children:["vs ",o.jsx("span",{className:"font-semibold",children:e.botName}),o.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",e.botElo,")"]})]})]}),o.jsx(Vr,{}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(lw,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{children:p})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(wo,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{children:g})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Played as"}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("div",{className:`w-4 h-4 rounded-full ${e.playerColor==="white"?"bg-white border border-stone-400":"bg-black"}`}),o.jsx("span",{className:"font-medium capitalize",children:e.playerColor})]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Moves"}),o.jsx("p",{className:"font-medium mt-1",children:e.moveCount})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Time Control"}),o.jsx("p",{className:"font-medium mt-1",children:e.timeControl})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Reconstruction Score"}),o.jsxs("p",{className:"font-medium mt-1",children:[Math.round(e.clarityScore),"%"]})]})]}),o.jsx(Vr,{}),o.jsxs(Y,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:w,"data-testid":"button-history-analyze",children:[o.jsx(xw,{className:"mr-2 h-4 w-4"}),"Analyze Game"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Y,{variant:"outline",className:"flex-1",onClick:u,"data-testid":"button-history-share-pgn",children:[o.jsx(E2,{className:"mr-2 h-4 w-4"}),"Share PGN"]}),o.jsxs(Y,{variant:"outline",className:"flex-1",onClick:f,"data-testid":"button-history-copy-pgn",children:[a?o.jsx(wl,{className:"mr-2 h-4 w-4"}):o.jsx(dw,{className:"mr-2 h-4 w-4"}),a?"Copied":"Copy PGN"]})]})]})})})]})}function Fp(){const[e,t]=d.useState(null),[n,r]=d.useState(!0),[s,i]=d.useState(null),[a,l]=d.useState([]),c=d.useRef(null);if(d.useEffect(()=>{const f=hR(t),m=async()=>{try{const h=await ie.getStatus();i(h);const y=await ie.getLogs();if(y&&y.logs){const p=y.logs;l(p.slice(-10))}}catch{}};return m(),c.current=window.setInterval(m,2e3),()=>{f(),c.current&&clearInterval(c.current)}},[]),!e)return null;const u=({ok:f})=>f?o.jsx(wl,{className:"w-3 h-3 text-green-400"}):o.jsx(Po,{className:"w-3 h-3 text-red-400"});return o.jsxs("div",{className:"fixed bottom-4 left-4 z-50 bg-black/90 text-white text-xs rounded-lg shadow-lg max-w-[280px]",onClick:()=>r(!n),"data-testid":"voice-debug-overlay",children:[o.jsxs("div",{className:"flex items-center gap-2 p-2 border-b border-white/20",children:[e.micListening?o.jsx(dn,{className:"w-4 h-4 text-green-400 animate-pulse"}):o.jsx(zs,{className:"w-4 h-4 text-red-400"}),o.jsx("span",{className:"font-bold",children:"Voice Debug"}),o.jsx("span",{className:"text-white/50 ml-auto",children:n?"":""})]}),n&&o.jsxs("div",{className:"p-2 space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(u,{ok:e.permissionStatus==="granted"}),o.jsxs("span",{children:["Permission: ",e.permissionStatus]})]}),o.jsx("div",{className:"text-white/50 text-[10px] mt-1 mb-1",children:"--- Native Status (polled) ---"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(u,{ok:(s==null?void 0:s.serviceBound)??!1}),o.jsxs("span",{children:["Service Bound: ",s!=null&&s.serviceBound?"Yes":"No"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(u,{ok:(s==null?void 0:s.modelReady)??!1}),o.jsxs("span",{children:["Model Ready: ",s!=null&&s.modelReady?"Yes":"No"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(u,{ok:(s==null?void 0:s.sessionActive)??!1}),o.jsxs("span",{children:["Session Active: ",s!=null&&s.sessionActive?"Yes":"No"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(u,{ok:e.micListening}),o.jsxs("span",{children:["Mic Listening: ",e.micListening?"Yes":"No"]})]}),e.lastResult&&o.jsx("div",{className:"mt-2 p-1 bg-green-900/50 rounded",children:o.jsxs("span",{className:"text-green-300",children:['Last: "',e.lastResult,'"']})}),e.lastError&&o.jsxs("div",{className:"mt-2 p-1 bg-red-900/50 rounded flex items-start gap-1",children:[o.jsx(h2,{className:"w-3 h-3 text-red-400 mt-0.5 shrink-0"}),o.jsx("span",{className:"text-red-300 break-all",children:e.lastError})]}),a.length>0&&o.jsxs("div",{className:"mt-2 p-1 bg-blue-900/50 rounded",children:[o.jsx("div",{className:"text-blue-300 text-[10px]",children:"Native Logs:"}),a.map((f,m)=>o.jsx("div",{className:"text-blue-200 text-[9px] truncate",children:f},m))]}),o.jsxs("div",{className:"text-white/30 mt-1",children:["Updated: ",new Date(e.timestamp).toLocaleTimeString()]})]})]})}const wA={p:100,n:320,b:330,r:500,q:900,k:2e4},zp="blindfold-saved-game";function bA(e){try{localStorage.setItem(zp,JSON.stringify(e))}catch(t){console.warn("Failed to save game state:",t)}}function SA(){try{const e=localStorage.getItem(zp);if(e)return JSON.parse(e)}catch(e){console.warn("Failed to load saved game:",e)}return null}function fc(){try{localStorage.removeItem(zp)}catch(e){console.warn("Failed to clear saved game:",e)}}function NA(e){if(e)return{from:e.from,to:e.to,captured:e.captured,capturedValue:e.captured?wA[e.captured]:void 0}}function kA(e){return new Promise(t=>setTimeout(t,e))}const jA={easy:{maxPeeks:Number.POSITIVE_INFINITY},medium:{maxPeeks:20},hard:{maxPeeks:10},expert:{maxPeeks:5},master:{maxPeeks:2},grandmaster:{maxPeeks:0}};function CA({historyTrigger:e,onStateChange:t,returnToTitleRef:n,onTrainNowClick:r}){const{toast:s}=vl(),[i,a]=d.useState(!0),[l,c]=d.useState(null),[u,f]=d.useState(!1),[m,h]=d.useState("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"),[y,p]=d.useState([]),[g,w]=d.useState(null),[x,v]=d.useState([]),[b,S]=d.useState(null),[N,j]=d.useState("white"),[k,C]=d.useState(null),[R,T]=d.useState(300),[F,_]=d.useState(300),[z,M]=d.useState(()=>localStorage.getItem("blindfold-settings-time")||"blitz"),[V,W]=d.useState(!1),[q,E]=d.useState("medium"),[A,O]=d.useState("empty_board"),[K,ae]=d.useState(!0),[he,ve]=d.useState(Number.POSITIVE_INFINITY),[te,I]=d.useState(!1),B=d.useRef(null),Q=d.useRef(0),[G,se]=d.useState(0),[ce,Se]=d.useState(0),qe=d.useRef(!1),Fe=d.useRef(null),Le=d.useRef([]),Je=d.useRef(0),Ke=d.useRef(0),dt=d.useRef(0),tt=d.useRef(0),Ft=d.useRef(0),H=d.useRef(0),X=d.useRef(0),me=d.useRef([]),ge=d.useRef(!1),de=d.useRef(null),_e=d.useRef(1200),[Ee,je]=d.useState(()=>Mh()),[nt,Ht]=d.useState(()=>Fa());d.useEffect(()=>{ra();const U=SA();U&&(oa(U),zo(!0))},[]),d.useEffect(()=>{const U=oe=>{const fe=oe;fe.detail&&je(fe.detail)};return window.addEventListener("blindfoldSettingsChanged",U),()=>{window.removeEventListener("blindfoldSettingsChanged",U)}},[]);const[Qe,zt]=d.useState(null),[Kt,kn]=d.useState(!1),[hn,Gt]=d.useState(!1),[gt,$n]=d.useState(()=>{const U=localStorage.getItem("blindfold-settings-elo");return U?Number(U):1200}),[en,pr]=d.useState(()=>localStorage.getItem("blindfold-settings-color")||"white"),[Ze,_t]=d.useState(!1),[Ue,Nt]=d.useState(!1),[Oe,El]=d.useState(!1),[ld,sa]=d.useState(!1),[L,ze]=d.useState(null),[ht,Hn]=d.useState(null),Z=d.useRef(null),[to,Vt]=d.useState(0),$t=d.useRef(""),[ps,jn]=d.useState(null),[no,or]=d.useState(!1),[Ne,zo]=d.useState(!1),[gs,oa]=d.useState(null),[ro,so]=d.useState(!1),[Pl,Vo]=d.useState(null),ir=d.useRef(null),[vs,qo]=d.useState(null),$r=d.useRef(null),[cd,Yr]=d.useState(!1),[ia,ud]=d.useState([]),[dd,Tl]=d.useState([]),[fd,Qt]=d.useState(null),[P,D]=d.useState(null),[$,xe]=d.useState(!1),[ke,ot]=d.useState([]),[Xr,Or]=d.useState(!1),[Vp,Rl]=d.useState(null),Ce=d.useRef(null),oo=d.useRef(300),io=d.useRef(300),At=d.useRef([]),mn=d.useRef(null),hd=d.useRef(!1),ao=d.useRef(!1),Wo=d.useRef(null),[qp,Wp]=d.useState(!1),Ml=Sn.isNativePlatform();d.useEffect(()=>()=>{Ci.stopAnalysis(),mn.current&&clearInterval(mn.current),$r.current&&clearTimeout($r.current),ao.current&&(ie.stopSession().catch(()=>{}),ao.current=!1),Wo.current&&(Wo.current.remove().catch(()=>{}),Wo.current=null)},[]),d.useEffect(()=>{localStorage.setItem("blindfold-settings-elo",String(gt))},[gt]),d.useEffect(()=>{localStorage.setItem("blindfold-settings-color",en)},[en]),d.useEffect(()=>{localStorage.setItem("blindfold-settings-time",z)},[z]),d.useEffect(()=>{e&&e>0&&Or(!0)},[e]),d.useEffect(()=>{Ce.current=l,oo.current=R,io.current=F,At.current=y},[l,R,F,y]),d.useEffect(()=>{if(!u||k||!l||!Qe)return;const U={pgn:l.pgn(),playerColor:N,whiteTime:R,blackTime:F,timeControl:z,botElo:Qe.elo,isBlindfold:V,blindfoldDifficulty:q,remainingPeeks:he,savedAt:Date.now()};bA(U)},[u,k,l,Qe,y,N,R,F,z,V,q,he]);const _l=d.useCallback(()=>{fc(),mn.current&&(clearInterval(mn.current),mn.current=null),Z.current&&(clearTimeout(Z.current),Z.current=null),c(null),f(!1),C(null),h("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"),p([]),w(null),v([]),S(null),zt(null),kn(!1),I(!1),Hn(null),nn.stop(),Q.current=0,se(0),Se(0),qe.current=!1,Fe.current=null,Le.current=[],Je.current=0,Ke.current=0,dt.current=0,tt.current=0,Ft.current=0,H.current=0,X.current=0,me.current=[],ge.current=!1,de.current&&(clearTimeout(de.current),de.current=null),so(!1),Vo(null),ir.current=null,Qt(null),D(null),qo(null),$r.current&&(clearTimeout($r.current),$r.current=null)},[]);d.useEffect(()=>{t&&t(ro?"reconstruction":$?"analysis":u&&!k?"in_game":i?"idle":"setup")},[ro,$,u,k,i,t]);const aa=d.useCallback(()=>{if(u&&Ce.current&&At.current.length>0&&!k&&Qe){mn.current&&(clearInterval(mn.current),mn.current=null);const U=Ce.current.pgn()||"",oe={date:new Date().toISOString(),result:"loss",playerColor:N,botName:String(Qe.elo),botElo:Qe.elo,moveCount:At.current.length,pgn:U,clarityScore:0,isFavorite:!1,timeControl:z};g0(oe).then(fe=>{fe&&console.log("[Game] Saved resigned game to history:",fe)})}nn.stop(),so(!1),xe(!1),Yr(!1),Or(!1),Rl(null),_l(),a(!0)},[u,k,Qe,N,z,_l]);d.useEffect(()=>(n&&(n.current=aa),()=>{n&&(n.current=null)}),[aa,n]);const Uo=d.useCallback((U,oe,fe)=>{var at;const De=U==="draw"?"draw":U==="white_win"&&N==="white"||U==="black_win"&&N==="black"?"win":"loss",Pe=Q.current===0;ud([...Le.current]),Tl([...me.current]),ot([...At.current]);const et=At.current.length,re=IR(De,Q.current,ce,Le.current,oe,fe,{botElo:_e.current,wasPeekFree:Pe,totalMoves:et,voiceCorrections:Ke.current,voiceCommands:dt.current,reconstructionVoiceInputs:tt.current,reconstructionTouchInputs:Ft.current,gameVoiceMoves:H.current,gameTouchMoves:X.current,squareInquiries:me.current,isBlindfold:V,wasAssisted:ge.current});if(Ht(re),window.dispatchEvent(new CustomEvent("statsUpdated")),Ee.boardReconstructionEnabled||Yr(!0),Qe&&et>0){const Cn=((at=Ce.current)==null?void 0:at.pgn())||"",En={date:new Date().toISOString(),result:De,playerColor:N,botName:String(Qe.elo),botElo:Qe.elo,moveCount:et,pgn:Cn,clarityScore:oe??0,isFavorite:!1,timeControl:z};g0(En).then(Kn=>{Kn&&console.log("[Game] Saved game to history:",Kn)})}else Qe&&et===0&&console.log("[Game] Zero-move game detected. Not saving to history.")},[N,ce,V,Qe,z]),Ot=d.useCallback(U=>{fc(),mn.current&&(clearInterval(mn.current),mn.current=null),C(U),nn.stop(),Oe&&Pt(U==="draw"?"Game drawn":U==="white_win"&&N==="white"||U==="black_win"&&N==="black"?"You win!":"You lose"),Ee.boardReconstructionEnabled&&Ce.current?(ir.current={result:U,fen:Ce.current.fen()},Vo(Ce.current.fen()),qo(3)):Uo(U)},[N,Oe,Ee.boardReconstructionEnabled,Uo]);d.useEffect(()=>{if(vs!==null)return vs>0?$r.current=setTimeout(()=>{qo(U=>U!==null?U-1:null)},1e3):(so(!0),qo(null)),()=>{$r.current&&clearTimeout($r.current)}},[vs]);const PN=d.useCallback((U,oe,fe,Te)=>{tt.current=fe,Ft.current=Te,Qt(U),D(oe),ir.current&&(Uo(ir.current.result,U,oe),ir.current=null)},[Uo]),TN=d.useCallback(()=>{so(!1),Vo(null),ir.current=null,aa()},[aa]),RN=d.useCallback(()=>{Qt(null),D(null),ir.current&&Uo(ir.current.result),so(!1),Vo(null),ir.current=null,Yr(!0)},[Uo]),la=d.useCallback(async(U,oe,fe,Te)=>{if(!oe)return null;kn(!0);try{const De=N==="white"?io.current:oo.current,Pe=(fe==null?void 0:fe.length)||0,et=await uA(U,oe,fe,Te);if(!et)throw new Error("Bot failed to generate move");et.isBookMove&&Je.current++;let re;if(et.isFreeCapture)re=2e3;else if(Ee.botThinkingTimeEnabled){const at=Math.ceil((Pe+2)/2),Cn=aA(U);re=lA(at,Cn,De,z)}else{const at=Math.ceil((Pe+2)/2);re=iA(at,De,U,N==="white"?"black":"white",Te)}return re>2e3&&Gt(!0),await kA(re),Gt(!1),et}catch(De){return console.error("Error getting bot move:",De),s({title:"Error",description:"Bot failed to respond",variant:"destructive"}),null}finally{kn(!1),Gt(!1)}},[s,N,Ee.botThinkingTimeEnabled,z]),Up=async(U,oe)=>{Q.current=0,_e.current=U.elo;const fe=new An;c(fe),Ce.current=fe,h(fe.fen()),p([]),At.current=[],w(null),v([]),C(null),zt(U);const Te=oe==="random"?Math.random()<.5?"white":"black":oe;j(Te);const De=z==="practice"?99999999:z==="blitz"?300:z==="rapid"?900:1800;if(T(De),_(De),oo.current=De,io.current=De,ve(V?jA[q].maxPeeks:Number.POSITIVE_INFINITY),f(!0),_t(!1),Te==="black"){const Pe=await la(fe.fen(),U.elo);if(Pe&&Ce.current){const et=Ce.current.move(Pe.move);et&&S({from:et.from,to:et.to}),h(Ce.current.fen());const re=[Pe.move];p(re),At.current=re,Fe.current=Date.now();try{$e.impact({style:Be.Medium}).catch(()=>{}),setTimeout(()=>{$e.impact({style:Be.Medium}).catch(()=>{})},100)}catch{}if(Oe){const at=Yo(Pe.move,Pe.move.includes("x"),Ce.current.isCheck(),!1);$t.current=at,Pt(at)}}}},MN=d.useCallback(async U=>{const oe=new An;oe.loadPgn(U.pgn);const fe=hu(U.botElo),Te={id:`elo_${U.botElo}`,elo:U.botElo,difficulty:`elo_${Math.round(U.botElo/200)*200}`,depth:fe.depth,randomPercent:fe.randomPercent};Q.current=0,_e.current=Te.elo,se(0),Se(0),qe.current=!1,Fe.current=null,Le.current=[],Je.current=0,Ke.current=0,dt.current=0,tt.current=0,Ft.current=0,H.current=0,X.current=0,me.current=[],c(oe),Ce.current=oe,h(oe.fen());const De=oe.history();p(De),At.current=De,w(null),v([]),C(null),zt(Te),j(U.playerColor),T(U.whiteTime),_(U.blackTime),oo.current=U.whiteTime,io.current=U.blackTime,M(U.timeControl),W(U.isBlindfold),E(U.blindfoldDifficulty),ve(U.remainingPeeks);const Pe=oe.history({verbose:!0});if(Pe.length>0){const at=Pe[Pe.length-1];S({from:at.from,to:at.to})}a(!1),f(!0),_t(!1),fc();const et=oe.turn(),re=U.playerColor==="white"?"b":"w";if(et===re){const at=await la(oe.fen(),Te.elo,De);if(at&&Ce.current){const Cn=Ce.current.move(at.move);Cn&&S({from:Cn.from,to:Cn.to}),h(Ce.current.fen());const En=[...At.current,at.move];p(En),At.current=En,Fe.current=Date.now();try{$e.impact({style:Be.Medium}).catch(()=>{})}catch{}if(Oe){const Kn=Yo(at.move,at.move.includes("x"),Ce.current.isCheck(),!1);$t.current=Kn,Pt(Kn)}}}},[s,la,Oe]);d.useEffect(()=>{if(k!==null){mn.current&&(clearInterval(mn.current),mn.current=null);return}if(u&&l&&z!=="practice"){const U=setInterval(()=>{l.turn()==="w"?T(fe=>{const Te=Math.max(0,fe-1);return oo.current=Te,Te===0&&fe>0&&Ot("black_win"),Te}):_(fe=>{const Te=Math.max(0,fe-1);return io.current=Te,Te===0&&fe>0&&Ot("white_win"),Te})},1e3);return mn.current=U,()=>{clearInterval(U),mn.current=null}}},[u,l,Ot,z,k]),d.useEffect(()=>((async()=>{try{u&&V&&Ee.keepAwakeEnabled?(await gf.keepAwake(),console.log("[KeepAwake] Screen wake lock enabled for blindfold game")):(await gf.allowSleep(),console.log("[KeepAwake] Screen wake lock released"))}catch(oe){console.log("[KeepAwake] Plugin not available (web mode):",oe)}})(),()=>{gf.allowSleep().catch(()=>{})}),[u,V,Ee.keepAwakeEnabled]),d.useEffect(()=>{if(!Ml||!Ue||!u||!Ce.current||k!==null)return;let U=!1;return(async()=>{try{if(!await Sl()||U){console.warn("[NativeVoice] Voice not ready or cancelled");return}if(console.log("[NativeVoice] Starting voice session..."),Wo.current&&await Wo.current.remove(),U||(console.log("[NativeVoice] Setting up onSpeechResult listener..."),Wo.current=await ie.addListener("onSpeechResult",Te=>{console.log("[NativeVoice] *** RECEIVED onSpeechResult:",Te.text);const De=Te.text,Pe=Ce.current;if(!Pe){console.log("[NativeVoice] No game ref, ignoring");return}const et=De.trim();if(et.length<2){console.log("[NativeVoice] Too short, ignoring:",et);return}dt.current++,ze(De),console.log("[NativeVoice] Processing transcript:",De);const re=De.toLowerCase();if(re.includes("repeat")||re.includes("say again")||re==="again"||re.includes("what was that")){$t.current&&Oe?ie.speakAndListen({text:$t.current}).catch(()=>{}):ie.startListening().catch(()=>{});return}if(no){if(re.includes("yes")||re.includes("confirm")||re.includes("i confirm")){$e.impact({style:Be.Medium}).catch(()=>{}),or(!1),Ot(N==="white"?"black_win":"white_win"),ze(null);return}if(re.includes("no")||re.includes("cancel")||re.includes("never mind")){$e.impact({style:Be.Light}).catch(()=>{}),or(!1),ze(null),ie.startListening().catch(()=>{});return}ie.startListening().catch(()=>{});return}if(ht){Z.current&&(clearTimeout(Z.current),Z.current=null);const ue=Hv(De);let ee=null;if(ht.isPawnCapture&&ht.pawnFiles&&ue.file?ee=Yv(ht.candidates,ue.file):(ue.file||ue.rank)&&(ee=Kv(ht.candidates,ue)),ee){Hn(null);try{const le=Pe.move(ee);if(le){H.current++,S({from:le.from,to:le.to}),h(Pe.fen());const ye=[...At.current,ee];if(p(ye),At.current=ye,$e.impact({style:Be.Light}).catch(()=>{}),Oe){const We=Yo(ee,ee.includes("x"),!1,!1);$t.current=We,ie.speakAndListen({text:We}).catch(()=>{})}else ie.startListening().catch(()=>{});Pe.isCheckmate()?Ot(Pe.turn()==="w"?"black_win":"white_win"):Pe.isDraw()&&Ot("draw"),ze(null)}}catch(le){console.error("[NativeVoice] Disambiguation move error:",le),ie.startListening().catch(()=>{})}return}Ke.current++;const ne=ht.isPawnCapture?"I didn't catch that. Which file?":"I didn't catch that. Which piece?";Oe?ie.speakAndListen({text:ne}).catch(()=>{}):ie.startListening().catch(()=>{});return}const at=re.match(/what(?:'?s| is)?\s+(?:on\s+)?([a-h])[\s-]?([1-8])/);if(at){const ue=`${at[1]}${at[2]}`;V&&me.current.push(ue);const ee=Pe.get(ue);let ne="";ee?ne=`${ee.color==="w"?"White":"Black"} ${{p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[ee.type]} on ${ue}`:ne=`${ue.toUpperCase()} is empty`,$e.impact({style:Be.Light}).catch(()=>{}),Oe?ie.speakAndListen({text:ne}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}const Cn=re.match(/where\s+(?:is|are)\s+(?:my\s+)?(\w+)/);if(Cn){const ue=Cn[1].toLowerCase(),ne={king:"k",queen:"q",rook:"r",bishop:"b",knight:"n",pawn:"p",kings:"k",queens:"q",rooks:"r",bishops:"b",knights:"n",pawns:"p",horse:"n",horses:"n",castle:"r",castles:"r"}[ue];if(ne){const le=N==="white"?"w":"b",ye=[],We=["a","b","c","d","e","f","g","h"],rt=["1","2","3","4","5","6","7","8"];for(const lt of We)for(const vt of rt){const pn=`${lt}${vt}`,tn=Pe.get(pn);tn&&tn.type===ne&&tn.color===le&&ye.push(pn.toUpperCase())}const Ye={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"};let mt="";ye.length===0?mt=`You have no ${Ye[ne]}`:ye.length===1?mt=`Your ${Ye[ne]} is on ${ye[0]}`:mt=`Your ${Ye[ne]}s are on ${ye.join(" and ")}`,$e.impact({style:Be.Light}).catch(()=>{}),Oe?ie.speakAndListen({text:mt}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}}if(re.includes("last move")||re.includes("previous move")||re.includes("opponent's move")){$e.impact({style:Be.Light}).catch(()=>{});const ue=Pe.history({verbose:!0});let ee="";if(ue.length===0)ee="No moves have been made yet";else{const ne=ue[ue.length-1],ye={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[ne.piece]||ne.piece,We=ne.captured?" takes":"",rt=ne.to.toUpperCase();ne.piece==="p"?ee=`${ne.from.toUpperCase()}${We} ${rt}`:ee=`${ye}${We} ${rt}`}Oe?ie.speakAndListen({text:ee}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}const En=re.match(/legal\s+moves?\s+(?:for\s+)?(?:my\s+)?(\w+)/);if(En){const ue=En[1].toLowerCase(),ne={king:"k",queen:"q",rook:"r",bishop:"b",knight:"n",pawn:"p",kings:"k",queens:"q",rooks:"r",bishops:"b",knights:"n",pawns:"p",horse:"n",horses:"n",castle:"r",castles:"r"}[ue];if(ne){$e.impact({style:Be.Light}).catch(()=>{});const ye={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"}[ne],rt=Pe.moves({verbose:!0}).filter(lt=>lt.piece===ne),Ye=Array.from(new Set(rt.map(lt=>lt.to.toUpperCase())));let mt="";if(Ye.length===0)mt=`Your ${ye} has no legal moves`;else if(Ye.length<=4)mt=`Your ${ye} can move to ${Ye.join(", ")}`;else{const lt=Ye.slice(0,3);mt=`Your ${ye} has ${Ye.length} legal moves, including ${lt.join(", ")}`}Oe?ie.speakAndListen({text:mt}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}}if(re.includes("resign")||re.includes("quit")||re.includes("give up")||re.includes("i resign")){$e.impact({style:Be.Medium}).catch(()=>{}),or(!0),ze(null),Oe?ie.speakAndListen({text:"Resign? Say yes or no."}).catch(()=>{}):ie.startListening().catch(()=>{});return}if(re==="peek"||re==="peak"){if(he<=0||A==="no_board"||q==="grandmaster"){Oe?ie.speakAndListen({text:"Peeking is not allowed"}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}$e.impact({style:Be.Light}).catch(()=>{}),ge.current=!0,I(!0),ve(ue=>ue-1),de.current&&clearTimeout(de.current),de.current=setTimeout(()=>{I(!1),de.current=null},5e3),Oe?ie.speakAndListen({text:"Board visible for 5 seconds"}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}if(re.includes("clock")||re.includes("how much time")||re.includes("time left")||re.includes("remaining")){$e.impact({style:Be.Light}).catch(()=>{});const ue=N==="white"?R:F,ee=Math.floor(ue/60),ne=ue%60;let le="";ee>0?le=`${ee} minute${ee!==1?"s":""} and ${ne} second${ne!==1?"s":""} remaining`:le=`${ne} second${ne!==1?"s":""} remaining`,Oe?ie.speakAndListen({text:le}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}if(re.includes("material")){$e.impact({style:Be.Light}).catch(()=>{});const ue={p:1,n:3,b:3,r:5,q:9,k:0};let ee=0,ne=0;const le=Pe.board();for(const rt of le)for(const Ye of rt)if(Ye){const mt=ue[Ye.type]||0;Ye.color==="w"?ee+=mt:ne+=mt}const ye=ee-ne;let We="";ye>0?We=`White is up ${ye} point${ye!==1?"s":""}`:ye<0?We=`Black is up ${Math.abs(ye)} point${Math.abs(ye)!==1?"s":""}`:We="Material is equal",Oe?ie.speakAndListen({text:We}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}if(re.includes("eval")||re.includes("evaluation")){$e.impact({style:Be.Light}).catch(()=>{}),ge.current=!0,Oe&&ie.speakAndListen({text:"Evaluating position"}).catch(()=>{}),Ci.analyzePosition(Pe.fen(),5e5).then(ue=>{let ee="";if(ue.isMate&&ue.mateIn!==void 0)ee=ue.mateIn>0?`Mate in ${ue.mateIn} for white`:`Mate in ${Math.abs(ue.mateIn)} for black`;else{const ne=Math.abs(ue.evaluation);ne<.3?ee="Position is equal":ue.evaluation>0?ee=`White is better by ${ne.toFixed(1)}`:ee=`Black is better by ${ne.toFixed(1)}`}Oe?ie.speakAndListen({text:ee}).catch(()=>{}):ie.startListening().catch(()=>{})}).catch(()=>{Oe?ie.speakAndListen({text:"Unable to evaluate position"}).catch(()=>{}):ie.startListening().catch(()=>{})}),ze(null);return}const Kn=Pe.moves({verbose:!0}).map(ue=>ue.san),yt=Uv(De,Kn);if(yt.move&&!yt.isAmbiguous)try{const ue=Pe.move(yt.move);if(ue){H.current++,S({from:ue.from,to:ue.to});const ee=Pe.fen();h(ee);const ne=[...At.current,yt.move];p(ne),At.current=ne,$e.impact({style:Be.Light}).catch(()=>{}),Pe.isCheckmate()?Ot(Pe.turn()==="w"?"black_win":"white_win"):Pe.isDraw()&&Ot("draw"),ze(null),ie.startListening().catch(()=>{})}}catch(ue){console.error("[NativeVoice] Move error:",ue),ie.startListening().catch(()=>{})}else if(yt.isAmbiguous&&yt.candidates.length>1){const ue=Xv(yt.candidates),ee=ue?Qv(yt.candidates):[];let ne;if(ue&&ee.length===2){const le=ee[0].toUpperCase(),ye=ee[1].toUpperCase();ne=`Did you mean ${le} takes ${yt.targetSquare} or ${ye} takes ${yt.targetSquare}?`}else{const le=Gv(yt.candidates),ye=yt.piece==="R"?"rook":yt.piece==="N"?"knight":yt.piece==="B"?"bishop":yt.piece==="Q"?"queen":"piece";ne=le.length===2?`Two ${ye}s can move to ${yt.targetSquare}. The one on ${le[0]} or ${le[1]}?`:`Multiple ${ye}s can move to ${yt.targetSquare}. Which one?`}Hn({candidates:yt.candidates,piece:yt.piece,targetSquare:yt.targetSquare,isPawnCapture:ue,pawnFiles:ee}),ze(`Clarify: ${yt.candidates.join(" or ")}`),Oe?ie.speakAndListen({text:ne}).catch(()=>{}):ie.startListening().catch(()=>{}),Z.current=setTimeout(()=>{Hn(null),ze(null),Oe?ie.speakAndListen({text:"Move cancelled"}).catch(()=>{}):ie.startListening().catch(()=>{})},1e4)}else ze(null),ie.startListening().catch(()=>{})}),U))return;console.log("[NativeVoice] Calling startSession..."),await ie.startSession(),ao.current=!0,sa(!0),Wp(!1),console.log("[NativeVoice] Session started - listener active, waiting for speech")}catch(fe){console.error("[NativeVoice] Setup failed, falling back to web voice:",fe),Wp(!0),ao.current=!1}})(),()=>{U=!0,ao.current&&(ie.stopSession().catch(()=>{}),ao.current=!1,sa(!1))}},[Ml,Ue,u,k,Oe,Ot]),d.useEffect(()=>{if(Ml&&!qp)return;if(!Ue){nn.stop();return}if(!u||!Ce.current||k!==null){nn.stop();return}Bi.register("game"),nn.setOnResult(async(Te,De)=>{const Pe=Ce.current;if(!Pe)return;if(De.trim().length<2){console.log("[Game] Ignoring empty/short transcript:",De);return}dt.current++,ze(De);const re=De.toLowerCase();if(no){if(re.includes("yes")||re.includes("confirm")||re.includes("i confirm")){try{$e.impact({style:Be.Medium}).catch(()=>{})}catch{}or(!1),Ot(N==="white"?"black_win":"white_win"),ze(null);return}if(re.includes("no")||re.includes("cancel")||re.includes("never mind")){try{$e.impact({style:Be.Light}).catch(()=>{})}catch{}or(!1),ze(null);return}return}if(re.includes("repeat")||re.includes("say again")||re.includes("what was that")||re.includes("again")){$t.current&&Oe&&Pt($t.current).catch(ee=>console.warn("[Voice] Echo failed:",ee));return}const at=re.match(/what(?:'?s| is)?\s+(?:on\s+)?([a-h])[\s-]?([1-8])/);if(at){const ee=`${at[1]}${at[2]}`;V&&me.current.push(ee);const ne=Pe.get(ee);let le="";if(ne){const ye=ne.color==="w"?"White":"Black",rt={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[ne.type]||ne.type;le=`${ye} ${rt} on ${ee}`}else le=`${ee.toUpperCase()} is empty`;Oe&&Pt(le).catch(ye=>console.warn("[Voice] Echo failed:",ye)),ze(null);return}if(re.includes("last move")||re.includes("previous move")||re.includes("opponent's move")){try{$e.impact({style:Be.Light}).catch(()=>{})}catch{}const ee=Pe.history({verbose:!0});let ne="";if(ee.length===0)ne="No moves have been made yet";else{const le=ee[ee.length-1],We={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[le.piece]||le.piece,rt=le.captured?" takes":"",Ye=le.from.toUpperCase(),mt=le.to.toUpperCase();le.piece==="p"?ne=`${Ye}${rt} ${mt}`:ne=`${We}${rt} ${mt}`}Oe&&Pt(ne).catch(le=>console.warn("[Voice] Echo failed:",le)),ze(null);return}if(/\b(how much time|what('?s| is) the time|time left|clock|my time)\b/.test(re)){try{$e.impact({style:Be.Light}).catch(()=>{})}catch{}const ee=N==="white"?oo.current:io.current,ne=N==="white"?io.current:oo.current,le=We=>{const rt=Math.floor(We/60),Ye=We%60;return rt>0&&Ye>0?`${rt} minute${rt!==1?"s":""} ${Ye} second${Ye!==1?"s":""}`:rt>0?`${rt} minute${rt!==1?"s":""}`:`${Ye} second${Ye!==1?"s":""}`},ye=`You have ${le(ee)}. Opponent has ${le(ne)}.`;Oe&&Pt(ye).catch(We=>console.warn("[Voice] Echo failed:",We)),ze(null);return}const En=re.match(/where(?:'?s| is| are)?\s+(?:my\s+)?(\w+)/);if(En){const ee=En[1].toLowerCase(),le={king:"k",kings:"k",queen:"q",queens:"q",rook:"r",rooks:"r",castle:"r",castles:"r",bishop:"b",bishops:"b",knight:"n",knights:"n",horse:"n",horses:"n",pawn:"p",pawns:"p"}[ee];if(le){try{$e.impact({style:Be.Light}).catch(()=>{})}catch{}const ye=N==="white"?"w":"b",rt={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"}[le],Ye=[],mt=["a","b","c","d","e","f","g","h"];for(const vt of mt)for(let pn=1;pn<=8;pn++){const tn=`${vt}${pn}`,lo=Pe.get(tn);lo&&lo.type===le&&lo.color===ye&&Ye.push(tn.toUpperCase())}let lt="";Ye.length===0?lt=`You have no ${rt}s`:Ye.length===1?lt=`Your ${rt} is on ${Ye[0]}`:lt=`You have ${rt}s on ${Ye.slice(0,-1).join(", ")} and ${Ye[Ye.length-1]}`,Oe&&Pt(lt).catch(vt=>console.warn("[Voice] Echo failed:",vt)),ze(null);return}}if(re.includes("material")){try{$e.impact({style:Be.Light}).catch(()=>{})}catch{}const ee={p:1,n:3,b:3,r:5,q:9},ne={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen"},le={p:0,n:0,b:0,r:0,q:0},ye={p:0,n:0,b:0,r:0,q:0},We=["a","b","c","d","e","f","g","h"];for(const lt of We)for(let vt=1;vt<=8;vt++){const pn=`${lt}${vt}`,tn=Pe.get(pn);tn&&tn.type!=="k"&&(tn.color==="w"?le[tn.type]++:ye[tn.type]++)}const rt={};let Ye=0;for(const lt of["q","r","b","n","p"]){const vt=le[lt]-ye[lt];vt!==0&&(rt[lt]=vt,Ye+=vt*ee[lt])}let mt="";if(Ye===0)mt="Material is equal";else{const lt=Ye>0?"White":"Black",vt=Math.abs(Ye),pn=[];for(const tn of["q","r","b","n","p"]){const lo=Ye>0?rt[tn]:-(rt[tn]||0);if(lo&&lo>0){const Gp=lo,Qp=ne[tn];pn.push(Gp===1?`a ${Qp}`:`${Gp} ${Qp}s`)}}if(pn.length>0){const tn=pn.length===1?pn[0]:`${pn.slice(0,-1).join(", ")} and ${pn[pn.length-1]}`;mt=`${lt} is up ${tn}`}else mt=`${lt} is up by ${vt} point${vt!==1?"s":""}`}Oe&&Pt(mt).catch(lt=>console.warn("[Voice] Echo failed:",lt)),ze(null);return}const Kn=re.match(/legal\s+moves?\s+(?:for\s+)?(?:my\s+)?(\w+)/);if(Kn){const ee=Kn[1].toLowerCase(),le={king:"k",queen:"q",rook:"r",bishop:"b",knight:"n",pawn:"p",kings:"k",queens:"q",rooks:"r",bishops:"b",knights:"n",pawns:"p",horse:"n",horses:"n",castle:"r",castles:"r"}[ee];if(le){try{$e.impact({style:Be.Light}).catch(()=>{})}catch{}const We={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"}[le],Ye=Pe.moves({verbose:!0}).filter(vt=>vt.piece===le),mt=Array.from(new Set(Ye.map(vt=>vt.to.toUpperCase())));let lt="";if(mt.length===0)lt=`Your ${We} has no legal moves`;else if(mt.length<=4)lt=`Your ${We} can move to ${mt.join(", ")}`;else{const vt=mt.slice(0,3);lt=`Your ${We} has ${mt.length} legal moves, including ${vt.join(", ")}`}Oe&&Pt(lt).catch(vt=>console.warn("[Voice] Echo failed:",vt)),ze(null);return}}if(re.includes("resign")||re.includes("quit")||re.includes("give up")||re.includes("i resign")){try{$e.impact({style:Be.Medium}).catch(()=>{})}catch{}or(!0),ze(null);return}if(re==="peek"||re==="peak"){if(A==="no_board"||q==="grandmaster"){Oe&&Pt("Peeking is not allowed in this mode").catch(ee=>console.warn("[Voice] Echo failed:",ee)),ze(null);return}try{$e.impact({style:Be.Light}).catch(()=>{})}catch{}ge.current=!0,I(!0),de.current&&clearTimeout(de.current),de.current=setTimeout(()=>{I(!1),de.current=null},5e3),Oe&&Pt("Board visible for 5 seconds").catch(ee=>console.warn("[Voice] Echo failed:",ee)),ze(null);return}if(re.includes("eval")||re.includes("evaluation")){try{$e.impact({style:Be.Light}).catch(()=>{})}catch{}ge.current=!0,Oe&&(async()=>{try{const ee=await Ci.getBestMove(Pe.fen(),{depth:12});let ne="";if(ee.evaluation!==void 0){const le=ee.evaluation,ye=le>=0?"plus":"minus",We=Math.abs(le).toFixed(1);Math.abs(le)>=100?ne=le>0?"White has checkmate":"Black has checkmate":Math.abs(le)<.3?ne="Position is equal":ne=`Evaluation is ${ye} ${We}`}else ne="Unable to evaluate position";await Pt(ne)}catch(ee){console.warn("[Voice] Eval failed:",ee),Pt("Unable to evaluate position").catch(()=>{})}})(),ze(null);return}if(ht){Z.current&&(clearTimeout(Z.current),Z.current=null);const ee=Hv(De);let ne=null;if(ht.isPawnCapture&&ht.pawnFiles&&ee.file?ne=Yv(ht.candidates,ee.file):(ee.file||ee.rank)&&(ne=Kv(ht.candidates,ee)),ne){if(Hn(null),Oe){const We=Yo(ne,ne.includes("x"),!1,!1);$t.current=We,Pt(We).catch(rt=>console.warn("[Voice] Echo failed:",rt))}if(!Ce.current)return;const ye=Ce.current.move(ne);if(ye){H.current++,h(Ce.current.fen()),S({from:ye.from,to:ye.to});const We=[...At.current,ye.san];if(p(We),At.current=We,w(null),v([]),ze(null),Ce.current.isCheckmate()){const rt=Ce.current.turn()==="w"?"black_win":"white_win";Ot(rt)}else(Ce.current.isDraw()||Ce.current.isStalemate()||Ce.current.isThreefoldRepetition()||Ce.current.isInsufficientMaterial())&&Ot("draw")}return}Ke.current++;const le=ht.isPawnCapture?"I didn't catch that. Which file?":"I didn't catch that. Which piece?";Oe&&Pt(le).catch(ye=>console.warn("[Voice] Echo failed:",ye)),Z.current=setTimeout(async()=>{Hn(null),ze(null),Oe&&Pt("Move cancelled").catch(ye=>console.warn("[Voice] Echo failed:",ye))},1e4);return}const yt=Pe.moves(),ue=Uv(De,yt);if(ue.move){if(Oe){const ne=Yo(ue.move,ue.move.includes("x"),!1,!1);$t.current=ne,Pt(ne).catch(le=>console.warn("[Voice] Echo failed:",le))}if(!Ce.current)return;const ee=Ce.current.move(ue.move);if(ee){if(Fe.current!==null){const le=Date.now()-Fe.current;Le.current.push(le),Fe.current=null}if(V){if(!qe.current){const le=G+1;se(le),le>ce&&Se(le)}qe.current=!1}H.current++;try{$e.impact({style:Be.Light}).catch(()=>{})}catch{}h(Ce.current.fen()),S({from:ee.from,to:ee.to});const ne=[...At.current,ee.san];if(p(ne),At.current=ne,w(null),v([]),ze(null),Ce.current.isCheckmate()){const le=Ce.current.turn()==="w"?"black_win":"white_win";Ot(le)}else(Ce.current.isDraw()||Ce.current.isStalemate()||Ce.current.isThreefoldRepetition()||Ce.current.isInsufficientMaterial())&&Ot("draw")}}else if(ue.isAmbiguous&&ue.candidates.length>1){const ee=Xv(ue.candidates),ne=ee?Qv(ue.candidates):[];let le;if(ee&&ne.length===2){const ye=ne[0].toUpperCase(),We=ne[1].toUpperCase();le=`Did you mean ${ye} takes ${ue.targetSquare} or ${We} takes ${ue.targetSquare}?`}else{const ye=Gv(ue.candidates),We=ue.piece==="R"?"rook":ue.piece==="N"?"knight":ue.piece==="B"?"bishop":ue.piece==="Q"?"queen":"piece";le=ye.length===2?`Two ${We}s can move to ${ue.targetSquare}. The one on ${ye[0]} or ${ye[1]}?`:`Multiple ${We}s can move to ${ue.targetSquare}. Which one?`}Hn({candidates:ue.candidates,piece:ue.piece,targetSquare:ue.targetSquare,isPawnCapture:ee,pawnFiles:ne}),ze(`Clarify: ${ue.candidates.join(" or ")}`),Oe&&Pt(le).catch(ye=>console.warn("[Voice] Echo failed:",ye)),Z.current=setTimeout(async()=>{Hn(null),ze(null),Oe&&Pt("Move cancelled").catch(ye=>console.warn("[Voice] Echo failed:",ye))},1e4)}else Ke.current++,s({title:"Didn't understand",description:`Heard: "${De}". Try again.`,variant:"destructive"}),Vt(ee=>ee+1)}),nn.setOnListeningChange(sa);const U=Ce.current,oe=U.turn();if((oe==="w"&&N==="white"||oe==="b"&&N==="black")&&!Kt&&!ps&&k===null&&!hd.current){const Te=U.moves();nn.setLegalMoves(Te),nn.start(),nn.getMuted()&&nn.resumeLoop()}else k!==null&&nn.stop();return()=>{nn.reset(),Bi.clearProtectedLane(),Z.current&&(clearTimeout(Z.current),Z.current=null)}},[Ue,u,m,N,Kt,ps,k,Oe,s,Ot,ht,to,no,qp]),d.useEffect(()=>{if(!Qe||!Ce.current||k!==null)return;const U=Ce.current,oe=U.turn();if((oe==="w"&&N==="black"||oe==="b"&&N==="white")&&u&&!Kt){const Te=U.history(),De=U.fen(),Pe=b?NA({from:b.from,to:b.to}):void 0;la(De,Qe.elo,Te,Pe).then(async et=>{if(et&&Ce.current){const re=Ce.current.move(et.move);re&&S({from:re.from,to:re.to});const at=Ce.current.fen();h(at);const Cn=[...At.current,et.move];p(Cn),At.current=Cn,Fe.current=Date.now();try{$e.impact({style:Be.Medium}).catch(()=>{}),setTimeout(()=>{$e.impact({style:Be.Medium}).catch(()=>{})},100)}catch{}if(Oe){const En=Ce.current.isCheck(),Kn=Ce.current.isCheckmate(),yt=et.move.includes("x"),ue=Yo(et.move,yt,En,Kn);if($t.current=ue,Ml&&ao.current&&Ue)try{await ie.speakAndListen({text:ue})}catch(ee){console.error("[NativeVoice] TTS error:",ee)}else{hd.current=!0;try{await Pt(ue)}catch(ee){console.error("[Voice] TTS error:",ee)}finally{hd.current=!1}}}if(Ce.current.isCheckmate()){const En=Ce.current.turn()==="w"?"black_win":"white_win";Ot(En)}else(Ce.current.isDraw()||Ce.current.isStalemate()||Ce.current.isThreefoldRepetition()||Ce.current.isInsufficientMaterial())&&Ot("draw")}})}},[m,Qe,N,u,Kt,k,Oe,Ue,la,Ot,b]);const Al=U=>{if(U>=99999)return"";const oe=Math.floor(U/60),fe=U%60;return`${oe}:${fe.toString().padStart(2,"0")}`},_N=(U,oe)=>{if(!l)return!1;const fe=l.get(U);if(!fe||fe.type!=="p")return!1;const Te=oe[1];return fe.color==="w"&&Te==="8"||fe.color==="b"&&Te==="1"},Hp=async(U,oe,fe="q")=>{if(l)try{const Te=l.move({from:U,to:oe,promotion:fe});if(Te){if(X.current++,Fe.current!==null){const et=Date.now()-Fe.current;Le.current.push(et),Fe.current=null}if(V){if(!qe.current){const et=G+1;se(et),et>ce&&Se(et)}qe.current=!1}const De=l.fen();h(De),S({from:Te.from,to:Te.to});const Pe=[...At.current,Te.san];p(Pe),At.current=Pe,w(null),v([]),l.isCheckmate()?Ot(l.turn()==="w"?"black_win":"white_win"):(l.isDraw()||l.isStalemate()||l.isThreefoldRepetition()||l.isInsufficientMaterial())&&Ot("draw")}}catch(Te){console.error("Invalid move:",Te)}},AN=d.useCallback(U=>{if(!(!l||k||!(l.turn()==="w"&&N==="white"||l.turn()==="b"&&N==="black")))if(g)if(x.includes(U))_N(g,U)?jn({from:g,to:U}):Hp(g,U);else{const fe=l.get(U);if(fe&&(fe.color==="w"&&N==="white"||fe.color==="b"&&N==="black")){w(U);const Te=l.moves({square:U,verbose:!0});v(Te.map(De=>De.to))}else w(null),v([])}else{const fe=l.get(U);if(fe&&(fe.color==="w"&&N==="white"||fe.color==="b"&&N==="black")){w(U);const Te=l.moves({square:U,verbose:!0});v(Te.map(De=>De.to))}}},[l,k,N,g,x]),Kp=()=>{he<=0||(I(!0),B.current=Date.now(),qe.current=!0,se(0))},Ll=()=>{if(te&&he>0&&(ve(U=>U-1),B.current)){const U=Date.now()-B.current;Q.current+=U}I(!1),B.current=null};if(Vp)return o.jsx(yA,{game:Vp,open:!0,onClose:()=>{Rl(null),Or(!0)},onAnalyze:U=>{ot(U),Rl(null),Or(!1),xe(!0)}});if(Xr)return o.jsx(gA,{onBack:()=>Or(!1),onViewGame:U=>{Rl(U)}});if($&&ke.length>0)return o.jsx(p0,{moveHistory:ke,playerColor:N,gameResult:k,botElo:gt,onClose:()=>{xe(!1),a(!0)}});if(i)return o.jsxs("div",{className:"h-full w-full flex flex-col items-center relative overflow-hidden bg-white","data-testid":"screen-title",children:[o.jsx("img",{src:_4,alt:"Blindfold Chess",className:"absolute inset-0 w-full h-full object-contain object-center z-0"}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-1 p-4 pt-2 w-full",children:[o.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-black text-center tracking-tight","data-testid":"text-title",children:"Blindfold Chess"}),o.jsx("p",{className:"text-black/70 text-center text-sm md:text-base",children:"Train your visualization and memory"})]}),o.jsx("div",{className:"flex-1"}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 p-4 pb-4 w-full max-w-sm",children:[o.jsxs(Y,{size:"lg",variant:"ghost",className:"w-full text-base py-4 bg-amber-400 hover:bg-amber-500 text-stone-900 border border-amber-500 dark:bg-black dark:hover:bg-black/90 dark:text-white dark:border-black",onClick:()=>r==null?void 0:r(),"data-testid":"button-train-now",children:[o.jsx(fw,{className:"mr-2 h-5 w-5"}),"Train Now"]}),o.jsxs(Y,{size:"lg",variant:"ghost",className:"w-full text-base py-4 bg-amber-400 hover:bg-amber-500 text-stone-900 border border-amber-500 dark:bg-black dark:hover:bg-black/90 dark:text-white dark:border-black",onClick:()=>a(!1),"data-testid":"button-start-now",children:[o.jsx(mv,{className:"mr-2 h-5 w-5"}),"Play Now"]})]})]});if(!u){const U=async()=>{const oe=hu(gt),fe={id:`elo_${gt}`,elo:gt,difficulty:`elo_${Math.round(gt/200)*200}`,depth:oe.depth,randomPercent:oe.randomPercent};try{await $e.impact({style:Be.Heavy})}catch{}_t(!0),setTimeout(()=>{Up(fe,en)},200)};return o.jsxs("div",{className:`h-full flex flex-col max-w-lg mx-auto px-4 py-2 transition-opacity duration-200 ${Ze?"opacity-0":"opacity-100"}`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>a(!0),"data-testid":"button-setup-back",children:o.jsx(bn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Game Set-up"})]}),o.jsxs(Ge,{className:"flex flex-col",children:[o.jsxs(ct,{className:"overflow-y-auto pt-4 pb-2 space-y-3",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Xt,{htmlFor:"blindfold-toggle",children:"Blindfold Challenge"}),o.jsx(Fn,{id:"blindfold-toggle",checked:V,onCheckedChange:W,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-blindfold"})]}),V&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Xt,{children:"Blindfold Difficulty"}),o.jsxs(cl,{value:q,onValueChange:oe=>E(oe),children:[o.jsx(zi,{"data-testid":"select-blindfold-difficulty",children:o.jsx(ul,{})}),o.jsxs(Vi,{children:[o.jsx(Qn,{value:"easy",children:"Easy (Unlimited Peeks)"}),o.jsx(Qn,{value:"medium",children:"Medium (20 Peeks)"}),o.jsx(Qn,{value:"hard",children:"Hard (10 Peeks)"}),o.jsx(Qn,{value:"expert",children:"Expert (5 Peeks)"}),o.jsx(Qn,{value:"master",children:"Master (2 Peeks)"}),o.jsx(Qn,{value:"grandmaster",children:"Grandmaster (No Peeks)"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Xt,{children:"Display Mode"}),o.jsxs(cl,{value:A,onValueChange:oe=>{const fe=oe;O(fe),fe==="no_board"&&(ae(!1),Nt(!0),El(!0))},children:[o.jsx(zi,{"data-testid":"select-blindfold-display",children:o.jsx(ul,{})}),o.jsxs(Vi,{children:[o.jsx(Qn,{value:"empty_board",children:"Empty Board"}),o.jsx(Qn,{value:"black_overlay",children:"Black Overlay"}),o.jsx(Qn,{value:"no_board",children:"No Board"})]})]})]}),A!=="no_board"&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Xt,{htmlFor:"coordinates-toggle",children:"Show Coordinates (1-8, a-h)"}),o.jsx(Fn,{id:"coordinates-toggle",checked:K,onCheckedChange:ae,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-coordinates"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Xt,{htmlFor:"reconstruction-toggle",className:"text-sm",children:"Board Reconstruction Challenge"}),o.jsx(Fn,{id:"reconstruction-toggle",checked:Ee.boardReconstructionEnabled,onCheckedChange:oe=>{const fe={...Ee,boardReconstructionEnabled:oe};je(fe),_h(fe)},className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-board-reconstruction"})]}),Ee.boardReconstructionEnabled&&o.jsx("p",{className:"text-xs text-muted-foreground",children:"After each game, reconstruct the final position to test your memory."}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(dn,{className:"h-4 w-4"}),o.jsx(Xt,{htmlFor:"voice-input",children:"Voice Input"})]}),o.jsx(Fn,{id:"voice-input",checked:Ue,onCheckedChange:Nt,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-voice-input"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Hu,{className:"h-4 w-4"}),o.jsx(Xt,{htmlFor:"voice-output",children:"Voice Output"})]}),o.jsx(Fn,{id:"voice-output",checked:Oe,onCheckedChange:El,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-voice-output"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex flex-col gap-0.5",children:[o.jsx(Xt,{htmlFor:"bot-thinking-toggle",className:"text-sm",children:"Bot Thinking Time"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Human-like delays"})]}),o.jsx(Fn,{id:"bot-thinking-toggle",checked:Ee.botThinkingTimeEnabled,onCheckedChange:oe=>{const fe={...Ee,botThinkingTimeEnabled:oe};je(fe),_h(fe)},className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-bot-thinking-time"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Xt,{children:"Time Control"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs(Y,{variant:"outline",size:"sm",className:z==="blitz"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>M("blitz"),"data-testid":"button-time-blitz",children:[o.jsx(wo,{className:"mr-1 h-3 w-3"}),"5 min"]}),o.jsxs(Y,{variant:"outline",size:"sm",className:z==="rapid"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>M("rapid"),"data-testid":"button-time-rapid",children:[o.jsx(wo,{className:"mr-1 h-3 w-3"}),"15 min"]}),o.jsxs(Y,{variant:"outline",size:"sm",className:z==="classical"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>M("classical"),"data-testid":"button-time-classical",children:[o.jsx(wo,{className:"mr-1 h-3 w-3"}),"30 min"]}),o.jsxs(Y,{variant:"outline",size:"sm",className:z==="practice"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>M("practice"),"data-testid":"button-time-practice",children:[o.jsx(b2,{className:"mr-1 h-3 w-3"}),"Practice"]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Xt,{children:"Bot Rating"}),o.jsxs("span",{className:"text-sm font-medium text-amber-600 dark:text-amber-400",children:[gt," - ",ER(gt)]})]}),o.jsx(uN,{value:[gt],onValueChange:oe=>$n(oe[0]),min:400,max:2600,step:50,className:"w-full","data-testid":"slider-bot-elo"}),o.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[o.jsx("span",{children:"400"}),o.jsx("span",{children:"1000"}),o.jsx("span",{children:"1600"}),o.jsx("span",{children:"2200"}),o.jsx("span",{children:"2600"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Xt,{children:"Your Color"}),o.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[o.jsxs(Y,{variant:"outline",size:"sm",className:en==="white"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>pr("white"),"data-testid":"button-color-white",children:[o.jsx("div",{className:"w-4 h-4 rounded-full bg-white border border-gray-400 mr-1"}),"White"]}),o.jsxs(Y,{variant:"outline",size:"sm",className:en==="black"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>pr("black"),"data-testid":"button-color-black",children:[o.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-900 mr-1"}),"Black"]}),o.jsxs(Y,{variant:"outline",size:"sm",className:en==="random"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>pr("random"),"data-testid":"button-color-random",children:[o.jsx(P2,{className:"w-4 h-4 mr-1"}),"Random"]})]})]})]}),o.jsx("div",{className:"p-4 pt-2 border-t",children:o.jsxs(Y,{size:"lg",className:"w-full bg-amber-400 hover:bg-amber-500 text-stone-900 border border-black",onClick:U,"data-testid":"button-start-game",children:[o.jsx(mv,{className:"mr-2 h-5 w-5"}),"Start Game"]})})]})]})}return o.jsxs("div",{className:"h-[100dvh] w-full flex flex-col overflow-hidden animate-in fade-in duration-300",children:[o.jsx(Fp,{}),ro&&Pl&&o.jsx("div",{className:"mb-3",children:o.jsx(z4,{actualFen:Pl,playerColor:N,onComplete:PN,onSkip:RN,onContinue:TN,onViewReport:()=>Yr(!0)})}),o.jsx(W4,{open:cd&&!$,gameResult:k,playerColor:N,clarityScore:nt.lastClarityScore,responseTimes:ia,squareInquiries:dd,reconstructionScore:fd,reconstructionVoicePurity:P,reconstructionEnabled:Ee.boardReconstructionEnabled,onRematch:()=>{if(Qe){const U=N==="white"?"black":"white";Yr(!1),xe(!1),_l(),setTimeout(()=>Up(Qe,U),100)}},onMainMenu:()=>{Yr(!1),xe(!1),_l(),aa()},onAnalyze:()=>{xe(!0)}}),$&&ke.length>0&&o.jsx(p0,{moveHistory:ke,playerColor:N,gameResult:k,botElo:gt,onClose:()=>xe(!1)}),!ro&&o.jsxs("main",{className:"absolute inset-0 flex flex-col p-2 md:p-4 max-w-4xl mx-auto w-full overflow-hidden",children:[o.jsx(Ge,{className:`flex-none lg:hidden ${l&&(N==="white"&&l.turn()==="b"||N==="black"&&l.turn()==="w")?"ring-2 ring-amber-400":""}`,children:o.jsx(ct,{className:"py-2 px-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${N==="white"?"bg-black":"bg-white border border-gray-400"}`}),o.jsx(fv,{className:"h-4 w-4 text-amber-500"}),o.jsx("span",{className:"font-medium text-sm",children:Qe?`${Qe.elo} Elo Bot`:"Bot"}),Kt&&o.jsx("span",{className:`text-xs animate-pulse ${hn?"text-amber-500 font-medium":"text-primary"}`,children:hn?"Thinking...":"thinking..."})]}),o.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(N==="white"&&l.turn()==="b"||N==="black"&&l.turn()==="w")?"text-foreground":"text-muted-foreground"}`,children:Al(N==="white"?F:R)})]})})}),o.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-2 min-h-0 overflow-hidden",children:[o.jsxs("div",{className:"flex-1 flex flex-col gap-2 min-h-0 overflow-hidden",children:[o.jsx(Ge,{className:`hidden lg:block flex-none ${l&&(N==="white"&&l.turn()==="b"||N==="black"&&l.turn()==="w")?"ring-2 ring-amber-400":""}`,children:o.jsx(ct,{className:"py-2 px-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${N==="white"?"bg-black":"bg-white border border-gray-400"}`}),o.jsx(fv,{className:"h-4 w-4 text-amber-500"}),o.jsx("span",{className:"font-medium text-sm","data-testid":"text-opponent-name",children:Qe?`${Qe.elo} Elo Bot`:"Bot"}),Kt&&o.jsx("span",{className:`text-xs animate-pulse ${hn?"text-amber-500 font-medium":"text-primary"}`,"data-testid":"text-bot-thinking",children:hn?"Thinking...":"thinking..."})]}),o.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(N==="white"&&l.turn()==="b"||N==="black"&&l.turn()==="w")?"text-foreground":"text-muted-foreground"}`,"data-testid":"text-opponent-time",children:Al(N==="white"?F:R)})]})})}),o.jsx("div",{className:"flex-1 flex items-center justify-center min-h-0 overflow-hidden",children:o.jsx(Ge,{className:`aspect-square max-h-full max-w-full md:max-w-[600px] p-1 md:p-2 ${V&&A==="no_board"&&!te?"invisible":""}`,children:o.jsxs("div",{className:"relative w-full h-full",children:[o.jsx(f_,{fen:m,orientation:N,showCoordinates:V&&K,highlightedSquares:x,lastMove:b||void 0,onSquareClick:AN,noCard:!0}),vs!==null&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 z-50","data-testid":"overlay-reconstruction-countdown","aria-live":"polite",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-8xl md:text-9xl font-bold text-amber-400 animate-pulse","data-testid":"text-countdown-number",children:vs}),o.jsx("div",{className:"text-lg md:text-xl text-white mt-4 font-medium",children:"Memorize the position..."})]})}),V&&!te&&A==="empty_board"&&o.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-visible",children:o.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((U,oe)=>{const fe=Math.floor(oe/8),Te=oe%8,De=(fe+Te)%2===0,Pe=N==="white"?["a","b","c","d","e","f","g","h"]:["h","g","f","e","d","c","b","a"],et=N==="white"?["8","7","6","5","4","3","2","1"]:["1","2","3","4","5","6","7","8"],re=Te===0,at=fe===7;return o.jsxs("div",{className:`relative ${De?"bg-amber-100":"bg-amber-700"}`,children:[K&&re&&o.jsx("span",{className:`absolute bottom-0.5 left-1 text-xs font-semibold select-none ${De?"text-amber-800/70":"text-amber-100/70"}`,children:et[fe]}),K&&at&&o.jsx("span",{className:`absolute bottom-0.5 right-1 text-xs font-semibold select-none ${De?"text-amber-800/70":"text-amber-100/70"}`,children:Pe[Te]})]},oe)})})}),V&&!te&&A==="black_overlay"&&o.jsxs("div",{className:"absolute inset-0 bg-black pointer-events-none overflow-visible",children:[o.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 8 8",preserveAspectRatio:"none",children:[Array.from({length:9}).map((U,oe)=>o.jsx("line",{x1:"0",y1:oe,x2:"8",y2:oe,stroke:"white",strokeWidth:"0.02"},`h-${oe}`)),Array.from({length:9}).map((U,oe)=>o.jsx("line",{x1:oe,y1:"0",x2:oe,y2:"8",stroke:"white",strokeWidth:"0.02"},`v-${oe}`))]}),K&&o.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((U,oe)=>{const fe=Math.floor(oe/8),Te=oe%8,De=N==="white"?["a","b","c","d","e","f","g","h"]:["h","g","f","e","d","c","b","a"],Pe=N==="white"?["8","7","6","5","4","3","2","1"]:["1","2","3","4","5","6","7","8"],et=Te===0,re=fe===7;return o.jsxs("div",{className:"relative",children:[et&&o.jsx("span",{className:"absolute bottom-0.5 left-1 text-xs font-semibold select-none text-white/70",children:Pe[fe]}),re&&o.jsx("span",{className:"absolute bottom-0.5 right-1 text-xs font-semibold select-none text-white/70",children:De[Te]})]},oe)})})]})]})})}),o.jsx(Ge,{className:`flex-none hidden lg:flex ${l&&(N==="white"&&l.turn()==="w"||N==="black"&&l.turn()==="b")?"ring-2 ring-amber-400":""}`,children:o.jsx(ct,{className:"py-2 px-4 w-full",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${N==="white"?"bg-white border border-gray-400":"bg-black"}`}),o.jsx("span",{className:"font-medium text-sm","data-testid":"text-player-name",children:"You"})]}),o.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(N==="white"&&l.turn()==="w"||N==="black"&&l.turn()==="b")?"text-foreground":"text-muted-foreground"}`,"data-testid":"text-player-time",children:Al(N==="white"?R:F)})]})})})]}),o.jsxs("div",{className:"flex flex-col gap-2 lg:w-48 flex-none",children:[V&&q!=="grandmaster"&&o.jsxs(Y,{variant:te?"default":"outline",className:`w-full ${te?"bg-amber-400 hover:bg-amber-500 text-black":""}`,onMouseDown:Kp,onMouseUp:Ll,onMouseLeave:Ll,onTouchStart:Kp,onTouchEnd:Ll,onTouchCancel:Ll,disabled:he<=0,"data-testid":"button-peek",children:[o.jsx(Uu,{className:"mr-2 h-4 w-4"}),te?"Peeking...":"Hold to Peek"]}),V&&o.jsx("div",{className:"text-center text-sm text-muted-foreground","data-testid":"text-peeks-remaining",children:isFinite(he)?`${he} peeks left`:"Unlimited peeks"}),V&&o.jsxs("div",{className:"text-center text-sm","data-testid":"text-peek-free-streak",children:[o.jsx("span",{className:"text-muted-foreground",children:"Streak: "}),o.jsx("span",{className:"font-semibold text-amber-500",children:G}),ce>0&&o.jsxs("span",{className:"text-muted-foreground/70 text-xs ml-1",children:["(best: ",ce,")"]})]}),Ue&&o.jsx("div",{className:"flex items-center justify-center gap-2 text-sm",children:ht?o.jsxs(o.Fragment,{children:[o.jsx(dn,{className:"h-4 w-4 text-amber-500 animate-pulse"}),o.jsx("span",{className:"text-amber-500",children:"Which piece?"})]}):ld?o.jsxs(o.Fragment,{children:[o.jsx(dn,{className:"h-4 w-4 text-primary animate-pulse"}),o.jsx("span",{className:"text-primary",children:"Listening..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(zs,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{className:"text-muted-foreground",children:"Voice paused"})]})}),L&&o.jsx("div",{className:`text-xs text-center ${ht?"text-amber-500 font-medium":"text-muted-foreground"}`,children:ht?L:`Heard: "${L}"`}),o.jsx(Ge,{className:`lg:hidden ${l&&(N==="white"&&l.turn()==="w"||N==="black"&&l.turn()==="b")?"ring-2 ring-amber-400":""}`,children:o.jsx(ct,{className:"py-2 px-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${N==="white"?"bg-white border border-gray-400":"bg-black"}`}),o.jsx("span",{className:"font-medium text-sm",children:"You"})]}),o.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(N==="white"&&l.turn()==="w"||N==="black"&&l.turn()==="b")?"text-foreground":"text-muted-foreground"}`,children:Al(N==="white"?R:F)})]})})}),o.jsx(Ge,{className:"flex-none",children:o.jsx(ct,{className:"p-2",children:o.jsx(Dp,{className:"h-16 lg:h-48",children:o.jsx("div",{className:"text-xs font-mono space-y-1",children:y.map((U,oe)=>o.jsxs("span",{className:oe%2===0?"font-semibold":"",children:[oe%2===0&&o.jsxs("span",{className:"text-muted-foreground",children:[Math.floor(oe/2)+1,". "]}),U," "]},oe))})})})}),!k&&o.jsxs(Y,{variant:"outline",size:"sm",className:"w-full text-red-600 border-red-300 hover:bg-red-50",onClick:()=>or(!0),"data-testid":"button-resign",children:[o.jsx(Bo,{className:"mr-2 h-4 w-4"}),"Resign"]})]})]})]}),o.jsx(m_,{open:!!ps,color:N,onSelect:U=>{ps&&(Hp(ps.from,ps.to,U),jn(null))}}),o.jsx(Kr,{open:no,onOpenChange:or,children:o.jsxs(Er,{children:[o.jsxs(Pr,{children:[o.jsx(Rr,{children:"Resign Game?"}),o.jsx(Mr,{children:"Are you sure you want to resign? This will count as a loss."})]}),o.jsxs(Tr,{children:[o.jsx(Ar,{"data-testid":"button-resign-cancel",children:"Cancel"}),o.jsx(_r,{className:"bg-red-600 hover:bg-red-700",onClick:()=>{Ot(N==="white"?"black_win":"white_win"),or(!1)},"data-testid":"button-resign-confirm",children:"Resign"})]})]})}),o.jsx(Kr,{open:Ne,onOpenChange:zo,children:o.jsxs(Er,{children:[o.jsxs(Pr,{children:[o.jsx(Rr,{children:"Resume Game?"}),o.jsxs(Mr,{children:["You have an unfinished game",gs?` (${gs.playerColor==="white"?"White":"Black"} vs ${gs.botElo} Elo)`:"",". Would you like to continue?"]})]}),o.jsxs(Tr,{children:[o.jsx(Ar,{"data-testid":"button-resume-cancel",onClick:()=>{fc(),oa(null),zo(!1)},children:"New Game"}),o.jsx(_r,{onClick:()=>{gs&&(MN(gs),oa(null)),zo(!1)},"data-testid":"button-resume-confirm",children:"Resume"})]})]})})]})}const EA=["a","b","c","d","e","f","g","h"],PA=["1","2","3","4","5","6","7","8"];function bu(e){const t=e.charCodeAt(0)-97;return(parseInt(e[1])-1)*8+t}function Hh(e){const t=EA[e%8],n=PA[Math.floor(e/8)];return`${t}${n}`}const TA=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];function RA(e,t){const n=bu(e),r=bu(t),s=[{index:n,path:[n]}],i=new Set([n]);for(;s.length>0;){const{index:a,path:l}=s.shift();if(a===r)return l.map(Hh);const c=Math.floor(a/8),u=a%8;for(const[f,m]of TA){const h=c+f,y=u+m;if(h>=0&&h<8&&y>=0&&y<8){const p=h*8+y;i.has(p)||(i.add(p),s.push({index:p,path:[...l,p]}))}}}return null}function wf(e=3,t=4){let n="",r="",s=null;for(;!s||s.length-1<e||s.length-1>t;){const i=Math.floor(Math.random()*64),a=Math.floor(Math.random()*64);n=Hh(i),r=Hh(a),n!==r&&(s=RA(n,r))}return{start:n,end:r,minPath:s}}function MA(e,t){if(!e||!t)return!1;const n=bu(e),r=bu(t),s=Math.floor(n/8),i=n%8,a=Math.floor(r/8),l=r%8,c=Math.abs(s-a),u=Math.abs(i-l);return c===2&&u===1||c===1&&u===2}const _A=["a","b","c","d","e","f","g","h"],AA=["1","2","3","4","5","6","7","8"];function Na(){return _A[Math.floor(Math.random()*8)]+AA[Math.floor(Math.random()*8)]}function LA(e,t){const n=e.charCodeAt(0),r=parseInt(e[1]),s=t.charCodeAt(0),i=parseInt(t[1]);return Math.abs(n-s)<=1&&Math.abs(r-i)<=1}function IA(e){const t=new An;let n=!1,r=0;for(;!n&&r<100;){t.clear(),r++;const i=Na();let a=Na();for(;i===a;)a=Na();if(LA(i,a))continue;t.put({type:"k",color:"w"},i),t.put({type:"k",color:"b"},a);const l=[i,a],c=m=>{let h=Na();for(;l.includes(h);)h=Na();t.put({type:m,color:"w"},h),l.push(h)};e==="KQ_vs_K"?c("q"):e==="KR_vs_K"&&c("r");const u=t.fen(),f=new An(u);f.isCheckmate()||f.isStalemate()||f.isDraw()||(n=!0)}const s={KQ_vs_K:"King & Queen vs King",KR_vs_K:"King & Rook vs King"};return{fen:t.fen(),type:e,description:s[e]}}function $A(){return[{value:"KQ_vs_K",label:"King & Queen vs King"},{value:"KR_vs_K",label:"King & Rook vs King"}]}function OA(e){return e.length}const v0=[{id:"scholars_mate",white:"Training",black:"Puzzle",description:"Scholar's Mate Defense",pgnMoves:["e4","e5","Bc4","Nc6","Qh5","g6","Qf3","Nf6","Qb3","Nd4"],solution:"Qxf7#"},{id:"legal_trap",white:"Training",black:"Puzzle",description:"Legal's Mate Trap",pgnMoves:["e4","e5","Nf3","d6","Bc4","Bg4","Nc3","g6","Nxe5","Bxd1","Bxf7+","Ke7"],solution:"Nd5#"},{id:"blackburne_shilling",white:"Training",black:"Puzzle",description:"Blackburne Shilling Gambit",pgnMoves:["e4","e5","Nf3","Nc6","Bc4","Nd4","Nxe5","Qg5","Nxf7","Qxg2","Rf1","Qxe4+","Be2","Nf3+"],solution:"Kf1"},{id:"fried_liver",white:"Training",black:"Puzzle",description:"Fried Liver Attack",pgnMoves:["e4","e5","Nf3","Nc6","Bc4","Nf6","Ng5","d5","exd5","Nxd5","Nxf7","Kxf7","Qf3+","Ke6","Nc3","Nb4"],solution:"Qe4+"},{id:"opera_game",white:"Paul Morphy",black:"Duke of Brunswick",description:"The Opera Game - A brilliant attack",pgnMoves:["e4","e5","Nf3","d6","d4","Bg4","dxe5","Bxf3","Qxf3","dxe5","Bc4","Nf6","Qb3","Qe7","Nc3","c6","Bg5","b5","Nxb5","cxb5","Bxb5+","Nbd7","O-O-O","Rd8","Rxd7","Rxd7","Rd1","Qe6","Bxd7+","Nxd7"],solution:"Qb8+"},{id:"short_trap",white:"Training",black:"Puzzle",description:"A quick opening trap",pgnMoves:["e4","e5","Nf3","Nc6","Bc4","Bc5","c3","Nf6","d4","exd4","cxd4","Bb4+","Nc3","Nxe4","O-O","Nxc3","bxc3","Bxc3","Ba3","Bxa1","Re1+","Ne7"],solution:"Rxe7+"},{id:"immortal_game",white:"Adolf Anderssen",black:"Lionel Kieseritzky",description:"The Immortal Game",pgnMoves:["e4","e5","f4","exf4","Bc4","Qh4+","Kf1","b5","Bxb5","Nf6","Nf3","Qh6","d3","Nh5","Nh4","Qg5","Nf5","c6","g4","Nf6","Rg1","cxb5","h4","Qg6","h5","Qg5","Qf3","Ng8","Bxf4","Qf6","Nc3","Bc5","Nd5","Qxb2","Bd6","Bxg1","e5","Qxa1+","Ke2","Na6","Nxg7+","Kd8","Qf6+","Nxf6","Be7+"],solution:"Kc7"},{id:"evergreen_game",white:"Adolf Anderssen",black:"Jean Dufresne",description:"The Evergreen Game",pgnMoves:["e4","e5","Nf3","Nc6","Bc4","Bc5","b4","Bxb4","c3","Ba5","d4","exd4","O-O","d3","Qb3","Qf6","e5","Qg6","Re1","Nge7","Ba3","b5","Qxb5","Rb8","Qa4","Bb6","Nbd2","Bb7","Ne4","Qf5","Bxd3","Qh5","Nf6+","gxf6","exf6","Rg8","Rad1","Qxf3","Rxe7+","Nxe7","Qxd7+","Kxd7","Bf5+","Ke8","Bd7+","Kf8"],solution:"Bxe7#"},{id:"game_of_century",white:"Donald Byrne",black:"Bobby Fischer",description:"The Game of the Century",pgnMoves:["Nf3","Nf6","c4","g6","Nc3","Bg7","d4","O-O","Bf4","d5","Qb3","dxc4","Qxc4","c6","e4","Nbd7","Rd1","Nb6","Qc5","Bg4","Bg5","Na4","Qa3","Nxc3","bxc3","Nxe4","Bxe7","Qb6","Bc4","Nxc3","Bc5","Rfe8+","Kf1","Be6","Bxb6","Bxc4+","Kg1","Ne2+","Kf1","Nxd4+","Kg1","Ne2+","Kf1","Nc3+","Kg1","axb6","Qb4","Ra4","Qxb6","Nxd1","h3","Rxa2","Kh2","Nxf2","Re1","Rxe1","Qd8+","Bf8","Nxe1","Bd5","Nf3","Ne4","Qb8","b5","h4","h5","Ne5","Kg7"],solution:"Kg1"},{id:"kasparov_topalov",white:"Garry Kasparov",black:"Veselin Topalov",description:"Kasparov's Immortal",pgnMoves:["e4","d6","d4","Nf6","Nc3","g6","Be3","Bg7","Qd2","c6","f3","b5","Nge2","Nbd7","Bh6","Bxh6","Qxh6","Bb7","a3","e5","O-O-O","Qe7","Kb1","a6","Nc1","O-O-O","Nb3","exd4","Rxd4","c5","Rd1","Nb6","g3","Kb8","Na5","Ba8","Bh3","d5","Qf4+","Ka7","Rhe1","d4","Nd5","Nbxd5","exd5","Qd6","Rxd4","cxd4","Re7+","Kb6","Qxd4+","Kxa5","b4+","Ka4","Qc3","Qxd5","Ra7","Bb7","Rxb7","Qc4","Qxf6","Kxa3","Qxa6+","Kxb4","c3+","Kxc3","Qa1+","Kd2","Qb2+","Kd1","Bf1","Rd2","Rd7","Rxd7","Bxc4","bxc4","Qxh8","Rd3"],solution:"Qa8"},{id:"deep_blue_game6",white:"Deep Blue",black:"Garry Kasparov",description:"Deep Blue vs Kasparov Game 6",pgnMoves:["e4","c6","d4","d5","Nc3","dxe4","Nxe4","Nd7","Ng5","Ngf6","Bd3","e6","N1f3","h6","Nxe6","Qe7","O-O","fxe6","Bg6+","Kd8","Bf4","b5","a4","Bb7","Re1","Nd5","Bg3","Kc8","axb5","cxb5","Qd3","Bc6","Bf5","exf5","Rxe7","Bxe7"],solution:"c4"},{id:"tal_larsen",white:"Mikhail Tal",black:"Bent Larsen",description:"Tal's Brilliant Exchange Sacrifice",pgnMoves:["e4","c5","Nf3","Nc6","d4","cxd4","Nxd4","e6","Nc3","d6","Be3","Nf6","f4","Be7","Qf3","O-O","O-O-O","Qc7","Nb3","a6","g4","b5","g5","Nd7","Bd3","Nb6","Qh3","b4","Na4","Nxa4","f5","e5","f6","gxf6","gxf6","Bxf6","Bxh7+","Kxh7","Qh5+","Kg7","Rdg1+","Kf8","Bh6+","Bg7","Rxg7","Qb6","Nd4","Qxd4","Rxf7+","Kxf7","Qh7+","Ke8","Re1","Qf6","Qxc2","Ra7","Qg6+","Rf7","Qg8+","Rf8","Bg7","Qf1","Rxf1","Rxg8"],solution:"Qe6+"}];function x0(){return[{value:"10-20",label:"10-20 moves",minMoves:10,maxMoves:20},{value:"20-30",label:"20-30 moves",minMoves:20,maxMoves:30},{value:"30-40",label:"30-40 moves",minMoves:30,maxMoves:40},{value:"40-50",label:"40-50 moves",minMoves:40,maxMoves:50},{value:"50-60",label:"50-60 moves",minMoves:50,maxMoves:60},{value:"60-70",label:"60-70 moves",minMoves:60,maxMoves:70}]}function DA(e,t){const n=v0.filter(i=>{const a=OA(i.pgnMoves);return a>=e&&a<t});if(n.length>0)return n[Math.floor(Math.random()*n.length)];const s=[...v0].sort((i,a)=>a.pgnMoves.length-i.pgnMoves.length)[0];return{...s,description:`${s.description} (Best available for ${e}-${t} moves)`}}const os=Sn.isNativePlatform();async function pt(e){if(os)try{await ie.speakAndListen({text:e})}catch(t){console.error("[Training] speakAndListen error:",t)}else await Pt(e)}const ur=["a","b","c","d","e","f","g","h"],Ui=["1","2","3","4","5","6","7","8"];function Kh(e,t){return`${e==="a"?"ay":e} ${t}`}function dl(e,t){return(e+t)%2===0}function vo(){const e=Math.floor(Math.random()*8),t=Math.floor(Math.random()*8);return{file:ur[e],rank:Ui[t],fileIndex:e,rankIndex:t}}function wn(e){const t=Math.floor(e/1e3),n=Math.floor(e%1e3/100);return`${t}.${n}s`}function BA({onBack:e,onStateChange:t,returnToMenuRef:n}){const[r,s]=d.useState("menu"),[i,a]=d.useState(null),[l,c]=d.useState("ready");d.useEffect(()=>{pu().then(a)},[r]),d.useEffect(()=>{r==="menu"?t==null||t("menu"):t==null||t(l)},[r,l,t]),d.useEffect(()=>(n&&(n.current=()=>{s("menu"),c("ready")}),()=>{n&&(n.current=null)}),[n]);const u=async(f,m,h=0)=>{await UR(f,m,h),a(await pu()),window.dispatchEvent(new CustomEvent("trainingStatsUpdated"))};return r==="color_blitz"?o.jsx(FA,{onBack:()=>s("menu"),onComplete:(f,m)=>u("color_blitz",f,m),stats:i,onGameStateChange:c}):r==="coordinate_sniper"?o.jsx(zA,{onBack:()=>s("menu"),onComplete:(f,m)=>u("coordinate_sniper",f,m),stats:i,onGameStateChange:c}):r==="voice_move_master"?o.jsx(VA,{onBack:()=>s("menu"),onComplete:(f,m)=>u("voice_move_master",f,m),stats:i,onGameStateChange:c}):r==="knights_path"?o.jsx(XA,{onBack:()=>s("menu"),onComplete:f=>u("knights_path",f),stats:i,onGameStateChange:c}):r==="endgame_drills"?o.jsx(ZA,{onBack:()=>s("menu"),onComplete:f=>u("endgame_drills",f),stats:i,onGameStateChange:c}):r==="blindfold_marathon"?o.jsx(JA,{onBack:()=>s("menu"),onComplete:f=>u("blindfold_marathon",f),stats:i,onGameStateChange:c}):o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-training-back",children:o.jsx(bn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Training Gym"})]}),o.jsxs("div",{className:"flex flex-col gap-2 flex-1",children:[o.jsx(Ge,{className:"hover-elevate cursor-pointer flex-1",onClick:()=>s("voice_move_master"),"data-testid":"card-voice-move-master",children:o.jsx(jt,{className:"h-full py-2 px-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-purple-500/20",children:o.jsx(Hu,{className:"h-5 w-5 text-purple-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ct,{className:"text-base",children:"Voice Move Master"}),i!==null&&i.voiceMoveMasterBest!==null&&o.jsx(it,{variant:"secondary",className:"text-xs",children:i.voiceMoveMasterBest})]}),o.jsx(Lt,{className:"text-xs mt-0.5",children:"Announce chess moves by voice in 60 seconds"})]})]})})}),o.jsx(Ge,{className:"hover-elevate cursor-pointer flex-1",onClick:()=>s("color_blitz"),"data-testid":"card-color-blitz",children:o.jsx(jt,{className:"h-full py-2 px-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:o.jsx(Ym,{className:"h-5 w-5 text-amber-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ct,{className:"text-base",children:"Color Blitz"}),i!==null&&i.colorBlitzBest!==null&&o.jsx(it,{variant:"secondary",className:"text-xs",children:i.colorBlitzBest})]}),o.jsx(Lt,{className:"text-xs mt-0.5",children:"Name square colors as fast as you can"})]})]})})}),o.jsx(Ge,{className:"hover-elevate cursor-pointer flex-1",onClick:()=>s("coordinate_sniper"),"data-testid":"card-coordinate-sniper",children:o.jsx(jt,{className:"h-full py-2 px-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:o.jsx(wi,{className:"h-5 w-5 text-blue-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ct,{className:"text-base",children:"Coordinate Sniper"}),i!==null&&i.coordinateSniperBest!==null&&o.jsx(it,{variant:"secondary",className:"text-xs",children:wn(i.coordinateSniperBest)})]}),o.jsx(Lt,{className:"text-xs mt-0.5",children:"Find 10 squares as fast as possible"})]})]})})}),o.jsx(Ge,{className:"hover-elevate cursor-pointer flex-1",onClick:()=>s("knights_path"),"data-testid":"card-knights-path",children:o.jsx(jt,{className:"h-full py-2 px-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-green-500/20",children:o.jsx(qu,{className:"h-5 w-5 text-green-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ct,{className:"text-base",children:"Knight's Path"}),i!==null&&i.knightsPathBest!==null&&o.jsx(it,{variant:"secondary",className:"text-xs",children:wn(i.knightsPathBest)})]}),o.jsx(Lt,{className:"text-xs mt-0.5",children:"Navigate the knight to the target square"})]})]})})}),o.jsx(Ge,{className:"hover-elevate cursor-pointer flex-1",onClick:()=>s("endgame_drills"),"data-testid":"card-endgame-drills",children:o.jsx(jt,{className:"h-full py-2 px-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-orange-500/20",children:o.jsx(Wu,{className:"h-5 w-5 text-orange-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ct,{className:"text-base",children:"Endgame Drills"}),i!==null&&i.endgameDrillsBest!==null&&o.jsx(it,{variant:"secondary",className:"text-xs",children:wn(i.endgameDrillsBest)})]}),o.jsx(Lt,{className:"text-xs mt-0.5",children:"Checkmate with K+Q or K+R vs King blindfolded"})]})]})})}),o.jsx(Ge,{className:"hover-elevate cursor-pointer flex-1",onClick:()=>s("blindfold_marathon"),"data-testid":"card-blindfold-marathon",children:o.jsx(jt,{className:"h-full py-2 px-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-red-500/20",children:o.jsx(Vu,{className:"h-5 w-5 text-red-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ct,{className:"text-base",children:"Blindfold Marathon"}),i!==null&&i.blindfoldMarathonBest!==null&&o.jsx(it,{variant:"secondary",className:"text-xs",children:wn(i.blindfoldMarathonBest)})]}),o.jsx(Lt,{className:"text-xs mt-0.5",children:"Visualize famous games and find the winning move"})]})]})})})]})]})}function FA({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,i]=d.useState("ready"),[a,l]=d.useState(()=>vo()),[c,u]=d.useState(0),[f,m]=d.useState(0),[h,y]=d.useState(0),[p,g]=d.useState(60),[w,x]=d.useState(!1),[v,b]=d.useState(!1),[S,N]=d.useState(!1),[j,k]=d.useState(!1),[C,R]=d.useState("challenge"),T=d.useRef(null),F=n!==null&&n.colorBlitzBest!==null&&c>n.colorBlitzBest,_=d.useRef(null),z=d.useRef(!1),M=d.useRef(null),V=d.useRef(!1),W=async()=>{if(V.current){try{await ie.stopSession()}catch{}V.current=!1}if(M.current){try{await M.current.remove()}catch{}M.current=null}N(!1)},q=()=>{T.current&&clearInterval(T.current),W(),e()},E=async(K=!1)=>{k(K),i("playing"),u(0),m(0),y(0),g(60),z.current=!1;const ae=vo();l(ae),setTimeout(async()=>{w&&(await pt(Kh(ae.file,ae.rank)),z.current=!0)},300)},A=()=>{T.current&&clearInterval(T.current),W(),e()};d.useEffect(()=>{if(!os||!w||s!=="playing")return;let K=!1;return(async()=>{try{if(!await Sl()||K){console.warn("[ColorBlitz] Voice not ready or cancelled");return}if(console.log("[ColorBlitz] Starting voice session..."),M.current&&await M.current.remove(),K||(M.current=await ie.addListener("onSpeechResult",ve=>{var Q,G;const te=ve.text.toLowerCase();console.log("[ColorBlitz] Voice:",te),J1(te);const I=["light","white","lie","lye","lite","lied","liked","right","bright","lyte","lit","like","life"],B=["dark","black","bark","duck","dock","doc","dork","dog","dart"];I.some(se=>te.includes(se))?(Q=_.current)==null||Q.call(_,"light"):B.some(se=>te.includes(se))&&((G=_.current)==null||G.call(_,"dark")),ie.startListening().catch(()=>{})}),K))return;await ie.startSession(),X1(!0),await ie.startListening(),Z1(!0),V.current=!0,N(!0),console.log("[ColorBlitz] Native voice session started")}catch(he){console.error("[ColorBlitz] Native voice setup failed:",he),du(String(he))}})(),()=>{K=!0,W()}},[w,s]),d.useEffect(()=>(s==="playing"&&!j&&(T.current=setInterval(()=>{g(K=>K<=1?(i("finished"),0):K-1)},1e3)),()=>{T.current&&clearInterval(T.current)}),[s,j]),d.useEffect(()=>{s==="finished"&&!j&&t(c,h)},[s,c,h,t,j]),d.useEffect(()=>{r==null||r(s)},[s,r]);const O=d.useCallback(K=>{if(s!=="playing")return;if((K==="white"||K==="light"?"light":"dark")==="dark"===dl(a.fileIndex,a.rankIndex)){u(te=>te+1),m(te=>{const I=te+1;return y(B=>Math.max(B,I)),$e.notification({type:Wi.Success}).catch(()=>{}),I});const ve=vo();l(ve),w&&setTimeout(async()=>{await pt(Kh(ve.file,ve.rank))},300)}else m(0),$e.impact({style:Be.Heavy}).catch(()=>{}),setTimeout(()=>{$e.impact({style:Be.Heavy}).catch(()=>{})},100),w&&setTimeout(async()=>{await pt("Wrong")},300)},[s,a,w]);return d.useEffect(()=>{_.current=O},[O]),s==="ready"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:q,"data-testid":"button-colorblitz-back",children:o.jsx(bn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Color Blitz"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(Ym,{className:"h-12 w-12 text-amber-500 mx-auto"}),o.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"})]}),o.jsx(ea,{value:C,onValueChange:K=>R(K),className:"w-full max-w-xs",children:o.jsxs(Fo,{className:"grid w-full grid-cols-2",children:[o.jsx(Rn,{value:"challenge","data-testid":"tab-colorblitz-challenge",children:"1 Minute Challenge"}),o.jsx(Rn,{value:"practice","data-testid":"tab-colorblitz-practice",children:"Practice"})]})}),o.jsx("p",{className:"text-muted-foreground text-center",children:C==="challenge"?"Name as many square colors as you can in 60 seconds!":"Practice at your own pace with unlimited time."}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Fn,{id:"voice-mode",checked:w,onCheckedChange:x,"data-testid":"switch-voice-mode"}),o.jsxs(Xt,{htmlFor:"voice-mode",className:"flex items-center gap-2",children:[w?o.jsx(dn,{className:"h-4 w-4"}):o.jsx(zs,{className:"h-4 w-4"}),"Voice Mode"]})]}),C==="challenge"&&n!==null&&n.colorBlitzBest!==null&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",o.jsx("span",{className:"font-semibold text-amber-500",children:n.colorBlitzBest})," correct"]}),o.jsx(Y,{size:"lg",onClick:()=>E(C==="practice"),"data-testid":"button-start-colorblitz",children:"Start"})]})]}):s==="finished"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:q,"data-testid":"button-colorblitz-back-finished",children:o.jsx(bn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Color Blitz"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsx(Jn,{className:`h-16 w-16 ${F?"text-amber-500":"text-muted-foreground"}`}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h2",{className:"text-4xl font-bold",children:c}),o.jsx("p",{className:"text-lg text-muted-foreground",children:"squares correct"}),F&&o.jsx(it,{className:"bg-amber-500 text-white",children:"New Personal Best!"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Y,{variant:"outline",onClick:q,"data-testid":"button-colorblitz-menu",children:"Menu"}),o.jsx(Y,{onClick:()=>E(!1),"data-testid":"button-colorblitz-retry",children:"Play Again"})]})]})]}):o.jsxs(o.Fragment,{children:[os&&o.jsx(Fp,{}),o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[j?o.jsx(it,{variant:"outline",children:"Practice"}):o.jsxs("span",{className:"text-2xl font-bold tabular-nums",children:[p,"s"]}),w&&S&&o.jsx(dn,{className:"h-4 w-4 text-red-500 animate-pulse"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-lg font-semibold",children:c}),f>=5&&o.jsxs(it,{variant:"outline",className:"text-amber-500 border-amber-500",children:[f," streak"]})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[o.jsx("div",{className:"text-center",children:o.jsxs("p",{className:"text-6xl font-bold font-mono tracking-wider",children:[a.file,a.rank]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full",children:[o.jsx(Y,{size:"lg",className:"h-20 text-xl bg-amber-100 hover:bg-amber-200 text-amber-900 dark:bg-amber-100 dark:hover:bg-amber-200",onClick:()=>O("light"),"data-testid":"button-answer-light",children:"Light"}),o.jsx(Y,{size:"lg",className:"h-20 text-xl bg-amber-900 hover:bg-amber-800 text-amber-100",onClick:()=>O("dark"),"data-testid":"button-answer-dark",children:"Dark"})]}),o.jsxs(Y,{variant:"outline",onClick:()=>b(!0),className:"mt-4","data-testid":"button-colorblitz-resign",children:[o.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Resign"]})]})]}),o.jsx(Kr,{open:v,onOpenChange:b,children:o.jsxs(Er,{children:[o.jsxs(Pr,{children:[o.jsx(Rr,{children:"Quit Game?"}),o.jsxs(Mr,{children:["Your current score of ",c," will not be saved."]})]}),o.jsxs(Tr,{children:[o.jsx(Ar,{"data-testid":"button-colorblitz-resign-cancel",children:"Continue"}),o.jsx(_r,{onClick:A,"data-testid":"button-colorblitz-resign-confirm",children:"Quit"})]})]})})]})}function zA({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,i]=d.useState("ready"),[a,l]=d.useState(()=>vo()),[c,u]=d.useState(0),[f,m]=d.useState(0),[h,y]=d.useState(0),[p,g]=d.useState(0),[w,x]=d.useState(0),[v,b]=d.useState(null),[S,N]=d.useState(null),[j,k]=d.useState(!1),[C,R]=d.useState(!1),[T,F]=d.useState("challenge"),[_,z]=d.useState(!1),M=10,V=n!==null&&n.coordinateSniperBest!==null&&w<n.coordinateSniperBest&&w>0,W=()=>{e()},q=(A=!1)=>{R(A),i("playing"),u(0),m(0),y(0),g(Date.now()),x(0),b(null),N(null);const O=vo();l(O);const K=O.file==="a"?"ay":O.file;pt(`Find ${K} ${O.rank}`)};d.useEffect(()=>{let A=null;return s==="playing"&&(A=setInterval(()=>{x(Date.now()-p)},100)),()=>{A&&clearInterval(A)}},[s,p]),d.useEffect(()=>{r==null||r(s)},[s,r]);const E=d.useCallback((A,O)=>{if(s!=="playing")return;const K=`${a.file}${a.rank}`,ae=`${A}${O}`;if(ae===K){$e.impact({style:Be.Light}).catch(()=>{}),b({square:ae,correct:!0});const he=c+1;u(he);const ve=f+1;m(ve);const te=Math.max(h,ve);if(y(te),he>=M&&!C){const I=Date.now()-p;x(I),i("finished"),t(I,te),pt("Complete!")}else if(he>=M&&C){u(0),m(0),y(0),setTimeout(()=>{b(null);const I=vo();l(I);const B=I.file==="a"?"ay":I.file;pt(`Great! Find ${B} ${I.rank}`)},200);return}else setTimeout(()=>{b(null);const I=vo();l(I);const B=I.file==="a"?"ay":I.file;pt(`Find ${B} ${I.rank}`)},200)}else $e.impact({style:Be.Heavy}).catch(()=>{}),$e.impact({style:Be.Heavy}).catch(()=>{}),b({square:ae,correct:!1}),N(K),m(0),pt(`No, that's ${Kh(A,O)}`),setTimeout(()=>{b(null),N(null)},1e3)},[s,a,c,f,h,p,t]);return s==="ready"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-sniper-back",children:o.jsx(bn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Coordinate Sniper"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(wi,{className:"h-12 w-12 text-blue-500 mx-auto"}),o.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"})]}),o.jsx(ea,{value:T,onValueChange:A=>F(A),className:"w-full max-w-xs",children:o.jsxs(Fo,{className:"grid w-full grid-cols-2",children:[o.jsx(Rn,{value:"challenge","data-testid":"tab-sniper-challenge",children:"10 Square Race"}),o.jsx(Rn,{value:"practice","data-testid":"tab-sniper-practice",children:"Practice"})]})}),o.jsx("p",{className:"text-muted-foreground text-center",children:T==="challenge"?"Find 10 squares as fast as you can!":"Practice finding squares with no time pressure."}),o.jsxs("div",{className:"flex items-center gap-3 justify-center",children:[o.jsx(Xt,{htmlFor:"board-flip",className:"text-sm text-muted-foreground",children:"Play as Black"}),o.jsx(Fn,{id:"board-flip",checked:_,onCheckedChange:z,"data-testid":"switch-board-flip"})]}),T==="challenge"&&n!==null&&n.coordinateSniperBest!==null&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",o.jsx("span",{className:"font-semibold text-blue-500",children:wn(n.coordinateSniperBest)})]}),o.jsx(Y,{size:"lg",onClick:()=>q(T==="practice"),"data-testid":"button-start-sniper",children:"Start"})]})]}):s==="finished"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-sniper-back-finished",children:o.jsx(bn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Coordinate Sniper"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsx(Jn,{className:`h-16 w-16 ${V?"text-blue-500":"text-muted-foreground"}`}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h2",{className:"text-4xl font-bold",children:wn(w)}),o.jsx("p",{className:"text-lg text-muted-foreground",children:"to find 10 squares"}),V&&o.jsx(it,{className:"bg-blue-500 text-white",children:"New Personal Best!"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Y,{variant:"outline",onClick:e,"data-testid":"button-sniper-menu",children:"Menu"}),o.jsx(Y,{onClick:()=>q(!1),"data-testid":"button-sniper-retry",children:"Play Again"})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("p",{className:"text-lg font-semibold",children:["Find: ",o.jsxs("span",{className:"text-2xl font-mono",children:[a.file,a.rank]})]}),o.jsx("div",{className:"flex items-center gap-2",children:C?o.jsx(it,{variant:"outline",children:"Practice"}):o.jsx("span",{className:"text-lg font-mono tabular-nums",children:wn(w)})})]}),!C&&o.jsx(qs,{value:c/M*100,className:"mb-2"}),o.jsx("p",{className:"text-sm text-muted-foreground text-center mb-2",children:C?`${c} found`:`${c}/${M} found`}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[o.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:(_?["1","2","3","4","5","6","7","8"]:["8","7","6","5","4","3","2","1"]).map((A,O)=>(_?[...ur].reverse():ur).map((K,ae)=>{const he=`${K}${A}`,ve=ur.indexOf(K),te=Ui.indexOf(A),I=dl(ve,te),B=(v==null?void 0:v.square)===he,Q=S===he;let G=I?"bg-amber-700":"bg-amber-100";return B?G=v.correct?"bg-green-500":"bg-red-500":Q&&(G="bg-green-500"),o.jsx("button",{className:`aspect-square ${G} transition-colors duration-100`,onClick:()=>E(K,A),"data-testid":`square-${he}`},he)}))}),o.jsxs(Y,{variant:"outline",onClick:()=>k(!0),className:"mt-4","data-testid":"button-sniper-resign",children:[o.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Resign"]})]})]}),o.jsx(Kr,{open:j,onOpenChange:k,children:o.jsxs(Er,{children:[o.jsxs(Pr,{children:[o.jsx(Rr,{children:"Quit Game?"}),o.jsxs(Mr,{children:["Your progress (",c,"/",M," found) will not be saved."]})]}),o.jsxs(Tr,{children:[o.jsx(Ar,{"data-testid":"button-sniper-resign-cancel",children:"Continue"}),o.jsx(_r,{onClick:W,"data-testid":"button-sniper-resign-confirm",children:"Quit"})]})]})})]})}const Lc={p:"pawn",n:"knight",b:"bishop",r:"rook",q:"queen",k:"king"};function Gh(){const e=new An,t=5+Math.floor(Math.random()*11);for(let s=0;s<t;s++){const i=e.moves({verbose:!0});if(i.length===0)break;const a=i[Math.floor(Math.random()*i.length)];e.move(a)}const n=e.moves({verbose:!0});if(n.length===0)return Gh();const r=n[Math.floor(Math.random()*n.length)];return{chess:e,move:{from:r.from,to:r.to,san:r.san,piece:r.piece,captured:r.captured}}}function VA({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,i]=d.useState("ready"),[a,l]=d.useState(null),[c,u]=d.useState(0),[f,m]=d.useState(0),[h,y]=d.useState(0),[p,g]=d.useState(60),[w,x]=d.useState(!1),[v,b]=d.useState(!1),[S,N]=d.useState(!1),[j,k]=d.useState(null),[C,R]=d.useState(""),[T,F]=d.useState(!1),[_,z]=d.useState("challenge"),M=d.useRef(null),V=d.useRef(null),W=n!==null&&n.voiceMoveMasterBest!==null&&c>n.voiceMoveMasterBest,q=d.useRef(null),E=d.useRef(!1),A=d.useRef(null),O=async()=>{if(E.current){try{await ie.stopSession()}catch{}E.current=!1}if(q.current){try{await q.current.remove()}catch{}q.current=null}x(!1)},K=()=>{M.current&&clearInterval(M.current),V.current&&clearTimeout(V.current),O(),e()},ae=async(Q=!1)=>{F(Q),i("playing"),u(0),m(0),y(0),g(60),k(null);const G=Gh();l(G),setTimeout(async()=>{await pt("Say the move.")},300)},he=()=>{M.current&&clearInterval(M.current),V.current&&clearTimeout(V.current),O(),e()},ve=d.useCallback(Q=>{var qe,Fe;if(!a||s!=="playing")return;const G=Q.toLowerCase().trim();if(console.log("[VoiceMoveMaster] Processing:",G),G.includes("resign")||G.includes("quit")){N(!0),pt("Are you sure you want to resign? Say yes or no.");return}if(S){if(G.includes("yes")){b(!0),N(!1);return}else if(G.includes("no")){N(!1),pt("Okay, continue playing.");return}}if(G.includes("repeat")||G.includes("again")||G.includes("say again")){pt("Look at the highlighted squares on the board.");return}if(G.includes("time")||G.includes("clock")){pt(`${p} seconds remaining`);return}if(G.includes("material")){const Le=qA(a.chess);pt(Le);return}const se=G.match(/what'?s?\s+on\s+([a-h])\s*([1-8])/i);if(se){const Le=`${se[1]}${se[2]}`,Je=a.chess.get(Le);if(Je){const Ke=Je.color==="w"?"White":"Black",dt=Lc[Je.type];pt(`${Ke} ${dt}`)}else pt("Empty");return}const ce=G.match(/where\s+is\s+my\s+(\w+)/i);if(ce){const Le=ce[1].toLowerCase(),Je=(qe=Object.entries(Lc).find(([,Ke])=>Ke===Le))==null?void 0:qe[0];if(Je){const Ke=a.chess.turn(),dt=a.chess.board(),tt=[];for(let Ft=0;Ft<8;Ft++)for(let H=0;H<8;H++){const X=dt[Ft][H];X&&X.type===Je&&X.color===Ke&&tt.push(`${ur[H]}${Ui[7-Ft]}`)}tt.length>0?pt(`Your ${Le} is on ${tt.slice(0,3).join(", ")}`):pt(`You don't have a ${Le}`)}return}if(G.includes("eval")||G.includes("evaluate")){const Le=WA(a.chess);Le>0?pt(`White is up ${Le} points`):Le<0?pt(`Black is up ${Math.abs(Le)} points`):pt("Position is equal");return}const Se=G.match(/legal\s+moves?\s+for\s+(\w+)/i);if(Se){const Le=Se[1].toLowerCase(),Je=(Fe=Object.entries(Lc).find(([,Ke])=>Ke===Le))==null?void 0:Fe[0];if(Je){const Ke=a.chess.moves({verbose:!0}).filter(dt=>dt.piece===Je).slice(0,4).map(dt=>dt.san);Ke.length>0?pt(`${Le} can play ${Ke.join(", ")}`):pt(`No legal moves for ${Le}`)}return}if(YA(G,a.move)){V.current&&(clearTimeout(V.current),V.current=null),$e.notification({type:Wi.Success}).catch(()=>{}),k({text:"Correct!",correct:!0});const Le=c+1,Je=f+1;u(Le),m(Je);const Ke=Math.max(h,Je);y(Ke),pt("Correct!"),setTimeout(()=>{k(null);const dt=Gh();l(dt)},500)}else m(0),V.current&&clearTimeout(V.current),V.current=setTimeout(()=>{$e.notification({type:Wi.Error}).catch(()=>{}),k({text:"Try again",correct:!1}),setTimeout(()=>k(null),1e3)},1e3)},[a,s,c,f,h,p,S]);if(d.useEffect(()=>{A.current=ve},[ve]),d.useEffect(()=>{if(!os||s!=="playing")return;let Q=!1;return(async()=>{try{if(!await Sl()||Q){console.warn("[VoiceMoveMaster] Voice not ready or cancelled");return}if(console.log("[VoiceMoveMaster] Starting voice session..."),q.current&&await q.current.remove(),Q||(q.current=await ie.addListener("onSpeechResult",ce=>{var qe;const Se=ce.text;J1(Se),Se.length>=2&&((qe=A.current)==null||qe.call(A,Se)),ie.startListening().catch(()=>{})}),Q))return;await ie.startSession(),X1(!0),await ie.startListening(),Z1(!0),E.current=!0,x(!0),console.log("[VoiceMoveMaster] Native voice session started")}catch(se){console.error("[VoiceMoveMaster] Native voice setup failed:",se),du(String(se))}})(),()=>{Q=!0,O()}},[s]),d.useEffect(()=>(s==="playing"&&!T&&(M.current=setInterval(()=>{g(Q=>Q<=1?(i("finished"),0):Q-1)},1e3)),()=>{M.current&&clearInterval(M.current)}),[s,T]),d.useEffect(()=>{s==="finished"&&!T&&t(c,h)},[s,c,h,t,T]),d.useEffect(()=>{r==null||r(s)},[s,r]),s==="ready")return o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:K,"data-testid":"button-voicemaster-back",children:o.jsx(bn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Voice Move Master"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(Hu,{className:"h-12 w-12 text-purple-500 mx-auto"}),o.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"})]}),o.jsx(ea,{value:_,onValueChange:Q=>z(Q),className:"w-full max-w-xs",children:o.jsxs(Fo,{className:"grid w-full grid-cols-2",children:[o.jsx(Rn,{value:"challenge","data-testid":"tab-voicemaster-challenge",children:"1 Minute Challenge"}),o.jsx(Rn,{value:"practice","data-testid":"tab-voicemaster-practice",children:"Practice"})]})}),o.jsx("p",{className:"text-muted-foreground text-center",children:_==="challenge"?"Say the highlighted move within 60 seconds!":"Practice announcing moves at your own pace."}),_==="challenge"&&n!==null&&n.voiceMoveMasterBest!==null&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",o.jsxs("span",{className:"font-semibold text-purple-500",children:[n.voiceMoveMasterBest," moves"]})]}),o.jsx(Y,{size:"lg",onClick:()=>ae(_==="practice"),"data-testid":"button-start-voicemaster",children:"Start"})]})]});if(s==="finished")return o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:K,"data-testid":"button-voicemaster-back-finished",children:o.jsx(bn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Voice Move Master"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsx(Jn,{className:`h-16 w-16 ${W?"text-purple-500":"text-muted-foreground"}`}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h2",{className:"text-4xl font-bold",children:c}),o.jsx("p",{className:"text-lg text-muted-foreground",children:"moves announced correctly"}),h>1&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Best streak: ",h]}),W&&o.jsx(it,{className:"bg-purple-500 text-white",children:"New Personal Best!"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Y,{variant:"outline",onClick:K,"data-testid":"button-voicemaster-menu",children:"Menu"}),o.jsx(Y,{onClick:()=>ae(!1),"data-testid":"button-voicemaster-retry",children:"Play Again"})]})]})]});const te=(a==null?void 0:a.chess.board())||[],I=(a==null?void 0:a.move.from)||"",B=(a==null?void 0:a.move.to)||"";return o.jsxs(o.Fragment,{children:[os&&o.jsx(Fp,{}),o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[T?o.jsx(it,{variant:"outline",children:"Practice"}):o.jsx("span",{className:"text-2xl font-mono font-bold tabular-nums",children:p}),w&&o.jsx(dn,{className:"h-5 w-5 text-red-500 animate-pulse"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-lg font-semibold",children:c}),f>=3&&o.jsxs(it,{variant:"outline",className:"text-purple-500 border-purple-500",children:[f," streak"]})]})]}),j&&o.jsx("div",{className:`text-center py-2 mb-2 rounded ${j.correct?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:o.jsx("span",{className:"font-semibold",children:j.text})}),o.jsx("div",{className:"flex items-center justify-center mb-4",children:o.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:["8","7","6","5","4","3","2","1"].map((Q,G)=>ur.map((se,ce)=>{var tt;const Se=`${se}${Q}`,qe=(ce+G)%2===1,Fe=(tt=te[G])==null?void 0:tt[ce],Le=Se===I,Je=Se===B;let Ke=qe?"bg-amber-700":"bg-amber-100";Le?Ke="bg-yellow-400":Je&&(Ke="bg-red-500");const dt={wk:"",wq:"",wr:"",wb:"",wn:"",wp:"",bk:"",bq:"",br:"",bb:"",bn:"",bp:""};return o.jsx("div",{className:`aspect-square ${Ke} flex items-center justify-center text-2xl`,children:Fe&&dt[`${Fe.color}${Fe.type}`]},Se)}))})}),o.jsx("div",{className:"text-center mb-4",children:o.jsxs("p",{className:"text-lg",children:[os?"Say: ":"Type: ",o.jsx("span",{className:"font-bold text-purple-500",children:a==null?void 0:a.move.san})]})}),!os&&o.jsxs("form",{className:"flex gap-2 mb-4",onSubmit:Q=>{Q.preventDefault(),C.trim()&&(ve(C),R(""))},children:[o.jsx("input",{type:"text",value:C,onChange:Q=>R(Q.target.value),placeholder:"Type move here...",className:"flex-1 px-3 py-2 border rounded-md bg-background",autoFocus:!0,"data-testid":"input-voicemaster-text"}),o.jsx(Y,{type:"submit","data-testid":"button-voicemaster-submit",children:"Submit"})]}),o.jsxs(Y,{variant:"outline",onClick:()=>b(!0),className:"mx-auto mb-4","data-testid":"button-voicemaster-resign",children:[o.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Resign"]}),o.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(p2,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium",children:"Chess Notation"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs text-muted-foreground",children:[o.jsxs("span",{children:[o.jsx("strong",{children:"e4"})," = pawn to e4"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"R"})," = Rook"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"N"})," = Knight"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"B"})," = Bishop"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"Q"})," = Queen"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"K"})," = King"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"Bb2"})," = Bishop to b2"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"Nxc5"})," = Knight takes c5"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"0-0"})," = Kingside castle"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"0-0-0"})," = Queenside castle"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"+"})," = Check"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"#"})," = Checkmate"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"=Q"})," = Promote to Queen"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"e.p."})," = En passant"]}),o.jsxs("span",{className:"col-span-2",children:[o.jsx("strong",{children:"Rac1"})," = When 2 rooks can go to c1, specify which (a-file)"]})]})]})]}),o.jsx(Kr,{open:v,onOpenChange:b,children:o.jsxs(Er,{children:[o.jsxs(Pr,{children:[o.jsx(Rr,{children:"Quit Game?"}),o.jsxs(Mr,{children:["Your current score of ",c," will not be saved."]})]}),o.jsxs(Tr,{children:[o.jsx(Ar,{"data-testid":"button-voicemaster-resign-cancel",children:"Continue"}),o.jsx(_r,{onClick:he,"data-testid":"button-voicemaster-resign-confirm",children:"Quit"})]})]})})]})}function qA(e){const t=e.board();let n=0,r=0;const s={p:1,n:3,b:3,r:5,q:9,k:0};for(const a of t)for(const l of a)if(l){const c=s[l.type];l.color==="w"?n+=c:r+=c}const i=n-r;return i>0?`White is up ${i} point${i!==1?"s":""}`:i<0?`Black is up ${Math.abs(i)} point${Math.abs(i)!==1?"s":""}`:"Material is equal"}function WA(e){const t=e.board();let n=0;const r={p:1,n:3,b:3,r:5,q:9,k:0};for(const s of t)for(const i of s)if(i){const a=r[i.type];n+=i.color==="w"?a:-a}return n}const UA=["to","takes","captures","moves","x","move"],HA={one:"1",won:"1",first:"1",two:"2",too:"2",second:"2",three:"3",free:"3",tree:"3",third:"3",four:"4",fore:"4",forth:"4",fourth:"4",five:"5",fifth:"5",six:"6",sixth:"6",sicks:"6",seven:"7",seventh:"7",eight:"8",ate:"8",eighth:"8"},KA={night:"knight",nite:"knight",horse:"knight",rock:"rook",castle:"rook",brook:"rook",bish:"bishop",bishup:"bishop",pond:"pawn"},GA={ay:"a",aye:"a",eh:"a",alpha:"a",alfa:"a",apple:"a",able:"a",bee:"b",be:"b",bravo:"b",boy:"b",baker:"b",cee:"c",see:"c",sea:"c",charlie:"c",cat:"c",dee:"d",delta:"d",dog:"d",david:"d",eee:"e",ee:"e",echo:"e",easy:"e",edward:"e",ef:"f",eff:"f",foxtrot:"f",fox:"f",frank:"f",if:"f",of:"f",gee:"g",jee:"g",golf:"g",george:"g",aitch:"h",ach:"h",hotel:"h",henry:"h"};function QA(e){let t=e.toLowerCase();t=t.replace(/\bbefore\b/g,"b 4"),t=t.replace(/\bsci\s*fi\b/g,"c 5"),t=t.replace(/\bscifi\b/g,"c 5"),t=t.replace(/\bquincy\b/g,"queen c");for(const[n,r]of Object.entries(GA))t=t.replace(new RegExp(`\\b${n}\\b`,"g"),r);t=t.replace(/\bhe\s+([1-8])\b/g,"e $1"),t=t.replace(/\bhe\s+(one|two|three|four|five|six|seven|eight|won|too|free|fore|for|fifth|sixth|seventh|eighth)\b/gi,"e $1"),t=t.replace(/\bthe\s+([1-8])\b/g,"d $1"),t=t.replace(/\bthe\s+(one|two|three|four|five|six|seven|eight)\b/gi,"d $1"),t=t.replace(/\b([a-h])\s+for\b/g,"$1 4");for(const[n,r]of Object.entries(HA))t=t.replace(new RegExp(`\\b${n}\\b`,"g"),r);for(const[n,r]of Object.entries(KA))t=t.replace(new RegExp(`\\b${n}\\b`,"g"),r);return t}function YA(e,t){const n=QA(e);console.log("[matchesMove] Input:",e," Normalized:",n," Target:",t.san);let r=n.replace(/[^a-z0-9\s]/g,"");const i=r.split(/\s+/).filter(w=>!UA.includes(w)),a=i.join(" "),l=r.replace(/\s+/g,"").match(/^([a-h])([1-8])$/);if(l&&t.piece==="p"){const w=l[1]+l[2];if(t.to===w)return!0}const c=a.replace(/\s+/g,"").match(/^([a-h])([1-8])$/);if(c&&t.piece==="p"){const w=c[1]+c[2];if(t.to===w)return!0}const u=t.san.toLowerCase().replace(/[+#x]/g,"");if(a.replace(/\s+/g,"").includes(u))return!0;const f=["knight","night","bishop","rook","queen","king","pawn"],m=Lc[t.piece],h=i.some(w=>m==="pawn"&&!f.some(x=>x!=="pawn"&&a.includes(x))||a.includes(m)||m==="knight"&&a.includes("night")),y=t.to[0],p=t.to[1],g=a.includes(t.to)||a.includes(y)&&a.includes(p);return!!(h&&g)}function XA({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,i]=d.useState("ready"),[a,l]=d.useState(()=>wf(3,4)),[c,u]=d.useState(""),[f,m]=d.useState([]),[h,y]=d.useState(0),[p,g]=d.useState(0),[w,x]=d.useState(0),[v,b]=d.useState(!1),[S,N]=d.useState(!1),[j,k]=d.useState("challenge"),[C,R]=d.useState(null),[T,F]=d.useState(!1),_=5,z=(n==null?void 0:n.knightsPathBest)!==null&&p>0&&p<((n==null?void 0:n.knightsPathBest)||1/0);d.useEffect(()=>{r==null||r(s)},[s,r]),d.useEffect(()=>{let W=null;return s==="playing"&&(W=setInterval(()=>{g(Date.now()-h)},100)),()=>{W&&clearInterval(W)}},[s,h]);const M=(W=!1)=>{N(W);const q=wf(3,4);l(q),u(q.start),m([q.start]),x(0),y(Date.now()),g(0),i("playing");const E=q.start[0]==="a"?"ay":q.start[0],A=q.end[0]==="a"?"ay":q.end[0];pt(`Knight on ${E} ${q.start[1]}. Get to ${A} ${q.end[1]}`)},V=d.useCallback((W,q)=>{if(s!=="playing")return;const E=`${W}${q}`;if(!MA(c,E)){$e.impact({style:Be.Heavy}).catch(()=>{}),R({square:E,correct:!1}),pt("Invalid knight move"),setTimeout(()=>R(null),500);return}if($e.impact({style:Be.Light}).catch(()=>{}),R({square:E,correct:!0}),u(E),m(A=>[...A,E]),E===a.end){const A=w+1;if(x(A),A>=_&&!S){const O=Date.now()-h;g(O),i("finished"),t(O),pt("Complete!")}else{const O=wf(3,4);setTimeout(()=>{l(O),u(O.start),m([O.start]),R(null);const K=O.start[0]==="a"?"ay":O.start[0],ae=O.end[0]==="a"?"ay":O.end[0];pt(`Good! Knight on ${K} ${O.start[1]}. Get to ${ae} ${O.end[1]}`)},300)}}else setTimeout(()=>R(null),200)},[s,c,a,w,S,h,t]);return s==="ready"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-knights-path-back",children:o.jsx(bn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Knight's Path"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(qu,{className:"h-12 w-12 text-green-500 mx-auto"}),o.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"})]}),o.jsx(ea,{value:j,onValueChange:W=>k(W),className:"w-full max-w-xs",children:o.jsxs(Fo,{className:"grid w-full grid-cols-2",children:[o.jsx(Rn,{value:"challenge","data-testid":"tab-knights-challenge",children:"5 Path Race"}),o.jsx(Rn,{value:"practice","data-testid":"tab-knights-practice",children:"Practice"})]})}),o.jsx("p",{className:"text-muted-foreground text-center",children:j==="challenge"?"Complete 5 knight paths as fast as you can!":"Practice knight movement with no time pressure."}),o.jsxs("div",{className:"flex items-center gap-3 w-full max-w-xs",children:[o.jsx(Fn,{id:"hide-knight",checked:T,onCheckedChange:F,"data-testid":"switch-hide-knight"}),o.jsxs(Xt,{htmlFor:"hide-knight",className:"flex items-center gap-2",children:[T?o.jsx(v2,{className:"h-4 w-4"}):o.jsx(Uu,{className:"h-4 w-4"}),"Hide knight (blindfold mode)"]})]}),j==="challenge"&&(n==null?void 0:n.knightsPathBest)!==null&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",o.jsx("span",{className:"font-semibold text-green-500",children:wn(n.knightsPathBest)})]}),o.jsx(Y,{size:"lg",onClick:()=>M(j==="practice"),"data-testid":"button-start-knights",children:"Start"})]})]}):s==="finished"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-knights-back-finished",children:o.jsx(bn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Knight's Path"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsx(Jn,{className:`h-16 w-16 ${z?"text-green-500":"text-muted-foreground"}`}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h2",{className:"text-4xl font-bold",children:wn(p)}),o.jsx("p",{className:"text-lg text-muted-foreground",children:"to complete 5 knight paths"}),z&&o.jsx(it,{className:"bg-green-500 text-white",children:"New Personal Best!"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Y,{variant:"outline",onClick:e,"data-testid":"button-knights-menu",children:"Menu"}),o.jsx(Y,{onClick:()=>M(!1),"data-testid":"button-knights-retry",children:"Play Again"})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("p",{className:"text-lg font-semibold",children:["Get to: ",o.jsx("span",{className:"text-2xl font-mono",children:a.end})]}),o.jsx("div",{className:"flex items-center gap-2",children:S?o.jsx(it,{variant:"outline",children:"Practice"}):o.jsx("span",{className:"text-lg font-mono tabular-nums",children:wn(p)})})]}),!S&&o.jsx(qs,{value:w/_*100,className:"mb-2"}),o.jsx("p",{className:"text-sm text-muted-foreground text-center mb-2",children:S?`${w} paths completed`:`${w}/${_} paths`}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[o.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:["8","7","6","5","4","3","2","1"].map(W=>ur.map(q=>{const E=`${q}${W}`,A=ur.indexOf(q),O=Ui.indexOf(W),K=dl(A,O),ae=E===c,he=E===a.end,ve=(C==null?void 0:C.square)===E,te=f.includes(E),I=E===a.start;let B=K?"bg-amber-700":"bg-amber-100";return ve?B=C.correct?"bg-green-500":"bg-red-500":he?B="bg-blue-400":I?B="bg-yellow-400":te&&!ae&&(B=K?"bg-green-700":"bg-green-300"),o.jsx("button",{className:`aspect-square ${B} transition-colors duration-100 flex items-center justify-center`,onClick:()=>V(q,W),"data-testid":`square-${E}`,children:ae&&!T&&o.jsx("img",{src:"/pieces/bN.svg",alt:"Knight",className:"w-4/5 h-4/5"})},E)}))}),o.jsxs(Y,{variant:"outline",onClick:()=>b(!0),className:"mt-4","data-testid":"button-knights-resign",children:[o.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Resign"]})]})]}),o.jsx(Kr,{open:v,onOpenChange:b,children:o.jsxs(Er,{children:[o.jsxs(Pr,{children:[o.jsx(Rr,{children:"Quit Game?"}),o.jsxs(Mr,{children:["Your progress (",w,"/",_," paths) will not be saved."]})]}),o.jsxs(Tr,{children:[o.jsx(Ar,{"data-testid":"button-knights-resign-cancel",children:"Continue"}),o.jsx(_r,{onClick:e,"data-testid":"button-knights-resign-confirm",children:"Quit"})]})]})})]})}const bf={easy:{maxPeeks:Number.POSITIVE_INFINITY,label:"Easy (Unlimited Peeks)"},medium:{maxPeeks:20,label:"Medium (20 Peeks)"},hard:{maxPeeks:10,label:"Hard (10 Peeks)"},expert:{maxPeeks:5,label:"Expert (5 Peeks)"},master:{maxPeeks:2,label:"Master (2 Peeks)"},grandmaster:{maxPeeks:0,label:"Grandmaster (No Peeks)"}};function ZA({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,i]=d.useState("ready"),[a,l]=d.useState("KQ_vs_K"),[c,u]=d.useState("easy"),[f,m]=d.useState(Number.POSITIVE_INFINITY),[h,y]=d.useState(!1),[p,g]=d.useState(null),[w,x]=d.useState(0),[v,b]=d.useState(0),[S,N]=d.useState(0),[j,k]=d.useState(!1),[C,R]=d.useState(null),[T,F]=d.useState([]),[_,z]=d.useState(!0),[M,V]=d.useState(!0),[W,q]=d.useState([]),E=(n==null?void 0:n.endgameDrillsBest)!==null&&v>0&&v<((n==null?void 0:n.endgameDrillsBest)||1/0),A=()=>{f<=0||y(!0)},O=()=>{h&&f>0&&m(te=>te-1),y(!1)};d.useEffect(()=>{s==="memorizing"||s==="playing"?r==null||r("playing"):r==null||r(s)},[s,r]),d.useEffect(()=>{let te=null;return s==="playing"&&(te=setInterval(()=>{b(Date.now()-w)},100)),()=>{te&&clearInterval(te)}},[s,w]);const K=()=>{const te=IA(a),I=new An(te.fen);g(I),N(0),b(0),R(null),F([]),z(!0),y(!1),m(bf[c].maxPeeks),q([]),i("memorizing")},ae=()=>{z(!1),x(Date.now()),i("playing")},he=d.useCallback((te,I)=>{if(s!=="playing"||!p)return;const B=`${te}${I}`;if(C){const Q=p.moves({square:C,verbose:!0}).find(G=>G.to===B);if(Q){if(p.move(Q),N(G=>G+1),q(G=>[...G,Q.san]),$e.impact({style:Be.Light}).catch(()=>{}),p.isCheckmate()){const G=Date.now()-w;b(G),i("finished"),t(G)}else if(!p.isGameOver()){const G=p.moves({verbose:!0});if(G.length>0){const se=G[Math.floor(Math.random()*G.length)];setTimeout(()=>{p.move(se),q(ce=>[...ce,se.san]),M&&Pt(se.san).catch(()=>{}),g(new An(p.fen()))},300)}}R(null),F([]),g(new An(p.fen()))}else{const G=p.get(B);if(G&&G.color==="w"){R(B);const se=p.moves({square:B,verbose:!0});F(se.map(ce=>ce.to))}else R(null),F([])}}else{const Q=p.get(B);if(Q&&Q.color==="w"){R(B);const G=p.moves({square:B,verbose:!0});F(G.map(se=>se.to))}}},[s,p,C,w,t]),ve=te=>{if(!te)return null;const I={k:"K",q:"Q",r:"R",b:"B",n:"N",p:"P"},B=`${te.color}${I[te.type]}`;return o.jsx("img",{src:`/pieces/${B}.svg`,alt:B,className:"w-4/5 h-4/5"})};return s==="ready"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-endgame-back",children:o.jsx(bn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Endgame Drills"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(Wu,{className:"h-12 w-12 text-orange-500 mx-auto"}),o.jsx("h2",{className:"text-2xl font-bold",children:"Select Endgame"})]}),o.jsxs(cl,{value:a,onValueChange:te=>l(te),children:[o.jsx(zi,{className:"w-full max-w-xs","data-testid":"select-endgame-type",children:o.jsx(ul,{})}),o.jsx(Vi,{children:$A().map(te=>o.jsx(Qn,{value:te.value,children:te.label},te.value))})]}),o.jsxs(cl,{value:c,onValueChange:te=>u(te),children:[o.jsx(zi,{className:"w-full max-w-xs","data-testid":"select-peek-difficulty",children:o.jsx(ul,{})}),o.jsx(Vi,{children:Object.keys(bf).map(te=>o.jsx(Qn,{value:te,children:bf[te].label},te))})]}),o.jsxs("div",{className:"flex items-center gap-3 w-full max-w-xs",children:[o.jsx(Fn,{id:"audio-enabled",checked:M,onCheckedChange:V,"data-testid":"switch-audio-enabled"}),o.jsxs(Xt,{htmlFor:"audio-enabled",className:"flex items-center gap-2",children:[M?o.jsx(Hu,{className:"h-4 w-4"}):o.jsx(zs,{className:"h-4 w-4"}),"Announce opponent moves"]})]}),o.jsx("p",{className:"text-muted-foreground text-center",children:"Checkmate the lone king as fast as possible!"}),(n==null?void 0:n.endgameDrillsBest)!==null&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",o.jsx("span",{className:"font-semibold text-orange-500",children:wn(n.endgameDrillsBest)})]}),o.jsx(Y,{size:"lg",onClick:K,"data-testid":"button-start-endgame",children:"Start"})]})]}):s==="memorizing"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-endgame-back-memorizing",children:o.jsx(bn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Memorize the Position"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[o.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:["8","7","6","5","4","3","2","1"].map(te=>ur.map(I=>{const B=`${I}${te}`,Q=ur.indexOf(I),G=Ui.indexOf(te),se=dl(Q,G),ce=p==null?void 0:p.get(B),Se=se?"bg-amber-700":"bg-amber-100";return o.jsx("div",{className:`aspect-square ${Se} flex items-center justify-center`,"data-testid":`square-${B}`,children:ve(ce||null)},B)}))}),o.jsx("p",{className:"text-muted-foreground text-center mt-4 mb-2",children:"Study the position, then tap Start to play blindfolded"}),o.jsx(Y,{size:"lg",onClick:ae,className:"mt-2","data-testid":"button-start-playing",children:"Start Playing"})]})]}):s==="finished"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-endgame-back-finished",children:o.jsx(bn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Endgame Drills"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsx(Jn,{className:`h-16 w-16 ${E?"text-orange-500":"text-muted-foreground"}`}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h2",{className:"text-4xl font-bold",children:wn(v)}),o.jsxs("p",{className:"text-lg text-muted-foreground",children:["Checkmate in ",S," moves"]}),E&&o.jsx(it,{className:"bg-orange-500 text-white",children:"New Personal Best!"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Y,{variant:"outline",onClick:e,"data-testid":"button-endgame-menu",children:"Menu"}),o.jsx(Y,{onClick:K,"data-testid":"button-endgame-retry",children:"Play Again"})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("p",{className:"text-lg font-semibold",children:["Moves: ",o.jsx("span",{className:"text-2xl font-mono",children:S})]}),o.jsx("span",{className:"text-lg font-mono tabular-nums",children:wn(v)})]}),o.jsx("p",{className:"text-sm text-muted-foreground text-center mb-2",children:h?"Peeking at the board...":"Playing blindfolded - pieces are hidden"}),W.length>0&&o.jsxs("div",{className:"mb-2 p-2 bg-muted/50 rounded-md w-full max-w-sm mx-auto",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Move history:"}),o.jsx("div",{className:"text-sm font-mono flex flex-wrap gap-1",children:W.map((te,I)=>o.jsxs("span",{className:I%2===0?"text-foreground":"text-muted-foreground",children:[I%2===0?`${Math.floor(I/2)+1}. `:"",te]},I))})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[o.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:["8","7","6","5","4","3","2","1"].map(te=>ur.map(I=>{const B=`${I}${te}`,Q=ur.indexOf(I),G=Ui.indexOf(te),se=dl(Q,G),ce=p==null?void 0:p.get(B),Se=B===C,qe=T.includes(B);let Fe=se?"bg-amber-700":"bg-amber-100";return Se?Fe="bg-yellow-400":qe&&(Fe=se?"bg-green-600":"bg-green-300"),o.jsx("button",{className:`aspect-square ${Fe} transition-colors duration-100 flex items-center justify-center`,onClick:()=>he(I,te),"data-testid":`square-${B}`,children:_||h?ve(ce||null):null},B)}))}),c!=="grandmaster"&&o.jsxs("div",{className:"mt-4 space-y-2 w-full max-w-xs",children:[o.jsxs(Y,{variant:h?"default":"outline",className:`w-full ${h?"bg-amber-400 hover:bg-amber-500 text-black":""}`,onMouseDown:A,onMouseUp:O,onMouseLeave:O,onTouchStart:A,onTouchEnd:O,onTouchCancel:O,disabled:f<=0,"data-testid":"button-endgame-peek",children:[o.jsx(Uu,{className:"h-4 w-4 mr-2"}),h?"Peeking...":"Hold to Peek"]}),o.jsx("p",{className:"text-center text-sm text-muted-foreground","data-testid":"text-peeks-remaining",children:isFinite(f)?`${f} peeks left`:"Unlimited peeks"})]}),o.jsxs(Y,{variant:"outline",onClick:()=>k(!0),className:"mt-4","data-testid":"button-endgame-resign",children:[o.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Resign"]})]})]}),o.jsx(Kr,{open:j,onOpenChange:k,children:o.jsxs(Er,{children:[o.jsxs(Pr,{children:[o.jsx(Rr,{children:"Quit Game?"}),o.jsx(Mr,{children:"Your progress will not be saved."})]}),o.jsxs(Tr,{children:[o.jsx(Ar,{"data-testid":"button-endgame-resign-cancel",children:"Continue"}),o.jsx(_r,{onClick:e,"data-testid":"button-endgame-resign-confirm",children:"Quit"})]})]})})]})}function JA({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,i]=d.useState("ready"),[a,l]=d.useState("10-20"),[c,u]=d.useState(null),[f,m]=d.useState(0),[h,y]=d.useState(!0),[p,g]=d.useState(!1),[w,x]=d.useState(0),[v,b]=d.useState(0),[S,N]=d.useState(""),[j,k]=d.useState(null),[C,R]=d.useState(!1),[T,F]=d.useState(!1),_=d.useRef(null),z=(n==null?void 0:n.blindfoldMarathonBest)!==null&&v>0&&v<((n==null?void 0:n.blindfoldMarathonBest)||1/0);d.useEffect(()=>{r==null||r(s)},[s,r]);const M=d.useCallback(async()=>{try{await ie.stopSession()}catch{}if(_.current){try{await _.current.remove()}catch{}_.current=null}F(!1)},[]);d.useEffect(()=>()=>{M()},[M]),d.useEffect(()=>{if(!os||!p){os&&!p&&M();return}let O=!1;return(async()=>{try{if(await Sl(),O)return;_.current=await ie.addListener("onSpeechResult",ae=>{var ve;const he=((ve=ae.result)==null?void 0:ve.toLowerCase().trim())||"";he&&(N(he),ie.startListening().catch(()=>{}))}),await ie.startSession(),await ie.startListening(),F(!0)}catch(ae){console.error("[Marathon] Voice setup failed:",ae)}})(),()=>{O=!0,M()}},[p,M]),d.useEffect(()=>{let O=null;return s==="playing"&&p&&(O=setInterval(()=>{b(Date.now()-w)},100)),()=>{O&&clearInterval(O)}},[s,w,p]);const V=()=>{const O=x0().find(ae=>ae.value===a),K=DA(O.minMoves,O.maxMoves);u(K),m(0),y(!0),g(!1),N(""),k(null),i("playing")},W=()=>{f>0&&m(O=>O-1)},q=()=>{c&&(f<c.pgnMoves.length-1?m(O=>O+1):(y(!1),g(!0),x(Date.now())))},E=()=>{if(!c)return;const O=S.toLowerCase().replace(/[^a-z0-9]/g,""),K=c.solution.toLowerCase().replace(/[^a-z0-9]/g,""),ae=O.includes(K)||K.includes(O);if(k(ae),ae){const he=Date.now()-w;b(he),i("finished"),t(he)}else setTimeout(()=>{i("finished"),b(0)},1e3)},A=()=>{e()};return s==="ready"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-marathon-back",children:o.jsx(bn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Blindfold Marathon"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(Vu,{className:"h-12 w-12 text-red-500 mx-auto"}),o.jsx("h2",{className:"text-2xl font-bold",children:"Select Difficulty"})]}),o.jsxs(cl,{value:a,onValueChange:O=>l(O),children:[o.jsx(zi,{className:"w-full max-w-xs","data-testid":"select-marathon-difficulty",children:o.jsx(ul,{})}),o.jsx(Vi,{children:x0().map(O=>o.jsx(Qn,{value:O.value,children:O.label},O.value))})]}),o.jsx("p",{className:"text-muted-foreground text-center text-sm",children:"Step through moves at your own pace, then find the winning move!"}),(n==null?void 0:n.blindfoldMarathonBest)!==null&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",o.jsx("span",{className:"font-semibold text-red-500",children:wn(n.blindfoldMarathonBest)})]}),o.jsx(Y,{size:"lg",onClick:V,"data-testid":"button-start-marathon",children:"Start"})]})]}):s==="finished"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-marathon-back-finished",children:o.jsx(bn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Blindfold Marathon"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsx(Jn,{className:`h-16 w-16 ${j&&z?"text-red-500":j?"text-green-500":"text-muted-foreground"}`}),o.jsx("div",{className:"text-center space-y-2",children:j?o.jsxs(o.Fragment,{children:[o.jsx("h2",{className:"text-4xl font-bold",children:wn(v)}),o.jsx("p",{className:"text-lg text-muted-foreground",children:"to find the winning move"}),z&&o.jsx(it,{className:"bg-red-500 text-white",children:"New Personal Best!"})]}):o.jsxs(o.Fragment,{children:[o.jsx("h2",{className:"text-2xl font-bold text-red-500",children:"Incorrect"}),o.jsxs("p",{className:"text-lg text-muted-foreground",children:["The answer was: ",o.jsx("span",{className:"font-mono font-bold",children:c==null?void 0:c.solution})]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Y,{variant:"outline",onClick:e,"data-testid":"button-marathon-menu",children:"Menu"}),o.jsx(Y,{onClick:V,"data-testid":"button-marathon-retry",children:"Try Again"})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h1",{className:"text-xl font-bold",children:c==null?void 0:c.description}),p&&o.jsx("span",{className:"text-lg font-mono tabular-nums",children:wn(v)})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[h?o.jsxs("div",{className:"text-center space-y-4 w-full max-w-xs",children:[o.jsxs("p",{className:"text-sm text-muted-foreground",children:[c==null?void 0:c.white," vs ",c==null?void 0:c.black]}),o.jsxs("div",{className:"text-5xl font-mono font-bold min-h-[4rem] flex items-center justify-center",children:[f%2===0?`${Math.floor(f/2)+1}. `:"",c==null?void 0:c.pgnMoves[f]]}),o.jsxs("p",{className:"text-muted-foreground",children:["Move ",f+1," of ",(c==null?void 0:c.pgnMoves.length)||0]}),o.jsx(qs,{value:(f+1)/((c==null?void 0:c.pgnMoves.length)||1)*100,className:"w-full"}),o.jsxs("div",{className:"flex gap-4 justify-center mt-4",children:[o.jsxs(Y,{size:"lg",variant:"outline",onClick:W,disabled:f===0,"data-testid":"button-marathon-back-move",children:[o.jsx(bn,{className:"h-5 w-5 mr-1"}),"Back"]}),o.jsxs(Y,{size:"lg",onClick:q,"data-testid":"button-marathon-next-move",children:[f===((c==null?void 0:c.pgnMoves.length)||0)-1?"Done":"Next",f!==((c==null?void 0:c.pgnMoves.length)||0)-1&&o.jsx(qu,{className:"h-5 w-5 ml-1"})]})]})]}):p?o.jsxs("div",{className:"text-center space-y-4 w-full max-w-xs",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Find the Best Move!"}),o.jsxs("p",{className:"text-muted-foreground",children:[c==null?void 0:c.white," to move"]}),T&&o.jsxs("div",{className:"flex items-center justify-center gap-2 text-red-500",children:[o.jsx(dn,{className:"h-5 w-5 animate-pulse"}),o.jsx("span",{className:"text-sm",children:"Listening..."})]}),o.jsx("input",{type:"text",value:S,onChange:O=>N(O.target.value),placeholder:T?"Speak or type your move":"Enter your move (e.g., Qb8+)",className:"w-full px-4 py-2 border rounded-md text-center text-lg font-mono text-black bg-white",autoFocus:!0,"data-testid":"input-marathon-answer"}),o.jsx(Y,{size:"lg",onClick:E,disabled:!S.trim(),"data-testid":"button-marathon-submit",children:"Submit Answer"})]}):null,o.jsxs(Y,{variant:"outline",onClick:()=>R(!0),className:"mt-4","data-testid":"button-marathon-resign",children:[o.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Quit"]})]})]}),o.jsx(Kr,{open:C,onOpenChange:R,children:o.jsxs(Er,{children:[o.jsxs(Pr,{children:[o.jsx(Rr,{children:"Quit Game?"}),o.jsx(Mr,{children:"Your progress will not be saved."})]}),o.jsxs(Tr,{children:[o.jsx(Ar,{"data-testid":"button-marathon-resign-cancel",children:"Continue"}),o.jsx(_r,{onClick:A,"data-testid":"button-marathon-resign-confirm",children:"Quit"})]})]})})]})}function e3(){const[e,t]=d.useState(!1),[n,r]=d.useState(!1),[s,i]=d.useState(Fa()),[a,l]=d.useState(0),[c,u]=d.useState("idle"),[f,m]=d.useState(!1),h=d.useRef(null),[y,p]=d.useState(!1),[g,w]=d.useState("menu"),x=d.useRef(null);d.useEffect(()=>{const j=()=>{i(Fa())};return window.addEventListener("statsUpdated",j),()=>window.removeEventListener("statsUpdated",j)},[]),d.useEffect(()=>{if(!Sn.isNativePlatform()){oc(!0);return}(async()=>{try{console.log("[App] Requesting mic permission on startup..."),Vv("requesting...");const k=await ie.requestPermissions();if(console.log("[App] Mic permission result:",k.mic),Vv(k.mic),k.mic!=="granted"){console.warn("[App] Mic permission denied"),du("Mic permission denied"),oc(!1);return}console.log("[App] Permission granted, waiting for Vosk service..."),await ie.waitUntilReady(),console.log("[App] Vosk service ready"),mR(!0),oc(!0)}catch(k){console.error("[App] Failed to initialize voice:",k),du(String(k)),oc(!1)}})()},[]);const v=()=>{l(j=>j+1)},b=()=>{if(y){if(g==="menu"||g==="ready"||g==="finished"){p(!1);return}m(!0);return}if(c==="idle"){r(!1),t(!1),window.dispatchEvent(new CustomEvent("closeAllDialogs"));return}if(c==="setup"){h.current&&h.current();return}m(!0)},S=()=>{if(m(!1),y){x.current&&x.current(),p(!1);return}h.current&&h.current()},N=()=>{if(y&&g==="playing")return"Quit this training game and return to title?";switch(c){case"in_game":return"Resign this game and return to title?";case"reconstruction":return"Leave this challenge and return to title?";case"analysis":return"Skip analysis and return to title?";default:return"Return to title?"}};return o.jsx(VP,{defaultTheme:"dark",children:o.jsxs(BP,{children:[o.jsxs("div",{className:"fixed inset-0 w-full h-full bg-background overflow-hidden",children:[o.jsxs("header",{className:"absolute top-0 left-0 right-0 z-50 grid grid-cols-3 items-center px-3 border-b border-border bg-background",style:{paddingTop:"var(--safe-area-top)",minHeight:"calc(56px + var(--safe-area-top, 0px))"},children:[o.jsx("div",{className:"flex justify-start",children:o.jsxs(Oi,{open:n,onOpenChange:r,children:[o.jsx(uu,{asChild:!0,children:o.jsx(Y,{variant:"ghost",size:"icon","data-testid":"button-voice-help",children:o.jsx(dn,{className:"h-5 w-5"})})}),o.jsxs(Mo,{children:[o.jsx(_o,{children:o.jsx(Ao,{children:"Voice Commands"})}),o.jsxs("div",{className:"space-y-4 text-sm max-h-[60vh] overflow-y-auto",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:"Basic Moves"}),o.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"e4"'})," - Move pawn to e4"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"knight f3"'})," - Move knight to f3"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"bishop takes c6"'})," - Capture on c6"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"castle kingside"'})," - Castle short (O-O)"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"castle queenside"'})," - Castle long (O-O-O)"]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:"When Two Pieces Can Move"}),o.jsx("p",{className:"text-muted-foreground",children:"If you have two pieces that can reach the same square, specify which one:"}),o.jsx("p",{className:"font-mono text-foreground",children:'"Rook F to D1"'})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:"Query Commands"}),o.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"say again"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"repeat"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"again"'})," - Hear the last move"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"last move"'})," - Hear opponent's last move"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:`"what's on e4"`})," - Check what piece is on a square"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"where is my queen"'})," - Find your piece locations"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"how much time"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"clock"'})," - Hear remaining time"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"resign"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"quit"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"give up"'})," - Resign the game"]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:"Resign Confirmation"}),o.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"yes"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"confirm"'})," - Confirm resignation"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"no"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"cancel"'})," - Cancel resignation"]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:"Pro Commands"}),o.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"material"'})," - Hear material balance"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"legal moves for knight"'})," - List piece's legal moves"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"peek"'})," - Show board for 5 seconds"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"evaluate"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"eval"'})," - Hear engine evaluation"]})]}),o.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:'Note: "peek" and "evaluate" mark the game as assisted'})]})]})]})]})}),o.jsx("button",{onClick:b,className:`text-lg font-bold text-center whitespace-nowrap cursor-pointer transition-colors bg-transparent border-none p-0 m-0 font-inherit text-inherit outline-none select-none ${c==="idle"?"cursor-default text-foreground":"text-foreground hover:text-primary"}`,style:{WebkitTapHighlightColor:"transparent",WebkitTouchCallout:"none"},"data-testid":"button-title-home",children:"Blindfold Chess"}),o.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:v,"data-testid":"button-game-history",children:o.jsx(y2,{className:"h-5 w-5"})}),o.jsxs(Oi,{open:e,onOpenChange:t,children:[o.jsx(uu,{asChild:!0,children:o.jsx(Y,{variant:"ghost",size:"icon","data-testid":"button-stats",children:o.jsx(cw,{className:"h-5 w-5"})})}),o.jsxs(Mo,{className:"max-w-lg max-h-[85vh] overflow-hidden",children:[o.jsx(_o,{children:o.jsx(Ao,{children:"Training Metrics"})}),o.jsx(BM,{stats:s}),o.jsxs(Y,{variant:"outline",size:"sm",className:"w-full text-muted-foreground mt-4",onClick:()=>{zR(),i(Fa())},"data-testid":"button-reset-stats",children:[o.jsx(k2,{className:"mr-2 h-3 w-3"}),"Reset All Statistics"]})]})]})]})]}),o.jsx("main",{className:"absolute left-0 right-0 z-0 overflow-hidden",style:{top:"calc(56px + var(--safe-area-top, 0px))",bottom:"calc(56px + var(--safe-area-bottom, 0px))"},children:y?o.jsx(BA,{onBack:()=>p(!1),onStateChange:w,returnToMenuRef:x}):o.jsx(CA,{historyTrigger:a,onStateChange:u,returnToTitleRef:h,onTrainNowClick:()=>p(!0)})}),o.jsxs("footer",{className:"absolute bottom-0 left-0 right-0 z-50 grid grid-cols-3 items-center px-2 border-t border-border bg-background",style:{paddingBottom:"var(--safe-area-bottom)",minHeight:"calc(56px + var(--safe-area-bottom, 0px))"},children:[o.jsx("div",{className:"flex justify-start",children:o.jsx(GR,{})}),o.jsx("div",{className:"flex justify-center",children:o.jsx(WP,{})}),o.jsx("div",{className:"flex justify-end",children:o.jsx(QR,{})})]})]}),o.jsx(Kr,{open:f,onOpenChange:m,children:o.jsxs(Er,{children:[o.jsxs(Pr,{children:[o.jsx(Rr,{children:"Return to Title"}),o.jsx(Mr,{children:N()})]}),o.jsxs(Tr,{children:[o.jsx(Ar,{"data-testid":"button-cancel-return",children:"Cancel"}),o.jsx(_r,{onClick:S,"data-testid":"button-confirm-return",children:"Confirm"})]})]})}),o.jsx(hE,{})]})})}Ay(document.getElementById("root")).render(o.jsx(e3,{}));export{Be as I,Wi as N,Np as W};
