var Ck=Object.defineProperty;var jk=(e,t,n)=>t in e?Ck(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var xt=(e,t,n)=>jk(e,typeof t!="symbol"?t+"":t,n);function Ek(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function i0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var a0={exports:{}},fu={},l0={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tl=Symbol.for("react.element"),Pk=Symbol.for("react.portal"),Tk=Symbol.for("react.fragment"),Rk=Symbol.for("react.strict_mode"),_k=Symbol.for("react.profiler"),Mk=Symbol.for("react.provider"),Ak=Symbol.for("react.context"),Lk=Symbol.for("react.forward_ref"),Ik=Symbol.for("react.suspense"),$k=Symbol.for("react.memo"),Ok=Symbol.for("react.lazy"),Op=Symbol.iterator;function Dk(e){return e===null||typeof e!="object"?null:(e=Op&&e[Op]||e["@@iterator"],typeof e=="function"?e:null)}var c0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u0=Object.assign,d0={};function Bi(e,t,n){this.props=e,this.context=t,this.refs=d0,this.updater=n||c0}Bi.prototype.isReactComponent={};Bi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Bi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function f0(){}f0.prototype=Bi.prototype;function Ih(e,t,n){this.props=e,this.context=t,this.refs=d0,this.updater=n||c0}var $h=Ih.prototype=new f0;$h.constructor=Ih;u0($h,Bi.prototype);$h.isPureReactComponent=!0;var Dp=Array.isArray,h0=Object.prototype.hasOwnProperty,Oh={current:null},m0={key:!0,ref:!0,__self:!0,__source:!0};function p0(e,t,n){var r,s={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)h0.call(t,r)&&!m0.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:tl,type:e,key:o,ref:a,props:s,_owner:Oh.current}}function Bk(e,t){return{$$typeof:tl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Dh(e){return typeof e=="object"&&e!==null&&e.$$typeof===tl}function Fk(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Bp=/\/+/g;function td(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Fk(""+e.key):t.toString(36)}function nc(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case tl:case Pk:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+td(a,0):r,Dp(s)?(n="",e!=null&&(n=e.replace(Bp,"$&/")+"/"),nc(s,t,n,"",function(u){return u})):s!=null&&(Dh(s)&&(s=Bk(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Bp,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Dp(e))for(var l=0;l<e.length;l++){o=e[l];var c=r+td(o,l);a+=nc(o,t,n,c,s)}else if(c=Dk(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=r+td(o,l++),a+=nc(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Nl(e,t,n){if(e==null)return e;var r=[],s=0;return nc(e,r,"","",function(o){return t.call(n,o,s++)}),r}function zk(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Nn={current:null},rc={transition:null},Vk={ReactCurrentDispatcher:Nn,ReactCurrentBatchConfig:rc,ReactCurrentOwner:Oh};function g0(){throw Error("act(...) is not supported in production builds of React.")}Qe.Children={map:Nl,forEach:function(e,t,n){Nl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Nl(e,function(){t++}),t},toArray:function(e){return Nl(e,function(t){return t})||[]},only:function(e){if(!Dh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Qe.Component=Bi;Qe.Fragment=Tk;Qe.Profiler=_k;Qe.PureComponent=Ih;Qe.StrictMode=Rk;Qe.Suspense=Ik;Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vk;Qe.act=g0;Qe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=u0({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Oh.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)h0.call(t,c)&&!m0.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:tl,type:e.type,key:s,ref:o,props:r,_owner:a}};Qe.createContext=function(e){return e={$$typeof:Ak,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Mk,_context:e},e.Consumer=e};Qe.createElement=p0;Qe.createFactory=function(e){var t=p0.bind(null,e);return t.type=e,t};Qe.createRef=function(){return{current:null}};Qe.forwardRef=function(e){return{$$typeof:Lk,render:e}};Qe.isValidElement=Dh;Qe.lazy=function(e){return{$$typeof:Ok,_payload:{_status:-1,_result:e},_init:zk}};Qe.memo=function(e,t){return{$$typeof:$k,type:e,compare:t===void 0?null:t}};Qe.startTransition=function(e){var t=rc.transition;rc.transition={};try{e()}finally{rc.transition=t}};Qe.unstable_act=g0;Qe.useCallback=function(e,t){return Nn.current.useCallback(e,t)};Qe.useContext=function(e){return Nn.current.useContext(e)};Qe.useDebugValue=function(){};Qe.useDeferredValue=function(e){return Nn.current.useDeferredValue(e)};Qe.useEffect=function(e,t){return Nn.current.useEffect(e,t)};Qe.useId=function(){return Nn.current.useId()};Qe.useImperativeHandle=function(e,t,n){return Nn.current.useImperativeHandle(e,t,n)};Qe.useInsertionEffect=function(e,t){return Nn.current.useInsertionEffect(e,t)};Qe.useLayoutEffect=function(e,t){return Nn.current.useLayoutEffect(e,t)};Qe.useMemo=function(e,t){return Nn.current.useMemo(e,t)};Qe.useReducer=function(e,t,n){return Nn.current.useReducer(e,t,n)};Qe.useRef=function(e){return Nn.current.useRef(e)};Qe.useState=function(e){return Nn.current.useState(e)};Qe.useSyncExternalStore=function(e,t,n){return Nn.current.useSyncExternalStore(e,t,n)};Qe.useTransition=function(){return Nn.current.useTransition()};Qe.version="18.3.1";l0.exports=Qe;var d=l0.exports;const bn=i0(d),v0=Ek({__proto__:null,default:bn},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qk=d,Wk=Symbol.for("react.element"),Uk=Symbol.for("react.fragment"),Hk=Object.prototype.hasOwnProperty,Gk=qk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kk={key:!0,ref:!0,__self:!0,__source:!0};function x0(e,t,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Hk.call(t,r)&&!Kk.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Wk,type:e,key:o,ref:a,props:s,_owner:Gk.current}}fu.Fragment=Uk;fu.jsx=x0;fu.jsxs=x0;a0.exports=fu;var i=a0.exports,y0={exports:{}},Gn={},w0={exports:{}},b0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,$){var Z=P.length;P.push($);e:for(;0<Z;){var U=Z-1>>>1,ve=P[U];if(0<s(ve,$))P[U]=$,P[Z]=ve,Z=U;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var $=P[0],Z=P.pop();if(Z!==$){P[0]=Z;e:for(var U=0,ve=P.length,ke=ve>>>1;U<ke;){var ce=2*(U+1)-1,we=P[ce],V=ce+1,W=P[V];if(0>s(we,Z))V<ve&&0>s(W,we)?(P[U]=W,P[V]=Z,U=V):(P[U]=we,P[ce]=Z,U=ce);else if(V<ve&&0>s(W,Z))P[U]=W,P[V]=Z,U=V;else break e}}return $}function s(P,$){var Z=P.sortIndex-$.sortIndex;return Z!==0?Z:P.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],f=1,h=null,m=3,y=!1,g=!1,p=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(P){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=P)r(u),$.sortIndex=$.expirationTime,t(c,$);else break;$=n(u)}}function k(P){if(p=!1,b(P),!g)if(n(c)!==null)g=!0,G(S);else{var $=n(u);$!==null&&q(k,$.startTime-P)}}function S(P,$){g=!1,p&&(p=!1,x(j),j=-1),y=!0;var Z=m;try{for(b($),h=n(c);h!==null&&(!(h.expirationTime>$)||P&&!O());){var U=h.callback;if(typeof U=="function"){h.callback=null,m=h.priorityLevel;var ve=U(h.expirationTime<=$);$=e.unstable_now(),typeof ve=="function"?h.callback=ve:h===n(c)&&r(c),b($)}else r(c);h=n(c)}if(h!==null)var ke=!0;else{var ce=n(u);ce!==null&&q(k,ce.startTime-$),ke=!1}return ke}finally{h=null,m=Z,y=!1}}var C=!1,N=null,j=-1,R=5,T=-1;function O(){return!(e.unstable_now()-T<R)}function L(){if(N!==null){var P=e.unstable_now();T=P;var $=!0;try{$=N(!0,P)}finally{$?B():(C=!1,N=null)}}else C=!1}var B;if(typeof v=="function")B=function(){v(L)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,D=I.port2;I.port1.onmessage=L,B=function(){D.postMessage(null)}}else B=function(){w(L,0)};function G(P){N=P,C||(C=!0,B())}function q(P,$){j=w(function(){P(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){g||y||(g=!0,G(S))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(P){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var Z=m;m=$;try{return P()}finally{m=Z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,$){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var Z=m;m=P;try{return $()}finally{m=Z}},e.unstable_scheduleCallback=function(P,$,Z){var U=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?U+Z:U):Z=U,P){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=Z+ve,P={id:f++,callback:$,priorityLevel:P,startTime:Z,expirationTime:ve,sortIndex:-1},Z>U?(P.sortIndex=Z,t(u,P),n(c)===null&&P===n(u)&&(p?(x(j),j=-1):p=!0,q(k,Z-U))):(P.sortIndex=ve,t(c,P),g||y||(g=!0,G(S))),P},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(P){var $=m;return function(){var Z=m;m=$;try{return P.apply(this,arguments)}finally{m=Z}}}})(b0);w0.exports=b0;var Qk=w0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yk=d,Hn=Qk;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var S0=new Set,La={};function _o(e,t){ki(e,t),ki(e+"Capture",t)}function ki(e,t){for(La[e]=t,e=0;e<t.length;e++)S0.add(t[e])}var Hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),af=Object.prototype.hasOwnProperty,Xk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fp={},zp={};function Zk(e){return af.call(zp,e)?!0:af.call(Fp,e)?!1:Xk.test(e)?zp[e]=!0:(Fp[e]=!0,!1)}function Jk(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function eN(e,t,n,r){if(t===null||typeof t>"u"||Jk(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Cn(e,t,n,r,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var en={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){en[e]=new Cn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];en[t]=new Cn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){en[e]=new Cn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){en[e]=new Cn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){en[e]=new Cn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){en[e]=new Cn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){en[e]=new Cn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){en[e]=new Cn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){en[e]=new Cn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Bh=/[\-:]([a-z])/g;function Fh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Bh,Fh);en[t]=new Cn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Bh,Fh);en[t]=new Cn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Bh,Fh);en[t]=new Cn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){en[e]=new Cn(e,1,!1,e.toLowerCase(),null,!1,!1)});en.xlinkHref=new Cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){en[e]=new Cn(e,1,!1,e.toLowerCase(),null,!0,!0)});function zh(e,t,n,r){var s=en.hasOwnProperty(t)?en[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(eN(t,n,s,r)&&(n=null),r||s===null?Zk(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Zr=Yk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cl=Symbol.for("react.element"),Ho=Symbol.for("react.portal"),Go=Symbol.for("react.fragment"),Vh=Symbol.for("react.strict_mode"),lf=Symbol.for("react.profiler"),k0=Symbol.for("react.provider"),N0=Symbol.for("react.context"),qh=Symbol.for("react.forward_ref"),cf=Symbol.for("react.suspense"),uf=Symbol.for("react.suspense_list"),Wh=Symbol.for("react.memo"),ds=Symbol.for("react.lazy"),C0=Symbol.for("react.offscreen"),Vp=Symbol.iterator;function na(e){return e===null||typeof e!="object"?null:(e=Vp&&e[Vp]||e["@@iterator"],typeof e=="function"?e:null)}var Nt=Object.assign,nd;function ga(e){if(nd===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);nd=t&&t[1]||""}return`
`+nd+e}var rd=!1;function sd(e,t){if(!e||rd)return"";rd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{rd=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ga(e):""}function tN(e){switch(e.tag){case 5:return ga(e.type);case 16:return ga("Lazy");case 13:return ga("Suspense");case 19:return ga("SuspenseList");case 0:case 2:case 15:return e=sd(e.type,!1),e;case 11:return e=sd(e.type.render,!1),e;case 1:return e=sd(e.type,!0),e;default:return""}}function df(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Go:return"Fragment";case Ho:return"Portal";case lf:return"Profiler";case Vh:return"StrictMode";case cf:return"Suspense";case uf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case N0:return(e.displayName||"Context")+".Consumer";case k0:return(e._context.displayName||"Context")+".Provider";case qh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wh:return t=e.displayName||null,t!==null?t:df(e.type)||"Memo";case ds:t=e._payload,e=e._init;try{return df(e(t))}catch{}}return null}function nN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return df(t);case 8:return t===Vh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ps(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function j0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rN(e){var t=j0(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jl(e){e._valueTracker||(e._valueTracker=rN(e))}function E0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=j0(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Cc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ff(e,t){var n=t.checked;return Nt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function qp(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ps(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function P0(e,t){t=t.checked,t!=null&&zh(e,"checked",t,!1)}function hf(e,t){P0(e,t);var n=Ps(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?mf(e,t.type,n):t.hasOwnProperty("defaultValue")&&mf(e,t.type,Ps(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Wp(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function mf(e,t,n){(t!=="number"||Cc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var va=Array.isArray;function ci(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ps(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function pf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Nt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Up(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Q(92));if(va(n)){if(1<n.length)throw Error(Q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ps(n)}}function T0(e,t){var n=Ps(t.value),r=Ps(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Hp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function R0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?R0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var El,_0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(El=El||document.createElement("div"),El.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=El.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ia(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Sa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sN=["Webkit","ms","Moz","O"];Object.keys(Sa).forEach(function(e){sN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sa[t]=Sa[e]})});function M0(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Sa.hasOwnProperty(e)&&Sa[e]?(""+t).trim():t+"px"}function A0(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=M0(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var oN=Nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vf(e,t){if(t){if(oN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function xf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yf=null;function Uh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wf=null,ui=null,di=null;function Gp(e){if(e=sl(e)){if(typeof wf!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=vu(t),wf(e.stateNode,e.type,t))}}function L0(e){ui?di?di.push(e):di=[e]:ui=e}function I0(){if(ui){var e=ui,t=di;if(di=ui=null,Gp(e),t)for(e=0;e<t.length;e++)Gp(t[e])}}function $0(e,t){return e(t)}function O0(){}var od=!1;function D0(e,t,n){if(od)return e(t,n);od=!0;try{return $0(e,t,n)}finally{od=!1,(ui!==null||di!==null)&&(O0(),I0())}}function $a(e,t){var n=e.stateNode;if(n===null)return null;var r=vu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Q(231,t,typeof n));return n}var bf=!1;if(Hr)try{var ra={};Object.defineProperty(ra,"passive",{get:function(){bf=!0}}),window.addEventListener("test",ra,ra),window.removeEventListener("test",ra,ra)}catch{bf=!1}function iN(e,t,n,r,s,o,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var ka=!1,jc=null,Ec=!1,Sf=null,aN={onError:function(e){ka=!0,jc=e}};function lN(e,t,n,r,s,o,a,l,c){ka=!1,jc=null,iN.apply(aN,arguments)}function cN(e,t,n,r,s,o,a,l,c){if(lN.apply(this,arguments),ka){if(ka){var u=jc;ka=!1,jc=null}else throw Error(Q(198));Ec||(Ec=!0,Sf=u)}}function Mo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function B0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Kp(e){if(Mo(e)!==e)throw Error(Q(188))}function uN(e){var t=e.alternate;if(!t){if(t=Mo(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Kp(s),e;if(o===r)return Kp(s),t;o=o.sibling}throw Error(Q(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=o;break}if(l===r){a=!0,r=s,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=s;break}if(l===r){a=!0,r=o,n=s;break}l=l.sibling}if(!a)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?e:t}function F0(e){return e=uN(e),e!==null?z0(e):null}function z0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=z0(e);if(t!==null)return t;e=e.sibling}return null}var V0=Hn.unstable_scheduleCallback,Qp=Hn.unstable_cancelCallback,dN=Hn.unstable_shouldYield,fN=Hn.unstable_requestPaint,At=Hn.unstable_now,hN=Hn.unstable_getCurrentPriorityLevel,Hh=Hn.unstable_ImmediatePriority,q0=Hn.unstable_UserBlockingPriority,Pc=Hn.unstable_NormalPriority,mN=Hn.unstable_LowPriority,W0=Hn.unstable_IdlePriority,hu=null,Tr=null;function pN(e){if(Tr&&typeof Tr.onCommitFiberRoot=="function")try{Tr.onCommitFiberRoot(hu,e,void 0,(e.current.flags&128)===128)}catch{}}var hr=Math.clz32?Math.clz32:xN,gN=Math.log,vN=Math.LN2;function xN(e){return e>>>=0,e===0?32:31-(gN(e)/vN|0)|0}var Pl=64,Tl=4194304;function xa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Tc(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=xa(l):(o&=a,o!==0&&(r=xa(o)))}else a=n&~s,a!==0?r=xa(a):o!==0&&(r=xa(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-hr(t),s=1<<n,r|=e[n],t&=~s;return r}function yN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wN(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-hr(o),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=yN(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function kf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function U0(){var e=Pl;return Pl<<=1,!(Pl&4194240)&&(Pl=64),e}function id(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function nl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-hr(t),e[t]=n}function bN(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-hr(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function Gh(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-hr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var at=0;function H0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var G0,Kh,K0,Q0,Y0,Nf=!1,Rl=[],ys=null,ws=null,bs=null,Oa=new Map,Da=new Map,ms=[],SN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yp(e,t){switch(e){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":ws=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":Oa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Da.delete(t.pointerId)}}function sa(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=sl(t),t!==null&&Kh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function kN(e,t,n,r,s){switch(t){case"focusin":return ys=sa(ys,e,t,n,r,s),!0;case"dragenter":return ws=sa(ws,e,t,n,r,s),!0;case"mouseover":return bs=sa(bs,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Oa.set(o,sa(Oa.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Da.set(o,sa(Da.get(o)||null,e,t,n,r,s)),!0}return!1}function X0(e){var t=oo(e.target);if(t!==null){var n=Mo(t);if(n!==null){if(t=n.tag,t===13){if(t=B0(n),t!==null){e.blockedOn=t,Y0(e.priority,function(){K0(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function sc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Cf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);yf=r,n.target.dispatchEvent(r),yf=null}else return t=sl(n),t!==null&&Kh(t),e.blockedOn=n,!1;t.shift()}return!0}function Xp(e,t,n){sc(e)&&n.delete(t)}function NN(){Nf=!1,ys!==null&&sc(ys)&&(ys=null),ws!==null&&sc(ws)&&(ws=null),bs!==null&&sc(bs)&&(bs=null),Oa.forEach(Xp),Da.forEach(Xp)}function oa(e,t){e.blockedOn===t&&(e.blockedOn=null,Nf||(Nf=!0,Hn.unstable_scheduleCallback(Hn.unstable_NormalPriority,NN)))}function Ba(e){function t(s){return oa(s,e)}if(0<Rl.length){oa(Rl[0],e);for(var n=1;n<Rl.length;n++){var r=Rl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ys!==null&&oa(ys,e),ws!==null&&oa(ws,e),bs!==null&&oa(bs,e),Oa.forEach(t),Da.forEach(t),n=0;n<ms.length;n++)r=ms[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ms.length&&(n=ms[0],n.blockedOn===null);)X0(n),n.blockedOn===null&&ms.shift()}var fi=Zr.ReactCurrentBatchConfig,Rc=!0;function CN(e,t,n,r){var s=at,o=fi.transition;fi.transition=null;try{at=1,Qh(e,t,n,r)}finally{at=s,fi.transition=o}}function jN(e,t,n,r){var s=at,o=fi.transition;fi.transition=null;try{at=4,Qh(e,t,n,r)}finally{at=s,fi.transition=o}}function Qh(e,t,n,r){if(Rc){var s=Cf(e,t,n,r);if(s===null)gd(e,t,r,_c,n),Yp(e,r);else if(kN(s,e,t,n,r))r.stopPropagation();else if(Yp(e,r),t&4&&-1<SN.indexOf(e)){for(;s!==null;){var o=sl(s);if(o!==null&&G0(o),o=Cf(e,t,n,r),o===null&&gd(e,t,r,_c,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else gd(e,t,r,null,n)}}var _c=null;function Cf(e,t,n,r){if(_c=null,e=Uh(r),e=oo(e),e!==null)if(t=Mo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=B0(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _c=e,null}function Z0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hN()){case Hh:return 1;case q0:return 4;case Pc:case mN:return 16;case W0:return 536870912;default:return 16}default:return 16}}var gs=null,Yh=null,oc=null;function J0(){if(oc)return oc;var e,t=Yh,n=t.length,r,s="value"in gs?gs.value:gs.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[o-r];r++);return oc=s.slice(e,1<r?1-r:void 0)}function ic(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _l(){return!0}function Zp(){return!1}function Kn(e){function t(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?_l:Zp,this.isPropagationStopped=Zp,this}return Nt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_l)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_l)},persist:function(){},isPersistent:_l}),t}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xh=Kn(Fi),rl=Nt({},Fi,{view:0,detail:0}),EN=Kn(rl),ad,ld,ia,mu=Nt({},rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ia&&(ia&&e.type==="mousemove"?(ad=e.screenX-ia.screenX,ld=e.screenY-ia.screenY):ld=ad=0,ia=e),ad)},movementY:function(e){return"movementY"in e?e.movementY:ld}}),Jp=Kn(mu),PN=Nt({},mu,{dataTransfer:0}),TN=Kn(PN),RN=Nt({},rl,{relatedTarget:0}),cd=Kn(RN),_N=Nt({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),MN=Kn(_N),AN=Nt({},Fi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),LN=Kn(AN),IN=Nt({},Fi,{data:0}),eg=Kn(IN),$N={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ON={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BN(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=DN[e])?!!t[e]:!1}function Zh(){return BN}var FN=Nt({},rl,{key:function(e){if(e.key){var t=$N[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ic(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ON[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zh,charCode:function(e){return e.type==="keypress"?ic(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ic(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zN=Kn(FN),VN=Nt({},mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tg=Kn(VN),qN=Nt({},rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zh}),WN=Kn(qN),UN=Nt({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),HN=Kn(UN),GN=Nt({},mu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),KN=Kn(GN),QN=[9,13,27,32],Jh=Hr&&"CompositionEvent"in window,Na=null;Hr&&"documentMode"in document&&(Na=document.documentMode);var YN=Hr&&"TextEvent"in window&&!Na,ex=Hr&&(!Jh||Na&&8<Na&&11>=Na),ng=" ",rg=!1;function tx(e,t){switch(e){case"keyup":return QN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ko=!1;function XN(e,t){switch(e){case"compositionend":return nx(t);case"keypress":return t.which!==32?null:(rg=!0,ng);case"textInput":return e=t.data,e===ng&&rg?null:e;default:return null}}function ZN(e,t){if(Ko)return e==="compositionend"||!Jh&&tx(e,t)?(e=J0(),oc=Yh=gs=null,Ko=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ex&&t.locale!=="ko"?null:t.data;default:return null}}var JN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!JN[e.type]:t==="textarea"}function rx(e,t,n,r){L0(r),t=Mc(t,"onChange"),0<t.length&&(n=new Xh("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ca=null,Fa=null;function eC(e){mx(e,0)}function pu(e){var t=Xo(e);if(E0(t))return e}function tC(e,t){if(e==="change")return t}var sx=!1;if(Hr){var ud;if(Hr){var dd="oninput"in document;if(!dd){var og=document.createElement("div");og.setAttribute("oninput","return;"),dd=typeof og.oninput=="function"}ud=dd}else ud=!1;sx=ud&&(!document.documentMode||9<document.documentMode)}function ig(){Ca&&(Ca.detachEvent("onpropertychange",ox),Fa=Ca=null)}function ox(e){if(e.propertyName==="value"&&pu(Fa)){var t=[];rx(t,Fa,e,Uh(e)),D0(eC,t)}}function nC(e,t,n){e==="focusin"?(ig(),Ca=t,Fa=n,Ca.attachEvent("onpropertychange",ox)):e==="focusout"&&ig()}function rC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pu(Fa)}function sC(e,t){if(e==="click")return pu(t)}function oC(e,t){if(e==="input"||e==="change")return pu(t)}function iC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pr=typeof Object.is=="function"?Object.is:iC;function za(e,t){if(pr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!af.call(t,s)||!pr(e[s],t[s]))return!1}return!0}function ag(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lg(e,t){var n=ag(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ag(n)}}function ix(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ix(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ax(){for(var e=window,t=Cc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Cc(e.document)}return t}function em(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function aC(e){var t=ax(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ix(n.ownerDocument.documentElement,n)){if(r!==null&&em(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=lg(n,o);var a=lg(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lC=Hr&&"documentMode"in document&&11>=document.documentMode,Qo=null,jf=null,ja=null,Ef=!1;function cg(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ef||Qo==null||Qo!==Cc(r)||(r=Qo,"selectionStart"in r&&em(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ja&&za(ja,r)||(ja=r,r=Mc(jf,"onSelect"),0<r.length&&(t=new Xh("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Qo)))}function Ml(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yo={animationend:Ml("Animation","AnimationEnd"),animationiteration:Ml("Animation","AnimationIteration"),animationstart:Ml("Animation","AnimationStart"),transitionend:Ml("Transition","TransitionEnd")},fd={},lx={};Hr&&(lx=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function gu(e){if(fd[e])return fd[e];if(!Yo[e])return e;var t=Yo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in lx)return fd[e]=t[n];return e}var cx=gu("animationend"),ux=gu("animationiteration"),dx=gu("animationstart"),fx=gu("transitionend"),hx=new Map,ug="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zs(e,t){hx.set(e,t),_o(t,[e])}for(var hd=0;hd<ug.length;hd++){var md=ug[hd],cC=md.toLowerCase(),uC=md[0].toUpperCase()+md.slice(1);zs(cC,"on"+uC)}zs(cx,"onAnimationEnd");zs(ux,"onAnimationIteration");zs(dx,"onAnimationStart");zs("dblclick","onDoubleClick");zs("focusin","onFocus");zs("focusout","onBlur");zs(fx,"onTransitionEnd");ki("onMouseEnter",["mouseout","mouseover"]);ki("onMouseLeave",["mouseout","mouseover"]);ki("onPointerEnter",["pointerout","pointerover"]);ki("onPointerLeave",["pointerout","pointerover"]);_o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_o("onBeforeInput",["compositionend","keypress","textInput","paste"]);_o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dC=new Set("cancel close invalid load scroll toggle".split(" ").concat(ya));function dg(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,cN(r,t,void 0,e),e.currentTarget=null}function mx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;dg(s,l,u),o=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;dg(s,l,u),o=c}}}if(Ec)throw e=Sf,Ec=!1,Sf=null,e}function pt(e,t){var n=t[Mf];n===void 0&&(n=t[Mf]=new Set);var r=e+"__bubble";n.has(r)||(px(t,e,2,!1),n.add(r))}function pd(e,t,n){var r=0;t&&(r|=4),px(n,e,r,t)}var Al="_reactListening"+Math.random().toString(36).slice(2);function Va(e){if(!e[Al]){e[Al]=!0,S0.forEach(function(n){n!=="selectionchange"&&(dC.has(n)||pd(n,!1,e),pd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Al]||(t[Al]=!0,pd("selectionchange",!1,t))}}function px(e,t,n,r){switch(Z0(t)){case 1:var s=CN;break;case 4:s=jN;break;default:s=Qh}n=s.bind(null,t,n,e),s=void 0,!bf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function gd(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=oo(l),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}l=l.parentNode}}r=r.return}D0(function(){var u=o,f=Uh(n),h=[];e:{var m=hx.get(e);if(m!==void 0){var y=Xh,g=e;switch(e){case"keypress":if(ic(n)===0)break e;case"keydown":case"keyup":y=zN;break;case"focusin":g="focus",y=cd;break;case"focusout":g="blur",y=cd;break;case"beforeblur":case"afterblur":y=cd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Jp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=TN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=WN;break;case cx:case ux:case dx:y=MN;break;case fx:y=HN;break;case"scroll":y=EN;break;case"wheel":y=KN;break;case"copy":case"cut":case"paste":y=LN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=tg}var p=(t&4)!==0,w=!p&&e==="scroll",x=p?m!==null?m+"Capture":null:m;p=[];for(var v=u,b;v!==null;){b=v;var k=b.stateNode;if(b.tag===5&&k!==null&&(b=k,x!==null&&(k=$a(v,x),k!=null&&p.push(qa(v,k,b)))),w)break;v=v.return}0<p.length&&(m=new y(m,g,null,n,f),h.push({event:m,listeners:p}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&n!==yf&&(g=n.relatedTarget||n.fromElement)&&(oo(g)||g[Gr]))break e;if((y||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,y?(g=n.relatedTarget||n.toElement,y=u,g=g?oo(g):null,g!==null&&(w=Mo(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=u),y!==g)){if(p=Jp,k="onMouseLeave",x="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(p=tg,k="onPointerLeave",x="onPointerEnter",v="pointer"),w=y==null?m:Xo(y),b=g==null?m:Xo(g),m=new p(k,v+"leave",y,n,f),m.target=w,m.relatedTarget=b,k=null,oo(f)===u&&(p=new p(x,v+"enter",g,n,f),p.target=b,p.relatedTarget=w,k=p),w=k,y&&g)t:{for(p=y,x=g,v=0,b=p;b;b=zo(b))v++;for(b=0,k=x;k;k=zo(k))b++;for(;0<v-b;)p=zo(p),v--;for(;0<b-v;)x=zo(x),b--;for(;v--;){if(p===x||x!==null&&p===x.alternate)break t;p=zo(p),x=zo(x)}p=null}else p=null;y!==null&&fg(h,m,y,p,!1),g!==null&&w!==null&&fg(h,w,g,p,!0)}}e:{if(m=u?Xo(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var S=tC;else if(sg(m))if(sx)S=oC;else{S=rC;var C=nC}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=sC);if(S&&(S=S(e,u))){rx(h,S,n,f);break e}C&&C(e,m,u),e==="focusout"&&(C=m._wrapperState)&&C.controlled&&m.type==="number"&&mf(m,"number",m.value)}switch(C=u?Xo(u):window,e){case"focusin":(sg(C)||C.contentEditable==="true")&&(Qo=C,jf=u,ja=null);break;case"focusout":ja=jf=Qo=null;break;case"mousedown":Ef=!0;break;case"contextmenu":case"mouseup":case"dragend":Ef=!1,cg(h,n,f);break;case"selectionchange":if(lC)break;case"keydown":case"keyup":cg(h,n,f)}var N;if(Jh)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Ko?tx(e,n)&&(j="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(ex&&n.locale!=="ko"&&(Ko||j!=="onCompositionStart"?j==="onCompositionEnd"&&Ko&&(N=J0()):(gs=f,Yh="value"in gs?gs.value:gs.textContent,Ko=!0)),C=Mc(u,j),0<C.length&&(j=new eg(j,e,null,n,f),h.push({event:j,listeners:C}),N?j.data=N:(N=nx(n),N!==null&&(j.data=N)))),(N=YN?XN(e,n):ZN(e,n))&&(u=Mc(u,"onBeforeInput"),0<u.length&&(f=new eg("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:u}),f.data=N))}mx(h,t)})}function qa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mc(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=$a(e,n),o!=null&&r.unshift(qa(e,o,s)),o=$a(e,t),o!=null&&r.push(qa(e,o,s))),e=e.return}return r}function zo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function fg(e,t,n,r,s){for(var o=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=$a(n,o),c!=null&&a.unshift(qa(n,c,l))):s||(c=$a(n,o),c!=null&&a.push(qa(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var fC=/\r\n?/g,hC=/\u0000|\uFFFD/g;function hg(e){return(typeof e=="string"?e:""+e).replace(fC,`
`).replace(hC,"")}function Ll(e,t,n){if(t=hg(t),hg(e)!==t&&n)throw Error(Q(425))}function Ac(){}var Pf=null,Tf=null;function Rf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var _f=typeof setTimeout=="function"?setTimeout:void 0,mC=typeof clearTimeout=="function"?clearTimeout:void 0,mg=typeof Promise=="function"?Promise:void 0,pC=typeof queueMicrotask=="function"?queueMicrotask:typeof mg<"u"?function(e){return mg.resolve(null).then(e).catch(gC)}:_f;function gC(e){setTimeout(function(){throw e})}function vd(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ba(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ba(t)}function Ss(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function pg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var zi=Math.random().toString(36).slice(2),jr="__reactFiber$"+zi,Wa="__reactProps$"+zi,Gr="__reactContainer$"+zi,Mf="__reactEvents$"+zi,vC="__reactListeners$"+zi,xC="__reactHandles$"+zi;function oo(e){var t=e[jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Gr]||n[jr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=pg(e);e!==null;){if(n=e[jr])return n;e=pg(e)}return t}e=n,n=e.parentNode}return null}function sl(e){return e=e[jr]||e[Gr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function vu(e){return e[Wa]||null}var Af=[],Zo=-1;function Vs(e){return{current:e}}function gt(e){0>Zo||(e.current=Af[Zo],Af[Zo]=null,Zo--)}function ft(e,t){Zo++,Af[Zo]=e.current,e.current=t}var Ts={},pn=Vs(Ts),_n=Vs(!1),go=Ts;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ts;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Mn(e){return e=e.childContextTypes,e!=null}function Lc(){gt(_n),gt(pn)}function gg(e,t,n){if(pn.current!==Ts)throw Error(Q(168));ft(pn,t),ft(_n,n)}function gx(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Q(108,nN(e)||"Unknown",s));return Nt({},n,r)}function Ic(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ts,go=pn.current,ft(pn,e),ft(_n,_n.current),!0}function vg(e,t,n){var r=e.stateNode;if(!r)throw Error(Q(169));n?(e=gx(e,t,go),r.__reactInternalMemoizedMergedChildContext=e,gt(_n),gt(pn),ft(pn,e)):gt(_n),ft(_n,n)}var Vr=null,xu=!1,xd=!1;function vx(e){Vr===null?Vr=[e]:Vr.push(e)}function yC(e){xu=!0,vx(e)}function qs(){if(!xd&&Vr!==null){xd=!0;var e=0,t=at;try{var n=Vr;for(at=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Vr=null,xu=!1}catch(s){throw Vr!==null&&(Vr=Vr.slice(e+1)),V0(Hh,qs),s}finally{at=t,xd=!1}}return null}var Jo=[],ei=0,$c=null,Oc=0,Zn=[],Jn=0,vo=null,qr=1,Wr="";function ro(e,t){Jo[ei++]=Oc,Jo[ei++]=$c,$c=e,Oc=t}function xx(e,t,n){Zn[Jn++]=qr,Zn[Jn++]=Wr,Zn[Jn++]=vo,vo=e;var r=qr;e=Wr;var s=32-hr(r)-1;r&=~(1<<s),n+=1;var o=32-hr(t)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,qr=1<<32-hr(t)+s|n<<s|r,Wr=o+e}else qr=1<<o|n<<s|r,Wr=e}function tm(e){e.return!==null&&(ro(e,1),xx(e,1,0))}function nm(e){for(;e===$c;)$c=Jo[--ei],Jo[ei]=null,Oc=Jo[--ei],Jo[ei]=null;for(;e===vo;)vo=Zn[--Jn],Zn[Jn]=null,Wr=Zn[--Jn],Zn[Jn]=null,qr=Zn[--Jn],Zn[Jn]=null}var Wn=null,zn=null,wt=!1,dr=null;function yx(e,t){var n=er(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function xg(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Wn=e,zn=Ss(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Wn=e,zn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=vo!==null?{id:qr,overflow:Wr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=er(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Wn=e,zn=null,!0):!1;default:return!1}}function Lf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function If(e){if(wt){var t=zn;if(t){var n=t;if(!xg(e,t)){if(Lf(e))throw Error(Q(418));t=Ss(n.nextSibling);var r=Wn;t&&xg(e,t)?yx(r,n):(e.flags=e.flags&-4097|2,wt=!1,Wn=e)}}else{if(Lf(e))throw Error(Q(418));e.flags=e.flags&-4097|2,wt=!1,Wn=e}}}function yg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wn=e}function Il(e){if(e!==Wn)return!1;if(!wt)return yg(e),wt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Rf(e.type,e.memoizedProps)),t&&(t=zn)){if(Lf(e))throw wx(),Error(Q(418));for(;t;)yx(e,t),t=Ss(t.nextSibling)}if(yg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){zn=Ss(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}zn=null}}else zn=Wn?Ss(e.stateNode.nextSibling):null;return!0}function wx(){for(var e=zn;e;)e=Ss(e.nextSibling)}function Ci(){zn=Wn=null,wt=!1}function rm(e){dr===null?dr=[e]:dr.push(e)}var wC=Zr.ReactCurrentBatchConfig;function aa(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,e))}return e}function $l(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wg(e){var t=e._init;return t(e._payload)}function bx(e){function t(x,v){if(e){var b=x.deletions;b===null?(x.deletions=[v],x.flags|=16):b.push(v)}}function n(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function s(x,v){return x=js(x,v),x.index=0,x.sibling=null,x}function o(x,v,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<v?(x.flags|=2,v):b):(x.flags|=2,v)):(x.flags|=1048576,v)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,v,b,k){return v===null||v.tag!==6?(v=Cd(b,x.mode,k),v.return=x,v):(v=s(v,b),v.return=x,v)}function c(x,v,b,k){var S=b.type;return S===Go?f(x,v,b.props.children,k,b.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ds&&wg(S)===v.type)?(k=s(v,b.props),k.ref=aa(x,v,b),k.return=x,k):(k=hc(b.type,b.key,b.props,null,x.mode,k),k.ref=aa(x,v,b),k.return=x,k)}function u(x,v,b,k){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=jd(b,x.mode,k),v.return=x,v):(v=s(v,b.children||[]),v.return=x,v)}function f(x,v,b,k,S){return v===null||v.tag!==7?(v=fo(b,x.mode,k,S),v.return=x,v):(v=s(v,b),v.return=x,v)}function h(x,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Cd(""+v,x.mode,b),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Cl:return b=hc(v.type,v.key,v.props,null,x.mode,b),b.ref=aa(x,null,v),b.return=x,b;case Ho:return v=jd(v,x.mode,b),v.return=x,v;case ds:var k=v._init;return h(x,k(v._payload),b)}if(va(v)||na(v))return v=fo(v,x.mode,b,null),v.return=x,v;$l(x,v)}return null}function m(x,v,b,k){var S=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:l(x,v,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Cl:return b.key===S?c(x,v,b,k):null;case Ho:return b.key===S?u(x,v,b,k):null;case ds:return S=b._init,m(x,v,S(b._payload),k)}if(va(b)||na(b))return S!==null?null:f(x,v,b,k,null);$l(x,b)}return null}function y(x,v,b,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return x=x.get(b)||null,l(v,x,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Cl:return x=x.get(k.key===null?b:k.key)||null,c(v,x,k,S);case Ho:return x=x.get(k.key===null?b:k.key)||null,u(v,x,k,S);case ds:var C=k._init;return y(x,v,b,C(k._payload),S)}if(va(k)||na(k))return x=x.get(b)||null,f(v,x,k,S,null);$l(v,k)}return null}function g(x,v,b,k){for(var S=null,C=null,N=v,j=v=0,R=null;N!==null&&j<b.length;j++){N.index>j?(R=N,N=null):R=N.sibling;var T=m(x,N,b[j],k);if(T===null){N===null&&(N=R);break}e&&N&&T.alternate===null&&t(x,N),v=o(T,v,j),C===null?S=T:C.sibling=T,C=T,N=R}if(j===b.length)return n(x,N),wt&&ro(x,j),S;if(N===null){for(;j<b.length;j++)N=h(x,b[j],k),N!==null&&(v=o(N,v,j),C===null?S=N:C.sibling=N,C=N);return wt&&ro(x,j),S}for(N=r(x,N);j<b.length;j++)R=y(N,x,j,b[j],k),R!==null&&(e&&R.alternate!==null&&N.delete(R.key===null?j:R.key),v=o(R,v,j),C===null?S=R:C.sibling=R,C=R);return e&&N.forEach(function(O){return t(x,O)}),wt&&ro(x,j),S}function p(x,v,b,k){var S=na(b);if(typeof S!="function")throw Error(Q(150));if(b=S.call(b),b==null)throw Error(Q(151));for(var C=S=null,N=v,j=v=0,R=null,T=b.next();N!==null&&!T.done;j++,T=b.next()){N.index>j?(R=N,N=null):R=N.sibling;var O=m(x,N,T.value,k);if(O===null){N===null&&(N=R);break}e&&N&&O.alternate===null&&t(x,N),v=o(O,v,j),C===null?S=O:C.sibling=O,C=O,N=R}if(T.done)return n(x,N),wt&&ro(x,j),S;if(N===null){for(;!T.done;j++,T=b.next())T=h(x,T.value,k),T!==null&&(v=o(T,v,j),C===null?S=T:C.sibling=T,C=T);return wt&&ro(x,j),S}for(N=r(x,N);!T.done;j++,T=b.next())T=y(N,x,j,T.value,k),T!==null&&(e&&T.alternate!==null&&N.delete(T.key===null?j:T.key),v=o(T,v,j),C===null?S=T:C.sibling=T,C=T);return e&&N.forEach(function(L){return t(x,L)}),wt&&ro(x,j),S}function w(x,v,b,k){if(typeof b=="object"&&b!==null&&b.type===Go&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Cl:e:{for(var S=b.key,C=v;C!==null;){if(C.key===S){if(S=b.type,S===Go){if(C.tag===7){n(x,C.sibling),v=s(C,b.props.children),v.return=x,x=v;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ds&&wg(S)===C.type){n(x,C.sibling),v=s(C,b.props),v.ref=aa(x,C,b),v.return=x,x=v;break e}n(x,C);break}else t(x,C);C=C.sibling}b.type===Go?(v=fo(b.props.children,x.mode,k,b.key),v.return=x,x=v):(k=hc(b.type,b.key,b.props,null,x.mode,k),k.ref=aa(x,v,b),k.return=x,x=k)}return a(x);case Ho:e:{for(C=b.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(x,v.sibling),v=s(v,b.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else t(x,v);v=v.sibling}v=jd(b,x.mode,k),v.return=x,x=v}return a(x);case ds:return C=b._init,w(x,v,C(b._payload),k)}if(va(b))return g(x,v,b,k);if(na(b))return p(x,v,b,k);$l(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(x,v.sibling),v=s(v,b),v.return=x,x=v):(n(x,v),v=Cd(b,x.mode,k),v.return=x,x=v),a(x)):n(x,v)}return w}var ji=bx(!0),Sx=bx(!1),Dc=Vs(null),Bc=null,ti=null,sm=null;function om(){sm=ti=Bc=null}function im(e){var t=Dc.current;gt(Dc),e._currentValue=t}function $f(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function hi(e,t){Bc=e,sm=ti=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Rn=!0),e.firstContext=null)}function nr(e){var t=e._currentValue;if(sm!==e)if(e={context:e,memoizedValue:t,next:null},ti===null){if(Bc===null)throw Error(Q(308));ti=e,Bc.dependencies={lanes:0,firstContext:e}}else ti=ti.next=e;return t}var io=null;function am(e){io===null?io=[e]:io.push(e)}function kx(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,am(t)):(n.next=s.next,s.next=n),t.interleaved=n,Kr(e,r)}function Kr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var fs=!1;function lm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nx(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ur(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ks(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,tt&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Kr(e,n)}return s=r.interleaved,s===null?(t.next=t,am(r)):(t.next=s.next,s.next=t),r.interleaved=t,Kr(e,n)}function ac(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Gh(e,n)}}function bg(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fc(e,t,n,r){var s=e.updateQueue;fs=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(o!==null){var h=s.baseState;a=0,f=u=c=null,l=o;do{var m=l.lane,y=l.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,p=l;switch(m=t,y=n,p.tag){case 1:if(g=p.payload,typeof g=="function"){h=g.call(y,h,m);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,m=typeof g=="function"?g.call(y,h,m):g,m==null)break e;h=Nt({},h,m);break e;case 2:fs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=y,c=h):f=f.next=y,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);yo|=a,e.lanes=a,e.memoizedState=h}}function Sg(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Q(191,s));s.call(r)}}}var ol={},Rr=Vs(ol),Ua=Vs(ol),Ha=Vs(ol);function ao(e){if(e===ol)throw Error(Q(174));return e}function cm(e,t){switch(ft(Ha,t),ft(Ua,e),ft(Rr,ol),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:gf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=gf(t,e)}gt(Rr),ft(Rr,t)}function Ei(){gt(Rr),gt(Ua),gt(Ha)}function Cx(e){ao(Ha.current);var t=ao(Rr.current),n=gf(t,e.type);t!==n&&(ft(Ua,e),ft(Rr,n))}function um(e){Ua.current===e&&(gt(Rr),gt(Ua))}var St=Vs(0);function zc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yd=[];function dm(){for(var e=0;e<yd.length;e++)yd[e]._workInProgressVersionPrimary=null;yd.length=0}var lc=Zr.ReactCurrentDispatcher,wd=Zr.ReactCurrentBatchConfig,xo=0,kt=null,zt=null,Ht=null,Vc=!1,Ea=!1,Ga=0,bC=0;function ln(){throw Error(Q(321))}function fm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!pr(e[n],t[n]))return!1;return!0}function hm(e,t,n,r,s,o){if(xo=o,kt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lc.current=e===null||e.memoizedState===null?CC:jC,e=n(r,s),Ea){o=0;do{if(Ea=!1,Ga=0,25<=o)throw Error(Q(301));o+=1,Ht=zt=null,t.updateQueue=null,lc.current=EC,e=n(r,s)}while(Ea)}if(lc.current=qc,t=zt!==null&&zt.next!==null,xo=0,Ht=zt=kt=null,Vc=!1,t)throw Error(Q(300));return e}function mm(){var e=Ga!==0;return Ga=0,e}function Cr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?kt.memoizedState=Ht=e:Ht=Ht.next=e,Ht}function rr(){if(zt===null){var e=kt.alternate;e=e!==null?e.memoizedState:null}else e=zt.next;var t=Ht===null?kt.memoizedState:Ht.next;if(t!==null)Ht=t,zt=e;else{if(e===null)throw Error(Q(310));zt=e,e={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Ht===null?kt.memoizedState=Ht=e:Ht=Ht.next=e}return Ht}function Ka(e,t){return typeof t=="function"?t(e):t}function bd(e){var t=rr(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var r=zt,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var l=a=null,c=null,u=o;do{var f=u.lane;if((xo&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=r):c=c.next=h,kt.lanes|=f,yo|=f}u=u.next}while(u!==null&&u!==o);c===null?a=r:c.next=l,pr(r,t.memoizedState)||(Rn=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,kt.lanes|=o,yo|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Sd(e){var t=rr(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);pr(o,t.memoizedState)||(Rn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function jx(){}function Ex(e,t){var n=kt,r=rr(),s=t(),o=!pr(r.memoizedState,s);if(o&&(r.memoizedState=s,Rn=!0),r=r.queue,pm(Rx.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Ht!==null&&Ht.memoizedState.tag&1){if(n.flags|=2048,Qa(9,Tx.bind(null,n,r,s,t),void 0,null),Gt===null)throw Error(Q(349));xo&30||Px(n,t,s)}return s}function Px(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=kt.updateQueue,t===null?(t={lastEffect:null,stores:null},kt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Tx(e,t,n,r){t.value=n,t.getSnapshot=r,_x(t)&&Mx(e)}function Rx(e,t,n){return n(function(){_x(t)&&Mx(e)})}function _x(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pr(e,n)}catch{return!0}}function Mx(e){var t=Kr(e,1);t!==null&&mr(t,e,1,-1)}function kg(e){var t=Cr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:e},t.queue=e,e=e.dispatch=NC.bind(null,kt,e),[t.memoizedState,e]}function Qa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=kt.updateQueue,t===null?(t={lastEffect:null,stores:null},kt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ax(){return rr().memoizedState}function cc(e,t,n,r){var s=Cr();kt.flags|=e,s.memoizedState=Qa(1|t,n,void 0,r===void 0?null:r)}function yu(e,t,n,r){var s=rr();r=r===void 0?null:r;var o=void 0;if(zt!==null){var a=zt.memoizedState;if(o=a.destroy,r!==null&&fm(r,a.deps)){s.memoizedState=Qa(t,n,o,r);return}}kt.flags|=e,s.memoizedState=Qa(1|t,n,o,r)}function Ng(e,t){return cc(8390656,8,e,t)}function pm(e,t){return yu(2048,8,e,t)}function Lx(e,t){return yu(4,2,e,t)}function Ix(e,t){return yu(4,4,e,t)}function $x(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ox(e,t,n){return n=n!=null?n.concat([e]):null,yu(4,4,$x.bind(null,t,e),n)}function gm(){}function Dx(e,t){var n=rr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&fm(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Bx(e,t){var n=rr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&fm(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Fx(e,t,n){return xo&21?(pr(n,t)||(n=U0(),kt.lanes|=n,yo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Rn=!0),e.memoizedState=n)}function SC(e,t){var n=at;at=n!==0&&4>n?n:4,e(!0);var r=wd.transition;wd.transition={};try{e(!1),t()}finally{at=n,wd.transition=r}}function zx(){return rr().memoizedState}function kC(e,t,n){var r=Cs(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Vx(e))qx(t,n);else if(n=kx(e,t,n,r),n!==null){var s=kn();mr(n,e,r,s),Wx(n,t,r)}}function NC(e,t,n){var r=Cs(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vx(e))qx(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,l=o(a,n);if(s.hasEagerState=!0,s.eagerState=l,pr(l,a)){var c=t.interleaved;c===null?(s.next=s,am(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=kx(e,t,s,r),n!==null&&(s=kn(),mr(n,e,r,s),Wx(n,t,r))}}function Vx(e){var t=e.alternate;return e===kt||t!==null&&t===kt}function qx(e,t){Ea=Vc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wx(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Gh(e,n)}}var qc={readContext:nr,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},CC={readContext:nr,useCallback:function(e,t){return Cr().memoizedState=[e,t===void 0?null:t],e},useContext:nr,useEffect:Ng,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,cc(4194308,4,$x.bind(null,t,e),n)},useLayoutEffect:function(e,t){return cc(4194308,4,e,t)},useInsertionEffect:function(e,t){return cc(4,2,e,t)},useMemo:function(e,t){var n=Cr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Cr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=kC.bind(null,kt,e),[r.memoizedState,e]},useRef:function(e){var t=Cr();return e={current:e},t.memoizedState=e},useState:kg,useDebugValue:gm,useDeferredValue:function(e){return Cr().memoizedState=e},useTransition:function(){var e=kg(!1),t=e[0];return e=SC.bind(null,e[1]),Cr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=kt,s=Cr();if(wt){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=t(),Gt===null)throw Error(Q(349));xo&30||Px(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Ng(Rx.bind(null,r,o,e),[e]),r.flags|=2048,Qa(9,Tx.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Cr(),t=Gt.identifierPrefix;if(wt){var n=Wr,r=qr;n=(r&~(1<<32-hr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ga++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=bC++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},jC={readContext:nr,useCallback:Dx,useContext:nr,useEffect:pm,useImperativeHandle:Ox,useInsertionEffect:Lx,useLayoutEffect:Ix,useMemo:Bx,useReducer:bd,useRef:Ax,useState:function(){return bd(Ka)},useDebugValue:gm,useDeferredValue:function(e){var t=rr();return Fx(t,zt.memoizedState,e)},useTransition:function(){var e=bd(Ka)[0],t=rr().memoizedState;return[e,t]},useMutableSource:jx,useSyncExternalStore:Ex,useId:zx,unstable_isNewReconciler:!1},EC={readContext:nr,useCallback:Dx,useContext:nr,useEffect:pm,useImperativeHandle:Ox,useInsertionEffect:Lx,useLayoutEffect:Ix,useMemo:Bx,useReducer:Sd,useRef:Ax,useState:function(){return Sd(Ka)},useDebugValue:gm,useDeferredValue:function(e){var t=rr();return zt===null?t.memoizedState=e:Fx(t,zt.memoizedState,e)},useTransition:function(){var e=Sd(Ka)[0],t=rr().memoizedState;return[e,t]},useMutableSource:jx,useSyncExternalStore:Ex,useId:zx,unstable_isNewReconciler:!1};function lr(e,t){if(e&&e.defaultProps){t=Nt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Of(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Nt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var wu={isMounted:function(e){return(e=e._reactInternals)?Mo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=kn(),s=Cs(e),o=Ur(r,s);o.payload=t,n!=null&&(o.callback=n),t=ks(e,o,s),t!==null&&(mr(t,e,s,r),ac(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=kn(),s=Cs(e),o=Ur(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ks(e,o,s),t!==null&&(mr(t,e,s,r),ac(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=kn(),r=Cs(e),s=Ur(n,r);s.tag=2,t!=null&&(s.callback=t),t=ks(e,s,r),t!==null&&(mr(t,e,r,n),ac(t,e,r))}};function Cg(e,t,n,r,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!za(n,r)||!za(s,o):!0}function Ux(e,t,n){var r=!1,s=Ts,o=t.contextType;return typeof o=="object"&&o!==null?o=nr(o):(s=Mn(t)?go:pn.current,r=t.contextTypes,o=(r=r!=null)?Ni(e,s):Ts),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=wu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function jg(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wu.enqueueReplaceState(t,t.state,null)}function Df(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},lm(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=nr(o):(o=Mn(t)?go:pn.current,s.context=Ni(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Of(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&wu.enqueueReplaceState(s,s.state,null),Fc(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Pi(e,t){try{var n="",r=t;do n+=tN(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function kd(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Bf(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var PC=typeof WeakMap=="function"?WeakMap:Map;function Hx(e,t,n){n=Ur(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Uc||(Uc=!0,Qf=r),Bf(e,t)},n}function Gx(e,t,n){n=Ur(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Bf(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Bf(e,t),typeof r!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Eg(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new PC;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=VC.bind(null,e,t,n),t.then(e,e))}function Pg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Tg(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ur(-1,1),t.tag=2,ks(n,t,1))),n.lanes|=1),e)}var TC=Zr.ReactCurrentOwner,Rn=!1;function wn(e,t,n,r){t.child=e===null?Sx(t,null,n,r):ji(t,e.child,n,r)}function Rg(e,t,n,r,s){n=n.render;var o=t.ref;return hi(t,s),r=hm(e,t,n,r,o,s),n=mm(),e!==null&&!Rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Qr(e,t,s)):(wt&&n&&tm(t),t.flags|=1,wn(e,t,r,s),t.child)}function _g(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!Nm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Kx(e,t,o,r,s)):(e=hc(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:za,n(a,r)&&e.ref===t.ref)return Qr(e,t,s)}return t.flags|=1,e=js(o,r),e.ref=t.ref,e.return=t,t.child=e}function Kx(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(za(o,r)&&e.ref===t.ref)if(Rn=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(Rn=!0);else return t.lanes=e.lanes,Qr(e,t,s)}return Ff(e,t,n,r,s)}function Qx(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(ri,Bn),Bn|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ft(ri,Bn),Bn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ft(ri,Bn),Bn|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,ft(ri,Bn),Bn|=r;return wn(e,t,s,n),t.child}function Yx(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ff(e,t,n,r,s){var o=Mn(n)?go:pn.current;return o=Ni(t,o),hi(t,s),n=hm(e,t,n,r,o,s),r=mm(),e!==null&&!Rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Qr(e,t,s)):(wt&&r&&tm(t),t.flags|=1,wn(e,t,n,s),t.child)}function Mg(e,t,n,r,s){if(Mn(n)){var o=!0;Ic(t)}else o=!1;if(hi(t,s),t.stateNode===null)uc(e,t),Ux(t,n,r),Df(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=nr(u):(u=Mn(n)?go:pn.current,u=Ni(t,u));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&jg(t,a,r,u),fs=!1;var m=t.memoizedState;a.state=m,Fc(t,r,a,s),c=t.memoizedState,l!==r||m!==c||_n.current||fs?(typeof f=="function"&&(Of(t,n,f,r),c=t.memoizedState),(l=fs||Cg(t,n,l,r,m,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Nx(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:lr(t.type,l),a.props=u,h=t.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=nr(c):(c=Mn(n)?go:pn.current,c=Ni(t,c));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||m!==c)&&jg(t,a,r,c),fs=!1,m=t.memoizedState,a.state=m,Fc(t,r,a,s);var g=t.memoizedState;l!==h||m!==g||_n.current||fs?(typeof y=="function"&&(Of(t,n,y,r),g=t.memoizedState),(u=fs||Cg(t,n,u,r,m,g,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return zf(e,t,n,r,o,s)}function zf(e,t,n,r,s,o){Yx(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&vg(t,n,!1),Qr(e,t,o);r=t.stateNode,TC.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ji(t,e.child,null,o),t.child=ji(t,null,l,o)):wn(e,t,l,o),t.memoizedState=r.state,s&&vg(t,n,!0),t.child}function Xx(e){var t=e.stateNode;t.pendingContext?gg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gg(e,t.context,!1),cm(e,t.containerInfo)}function Ag(e,t,n,r,s){return Ci(),rm(s),t.flags|=256,wn(e,t,n,r),t.child}var Vf={dehydrated:null,treeContext:null,retryLane:0};function qf(e){return{baseLanes:e,cachePool:null,transitions:null}}function Zx(e,t,n){var r=t.pendingProps,s=St.current,o=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ft(St,s&1),e===null)return If(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=ku(a,r,0,null),e=fo(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=qf(n),t.memoizedState=Vf,e):vm(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return RC(e,t,a,r,l,s,n);if(o){o=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=js(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=js(l,o):(o=fo(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?qf(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Vf,r}return o=e.child,e=o.sibling,r=js(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function vm(e,t){return t=ku({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ol(e,t,n,r){return r!==null&&rm(r),ji(t,e.child,null,n),e=vm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function RC(e,t,n,r,s,o,a){if(n)return t.flags&256?(t.flags&=-257,r=kd(Error(Q(422))),Ol(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=ku({mode:"visible",children:r.children},s,0,null),o=fo(o,s,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&ji(t,e.child,null,a),t.child.memoizedState=qf(a),t.memoizedState=Vf,o);if(!(t.mode&1))return Ol(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(Q(419)),r=kd(o,r,void 0),Ol(e,t,a,r)}if(l=(a&e.childLanes)!==0,Rn||l){if(r=Gt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Kr(e,s),mr(r,e,s,-1))}return km(),r=kd(Error(Q(421))),Ol(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=qC.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,zn=Ss(s.nextSibling),Wn=t,wt=!0,dr=null,e!==null&&(Zn[Jn++]=qr,Zn[Jn++]=Wr,Zn[Jn++]=vo,qr=e.id,Wr=e.overflow,vo=t),t=vm(t,r.children),t.flags|=4096,t)}function Lg(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),$f(e.return,t,n)}function Nd(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function Jx(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(wn(e,t,r.children,n),r=St.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lg(e,n,t);else if(e.tag===19)Lg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ft(St,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&zc(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Nd(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&zc(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Nd(t,!0,n,null,o);break;case"together":Nd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function uc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),yo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,n=js(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=js(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function _C(e,t,n){switch(t.tag){case 3:Xx(t),Ci();break;case 5:Cx(t);break;case 1:Mn(t.type)&&Ic(t);break;case 4:cm(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ft(Dc,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ft(St,St.current&1),t.flags|=128,null):n&t.child.childLanes?Zx(e,t,n):(ft(St,St.current&1),e=Qr(e,t,n),e!==null?e.sibling:null);ft(St,St.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Jx(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ft(St,St.current),r)break;return null;case 22:case 23:return t.lanes=0,Qx(e,t,n)}return Qr(e,t,n)}var ey,Wf,ty,ny;ey=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wf=function(){};ty=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,ao(Rr.current);var o=null;switch(n){case"input":s=ff(e,s),r=ff(e,r),o=[];break;case"select":s=Nt({},s,{value:void 0}),r=Nt({},r,{value:void 0}),o=[];break;case"textarea":s=pf(e,s),r=pf(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ac)}vf(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(La.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(La.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&pt("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};ny=function(e,t,n,r){n!==r&&(t.flags|=4)};function la(e,t){if(!wt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function cn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function MC(e,t,n){var r=t.pendingProps;switch(nm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(t),null;case 1:return Mn(t.type)&&Lc(),cn(t),null;case 3:return r=t.stateNode,Ei(),gt(_n),gt(pn),dm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Il(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,dr!==null&&(Zf(dr),dr=null))),Wf(e,t),cn(t),null;case 5:um(t);var s=ao(Ha.current);if(n=t.type,e!==null&&t.stateNode!=null)ty(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Q(166));return cn(t),null}if(e=ao(Rr.current),Il(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[jr]=t,r[Wa]=o,e=(t.mode&1)!==0,n){case"dialog":pt("cancel",r),pt("close",r);break;case"iframe":case"object":case"embed":pt("load",r);break;case"video":case"audio":for(s=0;s<ya.length;s++)pt(ya[s],r);break;case"source":pt("error",r);break;case"img":case"image":case"link":pt("error",r),pt("load",r);break;case"details":pt("toggle",r);break;case"input":qp(r,o),pt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},pt("invalid",r);break;case"textarea":Up(r,o),pt("invalid",r)}vf(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Ll(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Ll(r.textContent,l,e),s=["children",""+l]):La.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&pt("scroll",r)}switch(n){case"input":jl(r),Wp(r,o,!0);break;case"textarea":jl(r),Hp(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ac)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=R0(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[jr]=t,e[Wa]=r,ey(e,t,!1,!1),t.stateNode=e;e:{switch(a=xf(n,r),n){case"dialog":pt("cancel",e),pt("close",e),s=r;break;case"iframe":case"object":case"embed":pt("load",e),s=r;break;case"video":case"audio":for(s=0;s<ya.length;s++)pt(ya[s],e);s=r;break;case"source":pt("error",e),s=r;break;case"img":case"image":case"link":pt("error",e),pt("load",e),s=r;break;case"details":pt("toggle",e),s=r;break;case"input":qp(e,r),s=ff(e,r),pt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Nt({},r,{value:void 0}),pt("invalid",e);break;case"textarea":Up(e,r),s=pf(e,r),pt("invalid",e);break;default:s=r}vf(n,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?A0(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&_0(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ia(e,c):typeof c=="number"&&Ia(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(La.hasOwnProperty(o)?c!=null&&o==="onScroll"&&pt("scroll",e):c!=null&&zh(e,o,c,a))}switch(n){case"input":jl(e),Wp(e,r,!1);break;case"textarea":jl(e),Hp(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ps(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?ci(e,!!r.multiple,o,!1):r.defaultValue!=null&&ci(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ac)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return cn(t),null;case 6:if(e&&t.stateNode!=null)ny(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Q(166));if(n=ao(Ha.current),ao(Rr.current),Il(t)){if(r=t.stateNode,n=t.memoizedProps,r[jr]=t,(o=r.nodeValue!==n)&&(e=Wn,e!==null))switch(e.tag){case 3:Ll(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ll(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jr]=t,t.stateNode=r}return cn(t),null;case 13:if(gt(St),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(wt&&zn!==null&&t.mode&1&&!(t.flags&128))wx(),Ci(),t.flags|=98560,o=!1;else if(o=Il(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(Q(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Q(317));o[jr]=t}else Ci(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;cn(t),o=!1}else dr!==null&&(Zf(dr),dr=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||St.current&1?Vt===0&&(Vt=3):km())),t.updateQueue!==null&&(t.flags|=4),cn(t),null);case 4:return Ei(),Wf(e,t),e===null&&Va(t.stateNode.containerInfo),cn(t),null;case 10:return im(t.type._context),cn(t),null;case 17:return Mn(t.type)&&Lc(),cn(t),null;case 19:if(gt(St),o=t.memoizedState,o===null)return cn(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)la(o,!1);else{if(Vt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=zc(e),a!==null){for(t.flags|=128,la(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ft(St,St.current&1|2),t.child}e=e.sibling}o.tail!==null&&At()>Ti&&(t.flags|=128,r=!0,la(o,!1),t.lanes=4194304)}else{if(!r)if(e=zc(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),la(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!wt)return cn(t),null}else 2*At()-o.renderingStartTime>Ti&&n!==1073741824&&(t.flags|=128,r=!0,la(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=At(),t.sibling=null,n=St.current,ft(St,r?n&1|2:n&1),t):(cn(t),null);case 22:case 23:return Sm(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Bn&1073741824&&(cn(t),t.subtreeFlags&6&&(t.flags|=8192)):cn(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function AC(e,t){switch(nm(t),t.tag){case 1:return Mn(t.type)&&Lc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ei(),gt(_n),gt(pn),dm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return um(t),null;case 13:if(gt(St),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));Ci()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gt(St),null;case 4:return Ei(),null;case 10:return im(t.type._context),null;case 22:case 23:return Sm(),null;case 24:return null;default:return null}}var Dl=!1,fn=!1,LC=typeof WeakSet=="function"?WeakSet:Set,ue=null;function ni(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pt(e,t,r)}else n.current=null}function Uf(e,t,n){try{n()}catch(r){Pt(e,t,r)}}var Ig=!1;function IC(e,t){if(Pf=Rc,e=ax(),em(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,f=0,h=e,m=null;t:for(;;){for(var y;h!==n||s!==0&&h.nodeType!==3||(l=a+s),h!==o||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(y=h.firstChild)!==null;)m=h,h=y;for(;;){if(h===e)break t;if(m===n&&++u===s&&(l=a),m===o&&++f===r&&(c=a),(y=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tf={focusedElem:e,selectionRange:n},Rc=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){t=ue;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,w=g.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?p:lr(t.type,p),w);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(k){Pt(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}return g=Ig,Ig=!1,g}function Pa(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Uf(t,n,o)}s=s.next}while(s!==r)}}function bu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Hf(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ry(e){var t=e.alternate;t!==null&&(e.alternate=null,ry(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jr],delete t[Wa],delete t[Mf],delete t[vC],delete t[xC])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sy(e){return e.tag===5||e.tag===3||e.tag===4}function $g(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||sy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ac));else if(r!==4&&(e=e.child,e!==null))for(Gf(e,t,n),e=e.sibling;e!==null;)Gf(e,t,n),e=e.sibling}function Kf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Kf(e,t,n),e=e.sibling;e!==null;)Kf(e,t,n),e=e.sibling}var Xt=null,cr=!1;function ss(e,t,n){for(n=n.child;n!==null;)oy(e,t,n),n=n.sibling}function oy(e,t,n){if(Tr&&typeof Tr.onCommitFiberUnmount=="function")try{Tr.onCommitFiberUnmount(hu,n)}catch{}switch(n.tag){case 5:fn||ni(n,t);case 6:var r=Xt,s=cr;Xt=null,ss(e,t,n),Xt=r,cr=s,Xt!==null&&(cr?(e=Xt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Xt.removeChild(n.stateNode));break;case 18:Xt!==null&&(cr?(e=Xt,n=n.stateNode,e.nodeType===8?vd(e.parentNode,n):e.nodeType===1&&vd(e,n),Ba(e)):vd(Xt,n.stateNode));break;case 4:r=Xt,s=cr,Xt=n.stateNode.containerInfo,cr=!0,ss(e,t,n),Xt=r,cr=s;break;case 0:case 11:case 14:case 15:if(!fn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Uf(n,t,a),s=s.next}while(s!==r)}ss(e,t,n);break;case 1:if(!fn&&(ni(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Pt(n,t,l)}ss(e,t,n);break;case 21:ss(e,t,n);break;case 22:n.mode&1?(fn=(r=fn)||n.memoizedState!==null,ss(e,t,n),fn=r):ss(e,t,n);break;default:ss(e,t,n)}}function Og(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new LC),t.forEach(function(r){var s=WC.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ir(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:Xt=l.stateNode,cr=!1;break e;case 3:Xt=l.stateNode.containerInfo,cr=!0;break e;case 4:Xt=l.stateNode.containerInfo,cr=!0;break e}l=l.return}if(Xt===null)throw Error(Q(160));oy(o,a,s),Xt=null,cr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Pt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)iy(t,e),t=t.sibling}function iy(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ir(t,e),kr(e),r&4){try{Pa(3,e,e.return),bu(3,e)}catch(p){Pt(e,e.return,p)}try{Pa(5,e,e.return)}catch(p){Pt(e,e.return,p)}}break;case 1:ir(t,e),kr(e),r&512&&n!==null&&ni(n,n.return);break;case 5:if(ir(t,e),kr(e),r&512&&n!==null&&ni(n,n.return),e.flags&32){var s=e.stateNode;try{Ia(s,"")}catch(p){Pt(e,e.return,p)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&P0(s,o),xf(l,a);var u=xf(l,o);for(a=0;a<c.length;a+=2){var f=c[a],h=c[a+1];f==="style"?A0(s,h):f==="dangerouslySetInnerHTML"?_0(s,h):f==="children"?Ia(s,h):zh(s,f,h,u)}switch(l){case"input":hf(s,o);break;case"textarea":T0(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?ci(s,!!o.multiple,y,!1):m!==!!o.multiple&&(o.defaultValue!=null?ci(s,!!o.multiple,o.defaultValue,!0):ci(s,!!o.multiple,o.multiple?[]:"",!1))}s[Wa]=o}catch(p){Pt(e,e.return,p)}}break;case 6:if(ir(t,e),kr(e),r&4){if(e.stateNode===null)throw Error(Q(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(p){Pt(e,e.return,p)}}break;case 3:if(ir(t,e),kr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ba(t.containerInfo)}catch(p){Pt(e,e.return,p)}break;case 4:ir(t,e),kr(e);break;case 13:ir(t,e),kr(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(wm=At())),r&4&&Og(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(fn=(u=fn)||f,ir(t,e),fn=u):ir(t,e),kr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(ue=e,f=e.child;f!==null;){for(h=ue=f;ue!==null;){switch(m=ue,y=m.child,m.tag){case 0:case 11:case 14:case 15:Pa(4,m,m.return);break;case 1:ni(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){Pt(r,n,p)}}break;case 5:ni(m,m.return);break;case 22:if(m.memoizedState!==null){Bg(h);continue}}y!==null?(y.return=m,ue=y):Bg(h)}f=f.sibling}e:for(f=null,h=e;;){if(h.tag===5){if(f===null){f=h;try{s=h.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=M0("display",a))}catch(p){Pt(e,e.return,p)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(p){Pt(e,e.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ir(t,e),kr(e),r&4&&Og(e);break;case 21:break;default:ir(t,e),kr(e)}}function kr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(sy(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ia(s,""),r.flags&=-33);var o=$g(e);Kf(e,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=$g(e);Gf(e,l,a);break;default:throw Error(Q(161))}}catch(c){Pt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $C(e,t,n){ue=e,ay(e)}function ay(e,t,n){for(var r=(e.mode&1)!==0;ue!==null;){var s=ue,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Dl;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||fn;l=Dl;var u=fn;if(Dl=a,(fn=c)&&!u)for(ue=s;ue!==null;)a=ue,c=a.child,a.tag===22&&a.memoizedState!==null?Fg(s):c!==null?(c.return=a,ue=c):Fg(s);for(;o!==null;)ue=o,ay(o),o=o.sibling;ue=s,Dl=l,fn=u}Dg(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ue=o):Dg(e)}}function Dg(e){for(;ue!==null;){var t=ue;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:fn||bu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!fn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:lr(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Sg(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Sg(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Ba(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}fn||t.flags&512&&Hf(t)}catch(m){Pt(t,t.return,m)}}if(t===e){ue=null;break}if(n=t.sibling,n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Bg(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Fg(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{bu(4,t)}catch(c){Pt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Pt(t,s,c)}}var o=t.return;try{Hf(t)}catch(c){Pt(t,o,c)}break;case 5:var a=t.return;try{Hf(t)}catch(c){Pt(t,a,c)}}}catch(c){Pt(t,t.return,c)}if(t===e){ue=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ue=l;break}ue=t.return}}var OC=Math.ceil,Wc=Zr.ReactCurrentDispatcher,xm=Zr.ReactCurrentOwner,tr=Zr.ReactCurrentBatchConfig,tt=0,Gt=null,Ot=null,Jt=0,Bn=0,ri=Vs(0),Vt=0,Ya=null,yo=0,Su=0,ym=0,Ta=null,Tn=null,wm=0,Ti=1/0,Br=null,Uc=!1,Qf=null,Ns=null,Bl=!1,vs=null,Hc=0,Ra=0,Yf=null,dc=-1,fc=0;function kn(){return tt&6?At():dc!==-1?dc:dc=At()}function Cs(e){return e.mode&1?tt&2&&Jt!==0?Jt&-Jt:wC.transition!==null?(fc===0&&(fc=U0()),fc):(e=at,e!==0||(e=window.event,e=e===void 0?16:Z0(e.type)),e):1}function mr(e,t,n,r){if(50<Ra)throw Ra=0,Yf=null,Error(Q(185));nl(e,n,r),(!(tt&2)||e!==Gt)&&(e===Gt&&(!(tt&2)&&(Su|=n),Vt===4&&ps(e,Jt)),An(e,r),n===1&&tt===0&&!(t.mode&1)&&(Ti=At()+500,xu&&qs()))}function An(e,t){var n=e.callbackNode;wN(e,t);var r=Tc(e,e===Gt?Jt:0);if(r===0)n!==null&&Qp(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Qp(n),t===1)e.tag===0?yC(zg.bind(null,e)):vx(zg.bind(null,e)),pC(function(){!(tt&6)&&qs()}),n=null;else{switch(H0(r)){case 1:n=Hh;break;case 4:n=q0;break;case 16:n=Pc;break;case 536870912:n=W0;break;default:n=Pc}n=py(n,ly.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ly(e,t){if(dc=-1,fc=0,tt&6)throw Error(Q(327));var n=e.callbackNode;if(mi()&&e.callbackNode!==n)return null;var r=Tc(e,e===Gt?Jt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Gc(e,r);else{t=r;var s=tt;tt|=2;var o=uy();(Gt!==e||Jt!==t)&&(Br=null,Ti=At()+500,uo(e,t));do try{FC();break}catch(l){cy(e,l)}while(!0);om(),Wc.current=o,tt=s,Ot!==null?t=0:(Gt=null,Jt=0,t=Vt)}if(t!==0){if(t===2&&(s=kf(e),s!==0&&(r=s,t=Xf(e,s))),t===1)throw n=Ya,uo(e,0),ps(e,r),An(e,At()),n;if(t===6)ps(e,r);else{if(s=e.current.alternate,!(r&30)&&!DC(s)&&(t=Gc(e,r),t===2&&(o=kf(e),o!==0&&(r=o,t=Xf(e,o))),t===1))throw n=Ya,uo(e,0),ps(e,r),An(e,At()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Q(345));case 2:so(e,Tn,Br);break;case 3:if(ps(e,r),(r&130023424)===r&&(t=wm+500-At(),10<t)){if(Tc(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){kn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=_f(so.bind(null,e,Tn,Br),t);break}so(e,Tn,Br);break;case 4:if(ps(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-hr(r);o=1<<a,a=t[a],a>s&&(s=a),r&=~o}if(r=s,r=At()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*OC(r/1960))-r,10<r){e.timeoutHandle=_f(so.bind(null,e,Tn,Br),r);break}so(e,Tn,Br);break;case 5:so(e,Tn,Br);break;default:throw Error(Q(329))}}}return An(e,At()),e.callbackNode===n?ly.bind(null,e):null}function Xf(e,t){var n=Ta;return e.current.memoizedState.isDehydrated&&(uo(e,t).flags|=256),e=Gc(e,t),e!==2&&(t=Tn,Tn=n,t!==null&&Zf(t)),e}function Zf(e){Tn===null?Tn=e:Tn.push.apply(Tn,e)}function DC(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!pr(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ps(e,t){for(t&=~ym,t&=~Su,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-hr(t),r=1<<n;e[n]=-1,t&=~r}}function zg(e){if(tt&6)throw Error(Q(327));mi();var t=Tc(e,0);if(!(t&1))return An(e,At()),null;var n=Gc(e,t);if(e.tag!==0&&n===2){var r=kf(e);r!==0&&(t=r,n=Xf(e,r))}if(n===1)throw n=Ya,uo(e,0),ps(e,t),An(e,At()),n;if(n===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,so(e,Tn,Br),An(e,At()),null}function bm(e,t){var n=tt;tt|=1;try{return e(t)}finally{tt=n,tt===0&&(Ti=At()+500,xu&&qs())}}function wo(e){vs!==null&&vs.tag===0&&!(tt&6)&&mi();var t=tt;tt|=1;var n=tr.transition,r=at;try{if(tr.transition=null,at=1,e)return e()}finally{at=r,tr.transition=n,tt=t,!(tt&6)&&qs()}}function Sm(){Bn=ri.current,gt(ri)}function uo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,mC(n)),Ot!==null)for(n=Ot.return;n!==null;){var r=n;switch(nm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Lc();break;case 3:Ei(),gt(_n),gt(pn),dm();break;case 5:um(r);break;case 4:Ei();break;case 13:gt(St);break;case 19:gt(St);break;case 10:im(r.type._context);break;case 22:case 23:Sm()}n=n.return}if(Gt=e,Ot=e=js(e.current,null),Jt=Bn=t,Vt=0,Ya=null,ym=Su=yo=0,Tn=Ta=null,io!==null){for(t=0;t<io.length;t++)if(n=io[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}io=null}return e}function cy(e,t){do{var n=Ot;try{if(om(),lc.current=qc,Vc){for(var r=kt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Vc=!1}if(xo=0,Ht=zt=kt=null,Ea=!1,Ga=0,xm.current=null,n===null||n.return===null){Vt=1,Ya=t,Ot=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Jt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=Pg(a);if(y!==null){y.flags&=-257,Tg(y,a,l,o,t),y.mode&1&&Eg(o,u,t),t=y,c=u;var g=t.updateQueue;if(g===null){var p=new Set;p.add(c),t.updateQueue=p}else g.add(c);break e}else{if(!(t&1)){Eg(o,u,t),km();break e}c=Error(Q(426))}}else if(wt&&l.mode&1){var w=Pg(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Tg(w,a,l,o,t),rm(Pi(c,l));break e}}o=c=Pi(c,l),Vt!==4&&(Vt=2),Ta===null?Ta=[o]:Ta.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var x=Hx(o,c,t);bg(o,x);break e;case 1:l=c;var v=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ns===null||!Ns.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var k=Gx(o,l,t);bg(o,k);break e}}o=o.return}while(o!==null)}fy(n)}catch(S){t=S,Ot===n&&n!==null&&(Ot=n=n.return);continue}break}while(!0)}function uy(){var e=Wc.current;return Wc.current=qc,e===null?qc:e}function km(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),Gt===null||!(yo&268435455)&&!(Su&268435455)||ps(Gt,Jt)}function Gc(e,t){var n=tt;tt|=2;var r=uy();(Gt!==e||Jt!==t)&&(Br=null,uo(e,t));do try{BC();break}catch(s){cy(e,s)}while(!0);if(om(),tt=n,Wc.current=r,Ot!==null)throw Error(Q(261));return Gt=null,Jt=0,Vt}function BC(){for(;Ot!==null;)dy(Ot)}function FC(){for(;Ot!==null&&!dN();)dy(Ot)}function dy(e){var t=my(e.alternate,e,Bn);e.memoizedProps=e.pendingProps,t===null?fy(e):Ot=t,xm.current=null}function fy(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=AC(n,t),n!==null){n.flags&=32767,Ot=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Vt=6,Ot=null;return}}else if(n=MC(n,t,Bn),n!==null){Ot=n;return}if(t=t.sibling,t!==null){Ot=t;return}Ot=t=e}while(t!==null);Vt===0&&(Vt=5)}function so(e,t,n){var r=at,s=tr.transition;try{tr.transition=null,at=1,zC(e,t,n,r)}finally{tr.transition=s,at=r}return null}function zC(e,t,n,r){do mi();while(vs!==null);if(tt&6)throw Error(Q(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(bN(e,o),e===Gt&&(Ot=Gt=null,Jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bl||(Bl=!0,py(Pc,function(){return mi(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=tr.transition,tr.transition=null;var a=at;at=1;var l=tt;tt|=4,xm.current=null,IC(e,n),iy(n,e),aC(Tf),Rc=!!Pf,Tf=Pf=null,e.current=n,$C(n),fN(),tt=l,at=a,tr.transition=o}else e.current=n;if(Bl&&(Bl=!1,vs=e,Hc=s),o=e.pendingLanes,o===0&&(Ns=null),pN(n.stateNode),An(e,At()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Uc)throw Uc=!1,e=Qf,Qf=null,e;return Hc&1&&e.tag!==0&&mi(),o=e.pendingLanes,o&1?e===Yf?Ra++:(Ra=0,Yf=e):Ra=0,qs(),null}function mi(){if(vs!==null){var e=H0(Hc),t=tr.transition,n=at;try{if(tr.transition=null,at=16>e?16:e,vs===null)var r=!1;else{if(e=vs,vs=null,Hc=0,tt&6)throw Error(Q(331));var s=tt;for(tt|=4,ue=e.current;ue!==null;){var o=ue,a=o.child;if(ue.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ue=u;ue!==null;){var f=ue;switch(f.tag){case 0:case 11:case 15:Pa(8,f,o)}var h=f.child;if(h!==null)h.return=f,ue=h;else for(;ue!==null;){f=ue;var m=f.sibling,y=f.return;if(ry(f),f===u){ue=null;break}if(m!==null){m.return=y,ue=m;break}ue=y}}}var g=o.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var w=p.sibling;p.sibling=null,p=w}while(p!==null)}}ue=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ue=a;else e:for(;ue!==null;){if(o=ue,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Pa(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,ue=x;break e}ue=o.return}}var v=e.current;for(ue=v;ue!==null;){a=ue;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,ue=b;else e:for(a=v;ue!==null;){if(l=ue,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:bu(9,l)}}catch(S){Pt(l,l.return,S)}if(l===a){ue=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,ue=k;break e}ue=l.return}}if(tt=s,qs(),Tr&&typeof Tr.onPostCommitFiberRoot=="function")try{Tr.onPostCommitFiberRoot(hu,e)}catch{}r=!0}return r}finally{at=n,tr.transition=t}}return!1}function Vg(e,t,n){t=Pi(n,t),t=Hx(e,t,1),e=ks(e,t,1),t=kn(),e!==null&&(nl(e,1,t),An(e,t))}function Pt(e,t,n){if(e.tag===3)Vg(e,e,n);else for(;t!==null;){if(t.tag===3){Vg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ns===null||!Ns.has(r))){e=Pi(n,e),e=Gx(t,e,1),t=ks(t,e,1),e=kn(),t!==null&&(nl(t,1,e),An(t,e));break}}t=t.return}}function VC(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=kn(),e.pingedLanes|=e.suspendedLanes&n,Gt===e&&(Jt&n)===n&&(Vt===4||Vt===3&&(Jt&130023424)===Jt&&500>At()-wm?uo(e,0):ym|=n),An(e,t)}function hy(e,t){t===0&&(e.mode&1?(t=Tl,Tl<<=1,!(Tl&130023424)&&(Tl=4194304)):t=1);var n=kn();e=Kr(e,t),e!==null&&(nl(e,t,n),An(e,n))}function qC(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),hy(e,n)}function WC(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(t),hy(e,n)}var my;my=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||_n.current)Rn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Rn=!1,_C(e,t,n);Rn=!!(e.flags&131072)}else Rn=!1,wt&&t.flags&1048576&&xx(t,Oc,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;uc(e,t),e=t.pendingProps;var s=Ni(t,pn.current);hi(t,n),s=hm(null,t,r,e,s,n);var o=mm();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mn(r)?(o=!0,Ic(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,lm(t),s.updater=wu,t.stateNode=s,s._reactInternals=t,Df(t,r,e,n),t=zf(null,t,r,!0,o,n)):(t.tag=0,wt&&o&&tm(t),wn(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(uc(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=HC(r),e=lr(r,e),s){case 0:t=Ff(null,t,r,e,n);break e;case 1:t=Mg(null,t,r,e,n);break e;case 11:t=Rg(null,t,r,e,n);break e;case 14:t=_g(null,t,r,lr(r.type,e),n);break e}throw Error(Q(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:lr(r,s),Ff(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:lr(r,s),Mg(e,t,r,s,n);case 3:e:{if(Xx(t),e===null)throw Error(Q(387));r=t.pendingProps,o=t.memoizedState,s=o.element,Nx(e,t),Fc(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Pi(Error(Q(423)),t),t=Ag(e,t,r,n,s);break e}else if(r!==s){s=Pi(Error(Q(424)),t),t=Ag(e,t,r,n,s);break e}else for(zn=Ss(t.stateNode.containerInfo.firstChild),Wn=t,wt=!0,dr=null,n=Sx(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ci(),r===s){t=Qr(e,t,n);break e}wn(e,t,r,n)}t=t.child}return t;case 5:return Cx(t),e===null&&If(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,Rf(r,s)?a=null:o!==null&&Rf(r,o)&&(t.flags|=32),Yx(e,t),wn(e,t,a,n),t.child;case 6:return e===null&&If(t),null;case 13:return Zx(e,t,n);case 4:return cm(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ji(t,null,r,n):wn(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:lr(r,s),Rg(e,t,r,s,n);case 7:return wn(e,t,t.pendingProps,n),t.child;case 8:return wn(e,t,t.pendingProps.children,n),t.child;case 12:return wn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,ft(Dc,r._currentValue),r._currentValue=a,o!==null)if(pr(o.value,a)){if(o.children===s.children&&!_n.current){t=Qr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Ur(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),$f(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Q(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),$f(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}wn(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,hi(t,n),s=nr(s),r=r(s),t.flags|=1,wn(e,t,r,n),t.child;case 14:return r=t.type,s=lr(r,t.pendingProps),s=lr(r.type,s),_g(e,t,r,s,n);case 15:return Kx(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:lr(r,s),uc(e,t),t.tag=1,Mn(r)?(e=!0,Ic(t)):e=!1,hi(t,n),Ux(t,r,s),Df(t,r,s,n),zf(null,t,r,!0,e,n);case 19:return Jx(e,t,n);case 22:return Qx(e,t,n)}throw Error(Q(156,t.tag))};function py(e,t){return V0(e,t)}function UC(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(e,t,n,r){return new UC(e,t,n,r)}function Nm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function HC(e){if(typeof e=="function")return Nm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===qh)return 11;if(e===Wh)return 14}return 2}function js(e,t){var n=e.alternate;return n===null?(n=er(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function hc(e,t,n,r,s,o){var a=2;if(r=e,typeof e=="function")Nm(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Go:return fo(n.children,s,o,t);case Vh:a=8,s|=8;break;case lf:return e=er(12,n,t,s|2),e.elementType=lf,e.lanes=o,e;case cf:return e=er(13,n,t,s),e.elementType=cf,e.lanes=o,e;case uf:return e=er(19,n,t,s),e.elementType=uf,e.lanes=o,e;case C0:return ku(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case k0:a=10;break e;case N0:a=9;break e;case qh:a=11;break e;case Wh:a=14;break e;case ds:a=16,r=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=er(a,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function fo(e,t,n,r){return e=er(7,e,r,t),e.lanes=n,e}function ku(e,t,n,r){return e=er(22,e,r,t),e.elementType=C0,e.lanes=n,e.stateNode={isHidden:!1},e}function Cd(e,t,n){return e=er(6,e,null,t),e.lanes=n,e}function jd(e,t,n){return t=er(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function GC(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=id(0),this.expirationTimes=id(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=id(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Cm(e,t,n,r,s,o,a,l,c){return e=new GC(e,t,n,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=er(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lm(o),e}function KC(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ho,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function gy(e){if(!e)return Ts;e=e._reactInternals;e:{if(Mo(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var n=e.type;if(Mn(n))return gx(e,n,t)}return t}function vy(e,t,n,r,s,o,a,l,c){return e=Cm(n,r,!0,e,s,o,a,l,c),e.context=gy(null),n=e.current,r=kn(),s=Cs(n),o=Ur(r,s),o.callback=t??null,ks(n,o,s),e.current.lanes=s,nl(e,s,r),An(e,r),e}function Nu(e,t,n,r){var s=t.current,o=kn(),a=Cs(s);return n=gy(n),t.context===null?t.context=n:t.pendingContext=n,t=Ur(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ks(s,t,a),e!==null&&(mr(e,s,a,o),ac(e,s,a)),a}function Kc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function jm(e,t){qg(e,t),(e=e.alternate)&&qg(e,t)}function QC(){return null}var xy=typeof reportError=="function"?reportError:function(e){console.error(e)};function Em(e){this._internalRoot=e}Cu.prototype.render=Em.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));Nu(e,t,null,null)};Cu.prototype.unmount=Em.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wo(function(){Nu(null,e,null,null)}),t[Gr]=null}};function Cu(e){this._internalRoot=e}Cu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Q0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ms.length&&t!==0&&t<ms[n].priority;n++);ms.splice(n,0,e),n===0&&X0(e)}};function Pm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ju(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Wg(){}function YC(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var u=Kc(a);o.call(u)}}var a=vy(t,r,e,0,null,!1,!1,"",Wg);return e._reactRootContainer=a,e[Gr]=a.current,Va(e.nodeType===8?e.parentNode:e),wo(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Kc(c);l.call(u)}}var c=Cm(e,0,!1,null,null,!1,!1,"",Wg);return e._reactRootContainer=c,e[Gr]=c.current,Va(e.nodeType===8?e.parentNode:e),wo(function(){Nu(t,c,n,r)}),c}function Eu(e,t,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var c=Kc(a);l.call(c)}}Nu(t,a,e,s)}else a=YC(n,t,e,s,r);return Kc(a)}G0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=xa(t.pendingLanes);n!==0&&(Gh(t,n|1),An(t,At()),!(tt&6)&&(Ti=At()+500,qs()))}break;case 13:wo(function(){var r=Kr(e,1);if(r!==null){var s=kn();mr(r,e,1,s)}}),jm(e,1)}};Kh=function(e){if(e.tag===13){var t=Kr(e,134217728);if(t!==null){var n=kn();mr(t,e,134217728,n)}jm(e,134217728)}};K0=function(e){if(e.tag===13){var t=Cs(e),n=Kr(e,t);if(n!==null){var r=kn();mr(n,e,t,r)}jm(e,t)}};Q0=function(){return at};Y0=function(e,t){var n=at;try{return at=e,t()}finally{at=n}};wf=function(e,t,n){switch(t){case"input":if(hf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=vu(r);if(!s)throw Error(Q(90));E0(r),hf(r,s)}}}break;case"textarea":T0(e,n);break;case"select":t=n.value,t!=null&&ci(e,!!n.multiple,t,!1)}};$0=bm;O0=wo;var XC={usingClientEntryPoint:!1,Events:[sl,Xo,vu,L0,I0,bm]},ca={findFiberByHostInstance:oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZC={bundleType:ca.bundleType,version:ca.version,rendererPackageName:ca.rendererPackageName,rendererConfig:ca.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=F0(e),e===null?null:e.stateNode},findFiberByHostInstance:ca.findFiberByHostInstance||QC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fl.isDisabled&&Fl.supportsFiber)try{hu=Fl.inject(ZC),Tr=Fl}catch{}}Gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XC;Gn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pm(t))throw Error(Q(200));return KC(e,t,null,n)};Gn.createRoot=function(e,t){if(!Pm(e))throw Error(Q(299));var n=!1,r="",s=xy;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Cm(e,1,!1,null,null,n,!1,r,s),e[Gr]=t.current,Va(e.nodeType===8?e.parentNode:e),new Em(t)};Gn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=F0(t),e=e===null?null:e.stateNode,e};Gn.flushSync=function(e){return wo(e)};Gn.hydrate=function(e,t,n){if(!ju(t))throw Error(Q(200));return Eu(null,e,t,!0,n)};Gn.hydrateRoot=function(e,t,n){if(!Pm(e))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=xy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=vy(t,null,e,1,n??null,s,!1,o,a),e[Gr]=t.current,Va(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Cu(t)};Gn.render=function(e,t,n){if(!ju(t))throw Error(Q(200));return Eu(null,e,t,!1,n)};Gn.unmountComponentAtNode=function(e){if(!ju(e))throw Error(Q(40));return e._reactRootContainer?(wo(function(){Eu(null,null,e,!1,function(){e._reactRootContainer=null,e[Gr]=null})}),!0):!1};Gn.unstable_batchedUpdates=bm;Gn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ju(n))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return Eu(e,t,n,!1,r)};Gn.version="18.3.1-next-f1338f8080-20240426";function yy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yy)}catch(e){console.error(e)}}yy(),y0.exports=Gn;var Ao=y0.exports;const JC=i0(Ao);var wy,Ug=Ao;wy=Ug.createRoot,Ug.hydrateRoot;const ej=1,tj=1e6,Tm="simulchess_toasts_enabled";function nj(){if(typeof window>"u")return!0;const e=localStorage.getItem(Tm);return e===null?!0:e==="true"}function rj(e){typeof window>"u"||localStorage.setItem(Tm,String(e))}let Ed=0;function sj(){return Ed=(Ed+1)%Number.MAX_SAFE_INTEGER,Ed.toString()}const Pd=new Map,Hg=e=>{if(Pd.has(e))return;const t=setTimeout(()=>{Pd.delete(e),_a({type:"REMOVE_TOAST",toastId:e})},tj);Pd.set(e,t)},oj=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,ej)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Hg(n):e.toasts.forEach(r=>{Hg(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},mc=[];let pc={toasts:[]};function _a(e){pc=oj(pc,e),mc.forEach(t=>{t(pc)})}function ij({...e}){if(!(typeof window<"u"?localStorage.getItem(Tm)!=="false":!0))return{id:"",dismiss:()=>{},update:()=>{}};const n=sj(),r=o=>_a({type:"UPDATE_TOAST",toast:{...o,id:n}}),s=()=>_a({type:"DISMISS_TOAST",toastId:n});return _a({type:"ADD_TOAST",toast:{...e,id:n,open:!0,onOpenChange:o=>{o||s()}}}),{id:n,dismiss:s,update:r}}function il(){const[e,t]=d.useState(pc);return d.useEffect(()=>(mc.push(t),()=>{const n=mc.indexOf(t);n>-1&&mc.splice(n,1)}),[e]),{...e,toast:ij,dismiss:n=>_a({type:"DISMISS_TOAST",toastId:n})}}function ye(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Gg(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Rm(...e){return t=>{let n=!1;const r=e.map(s=>{const o=Gg(s,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():Gg(e[s],null)}}}}function qe(...e){return d.useCallback(Rm(...e),e)}function aj(e,t){const n=d.createContext(t),r=o=>{const{children:a,...l}=o,c=d.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:a})};r.displayName=e+"Provider";function s(o){const a=d.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[r,s]}function Ln(e,t=[]){let n=[];function r(o,a){const l=d.createContext(a),c=n.length;n=[...n,a];const u=h=>{var x;const{scope:m,children:y,...g}=h,p=((x=m==null?void 0:m[e])==null?void 0:x[c])||l,w=d.useMemo(()=>g,Object.values(g));return i.jsx(p.Provider,{value:w,children:y})};u.displayName=o+"Provider";function f(h,m){var p;const y=((p=m==null?void 0:m[e])==null?void 0:p[c])||l,g=d.useContext(y);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[u,f]}const s=()=>{const o=n.map(a=>d.createContext(a));return function(l){const c=(l==null?void 0:l[e])||o;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,lj(s,...t)]}function lj(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(o)[`__scope${u}`];return{...l,...h}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function Ri(e){const t=uj(e),n=d.forwardRef((r,s)=>{const{children:o,...a}=r,l=d.Children.toArray(o),c=l.find(dj);if(c){const u=c.props.children,f=l.map(h=>h===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:h);return i.jsx(t,{...a,ref:s,children:d.isValidElement(u)?d.cloneElement(u,void 0,f):null})}return i.jsx(t,{...a,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}var cj=Ri("Slot");function uj(e){const t=d.forwardRef((n,r)=>{const{children:s,...o}=n;if(d.isValidElement(s)){const a=hj(s),l=fj(o,s.props);return s.type!==d.Fragment&&(l.ref=r?Rm(r,a):a),d.cloneElement(s,l)}return d.Children.count(s)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var by=Symbol("radix.slottable");function Sy(e){const t=({children:n})=>i.jsx(i.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=by,t}function dj(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===by}function fj(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...l)=>{o(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function hj(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function _m(e){const t=e+"CollectionProvider",[n,r]=Ln(t),[s,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=p=>{const{scope:w,children:x}=p,v=bn.useRef(null),b=bn.useRef(new Map).current;return i.jsx(s,{scope:w,itemMap:b,collectionRef:v,children:x})};a.displayName=t;const l=e+"CollectionSlot",c=Ri(l),u=bn.forwardRef((p,w)=>{const{scope:x,children:v}=p,b=o(l,x),k=qe(w,b.collectionRef);return i.jsx(c,{ref:k,children:v})});u.displayName=l;const f=e+"CollectionItemSlot",h="data-radix-collection-item",m=Ri(f),y=bn.forwardRef((p,w)=>{const{scope:x,children:v,...b}=p,k=bn.useRef(null),S=qe(w,k),C=o(f,x);return bn.useEffect(()=>(C.itemMap.set(k,{ref:k,...b}),()=>void C.itemMap.delete(k))),i.jsx(m,{[h]:"",ref:S,children:v})});y.displayName=f;function g(p){const w=o(e+"CollectionConsumer",p);return bn.useCallback(()=>{const v=w.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((C,N)=>b.indexOf(C.ref.current)-b.indexOf(N.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:u,ItemSlot:y},g,r]}var mj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Me=mj.reduce((e,t)=>{const n=Ri(`Primitive.${t}`),r=d.forwardRef((s,o)=>{const{asChild:a,...l}=s,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function ky(e,t){e&&Ao.flushSync(()=>e.dispatchEvent(t))}function Lt(e){const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function pj(e,t=globalThis==null?void 0:globalThis.document){const n=Lt(e);d.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var gj="DismissableLayer",Jf="dismissableLayer.update",vj="dismissableLayer.pointerDownOutside",xj="dismissableLayer.focusOutside",Kg,Ny=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),al=d.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=e,u=d.useContext(Ny),[f,h]=d.useState(null),m=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=d.useState({}),g=qe(t,N=>h(N)),p=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=p.indexOf(w),v=f?p.indexOf(f):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,k=v>=x,S=wj(N=>{const j=N.target,R=[...u.branches].some(T=>T.contains(j));!k||R||(s==null||s(N),a==null||a(N),N.defaultPrevented||l==null||l())},m),C=bj(N=>{const j=N.target;[...u.branches].some(T=>T.contains(j))||(o==null||o(N),a==null||a(N),N.defaultPrevented||l==null||l())},m);return pj(N=>{v===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},m),d.useEffect(()=>{if(f)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Kg=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),Qg(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Kg)}},[f,m,n,u]),d.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),Qg())},[f,u]),d.useEffect(()=>{const N=()=>y({});return document.addEventListener(Jf,N),()=>document.removeEventListener(Jf,N)},[]),i.jsx(Me.div,{...c,ref:g,style:{pointerEvents:b?k?"auto":"none":void 0,...e.style},onFocusCapture:ye(e.onFocusCapture,C.onFocusCapture),onBlurCapture:ye(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:ye(e.onPointerDownCapture,S.onPointerDownCapture)})});al.displayName=gj;var yj="DismissableLayerBranch",Cy=d.forwardRef((e,t)=>{const n=d.useContext(Ny),r=d.useRef(null),s=qe(t,r);return d.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),i.jsx(Me.div,{...e,ref:s})});Cy.displayName=yj;function wj(e,t=globalThis==null?void 0:globalThis.document){const n=Lt(e),r=d.useRef(!1),s=d.useRef(()=>{});return d.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let c=function(){jy(vj,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function bj(e,t=globalThis==null?void 0:globalThis.document){const n=Lt(e),r=d.useRef(!1);return d.useEffect(()=>{const s=o=>{o.target&&!r.current&&jy(xj,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Qg(){const e=new CustomEvent(Jf);document.dispatchEvent(e)}function jy(e,t,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?ky(s,o):s.dispatchEvent(o)}var Sj=al,kj=Cy,Kt=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{},Nj="Portal",Pu=d.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[s,o]=d.useState(!1);Kt(()=>o(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?JC.createPortal(i.jsx(Me.div,{...r,ref:t}),a):null});Pu.displayName=Nj;function Cj(e,t){return d.useReducer((n,r)=>t[n][r]??n,e)}var xr=e=>{const{present:t,children:n}=e,r=jj(t),s=typeof n=="function"?n({present:r.isPresent}):d.Children.only(n),o=qe(r.ref,Ej(s));return typeof n=="function"||r.isPresent?d.cloneElement(s,{ref:o}):null};xr.displayName="Presence";function jj(e){const[t,n]=d.useState(),r=d.useRef({}),s=d.useRef(e),o=d.useRef("none"),a=e?"mounted":"unmounted",[l,c]=Cj(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const u=zl(r.current);o.current=l==="mounted"?u:"none"},[l]),Kt(()=>{const u=r.current,f=s.current;if(f!==e){const m=o.current,y=zl(u);e?c("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&m!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Kt(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,h=y=>{const p=zl(r.current).includes(y.animationName);if(y.target===t&&p&&(c("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=y=>{y.target===t&&(o.current=zl(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:d.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function zl(e){return(e==null?void 0:e.animationName)||"none"}function Ej(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function bo({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,s]=Pj({defaultProp:t,onChange:n}),o=e!==void 0,a=o?e:r,l=Lt(n),c=d.useCallback(u=>{if(o){const h=typeof u=="function"?u(e):u;h!==e&&l(h)}else s(u)},[o,e,s,l]);return[a,c]}function Pj({defaultProp:e,onChange:t}){const n=d.useState(e),[r]=n,s=d.useRef(r),o=Lt(t);return d.useEffect(()=>{s.current!==r&&(o(r),s.current=r)},[r,s,o]),n}var Tj="VisuallyHidden",ll=d.forwardRef((e,t)=>i.jsx(Me.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));ll.displayName=Tj;var Rj=ll,Mm="ToastProvider",[Am,_j,Mj]=_m("Toast"),[Ey,A4]=Ln("Toast",[Mj]),[Aj,Tu]=Ey(Mm),Py=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:a}=e,[l,c]=d.useState(null),[u,f]=d.useState(0),h=d.useRef(!1),m=d.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Mm}\`. Expected non-empty \`string\`.`),i.jsx(Am.Provider,{scope:t,children:i.jsx(Aj,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:d.useCallback(()=>f(y=>y+1),[]),onToastRemove:d.useCallback(()=>f(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:a})})};Py.displayName=Mm;var Ty="ToastViewport",Lj=["F8"],eh="toast.viewportPause",th="toast.viewportResume",Ry=d.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=Lj,label:s="Notifications ({hotkey})",...o}=e,a=Tu(Ty,n),l=_j(n),c=d.useRef(null),u=d.useRef(null),f=d.useRef(null),h=d.useRef(null),m=qe(t,h,a.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=a.toastCount>0;d.useEffect(()=>{const w=x=>{var b;r.length!==0&&r.every(k=>x[k]||x.code===k)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),d.useEffect(()=>{const w=c.current,x=h.current;if(g&&w&&x){const v=()=>{if(!a.isClosePausedRef.current){const C=new CustomEvent(eh);x.dispatchEvent(C),a.isClosePausedRef.current=!0}},b=()=>{if(a.isClosePausedRef.current){const C=new CustomEvent(th);x.dispatchEvent(C),a.isClosePausedRef.current=!1}},k=C=>{!w.contains(C.relatedTarget)&&b()},S=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",v),w.addEventListener("focusout",k),w.addEventListener("pointermove",v),w.addEventListener("pointerleave",S),window.addEventListener("blur",v),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",v),w.removeEventListener("focusout",k),w.removeEventListener("pointermove",v),w.removeEventListener("pointerleave",S),window.removeEventListener("blur",v),window.removeEventListener("focus",b)}}},[g,a.isClosePausedRef]);const p=d.useCallback(({tabbingDirection:w})=>{const v=l().map(b=>{const k=b.ref.current,S=[k,...Gj(k)];return w==="forwards"?S:S.reverse()});return(w==="forwards"?v.reverse():v).flat()},[l]);return d.useEffect(()=>{const w=h.current;if(w){const x=v=>{var S,C,N;const b=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!b){const j=document.activeElement,R=v.shiftKey;if(v.target===w&&R){(S=u.current)==null||S.focus();return}const L=p({tabbingDirection:R?"backwards":"forwards"}),B=L.findIndex(I=>I===j);Td(L.slice(B+1))?v.preventDefault():R?(C=u.current)==null||C.focus():(N=f.current)==null||N.focus()}};return w.addEventListener("keydown",x),()=>w.removeEventListener("keydown",x)}},[l,p]),i.jsxs(kj,{ref:c,role:"region","aria-label":s.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&i.jsx(nh,{ref:u,onFocusFromOutsideViewport:()=>{const w=p({tabbingDirection:"forwards"});Td(w)}}),i.jsx(Am.Slot,{scope:n,children:i.jsx(Me.ol,{tabIndex:-1,...o,ref:m})}),g&&i.jsx(nh,{ref:f,onFocusFromOutsideViewport:()=>{const w=p({tabbingDirection:"backwards"});Td(w)}})]})});Ry.displayName=Ty;var _y="ToastFocusProxy",nh=d.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,o=Tu(_y,n);return i.jsx(ll,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=o.viewport)!=null&&u.contains(l))&&r()}})});nh.displayName=_y;var Ru="Toast",Ij="toast.swipeStart",$j="toast.swipeMove",Oj="toast.swipeCancel",Dj="toast.swipeEnd",My=d.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:o,...a}=e,[l=!0,c]=bo({prop:r,defaultProp:s,onChange:o});return i.jsx(xr,{present:n||l,children:i.jsx(zj,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:Lt(e.onPause),onResume:Lt(e.onResume),onSwipeStart:ye(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ye(e.onSwipeMove,u=>{const{x:f,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ye(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ye(e.onSwipeEnd,u=>{const{x:f,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});My.displayName=Ru;var[Bj,Fj]=Ey(Ru,{onClose(){}}),zj=d.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:o,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:f,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:y,...g}=e,p=Tu(Ru,n),[w,x]=d.useState(null),v=qe(t,I=>x(I)),b=d.useRef(null),k=d.useRef(null),S=s||p.duration,C=d.useRef(0),N=d.useRef(S),j=d.useRef(0),{onToastAdd:R,onToastRemove:T}=p,O=Lt(()=>{var D;(w==null?void 0:w.contains(document.activeElement))&&((D=p.viewport)==null||D.focus()),a()}),L=d.useCallback(I=>{!I||I===1/0||(window.clearTimeout(j.current),C.current=new Date().getTime(),j.current=window.setTimeout(O,I))},[O]);d.useEffect(()=>{const I=p.viewport;if(I){const D=()=>{L(N.current),u==null||u()},G=()=>{const q=new Date().getTime()-C.current;N.current=N.current-q,window.clearTimeout(j.current),c==null||c()};return I.addEventListener(eh,G),I.addEventListener(th,D),()=>{I.removeEventListener(eh,G),I.removeEventListener(th,D)}}},[p.viewport,S,c,u,L]),d.useEffect(()=>{o&&!p.isClosePausedRef.current&&L(S)},[o,S,p.isClosePausedRef,L]),d.useEffect(()=>(R(),()=>T()),[R,T]);const B=d.useMemo(()=>w?By(w):null,[w]);return p.viewport?i.jsxs(i.Fragment,{children:[B&&i.jsx(Vj,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:B}),i.jsx(Bj,{scope:n,onClose:O,children:Ao.createPortal(i.jsx(Am.ItemSlot,{scope:n,children:i.jsx(Sj,{asChild:!0,onEscapeKeyDown:ye(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||O(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(Me.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":p.swipeDirection,...g,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ye(e.onKeyDown,I=>{I.key==="Escape"&&(l==null||l(I.nativeEvent),I.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:ye(e.onPointerDown,I=>{I.button===0&&(b.current={x:I.clientX,y:I.clientY})}),onPointerMove:ye(e.onPointerMove,I=>{if(!b.current)return;const D=I.clientX-b.current.x,G=I.clientY-b.current.y,q=!!k.current,P=["left","right"].includes(p.swipeDirection),$=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,Z=P?$(0,D):0,U=P?0:$(0,G),ve=I.pointerType==="touch"?10:2,ke={x:Z,y:U},ce={originalEvent:I,delta:ke};q?(k.current=ke,Vl($j,h,ce,{discrete:!1})):Yg(ke,p.swipeDirection,ve)?(k.current=ke,Vl(Ij,f,ce,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(D)>ve||Math.abs(G)>ve)&&(b.current=null)}),onPointerUp:ye(e.onPointerUp,I=>{const D=k.current,G=I.target;if(G.hasPointerCapture(I.pointerId)&&G.releasePointerCapture(I.pointerId),k.current=null,b.current=null,D){const q=I.currentTarget,P={originalEvent:I,delta:D};Yg(D,p.swipeDirection,p.swipeThreshold)?Vl(Dj,y,P,{discrete:!0}):Vl(Oj,m,P,{discrete:!0}),q.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),Vj=e=>{const{__scopeToast:t,children:n,...r}=e,s=Tu(Ru,t),[o,a]=d.useState(!1),[l,c]=d.useState(!1);return Uj(()=>a(!0)),d.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(Pu,{asChild:!0,children:i.jsx(ll,{...r,children:o&&i.jsxs(i.Fragment,{children:[s.label," ",n]})})})},qj="ToastTitle",Ay=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(Me.div,{...r,ref:t})});Ay.displayName=qj;var Wj="ToastDescription",Ly=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(Me.div,{...r,ref:t})});Ly.displayName=Wj;var Iy="ToastAction",$y=d.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?i.jsx(Dy,{altText:n,asChild:!0,children:i.jsx(Lm,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Iy}\`. Expected non-empty \`string\`.`),null)});$y.displayName=Iy;var Oy="ToastClose",Lm=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=Fj(Oy,n);return i.jsx(Dy,{asChild:!0,children:i.jsx(Me.button,{type:"button",...r,ref:t,onClick:ye(e.onClick,s.onClose)})})});Lm.displayName=Oy;var Dy=d.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return i.jsx(Me.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function By(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),Hj(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const a=r.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...By(r))}}),t}function Vl(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?ky(s,o):s.dispatchEvent(o)}var Yg=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),o=r>s;return t==="left"||t==="right"?o&&r>n:!o&&s>n};function Uj(e=()=>{}){const t=Lt(e);Kt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function Hj(e){return e.nodeType===e.ELEMENT_NODE}function Gj(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Td(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var Kj=Py,Fy=Ry,zy=My,Vy=Ay,qy=Ly,Wy=$y,Uy=Lm;function Hy(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Hy(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Gy(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Hy(e))&&(r&&(r+=" "),r+=t);return r}const Xg=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Zg=Gy,_u=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return Zg(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:o}=t,a=Object.keys(s).map(u=>{const f=n==null?void 0:n[u],h=o==null?void 0:o[u];if(f===null)return null;const m=Xg(f)||Xg(h);return s[u][m]}),l=n&&Object.entries(n).reduce((u,f)=>{let[h,m]=f;return m===void 0||(u[h]=m),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,f)=>{let{class:h,className:m,...y}=f;return Object.entries(y).every(g=>{let[p,w]=g;return Array.isArray(w)?w.includes({...o,...l}[p]):{...o,...l}[p]===w})?[...u,h,m]:u},[]);return Zg(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ky=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=d.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:a,...l},c)=>d.createElement("svg",{ref:c,...Yj,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Ky("lucide",s),...l},[...a.map(([u,f])=>d.createElement(u,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=(e,t)=>{const n=d.forwardRef(({className:r,...s},o)=>d.createElement(Xj,{ref:o,iconNode:t,className:Ky(`lucide-${Qj(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=xe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=xe("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=xe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=xe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=xe("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=xe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=xe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=xe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=xe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=xe("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=xe("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=xe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=xe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=xe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=xe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=xe("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=xe("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=xe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=xe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=xe("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=xe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=xe("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=xe("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=xe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=xe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=xe("Infinity",[["path",{d:"M12 12c-2-2.67-4-4-6-4a4 4 0 1 0 0 8c2 0 4-1.33 6-4Zm0 0c2 2.67 4 4 6 4a4 4 0 0 0 0-8c-2 0-4 1.33-6 4Z",key:"1z0uae"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=xe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=xe("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=xe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=xe("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=xe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=xe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=xe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=xe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=xe("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=xe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=xe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=xe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=xe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=xe("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=xe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=xe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=xe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=xe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=xe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=xe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=xe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=xe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=xe("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=xe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Dm="-",k2=e=>{const t=C2(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const l=a.split(Dm);return l[0]===""&&l.length!==1&&l.shift(),hw(l,t)||N2(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},hw=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?hw(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const o=e.join(Dm);return(a=t.validators.find(({validator:l})=>l(o)))==null?void 0:a.classGroupId},nv=/^\[(.+)\]$/,N2=e=>{if(nv.test(e)){const t=nv.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},C2=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return E2(Object.entries(e.classGroups),n).forEach(([o,a])=>{rh(a,r,o,t)}),r},rh=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const o=s===""?t:rv(t,s);o.classGroupId=n;return}if(typeof s=="function"){if(j2(s)){rh(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,a])=>{rh(a,rv(t,o),n,r)})})},rv=(e,t)=>{let n=e;return t.split(Dm).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},j2=e=>e.isThemeGetter,E2=(e,t)=>t?e.map(([n,r])=>{const s=r.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,l])=>[t+a,l])):o);return[n,s]}):e,P2=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(o,a)=>{n.set(o,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(o){let a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return s(o,a),a},set(o,a){n.has(o)?n.set(o,a):s(o,a)}}},mw="!",T2=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],o=t.length,a=l=>{const c=[];let u=0,f=0,h;for(let w=0;w<l.length;w++){let x=l[w];if(u===0){if(x===s&&(r||l.slice(w,w+o)===t)){c.push(l.slice(f,w)),f=w+o;continue}if(x==="/"){h=w;continue}}x==="["?u++:x==="]"&&u--}const m=c.length===0?l:l.substring(f),y=m.startsWith(mw),g=y?m.substring(1):m,p=h&&h>f?h-f:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:g,maybePostfixModifierPosition:p}};return n?l=>n({className:l,parseClassName:a}):a},R2=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},_2=e=>({cache:P2(e.cacheSize),parseClassName:T2(e),...k2(e)}),M2=/\s+/,A2=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,o=[],a=e.trim().split(M2);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:f,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:y}=n(u);let g=!!y,p=r(g?m.substring(0,y):m);if(!p){if(!g){l=u+(l.length>0?" "+l:l);continue}if(p=r(m),!p){l=u+(l.length>0?" "+l:l);continue}g=!1}const w=R2(f).join(":"),x=h?w+mw:w,v=x+p;if(o.includes(v))continue;o.push(v);const b=s(p,g);for(let k=0;k<b.length;++k){const S=b[k];o.push(x+S)}l=u+(l.length>0?" "+l:l)}return l};function L2(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=pw(t))&&(r&&(r+=" "),r+=n);return r}const pw=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=pw(e[r]))&&(n&&(n+=" "),n+=t);return n};function I2(e,...t){let n,r,s,o=a;function a(c){const u=t.reduce((f,h)=>h(f),e());return n=_2(u),r=n.cache.get,s=n.cache.set,o=l,l(c)}function l(c){const u=r(c);if(u)return u;const f=A2(c,n);return s(c,f),f}return function(){return o(L2.apply(null,arguments))}}const mt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},gw=/^\[(?:([a-z-]+):)?(.+)\]$/i,$2=/^\d+\/\d+$/,O2=new Set(["px","full","screen"]),D2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,B2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,F2=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,z2=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,V2=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Dr=e=>gi(e)||O2.has(e)||$2.test(e),os=e=>Vi(e,"length",Y2),gi=e=>!!e&&!Number.isNaN(Number(e)),_d=e=>Vi(e,"number",gi),ua=e=>!!e&&Number.isInteger(Number(e)),q2=e=>e.endsWith("%")&&gi(e.slice(0,-1)),Ge=e=>gw.test(e),is=e=>D2.test(e),W2=new Set(["length","size","percentage"]),U2=e=>Vi(e,W2,vw),H2=e=>Vi(e,"position",vw),G2=new Set(["image","url"]),K2=e=>Vi(e,G2,Z2),Q2=e=>Vi(e,"",X2),da=()=>!0,Vi=(e,t,n)=>{const r=gw.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},Y2=e=>B2.test(e)&&!F2.test(e),vw=()=>!1,X2=e=>z2.test(e),Z2=e=>V2.test(e),J2=()=>{const e=mt("colors"),t=mt("spacing"),n=mt("blur"),r=mt("brightness"),s=mt("borderColor"),o=mt("borderRadius"),a=mt("borderSpacing"),l=mt("borderWidth"),c=mt("contrast"),u=mt("grayscale"),f=mt("hueRotate"),h=mt("invert"),m=mt("gap"),y=mt("gradientColorStops"),g=mt("gradientColorStopPositions"),p=mt("inset"),w=mt("margin"),x=mt("opacity"),v=mt("padding"),b=mt("saturate"),k=mt("scale"),S=mt("sepia"),C=mt("skew"),N=mt("space"),j=mt("translate"),R=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Ge,t],L=()=>[Ge,t],B=()=>["",Dr,os],I=()=>["auto",gi,Ge],D=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Ge],Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[gi,Ge];return{cacheSize:500,separator:":",theme:{colors:[da],spacing:[Dr,os],blur:["none","",is,Ge],brightness:U(),borderColor:[e],borderRadius:["none","","full",is,Ge],borderSpacing:L(),borderWidth:B(),contrast:U(),grayscale:$(),hueRotate:U(),invert:$(),gap:L(),gradientColorStops:[e],gradientColorStopPositions:[q2,os],inset:O(),margin:O(),opacity:U(),padding:L(),saturate:U(),scale:U(),sepia:$(),skew:U(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",Ge]}],container:["container"],columns:[{columns:[is]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...D(),Ge]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ua,Ge]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ge]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",ua,Ge]}],"grid-cols":[{"grid-cols":[da]}],"col-start-end":[{col:["auto",{span:["full",ua,Ge]},Ge]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[da]}],"row-start-end":[{row:["auto",{span:[ua,Ge]},Ge]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ge]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ge]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...P()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...P(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...P(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ge,t]}],"min-w":[{"min-w":[Ge,t,"min","max","fit"]}],"max-w":[{"max-w":[Ge,t,"none","full","min","max","fit","prose",{screen:[is]},is]}],h:[{h:[Ge,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ge,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ge,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ge,t,"auto","min","max","fit"]}],"font-size":[{text:["base",is,os]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_d]}],"font-family":[{font:[da]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ge]}],"line-clamp":[{"line-clamp":["none",gi,_d]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Dr,Ge]}],"list-image":[{"list-image":["none",Ge]}],"list-style-type":[{list:["none","disc","decimal",Ge]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Dr,os]}],"underline-offset":[{"underline-offset":["auto",Dr,Ge]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ge]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ge]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...D(),H2]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",U2]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},K2]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:G()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[Dr,Ge]}],"outline-w":[{outline:[Dr,os]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Dr,os]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",is,Q2]}],"shadow-color":[{shadow:[da]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",is,Ge]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ge]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",Ge]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ge]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[ua,Ge]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ge]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ge]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ge]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Dr,os,_d]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},eE=I2(J2);function Ie(...e){return eE(Gy(e))}const tE=Kj,xw=d.forwardRef(({className:e,...t},n)=>i.jsx(Fy,{ref:n,className:Ie("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:right-0 sm:flex-col md:max-w-[420px]",e),...t}));xw.displayName=Fy.displayName;const nE=_u("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),yw=d.forwardRef(({className:e,variant:t,...n},r)=>i.jsx(zy,{ref:r,className:Ie(nE({variant:t}),e),...n}));yw.displayName=zy.displayName;const rE=d.forwardRef(({className:e,...t},n)=>i.jsx(Wy,{ref:n,className:Ie("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));rE.displayName=Wy.displayName;const ww=d.forwardRef(({className:e,...t},n)=>i.jsx(Uy,{ref:n,className:Ie("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(So,{className:"h-4 w-4"})}));ww.displayName=Uy.displayName;const bw=d.forwardRef(({className:e,...t},n)=>i.jsx(Vy,{ref:n,className:Ie("text-sm font-semibold",e),...t}));bw.displayName=Vy.displayName;const Sw=d.forwardRef(({className:e,...t},n)=>i.jsx(qy,{ref:n,className:Ie("text-sm opacity-90",e),...t}));Sw.displayName=qy.displayName;function sE(){const{toasts:e}=il();return i.jsxs(tE,{children:[e.map(function({id:t,title:n,description:r,action:s,...o}){return i.jsxs(yw,{...o,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(bw,{children:n}),r&&i.jsx(Sw,{children:r})]}),s,i.jsx(ww,{})]},t)}),i.jsx(xw,{})]})}var oE=v0[" useId ".trim().toString()]||(()=>{}),iE=0;function Es(e){const[t,n]=d.useState(oE());return Kt(()=>{e||n(r=>r??String(iE++))},[e]),e||(t?`radix-${t}`:"")}const aE=["top","right","bottom","left"],_s=Math.min,Fn=Math.max,Qc=Math.round,ql=Math.floor,_r=e=>({x:e,y:e}),lE={left:"right",right:"left",bottom:"top",top:"bottom"},cE={start:"end",end:"start"};function sh(e,t,n){return Fn(e,_s(t,n))}function Yr(e,t){return typeof e=="function"?e(t):e}function Xr(e){return e.split("-")[0]}function qi(e){return e.split("-")[1]}function Bm(e){return e==="x"?"y":"x"}function Fm(e){return e==="y"?"height":"width"}function Ms(e){return["top","bottom"].includes(Xr(e))?"y":"x"}function zm(e){return Bm(Ms(e))}function uE(e,t,n){n===void 0&&(n=!1);const r=qi(e),s=zm(e),o=Fm(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=Yc(a)),[a,Yc(a)]}function dE(e){const t=Yc(e);return[oh(e),t,oh(t)]}function oh(e){return e.replace(/start|end/g,t=>cE[t])}function fE(e,t,n){const r=["left","right"],s=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?o:a;default:return[]}}function hE(e,t,n,r){const s=qi(e);let o=fE(Xr(e),n==="start",r);return s&&(o=o.map(a=>a+"-"+s),t&&(o=o.concat(o.map(oh)))),o}function Yc(e){return e.replace(/left|right|bottom|top/g,t=>lE[t])}function mE(e){return{top:0,right:0,bottom:0,left:0,...e}}function kw(e){return typeof e!="number"?mE(e):{top:e,right:e,bottom:e,left:e}}function Xc(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function sv(e,t,n){let{reference:r,floating:s}=e;const o=Ms(t),a=zm(t),l=Fm(a),c=Xr(t),u=o==="y",f=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let y;switch(c){case"top":y={x:f,y:r.y-s.height};break;case"bottom":y={x:f,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:h};break;case"left":y={x:r.x-s.width,y:h};break;default:y={x:r.x,y:r.y}}switch(qi(t)){case"start":y[a]-=m*(n&&u?-1:1);break;case"end":y[a]+=m*(n&&u?-1:1);break}return y}const pE=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:a}=n,l=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:h}=sv(u,r,c),m=r,y={},g=0;for(let p=0;p<l.length;p++){const{name:w,fn:x}=l[p],{x:v,y:b,data:k,reset:S}=await x({x:f,y:h,initialPlacement:r,placement:m,strategy:s,middlewareData:y,rects:u,platform:a,elements:{reference:e,floating:t}});f=v??f,h=b??h,y={...y,[w]:{...y[w],...k}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(u=S.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:f,y:h}=sv(u,m,c)),p=-1)}return{x:f,y:h,placement:m,strategy:s,middlewareData:y}};async function Xa(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:m=!1,padding:y=0}=Yr(t,e),g=kw(y),w=l[m?h==="floating"?"reference":"floating":h],x=Xc(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(w)))==null||n?w:w.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),v=h==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),k=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},S=Xc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:b,strategy:c}):v);return{top:(x.top-S.top+g.top)/k.y,bottom:(S.bottom-x.bottom+g.bottom)/k.y,left:(x.left-S.left+g.left)/k.x,right:(S.right-x.right+g.right)/k.x}}const gE=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:f=0}=Yr(e,t)||{};if(u==null)return{};const h=kw(f),m={x:n,y:r},y=zm(s),g=Fm(y),p=await a.getDimensions(u),w=y==="y",x=w?"top":"left",v=w?"bottom":"right",b=w?"clientHeight":"clientWidth",k=o.reference[g]+o.reference[y]-m[y]-o.floating[g],S=m[y]-o.reference[y],C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let N=C?C[b]:0;(!N||!await(a.isElement==null?void 0:a.isElement(C)))&&(N=l.floating[b]||o.floating[g]);const j=k/2-S/2,R=N/2-p[g]/2-1,T=_s(h[x],R),O=_s(h[v],R),L=T,B=N-p[g]-O,I=N/2-p[g]/2+j,D=sh(L,I,B),G=!c.arrow&&qi(s)!=null&&I!==D&&o.reference[g]/2-(I<L?T:O)-p[g]/2<0,q=G?I<L?I-L:I-B:0;return{[y]:m[y]+q,data:{[y]:D,centerOffset:I-D-q,...G&&{alignmentOffset:q}},reset:G}}}),vE=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,...w}=Yr(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const x=Xr(s),v=Ms(l),b=Xr(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=m||(b||!p?[Yc(l)]:dE(l)),C=g!=="none";!m&&C&&S.push(...hE(l,p,g,k));const N=[l,...S],j=await Xa(t,w),R=[];let T=((r=o.flip)==null?void 0:r.overflows)||[];if(f&&R.push(j[x]),h){const I=uE(s,a,k);R.push(j[I[0]],j[I[1]])}if(T=[...T,{placement:s,overflows:R}],!R.every(I=>I<=0)){var O,L;const I=(((O=o.flip)==null?void 0:O.index)||0)+1,D=N[I];if(D)return{data:{index:I,overflows:T},reset:{placement:D}};let G=(L=T.filter(q=>q.overflows[0]<=0).sort((q,P)=>q.overflows[1]-P.overflows[1])[0])==null?void 0:L.placement;if(!G)switch(y){case"bestFit":{var B;const q=(B=T.filter(P=>{if(C){const $=Ms(P.placement);return $===v||$==="y"}return!0}).map(P=>[P.placement,P.overflows.filter($=>$>0).reduce(($,Z)=>$+Z,0)]).sort((P,$)=>P[1]-$[1])[0])==null?void 0:B[0];q&&(G=q);break}case"initialPlacement":G=l;break}if(s!==G)return{reset:{placement:G}}}return{}}}};function ov(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function iv(e){return aE.some(t=>e[t]>=0)}const xE=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Yr(e,t);switch(r){case"referenceHidden":{const o=await Xa(t,{...s,elementContext:"reference"}),a=ov(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:iv(a)}}}case"escaped":{const o=await Xa(t,{...s,altBoundary:!0}),a=ov(o,n.floating);return{data:{escapedOffsets:a,escaped:iv(a)}}}default:return{}}}}};async function yE(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Xr(n),l=qi(n),c=Ms(n)==="y",u=["left","top"].includes(a)?-1:1,f=o&&c?-1:1,h=Yr(t,e);let{mainAxis:m,crossAxis:y,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof g=="number"&&(y=l==="end"?g*-1:g),c?{x:y*f,y:m*u}:{x:m*u,y:y*f}}const wE=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:a,middlewareData:l}=t,c=await yE(t,e);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:a}}}}},bE=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:w=>{let{x,y:v}=w;return{x,y:v}}},...c}=Yr(e,t),u={x:n,y:r},f=await Xa(t,c),h=Ms(Xr(s)),m=Bm(h);let y=u[m],g=u[h];if(o){const w=m==="y"?"top":"left",x=m==="y"?"bottom":"right",v=y+f[w],b=y-f[x];y=sh(v,y,b)}if(a){const w=h==="y"?"top":"left",x=h==="y"?"bottom":"right",v=g+f[w],b=g-f[x];g=sh(v,g,b)}const p=l.fn({...t,[m]:y,[h]:g});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[m]:o,[h]:a}}}}}},SE=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Yr(e,t),f={x:n,y:r},h=Ms(s),m=Bm(h);let y=f[m],g=f[h];const p=Yr(l,t),w=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const b=m==="y"?"height":"width",k=o.reference[m]-o.floating[b]+w.mainAxis,S=o.reference[m]+o.reference[b]-w.mainAxis;y<k?y=k:y>S&&(y=S)}if(u){var x,v;const b=m==="y"?"width":"height",k=["top","left"].includes(Xr(s)),S=o.reference[h]-o.floating[b]+(k&&((x=a.offset)==null?void 0:x[h])||0)+(k?0:w.crossAxis),C=o.reference[h]+o.reference[b]+(k?0:((v=a.offset)==null?void 0:v[h])||0)-(k?w.crossAxis:0);g<S?g=S:g>C&&(g=C)}return{[m]:y,[h]:g}}}},kE=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:a,elements:l}=t,{apply:c=()=>{},...u}=Yr(e,t),f=await Xa(t,u),h=Xr(s),m=qi(s),y=Ms(s)==="y",{width:g,height:p}=o.floating;let w,x;h==="top"||h==="bottom"?(w=h,x=m===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(x=h,w=m==="end"?"top":"bottom");const v=p-f.top-f.bottom,b=g-f.left-f.right,k=_s(p-f[w],v),S=_s(g-f[x],b),C=!t.middlewareData.shift;let N=k,j=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(j=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(N=v),C&&!m){const T=Fn(f.left,0),O=Fn(f.right,0),L=Fn(f.top,0),B=Fn(f.bottom,0);y?j=g-2*(T!==0||O!==0?T+O:Fn(f.left,f.right)):N=p-2*(L!==0||B!==0?L+B:Fn(f.top,f.bottom))}await c({...t,availableWidth:j,availableHeight:N});const R=await a.getDimensions(l.floating);return g!==R.width||p!==R.height?{reset:{rects:!0}}:{}}}};function Au(){return typeof window<"u"}function Wi(e){return Nw(e)?(e.nodeName||"").toLowerCase():"#document"}function Un(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Lr(e){var t;return(t=(Nw(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Nw(e){return Au()?e instanceof Node||e instanceof Un(e).Node:!1}function gr(e){return Au()?e instanceof Element||e instanceof Un(e).Element:!1}function Ar(e){return Au()?e instanceof HTMLElement||e instanceof Un(e).HTMLElement:!1}function av(e){return!Au()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Un(e).ShadowRoot}function ul(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=vr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function NE(e){return["table","td","th"].includes(Wi(e))}function Lu(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Vm(e){const t=qm(),n=gr(e)?vr(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function CE(e){let t=As(e);for(;Ar(t)&&!_i(t);){if(Vm(t))return t;if(Lu(t))return null;t=As(t)}return null}function qm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function _i(e){return["html","body","#document"].includes(Wi(e))}function vr(e){return Un(e).getComputedStyle(e)}function Iu(e){return gr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function As(e){if(Wi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||av(e)&&e.host||Lr(e);return av(t)?t.host:t}function Cw(e){const t=As(e);return _i(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ar(t)&&ul(t)?t:Cw(t)}function Za(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=Cw(e),o=s===((r=e.ownerDocument)==null?void 0:r.body),a=Un(s);if(o){const l=ih(a);return t.concat(a,a.visualViewport||[],ul(s)?s:[],l&&n?Za(l):[])}return t.concat(s,Za(s,[],n))}function ih(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function jw(e){const t=vr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Ar(e),o=s?e.offsetWidth:n,a=s?e.offsetHeight:r,l=Qc(n)!==o||Qc(r)!==a;return l&&(n=o,r=a),{width:n,height:r,$:l}}function Wm(e){return gr(e)?e:e.contextElement}function vi(e){const t=Wm(e);if(!Ar(t))return _r(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=jw(t);let a=(o?Qc(n.width):n.width)/r,l=(o?Qc(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const jE=_r(0);function Ew(e){const t=Un(e);return!qm()||!t.visualViewport?jE:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function EE(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Un(e)?!1:t}function ko(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=Wm(e);let a=_r(1);t&&(r?gr(r)&&(a=vi(r)):a=vi(e));const l=EE(o,n,r)?Ew(o):_r(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,f=s.width/a.x,h=s.height/a.y;if(o){const m=Un(o),y=r&&gr(r)?Un(r):r;let g=m,p=ih(g);for(;p&&r&&y!==g;){const w=vi(p),x=p.getBoundingClientRect(),v=vr(p),b=x.left+(p.clientLeft+parseFloat(v.paddingLeft))*w.x,k=x.top+(p.clientTop+parseFloat(v.paddingTop))*w.y;c*=w.x,u*=w.y,f*=w.x,h*=w.y,c+=b,u+=k,g=Un(p),p=ih(g)}}return Xc({width:f,height:h,x:c,y:u})}function Um(e,t){const n=Iu(e).scrollLeft;return t?t.left+n:ko(Lr(e)).left+n}function Pw(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:Um(e,r)),o=r.top+t.scrollTop;return{x:s,y:o}}function PE(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o=s==="fixed",a=Lr(r),l=t?Lu(t.floating):!1;if(r===a||l&&o)return n;let c={scrollLeft:0,scrollTop:0},u=_r(1);const f=_r(0),h=Ar(r);if((h||!h&&!o)&&((Wi(r)!=="body"||ul(a))&&(c=Iu(r)),Ar(r))){const y=ko(r);u=vi(r),f.x=y.x+r.clientLeft,f.y=y.y+r.clientTop}const m=a&&!h&&!o?Pw(a,c,!0):_r(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x+m.x,y:n.y*u.y-c.scrollTop*u.y+f.y+m.y}}function TE(e){return Array.from(e.getClientRects())}function RE(e){const t=Lr(e),n=Iu(e),r=e.ownerDocument.body,s=Fn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Fn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Um(e);const l=-n.scrollTop;return vr(r).direction==="rtl"&&(a+=Fn(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:a,y:l}}function _E(e,t){const n=Un(e),r=Lr(e),s=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){o=s.width,a=s.height;const u=qm();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:o,height:a,x:l,y:c}}function ME(e,t){const n=ko(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=Ar(e)?vi(e):_r(1),a=e.clientWidth*o.x,l=e.clientHeight*o.y,c=s*o.x,u=r*o.y;return{width:a,height:l,x:c,y:u}}function lv(e,t,n){let r;if(t==="viewport")r=_E(e,n);else if(t==="document")r=RE(Lr(e));else if(gr(t))r=ME(t,n);else{const s=Ew(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Xc(r)}function Tw(e,t){const n=As(e);return n===t||!gr(n)||_i(n)?!1:vr(n).position==="fixed"||Tw(n,t)}function AE(e,t){const n=t.get(e);if(n)return n;let r=Za(e,[],!1).filter(l=>gr(l)&&Wi(l)!=="body"),s=null;const o=vr(e).position==="fixed";let a=o?As(e):e;for(;gr(a)&&!_i(a);){const l=vr(a),c=Vm(a);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||ul(a)&&!c&&Tw(e,a))?r=r.filter(f=>f!==a):s=l,a=As(a)}return t.set(e,r),r}function LE(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const a=[...n==="clippingAncestors"?Lu(t)?[]:AE(t,this._c):[].concat(n),r],l=a[0],c=a.reduce((u,f)=>{const h=lv(t,f,s);return u.top=Fn(h.top,u.top),u.right=_s(h.right,u.right),u.bottom=_s(h.bottom,u.bottom),u.left=Fn(h.left,u.left),u},lv(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function IE(e){const{width:t,height:n}=jw(e);return{width:t,height:n}}function $E(e,t,n){const r=Ar(t),s=Lr(t),o=n==="fixed",a=ko(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=_r(0);if(r||!r&&!o)if((Wi(t)!=="body"||ul(s))&&(l=Iu(t)),r){const m=ko(t,!0,o,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else s&&(c.x=Um(s));const u=s&&!r&&!o?Pw(s,l):_r(0),f=a.left+l.scrollLeft-c.x-u.x,h=a.top+l.scrollTop-c.y-u.y;return{x:f,y:h,width:a.width,height:a.height}}function Md(e){return vr(e).position==="static"}function cv(e,t){if(!Ar(e)||vr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Lr(e)===n&&(n=n.ownerDocument.body),n}function Rw(e,t){const n=Un(e);if(Lu(e))return n;if(!Ar(e)){let s=As(e);for(;s&&!_i(s);){if(gr(s)&&!Md(s))return s;s=As(s)}return n}let r=cv(e,t);for(;r&&NE(r)&&Md(r);)r=cv(r,t);return r&&_i(r)&&Md(r)&&!Vm(r)?n:r||CE(e)||n}const OE=async function(e){const t=this.getOffsetParent||Rw,n=this.getDimensions,r=await n(e.floating);return{reference:$E(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function DE(e){return vr(e).direction==="rtl"}const BE={convertOffsetParentRelativeRectToViewportRelativeRect:PE,getDocumentElement:Lr,getClippingRect:LE,getOffsetParent:Rw,getElementRects:OE,getClientRects:TE,getDimensions:IE,getScale:vi,isElement:gr,isRTL:DE};function _w(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function FE(e,t){let n=null,r;const s=Lr(e);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=e.getBoundingClientRect(),{left:f,top:h,width:m,height:y}=u;if(l||t(),!m||!y)return;const g=ql(h),p=ql(s.clientWidth-(f+m)),w=ql(s.clientHeight-(h+y)),x=ql(f),b={rootMargin:-g+"px "+-p+"px "+-w+"px "+-x+"px",threshold:Fn(0,_s(1,c))||1};let k=!0;function S(C){const N=C[0].intersectionRatio;if(N!==c){if(!k)return a();N?a(!1,N):r=setTimeout(()=>{a(!1,1e-7)},1e3)}N===1&&!_w(u,e.getBoundingClientRect())&&a(),k=!1}try{n=new IntersectionObserver(S,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(S,b)}n.observe(e)}return a(!0),o}function zE(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Wm(e),f=s||o?[...u?Za(u):[],...Za(t)]:[];f.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),o&&x.addEventListener("resize",n)});const h=u&&l?FE(u,n):null;let m=-1,y=null;a&&(y=new ResizeObserver(x=>{let[v]=x;v&&v.target===u&&y&&(y.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=y)==null||b.observe(t)})),n()}),u&&!c&&y.observe(u),y.observe(t));let g,p=c?ko(e):null;c&&w();function w(){const x=ko(e);p&&!_w(p,x)&&n(),p=x,g=requestAnimationFrame(w)}return n(),()=>{var x;f.forEach(v=>{s&&v.removeEventListener("scroll",n),o&&v.removeEventListener("resize",n)}),h==null||h(),(x=y)==null||x.disconnect(),y=null,c&&cancelAnimationFrame(g)}}const VE=wE,qE=bE,WE=vE,UE=kE,HE=xE,uv=gE,GE=SE,KE=(e,t,n)=>{const r=new Map,s={platform:BE,...n},o={...s.platform,_c:r};return pE(e,t,{...s,platform:o})};var vc=typeof document<"u"?d.useLayoutEffect:d.useEffect;function Zc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Zc(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!Zc(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Mw(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function dv(e,t){const n=Mw(e);return Math.round(t*n)/n}function Ad(e){const t=d.useRef(e);return vc(()=>{t.current=e}),t}function QE(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[f,h]=d.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,y]=d.useState(r);Zc(m,r)||y(r);const[g,p]=d.useState(null),[w,x]=d.useState(null),v=d.useCallback(P=>{P!==C.current&&(C.current=P,p(P))},[]),b=d.useCallback(P=>{P!==N.current&&(N.current=P,x(P))},[]),k=o||g,S=a||w,C=d.useRef(null),N=d.useRef(null),j=d.useRef(f),R=c!=null,T=Ad(c),O=Ad(s),L=Ad(u),B=d.useCallback(()=>{if(!C.current||!N.current)return;const P={placement:t,strategy:n,middleware:m};O.current&&(P.platform=O.current),KE(C.current,N.current,P).then($=>{const Z={...$,isPositioned:L.current!==!1};I.current&&!Zc(j.current,Z)&&(j.current=Z,Ao.flushSync(()=>{h(Z)}))})},[m,t,n,O,L]);vc(()=>{u===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,h(P=>({...P,isPositioned:!1})))},[u]);const I=d.useRef(!1);vc(()=>(I.current=!0,()=>{I.current=!1}),[]),vc(()=>{if(k&&(C.current=k),S&&(N.current=S),k&&S){if(T.current)return T.current(k,S,B);B()}},[k,S,B,T,R]);const D=d.useMemo(()=>({reference:C,floating:N,setReference:v,setFloating:b}),[v,b]),G=d.useMemo(()=>({reference:k,floating:S}),[k,S]),q=d.useMemo(()=>{const P={position:n,left:0,top:0};if(!G.floating)return P;const $=dv(G.floating,f.x),Z=dv(G.floating,f.y);return l?{...P,transform:"translate("+$+"px, "+Z+"px)",...Mw(G.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:Z}},[n,l,G.floating,f.x,f.y]);return d.useMemo(()=>({...f,update:B,refs:D,elements:G,floatingStyles:q}),[f,B,D,G,q])}const YE=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?uv({element:r.current,padding:s}).fn(n):{}:r?uv({element:r,padding:s}).fn(n):{}}}},XE=(e,t)=>({...VE(e),options:[e,t]}),ZE=(e,t)=>({...qE(e),options:[e,t]}),JE=(e,t)=>({...GE(e),options:[e,t]}),eP=(e,t)=>({...WE(e),options:[e,t]}),tP=(e,t)=>({...UE(e),options:[e,t]}),nP=(e,t)=>({...HE(e),options:[e,t]}),rP=(e,t)=>({...YE(e),options:[e,t]});var sP="Arrow",Aw=d.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...o}=e;return i.jsx(Me.svg,{...o,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});Aw.displayName=sP;var oP=Aw;function Hm(e){const[t,n]=d.useState(void 0);return Kt(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;n({width:a,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Gm="Popper",[Lw,$u]=Ln(Gm),[iP,Iw]=Lw(Gm),$w=e=>{const{__scopePopper:t,children:n}=e,[r,s]=d.useState(null);return i.jsx(iP,{scope:t,anchor:r,onAnchorChange:s,children:n})};$w.displayName=Gm;var Ow="PopperAnchor",Dw=d.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,o=Iw(Ow,n),a=d.useRef(null),l=qe(t,a);return d.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:i.jsx(Me.div,{...s,ref:l})});Dw.displayName=Ow;var Km="PopperContent",[aP,lP]=Lw(Km),Bw=d.forwardRef((e,t)=>{var W,X,J,he,de,Ce;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:y="optimized",onPlaced:g,...p}=e,w=Iw(Km,n),[x,v]=d.useState(null),b=qe(t,He=>v(He)),[k,S]=d.useState(null),C=Hm(k),N=(C==null?void 0:C.width)??0,j=(C==null?void 0:C.height)??0,R=r+(o!=="center"?"-"+o:""),T=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},O=Array.isArray(u)?u:[u],L=O.length>0,B={padding:T,boundary:O.filter(uP),altBoundary:L},{refs:I,floatingStyles:D,placement:G,isPositioned:q,middlewareData:P}=QE({strategy:"fixed",placement:R,whileElementsMounted:(...He)=>zE(...He,{animationFrame:y==="always"}),elements:{reference:w.anchor},middleware:[XE({mainAxis:s+j,alignmentAxis:a}),c&&ZE({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?JE():void 0,...B}),c&&eP({...B}),tP({...B,apply:({elements:He,rects:Ee,availableWidth:$e,availableHeight:Te})=>{const{width:Ne,height:ut}=Ee.reference,vt=He.floating.style;vt.setProperty("--radix-popper-available-width",`${$e}px`),vt.setProperty("--radix-popper-available-height",`${Te}px`),vt.setProperty("--radix-popper-anchor-width",`${Ne}px`),vt.setProperty("--radix-popper-anchor-height",`${ut}px`)}}),k&&rP({element:k,padding:l}),dP({arrowWidth:N,arrowHeight:j}),m&&nP({strategy:"referenceHidden",...B})]}),[$,Z]=Vw(G),U=Lt(g);Kt(()=>{q&&(U==null||U())},[q,U]);const ve=(W=P.arrow)==null?void 0:W.x,ke=(X=P.arrow)==null?void 0:X.y,ce=((J=P.arrow)==null?void 0:J.centerOffset)!==0,[we,V]=d.useState();return Kt(()=>{x&&V(window.getComputedStyle(x).zIndex)},[x]),i.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...D,transform:q?D.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:we,"--radix-popper-transform-origin":[(he=P.transformOrigin)==null?void 0:he.x,(de=P.transformOrigin)==null?void 0:de.y].join(" "),...((Ce=P.hide)==null?void 0:Ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(aP,{scope:n,placedSide:$,onArrowChange:S,arrowX:ve,arrowY:ke,shouldHideArrow:ce,children:i.jsx(Me.div,{"data-side":$,"data-align":Z,...p,ref:b,style:{...p.style,animation:q?void 0:"none"}})})})});Bw.displayName=Km;var Fw="PopperArrow",cP={top:"bottom",right:"left",bottom:"top",left:"right"},zw=d.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,o=lP(Fw,r),a=cP[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(oP,{...s,ref:n,style:{...s.style,display:"block"}})})});zw.displayName=Fw;function uP(e){return e!==null}var dP=e=>({name:"transformOrigin",options:e,fn(t){var w,x,v;const{placement:n,rects:r,middlewareData:s}=t,a=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,f]=Vw(n),h={start:"0%",center:"50%",end:"100%"}[f],m=(((x=s.arrow)==null?void 0:x.x)??0)+l/2,y=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let g="",p="";return u==="bottom"?(g=a?h:`${m}px`,p=`${-c}px`):u==="top"?(g=a?h:`${m}px`,p=`${r.floating.height+c}px`):u==="right"?(g=`${-c}px`,p=a?h:`${y}px`):u==="left"&&(g=`${r.floating.width+c}px`,p=a?h:`${y}px`),{data:{x:g,y:p}}}});function Vw(e){const[t,n="center"]=e.split("-");return[t,n]}var fP=$w,qw=Dw,Ww=Bw,Uw=zw,[Ou,L4]=Ln("Tooltip",[$u]),Qm=$u(),Hw="TooltipProvider",hP=700,fv="tooltip.open",[mP,Gw]=Ou(Hw),Kw=e=>{const{__scopeTooltip:t,delayDuration:n=hP,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=e,a=d.useRef(!0),l=d.useRef(!1),c=d.useRef(0);return d.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(mP,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:d.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:d.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:d.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:o})};Kw.displayName=Hw;var Qw="Tooltip",[I4,Du]=Ou(Qw),ah="TooltipTrigger",pP=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Du(ah,n),o=Gw(ah,n),a=Qm(n),l=d.useRef(null),c=qe(t,l,s.onTriggerChange),u=d.useRef(!1),f=d.useRef(!1),h=d.useCallback(()=>u.current=!1,[]);return d.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),i.jsx(qw,{asChild:!0,...a,children:i.jsx(Me.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:ye(e.onPointerMove,m=>{m.pointerType!=="touch"&&!f.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:ye(e.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:ye(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ye(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:ye(e.onBlur,s.onClose),onClick:ye(e.onClick,s.onClose)})})});pP.displayName=ah;var gP="TooltipPortal",[$4,vP]=Ou(gP,{forceMount:void 0}),Mi="TooltipContent",Yw=d.forwardRef((e,t)=>{const n=vP(Mi,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=e,a=Du(Mi,e.__scopeTooltip);return i.jsx(xr,{present:r||a.open,children:a.disableHoverableContent?i.jsx(Xw,{side:s,...o,ref:t}):i.jsx(xP,{side:s,...o,ref:t})})}),xP=d.forwardRef((e,t)=>{const n=Du(Mi,e.__scopeTooltip),r=Gw(Mi,e.__scopeTooltip),s=d.useRef(null),o=qe(t,s),[a,l]=d.useState(null),{trigger:c,onClose:u}=n,f=s.current,{onPointerInTransitChange:h}=r,m=d.useCallback(()=>{l(null),h(!1)},[h]),y=d.useCallback((g,p)=>{const w=g.currentTarget,x={x:g.clientX,y:g.clientY},v=kP(x,w.getBoundingClientRect()),b=NP(x,v),k=CP(p.getBoundingClientRect()),S=EP([...b,...k]);l(S),h(!0)},[h]);return d.useEffect(()=>()=>m(),[m]),d.useEffect(()=>{if(c&&f){const g=w=>y(w,f),p=w=>y(w,c);return c.addEventListener("pointerleave",g),f.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",g),f.removeEventListener("pointerleave",p)}}},[c,f,y,m]),d.useEffect(()=>{if(a){const g=p=>{const w=p.target,x={x:p.clientX,y:p.clientY},v=(c==null?void 0:c.contains(w))||(f==null?void 0:f.contains(w)),b=!jP(x,a);v?m():b&&(m(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,f,a,u,m]),i.jsx(Xw,{...e,ref:o})}),[yP,wP]=Ou(Qw,{isInside:!1}),bP=Sy("TooltipContent"),Xw=d.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:a,...l}=e,c=Du(Mi,n),u=Qm(n),{onClose:f}=c;return d.useEffect(()=>(document.addEventListener(fv,f),()=>document.removeEventListener(fv,f)),[f]),d.useEffect(()=>{if(c.trigger){const h=m=>{const y=m.target;y!=null&&y.contains(c.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,f]),i.jsx(al,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:i.jsxs(Ww,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(bP,{children:r}),i.jsx(yP,{scope:n,isInside:!0,children:i.jsx(Rj,{id:c.contentId,role:"tooltip",children:s||r})})]})})});Yw.displayName=Mi;var Zw="TooltipArrow",SP=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Qm(n);return wP(Zw,n).isInside?null:i.jsx(Uw,{...s,...r,ref:t})});SP.displayName=Zw;function kP(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function NP(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function CP(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function jP(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const l=t[o].x,c=t[o].y,u=t[a].x,f=t[a].y;c>r!=f>r&&n<(u-l)*(r-c)/(f-c)+l&&(s=!s)}return s}function EP(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),PP(t)}function PP(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const o=t[t.length-1],a=t[t.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const o=n[n.length-1],a=n[n.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var TP=Kw,Jw=Yw;const RP=TP,_P=d.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(Jw,{ref:r,sideOffset:t,className:Ie("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));_P.displayName=Jw.displayName;const MP={theme:"dark",setTheme:()=>null},e1=d.createContext(MP);function AP({children:e,defaultTheme:t="dark",storageKey:n="simul-chess-theme",...r}){const[s,o]=d.useState(()=>typeof window>"u"?t:localStorage.getItem(n)||t);d.useEffect(()=>{const l=window.document.documentElement;l.classList.remove("light","dark"),l.classList.add(s)},[s]);const a={theme:s,setTheme:l=>{localStorage.setItem(n,l),o(l)}};return i.jsx(e1.Provider,{...r,value:a,children:e})}const LP=()=>{const e=d.useContext(e1);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},Ym=_u("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),re=d.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},o)=>{const a=r?cj:"button";return i.jsx(a,{className:Ie(Ym({variant:t,size:n,className:e})),ref:o,...s})});re.displayName="Button";function IP(){const{theme:e,setTheme:t}=LP();return i.jsxs(re,{variant:"ghost",size:"icon",onClick:()=>t(e==="light"?"dark":"light"),"data-testid":"button-theme-toggle",children:[i.jsx(b2,{className:"h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),i.jsx(iw,{className:"absolute h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),i.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function Xm(e){const t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Zm="Switch",[$P,O4]=Ln(Zm),[OP,DP]=$P(Zm),t1=d.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:o,required:a,disabled:l,value:c="on",onCheckedChange:u,form:f,...h}=e,[m,y]=d.useState(null),g=qe(t,b=>y(b)),p=d.useRef(!1),w=m?f||!!m.closest("form"):!0,[x=!1,v]=bo({prop:s,defaultProp:o,onChange:u});return i.jsxs(OP,{scope:n,checked:x,disabled:l,children:[i.jsx(Me.button,{type:"button",role:"switch","aria-checked":x,"aria-required":a,"data-state":s1(x),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:g,onClick:ye(e.onClick,b=>{v(k=>!k),w&&(p.current=b.isPropagationStopped(),p.current||b.stopPropagation())})}),w&&i.jsx(BP,{control:m,bubbles:!p.current,name:r,value:c,checked:x,required:a,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});t1.displayName=Zm;var n1="SwitchThumb",r1=d.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=DP(n1,n);return i.jsx(Me.span,{"data-state":s1(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});r1.displayName=n1;var BP=e=>{const{control:t,checked:n,bubbles:r=!0,...s}=e,o=d.useRef(null),a=Xm(n),l=Hm(t);return d.useEffect(()=>{const c=o.current,u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==n&&h){const m=new Event("click",{bubbles:r});h.call(c,n),c.dispatchEvent(m)}},[a,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:o,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function s1(e){return e?"checked":"unchecked"}var o1=t1,FP=r1;const fr=d.forwardRef(({className:e,...t},n)=>i.jsx(o1,{className:Ie("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:i.jsx(FP,{className:Ie("pointer-events-none block h-5 w-5 rounded-full bg-stone-300 dark:bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));fr.displayName=o1.displayName;var zP="Label",i1=d.forwardRef((e,t)=>i.jsx(Me.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));i1.displayName=zP;var a1=i1;const VP=_u("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),dn=d.forwardRef(({className:e,...t},n)=>i.jsx(a1,{ref:n,className:Ie(VP(),e),...t}));dn.displayName=a1.displayName;var Ld="focusScope.autoFocusOnMount",Id="focusScope.autoFocusOnUnmount",hv={bubbles:!1,cancelable:!0},qP="FocusScope",Jm=d.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=e,[l,c]=d.useState(null),u=Lt(s),f=Lt(o),h=d.useRef(null),m=qe(t,p=>c(p)),y=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(r){let p=function(b){if(y.paused||!l)return;const k=b.target;l.contains(k)?h.current=k:us(h.current,{select:!0})},w=function(b){if(y.paused||!l)return;const k=b.relatedTarget;k!==null&&(l.contains(k)||us(h.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const S of b)S.removedNodes.length>0&&us(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",w);const v=new MutationObserver(x);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",w),v.disconnect()}}},[r,l,y.paused]),d.useEffect(()=>{if(l){pv.add(y);const p=document.activeElement;if(!l.contains(p)){const x=new CustomEvent(Ld,hv);l.addEventListener(Ld,u),l.dispatchEvent(x),x.defaultPrevented||(WP(QP(l1(l)),{select:!0}),document.activeElement===p&&us(l))}return()=>{l.removeEventListener(Ld,u),setTimeout(()=>{const x=new CustomEvent(Id,hv);l.addEventListener(Id,f),l.dispatchEvent(x),x.defaultPrevented||us(p??document.body,{select:!0}),l.removeEventListener(Id,f),pv.remove(y)},0)}}},[l,u,f,y]);const g=d.useCallback(p=>{if(!n&&!r||y.paused)return;const w=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,x=document.activeElement;if(w&&x){const v=p.currentTarget,[b,k]=UP(v);b&&k?!p.shiftKey&&x===k?(p.preventDefault(),n&&us(b,{select:!0})):p.shiftKey&&x===b&&(p.preventDefault(),n&&us(k,{select:!0})):x===v&&p.preventDefault()}},[n,r,y.paused]);return i.jsx(Me.div,{tabIndex:-1,...a,ref:m,onKeyDown:g})});Jm.displayName=qP;function WP(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(us(r,{select:t}),document.activeElement!==n)return}function UP(e){const t=l1(e),n=mv(t,e),r=mv(t.reverse(),e);return[n,r]}function l1(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function mv(e,t){for(const n of e)if(!HP(n,{upTo:t}))return n}function HP(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function GP(e){return e instanceof HTMLInputElement&&"select"in e}function us(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&GP(e)&&t&&e.select()}}var pv=KP();function KP(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=gv(e,t),e.unshift(t)},remove(t){var n;e=gv(e,t),(n=e[0])==null||n.resume()}}}function gv(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function QP(e){return e.filter(t=>t.tagName!=="A")}var $d=0;function c1(){d.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??vv()),document.body.insertAdjacentElement("beforeend",e[1]??vv()),$d++,()=>{$d===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),$d--}},[])}function vv(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Er=function(){return Er=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Er.apply(this,arguments)};function u1(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function YP(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var xc="right-scroll-bar-position",yc="width-before-scroll-bar",XP="with-scroll-bars-hidden",ZP="--removed-body-scroll-bar-size";function Od(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function JP(e,t){var n=d.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var eT=typeof window<"u"?d.useLayoutEffect:d.useEffect,xv=new WeakMap;function tT(e,t){var n=JP(null,function(r){return e.forEach(function(s){return Od(s,r)})});return eT(function(){var r=xv.get(n);if(r){var s=new Set(r),o=new Set(e),a=n.current;s.forEach(function(l){o.has(l)||Od(l,null)}),o.forEach(function(l){s.has(l)||Od(l,a)})}xv.set(n,e)},[e]),n}function nT(e){return e}function rT(e,t){t===void 0&&(t=nT);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var a=t(o,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(o){for(r=!0;n.length;){var a=n;n=[],a.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(o),a=n}var c=function(){var f=a;a=[],f.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(f){a.push(f),u()},filter:function(f){return a=a.filter(f),n}}}};return s}function sT(e){e===void 0&&(e={});var t=rT(null);return t.options=Er({async:!0,ssr:!1},e),t}var d1=function(e){var t=e.sideCar,n=u1(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return d.createElement(r,Er({},n))};d1.isSideCarExport=!0;function oT(e,t){return e.useMedium(t),d1}var f1=sT(),Dd=function(){},Bu=d.forwardRef(function(e,t){var n=d.useRef(null),r=d.useState({onScrollCapture:Dd,onWheelCapture:Dd,onTouchMoveCapture:Dd}),s=r[0],o=r[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,h=e.shards,m=e.sideCar,y=e.noIsolation,g=e.inert,p=e.allowPinchZoom,w=e.as,x=w===void 0?"div":w,v=e.gapMode,b=u1(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=m,S=tT([n,t]),C=Er(Er({},b),s);return d.createElement(d.Fragment,null,f&&d.createElement(k,{sideCar:f1,removeScrollBar:u,shards:h,noIsolation:y,inert:g,setCallbacks:o,allowPinchZoom:!!p,lockRef:n,gapMode:v}),a?d.cloneElement(d.Children.only(l),Er(Er({},C),{ref:S})):d.createElement(x,Er({},C,{className:c,ref:S}),l))});Bu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bu.classNames={fullWidth:yc,zeroRight:xc};var iT=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function aT(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=iT();return t&&e.setAttribute("nonce",t),e}function lT(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function cT(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var uT=function(){var e=0,t=null;return{add:function(n){e==0&&(t=aT())&&(lT(t,n),cT(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},dT=function(){var e=uT();return function(t,n){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},h1=function(){var e=dT(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},fT={left:0,top:0,right:0,gap:0},Bd=function(e){return parseInt(e||"",10)||0},hT=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Bd(n),Bd(r),Bd(s)]},mT=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return fT;var t=hT(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},pT=h1(),xi="data-scroll-locked",gT=function(e,t,n,r){var s=e.left,o=e.top,a=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(XP,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(xi,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(xc,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(yc,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(xc," .").concat(xc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(yc," .").concat(yc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(xi,`] {
    `).concat(ZP,": ").concat(l,`px;
  }
`)},yv=function(){var e=parseInt(document.body.getAttribute(xi)||"0",10);return isFinite(e)?e:0},vT=function(){d.useEffect(function(){return document.body.setAttribute(xi,(yv()+1).toString()),function(){var e=yv()-1;e<=0?document.body.removeAttribute(xi):document.body.setAttribute(xi,e.toString())}},[])},xT=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;vT();var o=d.useMemo(function(){return mT(s)},[s]);return d.createElement(pT,{styles:gT(o,!t,s,n?"":"!important")})},lh=!1;if(typeof window<"u")try{var Wl=Object.defineProperty({},"passive",{get:function(){return lh=!0,!0}});window.addEventListener("test",Wl,Wl),window.removeEventListener("test",Wl,Wl)}catch{lh=!1}var Vo=lh?{passive:!1}:!1,yT=function(e){return e.tagName==="TEXTAREA"},m1=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!yT(e)&&n[t]==="visible")},wT=function(e){return m1(e,"overflowY")},bT=function(e){return m1(e,"overflowX")},wv=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=p1(e,r);if(s){var o=g1(e,r),a=o[1],l=o[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},ST=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},kT=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},p1=function(e,t){return e==="v"?wT(t):bT(t)},g1=function(e,t){return e==="v"?ST(t):kT(t)},NT=function(e,t){return e==="h"&&t==="rtl"?-1:1},CT=function(e,t,n,r,s){var o=NT(e,window.getComputedStyle(t).direction),a=o*r,l=n.target,c=t.contains(l),u=!1,f=a>0,h=0,m=0;do{var y=g1(e,l),g=y[0],p=y[1],w=y[2],x=p-w-o*g;(g||x)&&p1(e,l)&&(h+=x,m+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(Math.abs(h)<1||!s)||!f&&(Math.abs(m)<1||!s))&&(u=!0),u},Ul=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},bv=function(e){return[e.deltaX,e.deltaY]},Sv=function(e){return e&&"current"in e?e.current:e},jT=function(e,t){return e[0]===t[0]&&e[1]===t[1]},ET=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},PT=0,qo=[];function TT(e){var t=d.useRef([]),n=d.useRef([0,0]),r=d.useRef(),s=d.useState(PT++)[0],o=d.useState(h1)[0],a=d.useRef(e);d.useEffect(function(){a.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var p=YP([e.lockRef.current],(e.shards||[]).map(Sv),!0).filter(Boolean);return p.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=d.useCallback(function(p,w){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!a.current.allowPinchZoom;var x=Ul(p),v=n.current,b="deltaX"in p?p.deltaX:v[0]-x[0],k="deltaY"in p?p.deltaY:v[1]-x[1],S,C=p.target,N=Math.abs(b)>Math.abs(k)?"h":"v";if("touches"in p&&N==="h"&&C.type==="range")return!1;var j=wv(N,C);if(!j)return!0;if(j?S=N:(S=N==="v"?"h":"v",j=wv(N,C)),!j)return!1;if(!r.current&&"changedTouches"in p&&(b||k)&&(r.current=S),!S)return!0;var R=r.current||S;return CT(R,w,p,R==="h"?b:k,!0)},[]),c=d.useCallback(function(p){var w=p;if(!(!qo.length||qo[qo.length-1]!==o)){var x="deltaY"in w?bv(w):Ul(w),v=t.current.filter(function(S){return S.name===w.type&&(S.target===w.target||w.target===S.shadowParent)&&jT(S.delta,x)})[0];if(v&&v.should){w.cancelable&&w.preventDefault();return}if(!v){var b=(a.current.shards||[]).map(Sv).filter(Boolean).filter(function(S){return S.contains(w.target)}),k=b.length>0?l(w,b[0]):!a.current.noIsolation;k&&w.cancelable&&w.preventDefault()}}},[]),u=d.useCallback(function(p,w,x,v){var b={name:p,delta:w,target:x,should:v,shadowParent:RT(x)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(k){return k!==b})},1)},[]),f=d.useCallback(function(p){n.current=Ul(p),r.current=void 0},[]),h=d.useCallback(function(p){u(p.type,bv(p),p.target,l(p,e.lockRef.current))},[]),m=d.useCallback(function(p){u(p.type,Ul(p),p.target,l(p,e.lockRef.current))},[]);d.useEffect(function(){return qo.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Vo),document.addEventListener("touchmove",c,Vo),document.addEventListener("touchstart",f,Vo),function(){qo=qo.filter(function(p){return p!==o}),document.removeEventListener("wheel",c,Vo),document.removeEventListener("touchmove",c,Vo),document.removeEventListener("touchstart",f,Vo)}},[]);var y=e.removeScrollBar,g=e.inert;return d.createElement(d.Fragment,null,g?d.createElement(o,{styles:ET(s)}):null,y?d.createElement(xT,{gapMode:e.gapMode}):null)}function RT(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const _T=oT(f1,TT);var ep=d.forwardRef(function(e,t){return d.createElement(Bu,Er({},e,{ref:t,sideCar:_T}))});ep.classNames=Bu.classNames;var MT=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Wo=new WeakMap,Hl=new WeakMap,Gl={},Fd=0,v1=function(e){return e&&(e.host||v1(e.parentNode))},AT=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=v1(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},LT=function(e,t,n,r){var s=AT(t,Array.isArray(e)?e:[e]);Gl[n]||(Gl[n]=new WeakMap);var o=Gl[n],a=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var f=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))f(m);else try{var y=m.getAttribute(r),g=y!==null&&y!=="false",p=(Wo.get(m)||0)+1,w=(o.get(m)||0)+1;Wo.set(m,p),o.set(m,w),a.push(m),p===1&&g&&Hl.set(m,!0),w===1&&m.setAttribute(n,"true"),g||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return f(t),l.clear(),Fd++,function(){a.forEach(function(h){var m=Wo.get(h)-1,y=o.get(h)-1;Wo.set(h,m),o.set(h,y),m||(Hl.has(h)||h.removeAttribute(r),Hl.delete(h)),y||h.removeAttribute(n)}),Fd--,Fd||(Wo=new WeakMap,Wo=new WeakMap,Hl=new WeakMap,Gl={})}},x1=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=MT(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),LT(r,s,n,"aria-hidden")):function(){return null}},tp="Dialog",[y1,w1]=Ln(tp),[IT,yr]=y1(tp),b1=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:a=!0}=e,l=d.useRef(null),c=d.useRef(null),[u=!1,f]=bo({prop:r,defaultProp:s,onChange:o});return i.jsx(IT,{scope:t,triggerRef:l,contentRef:c,contentId:Es(),titleId:Es(),descriptionId:Es(),open:u,onOpenChange:f,onOpenToggle:d.useCallback(()=>f(h=>!h),[f]),modal:a,children:n})};b1.displayName=tp;var S1="DialogTrigger",k1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=yr(S1,n),o=qe(t,s.triggerRef);return i.jsx(Me.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":sp(s.open),...r,ref:o,onClick:ye(e.onClick,s.onOpenToggle)})});k1.displayName=S1;var np="DialogPortal",[$T,N1]=y1(np,{forceMount:void 0}),C1=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,o=yr(np,t);return i.jsx($T,{scope:t,forceMount:n,children:d.Children.map(r,a=>i.jsx(xr,{present:n||o.open,children:i.jsx(Pu,{asChild:!0,container:s,children:a})}))})};C1.displayName=np;var Jc="DialogOverlay",j1=d.forwardRef((e,t)=>{const n=N1(Jc,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=yr(Jc,e.__scopeDialog);return o.modal?i.jsx(xr,{present:r||o.open,children:i.jsx(DT,{...s,ref:t})}):null});j1.displayName=Jc;var OT=Ri("DialogOverlay.RemoveScroll"),DT=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=yr(Jc,n);return i.jsx(ep,{as:OT,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(Me.div,{"data-state":sp(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),No="DialogContent",E1=d.forwardRef((e,t)=>{const n=N1(No,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=yr(No,e.__scopeDialog);return i.jsx(xr,{present:r||o.open,children:o.modal?i.jsx(BT,{...s,ref:t}):i.jsx(FT,{...s,ref:t})})});E1.displayName=No;var BT=d.forwardRef((e,t)=>{const n=yr(No,e.__scopeDialog),r=d.useRef(null),s=qe(t,n.contentRef,r);return d.useEffect(()=>{const o=r.current;if(o)return x1(o)},[]),i.jsx(P1,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ye(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ye(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&o.preventDefault()}),onFocusOutside:ye(e.onFocusOutside,o=>o.preventDefault())})}),FT=d.forwardRef((e,t)=>{const n=yr(No,e.__scopeDialog),r=d.useRef(!1),s=d.useRef(!1);return i.jsx(P1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,o),o.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),P1=d.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=e,l=yr(No,n),c=d.useRef(null),u=qe(t,c);return c1(),i.jsxs(i.Fragment,{children:[i.jsx(Jm,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(al,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":sp(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(VT,{titleId:l.titleId}),i.jsx(WT,{contentRef:c,descriptionId:l.descriptionId})]})]})}),rp="DialogTitle",T1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=yr(rp,n);return i.jsx(Me.h2,{id:s.titleId,...r,ref:t})});T1.displayName=rp;var R1="DialogDescription",_1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=yr(R1,n);return i.jsx(Me.p,{id:s.descriptionId,...r,ref:t})});_1.displayName=R1;var M1="DialogClose",A1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=yr(M1,n);return i.jsx(Me.button,{type:"button",...r,ref:t,onClick:ye(e.onClick,()=>s.onOpenChange(!1))})});A1.displayName=M1;function sp(e){return e?"open":"closed"}var L1="DialogTitleWarning",[zT,I1]=aj(L1,{contentName:No,titleName:rp,docsSlug:"dialog"}),VT=({titleId:e})=>{const t=I1(L1),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},qT="DialogDescriptionWarning",WT=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${I1(qT).contentName}}.`;return d.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},$1=b1,O1=k1,D1=C1,op=j1,ip=E1,ap=T1,lp=_1,cp=A1;const Ai=$1,eu=O1,UT=D1,B1=d.forwardRef(({className:e,...t},n)=>i.jsx(op,{ref:n,className:Ie("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));B1.displayName=op.displayName;const Co=d.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(UT,{children:[i.jsx(B1,{}),i.jsxs(ip,{ref:r,className:Ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,i.jsxs(cp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(So,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Co.displayName=ip.displayName;const jo=({className:e,...t})=>i.jsx("div",{className:Ie("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});jo.displayName="DialogHeader";const Eo=d.forwardRef(({className:e,...t},n)=>i.jsx(ap,{ref:n,className:Ie("text-lg font-semibold leading-none tracking-tight",e),...t}));Eo.displayName=ap.displayName;const F1=d.forwardRef(({className:e,...t},n)=>i.jsx(lp,{ref:n,className:Ie("text-sm text-muted-foreground",e),...t}));F1.displayName=lp.displayName;/*! Capacitor: https://capacitorjs.com/ - MIT License */var Li;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Li||(Li={}));class zd extends Error{constructor(t,n,r){super(t),this.message=t,this.code=n,this.data=r}}const HT=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},GT=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>t!==null?t.name:HT(e),o=()=>s()!=="web",a=h=>{const m=u.get(h);return!!(m!=null&&m.platforms.has(s())||l(h))},l=h=>{var m;return(m=n.PluginHeaders)===null||m===void 0?void 0:m.find(y=>y.name===h)},c=h=>e.console.error(h),u=new Map,f=(h,m={})=>{const y=u.get(h);if(y)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),y.proxy;const g=s(),p=l(h);let w;const x=async()=>(!w&&g in m?w=typeof m[g]=="function"?w=await m[g]():w=m[g]:t!==null&&!w&&"web"in m&&(w=typeof m.web=="function"?w=await m.web():w=m.web),w),v=(j,R)=>{var T,O;if(p){const L=p==null?void 0:p.methods.find(B=>R===B.name);if(L)return L.rtype==="promise"?B=>n.nativePromise(h,R.toString(),B):(B,I)=>n.nativeCallback(h,R.toString(),B,I);if(j)return(T=j[R])===null||T===void 0?void 0:T.bind(j)}else{if(j)return(O=j[R])===null||O===void 0?void 0:O.bind(j);throw new zd(`"${h}" plugin is not implemented on ${g}`,Li.Unimplemented)}},b=j=>{let R;const T=(...O)=>{const L=x().then(B=>{const I=v(B,j);if(I){const D=I(...O);return R=D==null?void 0:D.remove,D}else throw new zd(`"${h}.${j}()" is not implemented on ${g}`,Li.Unimplemented)});return j==="addListener"&&(L.remove=async()=>R()),L};return T.toString=()=>`${j.toString()}() { [capacitor code] }`,Object.defineProperty(T,"name",{value:j,writable:!1,configurable:!1}),T},k=b("addListener"),S=b("removeListener"),C=(j,R)=>{const T=k({eventName:j},R),O=async()=>{const B=await T;S({eventName:j,callbackId:B},R)},L=new Promise(B=>T.then(()=>B({remove:O})));return L.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await O()},L},N=new Proxy({},{get(j,R){switch(R){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return p?C:k;case"removeListener":return S;default:return b(R)}}});return r[h]=N,u.set(h,{name:h,proxy:N,platforms:new Set([...Object.keys(m),...p?[g]:[]])}),N};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=c,n.isNativePlatform=o,n.isPluginAvailable=a,n.registerPlugin=f,n.Exception=zd,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},KT=e=>e.Capacitor=GT(e),mn=KT(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Ws=mn.registerPlugin;class up{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(n);const o=this.windowListeners[t];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(t);const a=async()=>this.removeListener(t,n);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,r){const s=this.listeners[t];if(!s){if(r){let o=this.retainedEventArguments[t];o||(o=[]),o.push(n),this.retainedEventArguments[t]=o}return}s.forEach(o=>o(n))}hasListeners(t){var n;return!!(!((n=this.listeners[t])===null||n===void 0)&&n.length)}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(t="not implemented"){return new mn.Exception(t,Li.Unimplemented)}unavailable(t="not available"){return new mn.Exception(t,Li.Unavailable)}async removeListener(t,n){const r=this.listeners[t];if(!r)return;const s=r.indexOf(n);this.listeners[t].splice(s,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(r=>{this.notifyListeners(t,r)}))}}const kv=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Nv=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class QT extends up{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[s,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=Nv(s).trim(),o=Nv(o).trim(),n[s]=o}),n}async setCookie(t){try{const n=kv(t.key),r=kv(t.value),s=`; expires=${(t.expires||"").replace("expires=","")}`,o=(t.path||"/").replace("path=",""),a=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${o}; ${a};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}Ws("CapacitorCookies",{web:()=>new QT});const YT=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;t(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(e)}),XT=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(s=>s.toLocaleLowerCase()).reduce((s,o,a)=>(s[o]=e[t[a]],s),{})},ZT=(e,t=!0)=>e?Object.entries(e).reduce((r,s)=>{const[o,a]=s;let l,c;return Array.isArray(a)?(c="",a.forEach(u=>{l=t?encodeURIComponent(u):u,c+=`${o}=${l}&`}),c.slice(0,-1)):(l=t?encodeURIComponent(a):a,c=`${o}=${l}`),`${r}&${c}`},"").substr(1):null,JT=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),s=XT(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(s.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[a,l]of Object.entries(e.data||{}))o.set(a,l);n.body=o.toString()}else if(s.includes("multipart/form-data")||e.data instanceof FormData){const o=new FormData;if(e.data instanceof FormData)e.data.forEach((l,c)=>{o.append(c,l)});else for(const l of Object.keys(e.data))o.append(l,e.data[l]);n.body=o;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(s.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class eR extends up{async request(t){const n=JT(t,t.webFetchExtra),r=ZT(t.params,t.shouldEncodeUrlParams),s=r?`${t.url}?${r}`:t.url,o=await fetch(s,n),a=o.headers.get("content-type")||"";let{responseType:l="text"}=o.ok?t:{};a.includes("application/json")&&(l="json");let c,u;switch(l){case"arraybuffer":case"blob":u=await o.blob(),c=await YT(u);break;case"json":c=await o.json();break;case"document":case"text":default:c=await o.text()}const f={};return o.headers.forEach((h,m)=>{f[m]=h}),{data:c,headers:f,status:o.status,url:o.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}Ws("CapacitorHttp",{web:()=>new eR});var Cv;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(Cv||(Cv={}));var jv;(function(e){e.StatusBar="StatusBar",e.NavigationBar="NavigationBar"})(jv||(jv={}));class tR extends up{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}Ws("SystemBars",{web:()=>new tR});const nR="modulepreload",rR=function(e){return"/"+e},Ev={},Ui=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=rR(c),c in Ev)return;Ev[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":nR,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,y)=>{h.addEventListener("load",m),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},Pv=Ws("SpeechSynthesis",{web:()=>Ui(()=>import("./web-BUtOR9s3.js"),[]).then(e=>new e.SpeechSynthesisWeb)}),ch={permissionStatus:"unknown",modelReady:!1,sessionActive:!1,micListening:!1,lastResult:"",lastError:"",timestamp:Date.now()},uh=new Set;function sR(e){return uh.add(e),e({...ch}),()=>uh.delete(e)}function Hi(e){Object.assign(ch,e,{timestamp:Date.now()}),uh.forEach(t=>t({...ch}))}function Tv(e){Hi({permissionStatus:e})}function oR(e){Hi({modelReady:e})}function z1(e){Hi({sessionActive:e})}function V1(e){Hi({micListening:e})}function q1(e){Hi({lastResult:e})}function tu(e){Hi({lastError:e})}const ie=Ws("BlindfoldNative");let dh=null,fh=null;const iR=new Promise((e,t)=>{dh=e,fh=t});let W1=!1,U1=!1;function Kl(e){U1=e,W1=!0,e&&dh?dh():!e&&fh&&fh(new Error("Mic permission denied"))}async function Fu(){if(W1)return U1;try{return await iR,!0}catch{return!1}}let Vd=null;async function H1(){if(mn.isNativePlatform())try{Vd||(Vd=await Ui(()=>Promise.resolve().then(()=>pk),void 0));const{Haptics:e,ImpactStyle:t}=Vd;await e.impact({style:t.Light})}catch{}}class aR{constructor(){this.sessions=new Map,this.isSpeaking=!1,this.micState="LISTENING",this.pendingRestarts=[],this.settlingTimeout=null,this.resumeDelayMs=350}register(t){this.sessions.set(t.id,t),console.log(`[VoiceController] Registered session: ${t.id}`)}unregister(t){this.sessions.delete(t),console.log(`[VoiceController] Unregistered session: ${t}`)}clearPendingForSession(t){const n=this.pendingRestarts.length;this.pendingRestarts=this.pendingRestarts.filter(r=>r!==t),n!==this.pendingRestarts.length&&console.log(`[VoiceController] Cleared pending restart for: ${t}`)}setActive(t,n){const r=this.sessions.get(t);r&&(r.shouldBeActive=n)}onTTSStart(){this.settlingTimeout&&(clearTimeout(this.settlingTimeout),this.settlingTimeout=null),this.isSpeaking=!0,this.micState="SPEAKING",console.log("[VoiceController] TTS starting, state -> SPEAKING, pausing all voice sessions"),Array.from(this.sessions.values()).forEach(t=>{t.shouldBeActive&&t.pause()})}onTTSEnd(){this.isSpeaking=!1,this.micState="SETTLING";const t=this.sessions.size,n=Array.from(this.sessions.keys()).join(", ");console.log(`[VoiceController] TTS ended, state -> SETTLING, waiting ${this.resumeDelayMs}ms, sessions: [${n}] (${t})`),this.settlingTimeout=setTimeout(()=>{if(this.isSpeaking)console.log("[VoiceController] Skipping resume - TTS started again during settling");else{this.micState="LISTENING",console.log("[VoiceController] Settling complete, state -> LISTENING"),Array.from(this.sessions.entries()).forEach(([a,l])=>{console.log(`[VoiceController] Session '${a}' shouldBeActive=${l.shouldBeActive}`)});const r=new Set,s=this.pendingRestarts.length>0;s&&(console.log(`[VoiceController] Processing ${this.pendingRestarts.length} pending restarts: ${this.pendingRestarts.join(", ")}`),this.playMicLiveClick(),this.pendingRestarts.forEach(a=>{const l=this.sessions.get(a);l&&l.shouldBeActive?(console.log(`[VoiceController] Executing pending restart for: ${a}`),l.resume(),r.add(a)):console.log(`[VoiceController] Skipping pending restart for '${a}' - session=${!!l}, shouldBeActive=${l==null?void 0:l.shouldBeActive}`)}),this.pendingRestarts=[]);const o=Array.from(this.sessions.values()).filter(a=>a.shouldBeActive&&!r.has(a.id));console.log(`[VoiceController] Sessions to resume: ${o.length}`),o.length>0?(s||this.playMicLiveClick(),o.forEach(a=>{console.log(`[VoiceController] Resuming session: ${a.id}`),a.resume()})):console.log("[VoiceController] No sessions to resume")}},this.resumeDelayMs)}queueRestart(t){if(this.micState==="LISTENING"){const n=this.sessions.get(t);n&&n.shouldBeActive&&(console.log(`[VoiceController] Instant restart for session: ${t}`),this.playMicLiveClick(),n.resume())}else this.pendingRestarts.includes(t)||(this.pendingRestarts.push(t),console.log(`[VoiceController] Queued restart for session: ${t} (state: ${this.micState})`))}getMicState(){return this.micState}canStartMic(){return this.micState==="LISTENING"}async playMicLiveClick(){try{if(mn.isNativePlatform()){const{Haptics:t,ImpactStyle:n}=await Ui(async()=>{const{Haptics:r,ImpactStyle:s}=await Promise.resolve().then(()=>pk);return{Haptics:r,ImpactStyle:s}},void 0);await t.impact({style:n.Light})}console.log("[VoiceController] Mic live click")}catch{}}getIsSpeaking(){return this.isSpeaking}}const Fr=new aR,Aa=class Aa{constructor(){this.protectedSessionId=null,this.disposableSessionId=null,this.isPurging=!1}register(t){Aa.PROTECTED_SESSIONS.includes(t)?(this.protectedSessionId==="game"&&t==="reconstruction"&&console.log("[VoiceRegistry] HANDOVER: game  reconstruction (mic stays warm)"),this.protectedSessionId=t,console.log(`[VoiceRegistry] Protected lane: ${t}`)):(this.disposableSessionId=t,console.log(`[VoiceRegistry] Disposable lane: ${t}`))}unregister(t){const n=Aa.PROTECTED_SESSIONS.includes(t);n&&this.protectedSessionId===t?(this.protectedSessionId=null,console.log(`[VoiceRegistry] Unregistered protected: ${t}`)):!n&&this.disposableSessionId===t&&(this.disposableSessionId=null,console.log(`[VoiceRegistry] Unregistered disposable: ${t}`))}async purge(){if(this.isPurging){console.log("[VoiceRegistry] Already purging, skipping");return}this.isPurging=!0;const t=!!this.protectedSessionId;console.log(`[VoiceRegistry] PURGE: Killing disposable lane${t?" (game protected)":""}`);try{Bv.stop()}catch(n){console.log("[VoiceRegistry] trainingVoice.stop error:",n)}try{it.stop()}catch(n){console.log("[VoiceRegistry] voiceMaster.stop error:",n)}if(!t)try{Wt.stop()}catch(n){console.log("[VoiceRegistry] voiceRecognition.stop error:",n)}if(Pn&&!t)try{await ie.stopSession(),console.log("[VoiceRegistry] Stopped native session")}catch(n){console.log("[VoiceRegistry] stopSession error:",n)}try{it.resetMicBusy()}catch(n){console.log("[VoiceRegistry] resetMicBusy error:",n)}try{Wt.resetStartedFlag()}catch(n){console.log("[VoiceRegistry] resetStartedFlag error:",n)}this.disposableSessionId=null,await new Promise(n=>setTimeout(n,500)),this.isPurging=!1,console.log("[VoiceRegistry] PURGE complete - disposable lane cleared, flags reset")}async purgeAll(){if(this.isPurging){console.log("[VoiceRegistry] Already purging, skipping");return}this.isPurging=!0,console.log("[VoiceRegistry] NUCLEAR PURGE: Killing ALL sessions");try{Wt.stop()}catch{}try{Bv.stop()}catch{}try{it.stop()}catch{}if(Pn)try{await ie.stopSession()}catch{}try{it.resetMicBusy()}catch{}try{Wt.resetStartedFlag()}catch{}this.protectedSessionId=null,this.disposableSessionId=null,await new Promise(t=>setTimeout(t,500)),this.isPurging=!1,console.log("[VoiceRegistry] NUCLEAR PURGE complete")}clearProtectedLane(){this.protectedSessionId&&(console.log(`[VoiceRegistry] Clearing protected lane: ${this.protectedSessionId}`),this.protectedSessionId=null)}getProtectedSession(){return this.protectedSessionId}getDisposableSession(){return this.disposableSessionId}getActiveSession(){return this.protectedSessionId||this.disposableSessionId}};Aa.PROTECTED_SESSIONS=["game","reconstruction"];let hh=Aa;const Ii=new hh,Rv={K:"King",Q:"Queen",R:"Rook",B:"Bishop",N:"Knight",P:"Pawn",k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"},xs={king:"K",queen:"Q",rook:"R",bishop:"B",bish:"B",bishup:"B",bishep:"B",bashop:"B",knight:"N",night:"N",nite:"N",kite:"N",horse:"N",pawn:"",castle:"R"},lR=["um","uh","the","a","an","like","so","well","just","actually","basically"];function cR(e){return e.toLowerCase().split(/\s+/).filter(r=>!lR.includes(r)).join(" ")}const yi={a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",alpha:"a",alfa:"a",bravo:"b",charlie:"c",delta:"d",echo:"e",foxtrot:"f",golf:"g",hotel:"h",able:"a",apple:"a",ay:"a",aye:"a",eh:"a",boy:"b",baker:"b",bee:"b",be:"b",cat:"c",see:"c",sea:"c",cee:"c",dog:"d",dee:"d",david:"d",easy:"e",edward:"e",eee:"e",ee:"e",fox:"f",frank:"f",eff:"f",ef:"f",if:"f",of:"f",george:"g",gee:"g",jee:"g",henry:"h",aitch:"h",ach:"h"},nu={1:"1",one:"1",won:"1",first:"1",2:"2",two:"2",to:"2",too:"2",second:"2",3:"3",three:"3",free:"3",third:"3",4:"4",four:"4",for:"4",forth:"4",fourth:"4",5:"5",five:"5",fifth:"5",6:"6",six:"6",sixth:"6",sicks:"6",7:"7",seven:"7",seventh:"7",8:"8",eight:"8",ate:"8",eighth:"8"};function Uo(e,t=!1,n=!1,r=!1){if(!e)return"";if(e==="O-O"||e==="0-0")return r?"Castles kingside, checkmate!":n?"Castles kingside, check":"Castles kingside";if(e==="O-O-O"||e==="0-0-0")return r?"Castles queenside, checkmate!":n?"Castles queenside, check":"Castles queenside";let s="",o=e.replace(/[+#=].*$/,"");const a=o.match(/^([KQRBN])/);a?(s=Rv[a[1]]+" ",o=o.substring(1)):s="";const l=o.includes("x");o=o.replace("x","");const c=o.match(/([a-h])([1-8])/g);if(c&&c.length>0){const u=c[c.length-1],f=u[0],h=u[1];if(l||t){if(c.length>1||!a){const m=o[0];m&&m.match(/[a-h]/)&&(s+=m+" ")}s+="takes "+f+h}else s+=f+h}if(e.includes("=")){const u=e.match(/=([QRBN])/);u&&(s+=", promotes to "+Rv[u[1]])}return r||e.includes("#")?s+=", checkmate!":(n||e.includes("+"))&&(s+=", check"),s.trim()}let as=[],fa=!1,to=null,qd=!1;const Pn=mn.isNativePlatform();async function dp(){if(!Pn){try{if(navigator.permissions){const e=await navigator.permissions.query({name:"microphone"});return e.state==="granted"?"granted":e.state==="denied"?"denied":"prompt"}}catch{}return"prompt"}try{return(await ie.checkPermissions()).mic}catch(e){return console.error("[Voice] Error checking permissions:",e),"unknown"}}async function G1(){if(!Pn)try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(t=>t.stop()),!0}catch{return console.warn("[Voice] Web microphone permission denied"),!1}try{const e=await ie.checkPermissions();return e.mic==="granted"?!0:e.mic==="denied"||e.mic==="prompt"?(await ie.requestPermissions()).mic==="granted":!1}catch(e){return console.error("[Voice] Permission handling error:",e),!1}}async function uR(){const e=await G1(),t=await dp();return{granted:e,status:t}}function dR(){return Pn?Promise.resolve([]):fa&&as.length>0?Promise.resolve(as):to||(to=new Promise(e=>{const t=window.speechSynthesis.getVoices();if(t.length>0){as=t,fa=!0,to=null,e(t);return}const n=()=>{as=window.speechSynthesis.getVoices(),fa=!0,to=null,window.speechSynthesis.removeEventListener("voiceschanged",n),e(as)};window.speechSynthesis.addEventListener("voiceschanged",n),setTimeout(()=>{fa||(as=window.speechSynthesis.getVoices(),fa=as.length>0,to=null,window.speechSynthesis.removeEventListener("voiceschanged",n),e(as))},1e3)}),to)}let mh=null;function fR(){mh&&mh.abort()}const hR={a:"Ay",b:"Bee",c:"See",d:"Dee",e:"e",f:"f",g:"Gee",h:"h"},mR={N:"Knight",B:"Bishop",R:"Rook",Q:"Queen",K:"King"},pR=new Set(["correct","wrong","next","say","the","move","look","okay","continue","seconds","remaining","are","you","sure","want","resign","yes","no","can","play","legal","moves","for","material","is","equal","white","black","up","point","points","at","highlighted","squares","on","board"]);function gR(e){const t=e.toLowerCase().replace(/[^a-z\s]/g,"").split(/\s+/).filter(o=>o.length>0);if(t.length>0&&t.every(o=>pR.has(o))||!/[a-h]\s*[1-8]|[NBRQK][a-h]|O-O/.test(e))return e;let s=e.replace(/O-O-O/gi,"queenside castle").replace(/O-O/gi,"kingside castle").replace(/x/g," takes ").replace(/\+/g," check").replace(/#/g," checkmate");for(const[o,a]of Object.entries(mR))s=s.replace(new RegExp(`\\b${o}([a-h])([1-8])`,"g"),`${a} $1$2`),s=s.replace(new RegExp(`\\b${o}\\s*takes\\s*([a-h])([1-8])`,"gi"),`${a} takes $1$2`),s=s.replace(new RegExp(`\\b${o}([a-h1-8])([a-h])([1-8])`,"g"),`${a} $1$2$3`);for(const[o,a]of Object.entries(hR))s=s.replace(new RegExp(`\\b${o}\\s*([1-8])`,"gi"),`${a} $1`);return s=s.replace(/\ba\s+([1-8])\b/gi,"Ay $1"),s=s.replace(/\s+/g," ").trim(),s}async function jt(e,t=.9){Fr.onTTSStart(),qd=!0,fR(),console.log("[Voice] Mic muted: Bot is speaking");const n=gR(e);try{if(Pn)await new Promise(async r=>{let s=!1;const o=Math.max(2500,n.length*150),a=setTimeout(()=>{s||(console.warn("[Voice] TTS Event timeout - forcing resume after",o,"ms"),s=!0,l&&l.remove().catch(()=>{}),r())},o);let l=null;try{l=await Pv.addListener("end",()=>{s||(console.log("[Voice] TTS End detected via event - mic resume now safe"),clearTimeout(a),s=!0,l&&l.remove().catch(()=>{}),r())})}catch(c){console.warn("[Voice] Failed to setup TTS listener:",c)}try{await Pv.speak({text:n,language:"en-US",rate:t,pitch:1,volume:1})}catch(c){console.error("[Voice] Speak error:",c),clearTimeout(a),l&&l.remove().catch(()=>{}),s=!0,r()}l||(console.log("[Voice] No listener available, using fallback timing"),await new Promise(c=>setTimeout(c,Math.max(1e3,n.length*100))),s||(clearTimeout(a),s=!0,r()))});else{if(console.log("[Voice] speechSynthesis in window:","speechSynthesis"in window),console.log("[Voice] window.speechSynthesis:",typeof window.speechSynthesis),!("speechSynthesis"in window)||!window.speechSynthesis){console.warn("Speech synthesis not supported");return}try{window.speechSynthesis.cancel()}catch(s){console.warn("[Voice] Failed to cancel previous speech:",s)}await new Promise(s=>setTimeout(s,50));const r=await dR();console.log("[Voice] Loaded voices:",r.length),await new Promise(s=>{const o=new SpeechSynthesisUtterance(n);o.rate=t,o.pitch=1,o.volume=1;const a=r.find(l=>l.lang.startsWith("en-"));a?(o.voice=a,o.lang=a.lang):o.lang="en-US",o.onend=()=>{console.log("[Voice] Speech ended successfully"),s()},o.onerror=l=>{console.error("[Voice] Speech error:",l),s()},console.log("[Voice] Speaking:",n),window.speechSynthesis.speak(o)})}}finally{qd=!1,Fr.onTTSEnd(),setTimeout(()=>{qd||console.log("[Voice] Mic active: Listening for your move")},100)}}function K1(e){let t=e;return t=t.replace(/\bbefore\b/gi,"b 4"),t=t.replace(/\bsci\s*fi\b/gi,"c 5"),t=t.replace(/\bscifi\b/gi,"c 5"),t=t.replace(/\bquincy\b/gi,"queen c"),t=t.replace(/\brookie\b/gi,"rook e"),t=t.replace(/\brookies\b/gi,"rook e"),t=t.replace(/\brook\s+he\b/gi,"rook e"),t=t.replace(/\brock\s+([a-h])\b/gi,"rook $1"),t=t.replace(/\bhe\s+([1-8])\b/g,"e $1"),t=t.replace(/\bhe\s+(one|two|three|four|five|six|seven|eight|won|too|free|fore|for|fifth|sixth|seventh|eighth)\b/gi,"e $1"),t=t.replace(/\bthe\s+([1-8])\b/g,"d $1"),t=t.replace(/\bthe\s+(one|two|three|four|five|six|seven|eight)\b/gi,"d $1"),t=t.replace(/\b([a-h])\s+for\b/gi,"$1 4"),t}function _v(e,t){const n=K1(e.toLowerCase().trim()),r=cR(n),s=r.replace(/\s+/g,"").match(/^([a-h])([1-8])$/);if(s){const p=s[1]+s[2],w=t.find(x=>!/^[KQRBN]/i.test(x)&&x.includes(p));if(w)return w}if(r.includes("castle")||r.includes("castles"))if(r.includes("queen")||r.includes("long")){if(t.includes("O-O-O"))return"O-O-O"}else if(r.includes("king")||r.includes("short")){if(t.includes("O-O"))return"O-O"}else{if(t.includes("O-O"))return"O-O";if(t.includes("O-O-O"))return"O-O-O"}let o="",a="",l="",c="",u="",f=!1,h="";const m=r.split(/\s+/);for(const p of m){const w=p.toLowerCase();xs[w]!==void 0&&(o=xs[w]),(w==="takes"||w==="captures"||w==="x")&&(f=!0),!(w==="promotes"||w==="promotion")&&(yi[w]&&(a?c||(c=a,a=yi[w]):a=yi[w]),nu[w]&&(l&&!u&&(u=l),l=nu[w]),["queen","rook","bishop","knight"].includes(w)&&(r.includes("promote")||r.includes("equals"))&&(h=xs[w]||"Q"))}for(const p of m){const w=p.match(/^([a-h])([1-8])$/i);w&&(a&&!c&&(c=a),l&&!u&&(u=l),a=w[1].toLowerCase(),l=w[2])}if(!h&&(l==="1"||l==="8")){const p=m[m.length-1].toLowerCase();["queen","rook","bishop","knight"].includes(p)&&(h=xs[p]||"Q")}if(!a||!l)return null;const y=a+l,g=t.filter(p=>{const w=p.replace(/[+#]/g,"");if(!w.includes(y))return!1;if(o){if(!w.startsWith(o))return!1}else if(w.match(/^[KQRBN]/))return!1;if(c){const x=w.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(x&&x[1]&&x[1]!==c)return!1}if(u){const x=w.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(x&&x[2]&&x[2]!==u)return!1}return!0});if(g.length===1){let p=g[0];return h&&p.includes("=")&&(p=p.replace(/=[QRBN]/,"="+h)),p}if(g.length>1){const p=g.filter(x=>x.includes("x")),w=g.filter(x=>!x.includes("x"));return f&&p.length===1?p[0]:!f&&w.length===1?w[0]:g[0]}return null}function Mv(e,t){const n=K1(e.toLowerCase().trim());if(n.includes("castle")||n.includes("castles"))if(n.includes("queen")||n.includes("long")){if(t.includes("O-O-O"))return{move:"O-O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""}}else if(n.includes("king")||n.includes("short")){if(t.includes("O-O"))return{move:"O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""}}else{if(t.includes("O-O"))return{move:"O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""};if(t.includes("O-O-O"))return{move:"O-O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""}}let r="",s="",o="",a="",l="",c=!1,u="";const f=n.split(/\s+/);for(const y of f){const g=y.toLowerCase();xs[g]!==void 0&&(r=xs[g]),(g==="takes"||g==="captures"||g==="x")&&(c=!0),!(g==="promotes"||g==="promotion")&&(yi[g]&&(s?a||(a=s,s=yi[g]):s=yi[g]),nu[g]&&(o&&!l&&(l=o),o=nu[g]),["queen","rook","bishop","knight"].includes(g)&&(n.includes("promote")||n.includes("equals"))&&(u=xs[g]||"Q"))}for(const y of f){const g=y.match(/^([a-h])([1-8])$/i);g&&(s&&!a&&(a=s),o&&!l&&(l=o),s=g[1].toLowerCase(),o=g[2])}if(!u&&(o==="1"||o==="8")){const y=f[f.length-1].toLowerCase();["queen","rook","bishop","knight"].includes(y)&&(u=xs[y]||"Q")}if(!s||!o)return{move:null,isAmbiguous:!1,candidates:[],piece:"",targetSquare:""};const h=s+o,m=t.filter(y=>{const g=y.replace(/[+#]/g,"");if(!g.includes(h))return!1;if(r){if(!g.startsWith(r))return!1}else if(g.match(/^[KQRBN]/))return!1;if(a){const p=g.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(p&&p[1]&&p[1]!==a)return!1}if(l){const p=g.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(p&&p[2]&&p[2]!==l)return!1}return!0});if(m.length===1){let y=m[0];return u&&y.includes("=")&&(y=y.replace(/=[QRBN]/,"="+u)),{move:y,isAmbiguous:!1,candidates:[],piece:r,targetSquare:h}}if(m.length>1){const y=m.filter(p=>p.includes("x")),g=m.filter(p=>!p.includes("x"));return c&&y.length===1?{move:y[0],isAmbiguous:!1,candidates:[],piece:r,targetSquare:h}:!c&&g.length===1?{move:g[0],isAmbiguous:!1,candidates:[],piece:r,targetSquare:h}:{move:null,isAmbiguous:!0,candidates:m,piece:r,targetSquare:h}}return{move:null,isAmbiguous:!1,candidates:[],piece:r,targetSquare:h}}const Wd={one:"1",won:"1",want:"1",two:"2",too:"2",to:"2",three:"3",tree:"3",free:"3",four:"4",for:"4",fore:"4",five:"5",fife:"5",six:"6",sick:"6",sicks:"6",seven:"7",eight:"8",ate:"8",ait:"8",a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",alpha:"a",alfa:"a",bravo:"b",charlie:"c",delta:"d",echo:"e",foxtrot:"f",golf:"g",hotel:"h",ay:"a",aye:"a",apple:"a",bee:"b",be:"b",boy:"b",see:"c",sea:"c",cee:"c",dee:"d",the:"d",tea:"d",dog:"d",ee:"e",easy:"e",eff:"f",if:"f",of:"f",off:"f",fox:"f",gee:"g",jee:"g",aitch:"h",ach:"h"};function Av(e){const t=e.toLowerCase().trim(),n=t.split(/\s+/);let r=null,s=null;for(const o of n){const a=Wd[o];a?/^[a-h]$/.test(a)?r||(r=a):/^[1-8]$/.test(a)&&(s||(s=a)):o.length===1&&(/^[a-h]$/i.test(o)?r||(r=o.toLowerCase()):/^[1-8]$/.test(o)&&(s||(s=o)))}if(Wd[t]){const o=Wd[t];/^[a-h]$/.test(o)?r=o:/^[1-8]$/.test(o)&&(s=o)}return t.length===1&&(/^[a-h]$/i.test(t)?r=t.toLowerCase():/^[1-8]$/.test(t)&&(s=t)),{file:r,rank:s}}function Lv(e,t){for(const n of e){const s=n.replace(/[+#]/g,"").match(/^[KQRBN]([a-h])?([1-8])?x?[a-h][1-8]/);if(s){const o=s[1]||null,a=s[2]||null;if(t.file&&t.rank){if(o===t.file&&a===t.rank)return n}else if(t.file){if(o===t.file)return n}else if(t.rank&&a===t.rank)return n}}return null}function Iv(e){const t=[];for(const n of e){const s=n.replace(/[+#]/g,"").match(/^[KQRBN]([a-h])?([1-8])?x?[a-h][1-8]/);if(s){const o=s[1]||"",a=s[2]||"";(o||a)&&t.push(o+a)}}return t}function $v(e){const t=[];for(const n of e){const s=n.replace(/[+#=QRBN]/g,"").match(/^([a-h])x[a-h][1-8]$/);s&&t.push(s[1])}return t}function Ov(e,t){for(const n of e)if(n.replace(/[+#]/g,"").startsWith(t+"x"))return n;return null}function Dv(e){return e.length<2?!1:e.every(t=>{const n=t.replace(/[+#=QRBN]/g,"");return/^[a-h]x[a-h][1-8]$/.test(n)})}class vR{constructor(){this.onResult=null,this.onListeningChange=null,this.legalMoves=[],this.isStarted=!1,this.isMuted=!1,this.unmuteTimeout=null}async pauseLoop(){console.log("[VoiceRecognition] pauseLoop"),await it.pauseLoop(),this.isMuted=!0}resumeLoop(){console.log("[VoiceRecognition] resumeLoop"),this.isMuted=!1,it.resumeLoop()}setMute(t,n=400){this.unmuteTimeout&&(clearTimeout(this.unmuteTimeout),this.unmuteTimeout=null),t?(this.isMuted=!0,console.log("[VoiceRecognition] Software MUTE: transcripts will be ignored")):this.unmuteTimeout=setTimeout(()=>{this.isMuted=!1,this.unmuteTimeout=null,console.log("[VoiceRecognition] Software UNMUTE: mic LIVE")},n)}getMuted(){return this.isMuted}setLegalMoves(t){this.legalMoves=t,this.isStarted&&it.setLegalMoves(t)}setOnResult(t){this.onResult=t}setOnListeningChange(t){this.onListeningChange=t}async start(){if(this.isStarted){console.log("[VoiceRecognition] Already started, skipping duplicate start");return}await this.startInternal()}async startInternal(){try{const t=await it.start({mode:"move",legalMoves:this.legalMoves,onTranscript:(n,r)=>{if(this.isMuted){console.log("[VoiceRecognition] Ignored while muted:",n);return}this.onResult&&this.onResult(r||null,n)},onListeningChange:n=>{this.onListeningChange&&this.onListeningChange(n)}});this.isStarted=t,console.log("[VoiceRecognition] startInternal result:",t)}catch(t){console.log("[VoiceRecognition] startInternal failed:",t),this.isStarted=!1}}async forceRestart(){console.log("[VoiceRecognition] Force restart - bypassing guard"),await this.startInternal()}stop(){this.isStarted&&(this.isStarted=!1,it.stop())}async stopAndWait(){this.isStarted&&(this.isStarted=!1,await it.stopAndWait())}resetStartedFlag(){this.isStarted=!1}abort(){this.stop()}async reset(){await this.stopAndWait(),this.onResult=null,this.onListeningChange=null,this.legalMoves=[]}isSupported(){return!0}getIsListening(){return it.getIsListening()&&it.getMode()==="move"}async waitForInitialization(){await it.checkAvailability()}}const Wt=new vR;mh=Wt;const li=class li{constructor(){this.isListening=!1,this.shouldBeListening=!1,this.config=null,this.listenerHandle=null,this.stateListenerHandle=null,this.webRecognition=null,this.restartTimeout=null,this.availabilityChecked=!1,this.isAvailable=!1,this.lastErrorTime=0,this.consecutiveFailures=0,this.micBusy=!1,this.onMicBusyChange=null,this.onRetryNeeded=null,this.sessionId="master",this.isRegistered=!1,this.isPaused=!1,this.captureDebounceTimeout=null,this.pendingCaptureTranscript="",this.shouldRestart=!0,this.restartPromise=null,this.isStarting=!1,this.expectedStops=0,this.isMuted=!1,this.muteTimeout=null}async checkAvailability(){if(this.availabilityChecked)return this.isAvailable;if(Pn)try{return await Fu()?(this.isAvailable=!0,this.availabilityChecked=!0,!0):(console.log("[VoiceMaster] Voice service not ready (permission denied or init failed)"),this.isAvailable=!1,this.availabilityChecked=!0,!1)}catch(t){return console.error("[VoiceMaster] Error checking availability:",t),this.isAvailable=!1,this.availabilityChecked=!0,!1}else{const t=typeof window<"u"?window.SpeechRecognition||window.webkitSpeechRecognition:null;return this.isAvailable=!!t,this.availabilityChecked=!0,this.isAvailable}}setOnMicBusyChange(t){this.onMicBusyChange=t}setOnRetryNeeded(t){this.onRetryNeeded=t}isMicBusy(){return this.micBusy}resetMicBusy(){this.micBusy=!1,this.consecutiveFailures=0,this.lastErrorTime=0,this.onMicBusyChange&&this.onMicBusyChange(!1)}mute(t=400){this.isMuted=!0,this.muteTimeout&&clearTimeout(this.muteTimeout),this.muteTimeout=setTimeout(()=>{this.isMuted=!1,this.muteTimeout=null,console.log("[VoiceMaster] Mute window ended, listening again")},t),console.log(`[VoiceMaster] Mute window started: ${t}ms`)}setMute(t,n=400){this.muteTimeout&&(clearTimeout(this.muteTimeout),this.muteTimeout=null),t?(this.isMuted=!0,console.log("[VoiceMaster] Software MUTE: transcripts will be ignored")):this.muteTimeout=setTimeout(()=>{this.isMuted=!1,this.muteTimeout=null,console.log("[VoiceMaster] Software UNMUTE: mic LIVE")},n)}getIsMuted(){return this.isMuted}triggerRestart(){if(this.restartPromise){console.log("[VoiceMaster] Restart already in progress, skipping duplicate.");return}this.restartPromise=(async()=>{try{if(console.log("[VoiceMaster] Serialized restart sequence initiating..."),this.expectedStops++,console.log("[VoiceMaster] triggerRestart: expectedStops incremented to",this.expectedStops),console.log("[VoiceMaster] triggerRestart: preparing to restart listening"),this.expectedStops=0,await new Promise(t=>setTimeout(t,100)),this.shouldRestart&&!this.micBusy){console.log("[VoiceMaster] triggerRestart: restarting mic capture");try{await ie.startListening()}catch(t){console.warn("[VoiceMaster] triggerRestart startListening failed, scheduling retry:",t),setTimeout(()=>{this.shouldRestart&&!this.micBusy&&!this.restartPromise&&this.triggerRestart()},200)}}else console.log("[VoiceMaster] triggerRestart: shouldRestart=false or micBusy, skipping")}catch(t){console.warn("[VoiceMaster] Restart sequence failed:",t),setTimeout(()=>{this.shouldRestart&&!this.micBusy&&!this.restartPromise&&this.triggerRestart()},200)}finally{this.restartPromise=null}})()}async pauseLoop(){console.log("[VoiceMaster] Pausing Loop for TTS"),this.shouldRestart=!1,Pn&&console.log("[VoiceMaster] pauseLoop: mic paused (flag set, results ignored)")}resumeLoop(){if(console.log("[VoiceMaster] Resuming Loop after TTS"),this.shouldRestart=!0,!this.config){console.log("[VoiceMaster] resumeLoop: no config, skipping");return}this.triggerRestart()}getShouldRestartLoop(){return this.shouldRestart}async start(t){return this.micBusy=!1,this.isListening=!1,this.consecutiveFailures=0,this.isPaused=!1,this.shouldRestart=!0,this.isMuted=!1,console.log("[VoiceMaster] Atomic reset: state cleared for fresh start, loop enabled"),(this.listenerHandle||this.webRecognition||this.shouldBeListening)&&(console.log("[VoiceMaster] Clean handoff: stopping previous session"),await this.stop(),await new Promise(r=>setTimeout(r,100))),this.config=t,await this.checkAvailability()?(this.isRegistered||(Fr.register({id:this.sessionId,pause:()=>this.pauseInternal(),resume:()=>this.resumeInternal(),shouldBeActive:!0}),this.isRegistered=!0),Fr.setActive(this.sessionId,!0),Ii.register(this.sessionId),this.shouldBeListening=!0,console.log(`[VoiceMaster] Starting in '${t.mode}' mode`),Fr.canStartMic()?Pn?this.startNative():this.startWeb():(console.log("[VoiceMaster] TTS active or settling, queueing start for after TTS"),Fr.queueRestart(this.sessionId),t.onListeningChange&&t.onListeningChange(!0),!0)):(console.log("[VoiceMaster] Not available, cannot start"),!1)}setLegalMoves(t){this.config&&(this.config.legalMoves=t)}processTranscript(t){if(!this.config||!this.shouldBeListening)return;if(this.isMuted){console.log("[VoiceMaster] Ignoring transcript during mute window:",t);return}const n=this.config.mode;switch(console.log(`[VoiceMaster] Processing in '${n}' mode:`,t),n){case"raw":this.config.onTranscript(t);break;case"move":this.processMoveMode(t);break;case"placement":this.processPlacementMode(t);break}}processMoveMode(t){if(!this.config)return;const n=t.toLowerCase(),r=n.includes("takes")||n.includes("captures"),s=/\b(knight|bishop|rook|queen|king|horse|castle)\b/.test(n),o=/[a-h]\s*[1-8]/.test(n);if((s||r)&&!o){console.log("[VoiceMaster] Piece/capture detected, waiting for target square..."),this.pendingCaptureTranscript=t,this.captureDebounceTimeout&&clearTimeout(this.captureDebounceTimeout),this.captureDebounceTimeout=setTimeout(()=>{var c,u;console.log("[VoiceMaster] Debounce timeout, processing:",this.pendingCaptureTranscript);const l=_v(this.pendingCaptureTranscript,((c=this.config)==null?void 0:c.legalMoves)||[]);(u=this.config)==null||u.onTranscript(this.pendingCaptureTranscript,l),this.pendingCaptureTranscript=""},li.CAPTURE_DEBOUNCE_MS);return}this.pendingCaptureTranscript&&o&&(this.captureDebounceTimeout&&(clearTimeout(this.captureDebounceTimeout),this.captureDebounceTimeout=null),this.pendingCaptureTranscript="");const a=_v(t,this.config.legalMoves||[]);this.config.onTranscript(t,a)}processPlacementMode(t){this.config&&this.config.onTranscript(t)}pauseInternal(){var t;if(console.log(`[VoiceMaster] pauseInternal called - isListening=${this.isListening}, shouldBeListening=${this.shouldBeListening}`),this.shouldRestart=!1,!this.isListening){console.log("[VoiceMaster] Not pausing - already not listening");return}if(this.isPaused=!0,console.log("[VoiceMaster] Pausing for TTS"),Pn)console.log("[VoiceMaster] Pausing - mic will resume on TTS end");else if(this.webRecognition)try{this.webRecognition.stop()}catch(n){console.log("[VoiceMaster] Web pause error:",n)}this.isListening=!1,(t=this.config)!=null&&t.onListeningChange&&this.config.onListeningChange(!1),console.log("[VoiceMaster] pauseInternal complete - isListening now false")}async resumeInternal(){if(console.log(`[VoiceMaster] resumeInternal called - shouldBeListening=${this.shouldBeListening}, isListening=${this.isListening}, isPaused=${this.isPaused}`),!this.shouldBeListening){console.log("[VoiceMaster] Not resuming - shouldBeListening is false");return}if(this.isListening){console.log("[VoiceMaster] Already listening, skipping resume");return}if(this.isPaused=!1,this.shouldRestart=!0,console.log("[VoiceMaster] Resuming after TTS"),Pn){if(this.restartPromise){console.log("[VoiceMaster] Waiting for pending restart to complete...");try{await this.restartPromise}catch{}}this.triggerRestart()}else this.startWeb()}async startNative(){var n;if(this.isStarting)return console.log("[VoiceMaster] startNative blocked: Already starting"),!1;if(this.micBusy)return console.log("[VoiceMaster] Mic is busy, not starting"),!1;const t=Date.now()-this.lastErrorTime;if(t<3e3&&this.lastErrorTime>0)return console.log(`[VoiceMaster] Lockout: ${3e3-t}ms remaining, queueing restart`),this.restartTimeout||this.scheduleRestart(),!0;this.isStarting=!0;try{return this.listenerHandle&&(await this.listenerHandle.remove(),this.listenerHandle=null),this.listenerHandle=await ie.addListener("onSpeechResult",r=>{if(!this.shouldRestart){console.log("[VoiceMaster] Loop paused, ignoring speech result");return}if(r.text&&this.shouldBeListening){const s=r.text;this.consecutiveFailures=0,this.processTranscript(s),this.shouldRestart&&this.shouldBeListening&&ie.startListening().catch(o=>{console.log("[VoiceMaster] startListening error after result:",o)})}}),console.log("[VoiceMaster] Starting BlindfoldNative session..."),await ie.startSession(),console.log("[VoiceMaster] Starting BlindfoldNative listening..."),await ie.startListening(),this.isListening=!0,this.consecutiveFailures=0,console.log("[VoiceMaster] Started native - isListening=true, shouldBeListening="+this.shouldBeListening),(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!0),await H1(),!0}catch(r){return console.error("[VoiceMaster] Failed to start native:",r),this.lastErrorTime=Date.now(),this.consecutiveFailures++,this.consecutiveFailures>=li.MAX_CONSECUTIVE_FAILURES?(console.log("[VoiceMaster] Too many failures, mic is busy"),this.micBusy=!0,this.isListening=!1,this.onMicBusyChange&&this.onMicBusyChange(!0),this.onRetryNeeded&&this.onRetryNeeded(),!1):(this.shouldBeListening&&this.scheduleRestart(),!1)}finally{this.isStarting=!1}}startWeb(){try{const t=window.SpeechRecognition||window.webkitSpeechRecognition;return t?(this.webRecognition=new t,this.webRecognition.continuous=!0,this.webRecognition.interimResults=!1,this.webRecognition.lang="en-US",this.webRecognition.onresult=n=>{const r=n.results[n.results.length-1];if(r.isFinal&&this.shouldBeListening){const s=r[0].transcript;this.processTranscript(s)}},this.webRecognition.onerror=n=>{console.log("[VoiceMaster] Web error:",n.error),n.error!=="aborted"&&n.error!=="not-allowed"&&this.shouldBeListening&&this.scheduleRestart()},this.webRecognition.onend=()=>{var n;this.isListening=!1,(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!1),this.shouldBeListening&&this.scheduleRestart()},this.webRecognition.onstart=()=>{var n;this.isListening=!0,(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!0)},this.webRecognition.start(),console.log("[VoiceMaster] Started web"),!0):!1}catch(t){return console.error("[VoiceMaster] Failed to start web:",t),!1}}scheduleRestart(){const t=Date.now()-this.lastErrorTime;if(t<3e3&&this.lastErrorTime>0){this.restartTimeout&&clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>{this.scheduleRestart()},3e3-t+100);return}if(this.micBusy){console.log("[VoiceMaster] Mic busy, not scheduling restart");return}this.restartTimeout&&clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>{this.shouldBeListening&&!this.micBusy&&(console.log("[VoiceMaster] Scheduled restart firing via Gatekeeper"),Pn?this.triggerRestart():this.startWeb())},500)}async stop(){var t;if(console.log("[VoiceMaster] stop() called - beginning full cleanup"),this.shouldBeListening=!1,this.isPaused=!1,this.micBusy=!1,this.consecutiveFailures=0,this.lastErrorTime=0,this.captureDebounceTimeout&&(clearTimeout(this.captureDebounceTimeout),this.captureDebounceTimeout=null),this.pendingCaptureTranscript="",Fr.setActive(this.sessionId,!1),Fr.clearPendingForSession(this.sessionId),this.isRegistered&&(Fr.unregister(this.sessionId),Ii.unregister(this.sessionId),this.isRegistered=!1),this.restartTimeout&&(clearTimeout(this.restartTimeout),this.restartTimeout=null),Pn)try{await ie.stopSession(),this.listenerHandle&&(await this.listenerHandle.remove(),this.listenerHandle=null)}catch(n){console.log("[VoiceMaster] Stop error:",n)}else if(this.webRecognition){try{this.webRecognition.stop()}catch(n){console.log("[VoiceMaster] Web stop error:",n)}this.webRecognition=null}this.isListening=!1,(t=this.config)!=null&&t.onListeningChange&&this.config.onListeningChange(!1),this.config=null,console.log("[VoiceMaster] Stopped - all state reset, session fully cleaned")}async stopAndWait(){var n;if(this.shouldBeListening=!1,!this.listenerHandle&&!this.webRecognition){console.log("[VoiceMaster] stopAndWait: nothing to stop, fast path"),this.micBusy=!1,this.isListening=!1,this.consecutiveFailures=0,this.isPaused=!1,this.config=null;return}console.log("[VoiceMaster] stopAndWait: active session, stopping...");const t=async()=>{let r=!1;const s=this.stop().then(()=>{r=!0});if(await Promise.race([s,new Promise(o=>setTimeout(o,500))]),!r){if(console.warn("[VoiceMaster] Normal stop timed out, forcing native stop"),Pn)try{await ie.stopSession()}catch{}if(this.listenerHandle){try{await this.listenerHandle.remove()}catch{}this.listenerHandle=null}if(this.webRecognition){try{this.webRecognition.stop()}catch{}this.webRecognition=null}}};await Promise.race([t(),new Promise(r=>setTimeout(()=>{console.warn("[VoiceMaster] 800ms hard timeout - forcing cleanup"),r()},800))]),this.micBusy=!1,this.isListening=!1,this.consecutiveFailures=0,this.isPaused=!1,this.listenerHandle=null,this.stateListenerHandle=null,this.webRecognition=null,(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!1),this.config=null,console.log("[VoiceMaster] stopAndWait complete - state reset")}getIsListening(){return this.isListening}getMode(){var t;return((t=this.config)==null?void 0:t.mode)||null}};li.CAPTURE_DEBOUNCE_MS=2e3,li.MAX_CONSECUTIVE_FAILURES=3;let ph=li;const it=new ph,Bv={async start(e,t){return it.start({mode:"raw",onTranscript:e,onListeningChange:t})},async stop(){return it.stop()},async stopAndWait(){return it.stopAndWait()},async checkAvailability(){return it.checkAvailability()},getIsListening(){return it.getIsListening()},setOnMicBusyChange(e){it.setOnMicBusyChange(e)},setOnRetryNeeded(e){it.setOnRetryNeeded(e)},isMicBusy(){return it.isMicBusy()},resetMicBusy(){it.resetMicBusy()},mute(e=400){it.mute(e)},setMute(e,t=400){it.setMute(e,t)},getIsMuted(){return it.getIsMuted()},async pauseLoop(){return it.pauseLoop()},resumeLoop(){it.resumeLoop()}};function ru(e){const t=Math.max(400,Math.min(2600,e));if(t<=600){const o=(t-400)/200;return{elo:t,depth:1,randomPercent:Math.round(50-o*20),skillLevel:Math.round(o*2)}}if(t<=800){const o=(t-600)/200;return{elo:t,depth:1+Math.round(o),randomPercent:Math.round(30-o*10),skillLevel:Math.round(2+o*3)}}if(t<=1e3){const o=(t-800)/200;return{elo:t,depth:2+Math.round(o),randomPercent:Math.round(20-o*8),skillLevel:Math.round(5+o*3)}}if(t<=1200){const o=(t-1e3)/200;return{elo:t,depth:3+Math.round(o),randomPercent:Math.round(12-o*5),skillLevel:Math.round(8+o*2)}}if(t<=1400){const o=(t-1200)/200;return{elo:t,depth:4+Math.round(o),randomPercent:Math.round(7-o*4),skillLevel:Math.round(10+o*2)}}if(t<=1600){const o=(t-1400)/200;return{elo:t,depth:5+Math.round(o),randomPercent:Math.round(3-o*3),skillLevel:Math.round(12+o*3)}}if(t<=1800){const o=(t-1600)/200;return{elo:t,depth:6,randomPercent:0,skillLevel:Math.round(15+o*2)}}const n=(t-1800)/800,r=2e5;return{elo:t,depth:0,randomPercent:0,skillLevel:Math.round(17+n*3),nodes:Math.round(r+n*(2e6-r))}}function xR(e){return e<=600?"Beginner":e<=800?"Novice":e<=1e3?"Casual":e<=1200?"Intermediate":e<=1400?"Club Player":e<=1600?"Strong Club":e<=1800?"Expert":e<=2e3?"Master":e<=2200?"National Master":e<=2400?"International Master":"Grandmaster"}const Q1=[400,600,800,1e3,1200,1400,1600,1800,2e3,2200,2400,2600];Q1.map(e=>{const t=ru(e);return{id:`elo_${e}`,elo:e,difficulty:`elo_${e}`,depth:t.depth,randomPercent:t.randomPercent}});const fp=Q1,yR={kingsideCornerWhite:["f1","g1","h1","f2","g2","h2"],queensideCornerWhite:["a1","b1","c1","a2","b2","c2"],kingsideCornerBlack:["f8","g8","h8","f7","g7","h7"],queensideCornerBlack:["a8","b8","c8","a7","b7","c7"],center:["d4","e4","d5","e5"],extendedCenter:["c3","d3","e3","f3","c4","f4","c5","f5","c6","d6","e6","f6"],kingside:["f1","g1","h1","f2","g2","h2","f3","g3","h3","f4","g4","h4","f5","g5","h5","f6","g6","h6","f7","g7","h7","f8","g8","h8"],queenside:["a1","b1","c1","a2","b2","c2","a3","b3","c3","a4","b4","c4","a5","b5","c5","a6","b6","c6","a7","b7","c7","a8","b8","c8"],corners:["a1","h1","a8","h8"]},Y1="blindfold-chess-stats-v2",X1="blindfold-chess-settings",wR="blindfold-chess-stats",Z1={moves10:{total:0,count:0},moves20:{total:0,count:0},moves30:{total:0,count:0},moves40:{total:0,count:0},moves50plus:{total:0,count:0}},J1={opening:{total:0,count:0},middlegame:{total:0,count:0},endgame:{total:0,count:0}},hp={wins:0,draws:0,losses:0,lastGamePeekTime:0,totalPeekTime:0,gamesWithPeeks:0,bestPeekFreeStreak:0,lastGamePeekFreeStreak:0,lastGameAvgResponseTime:0,totalResponseTime:0,totalResponseMoves:0,bestClarityScore:0,lastClarityScore:0,lastVoicePurity:0,bestVoicePurity:0,tierStats:{},visualizationCeiling:0,visualizationCeilingElo:null,clarityByMoveCount:{...Z1},totalPeekFreeGames:0,totalGamesPlayed:0,reconstructionVoiceInputs:0,reconstructionTouchInputs:0,gameVoiceMoves:0,gameTouchMoves:0,responseTimeByPhase:{...J1},lastGameEndgameDrift:0,voiceCorrections:0,voiceCommandsTotal:0,lastGameVoiceCorrections:0,mentalBlurCount:0,squareInquiryHeatmap:{},totalSquareInquiries:0,stockfishThresholdElo:null,longestGame:0,fastestWin:0,currentWinStreak:0,bestWinStreak:0,currentPeekFreeStreak:0,bestPeekFreeGameStreak:0,blindfoldGamesPlayed:0,assistedGamesCount:0,lastGameWasAssisted:!1},Fv={boardReconstructionEnabled:!1,botThinkingTimeEnabled:!1,keepAwakeEnabled:!0};function zv(e){const t={...hp,...e};return t.clarityByMoveCount={...Z1,...e.clarityByMoveCount||{}},t.responseTimeByPhase={...J1,...e.responseTimeByPhase||{}},t.tierStats=e.tierStats||{},t.squareInquiryHeatmap=e.squareInquiryHeatmap||{},t}function Ma(){try{const e=localStorage.getItem(Y1);if(e){const n=JSON.parse(e);return zv(n)}const t=localStorage.getItem(wR);if(t){const n=JSON.parse(t),r=zv(n);return mp(r),r}}catch(e){console.error("Failed to load stats:",e)}return{...hp}}function mp(e){try{localStorage.setItem(Y1,JSON.stringify(e))}catch(t){console.error("Failed to save stats:",t)}}function gh(){try{const e=localStorage.getItem(X1);if(e){const t=JSON.parse(e);return{...Fv,...t}}}catch(e){console.error("Failed to load settings:",e)}return{...Fv}}function vh(e){try{localStorage.setItem(X1,JSON.stringify(e))}catch(t){console.error("Failed to save settings:",t)}}function bR(e){return e<=10?"moves10":e<=20?"moves20":e<=30?"moves30":e<=40?"moves40":"moves50plus"}function eb(e){return{opening:e.slice(0,10),middlegame:e.slice(10,30),endgame:e.slice(30)}}function SR(e){const t=eb(e);if(t.opening.length===0||t.endgame.length===0)return 0;const n=t.opening.reduce((o,a)=>o+a,0)/t.opening.length,r=t.endgame.reduce((o,a)=>o+a,0)/t.endgame.length;if(n===0)return 0;const s=(r-n)/n*100;return Math.max(0,Math.round(s))}function kR(e){if(e.length<3)return 0;const n=e.reduce((r,s)=>r+s,0)/e.length*2;return e.filter(r=>r>n).length}function NR(e){for(const t of fp){const n=e[t];if(!n||n.totalGames<3)continue;if(n.wins/n.totalGames<.5)return t}return null}function CR(e){let t=0;for(const n of fp){const r=e[n];r&&r.peekFreeWins>0&&n>t&&(t=n)}return{elo:t}}function jR(e,t,n=0,r=[],s,o,a){const l=Ma(),c=(a==null?void 0:a.botElo)||1200,u=(a==null?void 0:a.wasPeekFree)??t===0,f=(a==null?void 0:a.totalMoves)||r.length,h=(a==null?void 0:a.voiceCorrections)||0,m=(a==null?void 0:a.voiceCommands)||0,y=(a==null?void 0:a.reconstructionVoiceInputs)||0,g=(a==null?void 0:a.reconstructionTouchInputs)||0,p=(a==null?void 0:a.gameVoiceMoves)||0,w=(a==null?void 0:a.gameTouchMoves)||0,x=(a==null?void 0:a.squareInquiries)||[],v=(a==null?void 0:a.isBlindfold)??!1,b=(a==null?void 0:a.wasAssisted)??!1;e==="win"?l.wins++:e==="loss"?l.losses++:l.draws++,l.totalGamesPlayed++,v?(l.blindfoldGamesPlayed++,l.lastGamePeekTime=t,t>0&&(l.totalPeekTime+=t,l.gamesWithPeeks++),u?(l.totalPeekFreeGames++,l.currentPeekFreeStreak++,l.currentPeekFreeStreak>l.bestPeekFreeGameStreak&&(l.bestPeekFreeGameStreak=l.currentPeekFreeStreak)):l.currentPeekFreeStreak=0,l.lastGamePeekFreeStreak=n,n>l.bestPeekFreeStreak&&(l.bestPeekFreeStreak=n)):(l.lastGamePeekTime=0,l.lastGamePeekFreeStreak=0,l.currentPeekFreeStreak=0),l.tierStats[c]||(l.tierStats[c]={wins:0,losses:0,draws:0,peekFreeWins:0,totalPeeks:0,totalGames:0});const k=l.tierStats[c];k.totalGames++,e==="win"?(k.wins++,v&&u&&k.peekFreeWins++,l.currentWinStreak++,l.currentWinStreak>l.bestWinStreak&&(l.bestWinStreak=l.currentWinStreak),(l.fastestWin===0||f<l.fastestWin)&&(l.fastestWin=f)):e==="loss"?(k.losses++,l.currentWinStreak=0):k.draws++,v&&!u&&k.totalPeeks++,f>l.longestGame&&(l.longestGame=f);const S=CR(l.tierStats);if(l.visualizationCeiling=S.elo,l.visualizationCeilingElo=S.elo||null,l.stockfishThresholdElo=NR(l.tierStats),r.length>0){const C=r.reduce((j,R)=>j+R,0)/r.length;l.lastGameAvgResponseTime=C,l.totalResponseTime+=r.reduce((j,R)=>j+R,0),l.totalResponseMoves+=r.length;const N=eb(r);N.opening.length>0&&(l.responseTimeByPhase.opening.total+=N.opening.reduce((j,R)=>j+R,0),l.responseTimeByPhase.opening.count+=N.opening.length),N.middlegame.length>0&&(l.responseTimeByPhase.middlegame.total+=N.middlegame.reduce((j,R)=>j+R,0),l.responseTimeByPhase.middlegame.count+=N.middlegame.length),N.endgame.length>0&&(l.responseTimeByPhase.endgame.total+=N.endgame.reduce((j,R)=>j+R,0),l.responseTimeByPhase.endgame.count+=N.endgame.length),l.lastGameEndgameDrift=SR(r),l.mentalBlurCount+=kR(r)}else l.lastGameAvgResponseTime=0,l.lastGameEndgameDrift=0;if(l.lastGameWasAssisted=b,b&&l.assistedGamesCount++,s!==void 0){const C=b?Math.min(s,50):s;l.lastClarityScore=C,C>l.bestClarityScore&&(l.bestClarityScore=C);const N=bR(f);l.clarityByMoveCount[N].total+=C,l.clarityByMoveCount[N].count++}if(o!==void 0&&(l.lastVoicePurity=o,o>l.bestVoicePurity&&(l.bestVoicePurity=o)),l.voiceCorrections+=h,l.voiceCommandsTotal+=m,l.lastGameVoiceCorrections=h,l.reconstructionVoiceInputs+=y,l.reconstructionTouchInputs+=g,l.gameVoiceMoves+=p,l.gameTouchMoves+=w,x.length>0){l.totalSquareInquiries+=x.length;for(const C of x){const N=C.toLowerCase();l.squareInquiryHeatmap[N]=(l.squareInquiryHeatmap[N]||0)+1}}return mp(l),l}function ER(e){return e.totalResponseMoves===0?0:e.totalResponseTime/e.totalResponseMoves}function tb(e){const t=e.blindfoldGamesPlayed||0;return t===0?0:Math.round(e.totalPeekFreeGames/t*100)}function PR(e){const t=e.gameVoiceMoves+e.gameTouchMoves;return t===0?{voice:0,touch:0}:{voice:Math.round(e.gameVoiceMoves/t*100),touch:Math.round(e.gameTouchMoves/t*100)}}function nb(e){const t=e.responseTimeByPhase.opening,n=e.responseTimeByPhase.middlegame,r=e.responseTimeByPhase.endgame;return{opening:t.count>0?Math.round(t.total/t.count):0,middlegame:n.count>0?Math.round(n.total/n.count):0,endgame:r.count>0?Math.round(r.total/r.count):0}}function rb(e){const t=e.clarityByMoveCount;return{moves10:t.moves10.count>0?Math.round(t.moves10.total/t.moves10.count):0,moves20:t.moves20.count>0?Math.round(t.moves20.total/t.moves20.count):0,moves30:t.moves30.count>0?Math.round(t.moves30.total/t.moves30.count):0,moves40:t.moves40.count>0?Math.round(t.moves40.total/t.moves40.count):0,moves50plus:t.moves50plus.count>0?Math.round(t.moves50plus.total/t.moves50plus.count):0}}function sb(e){return e.voiceCommandsTotal===0?0:Math.round(e.voiceCorrections/e.voiceCommandsTotal*100)}function TR(e){const t={kingsideCornerWhite:0,queensideCornerWhite:0,kingsideCornerBlack:0,queensideCornerBlack:0,center:0,extendedCenter:0,kingside:0,queenside:0,corners:0};for(const[n,r]of Object.entries(e.squareInquiryHeatmap))for(const[s,o]of Object.entries(yR))o.includes(n)&&(t[s]+=r||0);return t}function ob(e,t=5){return Object.entries(e.squareInquiryHeatmap).map(([n,r])=>({square:n,count:r||0})).sort((n,r)=>r.count-n.count).slice(0,t)}function RR(e,t){if(e.totalSquareInquiries===0)return 0;const n=e.squareInquiryHeatmap[t.toLowerCase()]||0,r=Math.max(...Object.values(e.squareInquiryHeatmap).map(s=>s||0),1);return Math.round(n/r*100)}function _R(e,t){const n=e.tierStats[t];return!n||n.totalGames===0?0:Math.round(n.wins/n.totalGames*100)}function si(e){return e===0?"-":e<1e3?`${Math.round(e)}ms`:`${(e/1e3).toFixed(1)}s`}function MR(){mp({...hp})}function AR(e){const t=[],n=rb(e);n.moves20>0&&n.moves40>0&&n.moves20-n.moves40>20&&t.push({type:"warning",category:"visualization",title:"Clarity Degradation",message:`Your accuracy drops from ${n.moves20}% at 20 moves to ${n.moves40}% at 40 moves. Focus on endgame visualization training.`}),e.visualizationCeiling>0&&t.push({type:"success",category:"visualization",title:"Visualization Ceiling",message:`You've beaten a ${e.visualizationCeiling} Elo bot without peeking! Keep pushing higher.`});const r=tb(e);r>50&&t.push({type:"success",category:"visualization",title:"Peek-Free Progress",message:`${r}% of your games are peek-free. Your visualization is improving!`});const s=nb(e);if(s.endgame>0&&s.opening>0){const f=(s.endgame-s.opening)/s.opening*100;f>50&&t.push({type:"warning",category:"cognitive",title:"Endgame Drift Detected",message:`Your endgame response time is ${Math.round(f)}% slower than opening. The open board may be causing "mental blur."`})}const o=sb(e);o>20&&t.push({type:"tip",category:"cognitive",title:"Voice Accuracy",message:`You correct ${o}% of voice commands. Try speaking more slowly or using full square names.`}),e.stockfishThresholdElo&&t.push({type:"info",category:"tactical",title:"Stockfish Threshold",message:`Your win rate drops below 50% at ${e.stockfishThresholdElo} Elo. Focus training at this level.`});const a=TR(e),l=ob(e,3);if(l.length>0&&l[0].count>=3){const f=l.map(h=>h.square.toUpperCase()).join(", ");t.push({type:"warning",category:"tactical",title:"Board Blind Spots",message:`You frequently lose track of: ${f}. Focus on visualizing these squares.`})}const c=a.kingside,u=a.queenside;return c>u*2&&c>=5?t.push({type:"tip",category:"tactical",title:"Kingside Visualization",message:"Your mental image of the kingside is weaker. Practice visualizing the f, g, and h files."}):u>c*2&&u>=5&&t.push({type:"tip",category:"tactical",title:"Queenside Visualization",message:"Your mental image of the queenside is weaker. Practice visualizing the a, b, and c files."}),a.corners>=4&&t.push({type:"tip",category:"visualization",title:"Corner Awareness",message:"Your mental board is blurry in the corners (a1, h1, a8, h8). These squares need more focus."}),t}class ib{constructor(t){this.sqlite=t,this._connectionDict=new Map}async initWebStore(){try{return await this.sqlite.initWebStore(),Promise.resolve()}catch(t){return Promise.reject(t)}}async saveToStore(t){try{return await this.sqlite.saveToStore({database:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async saveToLocalDisk(t){try{return await this.sqlite.saveToLocalDisk({database:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async getFromLocalDiskToStore(t){const n=t??!0;try{return await this.sqlite.getFromLocalDiskToStore({overwrite:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async echo(t){try{const n=await this.sqlite.echo({value:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isSecretStored(){try{const t=await this.sqlite.isSecretStored();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async setEncryptionSecret(t){try{return await this.sqlite.setEncryptionSecret({passphrase:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async changeEncryptionSecret(t,n){try{return await this.sqlite.changeEncryptionSecret({passphrase:t,oldpassphrase:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async clearEncryptionSecret(){try{return await this.sqlite.clearEncryptionSecret(),Promise.resolve()}catch(t){return Promise.reject(t)}}async checkEncryptionSecret(t){try{const n=await this.sqlite.checkEncryptionSecret({passphrase:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async addUpgradeStatement(t,n){try{return t.endsWith(".db")&&(t=t.slice(0,-3)),await this.sqlite.addUpgradeStatement({database:t,upgrade:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async createConnection(t,n,r,s,o){try{t.endsWith(".db")&&(t=t.slice(0,-3)),await this.sqlite.createConnection({database:t,encrypted:n,mode:r,version:s,readonly:o});const a=new Vv(t,o,this.sqlite),l=o?`RO_${t}`:`RW_${t}`;return this._connectionDict.set(l,a),Promise.resolve(a)}catch(a){return Promise.reject(a)}}async closeConnection(t,n){try{t.endsWith(".db")&&(t=t.slice(0,-3)),await this.sqlite.closeConnection({database:t,readonly:n});const r=n?`RO_${t}`:`RW_${t}`;return this._connectionDict.delete(r),Promise.resolve()}catch(r){return Promise.reject(r)}}async isConnection(t,n){const r={};t.endsWith(".db")&&(t=t.slice(0,-3));const s=n?`RO_${t}`:`RW_${t}`;return r.result=this._connectionDict.has(s),Promise.resolve(r)}async retrieveConnection(t,n){t.endsWith(".db")&&(t=t.slice(0,-3));const r=n?`RO_${t}`:`RW_${t}`;if(this._connectionDict.has(r)){const s=this._connectionDict.get(r);return typeof s<"u"?Promise.resolve(s):Promise.reject(`Connection ${t} is undefined`)}else return Promise.reject(`Connection ${t} does not exist`)}async getNCDatabasePath(t,n){try{const r=await this.sqlite.getNCDatabasePath({path:t,database:n});return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async createNCConnection(t,n){try{await this.sqlite.createNCConnection({databasePath:t,version:n});const r=new Vv(t,!0,this.sqlite),s=`RO_${t})`;return this._connectionDict.set(s,r),Promise.resolve(r)}catch(r){return Promise.reject(r)}}async closeNCConnection(t){try{await this.sqlite.closeNCConnection({databasePath:t});const n=`RO_${t})`;return this._connectionDict.delete(n),Promise.resolve()}catch(n){return Promise.reject(n)}}async isNCConnection(t){const n={},r=`RO_${t})`;return n.result=this._connectionDict.has(r),Promise.resolve(n)}async retrieveNCConnection(t){if(this._connectionDict.has(t)){const n=`RO_${t})`,r=this._connectionDict.get(n);return typeof r<"u"?Promise.resolve(r):Promise.reject(`Connection ${t} is undefined`)}else return Promise.reject(`Connection ${t} does not exist`)}async isNCDatabase(t){try{const n=await this.sqlite.isNCDatabase({databasePath:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async retrieveAllConnections(){return this._connectionDict}async closeAllConnections(){const t=new Map;try{for(const n of this._connectionDict.keys()){const r=n.substring(3),s=n.substring(0,3)==="RO_";await this.sqlite.closeConnection({database:r,readonly:s}),t.set(n,null)}for(const n of t.keys())this._connectionDict.delete(n);return Promise.resolve()}catch(n){return Promise.reject(n)}}async checkConnectionsConsistency(){try{const t=[...this._connectionDict.keys()],n=[],r=[];for(const o of t)n.push(o.substring(0,2)),r.push(o.substring(3));const s=await this.sqlite.checkConnectionsConsistency({dbNames:r,openModes:n});return s.result||(this._connectionDict=new Map),Promise.resolve(s)}catch(t){return this._connectionDict=new Map,Promise.reject(t)}}async importFromJson(t){try{const n=await this.sqlite.importFromJson({jsonstring:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isJsonValid(t){try{const n=await this.sqlite.isJsonValid({jsonstring:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async copyFromAssets(t){const n=t??!0;try{return await this.sqlite.copyFromAssets({overwrite:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async getFromHTTPRequest(t,n){const r=n??!0;try{return await this.sqlite.getFromHTTPRequest({url:t,overwrite:r}),Promise.resolve()}catch(s){return Promise.reject(s)}}async isDatabaseEncrypted(t){t.endsWith(".db")&&(t=t.slice(0,-3));try{const n=await this.sqlite.isDatabaseEncrypted({database:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isInConfigEncryption(){try{const t=await this.sqlite.isInConfigEncryption();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isInConfigBiometricAuth(){try{const t=await this.sqlite.isInConfigBiometricAuth();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isDatabase(t){t.endsWith(".db")&&(t=t.slice(0,-3));try{const n=await this.sqlite.isDatabase({database:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async getDatabaseList(){try{const n=(await this.sqlite.getDatabaseList()).values;n.sort();const r={values:n};return Promise.resolve(r)}catch(t){return Promise.reject(t)}}async getMigratableDbList(t){const n=t||"default";try{const r=await this.sqlite.getMigratableDbList({folderPath:n});return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async addSQLiteSuffix(t,n){const r=t||"default",s=n||[];try{const o=await this.sqlite.addSQLiteSuffix({folderPath:r,dbNameList:s});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async deleteOldDatabases(t,n){const r=t||"default",s=n||[];try{const o=await this.sqlite.deleteOldDatabases({folderPath:r,dbNameList:s});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async moveDatabasesAndAddSuffix(t,n){const r=t||"default",s=n||[];return this.sqlite.moveDatabasesAndAddSuffix({folderPath:r,dbNameList:s})}}class Vv{constructor(t,n,r){this.dbName=t,this.readonly=n,this.sqlite=r}getConnectionDBName(){return this.dbName}getConnectionReadOnly(){return this.readonly}async open(){try{return await this.sqlite.open({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async close(){try{return await this.sqlite.close({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async beginTransaction(){try{const t=await this.sqlite.beginTransaction({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async commitTransaction(){try{const t=await this.sqlite.commitTransaction({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async rollbackTransaction(){try{const t=await this.sqlite.rollbackTransaction({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isTransactionActive(){try{const t=await this.sqlite.isTransactionActive({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async loadExtension(t){try{return await this.sqlite.loadExtension({database:this.dbName,path:t,readonly:this.readonly}),Promise.resolve()}catch(n){return Promise.reject(n)}}async enableLoadExtension(t){try{return await this.sqlite.enableLoadExtension({database:this.dbName,toggle:t,readonly:this.readonly}),Promise.resolve()}catch(n){return Promise.reject(n)}}async getUrl(){try{const t=await this.sqlite.getUrl({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getVersion(){try{const t=await this.sqlite.getVersion({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getTableList(){try{const t=await this.sqlite.getTableList({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async execute(t,n=!0,r=!0){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const s=await this.sqlite.execute({database:this.dbName,statements:t,transaction:n,readonly:!1,isSQL92:r});return Promise.resolve(s)}}catch(s){return Promise.reject(s)}}async query(t,n,r=!0){let s;try{return n&&n.length>0?s=await this.sqlite.query({database:this.dbName,statement:t,values:n,readonly:this.readonly,isSQL92:!0}):s=await this.sqlite.query({database:this.dbName,statement:t,values:[],readonly:this.readonly,isSQL92:r}),s=await this.reorderRows(s),Promise.resolve(s)}catch(o){return Promise.reject(o)}}async run(t,n,r=!0,s="no",o=!0){let a;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(n&&n.length>0?a=await this.sqlite.run({database:this.dbName,statement:t,values:n,transaction:r,readonly:!1,returnMode:s,isSQL92:!0}):a=await this.sqlite.run({database:this.dbName,statement:t,values:[],transaction:r,readonly:!1,returnMode:s,isSQL92:o}),a.changes=await this.reorderRows(a.changes),Promise.resolve(a))}catch(l){return Promise.reject(l)}}async executeSet(t,n=!0,r="no",s=!0){let o;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(o=await this.sqlite.executeSet({database:this.dbName,set:t,transaction:n,readonly:!1,returnMode:r,isSQL92:s}),o.changes=await this.reorderRows(o.changes),Promise.resolve(o))}catch(a){return Promise.reject(a)}}async isExists(){try{const t=await this.sqlite.isDBExists({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isTable(t){try{const n=await this.sqlite.isTableExists({database:this.dbName,table:t,readonly:this.readonly});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isDBOpen(){try{const t=await this.sqlite.isDBOpen({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async delete(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteDatabase({database:this.dbName,readonly:!1}),Promise.resolve())}catch(t){return Promise.reject(t)}}async createSyncTable(){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const t=await this.sqlite.createSyncTable({database:this.dbName,readonly:!1});return Promise.resolve(t)}}catch(t){return Promise.reject(t)}}async setSyncDate(t){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.setSyncDate({database:this.dbName,syncdate:t,readonly:!1}),Promise.resolve())}catch(n){return Promise.reject(n)}}async getSyncDate(){try{const t=await this.sqlite.getSyncDate({database:this.dbName,readonly:this.readonly});let n="";return t.syncDate>0&&(n=new Date(t.syncDate*1e3).toISOString()),Promise.resolve(n)}catch(t){return Promise.reject(t)}}async exportToJson(t,n=!1){try{const r=await this.sqlite.exportToJson({database:this.dbName,jsonexportmode:t,readonly:this.readonly,encrypted:n});return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async deleteExportedRows(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteExportedRows({database:this.dbName,readonly:!1}),Promise.resolve())}catch(t){return Promise.reject(t)}}async executeTransaction(t,n=!0){let r=0,s=!1;if(this.readonly)return Promise.reject("not allowed in read-only mode");if(await this.sqlite.beginTransaction({database:this.dbName}),s=await this.sqlite.isTransactionActive({database:this.dbName}),!s)return Promise.reject("After Begin Transaction, no transaction active");try{for(const l of t){if(typeof l!="object"||!("statement"in l))throw new Error("Error a task.statement must be provided");if("values"in l&&l.values&&l.values.length>0){const c=l.statement.toUpperCase().includes("RETURNING")?"all":"no",u=await this.sqlite.run({database:this.dbName,statement:l.statement,values:l.values,transaction:!1,readonly:!1,returnMode:c,isSQL92:n});if(u.changes.changes<0)throw new Error("Error in transaction method run ");r+=u.changes.changes}else{const c=await this.sqlite.execute({database:this.dbName,statements:l.statement,transaction:!1,readonly:!1});if(c.changes.changes<0)throw new Error("Error in transaction method execute ");r+=c.changes.changes}}const o=await this.sqlite.commitTransaction({database:this.dbName});r+=o.changes.changes;const a={changes:{changes:r}};return Promise.resolve(a)}catch(o){const a=o.message?o.message:o;return await this.sqlite.rollbackTransaction({database:this.dbName}),Promise.reject(a)}}async reorderRows(t){const n=t;if(t!=null&&t.values&&typeof t.values[0]=="object"&&Object.keys(t.values[0]).includes("ios_columns")){const r=t.values[0].ios_columns,s=[];for(let o=1;o<t.values.length;o++){const a=t.values[o],l={};for(const c of r)l[c]=a[c];s.push(l)}n.values=s}return Promise.resolve(n)}}const ab=Ws("CapacitorSQLite",{web:()=>Ui(()=>import("./web-D5I3Ms3Y.js"),[]).then(e=>new e.CapacitorSQLiteWeb),electron:()=>window.CapacitorCustomPlatform.plugins.CapacitorSQLite}),Ud="blindfold_chess";let ha=null,Zt=null,su=!1,wc=!1,Ql=null;async function lb(){return wc?!0:Ql||(Ql=LR(),Ql)}async function LR(){var e;try{if(su=mn.isNativePlatform(),!su)return console.log("[TrainingStats] Web platform - using localStorage fallback"),wc=!0,!0;ha=new ib(ab);const t=await ha.checkConnectionsConsistency(),n=(await ha.isConnection(Ud,!1)).result;t.result&&n?Zt=await ha.retrieveConnection(Ud,!1):Zt=await ha.createConnection(Ud,!1,"no-encryption",1,!1),await Zt.open(),await Zt.execute(`
      CREATE TABLE IF NOT EXISTS training_stats (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        mode TEXT NOT NULL,
        score REAL NOT NULL,
        streak INTEGER NOT NULL DEFAULT 0,
        achieved_at TEXT NOT NULL
      );
    `);try{((e=(await Zt.query("PRAGMA table_info(training_stats);")).values)==null?void 0:e.some(a=>a.name==="streak"))||(await Zt.execute("ALTER TABLE training_stats ADD COLUMN streak INTEGER NOT NULL DEFAULT 0;"),console.log("[TrainingStats] Migrated: Added streak column"))}catch(s){console.warn("[TrainingStats] Migration check failed:",s)}return console.log("[TrainingStats] Database initialized successfully"),wc=!0,!0}catch(t){return console.error("[TrainingStats] Failed to initialize database:",t),wc=!0,!1}}function cb(){try{const e=localStorage.getItem("blindfold_training_stats");return e?JSON.parse(e):[]}catch{return[]}}function IR(e){localStorage.setItem("blindfold_training_stats",JSON.stringify(e))}async function $R(e,t,n=0){var s,o;await lb();const r=new Date().toISOString();try{if(!su){const c=cb(),u=c.length>0?Math.max(...c.map(h=>h.id))+1:1,f={id:u,mode:e,score:t,streak:n,achievedAt:r};return c.unshift(f),IR(c),console.log("[TrainingStats] Session saved to localStorage:",u),u}if(!Zt)return console.error("[TrainingStats] Database not initialized"),null;const l=await Zt.run(`
      INSERT INTO training_stats (mode, score, streak, achieved_at)
      VALUES (?, ?, ?, ?);
    `,[e,t,n,r]);return console.log("[TrainingStats] Session saved:",(s=l.changes)==null?void 0:s.lastId),((o=l.changes)==null?void 0:o.lastId)||null}catch(a){return console.error("[TrainingStats] Failed to save session:",a instanceof Error?a.message:String(a)),null}}async function ou(){var t,n,r,s,o,a,l,c,u,f,h,m,y,g,p,w,x,v,b,k;await lb();const e={colorBlitzBest:null,colorBlitzBestDate:null,colorBlitzBestStreak:null,coordinateSniperBest:null,coordinateSniperBestDate:null,coordinateSniperBestStreak:null,voiceMoveMasterBest:null,voiceMoveMasterBestDate:null,voiceMoveMasterBestStreak:null,totalSessions:0,recentSessions:[]};try{if(!su){const U=cb(),ve=U.filter(Ee=>Ee.mode==="color_blitz"),ke=U.filter(Ee=>Ee.mode==="coordinate_sniper"),ce=U.filter(Ee=>Ee.mode==="voice_move_master");let we=null,V=null,W=null;if(ve.length>0){const Ee=ve.reduce((Te,Ne)=>Ne.score>Te.score?Ne:Te);we=Ee.score,V=Ee.achievedAt,W=ve.reduce((Te,Ne)=>(Ne.streak||0)>(Te.streak||0)?Ne:Te).streak||null}let X=null,J=null,he=null;if(ke.length>0){const Ee=ke.reduce((Te,Ne)=>Ne.score<Te.score?Ne:Te);X=Ee.score,J=Ee.achievedAt,he=ke.reduce((Te,Ne)=>(Ne.streak||0)>(Te.streak||0)?Ne:Te).streak||null}let de=null,Ce=null,He=null;if(ce.length>0){const Ee=ce.reduce((Te,Ne)=>Ne.score>Te.score?Ne:Te);de=Ee.score,Ce=Ee.achievedAt,He=ce.reduce((Te,Ne)=>(Ne.streak||0)>(Te.streak||0)?Ne:Te).streak||null}return{colorBlitzBest:we,colorBlitzBestDate:V,colorBlitzBestStreak:W,coordinateSniperBest:X,coordinateSniperBestDate:J,coordinateSniperBestStreak:he,voiceMoveMasterBest:de,voiceMoveMasterBestDate:Ce,voiceMoveMasterBestStreak:He,totalSessions:U.length,recentSessions:U.slice(0,10)}}if(!Zt)return e;const S=`
      SELECT score as best_score, achieved_at
      FROM training_stats
      WHERE mode = 'color_blitz'
      ORDER BY score DESC
      LIMIT 1;
    `,C=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'color_blitz';
    `,N=`
      SELECT score as best_time, achieved_at
      FROM training_stats
      WHERE mode = 'coordinate_sniper'
      ORDER BY score ASC
      LIMIT 1;
    `,j=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'coordinate_sniper';
    `,R=`
      SELECT score as best_score, achieved_at
      FROM training_stats
      WHERE mode = 'voice_move_master'
      ORDER BY score DESC
      LIMIT 1;
    `,T=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'voice_move_master';
    `,O="SELECT COUNT(*) as total FROM training_stats;",L=`
      SELECT id, mode, score, streak, achieved_at as achievedAt
      FROM training_stats
      ORDER BY achieved_at DESC
      LIMIT 10;
    `,B=await Zt.query(S),I=await Zt.query(C),D=await Zt.query(N),G=await Zt.query(j),q=await Zt.query(R),P=await Zt.query(T),$=await Zt.query(O),Z=await Zt.query(L);return{colorBlitzBest:((n=(t=B.values)==null?void 0:t[0])==null?void 0:n.best_score)||null,colorBlitzBestDate:((s=(r=B.values)==null?void 0:r[0])==null?void 0:s.achieved_at)||null,colorBlitzBestStreak:((a=(o=I.values)==null?void 0:o[0])==null?void 0:a.best_streak)||null,coordinateSniperBest:((c=(l=D.values)==null?void 0:l[0])==null?void 0:c.best_time)||null,coordinateSniperBestDate:((f=(u=D.values)==null?void 0:u[0])==null?void 0:f.achieved_at)||null,coordinateSniperBestStreak:((m=(h=G.values)==null?void 0:h[0])==null?void 0:m.best_streak)||null,voiceMoveMasterBest:((g=(y=q.values)==null?void 0:y[0])==null?void 0:g.best_score)||null,voiceMoveMasterBestDate:((w=(p=q.values)==null?void 0:p[0])==null?void 0:w.achieved_at)||null,voiceMoveMasterBestStreak:((v=(x=P.values)==null?void 0:x[0])==null?void 0:v.best_streak)||null,totalSessions:((k=(b=$.values)==null?void 0:b[0])==null?void 0:k.total)||0,recentSessions:Z.values||[]}}catch(S){return console.error("[TrainingStats] Failed to get stats:",S),e}}function OR(){return localStorage.getItem("blindfold_daily_goals")!=="false"}function DR(e){localStorage.setItem("blindfold_daily_goals",e?"true":"false")}function BR(){const[e,t]=d.useState(!1),[n,r]=d.useState("unknown"),[s,o]=d.useState(!1),[a,l]=d.useState(nj()),[c,u]=d.useState(gh),[f,h]=d.useState(OR()),{toast:m}=il();d.useEffect(()=>{e&&(dp().then(r),u(gh()))},[e]),d.useEffect(()=>{const b=()=>t(!1);return window.addEventListener("closeAllDialogs",b),()=>window.removeEventListener("closeAllDialogs",b)},[]);const y=async()=>{o(!0);try{const b=await uR();r(b.status)}finally{o(!1)}},g=b=>{l(b),rj(b)},p=()=>{mn.isNativePlatform()&&alert("To enable microphone access, please go to your device Settings > Apps > Blindfold Chess > Permissions > Microphone and select 'Allow'.")},x=(()=>{switch(n){case"granted":return{icon:hn,text:"Enabled",color:"text-green-500"};case"denied":case"prompt":return{icon:mo,text:"Not enabled",color:"text-muted-foreground"};case"prompt-with-rationale":return{icon:mo,text:"Blocked",color:"text-destructive"};default:return{icon:mo,text:"Unknown",color:"text-muted-foreground"}}})(),v=x.icon;return i.jsxs(Ai,{open:e,onOpenChange:t,children:[i.jsx(eu,{asChild:!0,children:i.jsxs(re,{variant:"ghost",size:"icon","data-testid":"button-settings",children:[i.jsx(v2,{className:"h-5 w-5"}),i.jsx("span",{className:"sr-only",children:"Settings"})]})}),i.jsxs(Co,{className:"sm:max-w-md",children:[i.jsxs(jo,{children:[i.jsx(Eo,{children:"Settings"}),i.jsx(F1,{children:"Configure app preferences"})]}),i.jsxs("div",{className:"space-y-6 pt-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"font-semibold",children:"Notifications"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[a?i.jsx(e2,{className:"h-4 w-4 text-muted-foreground"}):i.jsx(Jj,{className:"h-4 w-4 text-muted-foreground"}),i.jsx(dn,{htmlFor:"toast-toggle",className:"text-sm",children:"Toast notifications"})]}),i.jsx(fr,{id:"toast-toggle",checked:a,onCheckedChange:g,"data-testid":"switch-toast-notifications",className:"data-[state=checked]:bg-amber-400"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Show brief pop-up messages for game events"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"font-semibold",children:"Display"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(w2,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx(dn,{htmlFor:"keep-awake-toggle",className:"text-sm",children:"Keep Screen Awake"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"Prevents auto-sleep during games"})]})]}),i.jsx(fr,{id:"keep-awake-toggle",checked:c.keepAwakeEnabled,onCheckedChange:b=>{const k={...c,keepAwakeEnabled:b};u(k),vh(k),window.dispatchEvent(new CustomEvent("blindfoldSettingsChanged",{detail:k})),m({title:b?"Screen will stay active":"Screen may auto-sleep",description:b?"Screen will stay active during matches":"Normal screen timeout restored"})},"data-testid":"switch-keep-awake",className:"data-[state=checked]:bg-amber-400"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"font-semibold",children:"Training"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(pi,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx(dn,{htmlFor:"daily-goals-toggle",className:"text-sm",children:"Daily Goals"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"Show daily training reminders"})]})]}),i.jsx(fr,{id:"daily-goals-toggle",checked:f,onCheckedChange:b=>{h(b),DR(b),m({title:b?"Daily goals enabled":"Daily goals disabled",description:b?"You'll see training reminders":"Training reminders hidden"})},"data-testid":"switch-daily-goals",className:"data-[state=checked]:bg-amber-400"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"font-semibold",children:"Voice Control"}),i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(v,{className:`h-4 w-4 ${x.color}`}),i.jsxs("span",{className:"text-sm",children:["Microphone: ",i.jsx("span",{className:x.color,children:x.text})]})]})}),n==="granted"?i.jsx("p",{className:"text-xs text-muted-foreground",children:"Voice commands are ready to use"}):n==="prompt-with-rationale"?i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Microphone access was blocked. Voice control requires microphone permission for blindfold training."}),i.jsxs(re,{variant:"outline",size:"sm",onClick:p,className:"w-full","data-testid":"button-open-settings",children:[i.jsx(gc,{className:"h-3 w-3 mr-2"}),"Open Device Settings"]})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable microphone access for voice-controlled chess moves"}),i.jsxs(re,{variant:"outline",size:"sm",onClick:y,disabled:s,className:"w-full","data-testid":"button-request-mic",children:[i.jsx(hn,{className:"h-3 w-3 mr-2"}),s?"Requesting...":"Enable Microphone"]})]})]})]})]})]})}function FR(){const[e,t]=d.useState(!1);return d.useEffect(()=>{const n=()=>t(!1);return window.addEventListener("closeAllDialogs",n),()=>window.removeEventListener("closeAllDialogs",n)},[]),i.jsxs(Ai,{open:e,onOpenChange:t,children:[i.jsx(eu,{asChild:!0,children:i.jsxs(re,{variant:"ghost",size:"icon","data-testid":"button-about",children:[i.jsx(h2,{className:"h-5 w-5"}),i.jsx("span",{className:"sr-only",children:"About"})]})}),i.jsxs(Co,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[i.jsx(jo,{children:i.jsx(Eo,{children:"About Blindfold Chess"})}),i.jsxs("div",{className:"space-y-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Privacy Policy"}),i.jsxs("p",{className:"text-muted-foreground",children:[i.jsx("strong",{children:"100% Offline & Private"}),"  This app is designed to be completely offline. We do not collect, store, or transmit any personal data, chess games, or voice recordings to external servers. All game history and settings are stored locally on your device."]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Open Source & Licenses"}),i.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Stockfish Chess Engine:"})," Licensed under the GNU GPL v3.",i.jsxs("a",{href:"https://stockfishchess.org",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 hover:underline ml-1 inline-flex items-center gap-1",children:["stockfishchess.org ",i.jsx(gc,{className:"h-3 w-3"})]})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"2D Chess Imagery:"}),' "Cburnett" piece set by Colin M.L. Burnett (CC BY-SA 3.0).']}),i.jsxs("li",{children:[i.jsx("strong",{children:"Capacitor Runtime:"})," Licensed under the MIT License."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Vosk Speech Recognition:"})," Offline voice recognition by Alpha Cephei, licensed under Apache 2.0.",i.jsxs("a",{href:"https://alphacephei.com/vosk",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 hover:underline ml-1 inline-flex items-center gap-1",children:["alphacephei.com/vosk ",i.jsx(gc,{className:"h-3 w-3"})]})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Project Links"}),i.jsx("div",{className:"flex flex-col gap-2",children:i.jsxs("a",{href:"https://github.com/official-stockfish/Stockfish",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 hover:underline inline-flex items-center gap-1",children:[i.jsx(gc,{className:"h-3 w-3"})," Stockfish Source Code"]})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Technical Info"}),i.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Engine:"})," Stockfish 17.1 (WASM)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Version:"})," 1.0.0"]}),i.jsxs("li",{className:"flex items-center gap-1",children:[i.jsx(iw,{className:"h-3 w-3"}),i.jsx("strong",{children:"Auto-Sleep:"})," Disabled during active games"]})]})]})]})]})]})}var ub="AlertDialog",[zR,D4]=Ln(ub,[w1]),Jr=w1(),db=e=>{const{__scopeAlertDialog:t,...n}=e,r=Jr(t);return i.jsx($1,{...r,...n,modal:!0})};db.displayName=ub;var VR="AlertDialogTrigger",qR=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Jr(n);return i.jsx(O1,{...s,...r,ref:t})});qR.displayName=VR;var WR="AlertDialogPortal",fb=e=>{const{__scopeAlertDialog:t,...n}=e,r=Jr(t);return i.jsx(D1,{...r,...n})};fb.displayName=WR;var UR="AlertDialogOverlay",hb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Jr(n);return i.jsx(op,{...s,...r,ref:t})});hb.displayName=UR;var wi="AlertDialogContent",[HR,GR]=zR(wi),KR=Sy("AlertDialogContent"),mb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...s}=e,o=Jr(n),a=d.useRef(null),l=qe(t,a),c=d.useRef(null);return i.jsx(zT,{contentName:wi,titleName:pb,docsSlug:"alert-dialog",children:i.jsx(HR,{scope:n,cancelRef:c,children:i.jsxs(ip,{role:"alertdialog",...o,...s,ref:l,onOpenAutoFocus:ye(s.onOpenAutoFocus,u=>{var f;u.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(KR,{children:r}),i.jsx(YR,{contentRef:a})]})})})});mb.displayName=wi;var pb="AlertDialogTitle",gb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Jr(n);return i.jsx(ap,{...s,...r,ref:t})});gb.displayName=pb;var vb="AlertDialogDescription",xb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Jr(n);return i.jsx(lp,{...s,...r,ref:t})});xb.displayName=vb;var QR="AlertDialogAction",yb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Jr(n);return i.jsx(cp,{...s,...r,ref:t})});yb.displayName=QR;var wb="AlertDialogCancel",bb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:s}=GR(wb,n),o=Jr(n),a=qe(t,s);return i.jsx(cp,{...o,...r,ref:a})});bb.displayName=wb;var YR=({contentRef:e})=>{const t=`\`${wi}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${wi}\` by passing a \`${vb}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${wi}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},XR=db,ZR=fb,Sb=hb,kb=mb,Nb=yb,Cb=bb,jb=gb,Eb=xb;const Po=XR,JR=ZR,Pb=d.forwardRef(({className:e,...t},n)=>i.jsx(Sb,{className:Ie("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Pb.displayName=Sb.displayName;const Ls=d.forwardRef(({className:e,...t},n)=>i.jsxs(JR,{children:[i.jsx(Pb,{}),i.jsx(kb,{ref:n,className:Ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Ls.displayName=kb.displayName;const Is=({className:e,...t})=>i.jsx("div",{className:Ie("flex flex-col space-y-2 text-center sm:text-left",e),...t});Is.displayName="AlertDialogHeader";const $s=({className:e,...t})=>i.jsx("div",{className:Ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});$s.displayName="AlertDialogFooter";const Os=d.forwardRef(({className:e,...t},n)=>i.jsx(jb,{ref:n,className:Ie("text-lg font-semibold",e),...t}));Os.displayName=jb.displayName;const Ds=d.forwardRef(({className:e,...t},n)=>i.jsx(Eb,{ref:n,className:Ie("text-sm text-muted-foreground",e),...t}));Ds.displayName=Eb.displayName;const Bs=d.forwardRef(({className:e,...t},n)=>i.jsx(Nb,{ref:n,className:Ie(Ym(),e),...t}));Bs.displayName=Nb.displayName;const Fs=d.forwardRef(({className:e,...t},n)=>i.jsx(Cb,{ref:n,className:Ie(Ym({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Fs.displayName=Cb.displayName;var e_=d.createContext(void 0);function dl(e){const t=d.useContext(e_);return e||t||"ltr"}var Hd="rovingFocusGroup.onEntryFocus",t_={bubbles:!1,cancelable:!0},zu="RovingFocusGroup",[xh,Tb,n_]=_m(zu),[r_,Rb]=Ln(zu,[n_]),[s_,o_]=r_(zu),_b=d.forwardRef((e,t)=>i.jsx(xh.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(xh.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(i_,{...e,ref:t})})}));_b.displayName=zu;var i_=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...h}=e,m=d.useRef(null),y=qe(t,m),g=dl(o),[p=null,w]=bo({prop:a,defaultProp:l,onChange:c}),[x,v]=d.useState(!1),b=Lt(u),k=Tb(n),S=d.useRef(!1),[C,N]=d.useState(0);return d.useEffect(()=>{const j=m.current;if(j)return j.addEventListener(Hd,b),()=>j.removeEventListener(Hd,b)},[b]),i.jsx(s_,{scope:n,orientation:r,dir:g,loop:s,currentTabStopId:p,onItemFocus:d.useCallback(j=>w(j),[w]),onItemShiftTab:d.useCallback(()=>v(!0),[]),onFocusableItemAdd:d.useCallback(()=>N(j=>j+1),[]),onFocusableItemRemove:d.useCallback(()=>N(j=>j-1),[]),children:i.jsx(Me.div,{tabIndex:x||C===0?-1:0,"data-orientation":r,...h,ref:y,style:{outline:"none",...e.style},onMouseDown:ye(e.onMouseDown,()=>{S.current=!0}),onFocus:ye(e.onFocus,j=>{const R=!S.current;if(j.target===j.currentTarget&&R&&!x){const T=new CustomEvent(Hd,t_);if(j.currentTarget.dispatchEvent(T),!T.defaultPrevented){const O=k().filter(G=>G.focusable),L=O.find(G=>G.active),B=O.find(G=>G.id===p),D=[L,B,...O].filter(Boolean).map(G=>G.ref.current);Lb(D,f)}}S.current=!1}),onBlur:ye(e.onBlur,()=>v(!1))})})}),Mb="RovingFocusGroupItem",Ab=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,...a}=e,l=Es(),c=o||l,u=o_(Mb,n),f=u.currentTabStopId===c,h=Tb(n),{onFocusableItemAdd:m,onFocusableItemRemove:y}=u;return d.useEffect(()=>{if(r)return m(),()=>y()},[r,m,y]),i.jsx(xh.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:i.jsx(Me.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:ye(e.onMouseDown,g=>{r?u.onItemFocus(c):g.preventDefault()}),onFocus:ye(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:ye(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const p=c_(g,u.orientation,u.dir);if(p!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let x=h().filter(v=>v.focusable).map(v=>v.ref.current);if(p==="last")x.reverse();else if(p==="prev"||p==="next"){p==="prev"&&x.reverse();const v=x.indexOf(g.currentTarget);x=u.loop?u_(x,v+1):x.slice(v+1)}setTimeout(()=>Lb(x))}})})})});Ab.displayName=Mb;var a_={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function l_(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function c_(e,t,n){const r=l_(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return a_[r]}function Lb(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function u_(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var d_=_b,f_=Ab,pp="Tabs",[h_,B4]=Ln(pp,[Rb]),Ib=Rb(),[m_,gp]=h_(pp),$b=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:o,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=e,f=dl(l),[h,m]=bo({prop:r,onChange:s,defaultProp:o});return i.jsx(m_,{scope:n,baseId:Es(),value:h,onValueChange:m,orientation:a,dir:f,activationMode:c,children:i.jsx(Me.div,{dir:f,"data-orientation":a,...u,ref:t})})});$b.displayName=pp;var Ob="TabsList",Db=d.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,o=gp(Ob,n),a=Ib(n);return i.jsx(d_,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:r,children:i.jsx(Me.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:t})})});Db.displayName=Ob;var Bb="TabsTrigger",Fb=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...o}=e,a=gp(Bb,n),l=Ib(n),c=qb(a.baseId,r),u=Wb(a.baseId,r),f=r===a.value;return i.jsx(f_,{asChild:!0,...l,focusable:!s,active:f,children:i.jsx(Me.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...o,ref:t,onMouseDown:ye(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?a.onValueChange(r):h.preventDefault()}),onKeyDown:ye(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&a.onValueChange(r)}),onFocus:ye(e.onFocus,()=>{const h=a.activationMode!=="manual";!f&&!s&&h&&a.onValueChange(r)})})})});Fb.displayName=Bb;var zb="TabsContent",Vb=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:o,...a}=e,l=gp(zb,n),c=qb(l.baseId,r),u=Wb(l.baseId,r),f=r===l.value,h=d.useRef(f);return d.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),i.jsx(xr,{present:s||f,children:({present:m})=>i.jsx(Me.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&o})})});Vb.displayName=zb;function qb(e,t){return`${e}-trigger-${t}`}function Wb(e,t){return`${e}-content-${t}`}var p_=$b,Ub=Db,Hb=Fb,Gb=Vb;const fl=p_,Gi=d.forwardRef(({className:e,...t},n)=>i.jsx(Ub,{ref:n,className:Ie("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));Gi.displayName=Ub.displayName;const qn=d.forwardRef(({className:e,...t},n)=>i.jsx(Hb,{ref:n,className:Ie("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));qn.displayName=Hb.displayName;const oi=d.forwardRef(({className:e,...t},n)=>i.jsx(Gb,{ref:n,className:Ie("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));oi.displayName=Gb.displayName;const Ye=d.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Ie("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",e),...t}));Ye.displayName="Card";const _t=d.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Ie("flex flex-col space-y-1.5 p-6",e),...t}));_t.displayName="CardHeader";const Mt=d.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Ie("text-2xl font-semibold leading-none tracking-tight",e),...t}));Mt.displayName="CardTitle";const Ft=d.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Ie("text-sm text-muted-foreground",e),...t}));Ft.displayName="CardDescription";const et=d.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Ie("p-6 pt-0",e),...t}));et.displayName="CardContent";const g_=d.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Ie("flex items-center p-6 pt-0",e),...t}));g_.displayName="CardFooter";const v_=_u("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function Et({className:e,variant:t,...n}){return i.jsx("div",{className:Ie(v_({variant:t}),e),...n})}var vp="Progress",xp=100,[x_,F4]=Ln(vp),[y_,w_]=x_(vp),Kb=d.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:o=b_,...a}=e;(s||s===0)&&!qv(s)&&console.error(S_(`${s}`,"Progress"));const l=qv(s)?s:xp;r!==null&&!Wv(r,l)&&console.error(k_(`${r}`,"Progress"));const c=Wv(r,l)?r:null,u=iu(c)?o(c,l):void 0;return i.jsx(y_,{scope:n,value:c,max:l,children:i.jsx(Me.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":iu(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":Xb(c,l),"data-value":c??void 0,"data-max":l,...a,ref:t})})});Kb.displayName=vp;var Qb="ProgressIndicator",Yb=d.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=w_(Qb,n);return i.jsx(Me.div,{"data-state":Xb(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});Yb.displayName=Qb;function b_(e,t){return`${Math.round(e/t*100)}%`}function Xb(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function iu(e){return typeof e=="number"}function qv(e){return iu(e)&&!isNaN(e)&&e>0}function Wv(e,t){return iu(e)&&!isNaN(e)&&e<=t&&e>=0}function S_(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${xp}\`.`}function k_(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${xp} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Zb=Kb,N_=Yb;const bi=d.forwardRef(({className:e,value:t,...n},r)=>i.jsx(Zb,{ref:r,className:Ie("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...n,children:i.jsx(N_,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));bi.displayName=Zb.displayName;var C_="Separator",Uv="horizontal",j_=["horizontal","vertical"],Jb=d.forwardRef((e,t)=>{const{decorative:n,orientation:r=Uv,...s}=e,o=E_(r)?r:Uv,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return i.jsx(Me.div,{"data-orientation":o,...l,...s,ref:t})});Jb.displayName=C_;function E_(e){return j_.includes(e)}var eS=Jb;const Pr=d.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>i.jsx(eS,{ref:s,decorative:n,orientation:t,className:Ie("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Pr.displayName=eS.displayName;function Gd({insight:e}){const t={info:i.jsx(ev,{className:"h-4 w-4"}),warning:i.jsx(S2,{className:"h-4 w-4"}),success:i.jsx(i2,{className:"h-4 w-4"}),tip:i.jsx(ev,{className:"h-4 w-4"})},n={info:"text-blue-500",warning:"text-amber-500",success:"text-green-500",tip:"text-purple-500"};return i.jsxs("div",{className:"flex gap-3 p-3 rounded-md bg-muted/50",children:[i.jsx("div",{className:n[e.type],children:t[e.type]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-sm font-medium",children:e.title}),i.jsx("p",{className:"text-xs text-muted-foreground",children:e.message})]})]})}function En({label:e,value:t,subValue:n}){return i.jsxs("div",{className:"flex items-center justify-between py-2",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:e}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"font-medium",children:t}),n&&i.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:n})]})]})}function P_({stats:e}){const t=["a","b","c","d","e","f","g","h"],n=["8","7","6","5","4","3","2","1"],r=s=>s===0?"bg-muted/30":s<25?"bg-amber-200 dark:bg-amber-900/40":s<50?"bg-amber-400 dark:bg-amber-700/60":s<75?"bg-red-400 dark:bg-red-700/70":"bg-red-600 dark:bg-red-600/80";return i.jsx("div",{className:"grid grid-cols-8 gap-0.5 aspect-square max-w-[200px] mx-auto",children:n.map(s=>t.map(o=>{const a=`${o}${s}`,l=RR(e,a);return i.jsx("div",{className:`aspect-square ${r(l)} rounded-sm flex items-center justify-center`,title:`${a.toUpperCase()}: ${e.squareInquiryHeatmap[a]||0} inquiries`,children:l>50&&i.jsx("span",{className:"text-[6px] text-white font-bold",children:a})},a)}))})}function T_(e){const t=Math.floor(e/1e3),n=Math.floor(e%1e3/100);return`${t}.${n}s`}function R_({stats:e}){const t=d.useMemo(()=>AR(e),[e]),n=tb(e),r=PR(e),s=nb(e),o=rb(e),a=sb(e),l=ER(e),c=ob(e,5),[u,f]=d.useState(null);d.useEffect(()=>{ou().then(f);const g=()=>{ou().then(f)};return window.addEventListener("trainingStatsUpdated",g),()=>{window.removeEventListener("trainingStatsUpdated",g)}},[]);const h=t.filter(g=>g.category==="visualization"),m=t.filter(g=>g.category==="cognitive"),y=t.filter(g=>g.category==="tactical");return i.jsxs(fl,{defaultValue:"tactical",className:"w-full",children:[i.jsxs(Gi,{className:"grid w-full grid-cols-4 mb-4",children:[i.jsxs(qn,{value:"tactical",className:"flex items-center gap-1 text-xs",children:[i.jsx(pi,{className:"h-3 w-3"}),i.jsx("span",{className:"hidden sm:inline",children:"Tactics"})]}),i.jsxs(qn,{value:"cognitive",className:"flex items-center gap-1 text-xs",children:[i.jsx(Qy,{className:"h-3 w-3"}),i.jsx("span",{className:"hidden sm:inline",children:"Mind"})]}),i.jsxs(qn,{value:"visualization",className:"flex items-center gap-1 text-xs",children:[i.jsx(nw,{className:"h-3 w-3"}),i.jsx("span",{className:"hidden sm:inline",children:"Vision"})]}),i.jsxs(qn,{value:"training",className:"flex items-center gap-1 text-xs",children:[i.jsx(tw,{className:"h-3 w-3"}),i.jsx("span",{className:"hidden sm:inline",children:"Training"})]})]}),i.jsxs(oi,{value:"visualization",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsxs(Mt,{className:"text-sm flex items-center gap-2",children:[i.jsx(Vn,{className:"h-4 w-4 text-amber-500"}),"Visualization Ceiling"]}),i.jsx(Ft,{className:"text-xs",children:"The strongest opponent you've beaten without peeking at the board"})]}),i.jsx(et,{children:e.visualizationCeiling>0?i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-3xl font-bold text-amber-500",children:e.visualizationCeiling}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Highest Elo beaten without peeking"}),e.visualizationCeilingElo&&i.jsxs(Et,{variant:"outline",className:"mt-2",children:[e.visualizationCeilingElo," Elo"]})]}):i.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Beat a bot without peeking to set your ceiling!"})})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsx(Mt,{className:"text-sm",children:"Peek-Free Progress"}),i.jsx(Ft,{className:"text-xs",children:"How often you complete games without looking at the board"})]}),i.jsxs(et,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-2xl font-bold",children:[n,"%"]}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.totalPeekFreeGames," of ",e.blindfoldGamesPlayed||0," blindfold games"]})]}),i.jsx(bi,{value:n,className:"h-2"}),i.jsx(Pr,{}),i.jsx(En,{label:"Best Peek-Free Streak",value:`${e.bestPeekFreeGameStreak} games`}),i.jsx(En,{label:"Best Peek-Free Moves",value:e.bestPeekFreeStreak,subValue:"in a single game"})]})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsx(Mt,{className:"text-sm",children:"Reconstruction by Game Length"}),i.jsx(Ft,{className:"text-xs",children:"How well you remember the board position as games get longer"})]}),i.jsx(et,{className:"space-y-2",children:i.jsx("div",{className:"space-y-2",children:[{label:"10 moves",value:o.moves10},{label:"11-20 moves",value:o.moves20},{label:"21-30 moves",value:o.moves30},{label:"31-40 moves",value:o.moves40},{label:"40+ moves",value:o.moves50plus}].map(({label:g,value:p})=>i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-xs text-muted-foreground w-20",children:g}),i.jsx(bi,{value:p,className:"flex-1 h-2"}),i.jsx("span",{className:"text-xs font-medium w-10 text-right",children:p>0?`${p}%`:"-"})]},g))})})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsxs(Mt,{className:"text-sm flex items-center gap-2",children:[i.jsx(rw,{className:"h-4 w-4"}),"Confusion Heatmap"]}),i.jsx(Ft,{className:"text-xs",children:'Squares you inquire about most often - your mental "blind spots"'})]}),i.jsx(et,{children:e.totalSquareInquiries>0?i.jsxs(i.Fragment,{children:[i.jsx(P_,{stats:e}),i.jsx("p",{className:"text-xs text-muted-foreground text-center mt-3",children:"Red = frequently forgotten, Gray = clear"}),c.length>0&&i.jsxs("div",{className:"mt-4 space-y-1",children:[i.jsx("p",{className:"text-xs font-medium",children:"Top Blind Spots:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:c.map(({square:g,count:p})=>i.jsxs(Et,{variant:"secondary",className:"text-xs",children:[g.toUpperCase()," (",p,")"]},g))})]})]}):i.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Ask about squares during games to see which ones you forget!"})})]}),h.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-sm font-medium",children:"Insights"}),h.map((g,p)=>i.jsx(Gd,{insight:g},p))]})]}),i.jsxs(oi,{value:"cognitive",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsxs(Mt,{className:"text-sm flex items-center gap-2",children:["Endgame Drift",e.lastGameEndgameDrift>30?i.jsx(dw,{className:"h-4 w-4 text-red-500"}):i.jsx(fw,{className:"h-4 w-4 text-green-500"})]}),i.jsx(Ft,{className:"text-xs",children:'Slowing down late-game may indicate "mental blur" from fewer pieces'})]}),i.jsxs(et,{children:[i.jsx("div",{className:"text-center",children:i.jsx("p",{className:`text-3xl font-bold ${e.lastGameEndgameDrift>30?"text-red-500":"text-green-500"}`,children:e.lastGameEndgameDrift>0?`+${e.lastGameEndgameDrift}%`:"0%"})}),e.lastGameEndgameDrift>50&&i.jsx("p",{className:"text-xs text-amber-500 text-center mt-3",children:'High drift may indicate "mental blur" - difficulty tracking fewer pieces'})]})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsx(Mt,{className:"text-sm",children:"Voice Accuracy"}),i.jsx(Ft,{className:"text-xs",children:"How often your voice commands are understood correctly"})]}),i.jsxs(et,{children:[i.jsx(En,{label:"Total Voice Commands",value:e.voiceCommandsTotal}),i.jsx(En,{label:"Corrections Needed",value:e.voiceCorrections}),i.jsx(En,{label:"Correction Rate",value:`${a}%`}),i.jsx(En,{label:"Last Game Corrections",value:e.lastGameVoiceCorrections})]})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsx(Mt,{className:"text-sm",children:"Mental Clarity"}),i.jsx(Ft,{className:"text-xs",children:"Moments when you took much longer than usual - may indicate confusion"})]}),i.jsx(et,{children:i.jsx(En,{label:"Mental Blur Events",value:e.mentalBlurCount})})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsx(Mt,{className:"text-sm",children:"Voice vs Touch"}),i.jsx(Ft,{className:"text-xs",children:"How you input your moves during games"})]}),i.jsx(et,{children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4 text-blue-500"}),i.jsxs("span",{className:"font-medium",children:[r.voice,"%"]})]}),i.jsx("div",{className:"flex-1 h-2 bg-muted rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-blue-500",style:{width:`${r.voice}%`}})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"font-medium",children:[r.touch,"%"]}),i.jsx(c2,{className:"h-4 w-4 text-orange-500"})]})]})})]}),m.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-sm font-medium",children:"Insights"}),m.map((g,p)=>i.jsx(Gd,{insight:g},p))]})]}),i.jsxs(oi,{value:"tactical",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsx(Mt,{className:"text-sm",children:"Overall Record"}),i.jsx(Ft,{className:"text-xs",children:"Your wins, draws, and losses across all games"})]}),i.jsxs(et,{children:[i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.wins}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Wins"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-2xl font-bold text-gray-500",children:e.draws}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Draws"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-2xl font-bold text-red-600",children:e.losses}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Losses"})]})]}),i.jsxs("p",{className:"text-xs text-muted-foreground text-center mt-3",children:[e.blindfoldGamesPlayed||0," of ",e.totalGamesPlayed," games were blindfold"]}),i.jsx(Pr,{className:"my-4"}),i.jsx(En,{label:"Current Win Streak",value:e.currentWinStreak}),i.jsx(En,{label:"Best Win Streak",value:e.bestWinStreak}),i.jsx(En,{label:"Fastest Win",value:e.fastestWin>0?`${e.fastestWin} moves`:"-"}),i.jsx(En,{label:"Longest Game",value:e.longestGame>0?`${e.longestGame} moves`:"-"})]})]}),e.stockfishThresholdElo&&i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsxs(Mt,{className:"text-sm flex items-center gap-2",children:[i.jsx(pi,{className:"h-4 w-4 text-amber-500"}),"Stockfish Threshold"]}),i.jsx(Ft,{className:"text-xs",children:"The difficulty level where your win rate starts dropping"})]}),i.jsx(et,{children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-3xl font-bold text-amber-500",children:e.stockfishThresholdElo}),i.jsxs(Et,{variant:"outline",className:"mt-2",children:[e.stockfishThresholdElo," Elo"]})]})})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsxs(Mt,{className:"text-sm flex items-center gap-2",children:[i.jsx(ho,{className:"h-4 w-4"}),"Mean Response Time"]}),i.jsx(Ft,{className:"text-xs",children:"How quickly you find moves - faster often means clearer visualization"})]}),i.jsxs(et,{children:[i.jsx("div",{className:"text-center mb-4",children:i.jsx("p",{className:"text-3xl font-bold",children:si(l)})}),i.jsx(Pr,{className:"my-4"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"By Game Phase"}),i.jsx(En,{label:"Opening (moves 1-10)",value:si(s.opening)}),i.jsx(En,{label:"Middlegame (moves 11-30)",value:si(s.middlegame)}),i.jsx(En,{label:"Endgame (moves 31+)",value:si(s.endgame)})]})]})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsx(Mt,{className:"text-sm",children:"Win Rate by Rating"}),i.jsx(Ft,{className:"text-xs",children:"Your success rate at each Elo level"})]}),i.jsx(et,{children:i.jsx("div",{className:"space-y-2",children:fp.map(g=>{const p=e.tierStats[g],w=_R(e,g),x=(p==null?void 0:p.totalGames)||0;return x===0?null:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-xs text-muted-foreground w-24 truncate",children:[g," Elo"]}),i.jsx(bi,{value:w,className:"flex-1 h-2"}),i.jsxs("span",{className:"text-xs font-medium w-16 text-right",children:[w,"% (",x,"g)"]})]},g)})})})]}),y.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-sm font-medium",children:"Insights"}),y.map((g,p)=>i.jsx(Gd,{insight:g},p))]})]}),i.jsxs(oi,{value:"training",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsxs(Mt,{className:"text-sm flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4 text-purple-500"}),"Voice Move Master"]}),i.jsx(Ft,{className:"text-xs",children:"Announce chess moves by voice"})]}),i.jsx(et,{children:u&&u.voiceMoveMasterBest!==null?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Personal Best"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Vn,{className:"h-4 w-4 text-purple-500"}),i.jsx("span",{className:"text-2xl font-bold text-purple-500",children:u.voiceMoveMasterBest}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"moves"})]})]}),u.voiceMoveMasterBestStreak!==null&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Streak"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Rd,{className:"h-4 w-4 text-orange-500"}),i.jsx("span",{className:"text-lg font-bold text-orange-500",children:u.voiceMoveMasterBestStreak}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"in a row"})]})]}),u.voiceMoveMasterBestDate&&i.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:["Achieved ",new Date(u.voiceMoveMasterBestDate).toLocaleDateString()]}),u.voiceMoveMasterBest>=15?i.jsx(Et,{className:"bg-purple-500 text-white",children:"Gold Tier"}):u.voiceMoveMasterBest>=8?i.jsx(Et,{variant:"secondary",children:"Silver Tier"}):i.jsx(Et,{variant:"outline",children:"Bronze Tier"})]}):i.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete a Voice Move Master session to set your first record!"})})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsxs(Mt,{className:"text-sm flex items-center gap-2",children:[i.jsx(Om,{className:"h-4 w-4 text-amber-500"}),"Color Blitz"]}),i.jsx(Ft,{className:"text-xs",children:"Name square colors in 60 seconds"})]}),i.jsx(et,{children:u&&u.colorBlitzBest!==null?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Personal Best"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Vn,{className:"h-4 w-4 text-amber-500"}),i.jsx("span",{className:"text-2xl font-bold text-amber-500",children:u.colorBlitzBest}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"correct"})]})]}),u.colorBlitzBestStreak!==null&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Streak"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Rd,{className:"h-4 w-4 text-orange-500"}),i.jsx("span",{className:"text-lg font-bold text-orange-500",children:u.colorBlitzBestStreak}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"in a row"})]})]}),u.colorBlitzBestDate&&i.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:["Achieved ",new Date(u.colorBlitzBestDate).toLocaleDateString()]}),u.colorBlitzBest>=40?i.jsx(Et,{className:"bg-amber-500 text-white",children:"Gold Tier"}):u.colorBlitzBest>=20?i.jsx(Et,{variant:"secondary",children:"Silver Tier"}):i.jsx(Et,{variant:"outline",children:"Bronze Tier"})]}):i.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete a Color Blitz session to set your first record!"})})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsxs(Mt,{className:"text-sm flex items-center gap-2",children:[i.jsx(pi,{className:"h-4 w-4 text-blue-500"}),"Coordinate Sniper"]}),i.jsx(Ft,{className:"text-xs",children:"Find 10 squares as fast as possible"})]}),i.jsx(et,{children:u&&u.coordinateSniperBest!==null?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Personal Best"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Vn,{className:"h-4 w-4 text-blue-500"}),i.jsx("span",{className:"text-2xl font-bold text-blue-500",children:T_(u.coordinateSniperBest)})]})]}),u.coordinateSniperBestStreak!==null&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Streak"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Rd,{className:"h-4 w-4 text-orange-500"}),i.jsx("span",{className:"text-lg font-bold text-orange-500",children:u.coordinateSniperBestStreak}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"in a row"})]})]}),u.coordinateSniperBestDate&&i.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:["Achieved ",new Date(u.coordinateSniperBestDate).toLocaleDateString()]}),u.coordinateSniperBest<=1e4?i.jsx(Et,{className:"bg-blue-500 text-white",children:"Gold Tier"}):u.coordinateSniperBest<=2e4?i.jsx(Et,{variant:"secondary",children:"Silver Tier"}):i.jsx(Et,{variant:"outline",children:"Bronze Tier"})]}):i.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete a Coordinate Sniper session to set your first record!"})})]})]})]})}function __(e){return e!==null?{comment:e,variations:[]}:{variations:[]}}function M_(e,t,n,r,s){const o={move:e,variations:s};return t&&(o.suffix=t),n&&(o.nag=n),r!==null&&(o.comment=r),o}function A_(...e){const[t,...n]=e;let r=t;for(const s of n)s!==null&&(r.variations=[s,...s.variations],s.variations=[],r=s);return t}function L_(e,t){if(t.marker&&t.marker.comment){let n=t.root;for(;;){const r=n.variations[0];if(!r){n.comment=t.marker.comment;break}n=r}}return{headers:e,root:t.root,result:(t.marker&&t.marker.result)??void 0}}function I_(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function $i(e,t,n,r){var s=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(s,$i.prototype),s.expected=t,s.found=n,s.location=r,s.name="SyntaxError",s}I_($i,Error);function Kd(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,n+=n.repeat(t),e+n.slice(0,t))}$i.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n=null,r;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){n=e[r].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,a=this.location.source+":"+o.line+":"+o.column;if(n){var l=this.location.end,c=Kd("",o.line.toString().length," "),u=n[s.line-1],f=s.line===l.line?l.column:u.length+1,h=f-s.column||1;t+=`
 --> `+a+`
`+c+` |
`+o.line+" | "+u+`
`+c+" | "+Kd("",s.column-1," ")+Kd("",h,"^")}else t+=`
 at `+a}return t};$i.buildMessage=function(e,t){var n={literal:function(u){return'"'+s(u.text)+'"'},class:function(u){var f=u.parts.map(function(h){return Array.isArray(h)?o(h[0])+"-"+o(h[1]):o(h)});return"["+(u.inverted?"^":"")+f.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(u){return u.description}};function r(u){return u.charCodeAt(0).toString(16).toUpperCase()}function s(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(f){return"\\x0"+r(f)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(f){return"\\x"+r(f)})}function o(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(f){return"\\x0"+r(f)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(f){return"\\x"+r(f)})}function a(u){return n[u.type](u)}function l(u){var f=u.map(a),h,m;if(f.sort(),f.length>0){for(h=1,m=1;h<f.length;h++)f[h-1]!==f[h]&&(f[m]=f[h],m++);f.length=m}switch(f.length){case 1:return f[0];case 2:return f[0]+" or "+f[1];default:return f.slice(0,-1).join(", ")+", or "+f[f.length-1]}}function c(u){return u?'"'+s(u)+'"':"end of input"}return"Expected "+l(e)+" but "+c(t)+" found."};function $_(e,t){t=t!==void 0?t:{};var n={},r=t.grammarSource,s={pgn:ns},o=ns,a="[",l='"',c="]",u=".",f="O-O-O",h="O-O",m="0-0-0",y="0-0",g="$",p="{",w="}",x=";",v="(",b=")",k="1-0",S="0-1",C="1/2-1/2",N="*",j=/^[a-zA-Z]/,R=/^[^"]/,T=/^[0-9]/,O=/^[.]/,L=/^[a-zA-Z1-8\-=]/,B=/^[+#]/,I=/^[!?]/,D=/^[^}]/,G=/^[^\r\n]/,q=/^[ \t\r\n]/,P=vn("tag pair"),$=It("[",!1),Z=It('"',!1),U=It("]",!1),ve=vn("tag name"),ke=Tt([["a","z"],["A","Z"]],!1,!1),ce=vn("tag value"),we=Tt(['"'],!0,!1),V=vn("move number"),W=Tt([["0","9"]],!1,!1),X=It(".",!1),J=Tt(["."],!1,!1),he=vn("standard algebraic notation"),de=It("O-O-O",!1),Ce=It("O-O",!1),He=It("0-0-0",!1),Ee=It("0-0",!1),$e=Tt([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Te=Tt(["+","#"],!1,!1),Ne=vn("suffix annotation"),ut=Tt(["!","?"],!1,!1),vt=vn("NAG"),tn=It("$",!1),z=vn("brace comment"),H=It("{",!1),fe=Tt(["}"],!0,!1),me=It("}",!1),le=vn("rest of line comment"),Fe=It(";",!1),Ae=Tt(["\r",`
`],!0,!1),Re=vn("variation"),st=It("(",!1),nn=It(")",!1),Xe=vn("game termination marker"),Qt=It("1-0",!1),rn=It("0-1",!1),Qn=It("1/2-1/2",!1),In=It("*",!1),sn=vn("whitespace"),bt=Tt([" ","	","\r",`
`],!1,!1),or=function(E,A){return L_(E,A)},gn=function(E){return Object.fromEntries(E)},es=function(E,A){return[E,A]},Lo=function(E,A){return{root:E,marker:A}},wr=function(E,A){return A_(__(E),...A.flat())},jn=function(E,A,M,pe,Se){return M_(E,A,M,pe,Se)},Io=function(E){return E},De=function(E){return E.replace(/[\r\n]+/g," ")},gl=function(E){return E.trim()},Qu=function(E){return E},Xi=function(E,A){return{result:E,comment:A}},_=t.peg$currPos|0,ze=[{line:1,column:1}],lt=_,$n=t.peg$maxFailExpected||[],K=t.peg$silentFails|0,Gs;if(t.startRule){if(!(t.startRule in s))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');o=s[t.startRule]}function It(E,A){return{type:"literal",text:E,ignoreCase:A}}function Tt(E,A,M){return{type:"class",parts:E,inverted:A,ignoreCase:M}}function ts(){return{type:"end"}}function vn(E){return{type:"other",description:E}}function Ks(E){var A=ze[E],M;if(A)return A;if(E>=ze.length)M=ze.length-1;else for(M=E;!ze[--M];);for(A=ze[M],A={line:A.line,column:A.column};M<E;)e.charCodeAt(M)===10?(A.line++,A.column=1):A.column++,M++;return ze[E]=A,A}function Yn(E,A,M){var pe=Ks(E),Se=Ks(A),nt={source:r,start:{offset:E,line:pe.line,column:pe.column},end:{offset:A,line:Se.line,column:Se.column}};return nt}function be(E){_<lt||(_>lt&&(lt=_,$n=[]),$n.push(E))}function $o(E,A,M){return new $i($i.buildMessage(E,A),E,A,M)}function ns(){var E,A,M;return E=_,A=Zi(),M=Oo(),E=or(A,M),E}function Zi(){var E,A,M;for(E=_,A=[],M=Qs();M!==n;)A.push(M),M=Qs();return M=Dt(),E=gn(A),E}function Qs(){var E,A,M,pe,Se,nt,Or;return K++,E=_,Dt(),e.charCodeAt(_)===91?(A=a,_++):(A=n,K===0&&be($)),A!==n?(Dt(),M=Ys(),M!==n?(Dt(),e.charCodeAt(_)===34?(pe=l,_++):(pe=n,K===0&&be(Z)),pe!==n?(Se=vl(),e.charCodeAt(_)===34?(nt=l,_++):(nt=n,K===0&&be(Z)),nt!==n?(Dt(),e.charCodeAt(_)===93?(Or=c,_++):(Or=n,K===0&&be(U)),Or!==n?E=es(M,Se):(_=E,E=n)):(_=E,E=n)):(_=E,E=n)):(_=E,E=n)):(_=E,E=n),K--,E===n&&K===0&&be(P),E}function Ys(){var E,A,M;if(K++,E=_,A=[],M=e.charAt(_),j.test(M)?_++:(M=n,K===0&&be(ke)),M!==n)for(;M!==n;)A.push(M),M=e.charAt(_),j.test(M)?_++:(M=n,K===0&&be(ke));else A=n;return A!==n?E=e.substring(E,_):E=A,K--,E===n&&(A=n,K===0&&be(ve)),E}function vl(){var E,A,M;for(K++,E=_,A=[],M=e.charAt(_),R.test(M)?_++:(M=n,K===0&&be(we));M!==n;)A.push(M),M=e.charAt(_),R.test(M)?_++:(M=n,K===0&&be(we));return E=e.substring(E,_),K--,A=n,K===0&&be(ce),E}function Oo(){var E,A,M;return E=_,A=Xn(),Dt(),M=Ju(),M===n&&(M=null),Dt(),E=Lo(A,M),E}function Xn(){var E,A,M,pe;for(E=_,A=Ji(),A===n&&(A=null),M=[],pe=rs();pe!==n;)M.push(pe),pe=rs();return E=wr(A,M),E}function rs(){var E,A,M,pe,Se,nt,Or,Sr;if(E=_,Dt(),Do(),Dt(),A=br(),A!==n){for(M=Yu(),M===n&&(M=null),pe=[],Se=$r();Se!==n;)pe.push(Se),Se=$r();for(Se=Dt(),nt=Ji(),nt===n&&(nt=null),Or=[],Sr=xl();Sr!==n;)Or.push(Sr),Sr=xl();E=jn(A,M,pe,nt,Or)}else _=E,E=n;return E}function Do(){var E,A,M,pe,Se,nt;for(K++,E=_,A=[],M=e.charAt(_),T.test(M)?_++:(M=n,K===0&&be(W));M!==n;)A.push(M),M=e.charAt(_),T.test(M)?_++:(M=n,K===0&&be(W));if(e.charCodeAt(_)===46?(M=u,_++):(M=n,K===0&&be(X)),M!==n){for(pe=Dt(),Se=[],nt=e.charAt(_),O.test(nt)?_++:(nt=n,K===0&&be(J));nt!==n;)Se.push(nt),nt=e.charAt(_),O.test(nt)?_++:(nt=n,K===0&&be(J));A=[A,M,pe,Se],E=A}else _=E,E=n;return K--,E===n&&(A=n,K===0&&be(V)),E}function br(){var E,A,M,pe,Se,nt;if(K++,E=_,A=_,e.substr(_,5)===f?(M=f,_+=5):(M=n,K===0&&be(de)),M===n&&(e.substr(_,3)===h?(M=h,_+=3):(M=n,K===0&&be(Ce)),M===n&&(e.substr(_,5)===m?(M=m,_+=5):(M=n,K===0&&be(He)),M===n&&(e.substr(_,3)===y?(M=y,_+=3):(M=n,K===0&&be(Ee)),M===n))))if(M=_,pe=e.charAt(_),j.test(pe)?_++:(pe=n,K===0&&be(ke)),pe!==n){if(Se=[],nt=e.charAt(_),L.test(nt)?_++:(nt=n,K===0&&be($e)),nt!==n)for(;nt!==n;)Se.push(nt),nt=e.charAt(_),L.test(nt)?_++:(nt=n,K===0&&be($e));else Se=n;Se!==n?(pe=[pe,Se],M=pe):(_=M,M=n)}else _=M,M=n;return M!==n?(pe=e.charAt(_),B.test(pe)?_++:(pe=n,K===0&&be(Te)),pe===n&&(pe=null),M=[M,pe],A=M):(_=A,A=n),A!==n?E=e.substring(E,_):E=A,K--,E===n&&(A=n,K===0&&be(he)),E}function Yu(){var E,A,M;for(K++,E=_,A=[],M=e.charAt(_),I.test(M)?_++:(M=n,K===0&&be(ut));M!==n;)A.push(M),A.length>=2?M=n:(M=e.charAt(_),I.test(M)?_++:(M=n,K===0&&be(ut)));return A.length<1?(_=E,E=n):E=A,K--,E===n&&(A=n,K===0&&be(Ne)),E}function $r(){var E,A,M,pe,Se;if(K++,E=_,Dt(),e.charCodeAt(_)===36?(A=g,_++):(A=n,K===0&&be(tn)),A!==n){if(M=_,pe=[],Se=e.charAt(_),T.test(Se)?_++:(Se=n,K===0&&be(W)),Se!==n)for(;Se!==n;)pe.push(Se),Se=e.charAt(_),T.test(Se)?_++:(Se=n,K===0&&be(W));else pe=n;pe!==n?M=e.substring(M,_):M=pe,M!==n?E=Io(M):(_=E,E=n)}else _=E,E=n;return K--,E===n&&K===0&&be(vt),E}function Ji(){var E;return E=Xu(),E===n&&(E=Zu()),E}function Xu(){var E,A,M,pe,Se;if(K++,E=_,e.charCodeAt(_)===123?(A=p,_++):(A=n,K===0&&be(H)),A!==n){for(M=_,pe=[],Se=e.charAt(_),D.test(Se)?_++:(Se=n,K===0&&be(fe));Se!==n;)pe.push(Se),Se=e.charAt(_),D.test(Se)?_++:(Se=n,K===0&&be(fe));M=e.substring(M,_),e.charCodeAt(_)===125?(pe=w,_++):(pe=n,K===0&&be(me)),pe!==n?E=De(M):(_=E,E=n)}else _=E,E=n;return K--,E===n&&(A=n,K===0&&be(z)),E}function Zu(){var E,A,M,pe,Se;if(K++,E=_,e.charCodeAt(_)===59?(A=x,_++):(A=n,K===0&&be(Fe)),A!==n){for(M=_,pe=[],Se=e.charAt(_),G.test(Se)?_++:(Se=n,K===0&&be(Ae));Se!==n;)pe.push(Se),Se=e.charAt(_),G.test(Se)?_++:(Se=n,K===0&&be(Ae));M=e.substring(M,_),E=gl(M)}else _=E,E=n;return K--,E===n&&(A=n,K===0&&be(le)),E}function xl(){var E,A,M,pe;return K++,E=_,Dt(),e.charCodeAt(_)===40?(A=v,_++):(A=n,K===0&&be(st)),A!==n?(M=Xn(),M!==n?(Dt(),e.charCodeAt(_)===41?(pe=b,_++):(pe=n,K===0&&be(nn)),pe!==n?E=Qu(M):(_=E,E=n)):(_=E,E=n)):(_=E,E=n),K--,E===n&&K===0&&be(Re),E}function Ju(){var E,A,M;return K++,E=_,e.substr(_,3)===k?(A=k,_+=3):(A=n,K===0&&be(Qt)),A===n&&(e.substr(_,3)===S?(A=S,_+=3):(A=n,K===0&&be(rn)),A===n&&(e.substr(_,7)===C?(A=C,_+=7):(A=n,K===0&&be(Qn)),A===n&&(e.charCodeAt(_)===42?(A=N,_++):(A=n,K===0&&be(In))))),A!==n?(Dt(),M=Ji(),M===n&&(M=null),E=Xi(A,M)):(_=E,E=n),K--,E===n&&(A=n,K===0&&be(Xe)),E}function Dt(){var E,A;for(K++,E=[],A=e.charAt(_),q.test(A)?_++:(A=n,K===0&&be(bt));A!==n;)E.push(A),A=e.charAt(_),q.test(A)?_++:(A=n,K===0&&be(bt));return K--,A=n,K===0&&be(sn),E}if(Gs=o(),t.peg$library)return{peg$result:Gs,peg$currPos:_,peg$FAILED:n,peg$maxFailExpected:$n,peg$maxFailPos:lt};if(Gs!==n&&_===e.length)return Gs;throw Gs!==n&&_<e.length&&be(ts()),$o($n,lt<e.length?e.charAt(lt):null,lt<e.length?Yn(lt,lt+1):Yn(lt,lt))}/**
 * @license
 * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const bc=0xffffffffffffffffn;function Qd(e,t){return(e<<t|e>>64n-t)&0xffffffffffffffffn}function Hv(e,t){return e*t&bc}function O_(e){return function(){let t=BigInt(e&bc),n=BigInt(e>>64n&bc);const r=Hv(Qd(Hv(t,5n),7n),9n);return n^=t,t=(Qd(t,24n)^n^n<<16n)&bc,n=Qd(n,37n),e=n<<64n|t,r}}const Vu=O_(0xa187eb39cdcaed8f31c4b365b102e01en),D_=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>Vu()))),B_=Array.from({length:8},()=>Vu()),F_=Array.from({length:16},()=>Vu()),Yd=Vu(),un="w",Dn="b",$t="p",yh="n",Sc="b",wa="r",hs="q",Bt="k",Xd="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Yl{constructor(t,n){xt(this,"color");xt(this,"from");xt(this,"to");xt(this,"piece");xt(this,"captured");xt(this,"promotion");xt(this,"flags");xt(this,"san");xt(this,"lan");xt(this,"before");xt(this,"after");const{color:r,piece:s,from:o,to:a,flags:l,captured:c,promotion:u}=n,f=Ut(o),h=Ut(a);this.color=r,this.piece=s,this.from=f,this.to=h,this.san=t._moveToSan(n,t._moves({legal:!0})),this.lan=f+h,this.before=t.fen(),t._makeMove(n),this.after=t.fen(),t._undoMove(),this.flags="";for(const m in Oe)Oe[m]&l&&(this.flags+=no[m]);c&&(this.captured=c),u&&(this.promotion=u,this.lan+=u)}isCapture(){return this.flags.indexOf(no.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(no.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(no.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(no.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(no.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(no.BIG_PAWN)>-1}}const Yt=-1,no={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},Oe={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},wh={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},z_={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},V_={...wh,...z_},Le={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Zd={b:[16,32,17,15],w:[-16,-32,-17,-15]},Gv={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},q_=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],W_=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],U_={p:1,n:2,b:4,r:8,q:16,k:32},H_="pnbrqkPNBRQK",Kv=[yh,Sc,wa,hs],G_=7,K_=6,Q_=1,Y_=0,Xl={[Bt]:Oe.KSIDE_CASTLE,[hs]:Oe.QSIDE_CASTLE},ls={w:[{square:Le.a1,flag:Oe.QSIDE_CASTLE},{square:Le.h1,flag:Oe.KSIDE_CASTLE}],b:[{square:Le.a8,flag:Oe.QSIDE_CASTLE},{square:Le.h8,flag:Oe.KSIDE_CASTLE}]},X_={b:Q_,w:K_},Jd="--";function po(e){return e>>4}function Ja(e){return e&15}function tS(e){return"0123456789".indexOf(e)!==-1}function Ut(e){const t=Ja(e),n=po(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function ma(e){return e===un?Dn:un}function Z_(e){const t=e.split(/\s+/);if(t.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(t[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(t[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const s=t[0].split("/");if(s.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let a=0;a<s.length;a++){let l=0,c=!1;for(let u=0;u<s[a].length;u++)if(tS(s[a][u])){if(c)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};l+=parseInt(s[a][u],10),c=!0}else{if(!/^[prnbqkPRNBQK]$/.test(s[a][u]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};l+=1,c=!1}if(l!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(t[3][1]=="3"&&t[1]=="w"||t[3][1]=="6"&&t[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const o=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:a,regex:l}of o){if(!l.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${a} king`};if((t[0].match(l)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${a} kings`}}return Array.from(s[0]+s[7]).some(a=>a.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function J_(e,t){const n=e.from,r=e.to,s=e.piece;let o=0,a=0,l=0;for(let c=0,u=t.length;c<u;c++){const f=t[c].from,h=t[c].to,m=t[c].piece;s===m&&n!==f&&r===h&&(o++,po(n)===po(f)&&a++,Ja(n)===Ja(f)&&l++)}return o>0?a>0&&l>0?Ut(n):l>0?Ut(n).charAt(1):Ut(n).charAt(0):""}function cs(e,t,n,r,s,o=void 0,a=Oe.NORMAL){const l=po(r);if(s===$t&&(l===G_||l===Y_))for(let c=0;c<Kv.length;c++){const u=Kv[c];e.push({color:t,from:n,to:r,piece:s,captured:o,promotion:u,flags:a|Oe.PROMOTION})}else e.push({color:t,from:n,to:r,piece:s,captured:o,flags:a})}function Qv(e){let t=e.charAt(0);return t>="a"&&t<="h"?e.match(/[a-h]\d.*[a-h]\d/)?void 0:$t:(t=t.toLowerCase(),t==="o"?Bt:t)}function ef(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class Mr{constructor(t=Xd,{skipValidation:n=!1}={}){xt(this,"_board",new Array(128));xt(this,"_turn",un);xt(this,"_header",{});xt(this,"_kings",{w:Yt,b:Yt});xt(this,"_epSquare",-1);xt(this,"_halfMoves",0);xt(this,"_moveNumber",0);xt(this,"_history",[]);xt(this,"_comments",{});xt(this,"_castling",{w:0,b:0});xt(this,"_hash",0n);xt(this,"_positionCount",new Map);this.load(t,{skipValidation:n})}clear({preserveHeaders:t=!1}={}){this._board=new Array(128),this._kings={w:Yt,b:Yt},this._turn=un,this._castling={w:0,b:0},this._epSquare=Yt,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=t?this._header:{...V_},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(t,{skipValidation:n=!1,preserveHeaders:r=!1}={}){let s=t.split(/\s+/);if(s.length>=2&&s.length<6){const l=["-","-","0","1"];t=s.concat(l.slice(-(6-s.length))).join(" ")}if(s=t.split(/\s+/),!n){const{ok:l,error:c}=Z_(t);if(!l)throw new Error(c)}const o=s[0];let a=0;this.clear({preserveHeaders:r});for(let l=0;l<o.length;l++){const c=o.charAt(l);if(c==="/")a+=8;else if(tS(c))a+=parseInt(c,10);else{const u=c<"a"?un:Dn;this._put({type:c.toLowerCase(),color:u},Ut(a)),a++}}this._turn=s[1],s[2].indexOf("K")>-1&&(this._castling.w|=Oe.KSIDE_CASTLE),s[2].indexOf("Q")>-1&&(this._castling.w|=Oe.QSIDE_CASTLE),s[2].indexOf("k")>-1&&(this._castling.b|=Oe.KSIDE_CASTLE),s[2].indexOf("q")>-1&&(this._castling.b|=Oe.QSIDE_CASTLE),this._epSquare=s[3]==="-"?Yt:Le[s[3]],this._halfMoves=parseInt(s[4],10),this._moveNumber=parseInt(s[5],10),this._hash=this._computeHash(),this._updateSetup(t),this._incPositionCount()}fen({forceEnpassantSquare:t=!1}={}){var a,l;let n=0,r="";for(let c=Le.a8;c<=Le.h1;c++){if(this._board[c]){n>0&&(r+=n,n=0);const{color:u,type:f}=this._board[c];r+=u===un?f.toUpperCase():f.toLowerCase()}else n++;c+1&136&&(n>0&&(r+=n),c!==Le.h1&&(r+="/"),n=0,c+=8)}let s="";this._castling[un]&Oe.KSIDE_CASTLE&&(s+="K"),this._castling[un]&Oe.QSIDE_CASTLE&&(s+="Q"),this._castling[Dn]&Oe.KSIDE_CASTLE&&(s+="k"),this._castling[Dn]&Oe.QSIDE_CASTLE&&(s+="q"),s=s||"-";let o="-";if(this._epSquare!==Yt)if(t)o=Ut(this._epSquare);else{const c=this._epSquare+(this._turn===un?16:-16),u=[c+1,c-1];for(const f of u){if(f&136)continue;const h=this._turn;if(((a=this._board[f])==null?void 0:a.color)===h&&((l=this._board[f])==null?void 0:l.type)===$t){this._makeMove({color:h,from:f,to:this._epSquare,piece:$t,captured:$t,flags:Oe.EP_CAPTURE});const m=!this._isKingAttacked(h);if(this._undoMove(),m){o=Ut(this._epSquare);break}}}}return[r,this._turn,s,o,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(t){if(!this._board[t])return 0n;const{color:n,type:r}=this._board[t],s={w:0,b:1}[n],o={p:0,n:1,b:2,r:3,q:4,k:5}[r];return D_[s][o][t]}_epKey(){return this._epSquare===Yt?0n:B_[this._epSquare&7]}_castlingKey(){const t=this._castling.w>>5|this._castling.b>>3;return F_[t]}_computeHash(){let t=0n;for(let n=Le.a8;n<=Le.h1;n++){if(n&136){n+=7;continue}this._board[n]&&(t^=this._pieceKey(n))}return t^=this._epKey(),t^=this._castlingKey(),this._turn==="b"&&(t^=Yd),t}_updateSetup(t){this._history.length>0||(t!==Xd?(this._header.SetUp="1",this._header.FEN=t):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(Xd)}get(t){return this._board[Le[t]]}findPiece(t){var r;const n=[];for(let s=Le.a8;s<=Le.h1;s++){if(s&136){s+=7;continue}!this._board[s]||((r=this._board[s])==null?void 0:r.color)!==t.color||this._board[s].color===t.color&&this._board[s].type===t.type&&n.push(Ut(s))}return n}put({type:t,color:n},r){return this._put({type:t,color:n},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(t,n){this._hash^=this._pieceKey(t),this._board[t]=n,this._hash^=this._pieceKey(t)}_put({type:t,color:n},r){if(H_.indexOf(t.toLowerCase())===-1||!(r in Le))return!1;const s=Le[r];if(t==Bt&&!(this._kings[n]==Yt||this._kings[n]==s))return!1;const o=this._board[s];return o&&o.type===Bt&&(this._kings[o.color]=Yt),this._set(s,{type:t,color:n}),t===Bt&&(this._kings[n]=s),!0}_clear(t){this._hash^=this._pieceKey(t),delete this._board[t]}remove(t){const n=this.get(t);return this._clear(Le[t]),n&&n.type===Bt&&(this._kings[n.color]=Yt),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){var r,s,o,a,l,c,u,f,h,m,y,g;this._hash^=this._castlingKey();const t=((r=this._board[Le.e1])==null?void 0:r.type)===Bt&&((s=this._board[Le.e1])==null?void 0:s.color)===un,n=((o=this._board[Le.e8])==null?void 0:o.type)===Bt&&((a=this._board[Le.e8])==null?void 0:a.color)===Dn;(!t||((l=this._board[Le.a1])==null?void 0:l.type)!==wa||((c=this._board[Le.a1])==null?void 0:c.color)!==un)&&(this._castling.w&=-65),(!t||((u=this._board[Le.h1])==null?void 0:u.type)!==wa||((f=this._board[Le.h1])==null?void 0:f.color)!==un)&&(this._castling.w&=-33),(!n||((h=this._board[Le.a8])==null?void 0:h.type)!==wa||((m=this._board[Le.a8])==null?void 0:m.color)!==Dn)&&(this._castling.b&=-65),(!n||((y=this._board[Le.h8])==null?void 0:y.type)!==wa||((g=this._board[Le.h8])==null?void 0:g.color)!==Dn)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){var o,a;if(this._epSquare===Yt)return;const t=this._epSquare+(this._turn===un?-16:16),n=this._epSquare+(this._turn===un?16:-16),r=[n+1,n-1];if(this._board[t]!==null||this._board[this._epSquare]!==null||((o=this._board[n])==null?void 0:o.color)!==ma(this._turn)||((a=this._board[n])==null?void 0:a.type)!==$t){this._hash^=this._epKey(),this._epSquare=Yt;return}const s=l=>{var c,u;return!(l&136)&&((c=this._board[l])==null?void 0:c.color)===this._turn&&((u=this._board[l])==null?void 0:u.type)===$t};r.some(s)||(this._hash^=this._epKey(),this._epSquare=Yt)}_attacked(t,n,r){const s=[];for(let o=Le.a8;o<=Le.h1;o++){if(o&136){o+=7;continue}if(this._board[o]===void 0||this._board[o].color!==t)continue;const a=this._board[o],l=o-n;if(l===0)continue;const c=l+119;if(q_[c]&U_[a.type]){if(a.type===$t){if(l>0&&a.color===un||l<=0&&a.color===Dn)if(r)s.push(Ut(o));else return!0;continue}if(a.type==="n"||a.type==="k")if(r){s.push(Ut(o));continue}else return!0;const u=W_[c];let f=o+u,h=!1;for(;f!==n;){if(this._board[f]!=null){h=!0;break}f+=u}if(!h)if(r){s.push(Ut(o));continue}else return!0}}return r?s:!1}attackers(t,n){return n?this._attacked(n,Le[t],!0):this._attacked(this._turn,Le[t],!0)}_isKingAttacked(t){const n=this._kings[t];return n===-1?!1:this._attacked(ma(t),n)}hash(){return this._hash.toString(16)}isAttacked(t,n){return this._attacked(n,Le[t])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const t={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let r=0,s=0;for(let o=Le.a8;o<=Le.h1;o++){if(s=(s+1)%2,o&136){o+=7;continue}const a=this._board[o];a&&(t[a.type]=a.type in t?t[a.type]+1:1,a.type===Sc&&n.push(s),r++)}if(r===2)return!0;if(r===3&&(t[Sc]===1||t[yh]===1))return!0;if(r===t[Sc]+2){let o=0;const a=n.length;for(let l=0;l<a;l++)o+=n[l];if(o===0||o===a)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:t=!1,square:n=void 0,piece:r=void 0}={}){const s=this._moves({square:n,piece:r});return t?s.map(o=>new Yl(this,o)):s.map(o=>this._moveToSan(o,s))}_moves({legal:t=!0,piece:n=void 0,square:r=void 0}={}){var y;const s=r?r.toLowerCase():void 0,o=n==null?void 0:n.toLowerCase(),a=[],l=this._turn,c=ma(l);let u=Le.a8,f=Le.h1,h=!1;if(s)if(s in Le)u=f=Le[s],h=!0;else return[];for(let g=u;g<=f;g++){if(g&136){g+=7;continue}if(!this._board[g]||this._board[g].color===c)continue;const{type:p}=this._board[g];let w;if(p===$t){if(o&&o!==p)continue;w=g+Zd[l][0],this._board[w]||(cs(a,l,g,w,$t),w=g+Zd[l][1],X_[l]===po(g)&&!this._board[w]&&cs(a,l,g,w,$t,void 0,Oe.BIG_PAWN));for(let x=2;x<4;x++)w=g+Zd[l][x],!(w&136)&&(((y=this._board[w])==null?void 0:y.color)===c?cs(a,l,g,w,$t,this._board[w].type,Oe.CAPTURE):w===this._epSquare&&cs(a,l,g,w,$t,$t,Oe.EP_CAPTURE))}else{if(o&&o!==p)continue;for(let x=0,v=Gv[p].length;x<v;x++){const b=Gv[p][x];for(w=g;w+=b,!(w&136);){if(!this._board[w])cs(a,l,g,w,p);else{if(this._board[w].color===l)break;cs(a,l,g,w,p,this._board[w].type,Oe.CAPTURE);break}if(p===yh||p===Bt)break}}}}if((o===void 0||o===Bt)&&(!h||f===this._kings[l])){if(this._castling[l]&Oe.KSIDE_CASTLE){const g=this._kings[l],p=g+2;!this._board[g+1]&&!this._board[p]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,g+1)&&!this._attacked(c,p)&&cs(a,l,this._kings[l],p,Bt,void 0,Oe.KSIDE_CASTLE)}if(this._castling[l]&Oe.QSIDE_CASTLE){const g=this._kings[l],p=g-2;!this._board[g-1]&&!this._board[g-2]&&!this._board[g-3]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,g-1)&&!this._attacked(c,p)&&cs(a,l,this._kings[l],p,Bt,void 0,Oe.QSIDE_CASTLE)}}if(!t||this._kings[l]===-1)return a;const m=[];for(let g=0,p=a.length;g<p;g++)this._makeMove(a[g]),this._isKingAttacked(l)||m.push(a[g]),this._undoMove();return m}move(t,{strict:n=!1}={}){let r=null;if(typeof t=="string")r=this._moveFromSan(t,n);else if(t===null)r=this._moveFromSan(Jd,n);else if(typeof t=="object"){const o=this._moves();for(let a=0,l=o.length;a<l;a++)if(t.from===Ut(o[a].from)&&t.to===Ut(o[a].to)&&(!("promotion"in o[a])||t.promotion===o[a].promotion)){r=o[a];break}}if(!r)throw typeof t=="string"?new Error(`Invalid move: ${t}`):new Error(`Invalid move: ${JSON.stringify(t)}`);if(this.isCheck()&&r.flags&Oe.NULL_MOVE)throw new Error("Null move not allowed when in check");const s=new Yl(this,r);return this._makeMove(r),this._incPositionCount(),s}_push(t){this._history.push({move:t,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(t,n){this._hash^=this._pieceKey(t),this._board[n]=this._board[t],delete this._board[t],this._hash^=this._pieceKey(n)}_makeMove(t){var s,o,a,l;const n=this._turn,r=ma(n);if(this._push(t),t.flags&Oe.NULL_MOVE){n===Dn&&this._moveNumber++,this._halfMoves++,this._turn=r,this._epSquare=Yt;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),t.captured&&(this._hash^=this._pieceKey(t.to)),this._movePiece(t.from,t.to),t.flags&Oe.EP_CAPTURE&&(this._turn===Dn?this._clear(t.to-16):this._clear(t.to+16)),t.promotion&&(this._clear(t.to),this._set(t.to,{type:t.promotion,color:n})),this._board[t.to].type===Bt){if(this._kings[n]=t.to,t.flags&Oe.KSIDE_CASTLE){const c=t.to-1,u=t.to+1;this._movePiece(u,c)}else if(t.flags&Oe.QSIDE_CASTLE){const c=t.to+1,u=t.to-2;this._movePiece(u,c)}this._castling[n]=0}if(this._castling[n]){for(let c=0,u=ls[n].length;c<u;c++)if(t.from===ls[n][c].square&&this._castling[n]&ls[n][c].flag){this._castling[n]^=ls[n][c].flag;break}}if(this._castling[r]){for(let c=0,u=ls[r].length;c<u;c++)if(t.to===ls[r][c].square&&this._castling[r]&ls[r][c].flag){this._castling[r]^=ls[r][c].flag;break}}if(this._hash^=this._castlingKey(),t.flags&Oe.BIG_PAWN){let c;n===Dn?c=t.to-16:c=t.to+16,!(t.to-1&136)&&((s=this._board[t.to-1])==null?void 0:s.type)===$t&&((o=this._board[t.to-1])==null?void 0:o.color)===r||!(t.to+1&136)&&((a=this._board[t.to+1])==null?void 0:a.type)===$t&&((l=this._board[t.to+1])==null?void 0:l.color)===r?(this._epSquare=c,this._hash^=this._epKey()):this._epSquare=Yt}else this._epSquare=Yt;t.piece===$t?this._halfMoves=0:t.flags&(Oe.CAPTURE|Oe.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===Dn&&this._moveNumber++,this._turn=r,this._hash^=Yd}undo(){const t=this._hash,n=this._undoMove();if(n){const r=new Yl(this,n);return this._decPositionCount(t),r}return null}_undoMove(){const t=this._history.pop();if(t===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const n=t.move;this._kings=t.kings,this._turn=t.turn,this._castling=t.castling,this._epSquare=t.epSquare,this._halfMoves=t.halfMoves,this._moveNumber=t.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=Yd;const r=this._turn,s=ma(r);if(n.flags&Oe.NULL_MOVE)return n;if(this._movePiece(n.to,n.from),n.piece&&(this._clear(n.from),this._set(n.from,{type:n.piece,color:r})),n.captured)if(n.flags&Oe.EP_CAPTURE){let o;r===Dn?o=n.to-16:o=n.to+16,this._set(o,{type:$t,color:s})}else this._set(n.to,{type:n.captured,color:s});if(n.flags&(Oe.KSIDE_CASTLE|Oe.QSIDE_CASTLE)){let o,a;n.flags&Oe.KSIDE_CASTLE?(o=n.to+1,a=n.to-1):(o=n.to-2,a=n.to+1),this._movePiece(a,o)}return n}pgn({newline:t=`
`,maxWidth:n=0}={}){const r=[];let s=!1;for(const m in this._header)this._header[m]&&r.push(`[${m} "${this._header[m]}"]`+t),s=!0;s&&this._history.length&&r.push(t);const o=m=>{const y=this._comments[this.fen()];if(typeof y<"u"){const g=m.length>0?" ":"";m=`${m}${g}{${y}}`}return m},a=[];for(;this._history.length>0;)a.push(this._undoMove());const l=[];let c="";for(a.length===0&&l.push(o(""));a.length>0;){c=o(c);const m=a.pop();if(!m)break;if(!this._history.length&&m.color==="b"){const y=`${this._moveNumber}. ...`;c=c?`${c} ${y}`:y}else m.color==="w"&&(c.length&&l.push(c),c=this._moveNumber+".");c=c+" "+this._moveToSan(m,this._moves({legal:!0})),this._makeMove(m)}if(c.length&&l.push(o(c)),l.push(this._header.Result||"*"),n===0)return r.join("")+l.join(" ");const u=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},f=function(m,y){for(const g of y.split(" "))if(g){if(m+g.length>n){for(;u();)m--;r.push(t),m=0}r.push(g),m+=g.length,r.push(" "),m++}return u()&&m--,m};let h=0;for(let m=0;m<l.length;m++){if(h+l[m].length>n&&l[m].includes("{")){h=f(h,l[m]);continue}h+l[m].length>n&&m!==0?(r[r.length-1]===" "&&r.pop(),r.push(t),h=0):m!==0&&(r.push(" "),h++),r.push(l[m]),h+=l[m].length}return r.join("")}header(...t){for(let n=0;n<t.length;n+=2)typeof t[n]=="string"&&typeof t[n+1]=="string"&&(this._header[t[n]]=t[n+1]);return this._header}setHeader(t,n){return this._header[t]=n??wh[t]??null,this.getHeaders()}removeHeader(t){return t in this._header?(this._header[t]=wh[t]||null,!0):!1}getHeaders(){const t={};for(const[n,r]of Object.entries(this._header))r!==null&&(t[n]=r);return t}loadPgn(t,{strict:n=!1,newlineChar:r=`\r?
`}={}){r!==`\r?
`&&(t=t.replace(new RegExp(r,"g"),`
`));const s=$_(t);this.reset();const o=s.headers;let a="";for(const u in o)u.toLowerCase()==="fen"&&(a=o[u]),this.header(u,o[u]);if(!n)a&&this.load(a,{preserveHeaders:!0});else if(o.SetUp==="1"){if(!("FEN"in o))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(o.FEN,{preserveHeaders:!0})}let l=s.root;for(;l;){if(l.move){const u=this._moveFromSan(l.move,n);if(u==null)throw new Error(`Invalid move in PGN: ${l.move}`);this._makeMove(u),this._incPositionCount()}l.comment!==void 0&&(this._comments[this.fen()]=l.comment),l=l.variations[0]}const c=s.result;c&&Object.keys(this._header).length&&this._header.Result!==c&&this.setHeader("Result",c)}_moveToSan(t,n){let r="";if(t.flags&Oe.KSIDE_CASTLE)r="O-O";else if(t.flags&Oe.QSIDE_CASTLE)r="O-O-O";else{if(t.flags&Oe.NULL_MOVE)return Jd;if(t.piece!==$t){const s=J_(t,n);r+=t.piece.toUpperCase()+s}t.flags&(Oe.CAPTURE|Oe.EP_CAPTURE)&&(t.piece===$t&&(r+=Ut(t.from)[0]),r+="x"),r+=Ut(t.to),t.promotion&&(r+="="+t.promotion.toUpperCase())}return this._makeMove(t),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(t,n=!1){let r=ef(t);if(n||(r==="0-0"?r="O-O":r==="0-0-0"&&(r="O-O-O")),r==Jd)return{color:this._turn,from:0,to:0,piece:"k",flags:Oe.NULL_MOVE};let s=Qv(r),o=this._moves({legal:!0,piece:s});for(let m=0,y=o.length;m<y;m++)if(r===ef(this._moveToSan(o[m],o)))return o[m];if(n)return null;let a,l,c,u,f,h=!1;if(l=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),l?(a=l[1],c=l[2],u=l[3],f=l[4],c.length==1&&(h=!0)):(l=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),l&&(a=l[1],c=l[2],u=l[3],f=l[4],c.length==1&&(h=!0))),s=Qv(r),o=this._moves({legal:!0,piece:a||s}),!u)return null;for(let m=0,y=o.length;m<y;m++)if(c){if((!a||a.toLowerCase()==o[m].piece)&&Le[c]==o[m].from&&Le[u]==o[m].to&&(!f||f.toLowerCase()==o[m].promotion))return o[m];if(h){const g=Ut(o[m].from);if((!a||a.toLowerCase()==o[m].piece)&&Le[u]==o[m].to&&(c==g[0]||c==g[1])&&(!f||f.toLowerCase()==o[m].promotion))return o[m]}}else if(r===ef(this._moveToSan(o[m],o)).replace("x",""))return o[m];return null}ascii(){let t=`   +------------------------+
`;for(let n=Le.a8;n<=Le.h1;n++){if(Ja(n)===0&&(t+=" "+"87654321"[po(n)]+" |"),this._board[n]){const r=this._board[n].type,o=this._board[n].color===un?r.toUpperCase():r.toLowerCase();t+=" "+o+" "}else t+=" . ";n+1&136&&(t+=`|
`,n+=8)}return t+=`   +------------------------+
`,t+="     a  b  c  d  e  f  g  h",t}perft(t){const n=this._moves({legal:!1});let r=0;const s=this._turn;for(let o=0,a=n.length;o<a;o++)this._makeMove(n[o]),this._isKingAttacked(s)||(t-1>0?r+=this.perft(t-1):r++),this._undoMove();return r}setTurn(t){return this._turn==t?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const t=[];let n=[];for(let r=Le.a8;r<=Le.h1;r++)this._board[r]==null?n.push(null):n.push({square:Ut(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(t.push(n),n=[],r+=8);return t}squareColor(t){if(t in Le){const n=Le[t];return(po(n)+Ja(n))%2===0?"light":"dark"}return null}history({verbose:t=!1}={}){const n=[],r=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const s=n.pop();if(!s)break;t?r.push(new Yl(this,s)):r.push(this._moveToSan(s,this._moves())),this._makeMove(s)}return r}_getPositionCount(t){return this._positionCount.get(t)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(t){const n=this._positionCount.get(t)??0;n===1?this._positionCount.delete(t):this._positionCount.set(t,n-1)}_pruneComments(){const t=[],n={},r=s=>{s in this._comments&&(n[s]=this._comments[s])};for(;this._history.length>0;)t.push(this._undoMove());for(r(this.fen());;){const s=t.pop();if(!s)break;this._makeMove(s),r(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(t){this._comments[this.fen()]=t.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const t=this._comments[this.fen()];return delete this._comments[this.fen()],t}getComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>({fen:t,comment:this._comments[t]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>{const n=this._comments[t];return delete this._comments[t],{fen:t,comment:n}})}setCastlingRights(t,n){for(const s of[Bt,hs])n[s]!==void 0&&(n[s]?this._castling[t]|=Xl[s]:this._castling[t]&=~Xl[s]);this._updateCastlingRights();const r=this.getCastlingRights(t);return(n[Bt]===void 0||n[Bt]===r[Bt])&&(n[hs]===void 0||n[hs]===r[hs])}getCastlingRights(t){return{[Bt]:(this._castling[t]&Xl[Bt])!==0,[hs]:(this._castling[t]&Xl[hs])!==0}}moveNumber(){return this._moveNumber}}const ii=["a","b","c","d","e","f","g","h"],Zl=["8","7","6","5","4","3","2","1"],au=e=>({file:ii.indexOf(e[0]),rank:parseInt(e[1])-1}),Yv=(e,t)=>`${ii[e]}${t+1}`,eM=(e,t)=>{const n=au(e),r=au(t),s=Math.abs(r.file-n.file),o=Math.abs(r.rank-n.rank);return s===2&&o===1||s===1&&o===2},tM=(e,t)=>{const n=au(e),r=au(t),s=r.file-n.file;return Math.abs(s)===2?Yv(r.file,n.rank):Yv(n.file,r.rank)},nM={K:"/pieces/wK.svg",Q:"/pieces/wQ.svg",R:"/pieces/wR.svg",B:"/pieces/wB.svg",N:"/pieces/wN.svg",P:"/pieces/wP.svg",k:"/pieces/bK.svg",q:"/pieces/bQ.svg",r:"/pieces/bR.svg",b:"/pieces/bB.svg",n:"/pieces/bN.svg",p:"/pieces/bP.svg"};function rM({fen:e="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",orientation:t="white",showCoordinates:n=!0,highlightedSquares:r=[],legalMoveSquares:s=[],lastMoveSquares:o=[],lastMove:a,selectedSquare:l=null,lockedPiece:c=null,onSquareClick:u,onMove:f,interactionMode:h="free",className:m="",noCard:y=!1,enableArrows:g=!0,enablePremoves:p=!1,isPlayerTurn:w=!0,premove:x=null,onPremove:v,arrowDrawMode:b=!1,highlightColor:k="yellow",customHighlightColors:S,hideSelectionHighlight:C=!1}){const N=(S==null?void 0:S.selectedPiece)||(k==="red"?"#ef4444":"#facc15"),j=(S==null?void 0:S.lastMove)||"#f97316",R=(S==null?void 0:S.availableMoves)||"#fbbf24",[T,O]=d.useState(null),L=l!==null?l:T,[B,I]=d.useState([]),[D,G]=d.useState(null),[q,P]=d.useState(!1),[$,Z]=d.useState(null),U=d.useRef(null),ve=a?[a.from,a.to]:o;d.useEffect(()=>{O(null)},[e]),d.useEffect(()=>{b||Z(null)},[b]);const ce=(z=>{const H=z.split(" ")[0].split("/"),fe=[];for(const me of H){const le=[];for(const Fe of me)if(isNaN(parseInt(Fe)))le.push(Fe);else for(let Ae=0;Ae<parseInt(Fe);Ae++)le.push(null);fe.push(le)}return fe})(e),we=t==="white"?Zl:[...Zl].reverse(),V=t==="white"?ii:[...ii].reverse(),W=d.useCallback((z,H)=>{if(!U.current)return null;const fe=U.current.getBoundingClientRect(),me=z-fe.left,le=H-fe.top,Fe=fe.width/8,Ae=fe.height/8,Re=Math.floor(me/Fe),st=Math.floor(le/Ae);if(Re<0||Re>7||st<0||st>7)return null;const nn=V[Re],Xe=we[st];return`${nn}${Xe}`},[V,we]),X=(z,H,fe)=>{const me=`${z}${H}`;if(h==="viewOnly")return;if(b){if($===null)Z(me);else if($===me)Z(null);else{const Re={from:$,to:me},st=B.findIndex(nn=>nn.from===Re.from&&nn.to===Re.to);st>=0?I(B.filter((nn,Xe)=>Xe!==st)):I([...B,Re]),Z(null)}return}fe&&I([]);const le=Re=>Re===Re.toUpperCase(),Ae=(()=>{var Qt;if(!L)return null;const Re=L[0],st=L[1],nn=Zl.indexOf(st),Xe=ii.indexOf(Re);return((Qt=ce[nn])==null?void 0:Qt[Xe])||null})();if(fe&&Ae&&L!==me){const Re=le(Ae),st=le(fe);if(Re===st){if(c){u==null||u(me);return}O(me),u==null||u(me);return}}if(f&&L&&L!==me){if(f(L,me)){O(null);return}if(fe&&l===null&&!c){O(me),u==null||u(me);return}}fe?l===null&&!c&&O(me):L&&!c&&O(null),u==null||u(me)},J=d.useCallback(z=>{z.preventDefault()},[]),he=d.useCallback(z=>{if(!(!g||h==="viewOnly")&&(z.button===2||b)){z.preventDefault(),P(!0);const H=W(z.clientX,z.clientY);H&&G({from:H,currentSquare:H})}},[g,b,W]),de=d.useCallback(z=>{if(!D||!q)return;const H=W(z.clientX,z.clientY);H&&H!==D.currentSquare&&G({...D,currentSquare:H})},[D,q,W]),Ce=d.useCallback(z=>{if(g&&(z.button===2||b)&&D&&q){const H=W(z.clientX,z.clientY);if(H&&H!==D.from){const fe={from:D.from,to:H},me=B.findIndex(le=>le.from===fe.from&&le.to===fe.to);me>=0?I(B.filter((le,Fe)=>Fe!==me)):I([...B,fe])}G(null),P(!1)}},[g,b,D,q,B,W]),He=d.useCallback(z=>{},[]),Ee=d.useCallback(z=>{},[]),$e=d.useCallback(z=>{},[]),Te=d.useCallback(z=>{const H=z[0],fe=z[1],me=V.indexOf(H),le=we.indexOf(fe);return{x:(me+.5)*12.5,y:(le+.5)*12.5}},[V,we]),Ne=(z,H)=>(z+H)%2===0?"bg-board-light":"bg-board-dark",ut=z=>x&&(x.from===z||x.to===z),vt=(z,H,fe=!1)=>{const me=Te(z.from),le=Te(z.to),Fe=fe?"rgba(255, 170, 0, 0.7)":"rgba(255, 170, 0, 0.8)";if(eM(z.from,z.to)){const In=tM(z.from,z.to),sn=Te(In),bt=le.x-sn.x,or=le.y-sn.y,gn=Math.sqrt(bt*bt+or*or),wr=(gn-3*.7)/gn,jn=sn.x+bt*wr,Io=sn.y+or*wr;return i.jsxs("g",{children:[i.jsx("line",{x1:me.x,y1:me.y,x2:sn.x,y2:sn.y,stroke:Fe,strokeWidth:"2.5",strokeLinecap:"round"}),i.jsx("line",{x1:sn.x,y1:sn.y,x2:jn,y2:Io,stroke:Fe,strokeWidth:"2.5",strokeLinecap:"round"}),i.jsx("polygon",{points:"0,-2 4,0 0,2",fill:Fe,transform:`translate(${le.x},${le.y}) rotate(${Math.atan2(or,bt)*180/Math.PI})`})]},`arrow-${H}`)}const Ae=le.x-me.x,Re=le.y-me.y,st=Math.sqrt(Ae*Ae+Re*Re),Qt=(st-3*.7)/st,rn=me.x+Ae*Qt,Qn=me.y+Re*Qt;return i.jsxs("g",{children:[i.jsx("line",{x1:me.x,y1:me.y,x2:rn,y2:Qn,stroke:Fe,strokeWidth:"2.5",strokeLinecap:"round"}),i.jsx("polygon",{points:"0,-2 4,0 0,2",fill:Fe,transform:`translate(${le.x},${le.y}) rotate(${Math.atan2(Re,Ae)*180/Math.PI})`})]},`arrow-${H}`)},tn=i.jsxs("div",{ref:U,className:"relative w-full h-full select-none",onContextMenu:J,onMouseDown:he,onMouseMove:de,onMouseUp:Ce,onMouseLeave:()=>{q&&(G(null),P(!1))},onTouchStart:He,onTouchMove:Ee,onTouchEnd:$e,children:[i.jsx("div",{className:"grid grid-cols-8 grid-rows-8 gap-0 w-full h-full",children:we.map((z,H)=>V.map((fe,me)=>{var or;const le=`${fe}${z}`,Fe=Zl.indexOf(z),Ae=ii.indexOf(fe),Re=(or=ce[Fe])==null?void 0:or[Ae],st=r.includes(le),nn=L===le,Xe=c===le,Qt=ve.includes(le),rn=ut(le),Qn=s.includes(le),In=Qn&&Re!==null,sn=$===le,bt=(gn,es)=>{const Lo=parseInt(gn.slice(1,3),16),wr=parseInt(gn.slice(3,5),16),jn=parseInt(gn.slice(5,7),16);return`rgba(${Lo}, ${wr}, ${jn}, ${es})`};return i.jsxs("div",{"data-testid":`square-${le}`,"data-square":le,onClick:()=>X(fe,z,Re),className:`
                    relative flex items-center justify-center cursor-pointer
                    ${Ne(me,H)}
                    ${st?"ring-2 ring-primary ring-inset":""}
                    ${rn?"bg-opacity-80 after:absolute after:inset-0 after:bg-blue-500/40":""}
                    ${sn?"ring-4 ring-orange-400 ring-inset":""}
                    hover-elevate
                  `,style:{...!C&&nn&&!Xe?{boxShadow:`inset 0 0 0 4px ${N}`}:{},...!C&&Xe?{boxShadow:`inset 0 0 0 4px ${N}`}:{}},children:[Qt&&i.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{backgroundColor:bt(j,.3)}}),Re&&i.jsx("img",{src:nM[Re],alt:Re,className:"w-[75%] h-[75%] select-none relative z-10 pointer-events-none",draggable:!1}),Qn&&!In&&i.jsx("div",{className:"absolute w-3 h-3 sm:w-4 sm:h-4 rounded-full pointer-events-none z-10",style:{backgroundColor:bt(R,.4)}}),In&&i.jsx("div",{className:"absolute inset-0 rounded-full pointer-events-none z-10",style:{border:`3px solid ${bt(R,.5)}`}}),n&&me===0&&i.jsx("span",{className:"absolute bottom-0.5 left-1 text-xs font-semibold select-none opacity-70",children:z}),n&&H===7&&i.jsx("span",{className:"absolute bottom-0.5 right-1 text-xs font-semibold select-none opacity-70",children:fe})]},le)}))}),(B.length>0||D)&&i.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[B.map((z,H)=>vt(z,H)),D&&D.from!==D.currentSquare&&vt({from:D.from,to:D.currentSquare},-1,!0)]})]});return y?i.jsx("div",{className:`aspect-square w-full ${m}`,children:tn}):i.jsx(Ye,{className:`aspect-square w-full max-w-full md:max-w-[600px] p-1 md:p-2 ${m}`,children:tn})}const sM=[{key:"q",name:"Queen",white:"/pieces/wQ.svg",black:"/pieces/bQ.svg"},{key:"r",name:"Rook",white:"/pieces/wR.svg",black:"/pieces/bR.svg"},{key:"b",name:"Bishop",white:"/pieces/wB.svg",black:"/pieces/bB.svg"},{key:"n",name:"Knight",white:"/pieces/wN.svg",black:"/pieces/bN.svg"}];function oM({open:e,color:t,onSelect:n}){return i.jsx(Ai,{open:e,onOpenChange:()=>{},children:i.jsxs(Co,{className:"sm:max-w-md",onPointerDownOutside:r=>r.preventDefault(),children:[i.jsx(jo,{children:i.jsx(Eo,{className:"text-center",children:"Promote Pawn"})}),i.jsx("div",{className:"grid grid-cols-4 gap-2",children:sM.map(r=>i.jsx(re,{variant:"outline",className:"h-20 hover-elevate",onClick:()=>n(r.key),"data-testid":`button-promote-${r.key}`,children:i.jsx("img",{src:t==="white"?r.white:r.black,alt:r.name,className:"w-12 h-12",draggable:!1})},r.key))}),i.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"Select a piece to promote your pawn"})]})})}function el(e,[t,n]){return Math.min(n,Math.max(t,e))}var iM=[" ","Enter","ArrowUp","ArrowDown"],aM=[" ","Enter"],hl="Select",[qu,Wu,lM]=_m(hl),[Ki,z4]=Ln(hl,[lM,$u]),Uu=$u(),[cM,Us]=Ki(hl),[uM,dM]=Ki(hl),nS=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:o,value:a,defaultValue:l,onValueChange:c,dir:u,name:f,autoComplete:h,disabled:m,required:y,form:g}=e,p=Uu(t),[w,x]=d.useState(null),[v,b]=d.useState(null),[k,S]=d.useState(!1),C=dl(u),[N=!1,j]=bo({prop:r,defaultProp:s,onChange:o}),[R,T]=bo({prop:a,defaultProp:l,onChange:c}),O=d.useRef(null),L=w?g||!!w.closest("form"):!0,[B,I]=d.useState(new Set),D=Array.from(B).map(G=>G.props.value).join(";");return i.jsx(fP,{...p,children:i.jsxs(cM,{required:y,scope:t,trigger:w,onTriggerChange:x,valueNode:v,onValueNodeChange:b,valueNodeHasChildren:k,onValueNodeHasChildrenChange:S,contentId:Es(),value:R,onValueChange:T,open:N,onOpenChange:j,dir:C,triggerPointerDownPosRef:O,disabled:m,children:[i.jsx(qu.Provider,{scope:t,children:i.jsx(uM,{scope:e.__scopeSelect,onNativeOptionAdd:d.useCallback(G=>{I(q=>new Set(q).add(G))},[]),onNativeOptionRemove:d.useCallback(G=>{I(q=>{const P=new Set(q);return P.delete(G),P})},[]),children:n})}),L?i.jsxs(ES,{"aria-hidden":!0,required:y,tabIndex:-1,name:f,autoComplete:h,value:R,onChange:G=>T(G.target.value),disabled:m,form:g,children:[R===void 0?i.jsx("option",{value:""}):null,Array.from(B)]},D):null]})})};nS.displayName=hl;var rS="SelectTrigger",sS=d.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,o=Uu(n),a=Us(rS,n),l=a.disabled||r,c=qe(t,a.onTriggerChange),u=Wu(n),f=d.useRef("touch"),[h,m,y]=PS(p=>{const w=u().filter(b=>!b.disabled),x=w.find(b=>b.value===a.value),v=TS(w,p,x);v!==void 0&&a.onValueChange(v.value)}),g=p=>{l||(a.onOpenChange(!0),y()),p&&(a.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return i.jsx(qw,{asChild:!0,...o,children:i.jsx(Me.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":jS(a.value)?"":void 0,...s,ref:c,onClick:ye(s.onClick,p=>{p.currentTarget.focus(),f.current!=="mouse"&&g(p)}),onPointerDown:ye(s.onPointerDown,p=>{f.current=p.pointerType;const w=p.target;w.hasPointerCapture(p.pointerId)&&w.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(g(p),p.preventDefault())}),onKeyDown:ye(s.onKeyDown,p=>{const w=h.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&m(p.key),!(w&&p.key===" ")&&iM.includes(p.key)&&(g(),p.preventDefault())})})})});sS.displayName=rS;var oS="SelectValue",iS=d.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:o,placeholder:a="",...l}=e,c=Us(oS,n),{onValueNodeHasChildrenChange:u}=c,f=o!==void 0,h=qe(t,c.onValueNodeChange);return Kt(()=>{u(f)},[u,f]),i.jsx(Me.span,{...l,ref:h,style:{pointerEvents:"none"},children:jS(c.value)?i.jsx(i.Fragment,{children:a}):o})});iS.displayName=oS;var fM="SelectIcon",aS=d.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return i.jsx(Me.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});aS.displayName=fM;var hM="SelectPortal",lS=e=>i.jsx(Pu,{asChild:!0,...e});lS.displayName=hM;var To="SelectContent",cS=d.forwardRef((e,t)=>{const n=Us(To,e.__scopeSelect),[r,s]=d.useState();if(Kt(()=>{s(new DocumentFragment)},[]),!n.open){const o=r;return o?Ao.createPortal(i.jsx(uS,{scope:e.__scopeSelect,children:i.jsx(qu.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),o):null}return i.jsx(dS,{...e,ref:t})});cS.displayName=To;var ar=10,[uS,Hs]=Ki(To),mM="SelectContentImpl",pM=Ri("SelectContent.RemoveScroll"),dS=d.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:y,sticky:g,hideWhenDetached:p,avoidCollisions:w,...x}=e,v=Us(To,n),[b,k]=d.useState(null),[S,C]=d.useState(null),N=qe(t,W=>k(W)),[j,R]=d.useState(null),[T,O]=d.useState(null),L=Wu(n),[B,I]=d.useState(!1),D=d.useRef(!1);d.useEffect(()=>{if(b)return x1(b)},[b]),c1();const G=d.useCallback(W=>{const[X,...J]=L().map(Ce=>Ce.ref.current),[he]=J.slice(-1),de=document.activeElement;for(const Ce of W)if(Ce===de||(Ce==null||Ce.scrollIntoView({block:"nearest"}),Ce===X&&S&&(S.scrollTop=0),Ce===he&&S&&(S.scrollTop=S.scrollHeight),Ce==null||Ce.focus(),document.activeElement!==de))return},[L,S]),q=d.useCallback(()=>G([j,b]),[G,j,b]);d.useEffect(()=>{B&&q()},[B,q]);const{onOpenChange:P,triggerPointerDownPosRef:$}=v;d.useEffect(()=>{if(b){let W={x:0,y:0};const X=he=>{var de,Ce;W={x:Math.abs(Math.round(he.pageX)-(((de=$.current)==null?void 0:de.x)??0)),y:Math.abs(Math.round(he.pageY)-(((Ce=$.current)==null?void 0:Ce.y)??0))}},J=he=>{W.x<=10&&W.y<=10?he.preventDefault():b.contains(he.target)||P(!1),document.removeEventListener("pointermove",X),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",X),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",X),document.removeEventListener("pointerup",J,{capture:!0})}}},[b,P,$]),d.useEffect(()=>{const W=()=>P(!1);return window.addEventListener("blur",W),window.addEventListener("resize",W),()=>{window.removeEventListener("blur",W),window.removeEventListener("resize",W)}},[P]);const[Z,U]=PS(W=>{const X=L().filter(de=>!de.disabled),J=X.find(de=>de.ref.current===document.activeElement),he=TS(X,W,J);he&&setTimeout(()=>he.ref.current.focus())}),ve=d.useCallback((W,X,J)=>{const he=!D.current&&!J;(v.value!==void 0&&v.value===X||he)&&(R(W),he&&(D.current=!0))},[v.value]),ke=d.useCallback(()=>b==null?void 0:b.focus(),[b]),ce=d.useCallback((W,X,J)=>{const he=!D.current&&!J;(v.value!==void 0&&v.value===X||he)&&O(W)},[v.value]),we=r==="popper"?bh:fS,V=we===bh?{side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:y,sticky:g,hideWhenDetached:p,avoidCollisions:w}:{};return i.jsx(uS,{scope:n,content:b,viewport:S,onViewportChange:C,itemRefCallback:ve,selectedItem:j,onItemLeave:ke,itemTextRefCallback:ce,focusSelectedItem:q,selectedItemText:T,position:r,isPositioned:B,searchRef:Z,children:i.jsx(ep,{as:pM,allowPinchZoom:!0,children:i.jsx(Jm,{asChild:!0,trapped:v.open,onMountAutoFocus:W=>{W.preventDefault()},onUnmountAutoFocus:ye(s,W=>{var X;(X=v.trigger)==null||X.focus({preventScroll:!0}),W.preventDefault()}),children:i.jsx(al,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:W=>W.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:i.jsx(we,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:W=>W.preventDefault(),...x,...V,onPlaced:()=>I(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:ye(x.onKeyDown,W=>{const X=W.ctrlKey||W.altKey||W.metaKey;if(W.key==="Tab"&&W.preventDefault(),!X&&W.key.length===1&&U(W.key),["ArrowUp","ArrowDown","Home","End"].includes(W.key)){let he=L().filter(de=>!de.disabled).map(de=>de.ref.current);if(["ArrowUp","End"].includes(W.key)&&(he=he.slice().reverse()),["ArrowUp","ArrowDown"].includes(W.key)){const de=W.target,Ce=he.indexOf(de);he=he.slice(Ce+1)}setTimeout(()=>G(he)),W.preventDefault()}})})})})})})});dS.displayName=mM;var gM="SelectItemAlignedPosition",fS=d.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,o=Us(To,n),a=Hs(To,n),[l,c]=d.useState(null),[u,f]=d.useState(null),h=qe(t,N=>f(N)),m=Wu(n),y=d.useRef(!1),g=d.useRef(!0),{viewport:p,selectedItem:w,selectedItemText:x,focusSelectedItem:v}=a,b=d.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&p&&w&&x){const N=o.trigger.getBoundingClientRect(),j=u.getBoundingClientRect(),R=o.valueNode.getBoundingClientRect(),T=x.getBoundingClientRect();if(o.dir!=="rtl"){const de=T.left-j.left,Ce=R.left-de,He=N.left-Ce,Ee=N.width+He,$e=Math.max(Ee,j.width),Te=window.innerWidth-ar,Ne=el(Ce,[ar,Math.max(ar,Te-$e)]);l.style.minWidth=Ee+"px",l.style.left=Ne+"px"}else{const de=j.right-T.right,Ce=window.innerWidth-R.right-de,He=window.innerWidth-N.right-Ce,Ee=N.width+He,$e=Math.max(Ee,j.width),Te=window.innerWidth-ar,Ne=el(Ce,[ar,Math.max(ar,Te-$e)]);l.style.minWidth=Ee+"px",l.style.right=Ne+"px"}const O=m(),L=window.innerHeight-ar*2,B=p.scrollHeight,I=window.getComputedStyle(u),D=parseInt(I.borderTopWidth,10),G=parseInt(I.paddingTop,10),q=parseInt(I.borderBottomWidth,10),P=parseInt(I.paddingBottom,10),$=D+G+B+P+q,Z=Math.min(w.offsetHeight*5,$),U=window.getComputedStyle(p),ve=parseInt(U.paddingTop,10),ke=parseInt(U.paddingBottom,10),ce=N.top+N.height/2-ar,we=L-ce,V=w.offsetHeight/2,W=w.offsetTop+V,X=D+G+W,J=$-X;if(X<=ce){const de=O.length>0&&w===O[O.length-1].ref.current;l.style.bottom="0px";const Ce=u.clientHeight-p.offsetTop-p.offsetHeight,He=Math.max(we,V+(de?ke:0)+Ce+q),Ee=X+He;l.style.height=Ee+"px"}else{const de=O.length>0&&w===O[0].ref.current;l.style.top="0px";const He=Math.max(ce,D+p.offsetTop+(de?ve:0)+V)+J;l.style.height=He+"px",p.scrollTop=X-ce+p.offsetTop}l.style.margin=`${ar}px 0`,l.style.minHeight=Z+"px",l.style.maxHeight=L+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[m,o.trigger,o.valueNode,l,u,p,w,x,o.dir,r]);Kt(()=>b(),[b]);const[k,S]=d.useState();Kt(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const C=d.useCallback(N=>{N&&g.current===!0&&(b(),v==null||v(),g.current=!1)},[b,v]);return i.jsx(xM,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:C,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:i.jsx(Me.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});fS.displayName=gM;var vM="SelectPopperPosition",bh=d.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=ar,...o}=e,a=Uu(n);return i.jsx(Ww,{...a,...o,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});bh.displayName=vM;var[xM,yp]=Ki(To,{}),Sh="SelectViewport",hS=d.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,o=Hs(Sh,n),a=yp(Sh,n),l=qe(t,o.onViewportChange),c=d.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(qu.Slot,{scope:n,children:i.jsx(Me.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ye(s.onScroll,u=>{const f=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&h){const y=Math.abs(c.current-f.scrollTop);if(y>0){const g=window.innerHeight-ar*2,p=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),x=Math.max(p,w);if(x<g){const v=x+y,b=Math.min(g,v),k=v-b;h.style.height=b+"px",h.style.bottom==="0px"&&(f.scrollTop=k>0?k:0,h.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});hS.displayName=Sh;var mS="SelectGroup",[yM,wM]=Ki(mS),bM=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Es();return i.jsx(yM,{scope:n,id:s,children:i.jsx(Me.div,{role:"group","aria-labelledby":s,...r,ref:t})})});bM.displayName=mS;var pS="SelectLabel",gS=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=wM(pS,n);return i.jsx(Me.div,{id:s.id,...r,ref:t})});gS.displayName=pS;var lu="SelectItem",[SM,vS]=Ki(lu),xS=d.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:o,...a}=e,l=Us(lu,n),c=Hs(lu,n),u=l.value===r,[f,h]=d.useState(o??""),[m,y]=d.useState(!1),g=qe(t,v=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,v,r,s)}),p=Es(),w=d.useRef("touch"),x=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(SM,{scope:n,value:r,disabled:s,textId:p,isSelected:u,onItemTextChange:d.useCallback(v=>{h(b=>b||((v==null?void 0:v.textContent)??"").trim())},[]),children:i.jsx(qu.ItemSlot,{scope:n,value:r,disabled:s,textValue:f,children:i.jsx(Me.div,{role:"option","aria-labelledby":p,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:g,onFocus:ye(a.onFocus,()=>y(!0)),onBlur:ye(a.onBlur,()=>y(!1)),onClick:ye(a.onClick,()=>{w.current!=="mouse"&&x()}),onPointerUp:ye(a.onPointerUp,()=>{w.current==="mouse"&&x()}),onPointerDown:ye(a.onPointerDown,v=>{w.current=v.pointerType}),onPointerMove:ye(a.onPointerMove,v=>{var b;w.current=v.pointerType,s?(b=c.onItemLeave)==null||b.call(c):w.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ye(a.onPointerLeave,v=>{var b;v.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:ye(a.onKeyDown,v=>{var k;((k=c.searchRef)==null?void 0:k.current)!==""&&v.key===" "||(aM.includes(v.key)&&x(),v.key===" "&&v.preventDefault())})})})})});xS.displayName=lu;var ba="SelectItemText",yS=d.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...o}=e,a=Us(ba,n),l=Hs(ba,n),c=vS(ba,n),u=dM(ba,n),[f,h]=d.useState(null),m=qe(t,x=>h(x),c.onItemTextChange,x=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,x,c.value,c.disabled)}),y=f==null?void 0:f.textContent,g=d.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:y},c.value),[c.disabled,c.value,y]),{onNativeOptionAdd:p,onNativeOptionRemove:w}=u;return Kt(()=>(p(g),()=>w(g)),[p,w,g]),i.jsxs(i.Fragment,{children:[i.jsx(Me.span,{id:c.textId,...o,ref:m}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Ao.createPortal(o.children,a.valueNode):null]})});yS.displayName=ba;var wS="SelectItemIndicator",bS=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return vS(wS,n).isSelected?i.jsx(Me.span,{"aria-hidden":!0,...r,ref:t}):null});bS.displayName=wS;var kh="SelectScrollUpButton",SS=d.forwardRef((e,t)=>{const n=Hs(kh,e.__scopeSelect),r=yp(kh,e.__scopeSelect),[s,o]=d.useState(!1),a=qe(t,r.onScrollButtonChange);return Kt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;o(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(NS,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});SS.displayName=kh;var Nh="SelectScrollDownButton",kS=d.forwardRef((e,t)=>{const n=Hs(Nh,e.__scopeSelect),r=yp(Nh,e.__scopeSelect),[s,o]=d.useState(!1),a=qe(t,r.onScrollButtonChange);return Kt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<u;o(f)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(NS,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});kS.displayName=Nh;var NS=d.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,o=Hs("SelectScrollButton",n),a=d.useRef(null),l=Wu(n),c=d.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return d.useEffect(()=>()=>c(),[c]),Kt(()=>{var f;const u=l().find(h=>h.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),i.jsx(Me.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:ye(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:ye(s.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:ye(s.onPointerLeave,()=>{c()})})}),kM="SelectSeparator",CS=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return i.jsx(Me.div,{"aria-hidden":!0,...r,ref:t})});CS.displayName=kM;var Ch="SelectArrow",NM=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Uu(n),o=Us(Ch,n),a=Hs(Ch,n);return o.open&&a.position==="popper"?i.jsx(Uw,{...s,...r,ref:t}):null});NM.displayName=Ch;function jS(e){return e===""||e===void 0}var ES=d.forwardRef((e,t)=>{const{value:n,...r}=e,s=d.useRef(null),o=qe(t,s),a=Xm(n);return d.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&f){const h=new Event("change",{bubbles:!0});f.call(l,n),l.dispatchEvent(h)}},[a,n]),i.jsx(ll,{asChild:!0,children:i.jsx("select",{...r,ref:o,defaultValue:n})})});ES.displayName="BubbleSelect";function PS(e){const t=Lt(e),n=d.useRef(""),r=d.useRef(0),s=d.useCallback(a=>{const l=n.current+a;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=d.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,o]}function TS(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=CM(e,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function CM(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var jM=nS,RS=sS,EM=iS,PM=aS,TM=lS,_S=cS,RM=hS,MS=gS,AS=xS,_M=yS,MM=bS,LS=SS,IS=kS,$S=CS;const Xv=jM,Zv=EM,jh=d.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(RS,{ref:r,className:Ie("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,i.jsx(PM,{asChild:!0,children:i.jsx(Zy,{className:"h-4 w-4 opacity-50"})})]}));jh.displayName=RS.displayName;const OS=d.forwardRef(({className:e,...t},n)=>i.jsx(LS,{ref:n,className:Ie("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(n2,{className:"h-4 w-4"})}));OS.displayName=LS.displayName;const DS=d.forwardRef(({className:e,...t},n)=>i.jsx(IS,{ref:n,className:Ie("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(Zy,{className:"h-4 w-4"})}));DS.displayName=IS.displayName;const Eh=d.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>i.jsx(TM,{children:i.jsxs(_S,{ref:s,className:Ie("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[i.jsx(OS,{}),i.jsx(RM,{className:Ie("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(DS,{})]})}));Eh.displayName=_S.displayName;const AM=d.forwardRef(({className:e,...t},n)=>i.jsx(MS,{ref:n,className:Ie("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));AM.displayName=MS.displayName;const Nr=d.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(AS,{ref:r,className:Ie("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(MM,{children:i.jsx(cl,{className:"h-4 w-4"})})}),i.jsx(_M,{children:t})]}));Nr.displayName=AS.displayName;const LM=d.forwardRef(({className:e,...t},n)=>i.jsx($S,{ref:n,className:Ie("-mx-1 my-1 h-px bg-muted",e),...t}));LM.displayName=$S.displayName;function ai(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}var IM=v0[" useInsertionEffect ".trim().toString()]||Kt;function $M({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,o,a]=OM({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const f=d.useRef(e!==void 0);d.useEffect(()=>{const h=f.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const u=d.useCallback(f=>{var h;if(l){const m=DM(f)?f(e):f;m!==e&&((h=a.current)==null||h.call(a,m))}else o(f)},[l,e,o,a]);return[c,u]}function OM({defaultProp:e,onChange:t}){const[n,r]=d.useState(e),s=d.useRef(n),o=d.useRef(t);return IM(()=>{o.current=t},[t]),d.useEffect(()=>{var a;s.current!==n&&((a=o.current)==null||a.call(o,n),s.current=n)},[n,s]),[n,r,o]}function DM(e){return typeof e=="function"}function Ph(e){const t=BM(e),n=d.forwardRef((r,s)=>{const{children:o,...a}=r,l=d.Children.toArray(o),c=l.find(zM);if(c){const u=c.props.children,f=l.map(h=>h===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:h);return i.jsx(t,{...a,ref:s,children:d.isValidElement(u)?d.cloneElement(u,void 0,f):null})}return i.jsx(t,{...a,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}function BM(e){const t=d.forwardRef((n,r)=>{const{children:s,...o}=n;if(d.isValidElement(s)){const a=qM(s),l=VM(o,s.props);return s.type!==d.Fragment&&(l.ref=r?Rm(r,a):a),d.cloneElement(s,l)}return d.Children.count(s)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var FM=Symbol("radix.slottable");function zM(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===FM}function VM(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...l)=>{const c=o(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function qM(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var WM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ml=WM.reduce((e,t)=>{const n=Ph(`Primitive.${t}`),r=d.forwardRef((s,o)=>{const{asChild:a,...l}=s,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function UM(e){const t=e+"CollectionProvider",[n,r]=Ln(t),[s,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=p=>{const{scope:w,children:x}=p,v=bn.useRef(null),b=bn.useRef(new Map).current;return i.jsx(s,{scope:w,itemMap:b,collectionRef:v,children:x})};a.displayName=t;const l=e+"CollectionSlot",c=Ph(l),u=bn.forwardRef((p,w)=>{const{scope:x,children:v}=p,b=o(l,x),k=qe(w,b.collectionRef);return i.jsx(c,{ref:k,children:v})});u.displayName=l;const f=e+"CollectionItemSlot",h="data-radix-collection-item",m=Ph(f),y=bn.forwardRef((p,w)=>{const{scope:x,children:v,...b}=p,k=bn.useRef(null),S=qe(w,k),C=o(f,x);return bn.useEffect(()=>(C.itemMap.set(k,{ref:k,...b}),()=>void C.itemMap.delete(k))),i.jsx(m,{[h]:"",ref:S,children:v})});y.displayName=f;function g(p){const w=o(e+"CollectionConsumer",p);return bn.useCallback(()=>{const v=w.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((C,N)=>b.indexOf(C.ref.current)-b.indexOf(N.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:u,ItemSlot:y},g,r]}var BS=["PageUp","PageDown"],FS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],zS={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Qi="Slider",[Th,HM,GM]=UM(Qi),[VS,V4]=Ln(Qi,[GM]),[KM,Hu]=VS(Qi),qS=d.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:o=1,orientation:a="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:f,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:y=!1,form:g,...p}=e,w=d.useRef(new Set),x=d.useRef(0),b=a==="horizontal"?QM:YM,[k=[],S]=$M({prop:f,defaultProp:u,onChange:O=>{var B;(B=[...w.current][x.current])==null||B.focus(),h(O)}}),C=d.useRef(k);function N(O){const L=tA(k,O);T(O,L)}function j(O){T(O,x.current)}function R(){const O=C.current[x.current];k[x.current]!==O&&m(k)}function T(O,L,{commit:B}={commit:!1}){const I=oA(o),D=iA(Math.round((O-r)/o)*o+r,I),G=el(D,[r,s]);S((q=[])=>{const P=JM(q,G,L);if(sA(P,c*o)){x.current=P.indexOf(G);const $=String(P)!==String(q);return $&&B&&m(P),$?P:q}else return q})}return i.jsx(KM,{scope:e.__scopeSlider,name:n,disabled:l,min:r,max:s,valueIndexToChangeRef:x,thumbs:w.current,values:k,orientation:a,form:g,children:i.jsx(Th.Provider,{scope:e.__scopeSlider,children:i.jsx(Th.Slot,{scope:e.__scopeSlider,children:i.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...p,ref:t,onPointerDown:ai(p.onPointerDown,()=>{l||(C.current=k)}),min:r,max:s,inverted:y,onSlideStart:l?void 0:N,onSlideMove:l?void 0:j,onSlideEnd:l?void 0:R,onHomeKeyDown:()=>!l&&T(r,0,{commit:!0}),onEndKeyDown:()=>!l&&T(s,k.length-1,{commit:!0}),onStepKeyDown:({event:O,direction:L})=>{if(!l){const D=BS.includes(O.key)||O.shiftKey&&FS.includes(O.key)?10:1,G=x.current,q=k[G],P=o*D*L;T(q+P,G,{commit:!0})}}})})})})});qS.displayName=Qi;var[WS,US]=VS(Qi,{startEdge:"left",endEdge:"right",size:"width",direction:1}),QM=d.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:o,onSlideStart:a,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...f}=e,[h,m]=d.useState(null),y=qe(t,b=>m(b)),g=d.useRef(void 0),p=dl(s),w=p==="ltr",x=w&&!o||!w&&o;function v(b){const k=g.current||h.getBoundingClientRect(),S=[0,k.width],N=wp(S,x?[n,r]:[r,n]);return g.current=k,N(b-k.left)}return i.jsx(WS,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:i.jsx(HS,{dir:p,"data-orientation":"horizontal",...f,ref:y,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const k=v(b.clientX);a==null||a(k)},onSlideMove:b=>{const k=v(b.clientX);l==null||l(k)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:b=>{const S=zS[x?"from-left":"from-right"].includes(b.key);u==null||u({event:b,direction:S?-1:1})}})})}),YM=d.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=e,f=d.useRef(null),h=qe(t,f),m=d.useRef(void 0),y=!s;function g(p){const w=m.current||f.current.getBoundingClientRect(),x=[0,w.height],b=wp(x,y?[r,n]:[n,r]);return m.current=w,b(p-w.top)}return i.jsx(WS,{scope:e.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:i.jsx(HS,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:p=>{const w=g(p.clientY);o==null||o(w)},onSlideMove:p=>{const w=g(p.clientY);a==null||a(w)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:p=>{const x=zS[y?"from-bottom":"from-top"].includes(p.key);c==null||c({event:p,direction:x?-1:1})}})})}),HS=d.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:o,onHomeKeyDown:a,onEndKeyDown:l,onStepKeyDown:c,...u}=e,f=Hu(Qi,n);return i.jsx(ml.span,{...u,ref:t,onKeyDown:ai(e.onKeyDown,h=>{h.key==="Home"?(a(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):BS.concat(FS).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:ai(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),f.thumbs.has(m)?m.focus():r(h)}),onPointerMove:ai(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&s(h)}),onPointerUp:ai(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),o(h))})})}),GS="SliderTrack",KS=d.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=Hu(GS,n);return i.jsx(ml.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});KS.displayName=GS;var Rh="SliderRange",QS=d.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=Hu(Rh,n),o=US(Rh,n),a=d.useRef(null),l=qe(t,a),c=s.values.length,u=s.values.map(m=>ZS(m,s.min,s.max)),f=c>1?Math.min(...u):0,h=100-Math.max(...u);return i.jsx(ml.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:l,style:{...e.style,[o.startEdge]:f+"%",[o.endEdge]:h+"%"}})});QS.displayName=Rh;var _h="SliderThumb",YS=d.forwardRef((e,t)=>{const n=HM(e.__scopeSlider),[r,s]=d.useState(null),o=qe(t,l=>s(l)),a=d.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return i.jsx(XM,{...e,ref:o,index:a})}),XM=d.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...o}=e,a=Hu(_h,n),l=US(_h,n),[c,u]=d.useState(null),f=qe(t,v=>u(v)),h=c?a.form||!!c.closest("form"):!0,m=Hm(c),y=a.values[r],g=y===void 0?0:ZS(y,a.min,a.max),p=eA(r,a.values.length),w=m==null?void 0:m[l.size],x=w?nA(w,g,l.direction):0;return d.useEffect(()=>{if(c)return a.thumbs.add(c),()=>{a.thumbs.delete(c)}},[c,a.thumbs]),i.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${g}% + ${x}px)`},children:[i.jsx(Th.ItemSlot,{scope:e.__scopeSlider,children:i.jsx(ml.span,{role:"slider","aria-label":e["aria-label"]||p,"aria-valuemin":a.min,"aria-valuenow":y,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...o,ref:f,style:y===void 0?{display:"none"}:e.style,onFocus:ai(e.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),h&&i.jsx(XS,{name:s??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:y},r)]})});YS.displayName=_h;var ZM="RadioBubbleInput",XS=d.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const s=d.useRef(null),o=qe(s,r),a=Xm(t);return d.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==t&&f){const h=new Event("input",{bubbles:!0});f.call(l,t),l.dispatchEvent(h)}},[a,t]),i.jsx(ml.input,{style:{display:"none"},...n,ref:o,defaultValue:t})});XS.displayName=ZM;function JM(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,o)=>s-o)}function ZS(e,t,n){const o=100/(n-t)*(e-t);return el(o,[0,100])}function eA(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function tA(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function nA(e,t,n){const r=e/2,o=wp([0,50],[0,r]);return(r-o(t)*n)*n}function rA(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function sA(e,t){if(t>0){const n=rA(e);return Math.min(...n)>=t}return!0}function wp(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function oA(e){return(String(e).split(".")[1]||"").length}function iA(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var JS=qS,aA=KS,lA=QS,cA=YS;const ek=d.forwardRef(({className:e,...t},n)=>i.jsxs(JS,{ref:n,className:Ie("relative flex w-full touch-none select-none items-center",e),...t,children:[i.jsx(aA,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-muted",children:i.jsx(lA,{className:"absolute h-full bg-primary"})}),i.jsx(cA,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));ek.displayName=JS.displayName;function uA(e,t){return d.useReducer((n,r)=>t[n][r]??n,e)}var bp="ScrollArea",[tk,q4]=Ln(bp),[dA,sr]=tk(bp),nk=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:o=600,...a}=e,[l,c]=d.useState(null),[u,f]=d.useState(null),[h,m]=d.useState(null),[y,g]=d.useState(null),[p,w]=d.useState(null),[x,v]=d.useState(0),[b,k]=d.useState(0),[S,C]=d.useState(!1),[N,j]=d.useState(!1),R=qe(t,O=>c(O)),T=dl(s);return i.jsx(dA,{scope:n,type:r,dir:T,scrollHideDelay:o,scrollArea:l,viewport:u,onViewportChange:f,content:h,onContentChange:m,scrollbarX:y,onScrollbarXChange:g,scrollbarXEnabled:S,onScrollbarXEnabledChange:C,scrollbarY:p,onScrollbarYChange:w,scrollbarYEnabled:N,onScrollbarYEnabledChange:j,onCornerWidthChange:v,onCornerHeightChange:k,children:i.jsx(Me.div,{dir:T,...a,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});nk.displayName=bp;var rk="ScrollAreaViewport",sk=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...o}=e,a=sr(rk,n),l=d.useRef(null),c=qe(t,l,a.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(Me.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:i.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});sk.displayName=rk;var Ir="ScrollAreaScrollbar",Sp=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=sr(Ir,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:a}=s,l=e.orientation==="horizontal";return d.useEffect(()=>(l?o(!0):a(!0),()=>{l?o(!1):a(!1)}),[l,o,a]),s.type==="hover"?i.jsx(fA,{...r,ref:t,forceMount:n}):s.type==="scroll"?i.jsx(hA,{...r,ref:t,forceMount:n}):s.type==="auto"?i.jsx(ok,{...r,ref:t,forceMount:n}):s.type==="always"?i.jsx(kp,{...r,ref:t}):null});Sp.displayName=Ir;var fA=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=sr(Ir,e.__scopeScrollArea),[o,a]=d.useState(!1);return d.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),a(!0)},f=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(xr,{present:n||o,children:i.jsx(ok,{"data-state":o?"visible":"hidden",...r,ref:t})})}),hA=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=sr(Ir,e.__scopeScrollArea),o=e.orientation==="horizontal",a=Ku(()=>c("SCROLL_END"),100),[l,c]=uA("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),d.useEffect(()=>{const u=s.viewport,f=o?"scrollLeft":"scrollTop";if(u){let h=u[f];const m=()=>{const y=u[f];h!==y&&(c("SCROLL"),a()),h=y};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,o,c,a]),i.jsx(xr,{present:n||l!=="hidden",children:i.jsx(kp,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:ye(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ye(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),ok=d.forwardRef((e,t)=>{const n=sr(Ir,e.__scopeScrollArea),{forceMount:r,...s}=e,[o,a]=d.useState(!1),l=e.orientation==="horizontal",c=Ku(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?u:f)}},10);return Oi(n.viewport,c),Oi(n.content,c),i.jsx(xr,{present:r||o,children:i.jsx(kp,{"data-state":o?"visible":"hidden",...s,ref:t})})}),kp=d.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=sr(Ir,e.__scopeScrollArea),o=d.useRef(null),a=d.useRef(0),[l,c]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=uk(l.viewport,l.content),f={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>o.current=m,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:m=>a.current=m};function h(m,y){return yA(m,a.current,l,y)}return n==="horizontal"?i.jsx(mA,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const m=s.viewport.scrollLeft,y=Jv(m,l,s.dir);o.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=h(m,s.dir))}}):n==="vertical"?i.jsx(pA,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const m=s.viewport.scrollTop,y=Jv(m,l);o.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=h(m))}}):null}),mA=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,o=sr(Ir,e.__scopeScrollArea),[a,l]=d.useState(),c=d.useRef(null),u=qe(t,c,o.onScrollbarXChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(ak,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Gu(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(o.viewport){const m=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(m),fk(m,h)&&f.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:uu(a.paddingLeft),paddingEnd:uu(a.paddingRight)}})}})}),pA=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,o=sr(Ir,e.__scopeScrollArea),[a,l]=d.useState(),c=d.useRef(null),u=qe(t,c,o.onScrollbarYChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(ak,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Gu(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(o.viewport){const m=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(m),fk(m,h)&&f.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:uu(a.paddingTop),paddingEnd:uu(a.paddingBottom)}})}})}),[gA,ik]=tk(Ir),ak=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:o,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:f,onResize:h,...m}=e,y=sr(Ir,n),[g,p]=d.useState(null),w=qe(t,R=>p(R)),x=d.useRef(null),v=d.useRef(""),b=y.viewport,k=r.content-r.viewport,S=Lt(f),C=Lt(c),N=Ku(h,10);function j(R){if(x.current){const T=R.clientX-x.current.left,O=R.clientY-x.current.top;u({x:T,y:O})}}return d.useEffect(()=>{const R=T=>{const O=T.target;(g==null?void 0:g.contains(O))&&S(T,k)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[b,g,k,S]),d.useEffect(C,[r,C]),Oi(g,N),Oi(y.content,N),i.jsx(gA,{scope:n,scrollbar:g,hasThumb:s,onThumbChange:Lt(o),onThumbPointerUp:Lt(a),onThumbPositionChange:C,onThumbPointerDown:Lt(l),children:i.jsx(Me.div,{...m,ref:w,style:{position:"absolute",...m.style},onPointerDown:ye(e.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),x.current=g.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),j(R))}),onPointerMove:ye(e.onPointerMove,j),onPointerUp:ye(e.onPointerUp,R=>{const T=R.target;T.hasPointerCapture(R.pointerId)&&T.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=v.current,y.viewport&&(y.viewport.style.scrollBehavior=""),x.current=null})})})}),cu="ScrollAreaThumb",lk=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=ik(cu,e.__scopeScrollArea);return i.jsx(xr,{present:n||s.hasThumb,children:i.jsx(vA,{ref:t,...r})})}),vA=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,o=sr(cu,n),a=ik(cu,n),{onThumbPositionChange:l}=a,c=qe(t,h=>a.onThumbChange(h)),u=d.useRef(void 0),f=Ku(()=>{u.current&&(u.current(),u.current=void 0)},100);return d.useEffect(()=>{const h=o.viewport;if(h){const m=()=>{if(f(),!u.current){const y=wA(h,l);u.current=y,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[o.viewport,f,l]),i.jsx(Me.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ye(e.onPointerDownCapture,h=>{const y=h.target.getBoundingClientRect(),g=h.clientX-y.left,p=h.clientY-y.top;a.onThumbPointerDown({x:g,y:p})}),onPointerUp:ye(e.onPointerUp,a.onThumbPointerUp)})});lk.displayName=cu;var Np="ScrollAreaCorner",ck=d.forwardRef((e,t)=>{const n=sr(Np,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(xA,{...e,ref:t}):null});ck.displayName=Np;var xA=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=sr(Np,n),[o,a]=d.useState(0),[l,c]=d.useState(0),u=!!(o&&l);return Oi(s.scrollbarX,()=>{var h;const f=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(f),c(f)}),Oi(s.scrollbarY,()=>{var h;const f=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(f),a(f)}),u?i.jsx(Me.div,{...r,ref:t,style:{width:o,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function uu(e){return e?parseInt(e,10):0}function uk(e,t){const n=e/t;return isNaN(n)?0:n}function Gu(e){const t=uk(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function yA(e,t,n,r="ltr"){const s=Gu(n),o=s/2,a=t||o,l=s-a,c=n.scrollbar.paddingStart+a,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,h=r==="ltr"?[0,f]:[f*-1,0];return dk([c,u],h)(e)}function Jv(e,t,n="ltr"){const r=Gu(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-s,a=t.content-t.viewport,l=o-r,c=n==="ltr"?[0,a]:[a*-1,0],u=el(e,c);return dk([0,a],[0,l])(u)}function dk(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function fk(e,t){return e>0&&e<t}var wA=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const o={left:e.scrollLeft,top:e.scrollTop},a=n.left!==o.left,l=n.top!==o.top;(a||l)&&t(),n=o,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Ku(e,t){const n=Lt(e),r=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(r.current),[]),d.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Oi(e,t){const n=Lt(t);Kt(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var hk=nk,bA=sk,SA=ck;const Cp=d.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(hk,{ref:r,className:Ie("relative overflow-hidden",e),...n,children:[i.jsx(bA,{className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(mk,{}),i.jsx(SA,{})]}));Cp.displayName=hk.displayName;const mk=d.forwardRef(({className:e,orientation:t="vertical",...n},r)=>i.jsx(Sp,{ref:r,orientation:t,className:Ie("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:i.jsx(lk,{className:"relative flex-1 rounded-full bg-border"})}));mk.displayName=Sp.displayName;const kA="/assets/title_cropped-BD2iTFVW.webp",tf={wK:"/pieces/wK.svg",wQ:"/pieces/wQ.svg",wR:"/pieces/wR.svg",wB:"/pieces/wB.svg",wN:"/pieces/wN.svg",wP:"/pieces/wP.svg",bK:"/pieces/bK.svg",bQ:"/pieces/bQ.svg",bR:"/pieces/bR.svg",bB:"/pieces/bB.svg",bN:"/pieces/bN.svg",bP:"/pieces/bP.svg"},NA=["wK","wQ","wR","wB","wN","wP","bK","bQ","bR","bB","bN","bP"],CA={K:["king"],Q:["queen"],R:["rook","castle","rock","brook"],B:["bishop","bish","bishup"],N:["knight","night","horse","nite"],P:["pawn","pond"]},jA={ay:"a",aye:"a",eh:"a",bee:"b",be:"b",cee:"c",see:"c",sea:"c",dee:"d",eee:"e",ee:"e",ef:"f",eff:"f",gee:"g",jee:"g",aitch:"h",ach:"h",alpha:"a",alfa:"a",apple:"a",able:"a",bravo:"b",boy:"b",baker:"b",charlie:"c",cat:"c",delta:"d",dog:"d",david:"d",echo:"e",easy:"e",edward:"e",foxtrot:"f",fox:"f",frank:"f",golf:"g",george:"g",hotel:"h",henry:"h"};function EA(e){let t=e.toLowerCase();return t=t.replace(/\bbefore\b/g,"b 4"),t=t.replace(/\bsci\s*fi\b/g,"c 5"),t=t.replace(/\bscifi\b/g,"c 5"),t=t.replace(/\bquincy\b/g,"queen c"),t=t.replace(/\bhe\s+([1-8])\b/g,"e $1"),t=t.replace(/\bhe\s+(one|two|three|four|five|six|seven|eight|for)\b/gi,"e $1"),t=t.replace(/\bthe\s+([1-8])\b/g,"d $1"),t=t.replace(/\bthe\s+(one|two|three|four|five|six|seven|eight)\b/gi,"d $1"),t=t.replace(/\b([a-h])\s+for\b/g,"$1 4"),t}const PA={one:"1",won:"1",first:"1",two:"2",too:"2",second:"2",three:"3",free:"3",third:"3",tree:"3",four:"4",fore:"4",forth:"4",fourth:"4",for:"4",five:"5",fifth:"5",six:"6",sixth:"6",sicks:"6",seven:"7",seventh:"7",eight:"8",ate:"8",eighth:"8"};function TA(e){const t=Array(8).fill(null).map(()=>Array(8).fill(null)),[n]=e.split(" "),r=n.split("/"),s={K:"wK",Q:"wQ",R:"wR",B:"wB",N:"wN",P:"wP",k:"bK",q:"bQ",r:"bR",b:"bB",n:"bN",p:"bP"};return r.forEach((o,a)=>{let l=0;for(const c of o)/\d/.test(c)?l+=parseInt(c):s[c]&&(t[a][l]=s[c],l++)}),t}function RA(e,t){let n=0,r=0;for(let s=0;s<8;s++)for(let o=0;o<8;o++){const a=t[s][o],l=e[s][o];a!==null&&(r++,a===l&&n++)}return r===0?100:Math.round(n/r*100)}function e0(e){const n=EA(e).toLowerCase().trim();let r=null,s=null;for(const[o,a]of Object.entries(jA))if(n.includes(o)){r=a;break}if(!r){const o=n.match(/\b([a-h])\b/);o&&(r=o[1])}for(const[o,a]of Object.entries(PA))if(n.includes(o)){s=a;break}if(!s){const o=n.match(/[1-8]/);o&&(s=o[0])}if(!r||!s){const o=n.match(/([a-h])\s*([1-8])/);if(o)return{file:o[1],rank:o[2]}}return r&&s?{file:r,rank:s}:null}function _A(e){const t=e.toLowerCase();for(const[n,r]of Object.entries(CA))for(const s of r)if(t.includes(s))return n;return null}function t0(e){const t=e.toLowerCase();return t.includes("white")?"w":t.includes("black")?"b":null}function MA({actualFen:e,playerColor:t,onComplete:n,onSkip:r,onContinue:s,onViewReport:o}){const[a,l]=d.useState("ready"),[c,u]=d.useState(Array(8).fill(null).map(()=>Array(8).fill(null))),[f,h]=d.useState(null),[m,y]=d.useState(!1),[g,p]=d.useState(null),[w,x]=d.useState(100),[v,b]=d.useState(!1),[k,S]=d.useState(null),[C,N]=d.useState(""),[j,R]=d.useState(!0),[T,O]=d.useState(null),[L,B]=d.useState("w"),I=d.useRef("w"),[D,G]=d.useState(new Set),q=d.useRef(0),P=d.useRef(0),$=d.useRef(null),Z=d.useRef(!0),U=TA(e);d.useEffect(()=>{I.current=L},[L]);const ve=d.useCallback((z,H)=>{const fe=z.charCodeAt(0)-97;return{row:8-parseInt(H),col:fe}},[]),ke=d.useCallback((z,H,fe,me)=>{u(Fe=>{const Ae=Fe.map(Re=>[...Re]);return Ae[H][fe]=z,Ae});const le=z.charAt(0);if(B(le),I.current=le,me){q.current++;const Fe=`${H}-${fe}`;G(Ae=>new Set(Ae).add(Fe)),setTimeout(()=>{G(Ae=>{const Re=new Set(Ae);return Re.delete(Fe),Re})},300)}else P.current++},[]),ce=d.useCallback((z,H,fe)=>{u(me=>{const le=me.map(Fe=>[...Fe]);return le[z][H]&&(fe?q.current++:P.current++,le[z][H]=null),le})},[]),we=d.useCallback(z=>{const H=z.toLowerCase().trim();if(N(z),H.includes("clear all")||H.includes("reset board")||H.includes("reset")){u(Array(8).fill(null).map(()=>Array(8).fill(null))),S(null);return}if(H.includes("done")||H.includes("submit")||H.includes("check position")){$.current&&$.current();return}if(H==="white"||H==="switch to white"||H==="white pieces"){B("w"),I.current="w";return}if(H==="black"||H==="switch to black"||H==="black pieces"){B("b"),I.current="b";return}if(k){const Fe=t0(H);if(Fe){const Ae=Fe+k.pieceType,{row:Re,col:st}=ve(k.square.file,k.square.rank);ke(Ae,Re,st,!0),S(null);return}}if(H.includes("clear")||H.includes("remove")||H.includes("delete")){const Fe=e0(H);if(Fe){const{row:Ae,col:Re}=ve(Fe.file,Fe.rank);ce(Ae,Re,!0)}return}const fe=_A(H),me=e0(H),le=t0(H);if(le&&(B(le),I.current=le),fe&&me){const Ae=(le||I.current)+fe,{row:Re,col:st}=ve(me.file,me.rank);ke(Ae,Re,st,!0),S(null)}},[k,ve,ke,ce]),V=d.useRef(we);d.useEffect(()=>{V.current=we},[we]);const W=d.useCallback(async()=>{if(m)return;if(await H1(),!await G1()){console.warn("[Reconstruction] Microphone permission not granted"),await dp()==="prompt-with-rationale"&&alert("Voice control requires microphone access. Please enable it in your device Settings > Apps > Blindfold Chess > Permissions.");return}await it.start({mode:"placement",onTranscript:fe=>{V.current(fe)},onListeningChange:fe=>{b(fe)}})&&console.log("[Reconstruction] Voice started via voiceMaster")},[m]),X=d.useCallback(()=>{it.stop(),b(!1),S(null)},[]);d.useEffect(()=>(Z.current=!0,()=>{Z.current=!1,it.stop(),Ii.clearProtectedLane()}),[]),d.useEffect(()=>{if(a==="ready"){const z=setInterval(()=>{R(H=>!H)},800);return()=>clearInterval(z)}},[a]);const J=d.useRef(!1);d.useEffect(()=>{if(a==="ready"){J.current=!1;return}if(a==="playing"&&!m&&!J.current){J.current=!0;const z=setTimeout(()=>{W()},500);return()=>clearTimeout(z)}},[a,m,W]);const he=d.useCallback((z,H)=>{m||(f?ke(f,z,H,!1):c[z][H]&&ce(z,H,!1))},[f,c,m,ke,ce]),de=d.useCallback((z,H)=>{m||(z.dataTransfer.setData("piece",H),z.dataTransfer.effectAllowed="copy",O(H))},[m]),Ce=d.useCallback(()=>{O(null)},[]),He=d.useCallback(z=>{z.preventDefault(),z.dataTransfer.dropEffect="copy"},[]),Ee=d.useCallback((z,H,fe)=>{if(z.preventDefault(),m)return;const me=z.dataTransfer.getData("piece");me&&ke(me,H,fe,!1),O(null)},[m,ke]),$e=d.useCallback((z,H)=>{m||h(H)},[m]),Te=()=>{u(Array(8).fill(null).map(()=>Array(8).fill(null))),h(null),q.current=0,P.current=0},Ne=d.useCallback(()=>{const z=RA(c,U);p(z);const H=q.current+P.current,fe=H>0?Math.round(q.current/H*100):0;x(fe),y(!0),X(),n(z,fe,q.current,P.current)},[c,U,X,n]);d.useEffect(()=>{$.current=Ne},[Ne]);const ut=t==="white"?["a","b","c","d","e","f","g","h"]:["h","g","f","e","d","c","b","a"],vt=t==="white"?["8","7","6","5","4","3","2","1"]:["1","2","3","4","5","6","7","8"],tn=(k==null?void 0:k.type)==="color"?"animate-pulse ring-4 ring-amber-400":"";return a==="ready"?i.jsxs(Ye,{className:"w-full max-w-md mx-auto",children:[i.jsx(_t,{className:"pb-2",children:i.jsxs(Mt,{className:"text-lg flex items-center justify-between",children:[i.jsx("span",{children:"Board Reconstruction"}),i.jsx(re,{variant:"ghost",size:"sm",onClick:r,"data-testid":"button-skip-reconstruction-ready",children:"Skip"})]})}),i.jsxs(et,{className:"flex flex-col items-center justify-center py-12 gap-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx(hn,{className:`h-16 w-16 text-blue-500 transition-transform duration-300 ${j?"scale-110":"scale-100"}`}),i.jsx("div",{className:`absolute -top-1 -right-1 h-4 w-4 rounded-full ${j?"bg-green-500":"bg-green-400"} transition-colors duration-300`})]}),i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Ready to Reconstruct?"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Rebuild the position from memory using voice commands"}),i.jsx("p",{className:"text-muted-foreground text-xs",children:'Say pieces like "White Knight F3" or "Black Queen D8"'})]}),i.jsxs(re,{size:"lg",onClick:()=>{Ii.register("reconstruction"),l("playing")},className:"mt-4","data-testid":"button-start-reconstruction",children:[i.jsx(hn,{className:"h-5 w-5 mr-2"}),"Start"]})]})]}):i.jsxs(Ye,{className:"w-full max-w-md mx-auto",children:[i.jsx(_t,{className:"pb-2",children:i.jsxs(Mt,{className:"text-lg flex items-center justify-between",children:[i.jsx("span",{children:"Reconstruct the Board"}),i.jsxs("div",{className:"flex items-center gap-2",children:[g!==null&&i.jsxs(Et,{variant:g>=80?"default":g>=50?"secondary":"destructive",children:[g,"%"]}),m&&w>0&&i.jsxs(Et,{variant:"outline",className:"text-amber-600 border-amber-400",children:["Voice: ",w,"%"]})]})]})}),i.jsxs(et,{className:"space-y-3",children:[!m&&i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"flex-1",children:i.jsx("p",{className:"text-sm text-muted-foreground",children:k?`Say "White" or "Black" for ${k.pieceType==="K"?"King":k.pieceType==="Q"?"Queen":k.pieceType==="R"?"Rook":k.pieceType==="B"?"Bishop":k.pieceType==="N"?"Knight":"Pawn"} on ${k.square.file}${k.square.rank}`:v?`"${C||"Knight f3"}"`:"Drag pieces or use voice commands"})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>B(z=>z==="w"?"b":"w"),className:`w-7 h-7 rounded flex items-center justify-center transition-all border-2 ${L==="w"?"bg-white border-stone-400":"bg-stone-800 border-stone-600"}`,title:`Placing ${L==="w"?"White":"Black"} pieces - tap to switch`,"data-testid":"button-sticky-color",children:i.jsx("span",{className:`text-xs font-bold ${L==="w"?"text-stone-800":"text-white"}`,children:L==="w"?"W":"B"})}),i.jsx(re,{size:"icon",variant:v?"destructive":"outline",onClick:v?X:W,className:v?"animate-pulse":"","data-testid":"button-reconstruction-mic",children:v?i.jsx(hn,{className:"h-4 w-4"}):i.jsx(mo,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-1 justify-center p-2 bg-muted rounded-md",style:{touchAction:"none"},children:[NA.map(z=>i.jsx("div",{draggable:!m,onDragStart:H=>de(H,z),onDragEnd:Ce,onTouchStart:H=>$e(H,z),onClick:()=>!m&&h(f===z?null:z),className:`w-8 h-8 rounded transition-all cursor-grab active:cursor-grabbing ${f===z?"ring-2 ring-amber-400 bg-amber-100":T===z?"opacity-50":"hover:bg-muted-foreground/20"} ${m?"opacity-50 cursor-not-allowed":""}`,"data-testid":`piece-palette-${z}`,children:i.jsx("img",{src:tf[z],alt:z,className:"w-full h-full pointer-events-none",draggable:!1})},z)),i.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center bg-red-100 hover:bg-red-200 cursor-pointer",onClick:()=>h(null),"data-testid":"piece-palette-eraser",children:i.jsx(uw,{className:"h-4 w-4 text-red-600"})})]}),i.jsx("div",{className:`aspect-square w-full max-w-xs mx-auto rounded ${tn}`,children:i.jsx("div",{className:"grid grid-cols-8 grid-rows-8 w-full h-full border border-stone-400",style:{touchAction:"none"},children:Array.from({length:64}).map((z,H)=>{const fe=Math.floor(H/8),me=H%8,le=t==="white"?fe:7-fe,Fe=t==="white"?me:7-me,Ae=(fe+me)%2===0,Re=c[le][Fe],st=U[le][Fe],nn=`${le}-${Fe}`,Xe=D.has(nn);let Qt=Ae?"bg-amber-100":"bg-amber-700";const rn=Re===st,Qn=!Re&&st;return m&&(rn?Re!==null&&(Qt=Ae?"bg-green-200":"bg-green-600"):Qt=Ae?"bg-red-200":"bg-red-500"),i.jsxs("div",{onClick:()=>he(le,Fe),onDragOver:He,onDrop:In=>Ee(In,le,Fe),className:`relative flex items-center justify-center cursor-pointer ${Qt} ${!m&&(f||T)?"hover:ring-2 hover:ring-amber-400 hover:ring-inset":""}`,style:{touchAction:"none"},"data-testid":`reconstruction-square-${ut[me]}${vt[fe]}`,children:[m&&st&&!rn&&i.jsx("img",{src:tf[st],alt:`actual-${st}`,className:"absolute w-[85%] h-[85%] opacity-30 pointer-events-none",draggable:!1}),Re&&i.jsx("img",{src:tf[Re],alt:Re,className:`w-[85%] h-[85%] pointer-events-none z-10 transition-transform ${Xe?"animate-[voicePop_0.2s_ease-out]":""} ${m&&!rn?"animate-[shake_0.5s_ease-in-out]":""}`,draggable:!1}),m&&Qn&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center animate-[fadeSlideIn_0.6s_ease-out_forwards]",style:{animationDelay:`${(le*8+Fe)*30}ms`},children:i.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"})}),me===0&&i.jsx("span",{className:"absolute top-0.5 left-0.5 text-[8px] font-semibold select-none opacity-70",children:vt[fe]}),fe===7&&i.jsx("span",{className:"absolute bottom-0.5 right-0.5 text-[8px] font-semibold select-none opacity-70",children:ut[me]})]},H)})})}),i.jsx("div",{className:"flex gap-2",children:m?i.jsxs("div",{className:"flex gap-2 w-full",children:[o&&i.jsxs(re,{variant:"outline",size:"sm",onClick:o,className:"flex-1","data-testid":"button-reconstruction-view-report",children:[i.jsx(Xy,{className:"mr-1 h-4 w-4"}),"View Report"]}),i.jsx(re,{size:"sm",onClick:s||r,className:"flex-1 bg-amber-400 hover:bg-amber-500 text-stone-900","data-testid":"button-reconstruction-continue",children:"Main Menu"})]}):i.jsxs(i.Fragment,{children:[i.jsxs(re,{variant:"outline",size:"sm",onClick:Te,className:"flex-1","data-testid":"button-reconstruction-reset",children:[i.jsx(aw,{className:"mr-1 h-4 w-4"}),"Reset"]}),i.jsx(re,{variant:"outline",size:"sm",onClick:()=>{X(),r()},className:"flex-1","data-testid":"button-reconstruction-skip",children:"Skip"}),i.jsxs(re,{size:"sm",onClick:Ne,className:"flex-1 bg-amber-400 hover:bg-amber-500 text-stone-900","data-testid":"button-reconstruction-submit",children:[i.jsx(g2,{className:"mr-1 h-4 w-4"}),"Check"]})]})}),m&&i.jsx("div",{className:"text-center text-sm",children:g!==null&&g>=80?i.jsxs("p",{className:"text-green-600 flex items-center justify-center gap-1",children:[i.jsx(cl,{className:"h-4 w-4"})," Excellent memory!"]}):g!==null&&g>=50?i.jsx("p",{className:"text-amber-600",children:"Good effort! Keep practicing."}):i.jsxs("p",{className:"text-red-600 flex items-center justify-center gap-1",children:[i.jsx(So,{className:"h-4 w-4"})," Keep training your visualization!"]})})]})]})}function AA({responseTimes:e,onJumpToMove:t}){if(e.length<3)return i.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"Not enough moves to display stamina graph"});const n=Math.max(...e,1),r=e.length,o=Math.max(100,r*(4+2)),a=(y,g)=>{const p=y/g;return p<.15?"bg-green-500":p<.6?"bg-amber-400":"bg-red-400"},l=Math.floor(r*.15),c=Math.floor(r*.6),u={opening:e.slice(0,l),middlegame:e.slice(l,c),endgame:e.slice(c)},f=u.opening.length>0?u.opening.reduce((y,g)=>y+g,0)/u.opening.length:0,h=u.endgame.length>0?u.endgame.reduce((y,g)=>y+g,0)/u.endgame.length:0,m=f>0?Math.round((h-f)/f*100):0;return i.jsxs("div",{className:"space-y-3","data-testid":"mental-stamina-graph",children:[i.jsx("div",{className:"w-full overflow-x-auto pb-1",children:i.jsxs("div",{className:"h-24 flex items-end bg-muted/30 rounded-md p-2 relative",style:{width:`${o}px`,minWidth:"100%"},children:[e.map((y,g)=>{const p=Math.max(4,y/n*100),w=a(g,r);return i.jsx("div",{className:`${w} rounded-t-sm flex-1 cursor-pointer hover:opacity-80 active:opacity-60`,style:{height:`${p}%`,minWidth:"4px",marginLeft:"1px",marginRight:"1px"},onClick:()=>t==null?void 0:t(g),title:`Move ${g+1}: ${si(y)}`,"data-testid":`stamina-bar-${g}`},g)}),i.jsx("div",{className:"absolute bottom-0 w-full h-[1px] bg-muted-foreground/20"})]})}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded"}),i.jsx("span",{children:"Opening"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded"}),i.jsx("span",{children:"Middlegame"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-red-400 rounded"}),i.jsx("span",{children:"Endgame"})]})]}),m!==0&&i.jsx("div",{className:"flex items-center justify-center gap-2 text-sm",children:m>0?i.jsxs(i.Fragment,{children:[i.jsx(dw,{className:"h-4 w-4 text-red-500"}),i.jsxs("span",{className:"text-red-500",children:[m,"% slower in endgame"]})]}):i.jsxs(i.Fragment,{children:[i.jsx(fw,{className:"h-4 w-4 text-green-500"}),i.jsxs("span",{className:"text-green-500",children:[Math.abs(m),"% faster in endgame"]})]})})]})}function LA({squareInquiries:e}){const t=["a","b","c","d","e","f","g","h"],n=["8","7","6","5","4","3","2","1"],r={};for(const a of e){const l=a.toLowerCase();r[l]=(r[l]||0)+1}const s=Math.max(...Object.values(r),1),o=a=>{const l=r[a]||0;if(l===0)return"bg-muted/30";const c=l/s*100;return c<25?"bg-amber-200 dark:bg-amber-900/40":c<50?"bg-amber-400 dark:bg-amber-700/60":c<75?"bg-red-400 dark:bg-red-700/70":"bg-red-600 dark:bg-red-600/80"};return e.length===0?i.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"No square inquiries this game"}):i.jsxs("div",{className:"space-y-2","data-testid":"spatial-blur-heatmap",children:[i.jsx("div",{className:"grid grid-cols-8 gap-0.5 aspect-square max-w-[180px] mx-auto",children:n.map(a=>t.map(l=>{const c=`${l}${a}`,u=r[c]||0;return i.jsx("div",{className:`${o(c)} rounded-sm flex items-center justify-center text-[8px] font-mono`,title:`${c.toUpperCase()}: ${u} inquiries`,"data-testid":`heatmap-square-${c}`,children:u>0&&i.jsx("span",{className:"text-foreground/70",children:u})},c)}))}),i.jsxs("p",{className:"text-xs text-muted-foreground text-center","data-testid":"text-total-inquiries",children:[e.length," total inquiries"]})]})}function IA({open:e,gameResult:t,playerColor:n,clarityScore:r,responseTimes:s,squareInquiries:o,reconstructionScore:a,reconstructionVoicePurity:l,reconstructionEnabled:c,onRematch:u,onMainMenu:f,onAnalyze:h}){const m=t==="white_win"&&n==="white"||t==="black_win"&&n==="black",y=t==="draw"?"Game Drawn":m?"Victory":"Defeat",g=t==="draw"?"text-amber-500":m?"text-green-500":"text-red-500",p=s.length>0?s.reduce((w,x)=>w+x,0)/s.length:0;return i.jsx(Ai,{open:e,children:i.jsxs(Co,{className:"max-w-md max-h-[90vh] overflow-y-auto [&>button.absolute]:hidden",onPointerDownOutside:w=>w.preventDefault(),onInteractOutside:w=>w.preventDefault(),onEscapeKeyDown:w=>w.preventDefault(),children:[i.jsxs(re,{variant:"ghost",size:"icon",className:"absolute right-4 top-4 h-6 w-6 rounded-sm opacity-70 hover:opacity-100",onClick:f,"data-testid":"button-postmortem-close",children:[i.jsx(So,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]}),i.jsx(jo,{children:i.jsxs(Eo,{className:"flex items-center gap-3",children:[i.jsx(Vn,{className:`h-6 w-6 ${g}`}),i.jsx("span",{className:g,children:y})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(Ye,{className:"bg-muted/30 border-0",children:i.jsxs(et,{className:"p-3 text-center",children:[i.jsx(Qy,{className:"h-5 w-5 mx-auto mb-1 text-amber-500"}),i.jsxs("p",{className:"text-2xl font-bold text-amber-500",children:[r,"%"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Reconstruction Score"})]})}),i.jsx(Ye,{className:"bg-muted/30 border-0",children:i.jsxs(et,{className:"p-3 text-center",children:[i.jsx(ho,{className:"h-5 w-5 mx-auto mb-1 text-blue-500"}),i.jsx("p",{className:"text-2xl font-bold",children:si(p)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Response"})]})})]}),i.jsx(Pr,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Zj,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm font-medium",children:"Mental Stamina"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Response time changes throughout the game"}),i.jsx(AA,{responseTimes:s})]}),i.jsx(Pr,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rw,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm font-medium",children:"Spatial Blurs"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Squares you needed to inquire about"}),i.jsx(LA,{squareInquiries:o})]}),c&&a!==null&&i.jsxs(i.Fragment,{children:[i.jsx(Pr,{}),i.jsxs("div",{className:"space-y-2","data-testid":"reconstruction-stats",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(m2,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm font-medium",children:"Board Reconstruction"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(Ye,{className:"bg-muted/30 border-0",children:i.jsxs(et,{className:"p-3 text-center",children:[i.jsxs("p",{className:`text-xl font-bold ${a>=80?"text-green-500":a>=50?"text-amber-500":"text-red-500"}`,children:[a,"%"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Accuracy"})]})}),l!==null&&i.jsx(Ye,{className:"bg-muted/30 border-0",children:i.jsxs(et,{className:"p-3 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-1 mb-0.5",children:[i.jsx(hn,{className:"h-3 w-3 text-purple-500"}),i.jsxs("p",{className:`text-xl font-bold ${l>=80?"text-purple-500":l>=50?"text-amber-500":"text-muted-foreground"}`,children:[l,"%"]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Voice Purity"})]})})]})]})]}),i.jsx(Pr,{}),h&&i.jsxs(re,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:h,"data-testid":"button-postmortem-analyze",children:[i.jsx(lw,{className:"mr-2 h-4 w-4"}),"Analyze Game"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(re,{className:"flex-1 bg-black hover:bg-stone-800 text-white",onClick:u,"data-testid":"button-postmortem-rematch",children:[i.jsx(aw,{className:"mr-2 h-4 w-4"}),"Rematch"]}),i.jsxs(re,{variant:"outline",className:"flex-1 bg-amber-400 hover:bg-amber-500 text-black border-black",onClick:f,"data-testid":"button-postmortem-menu",children:[i.jsx(d2,{className:"mr-2 h-4 w-4"}),"Menu"]})]})]})]})})}const n0=10;function r0(e){return Math.max(-n0,Math.min(n0,e))}class $A{constructor(){this.worker=null,this.isReady=!1,this.isSearching=!1,this.messageHandlers=[],this.initPromise=null,this.requestQueue=Promise.resolve()}async init(){if(!this.isReady)return this.initPromise?this.initPromise:(this.initPromise=new Promise((t,n)=>{try{typeof WebAssembly=="object"&&WebAssembly.validate(Uint8Array.of(0,97,115,109,1,0,0,0))||console.warn("[ClientStockfish] WebAssembly not supported, using slower JS fallback");const s="/stockfish/stockfish-17.1-lite-single-03e3232.js";this.worker=new Worker(s),this.worker.onmessage=l=>{const c=typeof l.data=="string"?l.data:"";for(const u of this.messageHandlers)u(c)},this.worker.onerror=l=>{console.error("[ClientStockfish] Worker error:",l),n(l)},this.sendCommand("uci");let o=!1;const a=l=>{l==="uciok"&&(o=!0,this.sendCommand("setoption name Hash value 16"),console.log("[ClientStockfish] Set Hash table to 16MB for mobile optimization"),this.sendCommand("isready")),l==="readyok"&&o&&(this.removeHandler(a),this.isReady=!0,console.log("[ClientStockfish] Engine ready"),t())};this.addHandler(a),setTimeout(()=>{this.isReady||n(new Error("Stockfish initialization timeout"))},3e4)}catch(r){n(r)}}),this.initPromise)}addHandler(t){this.messageHandlers.push(t)}removeHandler(t){const n=this.messageHandlers.indexOf(t);n>-1&&this.messageHandlers.splice(n,1)}sendCommand(t){this.worker&&this.worker.postMessage(t)}async getBestMove(t,n={}){const r=()=>new Promise(async(o,a)=>{const l=setTimeout(()=>{a(new Error("getBestMove timeout"))},3e4);try{this.isReady||await this.init(),n.skillLevel!==void 0&&this.sendCommand(`setoption name Skill Level value ${n.skillLevel}`),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`);let c="go";n.depth?c+=` depth ${n.depth}`:n.nodes?c+=` nodes ${n.nodes}`:n.moveTime?c+=` movetime ${n.moveTime}`:c+=" depth 15",this.isSearching=!0,this.sendCommand(c);let u,f;const h=m=>{if(m.startsWith("info depth")){const y=m.match(/depth (\d+)/),g=m.match(/score cp (-?\d+)/),p=m.match(/score mate (-?\d+)/);y&&(f=parseInt(y[1])),g&&(u=parseInt(g[1])/100),p&&(u=parseInt(p[1])>0?100:-100)}if(m.startsWith("bestmove")){clearTimeout(l),this.removeHandler(h),this.isSearching=!1;const y=m.match(/bestmove (\S+)/);y?o({bestMove:y[1],evaluation:u,depth:f}):a(new Error("Failed to parse bestmove"))}};this.addHandler(h)}catch(c){clearTimeout(l),this.isSearching=!1,a(c)}}),s=this.requestQueue.then(r,r);return this.requestQueue=s.catch(()=>{}),s}async analyzePosition(t,n=1e6){const r=()=>new Promise(async(o,a)=>{const l=setTimeout(()=>{a(new Error("analyzePosition timeout"))},6e4);try{this.isReady||await this.init(),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`),this.isSearching=!0,this.sendCommand(`go nodes ${n}`);let c=0,u=0,f="",h=[],m=!1,y;const g=p=>{if(p.startsWith("info depth")&&p.includes(" pv ")){const w=p.match(/depth (\d+)/),x=p.match(/score cp (-?\d+)/),v=p.match(/score mate (-?\d+)/),b=p.match(/ pv (.+)/);if(w&&(u=parseInt(w[1])),x&&(c=parseInt(x[1])/100,m=!1,y=void 0),v){const k=parseInt(v[1]);c=k>0?999:-999,m=!0,y=Math.abs(k)}b&&(h=b[1].trim().split(" "))}if(p.startsWith("bestmove")){clearTimeout(l),this.removeHandler(g),this.isSearching=!1;const w=p.match(/bestmove (\S+)/);w?(f=w[1],o({evaluation:r0(c),bestMove:f,bestMoveEval:r0(c),principalVariation:h,depth:u,isMate:m,mateIn:y})):a(new Error("Failed to parse bestmove"))}};this.addHandler(g)}catch(c){clearTimeout(l),this.isSearching=!1,a(c)}}),s=this.requestQueue.then(r,r);return this.requestQueue=s.catch(()=>{}),s}async getTopMoves(t,n=3,r=1e6,s){const o=s===void 0||s==="w"?1:-1,a=()=>new Promise(async(c,u)=>{const f=setTimeout(()=>{this.sendCommand("setoption name MultiPV value 1"),c([])},3e4);try{this.isReady||await this.init(),this.sendCommand("stop"),this.sendCommand("ucinewgame"),this.sendCommand(`setoption name MultiPV value ${n}`),this.sendCommand(`position fen ${t}`),this.isSearching=!0,this.sendCommand(`go nodes ${r}`);const h=new Map,m=y=>{if(y.startsWith("info depth")&&y.includes(" pv ")){const g=y.match(/multipv (\d+)/),p=y.match(/score cp (-?\d+)/),w=y.match(/score mate (-?\d+)/),x=y.match(/ pv (.+)/),v=g?parseInt(g[1]):1;if(x){const b=x[1].trim().split(" "),k=b[0];let S=0,C=!1,N;if(p&&(S=parseInt(p[1])/100*o),w){const j=parseInt(w[1]);S=(j>0?999:-999)*o,C=!0,N=Math.abs(j)}h.set(v,{move:k,evaluation:S,isMate:C,mateIn:N,principalVariation:b})}}if(y.startsWith("bestmove")){clearTimeout(f),this.removeHandler(m),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1");const g=[];for(let p=1;p<=n;p++){const w=h.get(p);w&&g.push(w)}c(g)}};this.addHandler(m)}catch(h){clearTimeout(f),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1"),u(h)}}),l=this.requestQueue.then(a,a);return this.requestQueue=l.catch(()=>{}),l}async getBotMove(t,n){const r=u=>u<=400?0:u<=600?2:u<=800?4:u<=1e3?6:u<=1200?8:u<=1400?11:u<=1600?14:u<=1800?17:u<=2e3?18:u<=2200?19:20,s=u=>u<=600?5:u<=1e3?4:u<=1400?3:u<=1800?2:1,o=u=>u<=400?500:u<=600?1e3:u<=800?2e3:u<=1e3?5e3:u<=1200?1e4:u<=1400?2e4:u<=1600?5e4:u<=1800?1e5:u<=2e3?25e4:u<=2200?5e5:u<=2400?1e6:15e5,a=u=>u<=400||u<=600?1:u<=800?2:u<=1e3?3:u<=1200?4:u<=1400?5:u<=1600?6:0,l=()=>new Promise(async(u,f)=>{const h=setTimeout(()=>{f(new Error("getBotMove timeout"))},3e4);try{this.isReady||await this.init();const m=r(n),y=s(n),g=o(n),p=a(n);this.sendCommand(`setoption name Skill Level value ${m}`),this.sendCommand("setoption name UCI_LimitStrength value true"),this.sendCommand(`setoption name UCI_Elo value ${Math.min(Math.max(n,400),3200)}`),this.sendCommand(`setoption name MultiPV value ${y}`),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`),this.isSearching=!0,p>0?this.sendCommand(`go depth ${p} nodes ${g}`):this.sendCommand(`go nodes ${g}`);const w=new Map,x=v=>{var b;if(v.startsWith("info depth")&&v.includes(" pv ")){const k=v.match(/multipv (\d+)/),S=v.match(/ pv (\S+)/),C=v.match(/score cp (-?\d+)/),N=k?parseInt(k[1]):1,j=S?S[1]:null,R=C?parseInt(C[1])/100:void 0;j&&w.set(N,{move:j,eval:R})}if(v.startsWith("bestmove")){clearTimeout(h),this.removeHandler(x),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1"),this.sendCommand("setoption name UCI_LimitStrength value false"),this.sendCommand("setoption name Skill Level value 20");let k;const S=Array.from(w.values()).slice(0,y);if(S.length===0){const C=v.match(/bestmove (\S+)/);k=C?C[1]:void 0}else if(S.length===1)k=S[0].move;else{const C=Math.random()*100;n<=600?C<40?k=S[0].move:C<70&&S[1]?k=S[1].move:C<90&&S[2]?k=S[2].move:k=S[Math.min(Math.floor(C/25),S.length-1)].move:n<=1e3?C<55?k=S[0].move:C<80&&S[1]?k=S[1].move:C<95&&S[2]?k=S[2].move:k=S[Math.min(Math.floor(C/25),S.length-1)].move:n<=1400?C<70?k=S[0].move:C<90&&S[1]?k=S[1].move:S[2]?k=S[2].move:k=S[0].move:n<=1800?C<85?k=S[0].move:C<97&&S[1]?k=S[1].move:S[2]?k=S[2].move:k=S[0].move:C<95?k=S[0].move:S[1]?k=S[1].move:k=S[0].move}k?u({bestMove:k,evaluation:(b=w.get(1))==null?void 0:b.eval,isFreeCapture:!1}):f(new Error("Failed to get bot move"))}};this.addHandler(x)}catch(m){clearTimeout(h),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1"),this.sendCommand("setoption name UCI_LimitStrength value false"),this.sendCommand("setoption name Skill Level value 20"),f(m)}}),c=this.requestQueue.then(l,l);return this.requestQueue=c.catch(()=>{}),c}async getDepthLimitedMove(t,n){const r=()=>new Promise(async(o,a)=>{const l=setTimeout(()=>{a(new Error("getDepthLimitedMove timeout"))},3e4);try{this.isReady||await this.init(),this.sendCommand("setoption name UCI_LimitStrength value false"),this.sendCommand("setoption name Skill Level value 20"),this.sendCommand("setoption name MultiPV value 1"),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`),this.isSearching=!0,this.sendCommand(`go depth ${n}`);let c,u;const f=h=>{if(h.startsWith("info depth")&&h.includes(" pv ")){const m=h.match(/ pv (\S+)/),y=h.match(/score cp (-?\d+)/),g=h.match(/score mate (-?\d+)/);m&&(c=m[1]),y?u=parseInt(y[1])/100:g&&(u=parseInt(g[1])>0?100:-100)}if(h.startsWith("bestmove")){clearTimeout(l),this.removeHandler(f),this.isSearching=!1;const m=h.match(/bestmove (\S+)/);m&&(c=m[1]),c?o({bestMove:c,evaluation:u,isFreeCapture:!1}):a(new Error("Failed to get depth-limited move"))}};this.addHandler(f)}catch(c){clearTimeout(l),this.isSearching=!1,a(c)}}),s=this.requestQueue.then(r,r);return this.requestQueue=s.catch(()=>{}),s}stopAnalysis(){this.worker&&this.isSearching&&(this.sendCommand("stop"),this.isSearching=!1,console.debug("[ClientStockfish] Analysis halted safely."))}shutdown(){this.worker&&(this.sendCommand("quit"),this.worker.terminate(),this.worker=null,this.isReady=!1,this.initPromise=null)}isInitialized(){return this.isReady}}const Si=new $A;function OA({evaluation:e,isLoading:t,isMate:n,mateIn:r,playerColor:s}){const o=e!==null?s==="black"?-e:e:null,l=e!==null?(y=>n?y>0?100:0:50+Math.max(-10,Math.min(10,y))/10*50)(e):50,c=y=>y===null?"...":n&&r!==void 0?y>0?`M${r}`:`-M${r}`:`${y>=0?"+":""}${y.toFixed(1)}`,u=s==="black",f=u?"bg-white":"bg-stone-900",h=u?"bg-stone-900":"bg-white",m=u?l:100-l;return i.jsxs("div",{className:"flex flex-col items-center w-full h-full","data-testid":"evaluation-bar",children:[i.jsx("div",{className:"text-xs font-mono font-bold mb-1 flex-shrink-0","data-testid":"evaluation-value",children:c(o)}),i.jsxs("div",{className:`relative w-full rounded overflow-hidden border border-border ${h} flex-1 min-h-0`,children:[i.jsx("div",{className:`absolute top-0 left-0 right-0 ${f} transition-all duration-300`,style:{height:`${m}%`}}),i.jsx("div",{className:"absolute left-0 right-0 h-[2px] bg-amber-500",style:{top:"50%",transform:"translateY(-50%)"}}),t&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:i.jsx(sw,{className:"h-3 w-3 animate-spin text-white"})})]})]})}function DA({position:e,flipped:t,lastMove:n,bestMoveSquares:r}){const s=new Mr(e),o=["a","b","c","d","e","f","g","h"],a=["8","7","6","5","4","3","2","1"],l=t?[...o].reverse():o,c=t?[...a].reverse():a,u={K:"",Q:"",R:"",B:"",N:"",P:"",k:"",q:"",r:"",b:"",n:"",p:""};return i.jsx("div",{className:"aspect-square w-full","data-testid":"analysis-board",children:i.jsx("div",{className:"grid grid-cols-8 grid-rows-8 w-full h-full border border-stone-400",children:c.map(f=>l.map(h=>{const m=`${h}${f}`,y=s.get(m),g=(o.indexOf(h)+a.indexOf(f))%2===0,p=n&&(n.from===m||n.to===m),w=r&&(r.from===m||r.to===m);return i.jsx("div",{className:`aspect-square flex items-center justify-center text-2xl sm:text-3xl
                  ${g?"bg-amber-100 dark:bg-amber-200":"bg-amber-600 dark:bg-amber-700"}
                  ${p?"ring-2 ring-inset ring-amber-400":""}
                  ${w?"ring-2 ring-inset ring-emerald-500":""}
                `,"data-testid":`analysis-square-${m}`,children:y&&i.jsx("span",{className:y.color==="w"?"text-white drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)]":"text-black",children:u[y.color==="w"?y.type.toUpperCase():y.type]})},m)}))})})}function s0({moveHistory:e,playerColor:t,onClose:n,gameResult:r,botElo:s}){const{toast:o}=il(),[a,l]=d.useState(0),[c,u]=d.useState(!0),[f,h]=d.useState(!1),[m,y]=d.useState(!0),[g,p]=d.useState(0),[w,x]=d.useState(new Map),v=d.useRef(!1);d.useEffect(()=>{const V=document.getElementById(`move-${a}`);V&&V.scrollIntoView({behavior:"smooth",block:"nearest"})},[a]);const b=d.useMemo(()=>{const V=new Mr,W=r==="white_win"?"1-0":r==="black_win"?"0-1":r==="draw"?"1/2-1/2":"*",X=new Date,J=`${X.getFullYear()}.${String(X.getMonth()+1).padStart(2,"0")}.${String(X.getDate()).padStart(2,"0")}`;return V.header("Event","Blindfold Chess Challenge","Site","Mobile App","Date",J,"Round","?","White",t==="white"?"User":`Stockfish (Elo ${s||"?"})`,"Black",t==="black"?"User":`Stockfish (Elo ${s||"?"})`,"Result",W),e.forEach(he=>{try{V.move(he)}catch{console.warn("[PGN] Could not add move:",he)}}),V.pgn()},[e,t,r,s]),k=async()=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(b);else{const V=document.createElement("textarea");V.value=b,V.style.position="fixed",V.style.left="-9999px",document.body.appendChild(V),V.focus(),V.select(),document.execCommand("copy"),document.body.removeChild(V)}h(!0),o({title:"PGN Copied",description:"Game notation copied to clipboard",duration:2e3}),setTimeout(()=>h(!1),2e3)}catch(V){console.error("[PGN] Copy failed:",V),o({title:"Copy Failed",description:"Could not copy to clipboard",variant:"destructive",duration:2e3})}},S=()=>{const V=new Date,X=`blindfold-game-${`${V.getFullYear()}${String(V.getMonth()+1).padStart(2,"0")}${String(V.getDate()).padStart(2,"0")}-${String(V.getHours()).padStart(2,"0")}${String(V.getMinutes()).padStart(2,"0")}`}.pgn.txt`,J=document.createElement("a"),he=new Blob([b],{type:"text/plain"});J.href=URL.createObjectURL(he),J.download=X,document.body.appendChild(J),J.click(),document.body.removeChild(J),URL.revokeObjectURL(J.href),o({title:"PGN Downloaded",description:X,duration:2e3})},C=d.useMemo(()=>{const V=[],W=new Mr;V.push({fen:W.fen(),lastMove:null});for(let X=0;X<e.length;X++)try{const J=W.move(e[X]);J?V.push({fen:W.fen(),lastMove:{from:J.from,to:J.to}}):console.warn(`[Analysis] Move returned null at index ${X}: ${e[X]}`)}catch(J){console.warn(`[Analysis] Skipping invalid move at index ${X}: ${e[X]}`,J)}return console.log(`[Analysis] Built ${V.length} positions from ${e.length} moves`),V},[e]);d.useEffect(()=>((async()=>{y(!0),p(0),v.current=!1;const W=new Map,X=C.length;for(let J=0;J<X&&!v.current;J++){const{fen:he}=C[J];try{const de=await Si.analyzePosition(he,5e5);if(v.current)break;const He=he.split(" ")[1]==="b",Ee=He?-de.evaluation:de.evaluation,$e=de.mateIn!==void 0&&He?-de.mateIn:de.mateIn;W.set(J,{eval:Ee,isMate:de.isMate,mateIn:$e!==void 0?Math.abs($e):void 0,bestMove:de.bestMove})}catch(de){if(v.current)break;console.error(`[Analysis] Error evaluating position ${J}:`,de)}v.current||(p(Math.round((J+1)/X*100)),x(new Map(W))),await new Promise(de=>setTimeout(de,10))}v.current||y(!1)})(),()=>{v.current=!0}),[C]);const N=C[a]||C[0],j=N.fen,R=N.lastMove,T=w.get(a),O=(T==null?void 0:T.eval)??null,L=(T==null?void 0:T.isMate)??!1,B=T==null?void 0:T.mateIn,I=(T==null?void 0:T.bestMove)??null,D=()=>l(0),G=()=>l(Math.max(0,a-1)),q=()=>l(Math.min(C.length-1,a+1)),P=()=>l(C.length-1),$=V=>l(Math.min(V,C.length-1)),U=(()=>{const V=[];for(let W=0;W<e.length;W+=2)V.push({moveNumber:Math.floor(W/2)+1,white:e[W],black:e[W+1],whiteIndex:W+1,blackIndex:e[W+1]?W+2:void 0});return V})(),ve=V=>!V||V.length<4?null:{from:V.slice(0,2),to:V.slice(2,4)},ke=V=>{if(!V)return null;try{const X=new Mr(j).move({from:V.slice(0,2),to:V.slice(2,4),promotion:V.length>4?V[4]:void 0});return X?X.san:V}catch{return V}},ce=c?ve(I):null,we=ke(I);return m&&g<100?i.jsxs("div",{className:"fixed inset-0 z-50 bg-background flex flex-col","data-testid":"analysis-view",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Game Analysis"}),i.jsx(re,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-analysis-close",children:i.jsx(So,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 gap-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(sw,{className:"h-6 w-6 animate-spin text-amber-500"}),i.jsx("span",{className:"text-lg font-medium",children:"Analyzing game..."})]}),i.jsxs("div",{className:"w-full max-w-xs space-y-2",children:[i.jsx(bi,{value:g,className:"h-3"}),i.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:[g,"% complete (",Math.round(g/100*C.length)," / ",C.length," positions)"]})]}),i.jsx("p",{className:"text-sm text-muted-foreground text-center max-w-sm",children:"This will take a few seconds. Once complete, you can navigate through moves instantly."})]})]}):i.jsxs("div",{className:"fixed inset-0 z-50 bg-background flex flex-col","data-testid":"analysis-view",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Game Analysis"}),i.jsx(re,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-analysis-close",children:i.jsx(So,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[i.jsxs("div",{className:"flex flex-col gap-3 items-center",children:[i.jsxs("div",{className:"grid grid-cols-[24px_1fr] gap-2 w-full max-w-[352px]",children:[i.jsx(OA,{evaluation:O,isLoading:!1,isMate:L,mateIn:B,playerColor:t}),i.jsx(DA,{position:j,flipped:t==="black",lastMove:R,bestMoveSquares:ce})]}),i.jsxs("div",{className:"flex justify-center gap-1",children:[i.jsx(re,{variant:"outline",size:"icon",onClick:D,disabled:a===0,"data-testid":"button-analysis-start",children:i.jsx(r2,{className:"h-4 w-4"})}),i.jsx(re,{variant:"outline",size:"icon",onClick:G,disabled:a===0,"data-testid":"button-analysis-back",children:i.jsx(Im,{className:"h-4 w-4"})}),i.jsx(re,{variant:"outline",size:"icon",onClick:q,disabled:a===C.length-1,"data-testid":"button-analysis-forward",children:i.jsx(t2,{className:"h-4 w-4"})}),i.jsx(re,{variant:"outline",size:"icon",onClick:P,disabled:a===C.length-1,"data-testid":"button-analysis-end",children:i.jsx(s2,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm","data-testid":"best-move-display",children:[i.jsx(re,{variant:c?"default":"outline",size:"sm",onClick:()=>u(!c),className:"h-7 px-2","data-testid":"button-toggle-best-move",children:c?"Hide Best":"Show Best"}),c&&we&&i.jsxs("span",{className:"font-mono bg-emerald-500/20 text-emerald-600 dark:text-emerald-400 px-2 py-1 rounded","data-testid":"text-best-move",children:["Best: ",we]})]})]}),i.jsxs("div",{className:"flex items-center justify-between mt-4 mb-2",children:[i.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Move List"}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs(re,{variant:"outline",size:"sm",onClick:k,className:"h-7 px-2","data-testid":"button-copy-pgn",children:[f?i.jsx(cl,{className:"h-3 w-3 mr-1"}):i.jsx(Jy,{className:"h-3 w-3 mr-1"}),f?"Copied":"Copy"]}),i.jsxs(re,{variant:"outline",size:"sm",onClick:S,className:"h-7 px-2","data-testid":"button-download-pgn",children:[i.jsx(l2,{className:"h-3 w-3 mr-1"}),"Download"]})]})]}),i.jsx(Ye,{className:"p-3 max-h-40 overflow-y-auto scroll-smooth","data-testid":"analysis-move-list",children:i.jsx("div",{className:"grid grid-cols-[auto_1fr_1fr] gap-x-3 gap-y-1 text-sm font-mono",children:U.map(V=>i.jsxs(d.Fragment,{children:[i.jsxs("span",{className:"text-muted-foreground",children:[V.moveNumber,"."]}),i.jsx("button",{id:`move-${V.whiteIndex}`,onClick:()=>$(V.whiteIndex),className:`text-left px-1 rounded hover:bg-muted transition-colors ${a===V.whiteIndex?"bg-amber-400 text-black font-bold":""}`,"data-testid":`move-white-${V.moveNumber}`,children:V.white}),V.black?i.jsx("button",{id:`move-${V.blackIndex}`,onClick:()=>$(V.blackIndex),className:`text-left px-1 rounded hover:bg-muted transition-colors ${a===V.blackIndex?"bg-amber-400 text-black font-bold":""}`,"data-testid":`move-black-${V.moveNumber}`,children:V.black}):i.jsx("span",{})]},V.moveNumber))})})]})]})}const nf=Ws("KeepAwake",{web:()=>Ui(()=>import("./web-GDMKq5uA.js"),[]).then(e=>new e.KeepAwakeWeb)});var Ue;(function(e){e.Heavy="HEAVY",e.Medium="MEDIUM",e.Light="LIGHT"})(Ue||(Ue={}));var Di;(function(e){e.Success="SUCCESS",e.Warning="WARNING",e.Error="ERROR"})(Di||(Di={}));const Ve=Ws("Haptics",{web:()=>Ui(()=>import("./web-o8Zy6Z2g.js"),[]).then(e=>new e.HapticsWeb)}),pk=Object.freeze(Object.defineProperty({__proto__:null,Haptics:Ve,get ImpactStyle(){return Ue},get NotificationType(){return Di}},Symbol.toStringTag,{value:"Module"}));new BigUint64Array(768);new BigUint64Array(4);new BigUint64Array(8);const zr=[];function BA(){if(zr.length>0)return;let e=new Array(781);e[0]=1n;for(let t=1;t<781;t++)e[t]=e[t-1]*6364136223846793005n+1442695040888963407n&0xFFFFFFFFFFFFFFFFn;for(let t=0;t<781;t++)zr[t]=e[t]}const FA={p:0,P:1,n:2,N:3,b:4,B:5,r:6,R:7,q:8,Q:9,k:10,K:11};function zA(e,t,n){const r=[],s=e.split("/");for(let l=0;l<8;l++){const c=s[l],u=[];for(const f of c)if(f>="1"&&f<="8")for(let h=0;h<parseInt(f);h++)u.push("");else u.push(f);r.push(u)}const o=t==="w"?"P":"p",a=t==="w"?3:4;return n>0&&r[a][n-1]===o||n<7&&r[a][n+1]===o}function VA(e){BA();const t=e.split(" "),n=t[0],r=t[1]||"w",s=t[2]||"-",o=t[3]||"-";let a=0n,l=56;for(const c of n)if(c==="/")l-=16;else if(c>="1"&&c<="8")l+=parseInt(c);else{const u=FA[c];if(u!==void 0){const f=64*u+l;f<768&&(a^=zr[f])}l++}if(s.includes("K")&&(a^=zr[768]),s.includes("Q")&&(a^=zr[769]),s.includes("k")&&(a^=zr[770]),s.includes("q")&&(a^=zr[771]),o!=="-"){const c=o.charCodeAt(0)-97;c>=0&&c<8&&zA(n,r,c)&&(a^=zr[772+c])}return r==="w"&&(a^=zr[780]),a}function qA(e){const t=e&7,n=e>>3&7,r=e>>6&7,s=e>>9&7,o=e>>12&7,a="abcdefgh",l=a[r]+(s+1),c=a[t]+(n+1);let u;return o>0&&(u=["","n","b","r","q"][o]),{from:l,to:c,promotion:u}}let rf=null,ur=[],sf=!1,Jl=null;async function WA(){if(!sf)return Jl||(Jl=(async()=>{try{const e=await fetch("/openings.bin");if(!e.ok)throw new Error(`Failed to load opening book: ${e.status}`);rf=await e.arrayBuffer();const t=new DataView(rf),n=rf.byteLength/16;ur=[];for(let r=0;r<n;r++){const s=r*16,o=t.getUint32(s,!1),a=t.getUint32(s+4,!1),l=BigInt(o)<<32n|BigInt(a),c=t.getUint16(s+8,!1),u=t.getUint16(s+10,!1);ur.push({key:l,move:c,weight:u})}ur.sort((r,s)=>r.key<s.key?-1:r.key>s.key?1:0),sf=!0,console.log(`[OpeningBook] Loaded ${n} entries from Polyglot book`)}catch(e){console.error("[OpeningBook] Failed to load opening book:",e),ur=[],sf=!0}})(),Jl)}function UA(e){const t=[];let n=0,r=ur.length-1,s=-1;for(;n<=r;){const o=Math.floor((n+r)/2);ur[o].key===e?(s=o,r=o-1):ur[o].key<e?n=o+1:r=o-1}if(s===-1)return t;for(let o=s;o<ur.length&&ur[o].key===e;o++)t.push({move:ur[o].move,weight:ur[o].weight});return t}async function HA(e){await WA();const t=VA(e),r=UA(t).map(s=>{const o=qA(s.move);return{from:o.from,to:o.to,promotion:o.promotion,weight:s.weight}});return r.sort((s,o)=>o.weight-s.weight),{moves:r}}function GA(e){return e<30}function KA(e,t){const n=e.split(" ")[0];let r=0;if(t==="white")for(const s of n)s>="A"&&s<="Z"&&r++;else for(const s of n)s>="a"&&s<="z"&&r++;return r}function QA(e,t){if(!e||!e.captured)return!1;try{const r=new Mr(t).moves({verbose:!0}),s=e.to;return r.some(o=>o.to===s&&o.captured)}catch{return!1}}function YA(e,t){try{const n=new Mr(e),r=t.slice(0,2),s=t.slice(2,4),o=n.move({from:r,to:s,promotion:t.length>4?t[4]:void 0});return!o||!o.captured?!1:!n.moves({verbose:!0}).some(l=>l.to===s&&l.captured)}catch{return!1}}function XA(e,t,n,r,s){let o=500+Math.random()*1e3;return QA(s,n)?Math.min(o,800):(e<=10&&(o*=.7),KA(n,r)>=10&&e>10&&e<30&&(o*=1.3),t<60?o*=.5:t<180&&(o*=.7),Math.max(300,Math.min(3e3,o)))}function ZA(e){const t=e.split(" ")[0];let n=0;for(const r of t)/[pnbrqkPNBRQK]/.test(r)&&n++;return n}function JA(e,t,n,r="blitz"){if(n<30)return 500;if(n<60)return 1e3;const o=r==="classical"?2:r==="rapid"?1.5:1,a=(c,u)=>(Math.random()*(u-c)+c)*1e3;let l;return e<=6?l=a(1,2):e<=10?l=a(2,3):e<=15?l=a(3,8):e<=20||t>=26?l=a(4,8):t>=20?l=a(4,7):t>=14?l=a(3,6):t>=9?l=a(2,4):l=a(1,2),l*o}function e4(e){try{const n=new Mr(e).moves({verbose:!0});if(n.length===0)return null;const r=n[Math.floor(Math.random()*n.length)];return r.from+r.to+(r.promotion||"")}catch{return null}}async function t4(e,t,n,r){try{const s=ru(t);if(s.randomPercent>0&&Math.random()*100<s.randomPercent){const l=e4(e);if(l)return console.log(`[BotEngine] Elo ${t}: Playing random move (${s.randomPercent}% chance)`),{move:l,isBookMove:!1}}if(GA((n==null?void 0:n.length)||0)){const l=await HA(e);if(l.moves.length>0){const c=l.moves,u=c.reduce((m,y)=>m+y.weight,0);let f=Math.random()*u;for(const m of c)if(f-=m.weight,f<=0)return{move:m.from+m.to+(m.promotion||""),isBookMove:!0};const h=c[0];return{move:h.from+h.to+(h.promotion||""),isBookMove:!0}}}let o;s.depth>0?(o=await Si.getBestMove(e,{depth:s.depth,skillLevel:s.skillLevel}),console.log(`[BotEngine] Elo ${t}: Depth ${s.depth}, Skill ${s.skillLevel}`)):(o=await Si.getBestMove(e,{nodes:s.nodes||5e5,skillLevel:s.skillLevel}),console.log(`[BotEngine] Elo ${t}: Unleashed nodes ${s.nodes}, Skill ${s.skillLevel}`));const a=YA(e,o.bestMove);return{move:o.bestMove,evaluation:o.evaluation,isFreeCapture:a}}catch(s){return console.error("[BotEngine] Error getting bot move:",s),null}}const of="blindfold_chess";let pa=null,Sn=null,Ro=!1,Mh=!1,ec=null;async function Yi(){return Mh?!0:ec||(ec=n4(),ec)}async function n4(){try{if(Ro=mn.isNativePlatform(),!Ro)return console.log("[GameHistory] Web platform - using localStorage fallback"),!0;pa=new ib(ab);const e=await pa.checkConnectionsConsistency(),t=(await pa.isConnection(of,!1)).result;return e.result&&t?Sn=await pa.retrieveConnection(of,!1):Sn=await pa.createConnection(of,!1,"no-encryption",1,!1),await Sn.open(),await Sn.execute(`
      CREATE TABLE IF NOT EXISTS games (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        date TEXT NOT NULL,
        result TEXT NOT NULL,
        playerColor TEXT NOT NULL,
        botName TEXT NOT NULL,
        botElo INTEGER NOT NULL,
        moveCount INTEGER NOT NULL,
        pgn TEXT NOT NULL,
        clarityScore REAL NOT NULL,
        isFavorite INTEGER DEFAULT 0,
        timeControl TEXT NOT NULL
      );
    `),console.log("[GameHistory] Database initialized successfully"),Mh=!0,!0}catch(e){return console.error("[GameHistory] Failed to initialize database:",e),Mh=!0,!1}}function pl(){try{const e=localStorage.getItem("blindfold_game_history");return e?JSON.parse(e):[]}catch{return[]}}function jp(e){localStorage.setItem("blindfold_game_history",JSON.stringify(e))}async function o0(e){var t,n;await Yi();try{if(!Ro){const o=pl(),a=o.length>0?Math.max(...o.map(c=>c.id))+1:1,l={...e,id:a};return o.unshift(l),jp(o),console.log("[GameHistory] Game saved to localStorage:",a),a}if(!Sn)return console.error("[GameHistory] Database not initialized"),null;const s=await Sn.run(`
      INSERT INTO games (date, result, playerColor, botName, botElo, moveCount, pgn, clarityScore, isFavorite, timeControl)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
    `,[e.date,e.result,e.playerColor,e.botName,e.botElo,e.moveCount,e.pgn,e.clarityScore,e.isFavorite?1:0,e.timeControl]);return console.log("[GameHistory] Game saved:",(t=s.changes)==null?void 0:t.lastId),((n=s.changes)==null?void 0:n.lastId)??null}catch(r){return console.error("[GameHistory] Failed to save game:",r),null}}async function r4(){await Yi();try{if(!Ro)return pl();if(!Sn)return console.error("[GameHistory] Database not initialized"),[];const e=await Sn.query("SELECT * FROM games ORDER BY date DESC;");return e.values?e.values.map(t=>({id:t.id,date:t.date,result:t.result,playerColor:t.playerColor,botName:t.botName,botElo:t.botElo,moveCount:t.moveCount,pgn:t.pgn,clarityScore:t.clarityScore,isFavorite:t.isFavorite===1,timeControl:t.timeControl})):[]}catch(e){return console.error("[GameHistory] Failed to get games:",e),[]}}async function s4(){await Yi();try{if(!Ro)return pl().filter(t=>t.isFavorite);if(!Sn)return console.error("[GameHistory] Database not initialized"),[];const e=await Sn.query("SELECT * FROM games WHERE isFavorite = 1 ORDER BY date DESC;");return e.values?e.values.map(t=>({id:t.id,date:t.date,result:t.result,playerColor:t.playerColor,botName:t.botName,botElo:t.botElo,moveCount:t.moveCount,pgn:t.pgn,clarityScore:t.clarityScore,isFavorite:t.isFavorite===1,timeControl:t.timeControl})):[]}catch(e){return console.error("[GameHistory] Failed to get favorite games:",e),[]}}async function gk(e){await Yi();try{if(!Ro){const r=pl(),s=r.find(o=>o.id===e);return s?(s.isFavorite=!s.isFavorite,jp(r),s.isFavorite):!1}if(!Sn)return console.error("[GameHistory] Database not initialized"),!1;const t=await Sn.query("SELECT isFavorite FROM games WHERE id = ?;",[e]);if(!t.values||t.values.length===0)return!1;const n=t.values[0].isFavorite===1?0:1;return await Sn.run("UPDATE games SET isFavorite = ? WHERE id = ?;",[n,e]),console.log("[GameHistory] Toggled favorite for game:",e),n===1}catch(t){return console.error("[GameHistory] Failed to toggle favorite:",t),!1}}async function o4(e){await Yi();try{if(!Ro){const n=pl().filter(r=>r.id!==e);return jp(n),console.log("[GameHistory] Game deleted from localStorage:",e),!0}return Sn?(await Sn.run("DELETE FROM games WHERE id = ?;",[e]),console.log("[GameHistory] Game deleted:",e),!0):(console.error("[GameHistory] Database not initialized"),!1)}catch(t){return console.error("[GameHistory] Failed to delete game:",t),!1}}function i4({game:e,onView:t,onToggleFavorite:n,onDelete:r}){const s=e.result==="win"?i.jsx(Vn,{className:"h-5 w-5 text-amber-500"}):e.result==="loss"?i.jsx(ew,{className:"h-5 w-5 text-stone-400"}):i.jsx(ow,{className:"h-5 w-5 text-stone-500"}),o=e.result==="win"?"Victory":e.result==="loss"?"Defeat":"Draw",a=e.result==="win"?"text-green-600 dark:text-green-400":e.result==="loss"?"text-red-600 dark:text-red-400":"text-muted-foreground",l=new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),c=new Date(e.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),u=async h=>{h.stopPropagation(),mn.isNativePlatform()&&await Ve.impact({style:Ue.Light}),n()},f=h=>{h.stopPropagation(),r()};return i.jsx(Ye,{className:"cursor-pointer hover-elevate active-elevate-2 transition-all",onClick:t,"data-testid":`card-game-${e.id}`,children:i.jsx(et,{className:"p-3",children:i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i.jsx("div",{className:"flex-shrink-0",children:s}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`font-semibold ${a}`,children:o}),i.jsx("span",{className:"text-muted-foreground",children:"vs"}),i.jsx("span",{className:"font-medium truncate",children:e.botName}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",e.botElo,")"]})]}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mt-1",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Yy,{className:"h-3 w-3"}),l]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(ho,{className:"h-3 w-3"}),c]}),i.jsxs("span",{children:[e.moveCount," moves"]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:u,"data-testid":`button-favorite-${e.id}`,children:i.jsx(cw,{className:`h-5 w-5 ${e.isFavorite?"fill-amber-400 text-amber-400":"text-muted-foreground"}`})}),i.jsx(re,{variant:"ghost",size:"icon",onClick:f,"data-testid":`button-delete-${e.id}`,children:i.jsx(uw,{className:"h-5 w-5 text-muted-foreground hover:text-destructive"})})]})]})})})}function a4({onBack:e,onViewGame:t}){const[n,r]=d.useState([]),[s,o]=d.useState([]),[a,l]=d.useState(!0),[c,u]=d.useState(null),[f,h]=d.useState("all"),m=async()=>{l(!0);const[w,x]=await Promise.all([r4(),s4()]);r(w.filter(v=>v.moveCount>0)),o(x.filter(v=>v.moveCount>0)),l(!1)};d.useEffect(()=>{m()},[]);const y=async w=>{const x=await gk(w.id);r(v=>v.map(b=>b.id===w.id?{...b,isFavorite:x}:b)),o(x?v=>[{...w,isFavorite:!0},...v.filter(b=>b.id!==w.id)]:v=>v.filter(b=>b.id!==w.id))},g=async()=>{if(!c)return;await o4(c.id)&&(r(x=>x.filter(v=>v.id!==c.id)),o(x=>x.filter(v=>v.id!==c.id))),u(null)},p=f==="favorites"?s:n;return i.jsxs("div",{className:"min-h-screen bg-background flex flex-col","data-testid":"game-history-page",children:[i.jsxs("header",{className:"flex items-center gap-2 p-3 border-b border-border",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-history-back",children:i.jsx(Im,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-lg font-semibold",children:"Game History"})]}),i.jsxs(fl,{value:f,onValueChange:h,className:"flex-1 flex flex-col",children:[i.jsx("div",{className:"px-3 pt-3",children:i.jsxs(Gi,{className:"grid w-full grid-cols-2",children:[i.jsxs(qn,{value:"all","data-testid":"tab-all-games",children:["All Games (",n.length,")"]}),i.jsxs(qn,{value:"favorites","data-testid":"tab-favorites",children:["Favorites (",s.length,")"]})]})}),i.jsx(oi,{value:f,className:"flex-1 mt-0 px-3 pb-3",children:i.jsx(Cp,{className:"h-[calc(100vh-140px)]",children:a?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"animate-pulse text-muted-foreground",children:"Loading games..."})}):p.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx("div",{className:"text-muted-foreground mb-2",children:f==="favorites"?"No favorite games yet":"No games played yet"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:f==="favorites"?"Star a game to add it to your favorites":"Complete a game to see it here"})]}):i.jsx("div",{className:"space-y-2 py-2",children:p.map(w=>i.jsx(i4,{game:w,onView:()=>t(w),onToggleFavorite:()=>y(w),onDelete:()=>u(w)},w.id))})})})]}),i.jsx(Po,{open:c!==null,onOpenChange:()=>u(null),children:i.jsxs(Ls,{children:[i.jsxs(Is,{children:[i.jsx(Os,{children:"Delete this game from history?"}),i.jsx(Ds,{children:"This action cannot be undone. The game record will be permanently removed."})]}),i.jsxs($s,{children:[i.jsx(Fs,{"data-testid":"button-delete-cancel",children:"Cancel"}),i.jsx(Bs,{onClick:g,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90","data-testid":"button-delete-confirm",children:"Delete"})]})]})})]})}async function l4(e,t){const n=t||`blindfold-chess-${Date.now()}.pgn`;if(typeof navigator<"u"&&navigator.share)try{const r=new Blob([e],{type:"application/vnd.chess-pgn"}),s=new File([r],n,{type:"application/vnd.chess-pgn"});return navigator.canShare&&navigator.canShare({files:[s]})?(await navigator.share({files:[s],title:"Blindfold Chess Game"}),!0):(await navigator.share({text:e,title:"Blindfold Chess Game"}),!0)}catch(r){if(r.name==="AbortError")return!1;console.warn("Share API failed, falling back to clipboard:",r)}return vk(e)}async function vk(e){try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(e),!0;const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-9999px",document.body.appendChild(t),t.select();const n=document.execCommand("copy");return document.body.removeChild(t),n}catch(t){return console.error("Failed to copy PGN to clipboard:",t),!1}}function c4(e){const t=[],n=/\d+\.\s*(\S+)(?:\s+(\S+))?/g;let r;const s=["1-0","0-1","1/2-1/2","*"];for(;(r=n.exec(e))!==null;)r[1]&&!s.includes(r[1])&&t.push(r[1]),r[2]&&!s.includes(r[2])&&t.push(r[2]);return t}function u4({game:e,open:t,onClose:n,onAnalyze:r}){const[s,o]=d.useState((e==null?void 0:e.isFavorite)??!1),[a,l]=d.useState(!1),{toast:c}=il();if(d.useEffect(()=>{e&&o(e.isFavorite)},[e]),!e||!t)return null;const u=async()=>{mn.isNativePlatform()&&await Ve.impact({style:Ue.Light});const v=await l4(e.pgn,`blindfold-vs-${e.botElo}.pgn`);c(v?{title:"PGN shared",description:"Game exported successfully"}:{title:"Share failed",description:"Could not share the game",variant:"destructive"})},f=async()=>{mn.isNativePlatform()&&await Ve.impact({style:Ue.Light}),await vk(e.pgn)?(l(!0),c({title:"Copied",description:"PGN copied to clipboard"}),setTimeout(()=>l(!1),2e3)):c({title:"Copy failed",description:"Could not copy PGN",variant:"destructive"})},h=e.result==="win"?i.jsx(Vn,{className:"h-10 w-10 text-amber-500"}):e.result==="loss"?i.jsx(ew,{className:"h-10 w-10 text-stone-400"}):i.jsx(ow,{className:"h-10 w-10 text-stone-500"}),m=e.result==="win"?"Victory":e.result==="loss"?"Defeat":"Draw",y=e.result==="win"?"text-green-600 dark:text-green-400":e.result==="loss"?"text-red-600 dark:text-red-400":"text-muted-foreground",g=new Date(e.date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),p=new Date(e.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),w=()=>{const v=c4(e.pgn);r(v)},x=async()=>{mn.isNativePlatform()&&await Ve.impact({style:Ue.Light});const v=await gk(e.id);o(v)};return i.jsxs("div",{className:"min-h-screen bg-background flex flex-col","data-testid":"history-game-report",children:[i.jsxs("header",{className:"flex items-center justify-between p-3 border-b border-border",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-history-report-back",children:i.jsx(Im,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-lg font-semibold",children:"Game Details"}),i.jsx(re,{variant:"ghost",size:"icon",onClick:x,"data-testid":"button-history-report-favorite",children:i.jsx(cw,{className:`h-5 w-5 ${s?"fill-amber-400 text-amber-400":""}`})})]}),i.jsx("div",{className:"flex-1 p-4 overflow-auto",children:i.jsx(Ye,{children:i.jsxs(et,{className:"pt-6 space-y-4",children:[i.jsxs("div",{className:"flex flex-col items-center gap-3 py-4",children:[h,i.jsx("h2",{className:`text-3xl font-bold ${y}`,children:m}),i.jsxs("p",{className:"text-lg",children:["vs ",i.jsx("span",{className:"font-semibold",children:e.botName}),i.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",e.botElo,")"]})]})]}),i.jsx(Pr,{}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Yy,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:g})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ho,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:p})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Played as"}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("div",{className:`w-4 h-4 rounded-full ${e.playerColor==="white"?"bg-white border border-stone-400":"bg-black"}`}),i.jsx("span",{className:"font-medium capitalize",children:e.playerColor})]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Moves"}),i.jsx("p",{className:"font-medium mt-1",children:e.moveCount})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Time Control"}),i.jsx("p",{className:"font-medium mt-1",children:e.timeControl})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Reconstruction Score"}),i.jsxs("p",{className:"font-medium mt-1",children:[Math.round(e.clarityScore),"%"]})]})]}),i.jsx(Pr,{}),i.jsxs(re,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:w,"data-testid":"button-history-analyze",children:[i.jsx(lw,{className:"mr-2 h-4 w-4"}),"Analyze Game"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(re,{variant:"outline",className:"flex-1",onClick:u,"data-testid":"button-history-share-pgn",children:[i.jsx(x2,{className:"mr-2 h-4 w-4"}),"Share PGN"]}),i.jsxs(re,{variant:"outline",className:"flex-1",onClick:f,"data-testid":"button-history-copy-pgn",children:[a?i.jsx(cl,{className:"mr-2 h-4 w-4"}):i.jsx(Jy,{className:"mr-2 h-4 w-4"}),a?"Copied":"Copy PGN"]})]})]})})})]})}function Ep(){const[e,t]=d.useState(null),[n,r]=d.useState(!0),[s,o]=d.useState(null),[a,l]=d.useState([]),c=d.useRef(null);if(d.useEffect(()=>{const f=sR(t),h=async()=>{try{const m=await ie.getStatus();o(m);const y=await ie.getLogs();if(y&&y.logs){const g=y.logs;l(g.slice(-10))}}catch{}};return h(),c.current=window.setInterval(h,2e3),()=>{f(),c.current&&clearInterval(c.current)}},[]),!e)return null;const u=({ok:f})=>f?i.jsx(cl,{className:"w-3 h-3 text-green-400"}):i.jsx(So,{className:"w-3 h-3 text-red-400"});return i.jsxs("div",{className:"fixed bottom-4 left-4 z-50 bg-black/90 text-white text-xs rounded-lg shadow-lg max-w-[280px]",onClick:()=>r(!n),"data-testid":"voice-debug-overlay",children:[i.jsxs("div",{className:"flex items-center gap-2 p-2 border-b border-white/20",children:[e.micListening?i.jsx(hn,{className:"w-4 h-4 text-green-400 animate-pulse"}):i.jsx(mo,{className:"w-4 h-4 text-red-400"}),i.jsx("span",{className:"font-bold",children:"Voice Debug"}),i.jsx("span",{className:"text-white/50 ml-auto",children:n?"":""})]}),n&&i.jsxs("div",{className:"p-2 space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(u,{ok:e.permissionStatus==="granted"}),i.jsxs("span",{children:["Permission: ",e.permissionStatus]})]}),i.jsx("div",{className:"text-white/50 text-[10px] mt-1 mb-1",children:"--- Native Status (polled) ---"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(u,{ok:(s==null?void 0:s.serviceBound)??!1}),i.jsxs("span",{children:["Service Bound: ",s!=null&&s.serviceBound?"Yes":"No"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(u,{ok:(s==null?void 0:s.modelReady)??!1}),i.jsxs("span",{children:["Model Ready: ",s!=null&&s.modelReady?"Yes":"No"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(u,{ok:(s==null?void 0:s.sessionActive)??!1}),i.jsxs("span",{children:["Session Active: ",s!=null&&s.sessionActive?"Yes":"No"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(u,{ok:e.micListening}),i.jsxs("span",{children:["Mic Listening: ",e.micListening?"Yes":"No"]})]}),e.lastResult&&i.jsx("div",{className:"mt-2 p-1 bg-green-900/50 rounded",children:i.jsxs("span",{className:"text-green-300",children:['Last: "',e.lastResult,'"']})}),e.lastError&&i.jsxs("div",{className:"mt-2 p-1 bg-red-900/50 rounded flex items-start gap-1",children:[i.jsx(o2,{className:"w-3 h-3 text-red-400 mt-0.5 shrink-0"}),i.jsx("span",{className:"text-red-300 break-all",children:e.lastError})]}),a.length>0&&i.jsxs("div",{className:"mt-2 p-1 bg-blue-900/50 rounded",children:[i.jsx("div",{className:"text-blue-300 text-[10px]",children:"Native Logs:"}),a.map((f,h)=>i.jsx("div",{className:"text-blue-200 text-[9px] truncate",children:f},h))]}),i.jsxs("div",{className:"text-white/30 mt-1",children:["Updated: ",new Date(e.timestamp).toLocaleTimeString()]})]})]})}const d4={p:100,n:320,b:330,r:500,q:900,k:2e4},Pp="blindfold-saved-game";function f4(e){try{localStorage.setItem(Pp,JSON.stringify(e))}catch(t){console.warn("Failed to save game state:",t)}}function h4(){try{const e=localStorage.getItem(Pp);if(e)return JSON.parse(e)}catch(e){console.warn("Failed to load saved game:",e)}return null}function tc(){try{localStorage.removeItem(Pp)}catch(e){console.warn("Failed to clear saved game:",e)}}function m4(e){if(e)return{from:e.from,to:e.to,captured:e.captured,capturedValue:e.captured?d4[e.captured]:void 0}}function p4(e){return new Promise(t=>setTimeout(t,e))}const g4={easy:{maxPeeks:Number.POSITIVE_INFINITY},medium:{maxPeeks:20},hard:{maxPeeks:10},expert:{maxPeeks:5},master:{maxPeeks:2},grandmaster:{maxPeeks:0}};function v4({historyTrigger:e,onStateChange:t,returnToTitleRef:n,onTrainNowClick:r}){const{toast:s}=il(),[o,a]=d.useState(!0),[l,c]=d.useState(null),[u,f]=d.useState(!1),[h,m]=d.useState("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"),[y,g]=d.useState([]),[p,w]=d.useState(null),[x,v]=d.useState([]),[b,k]=d.useState(null),[S,C]=d.useState("white"),[N,j]=d.useState(null),[R,T]=d.useState(300),[O,L]=d.useState(300),[B,I]=d.useState(()=>localStorage.getItem("blindfold-settings-time")||"blitz"),[D,G]=d.useState(!1),[q,P]=d.useState("medium"),[$,Z]=d.useState("empty_board"),[U,ve]=d.useState(!0),[ke,ce]=d.useState(Number.POSITIVE_INFINITY),[we,V]=d.useState(!1),W=d.useRef(null),X=d.useRef(0),[J,he]=d.useState(0),[de,Ce]=d.useState(0),He=d.useRef(!1),Ee=d.useRef(null),$e=d.useRef([]),Te=d.useRef(0),Ne=d.useRef(0),ut=d.useRef(0),vt=d.useRef(0),tn=d.useRef(0),z=d.useRef(0),H=d.useRef(0),fe=d.useRef([]),me=d.useRef(!1),le=d.useRef(null),Fe=d.useRef(1200),[Ae,Re]=d.useState(()=>gh()),[st,nn]=d.useState(()=>Ma());d.useEffect(()=>{Yi();const F=h4();F&&(Zi(F),$o(!0))},[]),d.useEffect(()=>{const F=ne=>{const ae=ne;ae.detail&&Re(ae.detail)};return window.addEventListener("blindfoldSettingsChanged",F),()=>{window.removeEventListener("blindfoldSettingsChanged",F)}},[]);const[Xe,Qt]=d.useState(null),[rn,Qn]=d.useState(!1),[In,sn]=d.useState(!1),[bt,or]=d.useState(()=>{const F=localStorage.getItem("blindfold-settings-elo");return F?Number(F):1200}),[gn,es]=d.useState(()=>localStorage.getItem("blindfold-settings-color")||"white"),[Lo,wr]=d.useState(!1),[jn,Io]=d.useState(!1),[De,gl]=d.useState(!1),[Qu,Xi]=d.useState(!1),[_,ze]=d.useState(null),[lt,$n]=d.useState(null),K=d.useRef(null),[Gs,It]=d.useState(0),Tt=d.useRef(""),[ts,vn]=d.useState(null),[Ks,Yn]=d.useState(!1),[be,$o]=d.useState(!1),[ns,Zi]=d.useState(null),[Qs,Ys]=d.useState(!1),[vl,Oo]=d.useState(null),Xn=d.useRef(null),[rs,Do]=d.useState(null),br=d.useRef(null),[Yu,$r]=d.useState(!1),[Ji,Xu]=d.useState([]),[Zu,xl]=d.useState([]),[Ju,Dt]=d.useState(null),[E,A]=d.useState(null),[M,pe]=d.useState(!1),[Se,nt]=d.useState([]),[Or,Sr]=d.useState(!1),[Tp,yl]=d.useState(null),je=d.useRef(null),Xs=d.useRef(300),Zs=d.useRef(300),Ct=d.useRef([]),on=d.useRef(null),ed=d.useRef(!1),Js=d.useRef(!1),Bo=d.useRef(null),[Rp,_p]=d.useState(!1),wl=mn.isNativePlatform();d.useEffect(()=>()=>{Si.stopAnalysis(),on.current&&clearInterval(on.current),br.current&&clearTimeout(br.current),Js.current&&(ie.stopSession().catch(()=>{}),Js.current=!1),Bo.current&&(Bo.current.remove().catch(()=>{}),Bo.current=null)},[]),d.useEffect(()=>{localStorage.setItem("blindfold-settings-elo",String(bt))},[bt]),d.useEffect(()=>{localStorage.setItem("blindfold-settings-color",gn)},[gn]),d.useEffect(()=>{localStorage.setItem("blindfold-settings-time",B)},[B]),d.useEffect(()=>{e&&e>0&&Sr(!0)},[e]),d.useEffect(()=>{je.current=l,Xs.current=R,Zs.current=O,Ct.current=y},[l,R,O,y]),d.useEffect(()=>{if(!u||N||!l||!Xe)return;const F={pgn:l.pgn(),playerColor:S,whiteTime:R,blackTime:O,timeControl:B,botElo:Xe.elo,isBlindfold:D,blindfoldDifficulty:q,remainingPeeks:ke,savedAt:Date.now()};f4(F)},[u,N,l,Xe,y,S,R,O,B,D,q,ke]);const bl=d.useCallback(()=>{tc(),on.current&&(clearInterval(on.current),on.current=null),K.current&&(clearTimeout(K.current),K.current=null),c(null),f(!1),j(null),m("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"),g([]),w(null),v([]),k(null),Qt(null),Qn(!1),V(!1),$n(null),Wt.stop(),X.current=0,he(0),Ce(0),He.current=!1,Ee.current=null,$e.current=[],Te.current=0,Ne.current=0,ut.current=0,vt.current=0,tn.current=0,z.current=0,H.current=0,fe.current=[],me.current=!1,le.current&&(clearTimeout(le.current),le.current=null),Ys(!1),Oo(null),Xn.current=null,Dt(null),A(null),Do(null),br.current&&(clearTimeout(br.current),br.current=null)},[]);d.useEffect(()=>{t&&t(Qs?"reconstruction":M?"analysis":u&&!N?"in_game":o?"idle":"setup")},[Qs,M,u,N,o,t]);const ea=d.useCallback(()=>{if(u&&je.current&&Ct.current.length>0&&!N&&Xe){on.current&&(clearInterval(on.current),on.current=null);const F=je.current.pgn()||"",ne={date:new Date().toISOString(),result:"loss",playerColor:S,botName:String(Xe.elo),botElo:Xe.elo,moveCount:Ct.current.length,pgn:F,clarityScore:0,isFavorite:!1,timeControl:B};o0(ne).then(ae=>{ae&&console.log("[Game] Saved resigned game to history:",ae)})}Wt.stop(),Ys(!1),pe(!1),$r(!1),Sr(!1),yl(null),bl(),a(!0)},[u,N,Xe,S,B,bl]);d.useEffect(()=>(n&&(n.current=ea),()=>{n&&(n.current=null)}),[ea,n]);const Fo=d.useCallback((F,ne,ae)=>{var rt;const Be=F==="draw"?"draw":F==="white_win"&&S==="white"||F==="black_win"&&S==="black"?"win":"loss",Pe=X.current===0;Xu([...$e.current]),xl([...fe.current]),nt([...Ct.current]);const Ze=Ct.current.length,te=jR(Be,X.current,de,$e.current,ne,ae,{botElo:Fe.current,wasPeekFree:Pe,totalMoves:Ze,voiceCorrections:Ne.current,voiceCommands:ut.current,reconstructionVoiceInputs:vt.current,reconstructionTouchInputs:tn.current,gameVoiceMoves:z.current,gameTouchMoves:H.current,squareInquiries:fe.current,isBlindfold:D,wasAssisted:me.current});if(nn(te),window.dispatchEvent(new CustomEvent("statsUpdated")),Ae.boardReconstructionEnabled||$r(!0),Xe&&Ze>0){const xn=((rt=je.current)==null?void 0:rt.pgn())||"",yn={date:new Date().toISOString(),result:Be,playerColor:S,botName:String(Xe.elo),botElo:Xe.elo,moveCount:Ze,pgn:xn,clarityScore:ne??0,isFavorite:!1,timeControl:B};o0(yn).then(On=>{On&&console.log("[Game] Saved game to history:",On)})}else Xe&&Ze===0&&console.log("[Game] Zero-move game detected. Not saving to history.")},[S,de,D,Xe,B]),Rt=d.useCallback(F=>{tc(),on.current&&(clearInterval(on.current),on.current=null),j(F),Wt.stop(),De&&jt(F==="draw"?"Game drawn":F==="white_win"&&S==="white"||F==="black_win"&&S==="black"?"You win!":"You lose"),Ae.boardReconstructionEnabled&&je.current?(Xn.current={result:F,fen:je.current.fen()},Oo(je.current.fen()),Do(3)):Fo(F)},[S,De,Ae.boardReconstructionEnabled,Fo]);d.useEffect(()=>{if(rs!==null)return rs>0?br.current=setTimeout(()=>{Do(F=>F!==null?F-1:null)},1e3):(Ys(!0),Do(null)),()=>{br.current&&clearTimeout(br.current)}},[rs]);const yk=d.useCallback((F,ne,ae,_e)=>{vt.current=ae,tn.current=_e,Dt(F),A(ne),Xn.current&&(Fo(Xn.current.result,F,ne),Xn.current=null)},[Fo]),wk=d.useCallback(()=>{Ys(!1),Oo(null),Xn.current=null,ea()},[ea]),bk=d.useCallback(()=>{Dt(null),A(null),Xn.current&&Fo(Xn.current.result),Ys(!1),Oo(null),Xn.current=null,$r(!0)},[Fo]),ta=d.useCallback(async(F,ne,ae,_e)=>{if(!ne)return null;Qn(!0);try{const Be=S==="white"?Zs.current:Xs.current,Pe=(ae==null?void 0:ae.length)||0,Ze=await t4(F,ne,ae,_e);if(!Ze)throw new Error("Bot failed to generate move");Ze.isBookMove&&Te.current++;let te;if(Ze.isFreeCapture)te=2e3;else if(Ae.botThinkingTimeEnabled){const rt=Math.ceil((Pe+2)/2),xn=ZA(F);te=JA(rt,xn,Be,B)}else{const rt=Math.ceil((Pe+2)/2);te=XA(rt,Be,F,S==="white"?"black":"white",_e)}return te>2e3&&sn(!0),await p4(te),sn(!1),Ze}catch(Be){return console.error("Error getting bot move:",Be),s({title:"Error",description:"Bot failed to respond",variant:"destructive"}),null}finally{Qn(!1),sn(!1)}},[s,S,Ae.botThinkingTimeEnabled,B]),Mp=async(F,ne)=>{X.current=0,Fe.current=F.elo;const ae=new Mr;c(ae),je.current=ae,m(ae.fen()),g([]),Ct.current=[],w(null),v([]),j(null),Qt(F);const _e=ne==="random"?Math.random()<.5?"white":"black":ne;C(_e);const Be=B==="practice"?99999999:B==="blitz"?300:B==="rapid"?900:1800;if(T(Be),L(Be),Xs.current=Be,Zs.current=Be,ce(D?g4[q].maxPeeks:Number.POSITIVE_INFINITY),f(!0),wr(!1),_e==="black"){const Pe=await ta(ae.fen(),F.elo);if(Pe&&je.current){const Ze=je.current.move(Pe.move);Ze&&k({from:Ze.from,to:Ze.to}),m(je.current.fen());const te=[Pe.move];g(te),Ct.current=te,Ee.current=Date.now();try{Ve.impact({style:Ue.Medium}).catch(()=>{}),setTimeout(()=>{Ve.impact({style:Ue.Medium}).catch(()=>{})},100)}catch{}if(De){const rt=Uo(Pe.move,Pe.move.includes("x"),je.current.isCheck(),!1);Tt.current=rt,jt(rt)}}}},Sk=d.useCallback(async F=>{const ne=new Mr;ne.loadPgn(F.pgn);const ae=ru(F.botElo),_e={id:`elo_${F.botElo}`,elo:F.botElo,difficulty:`elo_${Math.round(F.botElo/200)*200}`,depth:ae.depth,randomPercent:ae.randomPercent};X.current=0,Fe.current=_e.elo,he(0),Ce(0),He.current=!1,Ee.current=null,$e.current=[],Te.current=0,Ne.current=0,ut.current=0,vt.current=0,tn.current=0,z.current=0,H.current=0,fe.current=[],c(ne),je.current=ne,m(ne.fen());const Be=ne.history();g(Be),Ct.current=Be,w(null),v([]),j(null),Qt(_e),C(F.playerColor),T(F.whiteTime),L(F.blackTime),Xs.current=F.whiteTime,Zs.current=F.blackTime,I(F.timeControl),G(F.isBlindfold),P(F.blindfoldDifficulty),ce(F.remainingPeeks);const Pe=ne.history({verbose:!0});if(Pe.length>0){const rt=Pe[Pe.length-1];k({from:rt.from,to:rt.to})}a(!1),f(!0),wr(!1),tc();const Ze=ne.turn(),te=F.playerColor==="white"?"b":"w";if(Ze===te){const rt=await ta(ne.fen(),_e.elo,Be);if(rt&&je.current){const xn=je.current.move(rt.move);xn&&k({from:xn.from,to:xn.to}),m(je.current.fen());const yn=[...Ct.current,rt.move];g(yn),Ct.current=yn,Ee.current=Date.now();try{Ve.impact({style:Ue.Medium}).catch(()=>{})}catch{}if(De){const On=Uo(rt.move,rt.move.includes("x"),je.current.isCheck(),!1);Tt.current=On,jt(On)}}}},[s,ta,De]);d.useEffect(()=>{if(N!==null){on.current&&(clearInterval(on.current),on.current=null);return}if(u&&l&&B!=="practice"){const F=setInterval(()=>{l.turn()==="w"?T(ae=>{const _e=Math.max(0,ae-1);return Xs.current=_e,_e===0&&ae>0&&Rt("black_win"),_e}):L(ae=>{const _e=Math.max(0,ae-1);return Zs.current=_e,_e===0&&ae>0&&Rt("white_win"),_e})},1e3);return on.current=F,()=>{clearInterval(F),on.current=null}}},[u,l,Rt,B,N]),d.useEffect(()=>((async()=>{try{u&&D&&Ae.keepAwakeEnabled?(await nf.keepAwake(),console.log("[KeepAwake] Screen wake lock enabled for blindfold game")):(await nf.allowSleep(),console.log("[KeepAwake] Screen wake lock released"))}catch(ne){console.log("[KeepAwake] Plugin not available (web mode):",ne)}})(),()=>{nf.allowSleep().catch(()=>{})}),[u,D,Ae.keepAwakeEnabled]),d.useEffect(()=>{if(!wl||!jn||!u||!je.current||N!==null)return;let F=!1;return(async()=>{try{if(!await Fu()||F){console.warn("[NativeVoice] Voice not ready or cancelled");return}if(console.log("[NativeVoice] Starting voice session..."),Bo.current&&await Bo.current.remove(),F||(console.log("[NativeVoice] Setting up onSpeechResult listener..."),Bo.current=await ie.addListener("onSpeechResult",_e=>{console.log("[NativeVoice] *** RECEIVED onSpeechResult:",_e.text);const Be=_e.text,Pe=je.current;if(!Pe){console.log("[NativeVoice] No game ref, ignoring");return}const Ze=Be.trim();if(Ze.length<2){console.log("[NativeVoice] Too short, ignoring:",Ze);return}ut.current++,ze(Be),console.log("[NativeVoice] Processing transcript:",Be);const te=Be.toLowerCase();if(te.includes("repeat")||te.includes("say again")||te==="again"||te.includes("what was that")){Tt.current&&De?ie.speakAndListen({text:Tt.current}).catch(()=>{}):ie.startListening().catch(()=>{});return}if(Ks){if(te.includes("yes")||te.includes("confirm")||te.includes("i confirm")){Ve.impact({style:Ue.Medium}).catch(()=>{}),Yn(!1),Rt(S==="white"?"black_win":"white_win"),ze(null);return}if(te.includes("no")||te.includes("cancel")||te.includes("never mind")){Ve.impact({style:Ue.Light}).catch(()=>{}),Yn(!1),ze(null),ie.startListening().catch(()=>{});return}ie.startListening().catch(()=>{});return}if(lt){K.current&&(clearTimeout(K.current),K.current=null);const oe=Av(Be);let Y=null;if(lt.isPawnCapture&&lt.pawnFiles&&oe.file?Y=Ov(lt.candidates,oe.file):(oe.file||oe.rank)&&(Y=Lv(lt.candidates,oe)),Y){$n(null);try{const se=Pe.move(Y);if(se){z.current++,k({from:se.from,to:se.to}),m(Pe.fen());const ge=[...Ct.current,Y];if(g(ge),Ct.current=ge,Ve.impact({style:Ue.Light}).catch(()=>{}),De){const We=Uo(Y,Y.includes("x"),!1,!1);Tt.current=We,ie.speakAndListen({text:We}).catch(()=>{})}else ie.startListening().catch(()=>{});Pe.isCheckmate()?Rt(Pe.turn()==="w"?"black_win":"white_win"):Pe.isDraw()&&Rt("draw"),ze(null)}}catch(se){console.error("[NativeVoice] Disambiguation move error:",se),ie.startListening().catch(()=>{})}return}Ne.current++;const ee=lt.isPawnCapture?"I didn't catch that. Which file?":"I didn't catch that. Which piece?";De?ie.speakAndListen({text:ee}).catch(()=>{}):ie.startListening().catch(()=>{});return}const rt=te.match(/what(?:'?s| is)?\s+(?:on\s+)?([a-h])[\s-]?([1-8])/);if(rt){const oe=`${rt[1]}${rt[2]}`;D&&fe.current.push(oe);const Y=Pe.get(oe);let ee="";Y?ee=`${Y.color==="w"?"White":"Black"} ${{p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[Y.type]} on ${oe}`:ee=`${oe.toUpperCase()} is empty`,Ve.impact({style:Ue.Light}).catch(()=>{}),De?ie.speakAndListen({text:ee}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}const xn=te.match(/where\s+(?:is|are)\s+(?:my\s+)?(\w+)/);if(xn){const oe=xn[1].toLowerCase(),ee={king:"k",queen:"q",rook:"r",bishop:"b",knight:"n",pawn:"p",kings:"k",queens:"q",rooks:"r",bishops:"b",knights:"n",pawns:"p",horse:"n",horses:"n",castle:"r",castles:"r"}[oe];if(ee){const se=S==="white"?"w":"b",ge=[],We=["a","b","c","d","e","f","g","h"],Je=["1","2","3","4","5","6","7","8"];for(const ot of We)for(const dt of Je){const an=`${ot}${dt}`,qt=Pe.get(an);qt&&qt.type===ee&&qt.color===se&&ge.push(an.toUpperCase())}const Ke={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"};let ct="";ge.length===0?ct=`You have no ${Ke[ee]}`:ge.length===1?ct=`Your ${Ke[ee]} is on ${ge[0]}`:ct=`Your ${Ke[ee]}s are on ${ge.join(" and ")}`,Ve.impact({style:Ue.Light}).catch(()=>{}),De?ie.speakAndListen({text:ct}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}}if(te.includes("last move")||te.includes("previous move")||te.includes("opponent's move")){Ve.impact({style:Ue.Light}).catch(()=>{});const oe=Pe.history({verbose:!0});let Y="";if(oe.length===0)Y="No moves have been made yet";else{const ee=oe[oe.length-1],ge={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[ee.piece]||ee.piece,We=ee.captured?" takes":"",Je=ee.to.toUpperCase();ee.piece==="p"?Y=`${ee.from.toUpperCase()}${We} ${Je}`:Y=`${ge}${We} ${Je}`}De?ie.speakAndListen({text:Y}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}const yn=te.match(/legal\s+moves?\s+(?:for\s+)?(?:my\s+)?(\w+)/);if(yn){const oe=yn[1].toLowerCase(),ee={king:"k",queen:"q",rook:"r",bishop:"b",knight:"n",pawn:"p",kings:"k",queens:"q",rooks:"r",bishops:"b",knights:"n",pawns:"p",horse:"n",horses:"n",castle:"r",castles:"r"}[oe];if(ee){Ve.impact({style:Ue.Light}).catch(()=>{});const ge={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"}[ee],Je=Pe.moves({verbose:!0}).filter(ot=>ot.piece===ee),Ke=Array.from(new Set(Je.map(ot=>ot.to.toUpperCase())));let ct="";if(Ke.length===0)ct=`Your ${ge} has no legal moves`;else if(Ke.length<=4)ct=`Your ${ge} can move to ${Ke.join(", ")}`;else{const ot=Ke.slice(0,3);ct=`Your ${ge} has ${Ke.length} legal moves, including ${ot.join(", ")}`}De?ie.speakAndListen({text:ct}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}}if(te.includes("resign")||te.includes("quit")||te.includes("give up")||te.includes("i resign")){Ve.impact({style:Ue.Medium}).catch(()=>{}),Yn(!0),ze(null),De?ie.speakAndListen({text:"Resign? Say yes or no."}).catch(()=>{}):ie.startListening().catch(()=>{});return}if(te==="peek"||te==="peak"){if(ke<=0||$==="no_board"||q==="grandmaster"){De?ie.speakAndListen({text:"Peeking is not allowed"}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}Ve.impact({style:Ue.Light}).catch(()=>{}),me.current=!0,V(!0),ce(oe=>oe-1),le.current&&clearTimeout(le.current),le.current=setTimeout(()=>{V(!1),le.current=null},5e3),De?ie.speakAndListen({text:"Board visible for 5 seconds"}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}if(te.includes("clock")||te.includes("how much time")||te.includes("time left")||te.includes("remaining")){Ve.impact({style:Ue.Light}).catch(()=>{});const oe=S==="white"?R:O,Y=Math.floor(oe/60),ee=oe%60;let se="";Y>0?se=`${Y} minute${Y!==1?"s":""} and ${ee} second${ee!==1?"s":""} remaining`:se=`${ee} second${ee!==1?"s":""} remaining`,De?ie.speakAndListen({text:se}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}if(te.includes("material")){Ve.impact({style:Ue.Light}).catch(()=>{});const oe={p:1,n:3,b:3,r:5,q:9,k:0};let Y=0,ee=0;const se=Pe.board();for(const Je of se)for(const Ke of Je)if(Ke){const ct=oe[Ke.type]||0;Ke.color==="w"?Y+=ct:ee+=ct}const ge=Y-ee;let We="";ge>0?We=`White is up ${ge} point${ge!==1?"s":""}`:ge<0?We=`Black is up ${Math.abs(ge)} point${Math.abs(ge)!==1?"s":""}`:We="Material is equal",De?ie.speakAndListen({text:We}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}if(te.includes("eval")||te.includes("evaluation")){Ve.impact({style:Ue.Light}).catch(()=>{}),me.current=!0,De&&ie.speakAndListen({text:"Evaluating position"}).catch(()=>{}),Si.analyzePosition(Pe.fen(),5e5).then(oe=>{let Y="";if(oe.isMate&&oe.mateIn!==void 0)Y=oe.mateIn>0?`Mate in ${oe.mateIn} for white`:`Mate in ${Math.abs(oe.mateIn)} for black`;else{const ee=Math.abs(oe.evaluation);ee<.3?Y="Position is equal":oe.evaluation>0?Y=`White is better by ${ee.toFixed(1)}`:Y=`Black is better by ${ee.toFixed(1)}`}De?ie.speakAndListen({text:Y}).catch(()=>{}):ie.startListening().catch(()=>{})}).catch(()=>{De?ie.speakAndListen({text:"Unable to evaluate position"}).catch(()=>{}):ie.startListening().catch(()=>{})}),ze(null);return}const On=Pe.moves({verbose:!0}).map(oe=>oe.san),ht=Mv(Be,On);if(ht.move&&!ht.isAmbiguous)try{const oe=Pe.move(ht.move);if(oe){z.current++,k({from:oe.from,to:oe.to});const Y=Pe.fen();m(Y);const ee=[...Ct.current,ht.move];g(ee),Ct.current=ee,Ve.impact({style:Ue.Light}).catch(()=>{}),Pe.isCheckmate()?Rt(Pe.turn()==="w"?"black_win":"white_win"):Pe.isDraw()&&Rt("draw"),ze(null),ie.startListening().catch(()=>{})}}catch(oe){console.error("[NativeVoice] Move error:",oe),ie.startListening().catch(()=>{})}else if(ht.isAmbiguous&&ht.candidates.length>1){const oe=Dv(ht.candidates),Y=oe?$v(ht.candidates):[];let ee;if(oe&&Y.length===2){const se=Y[0].toUpperCase(),ge=Y[1].toUpperCase();ee=`Did you mean ${se} takes ${ht.targetSquare} or ${ge} takes ${ht.targetSquare}?`}else{const se=Iv(ht.candidates),ge=ht.piece==="R"?"rook":ht.piece==="N"?"knight":ht.piece==="B"?"bishop":ht.piece==="Q"?"queen":"piece";ee=se.length===2?`Two ${ge}s can move to ${ht.targetSquare}. The one on ${se[0]} or ${se[1]}?`:`Multiple ${ge}s can move to ${ht.targetSquare}. Which one?`}$n({candidates:ht.candidates,piece:ht.piece,targetSquare:ht.targetSquare,isPawnCapture:oe,pawnFiles:Y}),ze(`Clarify: ${ht.candidates.join(" or ")}`),De?ie.speakAndListen({text:ee}).catch(()=>{}):ie.startListening().catch(()=>{}),K.current=setTimeout(()=>{$n(null),ze(null),De?ie.speakAndListen({text:"Move cancelled"}).catch(()=>{}):ie.startListening().catch(()=>{})},1e4)}else ze(null),ie.startListening().catch(()=>{})}),F))return;console.log("[NativeVoice] Calling startSession..."),await ie.startSession(),Js.current=!0,Xi(!0),_p(!1),console.log("[NativeVoice] Session started - listener active, waiting for speech")}catch(ae){console.error("[NativeVoice] Setup failed, falling back to web voice:",ae),_p(!0),Js.current=!1}})(),()=>{F=!0,Js.current&&(ie.stopSession().catch(()=>{}),Js.current=!1,Xi(!1))}},[wl,jn,u,N,De,Rt]),d.useEffect(()=>{if(wl&&!Rp)return;if(!jn){Wt.stop();return}if(!u||!je.current||N!==null){Wt.stop();return}Ii.register("game"),Wt.setOnResult(async(_e,Be)=>{const Pe=je.current;if(!Pe)return;if(Be.trim().length<2){console.log("[Game] Ignoring empty/short transcript:",Be);return}ut.current++,ze(Be);const te=Be.toLowerCase();if(Ks){if(te.includes("yes")||te.includes("confirm")||te.includes("i confirm")){try{Ve.impact({style:Ue.Medium}).catch(()=>{})}catch{}Yn(!1),Rt(S==="white"?"black_win":"white_win"),ze(null);return}if(te.includes("no")||te.includes("cancel")||te.includes("never mind")){try{Ve.impact({style:Ue.Light}).catch(()=>{})}catch{}Yn(!1),ze(null);return}return}if(te.includes("repeat")||te.includes("say again")||te.includes("what was that")||te.includes("again")){Tt.current&&De&&jt(Tt.current).catch(Y=>console.warn("[Voice] Echo failed:",Y));return}const rt=te.match(/what(?:'?s| is)?\s+(?:on\s+)?([a-h])[\s-]?([1-8])/);if(rt){const Y=`${rt[1]}${rt[2]}`;D&&fe.current.push(Y);const ee=Pe.get(Y);let se="";if(ee){const ge=ee.color==="w"?"White":"Black",Je={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[ee.type]||ee.type;se=`${ge} ${Je} on ${Y}`}else se=`${Y.toUpperCase()} is empty`;De&&jt(se).catch(ge=>console.warn("[Voice] Echo failed:",ge)),ze(null);return}if(te.includes("last move")||te.includes("previous move")||te.includes("opponent's move")){try{Ve.impact({style:Ue.Light}).catch(()=>{})}catch{}const Y=Pe.history({verbose:!0});let ee="";if(Y.length===0)ee="No moves have been made yet";else{const se=Y[Y.length-1],We={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[se.piece]||se.piece,Je=se.captured?" takes":"",Ke=se.from.toUpperCase(),ct=se.to.toUpperCase();se.piece==="p"?ee=`${Ke}${Je} ${ct}`:ee=`${We}${Je} ${ct}`}De&&jt(ee).catch(se=>console.warn("[Voice] Echo failed:",se)),ze(null);return}if(/\b(how much time|what('?s| is) the time|time left|clock|my time)\b/.test(te)){try{Ve.impact({style:Ue.Light}).catch(()=>{})}catch{}const Y=S==="white"?Xs.current:Zs.current,ee=S==="white"?Zs.current:Xs.current,se=We=>{const Je=Math.floor(We/60),Ke=We%60;return Je>0&&Ke>0?`${Je} minute${Je!==1?"s":""} ${Ke} second${Ke!==1?"s":""}`:Je>0?`${Je} minute${Je!==1?"s":""}`:`${Ke} second${Ke!==1?"s":""}`},ge=`You have ${se(Y)}. Opponent has ${se(ee)}.`;De&&jt(ge).catch(We=>console.warn("[Voice] Echo failed:",We)),ze(null);return}const yn=te.match(/where(?:'?s| is| are)?\s+(?:my\s+)?(\w+)/);if(yn){const Y=yn[1].toLowerCase(),se={king:"k",kings:"k",queen:"q",queens:"q",rook:"r",rooks:"r",castle:"r",castles:"r",bishop:"b",bishops:"b",knight:"n",knights:"n",horse:"n",horses:"n",pawn:"p",pawns:"p"}[Y];if(se){try{Ve.impact({style:Ue.Light}).catch(()=>{})}catch{}const ge=S==="white"?"w":"b",Je={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"}[se],Ke=[],ct=["a","b","c","d","e","f","g","h"];for(const dt of ct)for(let an=1;an<=8;an++){const qt=`${dt}${an}`,eo=Pe.get(qt);eo&&eo.type===se&&eo.color===ge&&Ke.push(qt.toUpperCase())}let ot="";Ke.length===0?ot=`You have no ${Je}s`:Ke.length===1?ot=`Your ${Je} is on ${Ke[0]}`:ot=`You have ${Je}s on ${Ke.slice(0,-1).join(", ")} and ${Ke[Ke.length-1]}`,De&&jt(ot).catch(dt=>console.warn("[Voice] Echo failed:",dt)),ze(null);return}}if(te.includes("material")){try{Ve.impact({style:Ue.Light}).catch(()=>{})}catch{}const Y={p:1,n:3,b:3,r:5,q:9},ee={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen"},se={p:0,n:0,b:0,r:0,q:0},ge={p:0,n:0,b:0,r:0,q:0},We=["a","b","c","d","e","f","g","h"];for(const ot of We)for(let dt=1;dt<=8;dt++){const an=`${ot}${dt}`,qt=Pe.get(an);qt&&qt.type!=="k"&&(qt.color==="w"?se[qt.type]++:ge[qt.type]++)}const Je={};let Ke=0;for(const ot of["q","r","b","n","p"]){const dt=se[ot]-ge[ot];dt!==0&&(Je[ot]=dt,Ke+=dt*Y[ot])}let ct="";if(Ke===0)ct="Material is equal";else{const ot=Ke>0?"White":"Black",dt=Math.abs(Ke),an=[];for(const qt of["q","r","b","n","p"]){const eo=Ke>0?Je[qt]:-(Je[qt]||0);if(eo&&eo>0){const Ip=eo,$p=ee[qt];an.push(Ip===1?`a ${$p}`:`${Ip} ${$p}s`)}}if(an.length>0){const qt=an.length===1?an[0]:`${an.slice(0,-1).join(", ")} and ${an[an.length-1]}`;ct=`${ot} is up ${qt}`}else ct=`${ot} is up by ${dt} point${dt!==1?"s":""}`}De&&jt(ct).catch(ot=>console.warn("[Voice] Echo failed:",ot)),ze(null);return}const On=te.match(/legal\s+moves?\s+(?:for\s+)?(?:my\s+)?(\w+)/);if(On){const Y=On[1].toLowerCase(),se={king:"k",queen:"q",rook:"r",bishop:"b",knight:"n",pawn:"p",kings:"k",queens:"q",rooks:"r",bishops:"b",knights:"n",pawns:"p",horse:"n",horses:"n",castle:"r",castles:"r"}[Y];if(se){try{Ve.impact({style:Ue.Light}).catch(()=>{})}catch{}const We={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"}[se],Ke=Pe.moves({verbose:!0}).filter(dt=>dt.piece===se),ct=Array.from(new Set(Ke.map(dt=>dt.to.toUpperCase())));let ot="";if(ct.length===0)ot=`Your ${We} has no legal moves`;else if(ct.length<=4)ot=`Your ${We} can move to ${ct.join(", ")}`;else{const dt=ct.slice(0,3);ot=`Your ${We} has ${ct.length} legal moves, including ${dt.join(", ")}`}De&&jt(ot).catch(dt=>console.warn("[Voice] Echo failed:",dt)),ze(null);return}}if(te.includes("resign")||te.includes("quit")||te.includes("give up")||te.includes("i resign")){try{Ve.impact({style:Ue.Medium}).catch(()=>{})}catch{}Yn(!0),ze(null);return}if(te==="peek"||te==="peak"){if($==="no_board"||q==="grandmaster"){De&&jt("Peeking is not allowed in this mode").catch(Y=>console.warn("[Voice] Echo failed:",Y)),ze(null);return}try{Ve.impact({style:Ue.Light}).catch(()=>{})}catch{}me.current=!0,V(!0),le.current&&clearTimeout(le.current),le.current=setTimeout(()=>{V(!1),le.current=null},5e3),De&&jt("Board visible for 5 seconds").catch(Y=>console.warn("[Voice] Echo failed:",Y)),ze(null);return}if(te.includes("eval")||te.includes("evaluation")){try{Ve.impact({style:Ue.Light}).catch(()=>{})}catch{}me.current=!0,De&&(async()=>{try{const Y=await Si.getBestMove(Pe.fen(),{depth:12});let ee="";if(Y.evaluation!==void 0){const se=Y.evaluation,ge=se>=0?"plus":"minus",We=Math.abs(se).toFixed(1);Math.abs(se)>=100?ee=se>0?"White has checkmate":"Black has checkmate":Math.abs(se)<.3?ee="Position is equal":ee=`Evaluation is ${ge} ${We}`}else ee="Unable to evaluate position";await jt(ee)}catch(Y){console.warn("[Voice] Eval failed:",Y),jt("Unable to evaluate position").catch(()=>{})}})(),ze(null);return}if(lt){K.current&&(clearTimeout(K.current),K.current=null);const Y=Av(Be);let ee=null;if(lt.isPawnCapture&&lt.pawnFiles&&Y.file?ee=Ov(lt.candidates,Y.file):(Y.file||Y.rank)&&(ee=Lv(lt.candidates,Y)),ee){if($n(null),De){const We=Uo(ee,ee.includes("x"),!1,!1);Tt.current=We,jt(We).catch(Je=>console.warn("[Voice] Echo failed:",Je))}if(!je.current)return;const ge=je.current.move(ee);if(ge){z.current++,m(je.current.fen()),k({from:ge.from,to:ge.to});const We=[...Ct.current,ge.san];if(g(We),Ct.current=We,w(null),v([]),ze(null),je.current.isCheckmate()){const Je=je.current.turn()==="w"?"black_win":"white_win";Rt(Je)}else(je.current.isDraw()||je.current.isStalemate()||je.current.isThreefoldRepetition()||je.current.isInsufficientMaterial())&&Rt("draw")}return}Ne.current++;const se=lt.isPawnCapture?"I didn't catch that. Which file?":"I didn't catch that. Which piece?";De&&jt(se).catch(ge=>console.warn("[Voice] Echo failed:",ge)),K.current=setTimeout(async()=>{$n(null),ze(null),De&&jt("Move cancelled").catch(ge=>console.warn("[Voice] Echo failed:",ge))},1e4);return}const ht=Pe.moves(),oe=Mv(Be,ht);if(oe.move){if(De){const ee=Uo(oe.move,oe.move.includes("x"),!1,!1);Tt.current=ee,jt(ee).catch(se=>console.warn("[Voice] Echo failed:",se))}if(!je.current)return;const Y=je.current.move(oe.move);if(Y){if(Ee.current!==null){const se=Date.now()-Ee.current;$e.current.push(se),Ee.current=null}if(D){if(!He.current){const se=J+1;he(se),se>de&&Ce(se)}He.current=!1}z.current++;try{Ve.impact({style:Ue.Light}).catch(()=>{})}catch{}m(je.current.fen()),k({from:Y.from,to:Y.to});const ee=[...Ct.current,Y.san];if(g(ee),Ct.current=ee,w(null),v([]),ze(null),je.current.isCheckmate()){const se=je.current.turn()==="w"?"black_win":"white_win";Rt(se)}else(je.current.isDraw()||je.current.isStalemate()||je.current.isThreefoldRepetition()||je.current.isInsufficientMaterial())&&Rt("draw")}}else if(oe.isAmbiguous&&oe.candidates.length>1){const Y=Dv(oe.candidates),ee=Y?$v(oe.candidates):[];let se;if(Y&&ee.length===2){const ge=ee[0].toUpperCase(),We=ee[1].toUpperCase();se=`Did you mean ${ge} takes ${oe.targetSquare} or ${We} takes ${oe.targetSquare}?`}else{const ge=Iv(oe.candidates),We=oe.piece==="R"?"rook":oe.piece==="N"?"knight":oe.piece==="B"?"bishop":oe.piece==="Q"?"queen":"piece";se=ge.length===2?`Two ${We}s can move to ${oe.targetSquare}. The one on ${ge[0]} or ${ge[1]}?`:`Multiple ${We}s can move to ${oe.targetSquare}. Which one?`}$n({candidates:oe.candidates,piece:oe.piece,targetSquare:oe.targetSquare,isPawnCapture:Y,pawnFiles:ee}),ze(`Clarify: ${oe.candidates.join(" or ")}`),De&&jt(se).catch(ge=>console.warn("[Voice] Echo failed:",ge)),K.current=setTimeout(async()=>{$n(null),ze(null),De&&jt("Move cancelled").catch(ge=>console.warn("[Voice] Echo failed:",ge))},1e4)}else Ne.current++,s({title:"Didn't understand",description:`Heard: "${Be}". Try again.`,variant:"destructive"}),It(Y=>Y+1)}),Wt.setOnListeningChange(Xi);const F=je.current,ne=F.turn();if((ne==="w"&&S==="white"||ne==="b"&&S==="black")&&!rn&&!ts&&N===null&&!ed.current){const _e=F.moves();Wt.setLegalMoves(_e),Wt.start(),Wt.getMuted()&&Wt.resumeLoop()}else N!==null&&Wt.stop();return()=>{Wt.reset(),Ii.clearProtectedLane(),K.current&&(clearTimeout(K.current),K.current=null)}},[jn,u,h,S,rn,ts,N,De,s,Rt,lt,Gs,Ks,Rp]),d.useEffect(()=>{if(!Xe||!je.current||N!==null)return;const F=je.current,ne=F.turn();if((ne==="w"&&S==="black"||ne==="b"&&S==="white")&&u&&!rn){const _e=F.history(),Be=F.fen(),Pe=b?m4({from:b.from,to:b.to}):void 0;ta(Be,Xe.elo,_e,Pe).then(async Ze=>{if(Ze&&je.current){const te=je.current.move(Ze.move);te&&k({from:te.from,to:te.to});const rt=je.current.fen();m(rt);const xn=[...Ct.current,Ze.move];g(xn),Ct.current=xn,Ee.current=Date.now();try{Ve.impact({style:Ue.Medium}).catch(()=>{}),setTimeout(()=>{Ve.impact({style:Ue.Medium}).catch(()=>{})},100)}catch{}if(De){const yn=je.current.isCheck(),On=je.current.isCheckmate(),ht=Ze.move.includes("x"),oe=Uo(Ze.move,ht,yn,On);if(Tt.current=oe,wl&&Js.current&&jn)try{await ie.speakAndListen({text:oe})}catch(Y){console.error("[NativeVoice] TTS error:",Y)}else{ed.current=!0;try{await jt(oe)}catch(Y){console.error("[Voice] TTS error:",Y)}finally{ed.current=!1}}}if(je.current.isCheckmate()){const yn=je.current.turn()==="w"?"black_win":"white_win";Rt(yn)}else(je.current.isDraw()||je.current.isStalemate()||je.current.isThreefoldRepetition()||je.current.isInsufficientMaterial())&&Rt("draw")}})}},[h,Xe,S,u,rn,N,De,jn,ta,Rt,b]);const Sl=F=>{if(F>=99999)return"";const ne=Math.floor(F/60),ae=F%60;return`${ne}:${ae.toString().padStart(2,"0")}`},kk=(F,ne)=>{if(!l)return!1;const ae=l.get(F);if(!ae||ae.type!=="p")return!1;const _e=ne[1];return ae.color==="w"&&_e==="8"||ae.color==="b"&&_e==="1"},Ap=async(F,ne,ae="q")=>{if(l)try{const _e=l.move({from:F,to:ne,promotion:ae});if(_e){if(H.current++,Ee.current!==null){const Ze=Date.now()-Ee.current;$e.current.push(Ze),Ee.current=null}if(D){if(!He.current){const Ze=J+1;he(Ze),Ze>de&&Ce(Ze)}He.current=!1}const Be=l.fen();m(Be),k({from:_e.from,to:_e.to});const Pe=[...Ct.current,_e.san];g(Pe),Ct.current=Pe,w(null),v([]),l.isCheckmate()?Rt(l.turn()==="w"?"black_win":"white_win"):(l.isDraw()||l.isStalemate()||l.isThreefoldRepetition()||l.isInsufficientMaterial())&&Rt("draw")}}catch(_e){console.error("Invalid move:",_e)}},Nk=d.useCallback(F=>{if(!(!l||N||!(l.turn()==="w"&&S==="white"||l.turn()==="b"&&S==="black")))if(p)if(x.includes(F))kk(p,F)?vn({from:p,to:F}):Ap(p,F);else{const ae=l.get(F);if(ae&&(ae.color==="w"&&S==="white"||ae.color==="b"&&S==="black")){w(F);const _e=l.moves({square:F,verbose:!0});v(_e.map(Be=>Be.to))}else w(null),v([])}else{const ae=l.get(F);if(ae&&(ae.color==="w"&&S==="white"||ae.color==="b"&&S==="black")){w(F);const _e=l.moves({square:F,verbose:!0});v(_e.map(Be=>Be.to))}}},[l,N,S,p,x]),Lp=()=>{ke<=0||(V(!0),W.current=Date.now(),He.current=!0,he(0))},kl=()=>{if(we&&ke>0&&(ce(F=>F-1),W.current)){const F=Date.now()-W.current;X.current+=F}V(!1),W.current=null};if(Tp)return i.jsx(u4,{game:Tp,open:!0,onClose:()=>{yl(null),Sr(!0)},onAnalyze:F=>{nt(F),yl(null),Sr(!1),pe(!0)}});if(Or)return i.jsx(a4,{onBack:()=>Sr(!1),onViewGame:F=>{yl(F)}});if(M&&Se.length>0)return i.jsx(s0,{moveHistory:Se,playerColor:S,gameResult:N,botElo:bt,onClose:()=>{pe(!1),a(!0)}});if(o)return i.jsxs("div",{className:"h-full w-full flex flex-col items-center relative overflow-hidden bg-white","data-testid":"screen-title",children:[i.jsx("img",{src:kA,alt:"Blindfold Chess",className:"absolute inset-0 w-full h-full object-contain object-center z-0"}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-1 p-4 pt-2 w-full",children:[i.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-black text-center tracking-tight","data-testid":"text-title",children:"Blindfold Chess"}),i.jsx("p",{className:"text-black/70 text-center text-sm md:text-base",children:"Train your visualization and memory"})]}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 p-4 pb-4 w-full max-w-sm",children:[i.jsxs(re,{size:"lg",variant:"ghost",className:"w-full text-base py-4 bg-amber-400 hover:bg-amber-500 text-stone-900 border border-amber-500 dark:bg-black dark:hover:bg-black/90 dark:text-white dark:border-black",onClick:()=>r==null?void 0:r(),"data-testid":"button-train-now",children:[i.jsx(tw,{className:"mr-2 h-5 w-5"}),"Train Now"]}),i.jsxs(re,{size:"lg",variant:"ghost",className:"w-full text-base py-4 bg-amber-400 hover:bg-amber-500 text-stone-900 border border-amber-500 dark:bg-black dark:hover:bg-black/90 dark:text-white dark:border-black",onClick:()=>a(!1),"data-testid":"button-start-now",children:[i.jsx(tv,{className:"mr-2 h-5 w-5"}),"Play Now"]})]})]});if(!u){const F=async()=>{const ne=ru(bt),ae={id:`elo_${bt}`,elo:bt,difficulty:`elo_${Math.round(bt/200)*200}`,depth:ne.depth,randomPercent:ne.randomPercent};try{await Ve.impact({style:Ue.Heavy})}catch{}wr(!0),setTimeout(()=>{Mp(ae,gn)},200)};return i.jsxs("div",{className:`h-full flex flex-col max-w-lg mx-auto px-4 py-2 transition-opacity duration-200 ${Lo?"opacity-0":"opacity-100"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:()=>a(!0),"data-testid":"button-setup-back",children:i.jsx(Rs,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Game Set-up"})]}),i.jsxs(Ye,{className:"flex flex-col",children:[i.jsxs(et,{className:"overflow-y-auto pt-4 pb-2 space-y-3",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(dn,{htmlFor:"blindfold-toggle",children:"Blindfold Challenge"}),i.jsx(fr,{id:"blindfold-toggle",checked:D,onCheckedChange:G,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-blindfold"})]}),D&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(dn,{children:"Blindfold Difficulty"}),i.jsxs(Xv,{value:q,onValueChange:ne=>P(ne),children:[i.jsx(jh,{"data-testid":"select-blindfold-difficulty",children:i.jsx(Zv,{})}),i.jsxs(Eh,{children:[i.jsx(Nr,{value:"easy",children:"Easy (Unlimited Peeks)"}),i.jsx(Nr,{value:"medium",children:"Medium (20 Peeks)"}),i.jsx(Nr,{value:"hard",children:"Hard (10 Peeks)"}),i.jsx(Nr,{value:"expert",children:"Expert (5 Peeks)"}),i.jsx(Nr,{value:"master",children:"Master (2 Peeks)"}),i.jsx(Nr,{value:"grandmaster",children:"Grandmaster (No Peeks)"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(dn,{children:"Display Mode"}),i.jsxs(Xv,{value:$,onValueChange:ne=>{const ae=ne;Z(ae),ae==="no_board"&&(ve(!1),Io(!0),gl(!0))},children:[i.jsx(jh,{"data-testid":"select-blindfold-display",children:i.jsx(Zv,{})}),i.jsxs(Eh,{children:[i.jsx(Nr,{value:"empty_board",children:"Empty Board"}),i.jsx(Nr,{value:"black_overlay",children:"Black Overlay"}),i.jsx(Nr,{value:"no_board",children:"No Board"})]})]})]}),$!=="no_board"&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(dn,{htmlFor:"coordinates-toggle",children:"Show Coordinates (1-8, a-h)"}),i.jsx(fr,{id:"coordinates-toggle",checked:U,onCheckedChange:ve,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-coordinates"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(dn,{htmlFor:"reconstruction-toggle",className:"text-sm",children:"Board Reconstruction Challenge"}),i.jsx(fr,{id:"reconstruction-toggle",checked:Ae.boardReconstructionEnabled,onCheckedChange:ne=>{const ae={...Ae,boardReconstructionEnabled:ne};Re(ae),vh(ae)},className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-board-reconstruction"})]}),Ae.boardReconstructionEnabled&&i.jsx("p",{className:"text-xs text-muted-foreground",children:"After each game, reconstruct the final position to test your memory."}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4"}),i.jsx(dn,{htmlFor:"voice-input",children:"Voice Input"})]}),i.jsx(fr,{id:"voice-input",checked:jn,onCheckedChange:Io,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-voice-input"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($m,{className:"h-4 w-4"}),i.jsx(dn,{htmlFor:"voice-output",children:"Voice Output"})]}),i.jsx(fr,{id:"voice-output",checked:De,onCheckedChange:gl,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-voice-output"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex flex-col gap-0.5",children:[i.jsx(dn,{htmlFor:"bot-thinking-toggle",className:"text-sm",children:"Bot Thinking Time"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"Human-like delays"})]}),i.jsx(fr,{id:"bot-thinking-toggle",checked:Ae.botThinkingTimeEnabled,onCheckedChange:ne=>{const ae={...Ae,botThinkingTimeEnabled:ne};Re(ae),vh(ae)},className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-bot-thinking-time"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(dn,{children:"Time Control"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs(re,{variant:"outline",size:"sm",className:B==="blitz"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>I("blitz"),"data-testid":"button-time-blitz",children:[i.jsx(ho,{className:"mr-1 h-3 w-3"}),"5 min"]}),i.jsxs(re,{variant:"outline",size:"sm",className:B==="rapid"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>I("rapid"),"data-testid":"button-time-rapid",children:[i.jsx(ho,{className:"mr-1 h-3 w-3"}),"15 min"]}),i.jsxs(re,{variant:"outline",size:"sm",className:B==="classical"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>I("classical"),"data-testid":"button-time-classical",children:[i.jsx(ho,{className:"mr-1 h-3 w-3"}),"30 min"]}),i.jsxs(re,{variant:"outline",size:"sm",className:B==="practice"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>I("practice"),"data-testid":"button-time-practice",children:[i.jsx(f2,{className:"mr-1 h-3 w-3"}),"Practice"]})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(dn,{children:"Bot Rating"}),i.jsxs("span",{className:"text-sm font-medium text-amber-600 dark:text-amber-400",children:[bt," - ",xR(bt)]})]}),i.jsx(ek,{value:[bt],onValueChange:ne=>or(ne[0]),min:400,max:2600,step:50,className:"w-full","data-testid":"slider-bot-elo"}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[i.jsx("span",{children:"400"}),i.jsx("span",{children:"1000"}),i.jsx("span",{children:"1600"}),i.jsx("span",{children:"2200"}),i.jsx("span",{children:"2600"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(dn,{children:"Your Color"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs(re,{variant:"outline",size:"sm",className:gn==="white"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>es("white"),"data-testid":"button-color-white",children:[i.jsx("div",{className:"w-4 h-4 rounded-full bg-white border border-gray-400 mr-1"}),"White"]}),i.jsxs(re,{variant:"outline",size:"sm",className:gn==="black"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>es("black"),"data-testid":"button-color-black",children:[i.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-900 mr-1"}),"Black"]}),i.jsxs(re,{variant:"outline",size:"sm",className:gn==="random"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>es("random"),"data-testid":"button-color-random",children:[i.jsx(y2,{className:"w-4 h-4 mr-1"}),"Random"]})]})]})]}),i.jsx("div",{className:"p-4 pt-2 border-t",children:i.jsxs(re,{size:"lg",className:"w-full bg-amber-400 hover:bg-amber-500 text-stone-900 border border-black",onClick:F,"data-testid":"button-start-game",children:[i.jsx(tv,{className:"mr-2 h-5 w-5"}),"Start Game"]})})]})]})}return i.jsxs("div",{className:"h-[100dvh] w-full flex flex-col overflow-hidden animate-in fade-in duration-300",children:[i.jsx(Ep,{}),Qs&&vl&&i.jsx("div",{className:"mb-3",children:i.jsx(MA,{actualFen:vl,playerColor:S,onComplete:yk,onSkip:bk,onContinue:wk,onViewReport:()=>$r(!0)})}),i.jsx(IA,{open:Yu&&!M,gameResult:N,playerColor:S,clarityScore:st.lastClarityScore,responseTimes:Ji,squareInquiries:Zu,reconstructionScore:Ju,reconstructionVoicePurity:E,reconstructionEnabled:Ae.boardReconstructionEnabled,onRematch:()=>{if(Xe){const F=S==="white"?"black":"white";$r(!1),pe(!1),bl(),setTimeout(()=>Mp(Xe,F),100)}},onMainMenu:()=>{$r(!1),pe(!1),bl(),ea()},onAnalyze:()=>{pe(!0)}}),M&&Se.length>0&&i.jsx(s0,{moveHistory:Se,playerColor:S,gameResult:N,botElo:bt,onClose:()=>pe(!1)}),!Qs&&i.jsxs("main",{className:"absolute inset-0 flex flex-col p-2 md:p-4 max-w-4xl mx-auto w-full overflow-hidden",children:[i.jsx(Ye,{className:`flex-none lg:hidden ${l&&(S==="white"&&l.turn()==="b"||S==="black"&&l.turn()==="w")?"ring-2 ring-amber-400":""}`,children:i.jsx(et,{className:"py-2 px-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${S==="white"?"bg-black":"bg-white border border-gray-400"}`}),i.jsx(Jg,{className:"h-4 w-4 text-amber-500"}),i.jsx("span",{className:"font-medium text-sm",children:Xe?`${Xe.elo} Elo Bot`:"Bot"}),rn&&i.jsx("span",{className:`text-xs animate-pulse ${In?"text-amber-500 font-medium":"text-primary"}`,children:In?"Thinking...":"thinking..."})]}),i.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(S==="white"&&l.turn()==="b"||S==="black"&&l.turn()==="w")?"text-foreground":"text-muted-foreground"}`,children:Sl(S==="white"?O:R)})]})})}),i.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-2 min-h-0 overflow-hidden",children:[i.jsxs("div",{className:"flex-1 flex flex-col gap-2 min-h-0 overflow-hidden",children:[i.jsx(Ye,{className:`hidden lg:block flex-none ${l&&(S==="white"&&l.turn()==="b"||S==="black"&&l.turn()==="w")?"ring-2 ring-amber-400":""}`,children:i.jsx(et,{className:"py-2 px-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${S==="white"?"bg-black":"bg-white border border-gray-400"}`}),i.jsx(Jg,{className:"h-4 w-4 text-amber-500"}),i.jsx("span",{className:"font-medium text-sm","data-testid":"text-opponent-name",children:Xe?`${Xe.elo} Elo Bot`:"Bot"}),rn&&i.jsx("span",{className:`text-xs animate-pulse ${In?"text-amber-500 font-medium":"text-primary"}`,"data-testid":"text-bot-thinking",children:In?"Thinking...":"thinking..."})]}),i.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(S==="white"&&l.turn()==="b"||S==="black"&&l.turn()==="w")?"text-foreground":"text-muted-foreground"}`,"data-testid":"text-opponent-time",children:Sl(S==="white"?O:R)})]})})}),i.jsx("div",{className:"flex-1 flex items-center justify-center min-h-0 overflow-hidden",children:i.jsx(Ye,{className:`aspect-square max-h-full max-w-full md:max-w-[600px] p-1 md:p-2 ${D&&$==="no_board"&&!we?"invisible":""}`,children:i.jsxs("div",{className:"relative w-full h-full",children:[i.jsx(rM,{fen:h,orientation:S,showCoordinates:D&&U,highlightedSquares:x,lastMove:b||void 0,onSquareClick:Nk,noCard:!0}),rs!==null&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 z-50","data-testid":"overlay-reconstruction-countdown","aria-live":"polite",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-8xl md:text-9xl font-bold text-amber-400 animate-pulse","data-testid":"text-countdown-number",children:rs}),i.jsx("div",{className:"text-lg md:text-xl text-white mt-4 font-medium",children:"Memorize the position..."})]})}),D&&!we&&$==="empty_board"&&i.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-visible",children:i.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((F,ne)=>{const ae=Math.floor(ne/8),_e=ne%8,Be=(ae+_e)%2===0,Pe=S==="white"?["a","b","c","d","e","f","g","h"]:["h","g","f","e","d","c","b","a"],Ze=S==="white"?["8","7","6","5","4","3","2","1"]:["1","2","3","4","5","6","7","8"],te=_e===0,rt=ae===7;return i.jsxs("div",{className:`relative ${Be?"bg-amber-100":"bg-amber-700"}`,children:[U&&te&&i.jsx("span",{className:`absolute bottom-0.5 left-1 text-xs font-semibold select-none ${Be?"text-amber-800/70":"text-amber-100/70"}`,children:Ze[ae]}),U&&rt&&i.jsx("span",{className:`absolute bottom-0.5 right-1 text-xs font-semibold select-none ${Be?"text-amber-800/70":"text-amber-100/70"}`,children:Pe[_e]})]},ne)})})}),D&&!we&&$==="black_overlay"&&i.jsxs("div",{className:"absolute inset-0 bg-black pointer-events-none overflow-visible",children:[i.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 8 8",preserveAspectRatio:"none",children:[Array.from({length:9}).map((F,ne)=>i.jsx("line",{x1:"0",y1:ne,x2:"8",y2:ne,stroke:"white",strokeWidth:"0.02"},`h-${ne}`)),Array.from({length:9}).map((F,ne)=>i.jsx("line",{x1:ne,y1:"0",x2:ne,y2:"8",stroke:"white",strokeWidth:"0.02"},`v-${ne}`))]}),U&&i.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((F,ne)=>{const ae=Math.floor(ne/8),_e=ne%8,Be=S==="white"?["a","b","c","d","e","f","g","h"]:["h","g","f","e","d","c","b","a"],Pe=S==="white"?["8","7","6","5","4","3","2","1"]:["1","2","3","4","5","6","7","8"],Ze=_e===0,te=ae===7;return i.jsxs("div",{className:"relative",children:[Ze&&i.jsx("span",{className:"absolute bottom-0.5 left-1 text-xs font-semibold select-none text-white/70",children:Pe[ae]}),te&&i.jsx("span",{className:"absolute bottom-0.5 right-1 text-xs font-semibold select-none text-white/70",children:Be[_e]})]},ne)})})]})]})})}),i.jsx(Ye,{className:`flex-none hidden lg:flex ${l&&(S==="white"&&l.turn()==="w"||S==="black"&&l.turn()==="b")?"ring-2 ring-amber-400":""}`,children:i.jsx(et,{className:"py-2 px-4 w-full",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${S==="white"?"bg-white border border-gray-400":"bg-black"}`}),i.jsx("span",{className:"font-medium text-sm","data-testid":"text-player-name",children:"You"})]}),i.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(S==="white"&&l.turn()==="w"||S==="black"&&l.turn()==="b")?"text-foreground":"text-muted-foreground"}`,"data-testid":"text-player-time",children:Sl(S==="white"?R:O)})]})})})]}),i.jsxs("div",{className:"flex flex-col gap-2 lg:w-48 flex-none",children:[D&&q!=="grandmaster"&&i.jsxs(re,{variant:we?"default":"outline",className:`w-full ${we?"bg-amber-400 hover:bg-amber-500 text-black":""}`,onMouseDown:Lp,onMouseUp:kl,onMouseLeave:kl,onTouchStart:Lp,onTouchEnd:kl,onTouchCancel:kl,disabled:ke<=0,"data-testid":"button-peek",children:[i.jsx(nw,{className:"mr-2 h-4 w-4"}),we?"Peeking...":"Hold to Peek"]}),D&&i.jsx("div",{className:"text-center text-sm text-muted-foreground","data-testid":"text-peeks-remaining",children:isFinite(ke)?`${ke} peeks left`:"Unlimited peeks"}),D&&i.jsxs("div",{className:"text-center text-sm","data-testid":"text-peek-free-streak",children:[i.jsx("span",{className:"text-muted-foreground",children:"Streak: "}),i.jsx("span",{className:"font-semibold text-amber-500",children:J}),de>0&&i.jsxs("span",{className:"text-muted-foreground/70 text-xs ml-1",children:["(best: ",de,")"]})]}),jn&&i.jsx("div",{className:"flex items-center justify-center gap-2 text-sm",children:lt?i.jsxs(i.Fragment,{children:[i.jsx(hn,{className:"h-4 w-4 text-amber-500 animate-pulse"}),i.jsx("span",{className:"text-amber-500",children:"Which piece?"})]}):Qu?i.jsxs(i.Fragment,{children:[i.jsx(hn,{className:"h-4 w-4 text-primary animate-pulse"}),i.jsx("span",{className:"text-primary",children:"Listening..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(mo,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-muted-foreground",children:"Voice paused"})]})}),_&&i.jsx("div",{className:`text-xs text-center ${lt?"text-amber-500 font-medium":"text-muted-foreground"}`,children:lt?_:`Heard: "${_}"`}),i.jsx(Ye,{className:`lg:hidden ${l&&(S==="white"&&l.turn()==="w"||S==="black"&&l.turn()==="b")?"ring-2 ring-amber-400":""}`,children:i.jsx(et,{className:"py-2 px-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${S==="white"?"bg-white border border-gray-400":"bg-black"}`}),i.jsx("span",{className:"font-medium text-sm",children:"You"})]}),i.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(S==="white"&&l.turn()==="w"||S==="black"&&l.turn()==="b")?"text-foreground":"text-muted-foreground"}`,children:Sl(S==="white"?R:O)})]})})}),i.jsx(Ye,{className:"flex-none",children:i.jsx(et,{className:"p-2",children:i.jsx(Cp,{className:"h-16 lg:h-48",children:i.jsx("div",{className:"text-xs font-mono space-y-1",children:y.map((F,ne)=>i.jsxs("span",{className:ne%2===0?"font-semibold":"",children:[ne%2===0&&i.jsxs("span",{className:"text-muted-foreground",children:[Math.floor(ne/2)+1,". "]}),F," "]},ne))})})})}),!N&&i.jsxs(re,{variant:"outline",size:"sm",className:"w-full text-red-600 border-red-300 hover:bg-red-50",onClick:()=>Yn(!0),"data-testid":"button-resign",children:[i.jsx(Mu,{className:"mr-2 h-4 w-4"}),"Resign"]})]})]})]}),i.jsx(oM,{open:!!ts,color:S,onSelect:F=>{ts&&(Ap(ts.from,ts.to,F),vn(null))}}),i.jsx(Po,{open:Ks,onOpenChange:Yn,children:i.jsxs(Ls,{children:[i.jsxs(Is,{children:[i.jsx(Os,{children:"Resign Game?"}),i.jsx(Ds,{children:"Are you sure you want to resign? This will count as a loss."})]}),i.jsxs($s,{children:[i.jsx(Fs,{"data-testid":"button-resign-cancel",children:"Cancel"}),i.jsx(Bs,{className:"bg-red-600 hover:bg-red-700",onClick:()=>{Rt(S==="white"?"black_win":"white_win"),Yn(!1)},"data-testid":"button-resign-confirm",children:"Resign"})]})]})}),i.jsx(Po,{open:be,onOpenChange:$o,children:i.jsxs(Ls,{children:[i.jsxs(Is,{children:[i.jsx(Os,{children:"Resume Game?"}),i.jsxs(Ds,{children:["You have an unfinished game",ns?` (${ns.playerColor==="white"?"White":"Black"} vs ${ns.botElo} Elo)`:"",". Would you like to continue?"]})]}),i.jsxs($s,{children:[i.jsx(Fs,{"data-testid":"button-resume-cancel",onClick:()=>{tc(),Zi(null),$o(!1)},children:"New Game"}),i.jsx(Bs,{onClick:()=>{ns&&(Sk(ns),Zi(null)),$o(!1)},"data-testid":"button-resume-confirm",children:"Resume"})]})]})})]})}const lo=mn.isNativePlatform();async function yt(e){if(lo)try{await ie.speakAndListen({text:e})}catch(t){console.error("[Training] speakAndListen error:",t)}else await jt(e)}const du=["a","b","c","d","e","f","g","h"],xk=["1","2","3","4","5","6","7","8"];function Ah(e,t){return`${e==="a"?"ay":e} ${t}`}function x4(e,t){return(e+t)%2===0}function co(){const e=Math.floor(Math.random()*8),t=Math.floor(Math.random()*8);return{file:du[e],rank:xk[t],fileIndex:e,rankIndex:t}}function kc(e){const t=Math.floor(e/1e3),n=Math.floor(e%1e3/100);return`${t}.${n}s`}function y4({onBack:e,onStateChange:t,returnToMenuRef:n}){const[r,s]=d.useState("menu"),[o,a]=d.useState(null),[l,c]=d.useState("ready");d.useEffect(()=>{ou().then(a)},[r]),d.useEffect(()=>{r==="menu"?t==null||t("menu"):t==null||t(l)},[r,l,t]),d.useEffect(()=>(n&&(n.current=()=>{s("menu"),c("ready")}),()=>{n&&(n.current=null)}),[n]);const u=async(f,h,m)=>{await $R(f,h,m),a(await ou()),window.dispatchEvent(new CustomEvent("trainingStatsUpdated"))};return r==="color_blitz"?i.jsx(w4,{onBack:()=>s("menu"),onComplete:(f,h)=>u("color_blitz",f,h),stats:o,onGameStateChange:c}):r==="coordinate_sniper"?i.jsx(b4,{onBack:()=>s("menu"),onComplete:(f,h)=>u("coordinate_sniper",f,h),stats:o,onGameStateChange:c}):r==="voice_move_master"?i.jsx(S4,{onBack:()=>s("menu"),onComplete:(f,h)=>u("voice_move_master",f,h),stats:o,onGameStateChange:c}):i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-training-back",children:i.jsx(Rs,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Training Gym"})]}),i.jsxs("div",{className:"space-y-3 flex-1",children:[i.jsxs(Ye,{className:"hover-elevate cursor-pointer",onClick:()=>s("voice_move_master"),"data-testid":"card-voice-move-master",children:[i.jsx(_t,{className:"pb-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-2 rounded-lg bg-purple-500/20",children:i.jsx($m,{className:"h-5 w-5 text-purple-500"})}),i.jsxs("div",{children:[i.jsx(Mt,{className:"text-lg",children:"Voice Move Master"}),i.jsx(Ft,{children:"Announce moves by voice in 60 seconds"})]})]})}),i.jsx(et,{children:o!==null&&o.voiceMoveMasterBest!==null&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Vn,{className:"h-4 w-4 text-amber-500"}),i.jsxs("span",{children:["Best: ",o.voiceMoveMasterBest," correct"]})]})})]}),i.jsxs(Ye,{className:"hover-elevate cursor-pointer",onClick:()=>s("color_blitz"),"data-testid":"card-color-blitz",children:[i.jsx(_t,{className:"pb-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:i.jsx(Om,{className:"h-5 w-5 text-amber-500"})}),i.jsxs("div",{children:[i.jsx(Mt,{className:"text-lg",children:"Color Blitz"}),i.jsx(Ft,{children:"Name square colors in 60 seconds"})]})]})}),i.jsx(et,{children:o!==null&&o.colorBlitzBest!==null&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Vn,{className:"h-4 w-4 text-amber-500"}),i.jsxs("span",{children:["Best: ",o.colorBlitzBest," correct"]})]})})]}),i.jsxs(Ye,{className:"hover-elevate cursor-pointer",onClick:()=>s("coordinate_sniper"),"data-testid":"card-coordinate-sniper",children:[i.jsx(_t,{className:"pb-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:i.jsx(pi,{className:"h-5 w-5 text-blue-500"})}),i.jsxs("div",{children:[i.jsx(Mt,{className:"text-lg",children:"Coordinate Sniper"}),i.jsx(Ft,{children:"Find 10 squares as fast as possible"})]})]})}),i.jsx(et,{children:o!==null&&o.coordinateSniperBest!==null&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Vn,{className:"h-4 w-4 text-amber-500"}),i.jsxs("span",{children:["Best: ",kc(o.coordinateSniperBest)]})]})})]})]})]})}function w4({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,o]=d.useState("ready"),[a,l]=d.useState(()=>co()),[c,u]=d.useState(0),[f,h]=d.useState(0),[m,y]=d.useState(0),[g,p]=d.useState(60),[w,x]=d.useState(!1),[v,b]=d.useState(!1),[k,S]=d.useState(!1),[C,N]=d.useState(!1),[j,R]=d.useState("challenge"),T=d.useRef(null),O=n!==null&&n.colorBlitzBest!==null&&c>n.colorBlitzBest,L=d.useRef(null),B=d.useRef(!1),I=d.useRef(null),D=d.useRef(!1),G=async()=>{if(D.current){try{await ie.stopSession()}catch{}D.current=!1}if(I.current){try{await I.current.remove()}catch{}I.current=null}S(!1)},q=()=>{T.current&&clearInterval(T.current),G(),e()},P=async(U=!1)=>{N(U),o("playing"),u(0),h(0),y(0),p(60),B.current=!1;const ve=co();l(ve),setTimeout(async()=>{w&&(await yt(Ah(ve.file,ve.rank)),B.current=!0)},300)},$=()=>{T.current&&clearInterval(T.current),G(),e()};d.useEffect(()=>{if(!lo||!w||s!=="playing")return;let U=!1;return(async()=>{try{if(!await Fu()||U){console.warn("[ColorBlitz] Voice not ready or cancelled");return}if(console.log("[ColorBlitz] Starting voice session..."),I.current&&await I.current.remove(),U||(I.current=await ie.addListener("onSpeechResult",ce=>{var X,J;const we=ce.text.toLowerCase();console.log("[ColorBlitz] Voice:",we),q1(we);const V=["light","white","lie","lye","lite","lied","liked","right","bright","lyte","lit","like","life"],W=["dark","black","bark","duck","dock","doc","dork","dog","dart"];V.some(he=>we.includes(he))?(X=L.current)==null||X.call(L,"light"):W.some(he=>we.includes(he))&&((J=L.current)==null||J.call(L,"dark")),ie.startListening().catch(()=>{})}),U))return;await ie.startSession(),z1(!0),await ie.startListening(),V1(!0),D.current=!0,S(!0),console.log("[ColorBlitz] Native voice session started")}catch(ke){console.error("[ColorBlitz] Native voice setup failed:",ke),tu(String(ke))}})(),()=>{U=!0,G()}},[w,s]),d.useEffect(()=>(s==="playing"&&!C&&(T.current=setInterval(()=>{p(U=>U<=1?(o("finished"),0):U-1)},1e3)),()=>{T.current&&clearInterval(T.current)}),[s,C]),d.useEffect(()=>{s==="finished"&&!C&&t(c,m)},[s,c,m,t,C]),d.useEffect(()=>{r==null||r(s)},[s,r]);const Z=d.useCallback(U=>{if(s!=="playing")return;if((U==="white"||U==="light"?"light":"dark")==="dark"===x4(a.fileIndex,a.rankIndex)){u(we=>we+1),h(we=>{const V=we+1;return y(W=>Math.max(W,V)),Ve.notification({type:Di.Success}).catch(()=>{}),V});const ce=co();l(ce),w&&setTimeout(async()=>{await yt(Ah(ce.file,ce.rank))},300)}else h(0),Ve.impact({style:Ue.Heavy}).catch(()=>{}),setTimeout(()=>{Ve.impact({style:Ue.Heavy}).catch(()=>{})},100),w&&setTimeout(async()=>{await yt("Wrong")},300)},[s,a,w]);return d.useEffect(()=>{L.current=Z},[Z]),s==="ready"?i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:q,"data-testid":"button-colorblitz-back",children:i.jsx(Rs,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Color Blitz"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx(Om,{className:"h-12 w-12 text-amber-500 mx-auto"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"})]}),i.jsx(fl,{value:j,onValueChange:U=>R(U),className:"w-full max-w-xs",children:i.jsxs(Gi,{className:"grid w-full grid-cols-2",children:[i.jsx(qn,{value:"challenge","data-testid":"tab-colorblitz-challenge",children:"1 Minute Challenge"}),i.jsx(qn,{value:"practice","data-testid":"tab-colorblitz-practice",children:"Practice"})]})}),i.jsx("p",{className:"text-muted-foreground text-center",children:j==="challenge"?"Name as many square colors as you can in 60 seconds!":"Practice at your own pace with unlimited time."}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(fr,{id:"voice-mode",checked:w,onCheckedChange:x,"data-testid":"switch-voice-mode"}),i.jsxs(dn,{htmlFor:"voice-mode",className:"flex items-center gap-2",children:[w?i.jsx(hn,{className:"h-4 w-4"}):i.jsx(mo,{className:"h-4 w-4"}),"Voice Mode"]})]}),j==="challenge"&&n!==null&&n.colorBlitzBest!==null&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",i.jsx("span",{className:"font-semibold text-amber-500",children:n.colorBlitzBest})," correct"]}),i.jsx(re,{size:"lg",onClick:()=>P(j==="practice"),"data-testid":"button-start-colorblitz",children:"Start"})]})]}):s==="finished"?i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:q,"data-testid":"button-colorblitz-back-finished",children:i.jsx(Rs,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Color Blitz"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[i.jsx(Vn,{className:`h-16 w-16 ${O?"text-amber-500":"text-muted-foreground"}`}),i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h2",{className:"text-4xl font-bold",children:c}),i.jsx("p",{className:"text-lg text-muted-foreground",children:"squares correct"}),O&&i.jsx(Et,{className:"bg-amber-500 text-white",children:"New Personal Best!"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(re,{variant:"outline",onClick:q,"data-testid":"button-colorblitz-menu",children:"Menu"}),i.jsx(re,{onClick:()=>P(!1),"data-testid":"button-colorblitz-retry",children:"Play Again"})]})]})]}):i.jsxs(i.Fragment,{children:[lo&&i.jsx(Ep,{}),i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[C?i.jsx(Et,{variant:"outline",children:"Practice"}):i.jsxs("span",{className:"text-2xl font-bold tabular-nums",children:[g,"s"]}),w&&k&&i.jsx(hn,{className:"h-4 w-4 text-red-500 animate-pulse"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-lg font-semibold",children:c}),f>=5&&i.jsxs(Et,{variant:"outline",className:"text-amber-500 border-amber-500",children:[f," streak"]})]})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[i.jsx("div",{className:"text-center",children:i.jsxs("p",{className:"text-6xl font-bold font-mono tracking-wider",children:[a.file,a.rank]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full",children:[i.jsx(re,{size:"lg",className:"h-20 text-xl bg-amber-100 hover:bg-amber-200 text-amber-900 dark:bg-amber-100 dark:hover:bg-amber-200",onClick:()=>Z("light"),"data-testid":"button-answer-light",children:"Light"}),i.jsx(re,{size:"lg",className:"h-20 text-xl bg-amber-900 hover:bg-amber-800 text-amber-100",onClick:()=>Z("dark"),"data-testid":"button-answer-dark",children:"Dark"})]}),i.jsxs(re,{variant:"outline",onClick:()=>b(!0),className:"mt-4","data-testid":"button-colorblitz-resign",children:[i.jsx(Mu,{className:"h-4 w-4 mr-2"}),"Resign"]})]})]}),i.jsx(Po,{open:v,onOpenChange:b,children:i.jsxs(Ls,{children:[i.jsxs(Is,{children:[i.jsx(Os,{children:"Quit Game?"}),i.jsxs(Ds,{children:["Your current score of ",c," will not be saved."]})]}),i.jsxs($s,{children:[i.jsx(Fs,{"data-testid":"button-colorblitz-resign-cancel",children:"Continue"}),i.jsx(Bs,{onClick:$,"data-testid":"button-colorblitz-resign-confirm",children:"Quit"})]})]})})]})}function b4({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,o]=d.useState("ready"),[a,l]=d.useState(()=>co()),[c,u]=d.useState(0),[f,h]=d.useState(0),[m,y]=d.useState(0),[g,p]=d.useState(0),[w,x]=d.useState(0),[v,b]=d.useState(null),[k,S]=d.useState(null),[C,N]=d.useState(!1),[j,R]=d.useState(!1),[T,O]=d.useState("challenge"),L=10,B=n!==null&&n.coordinateSniperBest!==null&&w<n.coordinateSniperBest&&w>0,I=()=>{e()},D=(q=!1)=>{R(q),o("playing"),u(0),h(0),y(0),p(Date.now()),x(0),b(null),S(null);const P=co();l(P);const $=P.file==="a"?"ay":P.file;yt(`Find ${$} ${P.rank}`)};d.useEffect(()=>{let q=null;return s==="playing"&&(q=setInterval(()=>{x(Date.now()-g)},100)),()=>{q&&clearInterval(q)}},[s,g]),d.useEffect(()=>{r==null||r(s)},[s,r]);const G=d.useCallback((q,P)=>{if(s!=="playing")return;const $=`${a.file}${a.rank}`,Z=`${q}${P}`;if(Z===$){Ve.impact({style:Ue.Light}).catch(()=>{}),b({square:Z,correct:!0});const U=c+1;u(U);const ve=f+1;h(ve);const ke=Math.max(m,ve);if(y(ke),U>=L&&!j){const ce=Date.now()-g;x(ce),o("finished"),t(ce,ke),yt("Complete!")}else if(U>=L&&j){u(0),h(0),y(0),setTimeout(()=>{b(null);const ce=co();l(ce);const we=ce.file==="a"?"ay":ce.file;yt(`Great! Find ${we} ${ce.rank}`)},200);return}else setTimeout(()=>{b(null);const ce=co();l(ce);const we=ce.file==="a"?"ay":ce.file;yt(`Find ${we} ${ce.rank}`)},200)}else Ve.impact({style:Ue.Heavy}).catch(()=>{}),Ve.impact({style:Ue.Heavy}).catch(()=>{}),b({square:Z,correct:!1}),S($),h(0),yt(`No, that's ${Ah(q,P)}`),setTimeout(()=>{b(null),S(null)},1e3)},[s,a,c,f,m,g,t]);return s==="ready"?i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-sniper-back",children:i.jsx(Rs,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Coordinate Sniper"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx(pi,{className:"h-12 w-12 text-blue-500 mx-auto"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"})]}),i.jsx(fl,{value:T,onValueChange:q=>O(q),className:"w-full max-w-xs",children:i.jsxs(Gi,{className:"grid w-full grid-cols-2",children:[i.jsx(qn,{value:"challenge","data-testid":"tab-sniper-challenge",children:"10 Square Race"}),i.jsx(qn,{value:"practice","data-testid":"tab-sniper-practice",children:"Practice"})]})}),i.jsx("p",{className:"text-muted-foreground text-center",children:T==="challenge"?"Find 10 squares as fast as you can!":"Practice finding squares with no time pressure."}),T==="challenge"&&n!==null&&n.coordinateSniperBest!==null&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",i.jsx("span",{className:"font-semibold text-blue-500",children:kc(n.coordinateSniperBest)})]}),i.jsx(re,{size:"lg",onClick:()=>D(T==="practice"),"data-testid":"button-start-sniper",children:"Start"})]})]}):s==="finished"?i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-sniper-back-finished",children:i.jsx(Rs,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Coordinate Sniper"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[i.jsx(Vn,{className:`h-16 w-16 ${B?"text-blue-500":"text-muted-foreground"}`}),i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h2",{className:"text-4xl font-bold",children:kc(w)}),i.jsx("p",{className:"text-lg text-muted-foreground",children:"to find 10 squares"}),B&&i.jsx(Et,{className:"bg-blue-500 text-white",children:"New Personal Best!"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(re,{variant:"outline",onClick:e,"data-testid":"button-sniper-menu",children:"Menu"}),i.jsx(re,{onClick:()=>D(!1),"data-testid":"button-sniper-retry",children:"Play Again"})]})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("p",{className:"text-lg font-semibold",children:["Find: ",i.jsxs("span",{className:"text-2xl font-mono",children:[a.file,a.rank]})]}),i.jsx("div",{className:"flex items-center gap-2",children:j?i.jsx(Et,{variant:"outline",children:"Practice"}):i.jsx("span",{className:"text-lg font-mono tabular-nums",children:kc(w)})})]}),!j&&i.jsx(bi,{value:c/L*100,className:"mb-2"}),i.jsx("p",{className:"text-sm text-muted-foreground text-center mb-2",children:j?`${c} found`:`${c}/${L} found`}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[i.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:["8","7","6","5","4","3","2","1"].map((q,P)=>du.map(($,Z)=>{const U=`${$}${q}`,ve=(Z+P)%2===1,ke=(v==null?void 0:v.square)===U,ce=k===U;let we=ve?"bg-amber-700":"bg-amber-100";return ke?we=v.correct?"bg-green-500":"bg-red-500":ce&&(we="bg-green-500"),i.jsx("button",{className:`aspect-square ${we} transition-colors duration-100`,onClick:()=>G($,q),"data-testid":`square-${U}`},U)}))}),i.jsxs(re,{variant:"outline",onClick:()=>N(!0),className:"mt-4","data-testid":"button-sniper-resign",children:[i.jsx(Mu,{className:"h-4 w-4 mr-2"}),"Resign"]})]})]}),i.jsx(Po,{open:C,onOpenChange:N,children:i.jsxs(Ls,{children:[i.jsxs(Is,{children:[i.jsx(Os,{children:"Quit Game?"}),i.jsxs(Ds,{children:["Your progress (",c,"/",L," found) will not be saved."]})]}),i.jsxs($s,{children:[i.jsx(Fs,{"data-testid":"button-sniper-resign-cancel",children:"Continue"}),i.jsx(Bs,{onClick:I,"data-testid":"button-sniper-resign-confirm",children:"Quit"})]})]})})]})}const Nc={p:"pawn",n:"knight",b:"bishop",r:"rook",q:"queen",k:"king"};function Lh(){const e=new Mr,t=5+Math.floor(Math.random()*11);for(let s=0;s<t;s++){const o=e.moves({verbose:!0});if(o.length===0)break;const a=o[Math.floor(Math.random()*o.length)];e.move(a)}const n=e.moves({verbose:!0});if(n.length===0)return Lh();const r=n[Math.floor(Math.random()*n.length)];return{chess:e,move:{from:r.from,to:r.to,san:r.san,piece:r.piece,captured:r.captured}}}function S4({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,o]=d.useState("ready"),[a,l]=d.useState(null),[c,u]=d.useState(0),[f,h]=d.useState(0),[m,y]=d.useState(0),[g,p]=d.useState(60),[w,x]=d.useState(!1),[v,b]=d.useState(!1),[k,S]=d.useState(!1),[C,N]=d.useState(null),[j,R]=d.useState(""),[T,O]=d.useState(!1),[L,B]=d.useState("challenge"),I=d.useRef(null),D=d.useRef(null),G=n!==null&&n.voiceMoveMasterBest!==null&&c>n.voiceMoveMasterBest,q=d.useRef(null),P=d.useRef(!1),$=d.useRef(null),Z=async()=>{if(P.current){try{await ie.stopSession()}catch{}P.current=!1}if(q.current){try{await q.current.remove()}catch{}q.current=null}x(!1)},U=()=>{I.current&&clearInterval(I.current),D.current&&clearTimeout(D.current),Z(),e()},ve=async(X=!1)=>{O(X),o("playing"),u(0),h(0),y(0),p(60),N(null);const J=Lh();l(J),setTimeout(async()=>{await yt("Say the move.")},300)},ke=()=>{I.current&&clearInterval(I.current),D.current&&clearTimeout(D.current),Z(),e()},ce=d.useCallback(X=>{var He,Ee;if(!a||s!=="playing")return;const J=X.toLowerCase().trim();if(console.log("[VoiceMoveMaster] Processing:",J),J.includes("resign")||J.includes("quit")){S(!0),yt("Are you sure you want to resign? Say yes or no.");return}if(k){if(J.includes("yes")){b(!0),S(!1);return}else if(J.includes("no")){S(!1),yt("Okay, continue playing.");return}}if(J.includes("repeat")||J.includes("again")||J.includes("say again")){yt("Look at the highlighted squares on the board.");return}if(J.includes("time")||J.includes("clock")){yt(`${g} seconds remaining`);return}if(J.includes("material")){const $e=k4(a.chess);yt($e);return}const he=J.match(/what'?s?\s+on\s+([a-h])\s*([1-8])/i);if(he){const $e=`${he[1]}${he[2]}`,Te=a.chess.get($e);if(Te){const Ne=Te.color==="w"?"White":"Black",ut=Nc[Te.type];yt(`${Ne} ${ut}`)}else yt("Empty");return}const de=J.match(/where\s+is\s+my\s+(\w+)/i);if(de){const $e=de[1].toLowerCase(),Te=(He=Object.entries(Nc).find(([,Ne])=>Ne===$e))==null?void 0:He[0];if(Te){const Ne=a.chess.turn(),ut=a.chess.board(),vt=[];for(let tn=0;tn<8;tn++)for(let z=0;z<8;z++){const H=ut[tn][z];H&&H.type===Te&&H.color===Ne&&vt.push(`${du[z]}${xk[7-tn]}`)}vt.length>0?yt(`Your ${$e} is on ${vt.slice(0,3).join(", ")}`):yt(`You don't have a ${$e}`)}return}if(J.includes("eval")||J.includes("evaluate")){const $e=N4(a.chess);$e>0?yt(`White is up ${$e} points`):$e<0?yt(`Black is up ${Math.abs($e)} points`):yt("Position is equal");return}const Ce=J.match(/legal\s+moves?\s+for\s+(\w+)/i);if(Ce){const $e=Ce[1].toLowerCase(),Te=(Ee=Object.entries(Nc).find(([,Ne])=>Ne===$e))==null?void 0:Ee[0];if(Te){const Ne=a.chess.moves({verbose:!0}).filter(ut=>ut.piece===Te).slice(0,4).map(ut=>ut.san);Ne.length>0?yt(`${$e} can play ${Ne.join(", ")}`):yt(`No legal moves for ${$e}`)}return}if(R4(J,a.move)){D.current&&(clearTimeout(D.current),D.current=null),Ve.notification({type:Di.Success}).catch(()=>{}),N({text:"Correct!",correct:!0});const $e=c+1,Te=f+1;u($e),h(Te);const Ne=Math.max(m,Te);y(Ne),yt("Correct!"),setTimeout(()=>{N(null);const ut=Lh();l(ut)},500)}else h(0),D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{Ve.notification({type:Di.Error}).catch(()=>{}),N({text:"Try again",correct:!1}),setTimeout(()=>N(null),1e3)},1e3)},[a,s,c,f,m,g,k]);if(d.useEffect(()=>{$.current=ce},[ce]),d.useEffect(()=>{if(!lo||s!=="playing")return;let X=!1;return(async()=>{try{if(!await Fu()||X){console.warn("[VoiceMoveMaster] Voice not ready or cancelled");return}if(console.log("[VoiceMoveMaster] Starting voice session..."),q.current&&await q.current.remove(),X||(q.current=await ie.addListener("onSpeechResult",de=>{var He;const Ce=de.text;q1(Ce),Ce.length>=2&&((He=$.current)==null||He.call($,Ce)),ie.startListening().catch(()=>{})}),X))return;await ie.startSession(),z1(!0),await ie.startListening(),V1(!0),P.current=!0,x(!0),console.log("[VoiceMoveMaster] Native voice session started")}catch(he){console.error("[VoiceMoveMaster] Native voice setup failed:",he),tu(String(he))}})(),()=>{X=!0,Z()}},[s]),d.useEffect(()=>(s==="playing"&&!T&&(I.current=setInterval(()=>{p(X=>X<=1?(o("finished"),0):X-1)},1e3)),()=>{I.current&&clearInterval(I.current)}),[s,T]),d.useEffect(()=>{s==="finished"&&!T&&t(c,m)},[s,c,m,t,T]),d.useEffect(()=>{r==null||r(s)},[s,r]),s==="ready")return i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:U,"data-testid":"button-voicemaster-back",children:i.jsx(Rs,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Voice Move Master"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx($m,{className:"h-12 w-12 text-purple-500 mx-auto"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"})]}),i.jsx(fl,{value:L,onValueChange:X=>B(X),className:"w-full max-w-xs",children:i.jsxs(Gi,{className:"grid w-full grid-cols-2",children:[i.jsx(qn,{value:"challenge","data-testid":"tab-voicemaster-challenge",children:"1 Minute Challenge"}),i.jsx(qn,{value:"practice","data-testid":"tab-voicemaster-practice",children:"Practice"})]})}),i.jsx("p",{className:"text-muted-foreground text-center",children:L==="challenge"?"Say the highlighted move within 60 seconds!":"Practice announcing moves at your own pace."}),L==="challenge"&&n!==null&&n.voiceMoveMasterBest!==null&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",i.jsxs("span",{className:"font-semibold text-purple-500",children:[n.voiceMoveMasterBest," moves"]})]}),i.jsx(re,{size:"lg",onClick:()=>ve(L==="practice"),"data-testid":"button-start-voicemaster",children:"Start"})]})]});if(s==="finished")return i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:U,"data-testid":"button-voicemaster-back-finished",children:i.jsx(Rs,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Voice Move Master"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[i.jsx(Vn,{className:`h-16 w-16 ${G?"text-purple-500":"text-muted-foreground"}`}),i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h2",{className:"text-4xl font-bold",children:c}),i.jsx("p",{className:"text-lg text-muted-foreground",children:"moves announced correctly"}),m>1&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Best streak: ",m]}),G&&i.jsx(Et,{className:"bg-purple-500 text-white",children:"New Personal Best!"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(re,{variant:"outline",onClick:U,"data-testid":"button-voicemaster-menu",children:"Menu"}),i.jsx(re,{onClick:()=>ve(!1),"data-testid":"button-voicemaster-retry",children:"Play Again"})]})]})]});const we=(a==null?void 0:a.chess.board())||[],V=(a==null?void 0:a.move.from)||"",W=(a==null?void 0:a.move.to)||"";return i.jsxs(i.Fragment,{children:[lo&&i.jsx(Ep,{}),i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[T?i.jsx(Et,{variant:"outline",children:"Practice"}):i.jsx("span",{className:"text-2xl font-mono font-bold tabular-nums",children:g}),w&&i.jsx(hn,{className:"h-5 w-5 text-red-500 animate-pulse"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-lg font-semibold",children:c}),f>=3&&i.jsxs(Et,{variant:"outline",className:"text-purple-500 border-purple-500",children:[f," streak"]})]})]}),C&&i.jsx("div",{className:`text-center py-2 mb-2 rounded ${C.correct?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:i.jsx("span",{className:"font-semibold",children:C.text})}),i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:["8","7","6","5","4","3","2","1"].map((X,J)=>du.map((he,de)=>{var vt;const Ce=`${he}${X}`,He=(de+J)%2===1,Ee=(vt=we[J])==null?void 0:vt[de],$e=Ce===V,Te=Ce===W;let Ne=He?"bg-amber-700":"bg-amber-100";$e?Ne="bg-yellow-400":Te&&(Ne="bg-red-500");const ut={wk:"",wq:"",wr:"",wb:"",wn:"",wp:"",bk:"",bq:"",br:"",bb:"",bn:"",bp:""};return i.jsx("div",{className:`aspect-square ${Ne} flex items-center justify-center text-2xl`,children:Ee&&ut[`${Ee.color}${Ee.type}`]},Ce)}))})}),i.jsx("div",{className:"text-center mb-4",children:i.jsxs("p",{className:"text-lg",children:[lo?"Say: ":"Type: ",i.jsx("span",{className:"font-bold text-purple-500",children:a==null?void 0:a.move.san})]})}),!lo&&i.jsxs("form",{className:"flex gap-2 mb-4",onSubmit:X=>{X.preventDefault(),j.trim()&&(ce(j),R(""))},children:[i.jsx("input",{type:"text",value:j,onChange:X=>R(X.target.value),placeholder:"Type move here...",className:"flex-1 px-3 py-2 border rounded-md bg-background",autoFocus:!0,"data-testid":"input-voicemaster-text"}),i.jsx(re,{type:"submit","data-testid":"button-voicemaster-submit",children:"Submit"})]}),i.jsxs(re,{variant:"outline",onClick:()=>b(!0),className:"mx-auto mb-4","data-testid":"button-voicemaster-resign",children:[i.jsx(Mu,{className:"h-4 w-4 mr-2"}),"Resign"]}),i.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(a2,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm font-medium",children:"Chess Notation"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs text-muted-foreground",children:[i.jsxs("span",{children:[i.jsx("strong",{children:"e4"})," = pawn to e4"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"R"})," = Rook"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"N"})," = Knight"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"B"})," = Bishop"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"Q"})," = Queen"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"K"})," = King"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"Bb2"})," = Bishop to b2"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"Nxc5"})," = Knight takes c5"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"0-0"})," = Kingside castle"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"0-0-0"})," = Queenside castle"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"+"})," = Check"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"#"})," = Checkmate"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"=Q"})," = Promote to Queen"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"e.p."})," = En passant"]}),i.jsxs("span",{className:"col-span-2",children:[i.jsx("strong",{children:"Rac1"})," = When 2 rooks can go to c1, specify which (a-file)"]})]})]})]}),i.jsx(Po,{open:v,onOpenChange:b,children:i.jsxs(Ls,{children:[i.jsxs(Is,{children:[i.jsx(Os,{children:"Quit Game?"}),i.jsxs(Ds,{children:["Your current score of ",c," will not be saved."]})]}),i.jsxs($s,{children:[i.jsx(Fs,{"data-testid":"button-voicemaster-resign-cancel",children:"Continue"}),i.jsx(Bs,{onClick:ke,"data-testid":"button-voicemaster-resign-confirm",children:"Quit"})]})]})})]})}function k4(e){const t=e.board();let n=0,r=0;const s={p:1,n:3,b:3,r:5,q:9,k:0};for(const a of t)for(const l of a)if(l){const c=s[l.type];l.color==="w"?n+=c:r+=c}const o=n-r;return o>0?`White is up ${o} point${o!==1?"s":""}`:o<0?`Black is up ${Math.abs(o)} point${Math.abs(o)!==1?"s":""}`:"Material is equal"}function N4(e){const t=e.board();let n=0;const r={p:1,n:3,b:3,r:5,q:9,k:0};for(const s of t)for(const o of s)if(o){const a=r[o.type];n+=o.color==="w"?a:-a}return n}const C4=["to","takes","captures","moves","x","move"],j4={one:"1",won:"1",first:"1",two:"2",too:"2",second:"2",three:"3",free:"3",tree:"3",third:"3",four:"4",fore:"4",forth:"4",fourth:"4",five:"5",fifth:"5",six:"6",sixth:"6",sicks:"6",seven:"7",seventh:"7",eight:"8",ate:"8",eighth:"8"},E4={night:"knight",nite:"knight",horse:"knight",rock:"rook",castle:"rook",brook:"rook",bish:"bishop",bishup:"bishop",pond:"pawn"},P4={ay:"a",aye:"a",eh:"a",alpha:"a",alfa:"a",apple:"a",able:"a",bee:"b",be:"b",bravo:"b",boy:"b",baker:"b",cee:"c",see:"c",sea:"c",charlie:"c",cat:"c",dee:"d",delta:"d",dog:"d",david:"d",eee:"e",ee:"e",echo:"e",easy:"e",edward:"e",ef:"f",eff:"f",foxtrot:"f",fox:"f",frank:"f",if:"f",of:"f",gee:"g",jee:"g",golf:"g",george:"g",aitch:"h",ach:"h",hotel:"h",henry:"h"};function T4(e){let t=e.toLowerCase();t=t.replace(/\bbefore\b/g,"b 4"),t=t.replace(/\bsci\s*fi\b/g,"c 5"),t=t.replace(/\bscifi\b/g,"c 5"),t=t.replace(/\bquincy\b/g,"queen c");for(const[n,r]of Object.entries(P4))t=t.replace(new RegExp(`\\b${n}\\b`,"g"),r);t=t.replace(/\bhe\s+([1-8])\b/g,"e $1"),t=t.replace(/\bhe\s+(one|two|three|four|five|six|seven|eight|won|too|free|fore|for|fifth|sixth|seventh|eighth)\b/gi,"e $1"),t=t.replace(/\bthe\s+([1-8])\b/g,"d $1"),t=t.replace(/\bthe\s+(one|two|three|four|five|six|seven|eight)\b/gi,"d $1"),t=t.replace(/\b([a-h])\s+for\b/g,"$1 4");for(const[n,r]of Object.entries(j4))t=t.replace(new RegExp(`\\b${n}\\b`,"g"),r);for(const[n,r]of Object.entries(E4))t=t.replace(new RegExp(`\\b${n}\\b`,"g"),r);return t}function R4(e,t){const n=T4(e);console.log("[matchesMove] Input:",e," Normalized:",n," Target:",t.san);let r=n.replace(/[^a-z0-9\s]/g,"");const o=r.split(/\s+/).filter(w=>!C4.includes(w)),a=o.join(" "),l=r.replace(/\s+/g,"").match(/^([a-h])([1-8])$/);if(l&&t.piece==="p"){const w=l[1]+l[2];if(t.to===w)return!0}const c=a.replace(/\s+/g,"").match(/^([a-h])([1-8])$/);if(c&&t.piece==="p"){const w=c[1]+c[2];if(t.to===w)return!0}const u=t.san.toLowerCase().replace(/[+#x]/g,"");if(a.replace(/\s+/g,"").includes(u))return!0;const f=["knight","night","bishop","rook","queen","king","pawn"],h=Nc[t.piece],m=o.some(w=>h==="pawn"&&!f.some(x=>x!=="pawn"&&a.includes(x))||a.includes(h)||h==="knight"&&a.includes("night")),y=t.to[0],g=t.to[1],p=a.includes(t.to)||a.includes(y)&&a.includes(g);return!!(m&&p)}function _4(){const[e,t]=d.useState(!1),[n,r]=d.useState(!1),[s,o]=d.useState(Ma()),[a,l]=d.useState(0),[c,u]=d.useState("idle"),[f,h]=d.useState(!1),m=d.useRef(null),[y,g]=d.useState(!1),[p,w]=d.useState("menu"),x=d.useRef(null);d.useEffect(()=>{const C=()=>{o(Ma())};return window.addEventListener("statsUpdated",C),()=>window.removeEventListener("statsUpdated",C)},[]),d.useEffect(()=>{if(!mn.isNativePlatform()){Kl(!0);return}(async()=>{try{console.log("[App] Requesting mic permission on startup..."),Tv("requesting...");const N=await ie.requestPermissions();if(console.log("[App] Mic permission result:",N.mic),Tv(N.mic),N.mic!=="granted"){console.warn("[App] Mic permission denied"),tu("Mic permission denied"),Kl(!1);return}console.log("[App] Permission granted, waiting for Vosk service..."),await ie.waitUntilReady(),console.log("[App] Vosk service ready"),oR(!0),Kl(!0)}catch(N){console.error("[App] Failed to initialize voice:",N),tu(String(N)),Kl(!1)}})()},[]);const v=()=>{l(C=>C+1)},b=()=>{if(y){if(p==="menu"||p==="ready"||p==="finished"){g(!1);return}h(!0);return}if(c==="idle"){r(!1),t(!1),window.dispatchEvent(new CustomEvent("closeAllDialogs"));return}if(c==="setup"){m.current&&m.current();return}h(!0)},k=()=>{if(h(!1),y){x.current&&x.current(),g(!1);return}m.current&&m.current()},S=()=>{if(y&&p==="playing")return"Quit this training game and return to title?";switch(c){case"in_game":return"Resign this game and return to title?";case"reconstruction":return"Leave this challenge and return to title?";case"analysis":return"Skip analysis and return to title?";default:return"Return to title?"}};return i.jsx(AP,{defaultTheme:"dark",children:i.jsxs(RP,{children:[i.jsxs("div",{className:"fixed inset-0 w-full h-full bg-background overflow-hidden",children:[i.jsxs("header",{className:"absolute top-0 left-0 right-0 z-50 grid grid-cols-3 items-center px-3 border-b border-border bg-background",style:{paddingTop:"var(--safe-area-top)",minHeight:"calc(56px + var(--safe-area-top, 0px))"},children:[i.jsx("div",{className:"flex justify-start",children:i.jsxs(Ai,{open:n,onOpenChange:r,children:[i.jsx(eu,{asChild:!0,children:i.jsx(re,{variant:"ghost",size:"icon","data-testid":"button-voice-help",children:i.jsx(hn,{className:"h-5 w-5"})})}),i.jsxs(Co,{children:[i.jsx(jo,{children:i.jsx(Eo,{children:"Voice Commands"})}),i.jsxs("div",{className:"space-y-4 text-sm max-h-[60vh] overflow-y-auto",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold",children:"Basic Moves"}),i.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"e4"'})," - Move pawn to e4"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"knight f3"'})," - Move knight to f3"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"bishop takes c6"'})," - Capture on c6"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"castle kingside"'})," - Castle short (O-O)"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"castle queenside"'})," - Castle long (O-O-O)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold",children:"When Two Pieces Can Move"}),i.jsx("p",{className:"text-muted-foreground",children:"If you have two pieces that can reach the same square, specify which one:"}),i.jsx("p",{className:"font-mono text-foreground",children:'"Rook F to D1"'})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold",children:"Query Commands"}),i.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"say again"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"repeat"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"again"'})," - Hear the last move"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"last move"'})," - Hear opponent's last move"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:`"what's on e4"`})," - Check what piece is on a square"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"where is my queen"'})," - Find your piece locations"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"how much time"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"clock"'})," - Hear remaining time"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"resign"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"quit"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"give up"'})," - Resign the game"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold",children:"Resign Confirmation"}),i.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"yes"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"confirm"'})," - Confirm resignation"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"no"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"cancel"'})," - Cancel resignation"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold",children:"Pro Commands"}),i.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"material"'})," - Hear material balance"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"legal moves for knight"'})," - List piece's legal moves"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"peek"'})," - Show board for 5 seconds"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"evaluate"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"eval"'})," - Hear engine evaluation"]})]}),i.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:'Note: "peek" and "evaluate" mark the game as assisted'})]})]})]})]})}),i.jsx("button",{onClick:b,className:`text-lg font-bold text-center whitespace-nowrap cursor-pointer transition-colors bg-transparent border-none p-0 m-0 font-inherit text-inherit outline-none select-none ${c==="idle"?"cursor-default text-foreground":"text-foreground hover:text-primary"}`,style:{WebkitTapHighlightColor:"transparent",WebkitTouchCallout:"none"},"data-testid":"button-title-home",children:"Blindfold Chess"}),i.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:v,"data-testid":"button-game-history",children:i.jsx(u2,{className:"h-5 w-5"})}),i.jsxs(Ai,{open:e,onOpenChange:t,children:[i.jsx(eu,{asChild:!0,children:i.jsx(re,{variant:"ghost",size:"icon","data-testid":"button-stats",children:i.jsx(Xy,{className:"h-5 w-5"})})}),i.jsxs(Co,{className:"max-w-lg max-h-[85vh] overflow-hidden",children:[i.jsx(jo,{children:i.jsx(Eo,{children:"Training Metrics"})}),i.jsx(R_,{stats:s}),i.jsxs(re,{variant:"outline",size:"sm",className:"w-full text-muted-foreground mt-4",onClick:()=>{MR(),o(Ma())},"data-testid":"button-reset-stats",children:[i.jsx(p2,{className:"mr-2 h-3 w-3"}),"Reset All Statistics"]})]})]})]})]}),i.jsx("main",{className:"absolute left-0 right-0 z-0 overflow-hidden",style:{top:"calc(56px + var(--safe-area-top, 0px))",bottom:"calc(56px + var(--safe-area-bottom, 0px))"},children:y?i.jsx(y4,{onBack:()=>g(!1),onStateChange:w,returnToMenuRef:x}):i.jsx(v4,{historyTrigger:a,onStateChange:u,returnToTitleRef:m,onTrainNowClick:()=>g(!0)})}),i.jsxs("footer",{className:"absolute bottom-0 left-0 right-0 z-50 grid grid-cols-3 items-center px-2 border-t border-border bg-background",style:{paddingBottom:"var(--safe-area-bottom)",minHeight:"calc(56px + var(--safe-area-bottom, 0px))"},children:[i.jsx("div",{className:"flex justify-start",children:i.jsx(BR,{})}),i.jsx("div",{className:"flex justify-center",children:i.jsx(IP,{})}),i.jsx("div",{className:"flex justify-end",children:i.jsx(FR,{})})]})]}),i.jsx(Po,{open:f,onOpenChange:h,children:i.jsxs(Ls,{children:[i.jsxs(Is,{children:[i.jsx(Os,{children:"Return to Title"}),i.jsx(Ds,{children:S()})]}),i.jsxs($s,{children:[i.jsx(Fs,{"data-testid":"button-cancel-return",children:"Cancel"}),i.jsx(Bs,{onClick:k,"data-testid":"button-confirm-return",children:"Confirm"})]})]})}),i.jsx(sE,{})]})})}wy(document.getElementById("root")).render(i.jsx(_4,{}));export{Ue as I,Di as N,up as W};
