var jk=Object.defineProperty;var Ek=(e,t,n)=>t in e?jk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var xt=(e,t,n)=>Ek(e,typeof t!="symbol"?t+"":t,n);function Pk(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function a0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var l0={exports:{}},fu={},c0={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nl=Symbol.for("react.element"),Tk=Symbol.for("react.portal"),Rk=Symbol.for("react.fragment"),_k=Symbol.for("react.strict_mode"),Mk=Symbol.for("react.profiler"),Ak=Symbol.for("react.provider"),Lk=Symbol.for("react.context"),Ik=Symbol.for("react.forward_ref"),$k=Symbol.for("react.suspense"),Ok=Symbol.for("react.memo"),Dk=Symbol.for("react.lazy"),Dp=Symbol.iterator;function Bk(e){return e===null||typeof e!="object"?null:(e=Dp&&e[Dp]||e["@@iterator"],typeof e=="function"?e:null)}var u0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d0=Object.assign,f0={};function Fi(e,t,n){this.props=e,this.context=t,this.refs=f0,this.updater=n||u0}Fi.prototype.isReactComponent={};Fi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function h0(){}h0.prototype=Fi.prototype;function Ih(e,t,n){this.props=e,this.context=t,this.refs=f0,this.updater=n||u0}var $h=Ih.prototype=new h0;$h.constructor=Ih;d0($h,Fi.prototype);$h.isPureReactComponent=!0;var Bp=Array.isArray,m0=Object.prototype.hasOwnProperty,Oh={current:null},p0={key:!0,ref:!0,__self:!0,__source:!0};function g0(e,t,n){var r,s={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)m0.call(t,r)&&!p0.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:nl,type:e,key:o,ref:a,props:s,_owner:Oh.current}}function Fk(e,t){return{$$typeof:nl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Dh(e){return typeof e=="object"&&e!==null&&e.$$typeof===nl}function zk(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Fp=/\/+/g;function td(e,t){return typeof e=="object"&&e!==null&&e.key!=null?zk(""+e.key):t.toString(36)}function rc(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case nl:case Tk:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+td(a,0):r,Bp(s)?(n="",e!=null&&(n=e.replace(Fp,"$&/")+"/"),rc(s,t,n,"",function(u){return u})):s!=null&&(Dh(s)&&(s=Fk(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Fp,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Bp(e))for(var l=0;l<e.length;l++){o=e[l];var c=r+td(o,l);a+=rc(o,t,n,c,s)}else if(c=Bk(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=r+td(o,l++),a+=rc(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Cl(e,t,n){if(e==null)return e;var r=[],s=0;return rc(e,r,"","",function(o){return t.call(n,o,s++)}),r}function Vk(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Nn={current:null},sc={transition:null},qk={ReactCurrentDispatcher:Nn,ReactCurrentBatchConfig:sc,ReactCurrentOwner:Oh};function v0(){throw Error("act(...) is not supported in production builds of React.")}Qe.Children={map:Cl,forEach:function(e,t,n){Cl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Cl(e,function(){t++}),t},toArray:function(e){return Cl(e,function(t){return t})||[]},only:function(e){if(!Dh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Qe.Component=Fi;Qe.Fragment=Rk;Qe.Profiler=Mk;Qe.PureComponent=Ih;Qe.StrictMode=_k;Qe.Suspense=$k;Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qk;Qe.act=v0;Qe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=d0({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Oh.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)m0.call(t,c)&&!p0.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:nl,type:e.type,key:s,ref:o,props:r,_owner:a}};Qe.createContext=function(e){return e={$$typeof:Lk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ak,_context:e},e.Consumer=e};Qe.createElement=g0;Qe.createFactory=function(e){var t=g0.bind(null,e);return t.type=e,t};Qe.createRef=function(){return{current:null}};Qe.forwardRef=function(e){return{$$typeof:Ik,render:e}};Qe.isValidElement=Dh;Qe.lazy=function(e){return{$$typeof:Dk,_payload:{_status:-1,_result:e},_init:Vk}};Qe.memo=function(e,t){return{$$typeof:Ok,type:e,compare:t===void 0?null:t}};Qe.startTransition=function(e){var t=sc.transition;sc.transition={};try{e()}finally{sc.transition=t}};Qe.unstable_act=v0;Qe.useCallback=function(e,t){return Nn.current.useCallback(e,t)};Qe.useContext=function(e){return Nn.current.useContext(e)};Qe.useDebugValue=function(){};Qe.useDeferredValue=function(e){return Nn.current.useDeferredValue(e)};Qe.useEffect=function(e,t){return Nn.current.useEffect(e,t)};Qe.useId=function(){return Nn.current.useId()};Qe.useImperativeHandle=function(e,t,n){return Nn.current.useImperativeHandle(e,t,n)};Qe.useInsertionEffect=function(e,t){return Nn.current.useInsertionEffect(e,t)};Qe.useLayoutEffect=function(e,t){return Nn.current.useLayoutEffect(e,t)};Qe.useMemo=function(e,t){return Nn.current.useMemo(e,t)};Qe.useReducer=function(e,t,n){return Nn.current.useReducer(e,t,n)};Qe.useRef=function(e){return Nn.current.useRef(e)};Qe.useState=function(e){return Nn.current.useState(e)};Qe.useSyncExternalStore=function(e,t,n){return Nn.current.useSyncExternalStore(e,t,n)};Qe.useTransition=function(){return Nn.current.useTransition()};Qe.version="18.3.1";c0.exports=Qe;var d=c0.exports;const bn=a0(d),x0=Pk({__proto__:null,default:bn},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wk=d,Uk=Symbol.for("react.element"),Hk=Symbol.for("react.fragment"),Gk=Object.prototype.hasOwnProperty,Kk=Wk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qk={key:!0,ref:!0,__self:!0,__source:!0};function y0(e,t,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Gk.call(t,r)&&!Qk.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Uk,type:e,key:o,ref:a,props:s,_owner:Kk.current}}fu.Fragment=Hk;fu.jsx=y0;fu.jsxs=y0;l0.exports=fu;var i=l0.exports,w0={exports:{}},Gn={},b0={exports:{}},S0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,$){var Y=T.length;T.push($);e:for(;0<Y;){var W=Y-1>>>1,ge=T[W];if(0<s(ge,$))T[W]=$,T[Y]=ge,Y=W;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var $=T[0],Y=T.pop();if(Y!==$){T[0]=Y;e:for(var W=0,ge=T.length,xe=ge>>>1;W<xe;){var we=2*(W+1)-1,Ce=T[we],O=we+1,q=T[O];if(0>s(Ce,Y))O<ge&&0>s(q,Ce)?(T[W]=q,T[O]=Y,W=O):(T[W]=Ce,T[we]=Y,W=we);else if(O<ge&&0>s(q,Y))T[W]=q,T[O]=Y,W=O;else break e}}return $}function s(T,$){var Y=T.sortIndex-$.sortIndex;return Y!==0?Y:T.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],f=1,h=null,m=3,y=!1,g=!1,p=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(T){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=T)r(u),$.sortIndex=$.expirationTime,t(c,$);else break;$=n(u)}}function k(T){if(p=!1,b(T),!g)if(n(c)!==null)g=!0,H(S);else{var $=n(u);$!==null&&Q(k,$.startTime-T)}}function S(T,$){g=!1,p&&(p=!1,x(j),j=-1),y=!0;var Y=m;try{for(b($),h=n(c);h!==null&&(!(h.expirationTime>$)||T&&!D());){var W=h.callback;if(typeof W=="function"){h.callback=null,m=h.priorityLevel;var ge=W(h.expirationTime<=$);$=e.unstable_now(),typeof ge=="function"?h.callback=ge:h===n(c)&&r(c),b($)}else r(c);h=n(c)}if(h!==null)var xe=!0;else{var we=n(u);we!==null&&Q(k,we.startTime-$),xe=!1}return xe}finally{h=null,m=Y,y=!1}}var C=!1,N=null,j=-1,R=5,P=-1;function D(){return!(e.unstable_now()-P<R)}function I(){if(N!==null){var T=e.unstable_now();P=T;var $=!0;try{$=N(!0,T)}finally{$?F():(C=!1,N=null)}}else C=!1}var F;if(typeof v=="function")F=function(){v(I)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,B=L.port2;L.port1.onmessage=I,F=function(){B.postMessage(null)}}else F=function(){w(I,0)};function H(T){N=T,C||(C=!0,F())}function Q(T,$){j=w(function(){T(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){g||y||(g=!0,H(S))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var Y=m;m=$;try{return T()}finally{m=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,$){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var Y=m;m=T;try{return $()}finally{m=Y}},e.unstable_scheduleCallback=function(T,$,Y){var W=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?W+Y:W):Y=W,T){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=Y+ge,T={id:f++,callback:$,priorityLevel:T,startTime:Y,expirationTime:ge,sortIndex:-1},Y>W?(T.sortIndex=Y,t(u,T),n(c)===null&&T===n(u)&&(p?(x(j),j=-1):p=!0,Q(k,Y-W))):(T.sortIndex=ge,t(c,T),g||y||(g=!0,H(S))),T},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(T){var $=m;return function(){var Y=m;m=$;try{return T.apply(this,arguments)}finally{m=Y}}}})(S0);b0.exports=S0;var Yk=b0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xk=d,Hn=Yk;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k0=new Set,Ia={};function _o(e,t){Ni(e,t),Ni(e+"Capture",t)}function Ni(e,t){for(Ia[e]=t,e=0;e<t.length;e++)k0.add(t[e])}var Hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),af=Object.prototype.hasOwnProperty,Zk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zp={},Vp={};function Jk(e){return af.call(Vp,e)?!0:af.call(zp,e)?!1:Zk.test(e)?Vp[e]=!0:(zp[e]=!0,!1)}function eN(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function tN(e,t,n,r){if(t===null||typeof t>"u"||eN(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Cn(e,t,n,r,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var tn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){tn[e]=new Cn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];tn[t]=new Cn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){tn[e]=new Cn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){tn[e]=new Cn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){tn[e]=new Cn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){tn[e]=new Cn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){tn[e]=new Cn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){tn[e]=new Cn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){tn[e]=new Cn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Bh=/[\-:]([a-z])/g;function Fh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Bh,Fh);tn[t]=new Cn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Bh,Fh);tn[t]=new Cn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Bh,Fh);tn[t]=new Cn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){tn[e]=new Cn(e,1,!1,e.toLowerCase(),null,!1,!1)});tn.xlinkHref=new Cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){tn[e]=new Cn(e,1,!1,e.toLowerCase(),null,!0,!0)});function zh(e,t,n,r){var s=tn.hasOwnProperty(t)?tn[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(tN(t,n,s,r)&&(n=null),r||s===null?Jk(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Zr=Xk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jl=Symbol.for("react.element"),Ho=Symbol.for("react.portal"),Go=Symbol.for("react.fragment"),Vh=Symbol.for("react.strict_mode"),lf=Symbol.for("react.profiler"),N0=Symbol.for("react.provider"),C0=Symbol.for("react.context"),qh=Symbol.for("react.forward_ref"),cf=Symbol.for("react.suspense"),uf=Symbol.for("react.suspense_list"),Wh=Symbol.for("react.memo"),ds=Symbol.for("react.lazy"),j0=Symbol.for("react.offscreen"),qp=Symbol.iterator;function ra(e){return e===null||typeof e!="object"?null:(e=qp&&e[qp]||e["@@iterator"],typeof e=="function"?e:null)}var Nt=Object.assign,nd;function va(e){if(nd===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);nd=t&&t[1]||""}return`
`+nd+e}var rd=!1;function sd(e,t){if(!e||rd)return"";rd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{rd=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?va(e):""}function nN(e){switch(e.tag){case 5:return va(e.type);case 16:return va("Lazy");case 13:return va("Suspense");case 19:return va("SuspenseList");case 0:case 2:case 15:return e=sd(e.type,!1),e;case 11:return e=sd(e.type.render,!1),e;case 1:return e=sd(e.type,!0),e;default:return""}}function df(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Go:return"Fragment";case Ho:return"Portal";case lf:return"Profiler";case Vh:return"StrictMode";case cf:return"Suspense";case uf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case C0:return(e.displayName||"Context")+".Consumer";case N0:return(e._context.displayName||"Context")+".Provider";case qh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wh:return t=e.displayName||null,t!==null?t:df(e.type)||"Memo";case ds:t=e._payload,e=e._init;try{return df(e(t))}catch{}}return null}function rN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return df(t);case 8:return t===Vh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ps(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function E0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sN(e){var t=E0(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function El(e){e._valueTracker||(e._valueTracker=sN(e))}function P0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=E0(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function jc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ff(e,t){var n=t.checked;return Nt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Wp(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ps(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function T0(e,t){t=t.checked,t!=null&&zh(e,"checked",t,!1)}function hf(e,t){T0(e,t);var n=Ps(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?mf(e,t.type,n):t.hasOwnProperty("defaultValue")&&mf(e,t.type,Ps(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Up(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function mf(e,t,n){(t!=="number"||jc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var xa=Array.isArray;function ci(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ps(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function pf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return Nt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Hp(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(K(92));if(xa(n)){if(1<n.length)throw Error(K(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ps(n)}}function R0(e,t){var n=Ps(t.value),r=Ps(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Gp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pl,M0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Pl=Pl||document.createElement("div"),Pl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Pl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $a(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ka={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oN=["Webkit","ms","Moz","O"];Object.keys(ka).forEach(function(e){oN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ka[t]=ka[e]})});function A0(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ka.hasOwnProperty(e)&&ka[e]?(""+t).trim():t+"px"}function L0(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=A0(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var iN=Nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vf(e,t){if(t){if(iN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function xf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yf=null;function Uh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wf=null,ui=null,di=null;function Kp(e){if(e=ol(e)){if(typeof wf!="function")throw Error(K(280));var t=e.stateNode;t&&(t=vu(t),wf(e.stateNode,e.type,t))}}function I0(e){ui?di?di.push(e):di=[e]:ui=e}function $0(){if(ui){var e=ui,t=di;if(di=ui=null,Kp(e),t)for(e=0;e<t.length;e++)Kp(t[e])}}function O0(e,t){return e(t)}function D0(){}var od=!1;function B0(e,t,n){if(od)return e(t,n);od=!0;try{return O0(e,t,n)}finally{od=!1,(ui!==null||di!==null)&&(D0(),$0())}}function Oa(e,t){var n=e.stateNode;if(n===null)return null;var r=vu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(K(231,t,typeof n));return n}var bf=!1;if(Hr)try{var sa={};Object.defineProperty(sa,"passive",{get:function(){bf=!0}}),window.addEventListener("test",sa,sa),window.removeEventListener("test",sa,sa)}catch{bf=!1}function aN(e,t,n,r,s,o,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var Na=!1,Ec=null,Pc=!1,Sf=null,lN={onError:function(e){Na=!0,Ec=e}};function cN(e,t,n,r,s,o,a,l,c){Na=!1,Ec=null,aN.apply(lN,arguments)}function uN(e,t,n,r,s,o,a,l,c){if(cN.apply(this,arguments),Na){if(Na){var u=Ec;Na=!1,Ec=null}else throw Error(K(198));Pc||(Pc=!0,Sf=u)}}function Mo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function F0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Qp(e){if(Mo(e)!==e)throw Error(K(188))}function dN(e){var t=e.alternate;if(!t){if(t=Mo(e),t===null)throw Error(K(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Qp(s),e;if(o===r)return Qp(s),t;o=o.sibling}throw Error(K(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=o;break}if(l===r){a=!0,r=s,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=s;break}if(l===r){a=!0,r=o,n=s;break}l=l.sibling}if(!a)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?e:t}function z0(e){return e=dN(e),e!==null?V0(e):null}function V0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=V0(e);if(t!==null)return t;e=e.sibling}return null}var q0=Hn.unstable_scheduleCallback,Yp=Hn.unstable_cancelCallback,fN=Hn.unstable_shouldYield,hN=Hn.unstable_requestPaint,At=Hn.unstable_now,mN=Hn.unstable_getCurrentPriorityLevel,Hh=Hn.unstable_ImmediatePriority,W0=Hn.unstable_UserBlockingPriority,Tc=Hn.unstable_NormalPriority,pN=Hn.unstable_LowPriority,U0=Hn.unstable_IdlePriority,hu=null,Tr=null;function gN(e){if(Tr&&typeof Tr.onCommitFiberRoot=="function")try{Tr.onCommitFiberRoot(hu,e,void 0,(e.current.flags&128)===128)}catch{}}var hr=Math.clz32?Math.clz32:yN,vN=Math.log,xN=Math.LN2;function yN(e){return e>>>=0,e===0?32:31-(vN(e)/xN|0)|0}var Tl=64,Rl=4194304;function ya(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Rc(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=ya(l):(o&=a,o!==0&&(r=ya(o)))}else a=n&~s,a!==0?r=ya(a):o!==0&&(r=ya(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-hr(t),s=1<<n,r|=e[n],t&=~s;return r}function wN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bN(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-hr(o),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=wN(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function kf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function H0(){var e=Tl;return Tl<<=1,!(Tl&4194240)&&(Tl=64),e}function id(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function rl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-hr(t),e[t]=n}function SN(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-hr(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function Gh(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-hr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var at=0;function G0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var K0,Kh,Q0,Y0,X0,Nf=!1,_l=[],ys=null,ws=null,bs=null,Da=new Map,Ba=new Map,ms=[],kN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xp(e,t){switch(e){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":ws=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":Da.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ba.delete(t.pointerId)}}function oa(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=ol(t),t!==null&&Kh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function NN(e,t,n,r,s){switch(t){case"focusin":return ys=oa(ys,e,t,n,r,s),!0;case"dragenter":return ws=oa(ws,e,t,n,r,s),!0;case"mouseover":return bs=oa(bs,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Da.set(o,oa(Da.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Ba.set(o,oa(Ba.get(o)||null,e,t,n,r,s)),!0}return!1}function Z0(e){var t=oo(e.target);if(t!==null){var n=Mo(t);if(n!==null){if(t=n.tag,t===13){if(t=F0(n),t!==null){e.blockedOn=t,X0(e.priority,function(){Q0(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Cf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);yf=r,n.target.dispatchEvent(r),yf=null}else return t=ol(n),t!==null&&Kh(t),e.blockedOn=n,!1;t.shift()}return!0}function Zp(e,t,n){oc(e)&&n.delete(t)}function CN(){Nf=!1,ys!==null&&oc(ys)&&(ys=null),ws!==null&&oc(ws)&&(ws=null),bs!==null&&oc(bs)&&(bs=null),Da.forEach(Zp),Ba.forEach(Zp)}function ia(e,t){e.blockedOn===t&&(e.blockedOn=null,Nf||(Nf=!0,Hn.unstable_scheduleCallback(Hn.unstable_NormalPriority,CN)))}function Fa(e){function t(s){return ia(s,e)}if(0<_l.length){ia(_l[0],e);for(var n=1;n<_l.length;n++){var r=_l[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ys!==null&&ia(ys,e),ws!==null&&ia(ws,e),bs!==null&&ia(bs,e),Da.forEach(t),Ba.forEach(t),n=0;n<ms.length;n++)r=ms[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ms.length&&(n=ms[0],n.blockedOn===null);)Z0(n),n.blockedOn===null&&ms.shift()}var fi=Zr.ReactCurrentBatchConfig,_c=!0;function jN(e,t,n,r){var s=at,o=fi.transition;fi.transition=null;try{at=1,Qh(e,t,n,r)}finally{at=s,fi.transition=o}}function EN(e,t,n,r){var s=at,o=fi.transition;fi.transition=null;try{at=4,Qh(e,t,n,r)}finally{at=s,fi.transition=o}}function Qh(e,t,n,r){if(_c){var s=Cf(e,t,n,r);if(s===null)gd(e,t,r,Mc,n),Xp(e,r);else if(NN(s,e,t,n,r))r.stopPropagation();else if(Xp(e,r),t&4&&-1<kN.indexOf(e)){for(;s!==null;){var o=ol(s);if(o!==null&&K0(o),o=Cf(e,t,n,r),o===null&&gd(e,t,r,Mc,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else gd(e,t,r,null,n)}}var Mc=null;function Cf(e,t,n,r){if(Mc=null,e=Uh(r),e=oo(e),e!==null)if(t=Mo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=F0(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Mc=e,null}function J0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mN()){case Hh:return 1;case W0:return 4;case Tc:case pN:return 16;case U0:return 536870912;default:return 16}default:return 16}}var gs=null,Yh=null,ic=null;function ex(){if(ic)return ic;var e,t=Yh,n=t.length,r,s="value"in gs?gs.value:gs.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[o-r];r++);return ic=s.slice(e,1<r?1-r:void 0)}function ac(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ml(){return!0}function Jp(){return!1}function Kn(e){function t(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ml:Jp,this.isPropagationStopped=Jp,this}return Nt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ml)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ml)},persist:function(){},isPersistent:Ml}),t}var zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xh=Kn(zi),sl=Nt({},zi,{view:0,detail:0}),PN=Kn(sl),ad,ld,aa,mu=Nt({},sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==aa&&(aa&&e.type==="mousemove"?(ad=e.screenX-aa.screenX,ld=e.screenY-aa.screenY):ld=ad=0,aa=e),ad)},movementY:function(e){return"movementY"in e?e.movementY:ld}}),eg=Kn(mu),TN=Nt({},mu,{dataTransfer:0}),RN=Kn(TN),_N=Nt({},sl,{relatedTarget:0}),cd=Kn(_N),MN=Nt({},zi,{animationName:0,elapsedTime:0,pseudoElement:0}),AN=Kn(MN),LN=Nt({},zi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),IN=Kn(LN),$N=Nt({},zi,{data:0}),tg=Kn($N),ON={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FN(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=BN[e])?!!t[e]:!1}function Zh(){return FN}var zN=Nt({},sl,{key:function(e){if(e.key){var t=ON[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ac(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?DN[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zh,charCode:function(e){return e.type==="keypress"?ac(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ac(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),VN=Kn(zN),qN=Nt({},mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ng=Kn(qN),WN=Nt({},sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zh}),UN=Kn(WN),HN=Nt({},zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),GN=Kn(HN),KN=Nt({},mu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),QN=Kn(KN),YN=[9,13,27,32],Jh=Hr&&"CompositionEvent"in window,Ca=null;Hr&&"documentMode"in document&&(Ca=document.documentMode);var XN=Hr&&"TextEvent"in window&&!Ca,tx=Hr&&(!Jh||Ca&&8<Ca&&11>=Ca),rg=" ",sg=!1;function nx(e,t){switch(e){case"keyup":return YN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ko=!1;function ZN(e,t){switch(e){case"compositionend":return rx(t);case"keypress":return t.which!==32?null:(sg=!0,rg);case"textInput":return e=t.data,e===rg&&sg?null:e;default:return null}}function JN(e,t){if(Ko)return e==="compositionend"||!Jh&&nx(e,t)?(e=ex(),ic=Yh=gs=null,Ko=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tx&&t.locale!=="ko"?null:t.data;default:return null}}var eC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function og(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!eC[e.type]:t==="textarea"}function sx(e,t,n,r){I0(r),t=Ac(t,"onChange"),0<t.length&&(n=new Xh("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ja=null,za=null;function tC(e){px(e,0)}function pu(e){var t=Xo(e);if(P0(t))return e}function nC(e,t){if(e==="change")return t}var ox=!1;if(Hr){var ud;if(Hr){var dd="oninput"in document;if(!dd){var ig=document.createElement("div");ig.setAttribute("oninput","return;"),dd=typeof ig.oninput=="function"}ud=dd}else ud=!1;ox=ud&&(!document.documentMode||9<document.documentMode)}function ag(){ja&&(ja.detachEvent("onpropertychange",ix),za=ja=null)}function ix(e){if(e.propertyName==="value"&&pu(za)){var t=[];sx(t,za,e,Uh(e)),B0(tC,t)}}function rC(e,t,n){e==="focusin"?(ag(),ja=t,za=n,ja.attachEvent("onpropertychange",ix)):e==="focusout"&&ag()}function sC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pu(za)}function oC(e,t){if(e==="click")return pu(t)}function iC(e,t){if(e==="input"||e==="change")return pu(t)}function aC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pr=typeof Object.is=="function"?Object.is:aC;function Va(e,t){if(pr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!af.call(t,s)||!pr(e[s],t[s]))return!1}return!0}function lg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cg(e,t){var n=lg(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lg(n)}}function ax(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ax(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lx(){for(var e=window,t=jc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=jc(e.document)}return t}function em(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lC(e){var t=lx(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ax(n.ownerDocument.documentElement,n)){if(r!==null&&em(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=cg(n,o);var a=cg(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var cC=Hr&&"documentMode"in document&&11>=document.documentMode,Qo=null,jf=null,Ea=null,Ef=!1;function ug(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ef||Qo==null||Qo!==jc(r)||(r=Qo,"selectionStart"in r&&em(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ea&&Va(Ea,r)||(Ea=r,r=Ac(jf,"onSelect"),0<r.length&&(t=new Xh("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Qo)))}function Al(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yo={animationend:Al("Animation","AnimationEnd"),animationiteration:Al("Animation","AnimationIteration"),animationstart:Al("Animation","AnimationStart"),transitionend:Al("Transition","TransitionEnd")},fd={},cx={};Hr&&(cx=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function gu(e){if(fd[e])return fd[e];if(!Yo[e])return e;var t=Yo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in cx)return fd[e]=t[n];return e}var ux=gu("animationend"),dx=gu("animationiteration"),fx=gu("animationstart"),hx=gu("transitionend"),mx=new Map,dg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zs(e,t){mx.set(e,t),_o(t,[e])}for(var hd=0;hd<dg.length;hd++){var md=dg[hd],uC=md.toLowerCase(),dC=md[0].toUpperCase()+md.slice(1);zs(uC,"on"+dC)}zs(ux,"onAnimationEnd");zs(dx,"onAnimationIteration");zs(fx,"onAnimationStart");zs("dblclick","onDoubleClick");zs("focusin","onFocus");zs("focusout","onBlur");zs(hx,"onTransitionEnd");Ni("onMouseEnter",["mouseout","mouseover"]);Ni("onMouseLeave",["mouseout","mouseover"]);Ni("onPointerEnter",["pointerout","pointerover"]);Ni("onPointerLeave",["pointerout","pointerover"]);_o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_o("onBeforeInput",["compositionend","keypress","textInput","paste"]);_o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fC=new Set("cancel close invalid load scroll toggle".split(" ").concat(wa));function fg(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,uN(r,t,void 0,e),e.currentTarget=null}function px(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;fg(s,l,u),o=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;fg(s,l,u),o=c}}}if(Pc)throw e=Sf,Pc=!1,Sf=null,e}function pt(e,t){var n=t[Mf];n===void 0&&(n=t[Mf]=new Set);var r=e+"__bubble";n.has(r)||(gx(t,e,2,!1),n.add(r))}function pd(e,t,n){var r=0;t&&(r|=4),gx(n,e,r,t)}var Ll="_reactListening"+Math.random().toString(36).slice(2);function qa(e){if(!e[Ll]){e[Ll]=!0,k0.forEach(function(n){n!=="selectionchange"&&(fC.has(n)||pd(n,!1,e),pd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ll]||(t[Ll]=!0,pd("selectionchange",!1,t))}}function gx(e,t,n,r){switch(J0(t)){case 1:var s=jN;break;case 4:s=EN;break;default:s=Qh}n=s.bind(null,t,n,e),s=void 0,!bf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function gd(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=oo(l),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}l=l.parentNode}}r=r.return}B0(function(){var u=o,f=Uh(n),h=[];e:{var m=mx.get(e);if(m!==void 0){var y=Xh,g=e;switch(e){case"keypress":if(ac(n)===0)break e;case"keydown":case"keyup":y=VN;break;case"focusin":g="focus",y=cd;break;case"focusout":g="blur",y=cd;break;case"beforeblur":case"afterblur":y=cd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=eg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=RN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=UN;break;case ux:case dx:case fx:y=AN;break;case hx:y=GN;break;case"scroll":y=PN;break;case"wheel":y=QN;break;case"copy":case"cut":case"paste":y=IN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=ng}var p=(t&4)!==0,w=!p&&e==="scroll",x=p?m!==null?m+"Capture":null:m;p=[];for(var v=u,b;v!==null;){b=v;var k=b.stateNode;if(b.tag===5&&k!==null&&(b=k,x!==null&&(k=Oa(v,x),k!=null&&p.push(Wa(v,k,b)))),w)break;v=v.return}0<p.length&&(m=new y(m,g,null,n,f),h.push({event:m,listeners:p}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&n!==yf&&(g=n.relatedTarget||n.fromElement)&&(oo(g)||g[Gr]))break e;if((y||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,y?(g=n.relatedTarget||n.toElement,y=u,g=g?oo(g):null,g!==null&&(w=Mo(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=u),y!==g)){if(p=eg,k="onMouseLeave",x="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(p=ng,k="onPointerLeave",x="onPointerEnter",v="pointer"),w=y==null?m:Xo(y),b=g==null?m:Xo(g),m=new p(k,v+"leave",y,n,f),m.target=w,m.relatedTarget=b,k=null,oo(f)===u&&(p=new p(x,v+"enter",g,n,f),p.target=b,p.relatedTarget=w,k=p),w=k,y&&g)t:{for(p=y,x=g,v=0,b=p;b;b=zo(b))v++;for(b=0,k=x;k;k=zo(k))b++;for(;0<v-b;)p=zo(p),v--;for(;0<b-v;)x=zo(x),b--;for(;v--;){if(p===x||x!==null&&p===x.alternate)break t;p=zo(p),x=zo(x)}p=null}else p=null;y!==null&&hg(h,m,y,p,!1),g!==null&&w!==null&&hg(h,w,g,p,!0)}}e:{if(m=u?Xo(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var S=nC;else if(og(m))if(ox)S=iC;else{S=sC;var C=rC}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=oC);if(S&&(S=S(e,u))){sx(h,S,n,f);break e}C&&C(e,m,u),e==="focusout"&&(C=m._wrapperState)&&C.controlled&&m.type==="number"&&mf(m,"number",m.value)}switch(C=u?Xo(u):window,e){case"focusin":(og(C)||C.contentEditable==="true")&&(Qo=C,jf=u,Ea=null);break;case"focusout":Ea=jf=Qo=null;break;case"mousedown":Ef=!0;break;case"contextmenu":case"mouseup":case"dragend":Ef=!1,ug(h,n,f);break;case"selectionchange":if(cC)break;case"keydown":case"keyup":ug(h,n,f)}var N;if(Jh)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Ko?nx(e,n)&&(j="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(tx&&n.locale!=="ko"&&(Ko||j!=="onCompositionStart"?j==="onCompositionEnd"&&Ko&&(N=ex()):(gs=f,Yh="value"in gs?gs.value:gs.textContent,Ko=!0)),C=Ac(u,j),0<C.length&&(j=new tg(j,e,null,n,f),h.push({event:j,listeners:C}),N?j.data=N:(N=rx(n),N!==null&&(j.data=N)))),(N=XN?ZN(e,n):JN(e,n))&&(u=Ac(u,"onBeforeInput"),0<u.length&&(f=new tg("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:u}),f.data=N))}px(h,t)})}function Wa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ac(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Oa(e,n),o!=null&&r.unshift(Wa(e,o,s)),o=Oa(e,t),o!=null&&r.push(Wa(e,o,s))),e=e.return}return r}function zo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hg(e,t,n,r,s){for(var o=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Oa(n,o),c!=null&&a.unshift(Wa(n,c,l))):s||(c=Oa(n,o),c!=null&&a.push(Wa(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var hC=/\r\n?/g,mC=/\u0000|\uFFFD/g;function mg(e){return(typeof e=="string"?e:""+e).replace(hC,`
`).replace(mC,"")}function Il(e,t,n){if(t=mg(t),mg(e)!==t&&n)throw Error(K(425))}function Lc(){}var Pf=null,Tf=null;function Rf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var _f=typeof setTimeout=="function"?setTimeout:void 0,pC=typeof clearTimeout=="function"?clearTimeout:void 0,pg=typeof Promise=="function"?Promise:void 0,gC=typeof queueMicrotask=="function"?queueMicrotask:typeof pg<"u"?function(e){return pg.resolve(null).then(e).catch(vC)}:_f;function vC(e){setTimeout(function(){throw e})}function vd(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Fa(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Fa(t)}function Ss(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function gg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Vi=Math.random().toString(36).slice(2),jr="__reactFiber$"+Vi,Ua="__reactProps$"+Vi,Gr="__reactContainer$"+Vi,Mf="__reactEvents$"+Vi,xC="__reactListeners$"+Vi,yC="__reactHandles$"+Vi;function oo(e){var t=e[jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Gr]||n[jr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=gg(e);e!==null;){if(n=e[jr])return n;e=gg(e)}return t}e=n,n=e.parentNode}return null}function ol(e){return e=e[jr]||e[Gr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function vu(e){return e[Ua]||null}var Af=[],Zo=-1;function Vs(e){return{current:e}}function gt(e){0>Zo||(e.current=Af[Zo],Af[Zo]=null,Zo--)}function ft(e,t){Zo++,Af[Zo]=e.current,e.current=t}var Ts={},pn=Vs(Ts),_n=Vs(!1),go=Ts;function Ci(e,t){var n=e.type.contextTypes;if(!n)return Ts;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Mn(e){return e=e.childContextTypes,e!=null}function Ic(){gt(_n),gt(pn)}function vg(e,t,n){if(pn.current!==Ts)throw Error(K(168));ft(pn,t),ft(_n,n)}function vx(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(K(108,rN(e)||"Unknown",s));return Nt({},n,r)}function $c(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ts,go=pn.current,ft(pn,e),ft(_n,_n.current),!0}function xg(e,t,n){var r=e.stateNode;if(!r)throw Error(K(169));n?(e=vx(e,t,go),r.__reactInternalMemoizedMergedChildContext=e,gt(_n),gt(pn),ft(pn,e)):gt(_n),ft(_n,n)}var Vr=null,xu=!1,xd=!1;function xx(e){Vr===null?Vr=[e]:Vr.push(e)}function wC(e){xu=!0,xx(e)}function qs(){if(!xd&&Vr!==null){xd=!0;var e=0,t=at;try{var n=Vr;for(at=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Vr=null,xu=!1}catch(s){throw Vr!==null&&(Vr=Vr.slice(e+1)),q0(Hh,qs),s}finally{at=t,xd=!1}}return null}var Jo=[],ei=0,Oc=null,Dc=0,Zn=[],Jn=0,vo=null,qr=1,Wr="";function ro(e,t){Jo[ei++]=Dc,Jo[ei++]=Oc,Oc=e,Dc=t}function yx(e,t,n){Zn[Jn++]=qr,Zn[Jn++]=Wr,Zn[Jn++]=vo,vo=e;var r=qr;e=Wr;var s=32-hr(r)-1;r&=~(1<<s),n+=1;var o=32-hr(t)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,qr=1<<32-hr(t)+s|n<<s|r,Wr=o+e}else qr=1<<o|n<<s|r,Wr=e}function tm(e){e.return!==null&&(ro(e,1),yx(e,1,0))}function nm(e){for(;e===Oc;)Oc=Jo[--ei],Jo[ei]=null,Dc=Jo[--ei],Jo[ei]=null;for(;e===vo;)vo=Zn[--Jn],Zn[Jn]=null,Wr=Zn[--Jn],Zn[Jn]=null,qr=Zn[--Jn],Zn[Jn]=null}var Wn=null,zn=null,wt=!1,fr=null;function wx(e,t){var n=tr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function yg(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Wn=e,zn=Ss(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Wn=e,zn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=vo!==null?{id:qr,overflow:Wr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=tr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Wn=e,zn=null,!0):!1;default:return!1}}function Lf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function If(e){if(wt){var t=zn;if(t){var n=t;if(!yg(e,t)){if(Lf(e))throw Error(K(418));t=Ss(n.nextSibling);var r=Wn;t&&yg(e,t)?wx(r,n):(e.flags=e.flags&-4097|2,wt=!1,Wn=e)}}else{if(Lf(e))throw Error(K(418));e.flags=e.flags&-4097|2,wt=!1,Wn=e}}}function wg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wn=e}function $l(e){if(e!==Wn)return!1;if(!wt)return wg(e),wt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Rf(e.type,e.memoizedProps)),t&&(t=zn)){if(Lf(e))throw bx(),Error(K(418));for(;t;)wx(e,t),t=Ss(t.nextSibling)}if(wg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){zn=Ss(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}zn=null}}else zn=Wn?Ss(e.stateNode.nextSibling):null;return!0}function bx(){for(var e=zn;e;)e=Ss(e.nextSibling)}function ji(){zn=Wn=null,wt=!1}function rm(e){fr===null?fr=[e]:fr.push(e)}var bC=Zr.ReactCurrentBatchConfig;function la(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,e))}return e}function Ol(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bg(e){var t=e._init;return t(e._payload)}function Sx(e){function t(x,v){if(e){var b=x.deletions;b===null?(x.deletions=[v],x.flags|=16):b.push(v)}}function n(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function s(x,v){return x=js(x,v),x.index=0,x.sibling=null,x}function o(x,v,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<v?(x.flags|=2,v):b):(x.flags|=2,v)):(x.flags|=1048576,v)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,v,b,k){return v===null||v.tag!==6?(v=Cd(b,x.mode,k),v.return=x,v):(v=s(v,b),v.return=x,v)}function c(x,v,b,k){var S=b.type;return S===Go?f(x,v,b.props.children,k,b.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ds&&bg(S)===v.type)?(k=s(v,b.props),k.ref=la(x,v,b),k.return=x,k):(k=mc(b.type,b.key,b.props,null,x.mode,k),k.ref=la(x,v,b),k.return=x,k)}function u(x,v,b,k){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=jd(b,x.mode,k),v.return=x,v):(v=s(v,b.children||[]),v.return=x,v)}function f(x,v,b,k,S){return v===null||v.tag!==7?(v=fo(b,x.mode,k,S),v.return=x,v):(v=s(v,b),v.return=x,v)}function h(x,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Cd(""+v,x.mode,b),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case jl:return b=mc(v.type,v.key,v.props,null,x.mode,b),b.ref=la(x,null,v),b.return=x,b;case Ho:return v=jd(v,x.mode,b),v.return=x,v;case ds:var k=v._init;return h(x,k(v._payload),b)}if(xa(v)||ra(v))return v=fo(v,x.mode,b,null),v.return=x,v;Ol(x,v)}return null}function m(x,v,b,k){var S=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:l(x,v,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case jl:return b.key===S?c(x,v,b,k):null;case Ho:return b.key===S?u(x,v,b,k):null;case ds:return S=b._init,m(x,v,S(b._payload),k)}if(xa(b)||ra(b))return S!==null?null:f(x,v,b,k,null);Ol(x,b)}return null}function y(x,v,b,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return x=x.get(b)||null,l(v,x,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case jl:return x=x.get(k.key===null?b:k.key)||null,c(v,x,k,S);case Ho:return x=x.get(k.key===null?b:k.key)||null,u(v,x,k,S);case ds:var C=k._init;return y(x,v,b,C(k._payload),S)}if(xa(k)||ra(k))return x=x.get(b)||null,f(v,x,k,S,null);Ol(v,k)}return null}function g(x,v,b,k){for(var S=null,C=null,N=v,j=v=0,R=null;N!==null&&j<b.length;j++){N.index>j?(R=N,N=null):R=N.sibling;var P=m(x,N,b[j],k);if(P===null){N===null&&(N=R);break}e&&N&&P.alternate===null&&t(x,N),v=o(P,v,j),C===null?S=P:C.sibling=P,C=P,N=R}if(j===b.length)return n(x,N),wt&&ro(x,j),S;if(N===null){for(;j<b.length;j++)N=h(x,b[j],k),N!==null&&(v=o(N,v,j),C===null?S=N:C.sibling=N,C=N);return wt&&ro(x,j),S}for(N=r(x,N);j<b.length;j++)R=y(N,x,j,b[j],k),R!==null&&(e&&R.alternate!==null&&N.delete(R.key===null?j:R.key),v=o(R,v,j),C===null?S=R:C.sibling=R,C=R);return e&&N.forEach(function(D){return t(x,D)}),wt&&ro(x,j),S}function p(x,v,b,k){var S=ra(b);if(typeof S!="function")throw Error(K(150));if(b=S.call(b),b==null)throw Error(K(151));for(var C=S=null,N=v,j=v=0,R=null,P=b.next();N!==null&&!P.done;j++,P=b.next()){N.index>j?(R=N,N=null):R=N.sibling;var D=m(x,N,P.value,k);if(D===null){N===null&&(N=R);break}e&&N&&D.alternate===null&&t(x,N),v=o(D,v,j),C===null?S=D:C.sibling=D,C=D,N=R}if(P.done)return n(x,N),wt&&ro(x,j),S;if(N===null){for(;!P.done;j++,P=b.next())P=h(x,P.value,k),P!==null&&(v=o(P,v,j),C===null?S=P:C.sibling=P,C=P);return wt&&ro(x,j),S}for(N=r(x,N);!P.done;j++,P=b.next())P=y(N,x,j,P.value,k),P!==null&&(e&&P.alternate!==null&&N.delete(P.key===null?j:P.key),v=o(P,v,j),C===null?S=P:C.sibling=P,C=P);return e&&N.forEach(function(I){return t(x,I)}),wt&&ro(x,j),S}function w(x,v,b,k){if(typeof b=="object"&&b!==null&&b.type===Go&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case jl:e:{for(var S=b.key,C=v;C!==null;){if(C.key===S){if(S=b.type,S===Go){if(C.tag===7){n(x,C.sibling),v=s(C,b.props.children),v.return=x,x=v;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ds&&bg(S)===C.type){n(x,C.sibling),v=s(C,b.props),v.ref=la(x,C,b),v.return=x,x=v;break e}n(x,C);break}else t(x,C);C=C.sibling}b.type===Go?(v=fo(b.props.children,x.mode,k,b.key),v.return=x,x=v):(k=mc(b.type,b.key,b.props,null,x.mode,k),k.ref=la(x,v,b),k.return=x,x=k)}return a(x);case Ho:e:{for(C=b.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(x,v.sibling),v=s(v,b.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else t(x,v);v=v.sibling}v=jd(b,x.mode,k),v.return=x,x=v}return a(x);case ds:return C=b._init,w(x,v,C(b._payload),k)}if(xa(b))return g(x,v,b,k);if(ra(b))return p(x,v,b,k);Ol(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(x,v.sibling),v=s(v,b),v.return=x,x=v):(n(x,v),v=Cd(b,x.mode,k),v.return=x,x=v),a(x)):n(x,v)}return w}var Ei=Sx(!0),kx=Sx(!1),Bc=Vs(null),Fc=null,ti=null,sm=null;function om(){sm=ti=Fc=null}function im(e){var t=Bc.current;gt(Bc),e._currentValue=t}function $f(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function hi(e,t){Fc=e,sm=ti=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Rn=!0),e.firstContext=null)}function rr(e){var t=e._currentValue;if(sm!==e)if(e={context:e,memoizedValue:t,next:null},ti===null){if(Fc===null)throw Error(K(308));ti=e,Fc.dependencies={lanes:0,firstContext:e}}else ti=ti.next=e;return t}var io=null;function am(e){io===null?io=[e]:io.push(e)}function Nx(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,am(t)):(n.next=s.next,s.next=n),t.interleaved=n,Kr(e,r)}function Kr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var fs=!1;function lm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cx(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ur(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ks(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,tt&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Kr(e,n)}return s=r.interleaved,s===null?(t.next=t,am(r)):(t.next=s.next,s.next=t),r.interleaved=t,Kr(e,n)}function lc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Gh(e,n)}}function Sg(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zc(e,t,n,r){var s=e.updateQueue;fs=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(o!==null){var h=s.baseState;a=0,f=u=c=null,l=o;do{var m=l.lane,y=l.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,p=l;switch(m=t,y=n,p.tag){case 1:if(g=p.payload,typeof g=="function"){h=g.call(y,h,m);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,m=typeof g=="function"?g.call(y,h,m):g,m==null)break e;h=Nt({},h,m);break e;case 2:fs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=y,c=h):f=f.next=y,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);yo|=a,e.lanes=a,e.memoizedState=h}}function kg(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(K(191,s));s.call(r)}}}var il={},Rr=Vs(il),Ha=Vs(il),Ga=Vs(il);function ao(e){if(e===il)throw Error(K(174));return e}function cm(e,t){switch(ft(Ga,t),ft(Ha,e),ft(Rr,il),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:gf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=gf(t,e)}gt(Rr),ft(Rr,t)}function Pi(){gt(Rr),gt(Ha),gt(Ga)}function jx(e){ao(Ga.current);var t=ao(Rr.current),n=gf(t,e.type);t!==n&&(ft(Ha,e),ft(Rr,n))}function um(e){Ha.current===e&&(gt(Rr),gt(Ha))}var St=Vs(0);function Vc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yd=[];function dm(){for(var e=0;e<yd.length;e++)yd[e]._workInProgressVersionPrimary=null;yd.length=0}var cc=Zr.ReactCurrentDispatcher,wd=Zr.ReactCurrentBatchConfig,xo=0,kt=null,zt=null,Ht=null,qc=!1,Pa=!1,Ka=0,SC=0;function cn(){throw Error(K(321))}function fm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!pr(e[n],t[n]))return!1;return!0}function hm(e,t,n,r,s,o){if(xo=o,kt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,cc.current=e===null||e.memoizedState===null?jC:EC,e=n(r,s),Pa){o=0;do{if(Pa=!1,Ka=0,25<=o)throw Error(K(301));o+=1,Ht=zt=null,t.updateQueue=null,cc.current=PC,e=n(r,s)}while(Pa)}if(cc.current=Wc,t=zt!==null&&zt.next!==null,xo=0,Ht=zt=kt=null,qc=!1,t)throw Error(K(300));return e}function mm(){var e=Ka!==0;return Ka=0,e}function Cr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?kt.memoizedState=Ht=e:Ht=Ht.next=e,Ht}function sr(){if(zt===null){var e=kt.alternate;e=e!==null?e.memoizedState:null}else e=zt.next;var t=Ht===null?kt.memoizedState:Ht.next;if(t!==null)Ht=t,zt=e;else{if(e===null)throw Error(K(310));zt=e,e={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Ht===null?kt.memoizedState=Ht=e:Ht=Ht.next=e}return Ht}function Qa(e,t){return typeof t=="function"?t(e):t}function bd(e){var t=sr(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=zt,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var l=a=null,c=null,u=o;do{var f=u.lane;if((xo&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=r):c=c.next=h,kt.lanes|=f,yo|=f}u=u.next}while(u!==null&&u!==o);c===null?a=r:c.next=l,pr(r,t.memoizedState)||(Rn=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,kt.lanes|=o,yo|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Sd(e){var t=sr(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);pr(o,t.memoizedState)||(Rn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ex(){}function Px(e,t){var n=kt,r=sr(),s=t(),o=!pr(r.memoizedState,s);if(o&&(r.memoizedState=s,Rn=!0),r=r.queue,pm(_x.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Ht!==null&&Ht.memoizedState.tag&1){if(n.flags|=2048,Ya(9,Rx.bind(null,n,r,s,t),void 0,null),Gt===null)throw Error(K(349));xo&30||Tx(n,t,s)}return s}function Tx(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=kt.updateQueue,t===null?(t={lastEffect:null,stores:null},kt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Rx(e,t,n,r){t.value=n,t.getSnapshot=r,Mx(t)&&Ax(e)}function _x(e,t,n){return n(function(){Mx(t)&&Ax(e)})}function Mx(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pr(e,n)}catch{return!0}}function Ax(e){var t=Kr(e,1);t!==null&&mr(t,e,1,-1)}function Ng(e){var t=Cr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:e},t.queue=e,e=e.dispatch=CC.bind(null,kt,e),[t.memoizedState,e]}function Ya(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=kt.updateQueue,t===null?(t={lastEffect:null,stores:null},kt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Lx(){return sr().memoizedState}function uc(e,t,n,r){var s=Cr();kt.flags|=e,s.memoizedState=Ya(1|t,n,void 0,r===void 0?null:r)}function yu(e,t,n,r){var s=sr();r=r===void 0?null:r;var o=void 0;if(zt!==null){var a=zt.memoizedState;if(o=a.destroy,r!==null&&fm(r,a.deps)){s.memoizedState=Ya(t,n,o,r);return}}kt.flags|=e,s.memoizedState=Ya(1|t,n,o,r)}function Cg(e,t){return uc(8390656,8,e,t)}function pm(e,t){return yu(2048,8,e,t)}function Ix(e,t){return yu(4,2,e,t)}function $x(e,t){return yu(4,4,e,t)}function Ox(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dx(e,t,n){return n=n!=null?n.concat([e]):null,yu(4,4,Ox.bind(null,t,e),n)}function gm(){}function Bx(e,t){var n=sr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&fm(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Fx(e,t){var n=sr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&fm(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function zx(e,t,n){return xo&21?(pr(n,t)||(n=H0(),kt.lanes|=n,yo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Rn=!0),e.memoizedState=n)}function kC(e,t){var n=at;at=n!==0&&4>n?n:4,e(!0);var r=wd.transition;wd.transition={};try{e(!1),t()}finally{at=n,wd.transition=r}}function Vx(){return sr().memoizedState}function NC(e,t,n){var r=Cs(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qx(e))Wx(t,n);else if(n=Nx(e,t,n,r),n!==null){var s=kn();mr(n,e,r,s),Ux(n,t,r)}}function CC(e,t,n){var r=Cs(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qx(e))Wx(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,l=o(a,n);if(s.hasEagerState=!0,s.eagerState=l,pr(l,a)){var c=t.interleaved;c===null?(s.next=s,am(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Nx(e,t,s,r),n!==null&&(s=kn(),mr(n,e,r,s),Ux(n,t,r))}}function qx(e){var t=e.alternate;return e===kt||t!==null&&t===kt}function Wx(e,t){Pa=qc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ux(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Gh(e,n)}}var Wc={readContext:rr,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},jC={readContext:rr,useCallback:function(e,t){return Cr().memoizedState=[e,t===void 0?null:t],e},useContext:rr,useEffect:Cg,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,uc(4194308,4,Ox.bind(null,t,e),n)},useLayoutEffect:function(e,t){return uc(4194308,4,e,t)},useInsertionEffect:function(e,t){return uc(4,2,e,t)},useMemo:function(e,t){var n=Cr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Cr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=NC.bind(null,kt,e),[r.memoizedState,e]},useRef:function(e){var t=Cr();return e={current:e},t.memoizedState=e},useState:Ng,useDebugValue:gm,useDeferredValue:function(e){return Cr().memoizedState=e},useTransition:function(){var e=Ng(!1),t=e[0];return e=kC.bind(null,e[1]),Cr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=kt,s=Cr();if(wt){if(n===void 0)throw Error(K(407));n=n()}else{if(n=t(),Gt===null)throw Error(K(349));xo&30||Tx(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Cg(_x.bind(null,r,o,e),[e]),r.flags|=2048,Ya(9,Rx.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Cr(),t=Gt.identifierPrefix;if(wt){var n=Wr,r=qr;n=(r&~(1<<32-hr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ka++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=SC++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},EC={readContext:rr,useCallback:Bx,useContext:rr,useEffect:pm,useImperativeHandle:Dx,useInsertionEffect:Ix,useLayoutEffect:$x,useMemo:Fx,useReducer:bd,useRef:Lx,useState:function(){return bd(Qa)},useDebugValue:gm,useDeferredValue:function(e){var t=sr();return zx(t,zt.memoizedState,e)},useTransition:function(){var e=bd(Qa)[0],t=sr().memoizedState;return[e,t]},useMutableSource:Ex,useSyncExternalStore:Px,useId:Vx,unstable_isNewReconciler:!1},PC={readContext:rr,useCallback:Bx,useContext:rr,useEffect:pm,useImperativeHandle:Dx,useInsertionEffect:Ix,useLayoutEffect:$x,useMemo:Fx,useReducer:Sd,useRef:Lx,useState:function(){return Sd(Qa)},useDebugValue:gm,useDeferredValue:function(e){var t=sr();return zt===null?t.memoizedState=e:zx(t,zt.memoizedState,e)},useTransition:function(){var e=Sd(Qa)[0],t=sr().memoizedState;return[e,t]},useMutableSource:Ex,useSyncExternalStore:Px,useId:Vx,unstable_isNewReconciler:!1};function cr(e,t){if(e&&e.defaultProps){t=Nt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Of(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Nt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var wu={isMounted:function(e){return(e=e._reactInternals)?Mo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=kn(),s=Cs(e),o=Ur(r,s);o.payload=t,n!=null&&(o.callback=n),t=ks(e,o,s),t!==null&&(mr(t,e,s,r),lc(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=kn(),s=Cs(e),o=Ur(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ks(e,o,s),t!==null&&(mr(t,e,s,r),lc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=kn(),r=Cs(e),s=Ur(n,r);s.tag=2,t!=null&&(s.callback=t),t=ks(e,s,r),t!==null&&(mr(t,e,r,n),lc(t,e,r))}};function jg(e,t,n,r,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!Va(n,r)||!Va(s,o):!0}function Hx(e,t,n){var r=!1,s=Ts,o=t.contextType;return typeof o=="object"&&o!==null?o=rr(o):(s=Mn(t)?go:pn.current,r=t.contextTypes,o=(r=r!=null)?Ci(e,s):Ts),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=wu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Eg(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wu.enqueueReplaceState(t,t.state,null)}function Df(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},lm(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=rr(o):(o=Mn(t)?go:pn.current,s.context=Ci(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Of(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&wu.enqueueReplaceState(s,s.state,null),zc(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ti(e,t){try{var n="",r=t;do n+=nN(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function kd(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Bf(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var TC=typeof WeakMap=="function"?WeakMap:Map;function Gx(e,t,n){n=Ur(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hc||(Hc=!0,Qf=r),Bf(e,t)},n}function Kx(e,t,n){n=Ur(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Bf(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Bf(e,t),typeof r!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Pg(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new TC;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=qC.bind(null,e,t,n),t.then(e,e))}function Tg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Rg(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ur(-1,1),t.tag=2,ks(n,t,1))),n.lanes|=1),e)}var RC=Zr.ReactCurrentOwner,Rn=!1;function wn(e,t,n,r){t.child=e===null?kx(t,null,n,r):Ei(t,e.child,n,r)}function _g(e,t,n,r,s){n=n.render;var o=t.ref;return hi(t,s),r=hm(e,t,n,r,o,s),n=mm(),e!==null&&!Rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Qr(e,t,s)):(wt&&n&&tm(t),t.flags|=1,wn(e,t,r,s),t.child)}function Mg(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!Nm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Qx(e,t,o,r,s)):(e=mc(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Va,n(a,r)&&e.ref===t.ref)return Qr(e,t,s)}return t.flags|=1,e=js(o,r),e.ref=t.ref,e.return=t,t.child=e}function Qx(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Va(o,r)&&e.ref===t.ref)if(Rn=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(Rn=!0);else return t.lanes=e.lanes,Qr(e,t,s)}return Ff(e,t,n,r,s)}function Yx(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(ri,Bn),Bn|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ft(ri,Bn),Bn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ft(ri,Bn),Bn|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,ft(ri,Bn),Bn|=r;return wn(e,t,s,n),t.child}function Xx(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ff(e,t,n,r,s){var o=Mn(n)?go:pn.current;return o=Ci(t,o),hi(t,s),n=hm(e,t,n,r,o,s),r=mm(),e!==null&&!Rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Qr(e,t,s)):(wt&&r&&tm(t),t.flags|=1,wn(e,t,n,s),t.child)}function Ag(e,t,n,r,s){if(Mn(n)){var o=!0;$c(t)}else o=!1;if(hi(t,s),t.stateNode===null)dc(e,t),Hx(t,n,r),Df(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=rr(u):(u=Mn(n)?go:pn.current,u=Ci(t,u));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Eg(t,a,r,u),fs=!1;var m=t.memoizedState;a.state=m,zc(t,r,a,s),c=t.memoizedState,l!==r||m!==c||_n.current||fs?(typeof f=="function"&&(Of(t,n,f,r),c=t.memoizedState),(l=fs||jg(t,n,l,r,m,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Cx(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:cr(t.type,l),a.props=u,h=t.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=rr(c):(c=Mn(n)?go:pn.current,c=Ci(t,c));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||m!==c)&&Eg(t,a,r,c),fs=!1,m=t.memoizedState,a.state=m,zc(t,r,a,s);var g=t.memoizedState;l!==h||m!==g||_n.current||fs?(typeof y=="function"&&(Of(t,n,y,r),g=t.memoizedState),(u=fs||jg(t,n,u,r,m,g,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return zf(e,t,n,r,o,s)}function zf(e,t,n,r,s,o){Xx(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&xg(t,n,!1),Qr(e,t,o);r=t.stateNode,RC.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Ei(t,e.child,null,o),t.child=Ei(t,null,l,o)):wn(e,t,l,o),t.memoizedState=r.state,s&&xg(t,n,!0),t.child}function Zx(e){var t=e.stateNode;t.pendingContext?vg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&vg(e,t.context,!1),cm(e,t.containerInfo)}function Lg(e,t,n,r,s){return ji(),rm(s),t.flags|=256,wn(e,t,n,r),t.child}var Vf={dehydrated:null,treeContext:null,retryLane:0};function qf(e){return{baseLanes:e,cachePool:null,transitions:null}}function Jx(e,t,n){var r=t.pendingProps,s=St.current,o=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ft(St,s&1),e===null)return If(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=ku(a,r,0,null),e=fo(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=qf(n),t.memoizedState=Vf,e):vm(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return _C(e,t,a,r,l,s,n);if(o){o=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=js(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=js(l,o):(o=fo(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?qf(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Vf,r}return o=e.child,e=o.sibling,r=js(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function vm(e,t){return t=ku({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Dl(e,t,n,r){return r!==null&&rm(r),Ei(t,e.child,null,n),e=vm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _C(e,t,n,r,s,o,a){if(n)return t.flags&256?(t.flags&=-257,r=kd(Error(K(422))),Dl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=ku({mode:"visible",children:r.children},s,0,null),o=fo(o,s,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Ei(t,e.child,null,a),t.child.memoizedState=qf(a),t.memoizedState=Vf,o);if(!(t.mode&1))return Dl(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(K(419)),r=kd(o,r,void 0),Dl(e,t,a,r)}if(l=(a&e.childLanes)!==0,Rn||l){if(r=Gt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Kr(e,s),mr(r,e,s,-1))}return km(),r=kd(Error(K(421))),Dl(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=WC.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,zn=Ss(s.nextSibling),Wn=t,wt=!0,fr=null,e!==null&&(Zn[Jn++]=qr,Zn[Jn++]=Wr,Zn[Jn++]=vo,qr=e.id,Wr=e.overflow,vo=t),t=vm(t,r.children),t.flags|=4096,t)}function Ig(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),$f(e.return,t,n)}function Nd(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function ey(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(wn(e,t,r.children,n),r=St.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ig(e,n,t);else if(e.tag===19)Ig(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ft(St,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Vc(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Nd(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Vc(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Nd(t,!0,n,null,o);break;case"together":Nd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function dc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),yo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,n=js(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=js(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function MC(e,t,n){switch(t.tag){case 3:Zx(t),ji();break;case 5:jx(t);break;case 1:Mn(t.type)&&$c(t);break;case 4:cm(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ft(Bc,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ft(St,St.current&1),t.flags|=128,null):n&t.child.childLanes?Jx(e,t,n):(ft(St,St.current&1),e=Qr(e,t,n),e!==null?e.sibling:null);ft(St,St.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return ey(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ft(St,St.current),r)break;return null;case 22:case 23:return t.lanes=0,Yx(e,t,n)}return Qr(e,t,n)}var ty,Wf,ny,ry;ty=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wf=function(){};ny=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,ao(Rr.current);var o=null;switch(n){case"input":s=ff(e,s),r=ff(e,r),o=[];break;case"select":s=Nt({},s,{value:void 0}),r=Nt({},r,{value:void 0}),o=[];break;case"textarea":s=pf(e,s),r=pf(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Lc)}vf(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ia.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ia.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&pt("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};ry=function(e,t,n,r){n!==r&&(t.flags|=4)};function ca(e,t){if(!wt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function un(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function AC(e,t,n){var r=t.pendingProps;switch(nm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(t),null;case 1:return Mn(t.type)&&Ic(),un(t),null;case 3:return r=t.stateNode,Pi(),gt(_n),gt(pn),dm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&($l(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,fr!==null&&(Zf(fr),fr=null))),Wf(e,t),un(t),null;case 5:um(t);var s=ao(Ga.current);if(n=t.type,e!==null&&t.stateNode!=null)ny(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(K(166));return un(t),null}if(e=ao(Rr.current),$l(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[jr]=t,r[Ua]=o,e=(t.mode&1)!==0,n){case"dialog":pt("cancel",r),pt("close",r);break;case"iframe":case"object":case"embed":pt("load",r);break;case"video":case"audio":for(s=0;s<wa.length;s++)pt(wa[s],r);break;case"source":pt("error",r);break;case"img":case"image":case"link":pt("error",r),pt("load",r);break;case"details":pt("toggle",r);break;case"input":Wp(r,o),pt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},pt("invalid",r);break;case"textarea":Hp(r,o),pt("invalid",r)}vf(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Il(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Il(r.textContent,l,e),s=["children",""+l]):Ia.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&pt("scroll",r)}switch(n){case"input":El(r),Up(r,o,!0);break;case"textarea":El(r),Gp(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Lc)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_0(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[jr]=t,e[Ua]=r,ty(e,t,!1,!1),t.stateNode=e;e:{switch(a=xf(n,r),n){case"dialog":pt("cancel",e),pt("close",e),s=r;break;case"iframe":case"object":case"embed":pt("load",e),s=r;break;case"video":case"audio":for(s=0;s<wa.length;s++)pt(wa[s],e);s=r;break;case"source":pt("error",e),s=r;break;case"img":case"image":case"link":pt("error",e),pt("load",e),s=r;break;case"details":pt("toggle",e),s=r;break;case"input":Wp(e,r),s=ff(e,r),pt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Nt({},r,{value:void 0}),pt("invalid",e);break;case"textarea":Hp(e,r),s=pf(e,r),pt("invalid",e);break;default:s=r}vf(n,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?L0(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&M0(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&$a(e,c):typeof c=="number"&&$a(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ia.hasOwnProperty(o)?c!=null&&o==="onScroll"&&pt("scroll",e):c!=null&&zh(e,o,c,a))}switch(n){case"input":El(e),Up(e,r,!1);break;case"textarea":El(e),Gp(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ps(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?ci(e,!!r.multiple,o,!1):r.defaultValue!=null&&ci(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Lc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return un(t),null;case 6:if(e&&t.stateNode!=null)ry(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(K(166));if(n=ao(Ga.current),ao(Rr.current),$l(t)){if(r=t.stateNode,n=t.memoizedProps,r[jr]=t,(o=r.nodeValue!==n)&&(e=Wn,e!==null))switch(e.tag){case 3:Il(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Il(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jr]=t,t.stateNode=r}return un(t),null;case 13:if(gt(St),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(wt&&zn!==null&&t.mode&1&&!(t.flags&128))bx(),ji(),t.flags|=98560,o=!1;else if(o=$l(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(K(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(K(317));o[jr]=t}else ji(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;un(t),o=!1}else fr!==null&&(Zf(fr),fr=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||St.current&1?Vt===0&&(Vt=3):km())),t.updateQueue!==null&&(t.flags|=4),un(t),null);case 4:return Pi(),Wf(e,t),e===null&&qa(t.stateNode.containerInfo),un(t),null;case 10:return im(t.type._context),un(t),null;case 17:return Mn(t.type)&&Ic(),un(t),null;case 19:if(gt(St),o=t.memoizedState,o===null)return un(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)ca(o,!1);else{if(Vt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Vc(e),a!==null){for(t.flags|=128,ca(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ft(St,St.current&1|2),t.child}e=e.sibling}o.tail!==null&&At()>Ri&&(t.flags|=128,r=!0,ca(o,!1),t.lanes=4194304)}else{if(!r)if(e=Vc(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ca(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!wt)return un(t),null}else 2*At()-o.renderingStartTime>Ri&&n!==1073741824&&(t.flags|=128,r=!0,ca(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=At(),t.sibling=null,n=St.current,ft(St,r?n&1|2:n&1),t):(un(t),null);case 22:case 23:return Sm(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Bn&1073741824&&(un(t),t.subtreeFlags&6&&(t.flags|=8192)):un(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function LC(e,t){switch(nm(t),t.tag){case 1:return Mn(t.type)&&Ic(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pi(),gt(_n),gt(pn),dm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return um(t),null;case 13:if(gt(St),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));ji()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gt(St),null;case 4:return Pi(),null;case 10:return im(t.type._context),null;case 22:case 23:return Sm(),null;case 24:return null;default:return null}}var Bl=!1,fn=!1,IC=typeof WeakSet=="function"?WeakSet:Set,ce=null;function ni(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pt(e,t,r)}else n.current=null}function Uf(e,t,n){try{n()}catch(r){Pt(e,t,r)}}var $g=!1;function $C(e,t){if(Pf=_c,e=lx(),em(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,f=0,h=e,m=null;t:for(;;){for(var y;h!==n||s!==0&&h.nodeType!==3||(l=a+s),h!==o||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(y=h.firstChild)!==null;)m=h,h=y;for(;;){if(h===e)break t;if(m===n&&++u===s&&(l=a),m===o&&++f===r&&(c=a),(y=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tf={focusedElem:e,selectionRange:n},_c=!1,ce=t;ce!==null;)if(t=ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ce=e;else for(;ce!==null;){t=ce;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,w=g.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?p:cr(t.type,p),w);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(k){Pt(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,ce=e;break}ce=t.return}return g=$g,$g=!1,g}function Ta(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Uf(t,n,o)}s=s.next}while(s!==r)}}function bu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Hf(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function sy(e){var t=e.alternate;t!==null&&(e.alternate=null,sy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jr],delete t[Ua],delete t[Mf],delete t[xC],delete t[yC])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function oy(e){return e.tag===5||e.tag===3||e.tag===4}function Og(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||oy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Lc));else if(r!==4&&(e=e.child,e!==null))for(Gf(e,t,n),e=e.sibling;e!==null;)Gf(e,t,n),e=e.sibling}function Kf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Kf(e,t,n),e=e.sibling;e!==null;)Kf(e,t,n),e=e.sibling}var Xt=null,ur=!1;function ss(e,t,n){for(n=n.child;n!==null;)iy(e,t,n),n=n.sibling}function iy(e,t,n){if(Tr&&typeof Tr.onCommitFiberUnmount=="function")try{Tr.onCommitFiberUnmount(hu,n)}catch{}switch(n.tag){case 5:fn||ni(n,t);case 6:var r=Xt,s=ur;Xt=null,ss(e,t,n),Xt=r,ur=s,Xt!==null&&(ur?(e=Xt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Xt.removeChild(n.stateNode));break;case 18:Xt!==null&&(ur?(e=Xt,n=n.stateNode,e.nodeType===8?vd(e.parentNode,n):e.nodeType===1&&vd(e,n),Fa(e)):vd(Xt,n.stateNode));break;case 4:r=Xt,s=ur,Xt=n.stateNode.containerInfo,ur=!0,ss(e,t,n),Xt=r,ur=s;break;case 0:case 11:case 14:case 15:if(!fn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Uf(n,t,a),s=s.next}while(s!==r)}ss(e,t,n);break;case 1:if(!fn&&(ni(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Pt(n,t,l)}ss(e,t,n);break;case 21:ss(e,t,n);break;case 22:n.mode&1?(fn=(r=fn)||n.memoizedState!==null,ss(e,t,n),fn=r):ss(e,t,n);break;default:ss(e,t,n)}}function Dg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new IC),t.forEach(function(r){var s=UC.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ar(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:Xt=l.stateNode,ur=!1;break e;case 3:Xt=l.stateNode.containerInfo,ur=!0;break e;case 4:Xt=l.stateNode.containerInfo,ur=!0;break e}l=l.return}if(Xt===null)throw Error(K(160));iy(o,a,s),Xt=null,ur=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Pt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ay(t,e),t=t.sibling}function ay(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ar(t,e),kr(e),r&4){try{Ta(3,e,e.return),bu(3,e)}catch(p){Pt(e,e.return,p)}try{Ta(5,e,e.return)}catch(p){Pt(e,e.return,p)}}break;case 1:ar(t,e),kr(e),r&512&&n!==null&&ni(n,n.return);break;case 5:if(ar(t,e),kr(e),r&512&&n!==null&&ni(n,n.return),e.flags&32){var s=e.stateNode;try{$a(s,"")}catch(p){Pt(e,e.return,p)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&T0(s,o),xf(l,a);var u=xf(l,o);for(a=0;a<c.length;a+=2){var f=c[a],h=c[a+1];f==="style"?L0(s,h):f==="dangerouslySetInnerHTML"?M0(s,h):f==="children"?$a(s,h):zh(s,f,h,u)}switch(l){case"input":hf(s,o);break;case"textarea":R0(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?ci(s,!!o.multiple,y,!1):m!==!!o.multiple&&(o.defaultValue!=null?ci(s,!!o.multiple,o.defaultValue,!0):ci(s,!!o.multiple,o.multiple?[]:"",!1))}s[Ua]=o}catch(p){Pt(e,e.return,p)}}break;case 6:if(ar(t,e),kr(e),r&4){if(e.stateNode===null)throw Error(K(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(p){Pt(e,e.return,p)}}break;case 3:if(ar(t,e),kr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fa(t.containerInfo)}catch(p){Pt(e,e.return,p)}break;case 4:ar(t,e),kr(e);break;case 13:ar(t,e),kr(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(wm=At())),r&4&&Dg(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(fn=(u=fn)||f,ar(t,e),fn=u):ar(t,e),kr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(ce=e,f=e.child;f!==null;){for(h=ce=f;ce!==null;){switch(m=ce,y=m.child,m.tag){case 0:case 11:case 14:case 15:Ta(4,m,m.return);break;case 1:ni(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){Pt(r,n,p)}}break;case 5:ni(m,m.return);break;case 22:if(m.memoizedState!==null){Fg(h);continue}}y!==null?(y.return=m,ce=y):Fg(h)}f=f.sibling}e:for(f=null,h=e;;){if(h.tag===5){if(f===null){f=h;try{s=h.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=A0("display",a))}catch(p){Pt(e,e.return,p)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(p){Pt(e,e.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ar(t,e),kr(e),r&4&&Dg(e);break;case 21:break;default:ar(t,e),kr(e)}}function kr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(oy(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&($a(s,""),r.flags&=-33);var o=Og(e);Kf(e,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Og(e);Gf(e,l,a);break;default:throw Error(K(161))}}catch(c){Pt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function OC(e,t,n){ce=e,ly(e)}function ly(e,t,n){for(var r=(e.mode&1)!==0;ce!==null;){var s=ce,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Bl;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||fn;l=Bl;var u=fn;if(Bl=a,(fn=c)&&!u)for(ce=s;ce!==null;)a=ce,c=a.child,a.tag===22&&a.memoizedState!==null?zg(s):c!==null?(c.return=a,ce=c):zg(s);for(;o!==null;)ce=o,ly(o),o=o.sibling;ce=s,Bl=l,fn=u}Bg(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ce=o):Bg(e)}}function Bg(e){for(;ce!==null;){var t=ce;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:fn||bu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!fn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:cr(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&kg(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}kg(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Fa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}fn||t.flags&512&&Hf(t)}catch(m){Pt(t,t.return,m)}}if(t===e){ce=null;break}if(n=t.sibling,n!==null){n.return=t.return,ce=n;break}ce=t.return}}function Fg(e){for(;ce!==null;){var t=ce;if(t===e){ce=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ce=n;break}ce=t.return}}function zg(e){for(;ce!==null;){var t=ce;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{bu(4,t)}catch(c){Pt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Pt(t,s,c)}}var o=t.return;try{Hf(t)}catch(c){Pt(t,o,c)}break;case 5:var a=t.return;try{Hf(t)}catch(c){Pt(t,a,c)}}}catch(c){Pt(t,t.return,c)}if(t===e){ce=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ce=l;break}ce=t.return}}var DC=Math.ceil,Uc=Zr.ReactCurrentDispatcher,xm=Zr.ReactCurrentOwner,nr=Zr.ReactCurrentBatchConfig,tt=0,Gt=null,Ot=null,en=0,Bn=0,ri=Vs(0),Vt=0,Xa=null,yo=0,Su=0,ym=0,Ra=null,Tn=null,wm=0,Ri=1/0,Br=null,Hc=!1,Qf=null,Ns=null,Fl=!1,vs=null,Gc=0,_a=0,Yf=null,fc=-1,hc=0;function kn(){return tt&6?At():fc!==-1?fc:fc=At()}function Cs(e){return e.mode&1?tt&2&&en!==0?en&-en:bC.transition!==null?(hc===0&&(hc=H0()),hc):(e=at,e!==0||(e=window.event,e=e===void 0?16:J0(e.type)),e):1}function mr(e,t,n,r){if(50<_a)throw _a=0,Yf=null,Error(K(185));rl(e,n,r),(!(tt&2)||e!==Gt)&&(e===Gt&&(!(tt&2)&&(Su|=n),Vt===4&&ps(e,en)),An(e,r),n===1&&tt===0&&!(t.mode&1)&&(Ri=At()+500,xu&&qs()))}function An(e,t){var n=e.callbackNode;bN(e,t);var r=Rc(e,e===Gt?en:0);if(r===0)n!==null&&Yp(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Yp(n),t===1)e.tag===0?wC(Vg.bind(null,e)):xx(Vg.bind(null,e)),gC(function(){!(tt&6)&&qs()}),n=null;else{switch(G0(r)){case 1:n=Hh;break;case 4:n=W0;break;case 16:n=Tc;break;case 536870912:n=U0;break;default:n=Tc}n=gy(n,cy.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function cy(e,t){if(fc=-1,hc=0,tt&6)throw Error(K(327));var n=e.callbackNode;if(mi()&&e.callbackNode!==n)return null;var r=Rc(e,e===Gt?en:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Kc(e,r);else{t=r;var s=tt;tt|=2;var o=dy();(Gt!==e||en!==t)&&(Br=null,Ri=At()+500,uo(e,t));do try{zC();break}catch(l){uy(e,l)}while(!0);om(),Uc.current=o,tt=s,Ot!==null?t=0:(Gt=null,en=0,t=Vt)}if(t!==0){if(t===2&&(s=kf(e),s!==0&&(r=s,t=Xf(e,s))),t===1)throw n=Xa,uo(e,0),ps(e,r),An(e,At()),n;if(t===6)ps(e,r);else{if(s=e.current.alternate,!(r&30)&&!BC(s)&&(t=Kc(e,r),t===2&&(o=kf(e),o!==0&&(r=o,t=Xf(e,o))),t===1))throw n=Xa,uo(e,0),ps(e,r),An(e,At()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(K(345));case 2:so(e,Tn,Br);break;case 3:if(ps(e,r),(r&130023424)===r&&(t=wm+500-At(),10<t)){if(Rc(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){kn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=_f(so.bind(null,e,Tn,Br),t);break}so(e,Tn,Br);break;case 4:if(ps(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-hr(r);o=1<<a,a=t[a],a>s&&(s=a),r&=~o}if(r=s,r=At()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*DC(r/1960))-r,10<r){e.timeoutHandle=_f(so.bind(null,e,Tn,Br),r);break}so(e,Tn,Br);break;case 5:so(e,Tn,Br);break;default:throw Error(K(329))}}}return An(e,At()),e.callbackNode===n?cy.bind(null,e):null}function Xf(e,t){var n=Ra;return e.current.memoizedState.isDehydrated&&(uo(e,t).flags|=256),e=Kc(e,t),e!==2&&(t=Tn,Tn=n,t!==null&&Zf(t)),e}function Zf(e){Tn===null?Tn=e:Tn.push.apply(Tn,e)}function BC(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!pr(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ps(e,t){for(t&=~ym,t&=~Su,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-hr(t),r=1<<n;e[n]=-1,t&=~r}}function Vg(e){if(tt&6)throw Error(K(327));mi();var t=Rc(e,0);if(!(t&1))return An(e,At()),null;var n=Kc(e,t);if(e.tag!==0&&n===2){var r=kf(e);r!==0&&(t=r,n=Xf(e,r))}if(n===1)throw n=Xa,uo(e,0),ps(e,t),An(e,At()),n;if(n===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,so(e,Tn,Br),An(e,At()),null}function bm(e,t){var n=tt;tt|=1;try{return e(t)}finally{tt=n,tt===0&&(Ri=At()+500,xu&&qs())}}function wo(e){vs!==null&&vs.tag===0&&!(tt&6)&&mi();var t=tt;tt|=1;var n=nr.transition,r=at;try{if(nr.transition=null,at=1,e)return e()}finally{at=r,nr.transition=n,tt=t,!(tt&6)&&qs()}}function Sm(){Bn=ri.current,gt(ri)}function uo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,pC(n)),Ot!==null)for(n=Ot.return;n!==null;){var r=n;switch(nm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ic();break;case 3:Pi(),gt(_n),gt(pn),dm();break;case 5:um(r);break;case 4:Pi();break;case 13:gt(St);break;case 19:gt(St);break;case 10:im(r.type._context);break;case 22:case 23:Sm()}n=n.return}if(Gt=e,Ot=e=js(e.current,null),en=Bn=t,Vt=0,Xa=null,ym=Su=yo=0,Tn=Ra=null,io!==null){for(t=0;t<io.length;t++)if(n=io[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}io=null}return e}function uy(e,t){do{var n=Ot;try{if(om(),cc.current=Wc,qc){for(var r=kt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}qc=!1}if(xo=0,Ht=zt=kt=null,Pa=!1,Ka=0,xm.current=null,n===null||n.return===null){Vt=1,Xa=t,Ot=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=en,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=Tg(a);if(y!==null){y.flags&=-257,Rg(y,a,l,o,t),y.mode&1&&Pg(o,u,t),t=y,c=u;var g=t.updateQueue;if(g===null){var p=new Set;p.add(c),t.updateQueue=p}else g.add(c);break e}else{if(!(t&1)){Pg(o,u,t),km();break e}c=Error(K(426))}}else if(wt&&l.mode&1){var w=Tg(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Rg(w,a,l,o,t),rm(Ti(c,l));break e}}o=c=Ti(c,l),Vt!==4&&(Vt=2),Ra===null?Ra=[o]:Ra.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var x=Gx(o,c,t);Sg(o,x);break e;case 1:l=c;var v=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ns===null||!Ns.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var k=Kx(o,l,t);Sg(o,k);break e}}o=o.return}while(o!==null)}hy(n)}catch(S){t=S,Ot===n&&n!==null&&(Ot=n=n.return);continue}break}while(!0)}function dy(){var e=Uc.current;return Uc.current=Wc,e===null?Wc:e}function km(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),Gt===null||!(yo&268435455)&&!(Su&268435455)||ps(Gt,en)}function Kc(e,t){var n=tt;tt|=2;var r=dy();(Gt!==e||en!==t)&&(Br=null,uo(e,t));do try{FC();break}catch(s){uy(e,s)}while(!0);if(om(),tt=n,Uc.current=r,Ot!==null)throw Error(K(261));return Gt=null,en=0,Vt}function FC(){for(;Ot!==null;)fy(Ot)}function zC(){for(;Ot!==null&&!fN();)fy(Ot)}function fy(e){var t=py(e.alternate,e,Bn);e.memoizedProps=e.pendingProps,t===null?hy(e):Ot=t,xm.current=null}function hy(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=LC(n,t),n!==null){n.flags&=32767,Ot=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Vt=6,Ot=null;return}}else if(n=AC(n,t,Bn),n!==null){Ot=n;return}if(t=t.sibling,t!==null){Ot=t;return}Ot=t=e}while(t!==null);Vt===0&&(Vt=5)}function so(e,t,n){var r=at,s=nr.transition;try{nr.transition=null,at=1,VC(e,t,n,r)}finally{nr.transition=s,at=r}return null}function VC(e,t,n,r){do mi();while(vs!==null);if(tt&6)throw Error(K(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(SN(e,o),e===Gt&&(Ot=Gt=null,en=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fl||(Fl=!0,gy(Tc,function(){return mi(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=nr.transition,nr.transition=null;var a=at;at=1;var l=tt;tt|=4,xm.current=null,$C(e,n),ay(n,e),lC(Tf),_c=!!Pf,Tf=Pf=null,e.current=n,OC(n),hN(),tt=l,at=a,nr.transition=o}else e.current=n;if(Fl&&(Fl=!1,vs=e,Gc=s),o=e.pendingLanes,o===0&&(Ns=null),gN(n.stateNode),An(e,At()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hc)throw Hc=!1,e=Qf,Qf=null,e;return Gc&1&&e.tag!==0&&mi(),o=e.pendingLanes,o&1?e===Yf?_a++:(_a=0,Yf=e):_a=0,qs(),null}function mi(){if(vs!==null){var e=G0(Gc),t=nr.transition,n=at;try{if(nr.transition=null,at=16>e?16:e,vs===null)var r=!1;else{if(e=vs,vs=null,Gc=0,tt&6)throw Error(K(331));var s=tt;for(tt|=4,ce=e.current;ce!==null;){var o=ce,a=o.child;if(ce.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ce=u;ce!==null;){var f=ce;switch(f.tag){case 0:case 11:case 15:Ta(8,f,o)}var h=f.child;if(h!==null)h.return=f,ce=h;else for(;ce!==null;){f=ce;var m=f.sibling,y=f.return;if(sy(f),f===u){ce=null;break}if(m!==null){m.return=y,ce=m;break}ce=y}}}var g=o.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var w=p.sibling;p.sibling=null,p=w}while(p!==null)}}ce=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ce=a;else e:for(;ce!==null;){if(o=ce,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ta(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,ce=x;break e}ce=o.return}}var v=e.current;for(ce=v;ce!==null;){a=ce;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,ce=b;else e:for(a=v;ce!==null;){if(l=ce,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:bu(9,l)}}catch(S){Pt(l,l.return,S)}if(l===a){ce=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,ce=k;break e}ce=l.return}}if(tt=s,qs(),Tr&&typeof Tr.onPostCommitFiberRoot=="function")try{Tr.onPostCommitFiberRoot(hu,e)}catch{}r=!0}return r}finally{at=n,nr.transition=t}}return!1}function qg(e,t,n){t=Ti(n,t),t=Gx(e,t,1),e=ks(e,t,1),t=kn(),e!==null&&(rl(e,1,t),An(e,t))}function Pt(e,t,n){if(e.tag===3)qg(e,e,n);else for(;t!==null;){if(t.tag===3){qg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ns===null||!Ns.has(r))){e=Ti(n,e),e=Kx(t,e,1),t=ks(t,e,1),e=kn(),t!==null&&(rl(t,1,e),An(t,e));break}}t=t.return}}function qC(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=kn(),e.pingedLanes|=e.suspendedLanes&n,Gt===e&&(en&n)===n&&(Vt===4||Vt===3&&(en&130023424)===en&&500>At()-wm?uo(e,0):ym|=n),An(e,t)}function my(e,t){t===0&&(e.mode&1?(t=Rl,Rl<<=1,!(Rl&130023424)&&(Rl=4194304)):t=1);var n=kn();e=Kr(e,t),e!==null&&(rl(e,t,n),An(e,n))}function WC(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),my(e,n)}function UC(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(t),my(e,n)}var py;py=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||_n.current)Rn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Rn=!1,MC(e,t,n);Rn=!!(e.flags&131072)}else Rn=!1,wt&&t.flags&1048576&&yx(t,Dc,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;dc(e,t),e=t.pendingProps;var s=Ci(t,pn.current);hi(t,n),s=hm(null,t,r,e,s,n);var o=mm();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mn(r)?(o=!0,$c(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,lm(t),s.updater=wu,t.stateNode=s,s._reactInternals=t,Df(t,r,e,n),t=zf(null,t,r,!0,o,n)):(t.tag=0,wt&&o&&tm(t),wn(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(dc(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=GC(r),e=cr(r,e),s){case 0:t=Ff(null,t,r,e,n);break e;case 1:t=Ag(null,t,r,e,n);break e;case 11:t=_g(null,t,r,e,n);break e;case 14:t=Mg(null,t,r,cr(r.type,e),n);break e}throw Error(K(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:cr(r,s),Ff(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:cr(r,s),Ag(e,t,r,s,n);case 3:e:{if(Zx(t),e===null)throw Error(K(387));r=t.pendingProps,o=t.memoizedState,s=o.element,Cx(e,t),zc(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Ti(Error(K(423)),t),t=Lg(e,t,r,n,s);break e}else if(r!==s){s=Ti(Error(K(424)),t),t=Lg(e,t,r,n,s);break e}else for(zn=Ss(t.stateNode.containerInfo.firstChild),Wn=t,wt=!0,fr=null,n=kx(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ji(),r===s){t=Qr(e,t,n);break e}wn(e,t,r,n)}t=t.child}return t;case 5:return jx(t),e===null&&If(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,Rf(r,s)?a=null:o!==null&&Rf(r,o)&&(t.flags|=32),Xx(e,t),wn(e,t,a,n),t.child;case 6:return e===null&&If(t),null;case 13:return Jx(e,t,n);case 4:return cm(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ei(t,null,r,n):wn(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:cr(r,s),_g(e,t,r,s,n);case 7:return wn(e,t,t.pendingProps,n),t.child;case 8:return wn(e,t,t.pendingProps.children,n),t.child;case 12:return wn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,ft(Bc,r._currentValue),r._currentValue=a,o!==null)if(pr(o.value,a)){if(o.children===s.children&&!_n.current){t=Qr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Ur(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),$f(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(K(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),$f(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}wn(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,hi(t,n),s=rr(s),r=r(s),t.flags|=1,wn(e,t,r,n),t.child;case 14:return r=t.type,s=cr(r,t.pendingProps),s=cr(r.type,s),Mg(e,t,r,s,n);case 15:return Qx(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:cr(r,s),dc(e,t),t.tag=1,Mn(r)?(e=!0,$c(t)):e=!1,hi(t,n),Hx(t,r,s),Df(t,r,s,n),zf(null,t,r,!0,e,n);case 19:return ey(e,t,n);case 22:return Yx(e,t,n)}throw Error(K(156,t.tag))};function gy(e,t){return q0(e,t)}function HC(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(e,t,n,r){return new HC(e,t,n,r)}function Nm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function GC(e){if(typeof e=="function")return Nm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===qh)return 11;if(e===Wh)return 14}return 2}function js(e,t){var n=e.alternate;return n===null?(n=tr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function mc(e,t,n,r,s,o){var a=2;if(r=e,typeof e=="function")Nm(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Go:return fo(n.children,s,o,t);case Vh:a=8,s|=8;break;case lf:return e=tr(12,n,t,s|2),e.elementType=lf,e.lanes=o,e;case cf:return e=tr(13,n,t,s),e.elementType=cf,e.lanes=o,e;case uf:return e=tr(19,n,t,s),e.elementType=uf,e.lanes=o,e;case j0:return ku(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N0:a=10;break e;case C0:a=9;break e;case qh:a=11;break e;case Wh:a=14;break e;case ds:a=16,r=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=tr(a,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function fo(e,t,n,r){return e=tr(7,e,r,t),e.lanes=n,e}function ku(e,t,n,r){return e=tr(22,e,r,t),e.elementType=j0,e.lanes=n,e.stateNode={isHidden:!1},e}function Cd(e,t,n){return e=tr(6,e,null,t),e.lanes=n,e}function jd(e,t,n){return t=tr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function KC(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=id(0),this.expirationTimes=id(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=id(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Cm(e,t,n,r,s,o,a,l,c){return e=new KC(e,t,n,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=tr(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lm(o),e}function QC(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ho,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function vy(e){if(!e)return Ts;e=e._reactInternals;e:{if(Mo(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var n=e.type;if(Mn(n))return vx(e,n,t)}return t}function xy(e,t,n,r,s,o,a,l,c){return e=Cm(n,r,!0,e,s,o,a,l,c),e.context=vy(null),n=e.current,r=kn(),s=Cs(n),o=Ur(r,s),o.callback=t??null,ks(n,o,s),e.current.lanes=s,rl(e,s,r),An(e,r),e}function Nu(e,t,n,r){var s=t.current,o=kn(),a=Cs(s);return n=vy(n),t.context===null?t.context=n:t.pendingContext=n,t=Ur(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ks(s,t,a),e!==null&&(mr(e,s,a,o),lc(e,s,a)),a}function Qc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Wg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function jm(e,t){Wg(e,t),(e=e.alternate)&&Wg(e,t)}function YC(){return null}var yy=typeof reportError=="function"?reportError:function(e){console.error(e)};function Em(e){this._internalRoot=e}Cu.prototype.render=Em.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));Nu(e,t,null,null)};Cu.prototype.unmount=Em.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wo(function(){Nu(null,e,null,null)}),t[Gr]=null}};function Cu(e){this._internalRoot=e}Cu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Y0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ms.length&&t!==0&&t<ms[n].priority;n++);ms.splice(n,0,e),n===0&&Z0(e)}};function Pm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ju(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ug(){}function XC(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var u=Qc(a);o.call(u)}}var a=xy(t,r,e,0,null,!1,!1,"",Ug);return e._reactRootContainer=a,e[Gr]=a.current,qa(e.nodeType===8?e.parentNode:e),wo(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Qc(c);l.call(u)}}var c=Cm(e,0,!1,null,null,!1,!1,"",Ug);return e._reactRootContainer=c,e[Gr]=c.current,qa(e.nodeType===8?e.parentNode:e),wo(function(){Nu(t,c,n,r)}),c}function Eu(e,t,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var c=Qc(a);l.call(c)}}Nu(t,a,e,s)}else a=XC(n,t,e,s,r);return Qc(a)}K0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ya(t.pendingLanes);n!==0&&(Gh(t,n|1),An(t,At()),!(tt&6)&&(Ri=At()+500,qs()))}break;case 13:wo(function(){var r=Kr(e,1);if(r!==null){var s=kn();mr(r,e,1,s)}}),jm(e,1)}};Kh=function(e){if(e.tag===13){var t=Kr(e,134217728);if(t!==null){var n=kn();mr(t,e,134217728,n)}jm(e,134217728)}};Q0=function(e){if(e.tag===13){var t=Cs(e),n=Kr(e,t);if(n!==null){var r=kn();mr(n,e,t,r)}jm(e,t)}};Y0=function(){return at};X0=function(e,t){var n=at;try{return at=e,t()}finally{at=n}};wf=function(e,t,n){switch(t){case"input":if(hf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=vu(r);if(!s)throw Error(K(90));P0(r),hf(r,s)}}}break;case"textarea":R0(e,n);break;case"select":t=n.value,t!=null&&ci(e,!!n.multiple,t,!1)}};O0=bm;D0=wo;var ZC={usingClientEntryPoint:!1,Events:[ol,Xo,vu,I0,$0,bm]},ua={findFiberByHostInstance:oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JC={bundleType:ua.bundleType,version:ua.version,rendererPackageName:ua.rendererPackageName,rendererConfig:ua.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=z0(e),e===null?null:e.stateNode},findFiberByHostInstance:ua.findFiberByHostInstance||YC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zl.isDisabled&&zl.supportsFiber)try{hu=zl.inject(JC),Tr=zl}catch{}}Gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZC;Gn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pm(t))throw Error(K(200));return QC(e,t,null,n)};Gn.createRoot=function(e,t){if(!Pm(e))throw Error(K(299));var n=!1,r="",s=yy;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Cm(e,1,!1,null,null,n,!1,r,s),e[Gr]=t.current,qa(e.nodeType===8?e.parentNode:e),new Em(t)};Gn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=z0(t),e=e===null?null:e.stateNode,e};Gn.flushSync=function(e){return wo(e)};Gn.hydrate=function(e,t,n){if(!ju(t))throw Error(K(200));return Eu(null,e,t,!0,n)};Gn.hydrateRoot=function(e,t,n){if(!Pm(e))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=yy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=xy(t,null,e,1,n??null,s,!1,o,a),e[Gr]=t.current,qa(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Cu(t)};Gn.render=function(e,t,n){if(!ju(t))throw Error(K(200));return Eu(null,e,t,!1,n)};Gn.unmountComponentAtNode=function(e){if(!ju(e))throw Error(K(40));return e._reactRootContainer?(wo(function(){Eu(null,null,e,!1,function(){e._reactRootContainer=null,e[Gr]=null})}),!0):!1};Gn.unstable_batchedUpdates=bm;Gn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ju(n))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return Eu(e,t,n,!1,r)};Gn.version="18.3.1-next-f1338f8080-20240426";function wy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wy)}catch(e){console.error(e)}}wy(),w0.exports=Gn;var Ao=w0.exports;const ej=a0(Ao);var by,Hg=Ao;by=Hg.createRoot,Hg.hydrateRoot;const tj=1,nj=1e6,Tm="simulchess_toasts_enabled";function rj(){if(typeof window>"u")return!0;const e=localStorage.getItem(Tm);return e===null?!0:e==="true"}function sj(e){typeof window>"u"||localStorage.setItem(Tm,String(e))}let Ed=0;function oj(){return Ed=(Ed+1)%Number.MAX_SAFE_INTEGER,Ed.toString()}const Pd=new Map,Gg=e=>{if(Pd.has(e))return;const t=setTimeout(()=>{Pd.delete(e),Ma({type:"REMOVE_TOAST",toastId:e})},nj);Pd.set(e,t)},ij=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,tj)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Gg(n):e.toasts.forEach(r=>{Gg(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},pc=[];let gc={toasts:[]};function Ma(e){gc=ij(gc,e),pc.forEach(t=>{t(gc)})}function aj({...e}){if(!(typeof window<"u"?localStorage.getItem(Tm)!=="false":!0))return{id:"",dismiss:()=>{},update:()=>{}};const n=oj(),r=o=>Ma({type:"UPDATE_TOAST",toast:{...o,id:n}}),s=()=>Ma({type:"DISMISS_TOAST",toastId:n});return Ma({type:"ADD_TOAST",toast:{...e,id:n,open:!0,onOpenChange:o=>{o||s()}}}),{id:n,dismiss:s,update:r}}function al(){const[e,t]=d.useState(gc);return d.useEffect(()=>(pc.push(t),()=>{const n=pc.indexOf(t);n>-1&&pc.splice(n,1)}),[e]),{...e,toast:aj,dismiss:n=>Ma({type:"DISMISS_TOAST",toastId:n})}}function ye(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Kg(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Rm(...e){return t=>{let n=!1;const r=e.map(s=>{const o=Kg(s,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():Kg(e[s],null)}}}}function qe(...e){return d.useCallback(Rm(...e),e)}function lj(e,t){const n=d.createContext(t),r=o=>{const{children:a,...l}=o,c=d.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:a})};r.displayName=e+"Provider";function s(o){const a=d.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[r,s]}function Ln(e,t=[]){let n=[];function r(o,a){const l=d.createContext(a),c=n.length;n=[...n,a];const u=h=>{var x;const{scope:m,children:y,...g}=h,p=((x=m==null?void 0:m[e])==null?void 0:x[c])||l,w=d.useMemo(()=>g,Object.values(g));return i.jsx(p.Provider,{value:w,children:y})};u.displayName=o+"Provider";function f(h,m){var p;const y=((p=m==null?void 0:m[e])==null?void 0:p[c])||l,g=d.useContext(y);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[u,f]}const s=()=>{const o=n.map(a=>d.createContext(a));return function(l){const c=(l==null?void 0:l[e])||o;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,cj(s,...t)]}function cj(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(o)[`__scope${u}`];return{...l,...h}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function _i(e){const t=dj(e),n=d.forwardRef((r,s)=>{const{children:o,...a}=r,l=d.Children.toArray(o),c=l.find(fj);if(c){const u=c.props.children,f=l.map(h=>h===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:h);return i.jsx(t,{...a,ref:s,children:d.isValidElement(u)?d.cloneElement(u,void 0,f):null})}return i.jsx(t,{...a,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}var uj=_i("Slot");function dj(e){const t=d.forwardRef((n,r)=>{const{children:s,...o}=n;if(d.isValidElement(s)){const a=mj(s),l=hj(o,s.props);return s.type!==d.Fragment&&(l.ref=r?Rm(r,a):a),d.cloneElement(s,l)}return d.Children.count(s)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Sy=Symbol("radix.slottable");function ky(e){const t=({children:n})=>i.jsx(i.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Sy,t}function fj(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Sy}function hj(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...l)=>{o(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function mj(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function _m(e){const t=e+"CollectionProvider",[n,r]=Ln(t),[s,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=p=>{const{scope:w,children:x}=p,v=bn.useRef(null),b=bn.useRef(new Map).current;return i.jsx(s,{scope:w,itemMap:b,collectionRef:v,children:x})};a.displayName=t;const l=e+"CollectionSlot",c=_i(l),u=bn.forwardRef((p,w)=>{const{scope:x,children:v}=p,b=o(l,x),k=qe(w,b.collectionRef);return i.jsx(c,{ref:k,children:v})});u.displayName=l;const f=e+"CollectionItemSlot",h="data-radix-collection-item",m=_i(f),y=bn.forwardRef((p,w)=>{const{scope:x,children:v,...b}=p,k=bn.useRef(null),S=qe(w,k),C=o(f,x);return bn.useEffect(()=>(C.itemMap.set(k,{ref:k,...b}),()=>void C.itemMap.delete(k))),i.jsx(m,{[h]:"",ref:S,children:v})});y.displayName=f;function g(p){const w=o(e+"CollectionConsumer",p);return bn.useCallback(()=>{const v=w.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((C,N)=>b.indexOf(C.ref.current)-b.indexOf(N.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:u,ItemSlot:y},g,r]}var pj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Me=pj.reduce((e,t)=>{const n=_i(`Primitive.${t}`),r=d.forwardRef((s,o)=>{const{asChild:a,...l}=s,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Ny(e,t){e&&Ao.flushSync(()=>e.dispatchEvent(t))}function Lt(e){const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function gj(e,t=globalThis==null?void 0:globalThis.document){const n=Lt(e);d.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var vj="DismissableLayer",Jf="dismissableLayer.update",xj="dismissableLayer.pointerDownOutside",yj="dismissableLayer.focusOutside",Qg,Cy=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ll=d.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=e,u=d.useContext(Cy),[f,h]=d.useState(null),m=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=d.useState({}),g=qe(t,N=>h(N)),p=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=p.indexOf(w),v=f?p.indexOf(f):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,k=v>=x,S=bj(N=>{const j=N.target,R=[...u.branches].some(P=>P.contains(j));!k||R||(s==null||s(N),a==null||a(N),N.defaultPrevented||l==null||l())},m),C=Sj(N=>{const j=N.target;[...u.branches].some(P=>P.contains(j))||(o==null||o(N),a==null||a(N),N.defaultPrevented||l==null||l())},m);return gj(N=>{v===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},m),d.useEffect(()=>{if(f)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Qg=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),Yg(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Qg)}},[f,m,n,u]),d.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),Yg())},[f,u]),d.useEffect(()=>{const N=()=>y({});return document.addEventListener(Jf,N),()=>document.removeEventListener(Jf,N)},[]),i.jsx(Me.div,{...c,ref:g,style:{pointerEvents:b?k?"auto":"none":void 0,...e.style},onFocusCapture:ye(e.onFocusCapture,C.onFocusCapture),onBlurCapture:ye(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:ye(e.onPointerDownCapture,S.onPointerDownCapture)})});ll.displayName=vj;var wj="DismissableLayerBranch",jy=d.forwardRef((e,t)=>{const n=d.useContext(Cy),r=d.useRef(null),s=qe(t,r);return d.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),i.jsx(Me.div,{...e,ref:s})});jy.displayName=wj;function bj(e,t=globalThis==null?void 0:globalThis.document){const n=Lt(e),r=d.useRef(!1),s=d.useRef(()=>{});return d.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let c=function(){Ey(xj,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Sj(e,t=globalThis==null?void 0:globalThis.document){const n=Lt(e),r=d.useRef(!1);return d.useEffect(()=>{const s=o=>{o.target&&!r.current&&Ey(yj,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Yg(){const e=new CustomEvent(Jf);document.dispatchEvent(e)}function Ey(e,t,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Ny(s,o):s.dispatchEvent(o)}var kj=ll,Nj=jy,Kt=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{},Cj="Portal",Pu=d.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[s,o]=d.useState(!1);Kt(()=>o(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?ej.createPortal(i.jsx(Me.div,{...r,ref:t}),a):null});Pu.displayName=Cj;function jj(e,t){return d.useReducer((n,r)=>t[n][r]??n,e)}var xr=e=>{const{present:t,children:n}=e,r=Ej(t),s=typeof n=="function"?n({present:r.isPresent}):d.Children.only(n),o=qe(r.ref,Pj(s));return typeof n=="function"||r.isPresent?d.cloneElement(s,{ref:o}):null};xr.displayName="Presence";function Ej(e){const[t,n]=d.useState(),r=d.useRef({}),s=d.useRef(e),o=d.useRef("none"),a=e?"mounted":"unmounted",[l,c]=jj(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const u=Vl(r.current);o.current=l==="mounted"?u:"none"},[l]),Kt(()=>{const u=r.current,f=s.current;if(f!==e){const m=o.current,y=Vl(u);e?c("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&m!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Kt(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,h=y=>{const p=Vl(r.current).includes(y.animationName);if(y.target===t&&p&&(c("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=y=>{y.target===t&&(o.current=Vl(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:d.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function Vl(e){return(e==null?void 0:e.animationName)||"none"}function Pj(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function bo({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,s]=Tj({defaultProp:t,onChange:n}),o=e!==void 0,a=o?e:r,l=Lt(n),c=d.useCallback(u=>{if(o){const h=typeof u=="function"?u(e):u;h!==e&&l(h)}else s(u)},[o,e,s,l]);return[a,c]}function Tj({defaultProp:e,onChange:t}){const n=d.useState(e),[r]=n,s=d.useRef(r),o=Lt(t);return d.useEffect(()=>{s.current!==r&&(o(r),s.current=r)},[r,s,o]),n}var Rj="VisuallyHidden",cl=d.forwardRef((e,t)=>i.jsx(Me.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));cl.displayName=Rj;var _j=cl,Mm="ToastProvider",[Am,Mj,Aj]=_m("Toast"),[Py,A4]=Ln("Toast",[Aj]),[Lj,Tu]=Py(Mm),Ty=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:a}=e,[l,c]=d.useState(null),[u,f]=d.useState(0),h=d.useRef(!1),m=d.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Mm}\`. Expected non-empty \`string\`.`),i.jsx(Am.Provider,{scope:t,children:i.jsx(Lj,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:d.useCallback(()=>f(y=>y+1),[]),onToastRemove:d.useCallback(()=>f(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:a})})};Ty.displayName=Mm;var Ry="ToastViewport",Ij=["F8"],eh="toast.viewportPause",th="toast.viewportResume",_y=d.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=Ij,label:s="Notifications ({hotkey})",...o}=e,a=Tu(Ry,n),l=Mj(n),c=d.useRef(null),u=d.useRef(null),f=d.useRef(null),h=d.useRef(null),m=qe(t,h,a.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=a.toastCount>0;d.useEffect(()=>{const w=x=>{var b;r.length!==0&&r.every(k=>x[k]||x.code===k)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),d.useEffect(()=>{const w=c.current,x=h.current;if(g&&w&&x){const v=()=>{if(!a.isClosePausedRef.current){const C=new CustomEvent(eh);x.dispatchEvent(C),a.isClosePausedRef.current=!0}},b=()=>{if(a.isClosePausedRef.current){const C=new CustomEvent(th);x.dispatchEvent(C),a.isClosePausedRef.current=!1}},k=C=>{!w.contains(C.relatedTarget)&&b()},S=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",v),w.addEventListener("focusout",k),w.addEventListener("pointermove",v),w.addEventListener("pointerleave",S),window.addEventListener("blur",v),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",v),w.removeEventListener("focusout",k),w.removeEventListener("pointermove",v),w.removeEventListener("pointerleave",S),window.removeEventListener("blur",v),window.removeEventListener("focus",b)}}},[g,a.isClosePausedRef]);const p=d.useCallback(({tabbingDirection:w})=>{const v=l().map(b=>{const k=b.ref.current,S=[k,...Kj(k)];return w==="forwards"?S:S.reverse()});return(w==="forwards"?v.reverse():v).flat()},[l]);return d.useEffect(()=>{const w=h.current;if(w){const x=v=>{var S,C,N;const b=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!b){const j=document.activeElement,R=v.shiftKey;if(v.target===w&&R){(S=u.current)==null||S.focus();return}const I=p({tabbingDirection:R?"backwards":"forwards"}),F=I.findIndex(L=>L===j);Td(I.slice(F+1))?v.preventDefault():R?(C=u.current)==null||C.focus():(N=f.current)==null||N.focus()}};return w.addEventListener("keydown",x),()=>w.removeEventListener("keydown",x)}},[l,p]),i.jsxs(Nj,{ref:c,role:"region","aria-label":s.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&i.jsx(nh,{ref:u,onFocusFromOutsideViewport:()=>{const w=p({tabbingDirection:"forwards"});Td(w)}}),i.jsx(Am.Slot,{scope:n,children:i.jsx(Me.ol,{tabIndex:-1,...o,ref:m})}),g&&i.jsx(nh,{ref:f,onFocusFromOutsideViewport:()=>{const w=p({tabbingDirection:"backwards"});Td(w)}})]})});_y.displayName=Ry;var My="ToastFocusProxy",nh=d.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,o=Tu(My,n);return i.jsx(cl,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=o.viewport)!=null&&u.contains(l))&&r()}})});nh.displayName=My;var Ru="Toast",$j="toast.swipeStart",Oj="toast.swipeMove",Dj="toast.swipeCancel",Bj="toast.swipeEnd",Ay=d.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:o,...a}=e,[l=!0,c]=bo({prop:r,defaultProp:s,onChange:o});return i.jsx(xr,{present:n||l,children:i.jsx(Vj,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:Lt(e.onPause),onResume:Lt(e.onResume),onSwipeStart:ye(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ye(e.onSwipeMove,u=>{const{x:f,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ye(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ye(e.onSwipeEnd,u=>{const{x:f,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Ay.displayName=Ru;var[Fj,zj]=Py(Ru,{onClose(){}}),Vj=d.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:o,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:f,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:y,...g}=e,p=Tu(Ru,n),[w,x]=d.useState(null),v=qe(t,L=>x(L)),b=d.useRef(null),k=d.useRef(null),S=s||p.duration,C=d.useRef(0),N=d.useRef(S),j=d.useRef(0),{onToastAdd:R,onToastRemove:P}=p,D=Lt(()=>{var B;(w==null?void 0:w.contains(document.activeElement))&&((B=p.viewport)==null||B.focus()),a()}),I=d.useCallback(L=>{!L||L===1/0||(window.clearTimeout(j.current),C.current=new Date().getTime(),j.current=window.setTimeout(D,L))},[D]);d.useEffect(()=>{const L=p.viewport;if(L){const B=()=>{I(N.current),u==null||u()},H=()=>{const Q=new Date().getTime()-C.current;N.current=N.current-Q,window.clearTimeout(j.current),c==null||c()};return L.addEventListener(eh,H),L.addEventListener(th,B),()=>{L.removeEventListener(eh,H),L.removeEventListener(th,B)}}},[p.viewport,S,c,u,I]),d.useEffect(()=>{o&&!p.isClosePausedRef.current&&I(S)},[o,S,p.isClosePausedRef,I]),d.useEffect(()=>(R(),()=>P()),[R,P]);const F=d.useMemo(()=>w?Fy(w):null,[w]);return p.viewport?i.jsxs(i.Fragment,{children:[F&&i.jsx(qj,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:F}),i.jsx(Fj,{scope:n,onClose:D,children:Ao.createPortal(i.jsx(Am.ItemSlot,{scope:n,children:i.jsx(kj,{asChild:!0,onEscapeKeyDown:ye(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||D(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(Me.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":p.swipeDirection,...g,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ye(e.onKeyDown,L=>{L.key==="Escape"&&(l==null||l(L.nativeEvent),L.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:ye(e.onPointerDown,L=>{L.button===0&&(b.current={x:L.clientX,y:L.clientY})}),onPointerMove:ye(e.onPointerMove,L=>{if(!b.current)return;const B=L.clientX-b.current.x,H=L.clientY-b.current.y,Q=!!k.current,T=["left","right"].includes(p.swipeDirection),$=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,Y=T?$(0,B):0,W=T?0:$(0,H),ge=L.pointerType==="touch"?10:2,xe={x:Y,y:W},we={originalEvent:L,delta:xe};Q?(k.current=xe,ql(Oj,h,we,{discrete:!1})):Xg(xe,p.swipeDirection,ge)?(k.current=xe,ql($j,f,we,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(B)>ge||Math.abs(H)>ge)&&(b.current=null)}),onPointerUp:ye(e.onPointerUp,L=>{const B=k.current,H=L.target;if(H.hasPointerCapture(L.pointerId)&&H.releasePointerCapture(L.pointerId),k.current=null,b.current=null,B){const Q=L.currentTarget,T={originalEvent:L,delta:B};Xg(B,p.swipeDirection,p.swipeThreshold)?ql(Bj,y,T,{discrete:!0}):ql(Dj,m,T,{discrete:!0}),Q.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),qj=e=>{const{__scopeToast:t,children:n,...r}=e,s=Tu(Ru,t),[o,a]=d.useState(!1),[l,c]=d.useState(!1);return Hj(()=>a(!0)),d.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(Pu,{asChild:!0,children:i.jsx(cl,{...r,children:o&&i.jsxs(i.Fragment,{children:[s.label," ",n]})})})},Wj="ToastTitle",Ly=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(Me.div,{...r,ref:t})});Ly.displayName=Wj;var Uj="ToastDescription",Iy=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(Me.div,{...r,ref:t})});Iy.displayName=Uj;var $y="ToastAction",Oy=d.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?i.jsx(By,{altText:n,asChild:!0,children:i.jsx(Lm,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${$y}\`. Expected non-empty \`string\`.`),null)});Oy.displayName=$y;var Dy="ToastClose",Lm=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=zj(Dy,n);return i.jsx(By,{asChild:!0,children:i.jsx(Me.button,{type:"button",...r,ref:t,onClick:ye(e.onClick,s.onClose)})})});Lm.displayName=Dy;var By=d.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return i.jsx(Me.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function Fy(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),Gj(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const a=r.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...Fy(r))}}),t}function ql(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Ny(s,o):s.dispatchEvent(o)}var Xg=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),o=r>s;return t==="left"||t==="right"?o&&r>n:!o&&s>n};function Hj(e=()=>{}){const t=Lt(e);Kt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function Gj(e){return e.nodeType===e.ELEMENT_NODE}function Kj(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Td(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var Qj=Ty,zy=_y,Vy=Ay,qy=Ly,Wy=Iy,Uy=Oy,Hy=Lm;function Gy(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Gy(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ky(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Gy(e))&&(r&&(r+=" "),r+=t);return r}const Zg=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Jg=Ky,_u=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return Jg(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:o}=t,a=Object.keys(s).map(u=>{const f=n==null?void 0:n[u],h=o==null?void 0:o[u];if(f===null)return null;const m=Zg(f)||Zg(h);return s[u][m]}),l=n&&Object.entries(n).reduce((u,f)=>{let[h,m]=f;return m===void 0||(u[h]=m),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,f)=>{let{class:h,className:m,...y}=f;return Object.entries(y).every(g=>{let[p,w]=g;return Array.isArray(w)?w.includes({...o,...l}[p]):{...o,...l}[p]===w})?[...u,h,m]:u},[]);return Jg(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Qy=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=d.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:a,...l},c)=>d.createElement("svg",{ref:c,...Xj,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Qy("lucide",s),...l},[...a.map(([u,f])=>d.createElement(u,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(e,t)=>{const n=d.forwardRef(({className:r,...s},o)=>d.createElement(Zj,{ref:o,iconNode:t,className:Qy(`lucide-${Yj(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=ve("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=ve("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=ve("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=ve("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=ve("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=ve("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=ve("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=ve("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=ve("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=ve("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=ve("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=ve("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=ve("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=ve("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=ve("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=ve("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=ve("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=ve("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=ve("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=ve("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=ve("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=ve("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=ve("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=ve("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=ve("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=ve("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=ve("Infinity",[["path",{d:"M12 12c-2-2.67-4-4-6-4a4 4 0 1 0 0 8c2 0 4-1.33 6-4Zm0 0c2 2.67 4 4 6 4a4 4 0 0 0 0-8c-2 0-4 1.33-6 4Z",key:"1z0uae"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=ve("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=ve("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=ve("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=ve("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=ve("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=ve("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=ve("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=ve("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=ve("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=ve("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=ve("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=ve("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=ve("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=ve("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=ve("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=ve("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=ve("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=ve("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=ve("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=ve("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=ve("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=ve("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Dm="-",N2=e=>{const t=j2(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const l=a.split(Dm);return l[0]===""&&l.length!==1&&l.shift(),mw(l,t)||C2(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},mw=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?mw(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const o=e.join(Dm);return(a=t.validators.find(({validator:l})=>l(o)))==null?void 0:a.classGroupId},rv=/^\[(.+)\]$/,C2=e=>{if(rv.test(e)){const t=rv.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},j2=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return P2(Object.entries(e.classGroups),n).forEach(([o,a])=>{rh(a,r,o,t)}),r},rh=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const o=s===""?t:sv(t,s);o.classGroupId=n;return}if(typeof s=="function"){if(E2(s)){rh(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,a])=>{rh(a,sv(t,o),n,r)})})},sv=(e,t)=>{let n=e;return t.split(Dm).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},E2=e=>e.isThemeGetter,P2=(e,t)=>t?e.map(([n,r])=>{const s=r.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,l])=>[t+a,l])):o);return[n,s]}):e,T2=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(o,a)=>{n.set(o,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(o){let a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return s(o,a),a},set(o,a){n.has(o)?n.set(o,a):s(o,a)}}},pw="!",R2=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],o=t.length,a=l=>{const c=[];let u=0,f=0,h;for(let w=0;w<l.length;w++){let x=l[w];if(u===0){if(x===s&&(r||l.slice(w,w+o)===t)){c.push(l.slice(f,w)),f=w+o;continue}if(x==="/"){h=w;continue}}x==="["?u++:x==="]"&&u--}const m=c.length===0?l:l.substring(f),y=m.startsWith(pw),g=y?m.substring(1):m,p=h&&h>f?h-f:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:g,maybePostfixModifierPosition:p}};return n?l=>n({className:l,parseClassName:a}):a},_2=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},M2=e=>({cache:T2(e.cacheSize),parseClassName:R2(e),...N2(e)}),A2=/\s+/,L2=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,o=[],a=e.trim().split(A2);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:f,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:y}=n(u);let g=!!y,p=r(g?m.substring(0,y):m);if(!p){if(!g){l=u+(l.length>0?" "+l:l);continue}if(p=r(m),!p){l=u+(l.length>0?" "+l:l);continue}g=!1}const w=_2(f).join(":"),x=h?w+pw:w,v=x+p;if(o.includes(v))continue;o.push(v);const b=s(p,g);for(let k=0;k<b.length;++k){const S=b[k];o.push(x+S)}l=u+(l.length>0?" "+l:l)}return l};function I2(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=gw(t))&&(r&&(r+=" "),r+=n);return r}const gw=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=gw(e[r]))&&(n&&(n+=" "),n+=t);return n};function $2(e,...t){let n,r,s,o=a;function a(c){const u=t.reduce((f,h)=>h(f),e());return n=M2(u),r=n.cache.get,s=n.cache.set,o=l,l(c)}function l(c){const u=r(c);if(u)return u;const f=L2(c,n);return s(c,f),f}return function(){return o(I2.apply(null,arguments))}}const mt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},vw=/^\[(?:([a-z-]+):)?(.+)\]$/i,O2=/^\d+\/\d+$/,D2=new Set(["px","full","screen"]),B2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,F2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,z2=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,V2=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,q2=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Dr=e=>gi(e)||D2.has(e)||O2.test(e),os=e=>qi(e,"length",X2),gi=e=>!!e&&!Number.isNaN(Number(e)),_d=e=>qi(e,"number",gi),da=e=>!!e&&Number.isInteger(Number(e)),W2=e=>e.endsWith("%")&&gi(e.slice(0,-1)),Ge=e=>vw.test(e),is=e=>B2.test(e),U2=new Set(["length","size","percentage"]),H2=e=>qi(e,U2,xw),G2=e=>qi(e,"position",xw),K2=new Set(["image","url"]),Q2=e=>qi(e,K2,J2),Y2=e=>qi(e,"",Z2),fa=()=>!0,qi=(e,t,n)=>{const r=vw.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},X2=e=>F2.test(e)&&!z2.test(e),xw=()=>!1,Z2=e=>V2.test(e),J2=e=>q2.test(e),eE=()=>{const e=mt("colors"),t=mt("spacing"),n=mt("blur"),r=mt("brightness"),s=mt("borderColor"),o=mt("borderRadius"),a=mt("borderSpacing"),l=mt("borderWidth"),c=mt("contrast"),u=mt("grayscale"),f=mt("hueRotate"),h=mt("invert"),m=mt("gap"),y=mt("gradientColorStops"),g=mt("gradientColorStopPositions"),p=mt("inset"),w=mt("margin"),x=mt("opacity"),v=mt("padding"),b=mt("saturate"),k=mt("scale"),S=mt("sepia"),C=mt("skew"),N=mt("space"),j=mt("translate"),R=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",Ge,t],I=()=>[Ge,t],F=()=>["",Dr,os],L=()=>["auto",gi,Ge],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Ge],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[gi,Ge];return{cacheSize:500,separator:":",theme:{colors:[fa],spacing:[Dr,os],blur:["none","",is,Ge],brightness:W(),borderColor:[e],borderRadius:["none","","full",is,Ge],borderSpacing:I(),borderWidth:F(),contrast:W(),grayscale:$(),hueRotate:W(),invert:$(),gap:I(),gradientColorStops:[e],gradientColorStopPositions:[W2,os],inset:D(),margin:D(),opacity:W(),padding:I(),saturate:W(),scale:W(),sepia:$(),skew:W(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",Ge]}],container:["container"],columns:[{columns:[is]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),Ge]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",da,Ge]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ge]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",da,Ge]}],"grid-cols":[{"grid-cols":[fa]}],"col-start-end":[{col:["auto",{span:["full",da,Ge]},Ge]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[fa]}],"row-start-end":[{row:["auto",{span:[da,Ge]},Ge]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ge]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ge]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ge,t]}],"min-w":[{"min-w":[Ge,t,"min","max","fit"]}],"max-w":[{"max-w":[Ge,t,"none","full","min","max","fit","prose",{screen:[is]},is]}],h:[{h:[Ge,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ge,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ge,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ge,t,"auto","min","max","fit"]}],"font-size":[{text:["base",is,os]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_d]}],"font-family":[{font:[fa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ge]}],"line-clamp":[{"line-clamp":["none",gi,_d]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Dr,Ge]}],"list-image":[{"list-image":["none",Ge]}],"list-style-type":[{list:["none","disc","decimal",Ge]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Dr,os]}],"underline-offset":[{"underline-offset":["auto",Dr,Ge]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ge]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ge]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),G2]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",H2]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Q2]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:H()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[Dr,Ge]}],"outline-w":[{outline:[Dr,os]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Dr,os]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",is,Y2]}],"shadow-color":[{shadow:[fa]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...Q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",is,Ge]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ge]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",Ge]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ge]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[da,Ge]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ge]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ge]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ge]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Dr,os,_d]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},tE=$2(eE);function Ie(...e){return tE(Ky(e))}const nE=Qj,yw=d.forwardRef(({className:e,...t},n)=>i.jsx(zy,{ref:n,className:Ie("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:right-0 sm:flex-col md:max-w-[420px]",e),...t}));yw.displayName=zy.displayName;const rE=_u("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ww=d.forwardRef(({className:e,variant:t,...n},r)=>i.jsx(Vy,{ref:r,className:Ie(rE({variant:t}),e),...n}));ww.displayName=Vy.displayName;const sE=d.forwardRef(({className:e,...t},n)=>i.jsx(Uy,{ref:n,className:Ie("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));sE.displayName=Uy.displayName;const bw=d.forwardRef(({className:e,...t},n)=>i.jsx(Hy,{ref:n,className:Ie("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(So,{className:"h-4 w-4"})}));bw.displayName=Hy.displayName;const Sw=d.forwardRef(({className:e,...t},n)=>i.jsx(qy,{ref:n,className:Ie("text-sm font-semibold",e),...t}));Sw.displayName=qy.displayName;const kw=d.forwardRef(({className:e,...t},n)=>i.jsx(Wy,{ref:n,className:Ie("text-sm opacity-90",e),...t}));kw.displayName=Wy.displayName;function oE(){const{toasts:e}=al();return i.jsxs(nE,{children:[e.map(function({id:t,title:n,description:r,action:s,...o}){return i.jsxs(ww,{...o,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(Sw,{children:n}),r&&i.jsx(kw,{children:r})]}),s,i.jsx(bw,{})]},t)}),i.jsx(yw,{})]})}var iE=x0[" useId ".trim().toString()]||(()=>{}),aE=0;function Es(e){const[t,n]=d.useState(iE());return Kt(()=>{e||n(r=>r??String(aE++))},[e]),e||(t?`radix-${t}`:"")}const lE=["top","right","bottom","left"],_s=Math.min,Fn=Math.max,Yc=Math.round,Wl=Math.floor,_r=e=>({x:e,y:e}),cE={left:"right",right:"left",bottom:"top",top:"bottom"},uE={start:"end",end:"start"};function sh(e,t,n){return Fn(e,_s(t,n))}function Yr(e,t){return typeof e=="function"?e(t):e}function Xr(e){return e.split("-")[0]}function Wi(e){return e.split("-")[1]}function Bm(e){return e==="x"?"y":"x"}function Fm(e){return e==="y"?"height":"width"}function Ms(e){return["top","bottom"].includes(Xr(e))?"y":"x"}function zm(e){return Bm(Ms(e))}function dE(e,t,n){n===void 0&&(n=!1);const r=Wi(e),s=zm(e),o=Fm(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=Xc(a)),[a,Xc(a)]}function fE(e){const t=Xc(e);return[oh(e),t,oh(t)]}function oh(e){return e.replace(/start|end/g,t=>uE[t])}function hE(e,t,n){const r=["left","right"],s=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?o:a;default:return[]}}function mE(e,t,n,r){const s=Wi(e);let o=hE(Xr(e),n==="start",r);return s&&(o=o.map(a=>a+"-"+s),t&&(o=o.concat(o.map(oh)))),o}function Xc(e){return e.replace(/left|right|bottom|top/g,t=>cE[t])}function pE(e){return{top:0,right:0,bottom:0,left:0,...e}}function Nw(e){return typeof e!="number"?pE(e):{top:e,right:e,bottom:e,left:e}}function Zc(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function ov(e,t,n){let{reference:r,floating:s}=e;const o=Ms(t),a=zm(t),l=Fm(a),c=Xr(t),u=o==="y",f=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let y;switch(c){case"top":y={x:f,y:r.y-s.height};break;case"bottom":y={x:f,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:h};break;case"left":y={x:r.x-s.width,y:h};break;default:y={x:r.x,y:r.y}}switch(Wi(t)){case"start":y[a]-=m*(n&&u?-1:1);break;case"end":y[a]+=m*(n&&u?-1:1);break}return y}const gE=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:a}=n,l=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:h}=ov(u,r,c),m=r,y={},g=0;for(let p=0;p<l.length;p++){const{name:w,fn:x}=l[p],{x:v,y:b,data:k,reset:S}=await x({x:f,y:h,initialPlacement:r,placement:m,strategy:s,middlewareData:y,rects:u,platform:a,elements:{reference:e,floating:t}});f=v??f,h=b??h,y={...y,[w]:{...y[w],...k}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(u=S.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:f,y:h}=ov(u,m,c)),p=-1)}return{x:f,y:h,placement:m,strategy:s,middlewareData:y}};async function Za(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:m=!1,padding:y=0}=Yr(t,e),g=Nw(y),w=l[m?h==="floating"?"reference":"floating":h],x=Zc(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(w)))==null||n?w:w.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),v=h==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),k=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},S=Zc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:b,strategy:c}):v);return{top:(x.top-S.top+g.top)/k.y,bottom:(S.bottom-x.bottom+g.bottom)/k.y,left:(x.left-S.left+g.left)/k.x,right:(S.right-x.right+g.right)/k.x}}const vE=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:f=0}=Yr(e,t)||{};if(u==null)return{};const h=Nw(f),m={x:n,y:r},y=zm(s),g=Fm(y),p=await a.getDimensions(u),w=y==="y",x=w?"top":"left",v=w?"bottom":"right",b=w?"clientHeight":"clientWidth",k=o.reference[g]+o.reference[y]-m[y]-o.floating[g],S=m[y]-o.reference[y],C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let N=C?C[b]:0;(!N||!await(a.isElement==null?void 0:a.isElement(C)))&&(N=l.floating[b]||o.floating[g]);const j=k/2-S/2,R=N/2-p[g]/2-1,P=_s(h[x],R),D=_s(h[v],R),I=P,F=N-p[g]-D,L=N/2-p[g]/2+j,B=sh(I,L,F),H=!c.arrow&&Wi(s)!=null&&L!==B&&o.reference[g]/2-(L<I?P:D)-p[g]/2<0,Q=H?L<I?L-I:L-F:0;return{[y]:m[y]+Q,data:{[y]:B,centerOffset:L-B-Q,...H&&{alignmentOffset:Q}},reset:H}}}),xE=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,...w}=Yr(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const x=Xr(s),v=Ms(l),b=Xr(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=m||(b||!p?[Xc(l)]:fE(l)),C=g!=="none";!m&&C&&S.push(...mE(l,p,g,k));const N=[l,...S],j=await Za(t,w),R=[];let P=((r=o.flip)==null?void 0:r.overflows)||[];if(f&&R.push(j[x]),h){const L=dE(s,a,k);R.push(j[L[0]],j[L[1]])}if(P=[...P,{placement:s,overflows:R}],!R.every(L=>L<=0)){var D,I;const L=(((D=o.flip)==null?void 0:D.index)||0)+1,B=N[L];if(B)return{data:{index:L,overflows:P},reset:{placement:B}};let H=(I=P.filter(Q=>Q.overflows[0]<=0).sort((Q,T)=>Q.overflows[1]-T.overflows[1])[0])==null?void 0:I.placement;if(!H)switch(y){case"bestFit":{var F;const Q=(F=P.filter(T=>{if(C){const $=Ms(T.placement);return $===v||$==="y"}return!0}).map(T=>[T.placement,T.overflows.filter($=>$>0).reduce(($,Y)=>$+Y,0)]).sort((T,$)=>T[1]-$[1])[0])==null?void 0:F[0];Q&&(H=Q);break}case"initialPlacement":H=l;break}if(s!==H)return{reset:{placement:H}}}return{}}}};function iv(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function av(e){return lE.some(t=>e[t]>=0)}const yE=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Yr(e,t);switch(r){case"referenceHidden":{const o=await Za(t,{...s,elementContext:"reference"}),a=iv(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:av(a)}}}case"escaped":{const o=await Za(t,{...s,altBoundary:!0}),a=iv(o,n.floating);return{data:{escapedOffsets:a,escaped:av(a)}}}default:return{}}}}};async function wE(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Xr(n),l=Wi(n),c=Ms(n)==="y",u=["left","top"].includes(a)?-1:1,f=o&&c?-1:1,h=Yr(t,e);let{mainAxis:m,crossAxis:y,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof g=="number"&&(y=l==="end"?g*-1:g),c?{x:y*f,y:m*u}:{x:m*u,y:y*f}}const bE=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:a,middlewareData:l}=t,c=await wE(t,e);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:a}}}}},SE=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:w=>{let{x,y:v}=w;return{x,y:v}}},...c}=Yr(e,t),u={x:n,y:r},f=await Za(t,c),h=Ms(Xr(s)),m=Bm(h);let y=u[m],g=u[h];if(o){const w=m==="y"?"top":"left",x=m==="y"?"bottom":"right",v=y+f[w],b=y-f[x];y=sh(v,y,b)}if(a){const w=h==="y"?"top":"left",x=h==="y"?"bottom":"right",v=g+f[w],b=g-f[x];g=sh(v,g,b)}const p=l.fn({...t,[m]:y,[h]:g});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[m]:o,[h]:a}}}}}},kE=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Yr(e,t),f={x:n,y:r},h=Ms(s),m=Bm(h);let y=f[m],g=f[h];const p=Yr(l,t),w=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const b=m==="y"?"height":"width",k=o.reference[m]-o.floating[b]+w.mainAxis,S=o.reference[m]+o.reference[b]-w.mainAxis;y<k?y=k:y>S&&(y=S)}if(u){var x,v;const b=m==="y"?"width":"height",k=["top","left"].includes(Xr(s)),S=o.reference[h]-o.floating[b]+(k&&((x=a.offset)==null?void 0:x[h])||0)+(k?0:w.crossAxis),C=o.reference[h]+o.reference[b]+(k?0:((v=a.offset)==null?void 0:v[h])||0)-(k?w.crossAxis:0);g<S?g=S:g>C&&(g=C)}return{[m]:y,[h]:g}}}},NE=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:a,elements:l}=t,{apply:c=()=>{},...u}=Yr(e,t),f=await Za(t,u),h=Xr(s),m=Wi(s),y=Ms(s)==="y",{width:g,height:p}=o.floating;let w,x;h==="top"||h==="bottom"?(w=h,x=m===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(x=h,w=m==="end"?"top":"bottom");const v=p-f.top-f.bottom,b=g-f.left-f.right,k=_s(p-f[w],v),S=_s(g-f[x],b),C=!t.middlewareData.shift;let N=k,j=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(j=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(N=v),C&&!m){const P=Fn(f.left,0),D=Fn(f.right,0),I=Fn(f.top,0),F=Fn(f.bottom,0);y?j=g-2*(P!==0||D!==0?P+D:Fn(f.left,f.right)):N=p-2*(I!==0||F!==0?I+F:Fn(f.top,f.bottom))}await c({...t,availableWidth:j,availableHeight:N});const R=await a.getDimensions(l.floating);return g!==R.width||p!==R.height?{reset:{rects:!0}}:{}}}};function Au(){return typeof window<"u"}function Ui(e){return Cw(e)?(e.nodeName||"").toLowerCase():"#document"}function Un(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Lr(e){var t;return(t=(Cw(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Cw(e){return Au()?e instanceof Node||e instanceof Un(e).Node:!1}function gr(e){return Au()?e instanceof Element||e instanceof Un(e).Element:!1}function Ar(e){return Au()?e instanceof HTMLElement||e instanceof Un(e).HTMLElement:!1}function lv(e){return!Au()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Un(e).ShadowRoot}function dl(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=vr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function CE(e){return["table","td","th"].includes(Ui(e))}function Lu(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Vm(e){const t=qm(),n=gr(e)?vr(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function jE(e){let t=As(e);for(;Ar(t)&&!Mi(t);){if(Vm(t))return t;if(Lu(t))return null;t=As(t)}return null}function qm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Mi(e){return["html","body","#document"].includes(Ui(e))}function vr(e){return Un(e).getComputedStyle(e)}function Iu(e){return gr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function As(e){if(Ui(e)==="html")return e;const t=e.assignedSlot||e.parentNode||lv(e)&&e.host||Lr(e);return lv(t)?t.host:t}function jw(e){const t=As(e);return Mi(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ar(t)&&dl(t)?t:jw(t)}function Ja(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=jw(e),o=s===((r=e.ownerDocument)==null?void 0:r.body),a=Un(s);if(o){const l=ih(a);return t.concat(a,a.visualViewport||[],dl(s)?s:[],l&&n?Ja(l):[])}return t.concat(s,Ja(s,[],n))}function ih(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ew(e){const t=vr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Ar(e),o=s?e.offsetWidth:n,a=s?e.offsetHeight:r,l=Yc(n)!==o||Yc(r)!==a;return l&&(n=o,r=a),{width:n,height:r,$:l}}function Wm(e){return gr(e)?e:e.contextElement}function vi(e){const t=Wm(e);if(!Ar(t))return _r(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=Ew(t);let a=(o?Yc(n.width):n.width)/r,l=(o?Yc(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const EE=_r(0);function Pw(e){const t=Un(e);return!qm()||!t.visualViewport?EE:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function PE(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Un(e)?!1:t}function ko(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=Wm(e);let a=_r(1);t&&(r?gr(r)&&(a=vi(r)):a=vi(e));const l=PE(o,n,r)?Pw(o):_r(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,f=s.width/a.x,h=s.height/a.y;if(o){const m=Un(o),y=r&&gr(r)?Un(r):r;let g=m,p=ih(g);for(;p&&r&&y!==g;){const w=vi(p),x=p.getBoundingClientRect(),v=vr(p),b=x.left+(p.clientLeft+parseFloat(v.paddingLeft))*w.x,k=x.top+(p.clientTop+parseFloat(v.paddingTop))*w.y;c*=w.x,u*=w.y,f*=w.x,h*=w.y,c+=b,u+=k,g=Un(p),p=ih(g)}}return Zc({width:f,height:h,x:c,y:u})}function Um(e,t){const n=Iu(e).scrollLeft;return t?t.left+n:ko(Lr(e)).left+n}function Tw(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:Um(e,r)),o=r.top+t.scrollTop;return{x:s,y:o}}function TE(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o=s==="fixed",a=Lr(r),l=t?Lu(t.floating):!1;if(r===a||l&&o)return n;let c={scrollLeft:0,scrollTop:0},u=_r(1);const f=_r(0),h=Ar(r);if((h||!h&&!o)&&((Ui(r)!=="body"||dl(a))&&(c=Iu(r)),Ar(r))){const y=ko(r);u=vi(r),f.x=y.x+r.clientLeft,f.y=y.y+r.clientTop}const m=a&&!h&&!o?Tw(a,c,!0):_r(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x+m.x,y:n.y*u.y-c.scrollTop*u.y+f.y+m.y}}function RE(e){return Array.from(e.getClientRects())}function _E(e){const t=Lr(e),n=Iu(e),r=e.ownerDocument.body,s=Fn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Fn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Um(e);const l=-n.scrollTop;return vr(r).direction==="rtl"&&(a+=Fn(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:a,y:l}}function ME(e,t){const n=Un(e),r=Lr(e),s=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){o=s.width,a=s.height;const u=qm();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:o,height:a,x:l,y:c}}function AE(e,t){const n=ko(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=Ar(e)?vi(e):_r(1),a=e.clientWidth*o.x,l=e.clientHeight*o.y,c=s*o.x,u=r*o.y;return{width:a,height:l,x:c,y:u}}function cv(e,t,n){let r;if(t==="viewport")r=ME(e,n);else if(t==="document")r=_E(Lr(e));else if(gr(t))r=AE(t,n);else{const s=Pw(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Zc(r)}function Rw(e,t){const n=As(e);return n===t||!gr(n)||Mi(n)?!1:vr(n).position==="fixed"||Rw(n,t)}function LE(e,t){const n=t.get(e);if(n)return n;let r=Ja(e,[],!1).filter(l=>gr(l)&&Ui(l)!=="body"),s=null;const o=vr(e).position==="fixed";let a=o?As(e):e;for(;gr(a)&&!Mi(a);){const l=vr(a),c=Vm(a);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||dl(a)&&!c&&Rw(e,a))?r=r.filter(f=>f!==a):s=l,a=As(a)}return t.set(e,r),r}function IE(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const a=[...n==="clippingAncestors"?Lu(t)?[]:LE(t,this._c):[].concat(n),r],l=a[0],c=a.reduce((u,f)=>{const h=cv(t,f,s);return u.top=Fn(h.top,u.top),u.right=_s(h.right,u.right),u.bottom=_s(h.bottom,u.bottom),u.left=Fn(h.left,u.left),u},cv(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function $E(e){const{width:t,height:n}=Ew(e);return{width:t,height:n}}function OE(e,t,n){const r=Ar(t),s=Lr(t),o=n==="fixed",a=ko(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=_r(0);if(r||!r&&!o)if((Ui(t)!=="body"||dl(s))&&(l=Iu(t)),r){const m=ko(t,!0,o,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else s&&(c.x=Um(s));const u=s&&!r&&!o?Tw(s,l):_r(0),f=a.left+l.scrollLeft-c.x-u.x,h=a.top+l.scrollTop-c.y-u.y;return{x:f,y:h,width:a.width,height:a.height}}function Md(e){return vr(e).position==="static"}function uv(e,t){if(!Ar(e)||vr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Lr(e)===n&&(n=n.ownerDocument.body),n}function _w(e,t){const n=Un(e);if(Lu(e))return n;if(!Ar(e)){let s=As(e);for(;s&&!Mi(s);){if(gr(s)&&!Md(s))return s;s=As(s)}return n}let r=uv(e,t);for(;r&&CE(r)&&Md(r);)r=uv(r,t);return r&&Mi(r)&&Md(r)&&!Vm(r)?n:r||jE(e)||n}const DE=async function(e){const t=this.getOffsetParent||_w,n=this.getDimensions,r=await n(e.floating);return{reference:OE(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function BE(e){return vr(e).direction==="rtl"}const FE={convertOffsetParentRelativeRectToViewportRelativeRect:TE,getDocumentElement:Lr,getClippingRect:IE,getOffsetParent:_w,getElementRects:DE,getClientRects:RE,getDimensions:$E,getScale:vi,isElement:gr,isRTL:BE};function Mw(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function zE(e,t){let n=null,r;const s=Lr(e);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=e.getBoundingClientRect(),{left:f,top:h,width:m,height:y}=u;if(l||t(),!m||!y)return;const g=Wl(h),p=Wl(s.clientWidth-(f+m)),w=Wl(s.clientHeight-(h+y)),x=Wl(f),b={rootMargin:-g+"px "+-p+"px "+-w+"px "+-x+"px",threshold:Fn(0,_s(1,c))||1};let k=!0;function S(C){const N=C[0].intersectionRatio;if(N!==c){if(!k)return a();N?a(!1,N):r=setTimeout(()=>{a(!1,1e-7)},1e3)}N===1&&!Mw(u,e.getBoundingClientRect())&&a(),k=!1}try{n=new IntersectionObserver(S,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(S,b)}n.observe(e)}return a(!0),o}function VE(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Wm(e),f=s||o?[...u?Ja(u):[],...Ja(t)]:[];f.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),o&&x.addEventListener("resize",n)});const h=u&&l?zE(u,n):null;let m=-1,y=null;a&&(y=new ResizeObserver(x=>{let[v]=x;v&&v.target===u&&y&&(y.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=y)==null||b.observe(t)})),n()}),u&&!c&&y.observe(u),y.observe(t));let g,p=c?ko(e):null;c&&w();function w(){const x=ko(e);p&&!Mw(p,x)&&n(),p=x,g=requestAnimationFrame(w)}return n(),()=>{var x;f.forEach(v=>{s&&v.removeEventListener("scroll",n),o&&v.removeEventListener("resize",n)}),h==null||h(),(x=y)==null||x.disconnect(),y=null,c&&cancelAnimationFrame(g)}}const qE=bE,WE=SE,UE=xE,HE=NE,GE=yE,dv=vE,KE=kE,QE=(e,t,n)=>{const r=new Map,s={platform:FE,...n},o={...s.platform,_c:r};return gE(e,t,{...s,platform:o})};var xc=typeof document<"u"?d.useLayoutEffect:d.useEffect;function Jc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Jc(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!Jc(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Aw(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function fv(e,t){const n=Aw(e);return Math.round(t*n)/n}function Ad(e){const t=d.useRef(e);return xc(()=>{t.current=e}),t}function YE(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[f,h]=d.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,y]=d.useState(r);Jc(m,r)||y(r);const[g,p]=d.useState(null),[w,x]=d.useState(null),v=d.useCallback(T=>{T!==C.current&&(C.current=T,p(T))},[]),b=d.useCallback(T=>{T!==N.current&&(N.current=T,x(T))},[]),k=o||g,S=a||w,C=d.useRef(null),N=d.useRef(null),j=d.useRef(f),R=c!=null,P=Ad(c),D=Ad(s),I=Ad(u),F=d.useCallback(()=>{if(!C.current||!N.current)return;const T={placement:t,strategy:n,middleware:m};D.current&&(T.platform=D.current),QE(C.current,N.current,T).then($=>{const Y={...$,isPositioned:I.current!==!1};L.current&&!Jc(j.current,Y)&&(j.current=Y,Ao.flushSync(()=>{h(Y)}))})},[m,t,n,D,I]);xc(()=>{u===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,h(T=>({...T,isPositioned:!1})))},[u]);const L=d.useRef(!1);xc(()=>(L.current=!0,()=>{L.current=!1}),[]),xc(()=>{if(k&&(C.current=k),S&&(N.current=S),k&&S){if(P.current)return P.current(k,S,F);F()}},[k,S,F,P,R]);const B=d.useMemo(()=>({reference:C,floating:N,setReference:v,setFloating:b}),[v,b]),H=d.useMemo(()=>({reference:k,floating:S}),[k,S]),Q=d.useMemo(()=>{const T={position:n,left:0,top:0};if(!H.floating)return T;const $=fv(H.floating,f.x),Y=fv(H.floating,f.y);return l?{...T,transform:"translate("+$+"px, "+Y+"px)",...Aw(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:Y}},[n,l,H.floating,f.x,f.y]);return d.useMemo(()=>({...f,update:F,refs:B,elements:H,floatingStyles:Q}),[f,F,B,H,Q])}const XE=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?dv({element:r.current,padding:s}).fn(n):{}:r?dv({element:r,padding:s}).fn(n):{}}}},ZE=(e,t)=>({...qE(e),options:[e,t]}),JE=(e,t)=>({...WE(e),options:[e,t]}),eP=(e,t)=>({...KE(e),options:[e,t]}),tP=(e,t)=>({...UE(e),options:[e,t]}),nP=(e,t)=>({...HE(e),options:[e,t]}),rP=(e,t)=>({...GE(e),options:[e,t]}),sP=(e,t)=>({...XE(e),options:[e,t]});var oP="Arrow",Lw=d.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...o}=e;return i.jsx(Me.svg,{...o,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});Lw.displayName=oP;var iP=Lw;function Hm(e){const[t,n]=d.useState(void 0);return Kt(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;n({width:a,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Gm="Popper",[Iw,$u]=Ln(Gm),[aP,$w]=Iw(Gm),Ow=e=>{const{__scopePopper:t,children:n}=e,[r,s]=d.useState(null);return i.jsx(aP,{scope:t,anchor:r,onAnchorChange:s,children:n})};Ow.displayName=Gm;var Dw="PopperAnchor",Bw=d.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,o=$w(Dw,n),a=d.useRef(null),l=qe(t,a);return d.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:i.jsx(Me.div,{...s,ref:l})});Bw.displayName=Dw;var Km="PopperContent",[lP,cP]=Iw(Km),Fw=d.forwardRef((e,t)=>{var q,X,J,fe,ue,Ne;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:y="optimized",onPlaced:g,...p}=e,w=$w(Km,n),[x,v]=d.useState(null),b=qe(t,He=>v(He)),[k,S]=d.useState(null),C=Hm(k),N=(C==null?void 0:C.width)??0,j=(C==null?void 0:C.height)??0,R=r+(o!=="center"?"-"+o:""),P=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},D=Array.isArray(u)?u:[u],I=D.length>0,F={padding:P,boundary:D.filter(dP),altBoundary:I},{refs:L,floatingStyles:B,placement:H,isPositioned:Q,middlewareData:T}=YE({strategy:"fixed",placement:R,whileElementsMounted:(...He)=>VE(...He,{animationFrame:y==="always"}),elements:{reference:w.anchor},middleware:[ZE({mainAxis:s+j,alignmentAxis:a}),c&&JE({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?eP():void 0,...F}),c&&tP({...F}),nP({...F,apply:({elements:He,rects:Ee,availableWidth:$e,availableHeight:Te})=>{const{width:ke,height:ut}=Ee.reference,vt=He.floating.style;vt.setProperty("--radix-popper-available-width",`${$e}px`),vt.setProperty("--radix-popper-available-height",`${Te}px`),vt.setProperty("--radix-popper-anchor-width",`${ke}px`),vt.setProperty("--radix-popper-anchor-height",`${ut}px`)}}),k&&sP({element:k,padding:l}),fP({arrowWidth:N,arrowHeight:j}),m&&rP({strategy:"referenceHidden",...F})]}),[$,Y]=qw(H),W=Lt(g);Kt(()=>{Q&&(W==null||W())},[Q,W]);const ge=(q=T.arrow)==null?void 0:q.x,xe=(X=T.arrow)==null?void 0:X.y,we=((J=T.arrow)==null?void 0:J.centerOffset)!==0,[Ce,O]=d.useState();return Kt(()=>{x&&O(window.getComputedStyle(x).zIndex)},[x]),i.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:Q?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ce,"--radix-popper-transform-origin":[(fe=T.transformOrigin)==null?void 0:fe.x,(ue=T.transformOrigin)==null?void 0:ue.y].join(" "),...((Ne=T.hide)==null?void 0:Ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(lP,{scope:n,placedSide:$,onArrowChange:S,arrowX:ge,arrowY:xe,shouldHideArrow:we,children:i.jsx(Me.div,{"data-side":$,"data-align":Y,...p,ref:b,style:{...p.style,animation:Q?void 0:"none"}})})})});Fw.displayName=Km;var zw="PopperArrow",uP={top:"bottom",right:"left",bottom:"top",left:"right"},Vw=d.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,o=cP(zw,r),a=uP[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(iP,{...s,ref:n,style:{...s.style,display:"block"}})})});Vw.displayName=zw;function dP(e){return e!==null}var fP=e=>({name:"transformOrigin",options:e,fn(t){var w,x,v;const{placement:n,rects:r,middlewareData:s}=t,a=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,f]=qw(n),h={start:"0%",center:"50%",end:"100%"}[f],m=(((x=s.arrow)==null?void 0:x.x)??0)+l/2,y=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let g="",p="";return u==="bottom"?(g=a?h:`${m}px`,p=`${-c}px`):u==="top"?(g=a?h:`${m}px`,p=`${r.floating.height+c}px`):u==="right"?(g=`${-c}px`,p=a?h:`${y}px`):u==="left"&&(g=`${r.floating.width+c}px`,p=a?h:`${y}px`),{data:{x:g,y:p}}}});function qw(e){const[t,n="center"]=e.split("-");return[t,n]}var hP=Ow,Ww=Bw,Uw=Fw,Hw=Vw,[Ou,L4]=Ln("Tooltip",[$u]),Qm=$u(),Gw="TooltipProvider",mP=700,hv="tooltip.open",[pP,Kw]=Ou(Gw),Qw=e=>{const{__scopeTooltip:t,delayDuration:n=mP,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=e,a=d.useRef(!0),l=d.useRef(!1),c=d.useRef(0);return d.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(pP,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:d.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:d.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:d.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:o})};Qw.displayName=Gw;var Yw="Tooltip",[I4,Du]=Ou(Yw),ah="TooltipTrigger",gP=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Du(ah,n),o=Kw(ah,n),a=Qm(n),l=d.useRef(null),c=qe(t,l,s.onTriggerChange),u=d.useRef(!1),f=d.useRef(!1),h=d.useCallback(()=>u.current=!1,[]);return d.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),i.jsx(Ww,{asChild:!0,...a,children:i.jsx(Me.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:ye(e.onPointerMove,m=>{m.pointerType!=="touch"&&!f.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:ye(e.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:ye(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ye(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:ye(e.onBlur,s.onClose),onClick:ye(e.onClick,s.onClose)})})});gP.displayName=ah;var vP="TooltipPortal",[$4,xP]=Ou(vP,{forceMount:void 0}),Ai="TooltipContent",Xw=d.forwardRef((e,t)=>{const n=xP(Ai,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=e,a=Du(Ai,e.__scopeTooltip);return i.jsx(xr,{present:r||a.open,children:a.disableHoverableContent?i.jsx(Zw,{side:s,...o,ref:t}):i.jsx(yP,{side:s,...o,ref:t})})}),yP=d.forwardRef((e,t)=>{const n=Du(Ai,e.__scopeTooltip),r=Kw(Ai,e.__scopeTooltip),s=d.useRef(null),o=qe(t,s),[a,l]=d.useState(null),{trigger:c,onClose:u}=n,f=s.current,{onPointerInTransitChange:h}=r,m=d.useCallback(()=>{l(null),h(!1)},[h]),y=d.useCallback((g,p)=>{const w=g.currentTarget,x={x:g.clientX,y:g.clientY},v=NP(x,w.getBoundingClientRect()),b=CP(x,v),k=jP(p.getBoundingClientRect()),S=PP([...b,...k]);l(S),h(!0)},[h]);return d.useEffect(()=>()=>m(),[m]),d.useEffect(()=>{if(c&&f){const g=w=>y(w,f),p=w=>y(w,c);return c.addEventListener("pointerleave",g),f.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",g),f.removeEventListener("pointerleave",p)}}},[c,f,y,m]),d.useEffect(()=>{if(a){const g=p=>{const w=p.target,x={x:p.clientX,y:p.clientY},v=(c==null?void 0:c.contains(w))||(f==null?void 0:f.contains(w)),b=!EP(x,a);v?m():b&&(m(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,f,a,u,m]),i.jsx(Zw,{...e,ref:o})}),[wP,bP]=Ou(Yw,{isInside:!1}),SP=ky("TooltipContent"),Zw=d.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:a,...l}=e,c=Du(Ai,n),u=Qm(n),{onClose:f}=c;return d.useEffect(()=>(document.addEventListener(hv,f),()=>document.removeEventListener(hv,f)),[f]),d.useEffect(()=>{if(c.trigger){const h=m=>{const y=m.target;y!=null&&y.contains(c.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,f]),i.jsx(ll,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:i.jsxs(Uw,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(SP,{children:r}),i.jsx(wP,{scope:n,isInside:!0,children:i.jsx(_j,{id:c.contentId,role:"tooltip",children:s||r})})]})})});Xw.displayName=Ai;var Jw="TooltipArrow",kP=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Qm(n);return bP(Jw,n).isInside?null:i.jsx(Hw,{...s,...r,ref:t})});kP.displayName=Jw;function NP(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function CP(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function jP(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function EP(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const l=t[o].x,c=t[o].y,u=t[a].x,f=t[a].y;c>r!=f>r&&n<(u-l)*(r-c)/(f-c)+l&&(s=!s)}return s}function PP(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),TP(t)}function TP(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const o=t[t.length-1],a=t[t.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const o=n[n.length-1],a=n[n.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var RP=Qw,e1=Xw;const _P=RP,MP=d.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(e1,{ref:r,sideOffset:t,className:Ie("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));MP.displayName=e1.displayName;const AP={theme:"dark",setTheme:()=>null},t1=d.createContext(AP);function LP({children:e,defaultTheme:t="dark",storageKey:n="simul-chess-theme",...r}){const[s,o]=d.useState(()=>typeof window>"u"?t:localStorage.getItem(n)||t);d.useEffect(()=>{const l=window.document.documentElement;l.classList.remove("light","dark"),l.classList.add(s)},[s]);const a={theme:s,setTheme:l=>{localStorage.setItem(n,l),o(l)}};return i.jsx(t1.Provider,{...r,value:a,children:e})}const IP=()=>{const e=d.useContext(t1);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},Ym=_u("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),re=d.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},o)=>{const a=r?uj:"button";return i.jsx(a,{className:Ie(Ym({variant:t,size:n,className:e})),ref:o,...s})});re.displayName="Button";function $P(){const{theme:e,setTheme:t}=IP();return i.jsxs(re,{variant:"ghost",size:"icon",onClick:()=>t(e==="light"?"dark":"light"),"data-testid":"button-theme-toggle",children:[i.jsx(S2,{className:"h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),i.jsx(aw,{className:"absolute h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),i.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function Xm(e){const t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Zm="Switch",[OP,O4]=Ln(Zm),[DP,BP]=OP(Zm),n1=d.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:o,required:a,disabled:l,value:c="on",onCheckedChange:u,form:f,...h}=e,[m,y]=d.useState(null),g=qe(t,b=>y(b)),p=d.useRef(!1),w=m?f||!!m.closest("form"):!0,[x=!1,v]=bo({prop:s,defaultProp:o,onChange:u});return i.jsxs(DP,{scope:n,checked:x,disabled:l,children:[i.jsx(Me.button,{type:"button",role:"switch","aria-checked":x,"aria-required":a,"data-state":o1(x),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:g,onClick:ye(e.onClick,b=>{v(k=>!k),w&&(p.current=b.isPropagationStopped(),p.current||b.stopPropagation())})}),w&&i.jsx(FP,{control:m,bubbles:!p.current,name:r,value:c,checked:x,required:a,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});n1.displayName=Zm;var r1="SwitchThumb",s1=d.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=BP(r1,n);return i.jsx(Me.span,{"data-state":o1(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});s1.displayName=r1;var FP=e=>{const{control:t,checked:n,bubbles:r=!0,...s}=e,o=d.useRef(null),a=Xm(n),l=Hm(t);return d.useEffect(()=>{const c=o.current,u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==n&&h){const m=new Event("click",{bubbles:r});h.call(c,n),c.dispatchEvent(m)}},[a,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:o,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function o1(e){return e?"checked":"unchecked"}var i1=n1,zP=s1;const er=d.forwardRef(({className:e,...t},n)=>i.jsx(i1,{className:Ie("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:i.jsx(zP,{className:Ie("pointer-events-none block h-5 w-5 rounded-full bg-stone-300 dark:bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));er.displayName=i1.displayName;var VP="Label",a1=d.forwardRef((e,t)=>i.jsx(Me.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));a1.displayName=VP;var l1=a1;const qP=_u("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Zt=d.forwardRef(({className:e,...t},n)=>i.jsx(l1,{ref:n,className:Ie(qP(),e),...t}));Zt.displayName=l1.displayName;var Ld="focusScope.autoFocusOnMount",Id="focusScope.autoFocusOnUnmount",mv={bubbles:!1,cancelable:!0},WP="FocusScope",Jm=d.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=e,[l,c]=d.useState(null),u=Lt(s),f=Lt(o),h=d.useRef(null),m=qe(t,p=>c(p)),y=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(r){let p=function(b){if(y.paused||!l)return;const k=b.target;l.contains(k)?h.current=k:us(h.current,{select:!0})},w=function(b){if(y.paused||!l)return;const k=b.relatedTarget;k!==null&&(l.contains(k)||us(h.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const S of b)S.removedNodes.length>0&&us(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",w);const v=new MutationObserver(x);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",w),v.disconnect()}}},[r,l,y.paused]),d.useEffect(()=>{if(l){gv.add(y);const p=document.activeElement;if(!l.contains(p)){const x=new CustomEvent(Ld,mv);l.addEventListener(Ld,u),l.dispatchEvent(x),x.defaultPrevented||(UP(YP(c1(l)),{select:!0}),document.activeElement===p&&us(l))}return()=>{l.removeEventListener(Ld,u),setTimeout(()=>{const x=new CustomEvent(Id,mv);l.addEventListener(Id,f),l.dispatchEvent(x),x.defaultPrevented||us(p??document.body,{select:!0}),l.removeEventListener(Id,f),gv.remove(y)},0)}}},[l,u,f,y]);const g=d.useCallback(p=>{if(!n&&!r||y.paused)return;const w=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,x=document.activeElement;if(w&&x){const v=p.currentTarget,[b,k]=HP(v);b&&k?!p.shiftKey&&x===k?(p.preventDefault(),n&&us(b,{select:!0})):p.shiftKey&&x===b&&(p.preventDefault(),n&&us(k,{select:!0})):x===v&&p.preventDefault()}},[n,r,y.paused]);return i.jsx(Me.div,{tabIndex:-1,...a,ref:m,onKeyDown:g})});Jm.displayName=WP;function UP(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(us(r,{select:t}),document.activeElement!==n)return}function HP(e){const t=c1(e),n=pv(t,e),r=pv(t.reverse(),e);return[n,r]}function c1(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function pv(e,t){for(const n of e)if(!GP(n,{upTo:t}))return n}function GP(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function KP(e){return e instanceof HTMLInputElement&&"select"in e}function us(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&KP(e)&&t&&e.select()}}var gv=QP();function QP(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=vv(e,t),e.unshift(t)},remove(t){var n;e=vv(e,t),(n=e[0])==null||n.resume()}}}function vv(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function YP(e){return e.filter(t=>t.tagName!=="A")}var $d=0;function u1(){d.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??xv()),document.body.insertAdjacentElement("beforeend",e[1]??xv()),$d++,()=>{$d===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),$d--}},[])}function xv(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Er=function(){return Er=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Er.apply(this,arguments)};function d1(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function XP(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var yc="right-scroll-bar-position",wc="width-before-scroll-bar",ZP="with-scroll-bars-hidden",JP="--removed-body-scroll-bar-size";function Od(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function eT(e,t){var n=d.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var tT=typeof window<"u"?d.useLayoutEffect:d.useEffect,yv=new WeakMap;function nT(e,t){var n=eT(null,function(r){return e.forEach(function(s){return Od(s,r)})});return tT(function(){var r=yv.get(n);if(r){var s=new Set(r),o=new Set(e),a=n.current;s.forEach(function(l){o.has(l)||Od(l,null)}),o.forEach(function(l){s.has(l)||Od(l,a)})}yv.set(n,e)},[e]),n}function rT(e){return e}function sT(e,t){t===void 0&&(t=rT);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var a=t(o,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(o){for(r=!0;n.length;){var a=n;n=[],a.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(o),a=n}var c=function(){var f=a;a=[],f.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(f){a.push(f),u()},filter:function(f){return a=a.filter(f),n}}}};return s}function oT(e){e===void 0&&(e={});var t=sT(null);return t.options=Er({async:!0,ssr:!1},e),t}var f1=function(e){var t=e.sideCar,n=d1(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return d.createElement(r,Er({},n))};f1.isSideCarExport=!0;function iT(e,t){return e.useMedium(t),f1}var h1=oT(),Dd=function(){},Bu=d.forwardRef(function(e,t){var n=d.useRef(null),r=d.useState({onScrollCapture:Dd,onWheelCapture:Dd,onTouchMoveCapture:Dd}),s=r[0],o=r[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,h=e.shards,m=e.sideCar,y=e.noIsolation,g=e.inert,p=e.allowPinchZoom,w=e.as,x=w===void 0?"div":w,v=e.gapMode,b=d1(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=m,S=nT([n,t]),C=Er(Er({},b),s);return d.createElement(d.Fragment,null,f&&d.createElement(k,{sideCar:h1,removeScrollBar:u,shards:h,noIsolation:y,inert:g,setCallbacks:o,allowPinchZoom:!!p,lockRef:n,gapMode:v}),a?d.cloneElement(d.Children.only(l),Er(Er({},C),{ref:S})):d.createElement(x,Er({},C,{className:c,ref:S}),l))});Bu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bu.classNames={fullWidth:wc,zeroRight:yc};var aT=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function lT(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=aT();return t&&e.setAttribute("nonce",t),e}function cT(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function uT(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var dT=function(){var e=0,t=null;return{add:function(n){e==0&&(t=lT())&&(cT(t,n),uT(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},fT=function(){var e=dT();return function(t,n){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},m1=function(){var e=fT(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},hT={left:0,top:0,right:0,gap:0},Bd=function(e){return parseInt(e||"",10)||0},mT=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Bd(n),Bd(r),Bd(s)]},pT=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return hT;var t=mT(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},gT=m1(),xi="data-scroll-locked",vT=function(e,t,n,r){var s=e.left,o=e.top,a=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(ZP,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(xi,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(yc,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(wc,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(yc," .").concat(yc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(wc," .").concat(wc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(xi,`] {
    `).concat(JP,": ").concat(l,`px;
  }
`)},wv=function(){var e=parseInt(document.body.getAttribute(xi)||"0",10);return isFinite(e)?e:0},xT=function(){d.useEffect(function(){return document.body.setAttribute(xi,(wv()+1).toString()),function(){var e=wv()-1;e<=0?document.body.removeAttribute(xi):document.body.setAttribute(xi,e.toString())}},[])},yT=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;xT();var o=d.useMemo(function(){return pT(s)},[s]);return d.createElement(gT,{styles:vT(o,!t,s,n?"":"!important")})},lh=!1;if(typeof window<"u")try{var Ul=Object.defineProperty({},"passive",{get:function(){return lh=!0,!0}});window.addEventListener("test",Ul,Ul),window.removeEventListener("test",Ul,Ul)}catch{lh=!1}var Vo=lh?{passive:!1}:!1,wT=function(e){return e.tagName==="TEXTAREA"},p1=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!wT(e)&&n[t]==="visible")},bT=function(e){return p1(e,"overflowY")},ST=function(e){return p1(e,"overflowX")},bv=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=g1(e,r);if(s){var o=v1(e,r),a=o[1],l=o[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},kT=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},NT=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},g1=function(e,t){return e==="v"?bT(t):ST(t)},v1=function(e,t){return e==="v"?kT(t):NT(t)},CT=function(e,t){return e==="h"&&t==="rtl"?-1:1},jT=function(e,t,n,r,s){var o=CT(e,window.getComputedStyle(t).direction),a=o*r,l=n.target,c=t.contains(l),u=!1,f=a>0,h=0,m=0;do{var y=v1(e,l),g=y[0],p=y[1],w=y[2],x=p-w-o*g;(g||x)&&g1(e,l)&&(h+=x,m+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(Math.abs(h)<1||!s)||!f&&(Math.abs(m)<1||!s))&&(u=!0),u},Hl=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Sv=function(e){return[e.deltaX,e.deltaY]},kv=function(e){return e&&"current"in e?e.current:e},ET=function(e,t){return e[0]===t[0]&&e[1]===t[1]},PT=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},TT=0,qo=[];function RT(e){var t=d.useRef([]),n=d.useRef([0,0]),r=d.useRef(),s=d.useState(TT++)[0],o=d.useState(m1)[0],a=d.useRef(e);d.useEffect(function(){a.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var p=XP([e.lockRef.current],(e.shards||[]).map(kv),!0).filter(Boolean);return p.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=d.useCallback(function(p,w){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!a.current.allowPinchZoom;var x=Hl(p),v=n.current,b="deltaX"in p?p.deltaX:v[0]-x[0],k="deltaY"in p?p.deltaY:v[1]-x[1],S,C=p.target,N=Math.abs(b)>Math.abs(k)?"h":"v";if("touches"in p&&N==="h"&&C.type==="range")return!1;var j=bv(N,C);if(!j)return!0;if(j?S=N:(S=N==="v"?"h":"v",j=bv(N,C)),!j)return!1;if(!r.current&&"changedTouches"in p&&(b||k)&&(r.current=S),!S)return!0;var R=r.current||S;return jT(R,w,p,R==="h"?b:k,!0)},[]),c=d.useCallback(function(p){var w=p;if(!(!qo.length||qo[qo.length-1]!==o)){var x="deltaY"in w?Sv(w):Hl(w),v=t.current.filter(function(S){return S.name===w.type&&(S.target===w.target||w.target===S.shadowParent)&&ET(S.delta,x)})[0];if(v&&v.should){w.cancelable&&w.preventDefault();return}if(!v){var b=(a.current.shards||[]).map(kv).filter(Boolean).filter(function(S){return S.contains(w.target)}),k=b.length>0?l(w,b[0]):!a.current.noIsolation;k&&w.cancelable&&w.preventDefault()}}},[]),u=d.useCallback(function(p,w,x,v){var b={name:p,delta:w,target:x,should:v,shadowParent:_T(x)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(k){return k!==b})},1)},[]),f=d.useCallback(function(p){n.current=Hl(p),r.current=void 0},[]),h=d.useCallback(function(p){u(p.type,Sv(p),p.target,l(p,e.lockRef.current))},[]),m=d.useCallback(function(p){u(p.type,Hl(p),p.target,l(p,e.lockRef.current))},[]);d.useEffect(function(){return qo.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Vo),document.addEventListener("touchmove",c,Vo),document.addEventListener("touchstart",f,Vo),function(){qo=qo.filter(function(p){return p!==o}),document.removeEventListener("wheel",c,Vo),document.removeEventListener("touchmove",c,Vo),document.removeEventListener("touchstart",f,Vo)}},[]);var y=e.removeScrollBar,g=e.inert;return d.createElement(d.Fragment,null,g?d.createElement(o,{styles:PT(s)}):null,y?d.createElement(yT,{gapMode:e.gapMode}):null)}function _T(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const MT=iT(h1,RT);var ep=d.forwardRef(function(e,t){return d.createElement(Bu,Er({},e,{ref:t,sideCar:MT}))});ep.classNames=Bu.classNames;var AT=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Wo=new WeakMap,Gl=new WeakMap,Kl={},Fd=0,x1=function(e){return e&&(e.host||x1(e.parentNode))},LT=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=x1(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},IT=function(e,t,n,r){var s=LT(t,Array.isArray(e)?e:[e]);Kl[n]||(Kl[n]=new WeakMap);var o=Kl[n],a=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var f=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))f(m);else try{var y=m.getAttribute(r),g=y!==null&&y!=="false",p=(Wo.get(m)||0)+1,w=(o.get(m)||0)+1;Wo.set(m,p),o.set(m,w),a.push(m),p===1&&g&&Gl.set(m,!0),w===1&&m.setAttribute(n,"true"),g||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return f(t),l.clear(),Fd++,function(){a.forEach(function(h){var m=Wo.get(h)-1,y=o.get(h)-1;Wo.set(h,m),o.set(h,y),m||(Gl.has(h)||h.removeAttribute(r),Gl.delete(h)),y||h.removeAttribute(n)}),Fd--,Fd||(Wo=new WeakMap,Wo=new WeakMap,Gl=new WeakMap,Kl={})}},y1=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=AT(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),IT(r,s,n,"aria-hidden")):function(){return null}},tp="Dialog",[w1,b1]=Ln(tp),[$T,yr]=w1(tp),S1=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:a=!0}=e,l=d.useRef(null),c=d.useRef(null),[u=!1,f]=bo({prop:r,defaultProp:s,onChange:o});return i.jsx($T,{scope:t,triggerRef:l,contentRef:c,contentId:Es(),titleId:Es(),descriptionId:Es(),open:u,onOpenChange:f,onOpenToggle:d.useCallback(()=>f(h=>!h),[f]),modal:a,children:n})};S1.displayName=tp;var k1="DialogTrigger",N1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=yr(k1,n),o=qe(t,s.triggerRef);return i.jsx(Me.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":sp(s.open),...r,ref:o,onClick:ye(e.onClick,s.onOpenToggle)})});N1.displayName=k1;var np="DialogPortal",[OT,C1]=w1(np,{forceMount:void 0}),j1=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,o=yr(np,t);return i.jsx(OT,{scope:t,forceMount:n,children:d.Children.map(r,a=>i.jsx(xr,{present:n||o.open,children:i.jsx(Pu,{asChild:!0,container:s,children:a})}))})};j1.displayName=np;var eu="DialogOverlay",E1=d.forwardRef((e,t)=>{const n=C1(eu,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=yr(eu,e.__scopeDialog);return o.modal?i.jsx(xr,{present:r||o.open,children:i.jsx(BT,{...s,ref:t})}):null});E1.displayName=eu;var DT=_i("DialogOverlay.RemoveScroll"),BT=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=yr(eu,n);return i.jsx(ep,{as:DT,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(Me.div,{"data-state":sp(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),No="DialogContent",P1=d.forwardRef((e,t)=>{const n=C1(No,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=yr(No,e.__scopeDialog);return i.jsx(xr,{present:r||o.open,children:o.modal?i.jsx(FT,{...s,ref:t}):i.jsx(zT,{...s,ref:t})})});P1.displayName=No;var FT=d.forwardRef((e,t)=>{const n=yr(No,e.__scopeDialog),r=d.useRef(null),s=qe(t,n.contentRef,r);return d.useEffect(()=>{const o=r.current;if(o)return y1(o)},[]),i.jsx(T1,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ye(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ye(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&o.preventDefault()}),onFocusOutside:ye(e.onFocusOutside,o=>o.preventDefault())})}),zT=d.forwardRef((e,t)=>{const n=yr(No,e.__scopeDialog),r=d.useRef(!1),s=d.useRef(!1);return i.jsx(T1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,o),o.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),T1=d.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=e,l=yr(No,n),c=d.useRef(null),u=qe(t,c);return u1(),i.jsxs(i.Fragment,{children:[i.jsx(Jm,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(ll,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":sp(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(qT,{titleId:l.titleId}),i.jsx(UT,{contentRef:c,descriptionId:l.descriptionId})]})]})}),rp="DialogTitle",R1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=yr(rp,n);return i.jsx(Me.h2,{id:s.titleId,...r,ref:t})});R1.displayName=rp;var _1="DialogDescription",M1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=yr(_1,n);return i.jsx(Me.p,{id:s.descriptionId,...r,ref:t})});M1.displayName=_1;var A1="DialogClose",L1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=yr(A1,n);return i.jsx(Me.button,{type:"button",...r,ref:t,onClick:ye(e.onClick,()=>s.onOpenChange(!1))})});L1.displayName=A1;function sp(e){return e?"open":"closed"}var I1="DialogTitleWarning",[VT,$1]=lj(I1,{contentName:No,titleName:rp,docsSlug:"dialog"}),qT=({titleId:e})=>{const t=$1(I1),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},WT="DialogDescriptionWarning",UT=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${$1(WT).contentName}}.`;return d.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},O1=S1,D1=N1,B1=j1,op=E1,ip=P1,ap=R1,lp=M1,cp=L1;const Li=O1,tu=D1,HT=B1,F1=d.forwardRef(({className:e,...t},n)=>i.jsx(op,{ref:n,className:Ie("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));F1.displayName=op.displayName;const Co=d.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(HT,{children:[i.jsx(F1,{}),i.jsxs(ip,{ref:r,className:Ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,i.jsxs(cp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(So,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Co.displayName=ip.displayName;const jo=({className:e,...t})=>i.jsx("div",{className:Ie("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});jo.displayName="DialogHeader";const Eo=d.forwardRef(({className:e,...t},n)=>i.jsx(ap,{ref:n,className:Ie("text-lg font-semibold leading-none tracking-tight",e),...t}));Eo.displayName=ap.displayName;const z1=d.forwardRef(({className:e,...t},n)=>i.jsx(lp,{ref:n,className:Ie("text-sm text-muted-foreground",e),...t}));z1.displayName=lp.displayName;/*! Capacitor: https://capacitorjs.com/ - MIT License */var Ii;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Ii||(Ii={}));class zd extends Error{constructor(t,n,r){super(t),this.message=t,this.code=n,this.data=r}}const GT=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},KT=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>t!==null?t.name:GT(e),o=()=>s()!=="web",a=h=>{const m=u.get(h);return!!(m!=null&&m.platforms.has(s())||l(h))},l=h=>{var m;return(m=n.PluginHeaders)===null||m===void 0?void 0:m.find(y=>y.name===h)},c=h=>e.console.error(h),u=new Map,f=(h,m={})=>{const y=u.get(h);if(y)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),y.proxy;const g=s(),p=l(h);let w;const x=async()=>(!w&&g in m?w=typeof m[g]=="function"?w=await m[g]():w=m[g]:t!==null&&!w&&"web"in m&&(w=typeof m.web=="function"?w=await m.web():w=m.web),w),v=(j,R)=>{var P,D;if(p){const I=p==null?void 0:p.methods.find(F=>R===F.name);if(I)return I.rtype==="promise"?F=>n.nativePromise(h,R.toString(),F):(F,L)=>n.nativeCallback(h,R.toString(),F,L);if(j)return(P=j[R])===null||P===void 0?void 0:P.bind(j)}else{if(j)return(D=j[R])===null||D===void 0?void 0:D.bind(j);throw new zd(`"${h}" plugin is not implemented on ${g}`,Ii.Unimplemented)}},b=j=>{let R;const P=(...D)=>{const I=x().then(F=>{const L=v(F,j);if(L){const B=L(...D);return R=B==null?void 0:B.remove,B}else throw new zd(`"${h}.${j}()" is not implemented on ${g}`,Ii.Unimplemented)});return j==="addListener"&&(I.remove=async()=>R()),I};return P.toString=()=>`${j.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:j,writable:!1,configurable:!1}),P},k=b("addListener"),S=b("removeListener"),C=(j,R)=>{const P=k({eventName:j},R),D=async()=>{const F=await P;S({eventName:j,callbackId:F},R)},I=new Promise(F=>P.then(()=>F({remove:D})));return I.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await D()},I},N=new Proxy({},{get(j,R){switch(R){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return p?C:k;case"removeListener":return S;default:return b(R)}}});return r[h]=N,u.set(h,{name:h,proxy:N,platforms:new Set([...Object.keys(m),...p?[g]:[]])}),N};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=s,n.handleError=c,n.isNativePlatform=o,n.isPluginAvailable=a,n.registerPlugin=f,n.Exception=zd,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},QT=e=>e.Capacitor=KT(e),mn=QT(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Ws=mn.registerPlugin;class up{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(n);const o=this.windowListeners[t];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(t);const a=async()=>this.removeListener(t,n);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,r){const s=this.listeners[t];if(!s){if(r){let o=this.retainedEventArguments[t];o||(o=[]),o.push(n),this.retainedEventArguments[t]=o}return}s.forEach(o=>o(n))}hasListeners(t){var n;return!!(!((n=this.listeners[t])===null||n===void 0)&&n.length)}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(t="not implemented"){return new mn.Exception(t,Ii.Unimplemented)}unavailable(t="not available"){return new mn.Exception(t,Ii.Unavailable)}async removeListener(t,n){const r=this.listeners[t];if(!r)return;const s=r.indexOf(n);this.listeners[t].splice(s,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(r=>{this.notifyListeners(t,r)}))}}const Nv=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Cv=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class YT extends up{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[s,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=Cv(s).trim(),o=Cv(o).trim(),n[s]=o}),n}async setCookie(t){try{const n=Nv(t.key),r=Nv(t.value),s=`; expires=${(t.expires||"").replace("expires=","")}`,o=(t.path||"/").replace("path=",""),a=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${o}; ${a};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}Ws("CapacitorCookies",{web:()=>new YT});const XT=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;t(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(e)}),ZT=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(s=>s.toLocaleLowerCase()).reduce((s,o,a)=>(s[o]=e[t[a]],s),{})},JT=(e,t=!0)=>e?Object.entries(e).reduce((r,s)=>{const[o,a]=s;let l,c;return Array.isArray(a)?(c="",a.forEach(u=>{l=t?encodeURIComponent(u):u,c+=`${o}=${l}&`}),c.slice(0,-1)):(l=t?encodeURIComponent(a):a,c=`${o}=${l}`),`${r}&${c}`},"").substr(1):null,eR=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),s=ZT(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(s.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[a,l]of Object.entries(e.data||{}))o.set(a,l);n.body=o.toString()}else if(s.includes("multipart/form-data")||e.data instanceof FormData){const o=new FormData;if(e.data instanceof FormData)e.data.forEach((l,c)=>{o.append(c,l)});else for(const l of Object.keys(e.data))o.append(l,e.data[l]);n.body=o;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(s.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class tR extends up{async request(t){const n=eR(t,t.webFetchExtra),r=JT(t.params,t.shouldEncodeUrlParams),s=r?`${t.url}?${r}`:t.url,o=await fetch(s,n),a=o.headers.get("content-type")||"";let{responseType:l="text"}=o.ok?t:{};a.includes("application/json")&&(l="json");let c,u;switch(l){case"arraybuffer":case"blob":u=await o.blob(),c=await XT(u);break;case"json":c=await o.json();break;case"document":case"text":default:c=await o.text()}const f={};return o.headers.forEach((h,m)=>{f[m]=h}),{data:c,headers:f,status:o.status,url:o.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}Ws("CapacitorHttp",{web:()=>new tR});var jv;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(jv||(jv={}));var Ev;(function(e){e.StatusBar="StatusBar",e.NavigationBar="NavigationBar"})(Ev||(Ev={}));class nR extends up{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}Ws("SystemBars",{web:()=>new nR});const rR="modulepreload",sR=function(e){return"/"+e},Pv={},Hi=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=sR(c),c in Pv)return;Pv[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":rR,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,y)=>{h.addEventListener("load",m),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},Tv=Ws("SpeechSynthesis",{web:()=>Hi(()=>import("./web-CQFz7-0N.js"),[]).then(e=>new e.SpeechSynthesisWeb)}),ch={permissionStatus:"unknown",modelReady:!1,sessionActive:!1,micListening:!1,lastResult:"",lastError:"",timestamp:Date.now()},uh=new Set;function oR(e){return uh.add(e),e({...ch}),()=>uh.delete(e)}function Gi(e){Object.assign(ch,e,{timestamp:Date.now()}),uh.forEach(t=>t({...ch}))}function Rv(e){Gi({permissionStatus:e})}function iR(e){Gi({modelReady:e})}function V1(e){Gi({sessionActive:e})}function q1(e){Gi({micListening:e})}function W1(e){Gi({lastResult:e})}function nu(e){Gi({lastError:e})}const ie=Ws("BlindfoldNative");let dh=null,fh=null;const aR=new Promise((e,t)=>{dh=e,fh=t});let U1=!1,H1=!1;function Ql(e){H1=e,U1=!0,e&&dh?dh():!e&&fh&&fh(new Error("Mic permission denied"))}async function Fu(){if(U1)return H1;try{return await aR,!0}catch{return!1}}let Vd=null;async function G1(){if(mn.isNativePlatform())try{Vd||(Vd=await Hi(()=>Promise.resolve().then(()=>gk),void 0));const{Haptics:e,ImpactStyle:t}=Vd;await e.impact({style:t.Light})}catch{}}class lR{constructor(){this.sessions=new Map,this.isSpeaking=!1,this.micState="LISTENING",this.pendingRestarts=[],this.settlingTimeout=null,this.resumeDelayMs=350}register(t){this.sessions.set(t.id,t),console.log(`[VoiceController] Registered session: ${t.id}`)}unregister(t){this.sessions.delete(t),console.log(`[VoiceController] Unregistered session: ${t}`)}clearPendingForSession(t){const n=this.pendingRestarts.length;this.pendingRestarts=this.pendingRestarts.filter(r=>r!==t),n!==this.pendingRestarts.length&&console.log(`[VoiceController] Cleared pending restart for: ${t}`)}setActive(t,n){const r=this.sessions.get(t);r&&(r.shouldBeActive=n)}onTTSStart(){this.settlingTimeout&&(clearTimeout(this.settlingTimeout),this.settlingTimeout=null),this.isSpeaking=!0,this.micState="SPEAKING",console.log("[VoiceController] TTS starting, state -> SPEAKING, pausing all voice sessions"),Array.from(this.sessions.values()).forEach(t=>{t.shouldBeActive&&t.pause()})}onTTSEnd(){this.isSpeaking=!1,this.micState="SETTLING";const t=this.sessions.size,n=Array.from(this.sessions.keys()).join(", ");console.log(`[VoiceController] TTS ended, state -> SETTLING, waiting ${this.resumeDelayMs}ms, sessions: [${n}] (${t})`),this.settlingTimeout=setTimeout(()=>{if(this.isSpeaking)console.log("[VoiceController] Skipping resume - TTS started again during settling");else{this.micState="LISTENING",console.log("[VoiceController] Settling complete, state -> LISTENING"),Array.from(this.sessions.entries()).forEach(([a,l])=>{console.log(`[VoiceController] Session '${a}' shouldBeActive=${l.shouldBeActive}`)});const r=new Set,s=this.pendingRestarts.length>0;s&&(console.log(`[VoiceController] Processing ${this.pendingRestarts.length} pending restarts: ${this.pendingRestarts.join(", ")}`),this.playMicLiveClick(),this.pendingRestarts.forEach(a=>{const l=this.sessions.get(a);l&&l.shouldBeActive?(console.log(`[VoiceController] Executing pending restart for: ${a}`),l.resume(),r.add(a)):console.log(`[VoiceController] Skipping pending restart for '${a}' - session=${!!l}, shouldBeActive=${l==null?void 0:l.shouldBeActive}`)}),this.pendingRestarts=[]);const o=Array.from(this.sessions.values()).filter(a=>a.shouldBeActive&&!r.has(a.id));console.log(`[VoiceController] Sessions to resume: ${o.length}`),o.length>0?(s||this.playMicLiveClick(),o.forEach(a=>{console.log(`[VoiceController] Resuming session: ${a.id}`),a.resume()})):console.log("[VoiceController] No sessions to resume")}},this.resumeDelayMs)}queueRestart(t){if(this.micState==="LISTENING"){const n=this.sessions.get(t);n&&n.shouldBeActive&&(console.log(`[VoiceController] Instant restart for session: ${t}`),this.playMicLiveClick(),n.resume())}else this.pendingRestarts.includes(t)||(this.pendingRestarts.push(t),console.log(`[VoiceController] Queued restart for session: ${t} (state: ${this.micState})`))}getMicState(){return this.micState}canStartMic(){return this.micState==="LISTENING"}async playMicLiveClick(){try{if(mn.isNativePlatform()){const{Haptics:t,ImpactStyle:n}=await Hi(async()=>{const{Haptics:r,ImpactStyle:s}=await Promise.resolve().then(()=>gk);return{Haptics:r,ImpactStyle:s}},void 0);await t.impact({style:n.Light})}console.log("[VoiceController] Mic live click")}catch{}}getIsSpeaking(){return this.isSpeaking}}const Fr=new lR,La=class La{constructor(){this.protectedSessionId=null,this.disposableSessionId=null,this.isPurging=!1}register(t){La.PROTECTED_SESSIONS.includes(t)?(this.protectedSessionId==="game"&&t==="reconstruction"&&console.log("[VoiceRegistry] HANDOVER: game  reconstruction (mic stays warm)"),this.protectedSessionId=t,console.log(`[VoiceRegistry] Protected lane: ${t}`)):(this.disposableSessionId=t,console.log(`[VoiceRegistry] Disposable lane: ${t}`))}unregister(t){const n=La.PROTECTED_SESSIONS.includes(t);n&&this.protectedSessionId===t?(this.protectedSessionId=null,console.log(`[VoiceRegistry] Unregistered protected: ${t}`)):!n&&this.disposableSessionId===t&&(this.disposableSessionId=null,console.log(`[VoiceRegistry] Unregistered disposable: ${t}`))}async purge(){if(this.isPurging){console.log("[VoiceRegistry] Already purging, skipping");return}this.isPurging=!0;const t=!!this.protectedSessionId;console.log(`[VoiceRegistry] PURGE: Killing disposable lane${t?" (game protected)":""}`);try{Fv.stop()}catch(n){console.log("[VoiceRegistry] trainingVoice.stop error:",n)}try{it.stop()}catch(n){console.log("[VoiceRegistry] voiceMaster.stop error:",n)}if(!t)try{Wt.stop()}catch(n){console.log("[VoiceRegistry] voiceRecognition.stop error:",n)}if(Pn&&!t)try{await ie.stopSession(),console.log("[VoiceRegistry] Stopped native session")}catch(n){console.log("[VoiceRegistry] stopSession error:",n)}try{it.resetMicBusy()}catch(n){console.log("[VoiceRegistry] resetMicBusy error:",n)}try{Wt.resetStartedFlag()}catch(n){console.log("[VoiceRegistry] resetStartedFlag error:",n)}this.disposableSessionId=null,await new Promise(n=>setTimeout(n,500)),this.isPurging=!1,console.log("[VoiceRegistry] PURGE complete - disposable lane cleared, flags reset")}async purgeAll(){if(this.isPurging){console.log("[VoiceRegistry] Already purging, skipping");return}this.isPurging=!0,console.log("[VoiceRegistry] NUCLEAR PURGE: Killing ALL sessions");try{Wt.stop()}catch{}try{Fv.stop()}catch{}try{it.stop()}catch{}if(Pn)try{await ie.stopSession()}catch{}try{it.resetMicBusy()}catch{}try{Wt.resetStartedFlag()}catch{}this.protectedSessionId=null,this.disposableSessionId=null,await new Promise(t=>setTimeout(t,500)),this.isPurging=!1,console.log("[VoiceRegistry] NUCLEAR PURGE complete")}clearProtectedLane(){this.protectedSessionId&&(console.log(`[VoiceRegistry] Clearing protected lane: ${this.protectedSessionId}`),this.protectedSessionId=null)}getProtectedSession(){return this.protectedSessionId}getDisposableSession(){return this.disposableSessionId}getActiveSession(){return this.protectedSessionId||this.disposableSessionId}};La.PROTECTED_SESSIONS=["game","reconstruction"];let hh=La;const $i=new hh,_v={K:"King",Q:"Queen",R:"Rook",B:"Bishop",N:"Knight",P:"Pawn",k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"},xs={king:"K",queen:"Q",rook:"R",bishop:"B",bish:"B",bishup:"B",bishep:"B",bashop:"B",knight:"N",night:"N",nite:"N",kite:"N",horse:"N",pawn:"",castle:"R"},cR=["um","uh","the","a","an","like","so","well","just","actually","basically"];function uR(e){return e.toLowerCase().split(/\s+/).filter(r=>!cR.includes(r)).join(" ")}const yi={a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",alpha:"a",alfa:"a",bravo:"b",charlie:"c",delta:"d",echo:"e",foxtrot:"f",golf:"g",hotel:"h",able:"a",apple:"a",ay:"a",aye:"a",eh:"a",boy:"b",baker:"b",bee:"b",be:"b",cat:"c",see:"c",sea:"c",cee:"c",dog:"d",dee:"d",david:"d",easy:"e",edward:"e",eee:"e",ee:"e",fox:"f",frank:"f",eff:"f",ef:"f",if:"f",of:"f",george:"g",gee:"g",jee:"g",henry:"h",aitch:"h",ach:"h"},ru={1:"1",one:"1",won:"1",first:"1",2:"2",two:"2",to:"2",too:"2",second:"2",3:"3",three:"3",free:"3",third:"3",4:"4",four:"4",for:"4",forth:"4",fourth:"4",5:"5",five:"5",fifth:"5",6:"6",six:"6",sixth:"6",sicks:"6",7:"7",seven:"7",seventh:"7",8:"8",eight:"8",ate:"8",eighth:"8"};function Uo(e,t=!1,n=!1,r=!1){if(!e)return"";if(e==="O-O"||e==="0-0")return r?"Castles kingside, checkmate!":n?"Castles kingside, check":"Castles kingside";if(e==="O-O-O"||e==="0-0-0")return r?"Castles queenside, checkmate!":n?"Castles queenside, check":"Castles queenside";let s="",o=e.replace(/[+#=].*$/,"");const a=o.match(/^([KQRBN])/);a?(s=_v[a[1]]+" ",o=o.substring(1)):s="";const l=o.includes("x");o=o.replace("x","");const c=o.match(/([a-h])([1-8])/g);if(c&&c.length>0){const u=c[c.length-1],f=u[0],h=u[1];if(l||t){if(c.length>1||!a){const m=o[0];m&&m.match(/[a-h]/)&&(s+=m+" ")}s+="takes "+f+h}else s+=f+h}if(e.includes("=")){const u=e.match(/=([QRBN])/);u&&(s+=", promotes to "+_v[u[1]])}return r||e.includes("#")?s+=", checkmate!":(n||e.includes("+"))&&(s+=", check"),s.trim()}let as=[],ha=!1,to=null,qd=!1;const Pn=mn.isNativePlatform();async function dp(){if(!Pn){try{if(navigator.permissions){const e=await navigator.permissions.query({name:"microphone"});return e.state==="granted"?"granted":e.state==="denied"?"denied":"prompt"}}catch{}return"prompt"}try{return(await ie.checkPermissions()).mic}catch(e){return console.error("[Voice] Error checking permissions:",e),"unknown"}}async function K1(){if(!Pn)try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(t=>t.stop()),!0}catch{return console.warn("[Voice] Web microphone permission denied"),!1}try{const e=await ie.checkPermissions();return e.mic==="granted"?!0:e.mic==="denied"||e.mic==="prompt"?(await ie.requestPermissions()).mic==="granted":!1}catch(e){return console.error("[Voice] Permission handling error:",e),!1}}async function dR(){const e=await K1(),t=await dp();return{granted:e,status:t}}function fR(){return Pn?Promise.resolve([]):ha&&as.length>0?Promise.resolve(as):to||(to=new Promise(e=>{const t=window.speechSynthesis.getVoices();if(t.length>0){as=t,ha=!0,to=null,e(t);return}const n=()=>{as=window.speechSynthesis.getVoices(),ha=!0,to=null,window.speechSynthesis.removeEventListener("voiceschanged",n),e(as)};window.speechSynthesis.addEventListener("voiceschanged",n),setTimeout(()=>{ha||(as=window.speechSynthesis.getVoices(),ha=as.length>0,to=null,window.speechSynthesis.removeEventListener("voiceschanged",n),e(as))},1e3)}),to)}let mh=null;function hR(){mh&&mh.abort()}const mR={a:"Ay",b:"Bee",c:"See",d:"Dee",e:"e",f:"f",g:"Gee",h:"h"},pR={N:"Knight",B:"Bishop",R:"Rook",Q:"Queen",K:"King"},gR=new Set(["correct","wrong","next","say","the","move","look","okay","continue","seconds","remaining","are","you","sure","want","resign","yes","no","can","play","legal","moves","for","material","is","equal","white","black","up","point","points","at","highlighted","squares","on","board"]);function vR(e){const t=e.toLowerCase().replace(/[^a-z\s]/g,"").split(/\s+/).filter(o=>o.length>0);if(t.length>0&&t.every(o=>gR.has(o))||!/[a-h]\s*[1-8]|[NBRQK][a-h]|O-O/.test(e))return e;let s=e.replace(/O-O-O/gi,"queenside castle").replace(/O-O/gi,"kingside castle").replace(/x/g," takes ").replace(/\+/g," check").replace(/#/g," checkmate");for(const[o,a]of Object.entries(pR))s=s.replace(new RegExp(`\\b${o}([a-h])([1-8])`,"g"),`${a} $1$2`),s=s.replace(new RegExp(`\\b${o}\\s*takes\\s*([a-h])([1-8])`,"gi"),`${a} takes $1$2`),s=s.replace(new RegExp(`\\b${o}([a-h1-8])([a-h])([1-8])`,"g"),`${a} $1$2$3`);for(const[o,a]of Object.entries(mR))s=s.replace(new RegExp(`\\b${o}\\s*([1-8])`,"gi"),`${a} $1`);return s=s.replace(/\ba\s+([1-8])\b/gi,"Ay $1"),s=s.replace(/\s+/g," ").trim(),s}async function jt(e,t=.9){Fr.onTTSStart(),qd=!0,hR(),console.log("[Voice] Mic muted: Bot is speaking");const n=vR(e);try{if(Pn)await new Promise(async r=>{let s=!1;const o=Math.max(2500,n.length*150),a=setTimeout(()=>{s||(console.warn("[Voice] TTS Event timeout - forcing resume after",o,"ms"),s=!0,l&&l.remove().catch(()=>{}),r())},o);let l=null;try{l=await Tv.addListener("end",()=>{s||(console.log("[Voice] TTS End detected via event - mic resume now safe"),clearTimeout(a),s=!0,l&&l.remove().catch(()=>{}),r())})}catch(c){console.warn("[Voice] Failed to setup TTS listener:",c)}try{await Tv.speak({text:n,language:"en-US",rate:t,pitch:1,volume:1})}catch(c){console.error("[Voice] Speak error:",c),clearTimeout(a),l&&l.remove().catch(()=>{}),s=!0,r()}l||(console.log("[Voice] No listener available, using fallback timing"),await new Promise(c=>setTimeout(c,Math.max(1e3,n.length*100))),s||(clearTimeout(a),s=!0,r()))});else{if(console.log("[Voice] speechSynthesis in window:","speechSynthesis"in window),console.log("[Voice] window.speechSynthesis:",typeof window.speechSynthesis),!("speechSynthesis"in window)||!window.speechSynthesis){console.warn("Speech synthesis not supported");return}try{window.speechSynthesis.cancel()}catch(s){console.warn("[Voice] Failed to cancel previous speech:",s)}await new Promise(s=>setTimeout(s,50));const r=await fR();console.log("[Voice] Loaded voices:",r.length),await new Promise(s=>{const o=new SpeechSynthesisUtterance(n);o.rate=t,o.pitch=1,o.volume=1;const a=r.find(l=>l.lang.startsWith("en-"));a?(o.voice=a,o.lang=a.lang):o.lang="en-US",o.onend=()=>{console.log("[Voice] Speech ended successfully"),s()},o.onerror=l=>{console.error("[Voice] Speech error:",l),s()},console.log("[Voice] Speaking:",n),window.speechSynthesis.speak(o)})}}finally{qd=!1,Fr.onTTSEnd(),setTimeout(()=>{qd||console.log("[Voice] Mic active: Listening for your move")},100)}}function Q1(e){let t=e;return t=t.replace(/\bbefore\b/gi,"b 4"),t=t.replace(/\bsci\s*fi\b/gi,"c 5"),t=t.replace(/\bscifi\b/gi,"c 5"),t=t.replace(/\bquincy\b/gi,"queen c"),t=t.replace(/\brookie\b/gi,"rook e"),t=t.replace(/\brookies\b/gi,"rook e"),t=t.replace(/\brook\s+he\b/gi,"rook e"),t=t.replace(/\brock\s+([a-h])\b/gi,"rook $1"),t=t.replace(/\bhe\s+([1-8])\b/g,"e $1"),t=t.replace(/\bhe\s+(one|two|three|four|five|six|seven|eight|won|too|free|fore|for|fifth|sixth|seventh|eighth)\b/gi,"e $1"),t=t.replace(/\bthe\s+([1-8])\b/g,"d $1"),t=t.replace(/\bthe\s+(one|two|three|four|five|six|seven|eight)\b/gi,"d $1"),t=t.replace(/\b([a-h])\s+for\b/gi,"$1 4"),t}function Mv(e,t){const n=Q1(e.toLowerCase().trim()),r=uR(n),s=r.replace(/\s+/g,"").match(/^([a-h])([1-8])$/);if(s){const p=s[1]+s[2],w=t.find(x=>!/^[KQRBN]/i.test(x)&&x.includes(p));if(w)return w}if(r.includes("castle")||r.includes("castles"))if(r.includes("queen")||r.includes("long")){if(t.includes("O-O-O"))return"O-O-O"}else if(r.includes("king")||r.includes("short")){if(t.includes("O-O"))return"O-O"}else{if(t.includes("O-O"))return"O-O";if(t.includes("O-O-O"))return"O-O-O"}let o="",a="",l="",c="",u="",f=!1,h="";const m=r.split(/\s+/);for(const p of m){const w=p.toLowerCase();xs[w]!==void 0&&(o=xs[w]),(w==="takes"||w==="captures"||w==="x")&&(f=!0),!(w==="promotes"||w==="promotion")&&(yi[w]&&(a?c||(c=a,a=yi[w]):a=yi[w]),ru[w]&&(l&&!u&&(u=l),l=ru[w]),["queen","rook","bishop","knight"].includes(w)&&(r.includes("promote")||r.includes("equals"))&&(h=xs[w]||"Q"))}for(const p of m){const w=p.match(/^([a-h])([1-8])$/i);w&&(a&&!c&&(c=a),l&&!u&&(u=l),a=w[1].toLowerCase(),l=w[2])}if(!h&&(l==="1"||l==="8")){const p=m[m.length-1].toLowerCase();["queen","rook","bishop","knight"].includes(p)&&(h=xs[p]||"Q")}if(!a||!l)return null;const y=a+l,g=t.filter(p=>{const w=p.replace(/[+#]/g,"");if(!w.includes(y))return!1;if(o){if(!w.startsWith(o))return!1}else if(w.match(/^[KQRBN]/))return!1;if(c){const x=w.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(x&&x[1]&&x[1]!==c)return!1}if(u){const x=w.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(x&&x[2]&&x[2]!==u)return!1}return!0});if(g.length===1){let p=g[0];return h&&p.includes("=")&&(p=p.replace(/=[QRBN]/,"="+h)),p}if(g.length>1){const p=g.filter(x=>x.includes("x")),w=g.filter(x=>!x.includes("x"));return f&&p.length===1?p[0]:!f&&w.length===1?w[0]:g[0]}return null}function Av(e,t){const n=Q1(e.toLowerCase().trim());if(n.includes("castle")||n.includes("castles"))if(n.includes("queen")||n.includes("long")){if(t.includes("O-O-O"))return{move:"O-O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""}}else if(n.includes("king")||n.includes("short")){if(t.includes("O-O"))return{move:"O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""}}else{if(t.includes("O-O"))return{move:"O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""};if(t.includes("O-O-O"))return{move:"O-O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""}}let r="",s="",o="",a="",l="",c=!1,u="";const f=n.split(/\s+/);for(const y of f){const g=y.toLowerCase();xs[g]!==void 0&&(r=xs[g]),(g==="takes"||g==="captures"||g==="x")&&(c=!0),!(g==="promotes"||g==="promotion")&&(yi[g]&&(s?a||(a=s,s=yi[g]):s=yi[g]),ru[g]&&(o&&!l&&(l=o),o=ru[g]),["queen","rook","bishop","knight"].includes(g)&&(n.includes("promote")||n.includes("equals"))&&(u=xs[g]||"Q"))}for(const y of f){const g=y.match(/^([a-h])([1-8])$/i);g&&(s&&!a&&(a=s),o&&!l&&(l=o),s=g[1].toLowerCase(),o=g[2])}if(!u&&(o==="1"||o==="8")){const y=f[f.length-1].toLowerCase();["queen","rook","bishop","knight"].includes(y)&&(u=xs[y]||"Q")}if(!s||!o)return{move:null,isAmbiguous:!1,candidates:[],piece:"",targetSquare:""};const h=s+o,m=t.filter(y=>{const g=y.replace(/[+#]/g,"");if(!g.includes(h))return!1;if(r){if(!g.startsWith(r))return!1}else if(g.match(/^[KQRBN]/))return!1;if(a){const p=g.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(p&&p[1]&&p[1]!==a)return!1}if(l){const p=g.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(p&&p[2]&&p[2]!==l)return!1}return!0});if(m.length===1){let y=m[0];return u&&y.includes("=")&&(y=y.replace(/=[QRBN]/,"="+u)),{move:y,isAmbiguous:!1,candidates:[],piece:r,targetSquare:h}}if(m.length>1){const y=m.filter(p=>p.includes("x")),g=m.filter(p=>!p.includes("x"));return c&&y.length===1?{move:y[0],isAmbiguous:!1,candidates:[],piece:r,targetSquare:h}:!c&&g.length===1?{move:g[0],isAmbiguous:!1,candidates:[],piece:r,targetSquare:h}:{move:null,isAmbiguous:!0,candidates:m,piece:r,targetSquare:h}}return{move:null,isAmbiguous:!1,candidates:[],piece:r,targetSquare:h}}const Wd={one:"1",won:"1",want:"1",two:"2",too:"2",to:"2",three:"3",tree:"3",free:"3",four:"4",for:"4",fore:"4",five:"5",fife:"5",six:"6",sick:"6",sicks:"6",seven:"7",eight:"8",ate:"8",ait:"8",a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",alpha:"a",alfa:"a",bravo:"b",charlie:"c",delta:"d",echo:"e",foxtrot:"f",golf:"g",hotel:"h",ay:"a",aye:"a",apple:"a",bee:"b",be:"b",boy:"b",see:"c",sea:"c",cee:"c",dee:"d",the:"d",tea:"d",dog:"d",ee:"e",easy:"e",eff:"f",if:"f",of:"f",off:"f",fox:"f",gee:"g",jee:"g",aitch:"h",ach:"h"};function Lv(e){const t=e.toLowerCase().trim(),n=t.split(/\s+/);let r=null,s=null;for(const o of n){const a=Wd[o];a?/^[a-h]$/.test(a)?r||(r=a):/^[1-8]$/.test(a)&&(s||(s=a)):o.length===1&&(/^[a-h]$/i.test(o)?r||(r=o.toLowerCase()):/^[1-8]$/.test(o)&&(s||(s=o)))}if(Wd[t]){const o=Wd[t];/^[a-h]$/.test(o)?r=o:/^[1-8]$/.test(o)&&(s=o)}return t.length===1&&(/^[a-h]$/i.test(t)?r=t.toLowerCase():/^[1-8]$/.test(t)&&(s=t)),{file:r,rank:s}}function Iv(e,t){for(const n of e){const s=n.replace(/[+#]/g,"").match(/^[KQRBN]([a-h])?([1-8])?x?[a-h][1-8]/);if(s){const o=s[1]||null,a=s[2]||null;if(t.file&&t.rank){if(o===t.file&&a===t.rank)return n}else if(t.file){if(o===t.file)return n}else if(t.rank&&a===t.rank)return n}}return null}function $v(e){const t=[];for(const n of e){const s=n.replace(/[+#]/g,"").match(/^[KQRBN]([a-h])?([1-8])?x?[a-h][1-8]/);if(s){const o=s[1]||"",a=s[2]||"";(o||a)&&t.push(o+a)}}return t}function Ov(e){const t=[];for(const n of e){const s=n.replace(/[+#=QRBN]/g,"").match(/^([a-h])x[a-h][1-8]$/);s&&t.push(s[1])}return t}function Dv(e,t){for(const n of e)if(n.replace(/[+#]/g,"").startsWith(t+"x"))return n;return null}function Bv(e){return e.length<2?!1:e.every(t=>{const n=t.replace(/[+#=QRBN]/g,"");return/^[a-h]x[a-h][1-8]$/.test(n)})}class xR{constructor(){this.onResult=null,this.onListeningChange=null,this.legalMoves=[],this.isStarted=!1,this.isMuted=!1,this.unmuteTimeout=null}async pauseLoop(){console.log("[VoiceRecognition] pauseLoop"),await it.pauseLoop(),this.isMuted=!0}resumeLoop(){console.log("[VoiceRecognition] resumeLoop"),this.isMuted=!1,it.resumeLoop()}setMute(t,n=400){this.unmuteTimeout&&(clearTimeout(this.unmuteTimeout),this.unmuteTimeout=null),t?(this.isMuted=!0,console.log("[VoiceRecognition] Software MUTE: transcripts will be ignored")):this.unmuteTimeout=setTimeout(()=>{this.isMuted=!1,this.unmuteTimeout=null,console.log("[VoiceRecognition] Software UNMUTE: mic LIVE")},n)}getMuted(){return this.isMuted}setLegalMoves(t){this.legalMoves=t,this.isStarted&&it.setLegalMoves(t)}setOnResult(t){this.onResult=t}setOnListeningChange(t){this.onListeningChange=t}async start(){if(this.isStarted){console.log("[VoiceRecognition] Already started, skipping duplicate start");return}await this.startInternal()}async startInternal(){try{const t=await it.start({mode:"move",legalMoves:this.legalMoves,onTranscript:(n,r)=>{if(this.isMuted){console.log("[VoiceRecognition] Ignored while muted:",n);return}this.onResult&&this.onResult(r||null,n)},onListeningChange:n=>{this.onListeningChange&&this.onListeningChange(n)}});this.isStarted=t,console.log("[VoiceRecognition] startInternal result:",t)}catch(t){console.log("[VoiceRecognition] startInternal failed:",t),this.isStarted=!1}}async forceRestart(){console.log("[VoiceRecognition] Force restart - bypassing guard"),await this.startInternal()}stop(){this.isStarted&&(this.isStarted=!1,it.stop())}async stopAndWait(){this.isStarted&&(this.isStarted=!1,await it.stopAndWait())}resetStartedFlag(){this.isStarted=!1}abort(){this.stop()}async reset(){await this.stopAndWait(),this.onResult=null,this.onListeningChange=null,this.legalMoves=[]}isSupported(){return!0}getIsListening(){return it.getIsListening()&&it.getMode()==="move"}async waitForInitialization(){await it.checkAvailability()}}const Wt=new xR;mh=Wt;const li=class li{constructor(){this.isListening=!1,this.shouldBeListening=!1,this.config=null,this.listenerHandle=null,this.stateListenerHandle=null,this.webRecognition=null,this.restartTimeout=null,this.availabilityChecked=!1,this.isAvailable=!1,this.lastErrorTime=0,this.consecutiveFailures=0,this.micBusy=!1,this.onMicBusyChange=null,this.onRetryNeeded=null,this.sessionId="master",this.isRegistered=!1,this.isPaused=!1,this.captureDebounceTimeout=null,this.pendingCaptureTranscript="",this.shouldRestart=!0,this.restartPromise=null,this.isStarting=!1,this.expectedStops=0,this.isMuted=!1,this.muteTimeout=null}async checkAvailability(){if(this.availabilityChecked)return this.isAvailable;if(Pn)try{return await Fu()?(this.isAvailable=!0,this.availabilityChecked=!0,!0):(console.log("[VoiceMaster] Voice service not ready (permission denied or init failed)"),this.isAvailable=!1,this.availabilityChecked=!0,!1)}catch(t){return console.error("[VoiceMaster] Error checking availability:",t),this.isAvailable=!1,this.availabilityChecked=!0,!1}else{const t=typeof window<"u"?window.SpeechRecognition||window.webkitSpeechRecognition:null;return this.isAvailable=!!t,this.availabilityChecked=!0,this.isAvailable}}setOnMicBusyChange(t){this.onMicBusyChange=t}setOnRetryNeeded(t){this.onRetryNeeded=t}isMicBusy(){return this.micBusy}resetMicBusy(){this.micBusy=!1,this.consecutiveFailures=0,this.lastErrorTime=0,this.onMicBusyChange&&this.onMicBusyChange(!1)}mute(t=400){this.isMuted=!0,this.muteTimeout&&clearTimeout(this.muteTimeout),this.muteTimeout=setTimeout(()=>{this.isMuted=!1,this.muteTimeout=null,console.log("[VoiceMaster] Mute window ended, listening again")},t),console.log(`[VoiceMaster] Mute window started: ${t}ms`)}setMute(t,n=400){this.muteTimeout&&(clearTimeout(this.muteTimeout),this.muteTimeout=null),t?(this.isMuted=!0,console.log("[VoiceMaster] Software MUTE: transcripts will be ignored")):this.muteTimeout=setTimeout(()=>{this.isMuted=!1,this.muteTimeout=null,console.log("[VoiceMaster] Software UNMUTE: mic LIVE")},n)}getIsMuted(){return this.isMuted}triggerRestart(){if(this.restartPromise){console.log("[VoiceMaster] Restart already in progress, skipping duplicate.");return}this.restartPromise=(async()=>{try{if(console.log("[VoiceMaster] Serialized restart sequence initiating..."),this.expectedStops++,console.log("[VoiceMaster] triggerRestart: expectedStops incremented to",this.expectedStops),console.log("[VoiceMaster] triggerRestart: preparing to restart listening"),this.expectedStops=0,await new Promise(t=>setTimeout(t,100)),this.shouldRestart&&!this.micBusy){console.log("[VoiceMaster] triggerRestart: restarting mic capture");try{await ie.startListening()}catch(t){console.warn("[VoiceMaster] triggerRestart startListening failed, scheduling retry:",t),setTimeout(()=>{this.shouldRestart&&!this.micBusy&&!this.restartPromise&&this.triggerRestart()},200)}}else console.log("[VoiceMaster] triggerRestart: shouldRestart=false or micBusy, skipping")}catch(t){console.warn("[VoiceMaster] Restart sequence failed:",t),setTimeout(()=>{this.shouldRestart&&!this.micBusy&&!this.restartPromise&&this.triggerRestart()},200)}finally{this.restartPromise=null}})()}async pauseLoop(){console.log("[VoiceMaster] Pausing Loop for TTS"),this.shouldRestart=!1,Pn&&console.log("[VoiceMaster] pauseLoop: mic paused (flag set, results ignored)")}resumeLoop(){if(console.log("[VoiceMaster] Resuming Loop after TTS"),this.shouldRestart=!0,!this.config){console.log("[VoiceMaster] resumeLoop: no config, skipping");return}this.triggerRestart()}getShouldRestartLoop(){return this.shouldRestart}async start(t){return this.micBusy=!1,this.isListening=!1,this.consecutiveFailures=0,this.isPaused=!1,this.shouldRestart=!0,this.isMuted=!1,console.log("[VoiceMaster] Atomic reset: state cleared for fresh start, loop enabled"),(this.listenerHandle||this.webRecognition||this.shouldBeListening)&&(console.log("[VoiceMaster] Clean handoff: stopping previous session"),await this.stop(),await new Promise(r=>setTimeout(r,100))),this.config=t,await this.checkAvailability()?(this.isRegistered||(Fr.register({id:this.sessionId,pause:()=>this.pauseInternal(),resume:()=>this.resumeInternal(),shouldBeActive:!0}),this.isRegistered=!0),Fr.setActive(this.sessionId,!0),$i.register(this.sessionId),this.shouldBeListening=!0,console.log(`[VoiceMaster] Starting in '${t.mode}' mode`),Fr.canStartMic()?Pn?this.startNative():this.startWeb():(console.log("[VoiceMaster] TTS active or settling, queueing start for after TTS"),Fr.queueRestart(this.sessionId),t.onListeningChange&&t.onListeningChange(!0),!0)):(console.log("[VoiceMaster] Not available, cannot start"),!1)}setLegalMoves(t){this.config&&(this.config.legalMoves=t)}processTranscript(t){if(!this.config||!this.shouldBeListening)return;if(this.isMuted){console.log("[VoiceMaster] Ignoring transcript during mute window:",t);return}const n=this.config.mode;switch(console.log(`[VoiceMaster] Processing in '${n}' mode:`,t),n){case"raw":this.config.onTranscript(t);break;case"move":this.processMoveMode(t);break;case"placement":this.processPlacementMode(t);break}}processMoveMode(t){if(!this.config)return;const n=t.toLowerCase(),r=n.includes("takes")||n.includes("captures"),s=/\b(knight|bishop|rook|queen|king|horse|castle)\b/.test(n),o=/[a-h]\s*[1-8]/.test(n);if((s||r)&&!o){console.log("[VoiceMaster] Piece/capture detected, waiting for target square..."),this.pendingCaptureTranscript=t,this.captureDebounceTimeout&&clearTimeout(this.captureDebounceTimeout),this.captureDebounceTimeout=setTimeout(()=>{var c,u;console.log("[VoiceMaster] Debounce timeout, processing:",this.pendingCaptureTranscript);const l=Mv(this.pendingCaptureTranscript,((c=this.config)==null?void 0:c.legalMoves)||[]);(u=this.config)==null||u.onTranscript(this.pendingCaptureTranscript,l),this.pendingCaptureTranscript=""},li.CAPTURE_DEBOUNCE_MS);return}this.pendingCaptureTranscript&&o&&(this.captureDebounceTimeout&&(clearTimeout(this.captureDebounceTimeout),this.captureDebounceTimeout=null),this.pendingCaptureTranscript="");const a=Mv(t,this.config.legalMoves||[]);this.config.onTranscript(t,a)}processPlacementMode(t){this.config&&this.config.onTranscript(t)}pauseInternal(){var t;if(console.log(`[VoiceMaster] pauseInternal called - isListening=${this.isListening}, shouldBeListening=${this.shouldBeListening}`),this.shouldRestart=!1,!this.isListening){console.log("[VoiceMaster] Not pausing - already not listening");return}if(this.isPaused=!0,console.log("[VoiceMaster] Pausing for TTS"),Pn)console.log("[VoiceMaster] Pausing - mic will resume on TTS end");else if(this.webRecognition)try{this.webRecognition.stop()}catch(n){console.log("[VoiceMaster] Web pause error:",n)}this.isListening=!1,(t=this.config)!=null&&t.onListeningChange&&this.config.onListeningChange(!1),console.log("[VoiceMaster] pauseInternal complete - isListening now false")}async resumeInternal(){if(console.log(`[VoiceMaster] resumeInternal called - shouldBeListening=${this.shouldBeListening}, isListening=${this.isListening}, isPaused=${this.isPaused}`),!this.shouldBeListening){console.log("[VoiceMaster] Not resuming - shouldBeListening is false");return}if(this.isListening){console.log("[VoiceMaster] Already listening, skipping resume");return}if(this.isPaused=!1,this.shouldRestart=!0,console.log("[VoiceMaster] Resuming after TTS"),Pn){if(this.restartPromise){console.log("[VoiceMaster] Waiting for pending restart to complete...");try{await this.restartPromise}catch{}}this.triggerRestart()}else this.startWeb()}async startNative(){var n;if(this.isStarting)return console.log("[VoiceMaster] startNative blocked: Already starting"),!1;if(this.micBusy)return console.log("[VoiceMaster] Mic is busy, not starting"),!1;const t=Date.now()-this.lastErrorTime;if(t<3e3&&this.lastErrorTime>0)return console.log(`[VoiceMaster] Lockout: ${3e3-t}ms remaining, queueing restart`),this.restartTimeout||this.scheduleRestart(),!0;this.isStarting=!0;try{return this.listenerHandle&&(await this.listenerHandle.remove(),this.listenerHandle=null),this.listenerHandle=await ie.addListener("onSpeechResult",r=>{if(!this.shouldRestart){console.log("[VoiceMaster] Loop paused, ignoring speech result");return}if(r.text&&this.shouldBeListening){const s=r.text;this.consecutiveFailures=0,this.processTranscript(s),this.shouldRestart&&this.shouldBeListening&&ie.startListening().catch(o=>{console.log("[VoiceMaster] startListening error after result:",o)})}}),console.log("[VoiceMaster] Starting BlindfoldNative session..."),await ie.startSession(),console.log("[VoiceMaster] Starting BlindfoldNative listening..."),await ie.startListening(),this.isListening=!0,this.consecutiveFailures=0,console.log("[VoiceMaster] Started native - isListening=true, shouldBeListening="+this.shouldBeListening),(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!0),await G1(),!0}catch(r){return console.error("[VoiceMaster] Failed to start native:",r),this.lastErrorTime=Date.now(),this.consecutiveFailures++,this.consecutiveFailures>=li.MAX_CONSECUTIVE_FAILURES?(console.log("[VoiceMaster] Too many failures, mic is busy"),this.micBusy=!0,this.isListening=!1,this.onMicBusyChange&&this.onMicBusyChange(!0),this.onRetryNeeded&&this.onRetryNeeded(),!1):(this.shouldBeListening&&this.scheduleRestart(),!1)}finally{this.isStarting=!1}}startWeb(){try{const t=window.SpeechRecognition||window.webkitSpeechRecognition;return t?(this.webRecognition=new t,this.webRecognition.continuous=!0,this.webRecognition.interimResults=!1,this.webRecognition.lang="en-US",this.webRecognition.onresult=n=>{const r=n.results[n.results.length-1];if(r.isFinal&&this.shouldBeListening){const s=r[0].transcript;this.processTranscript(s)}},this.webRecognition.onerror=n=>{console.log("[VoiceMaster] Web error:",n.error),n.error!=="aborted"&&n.error!=="not-allowed"&&this.shouldBeListening&&this.scheduleRestart()},this.webRecognition.onend=()=>{var n;this.isListening=!1,(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!1),this.shouldBeListening&&this.scheduleRestart()},this.webRecognition.onstart=()=>{var n;this.isListening=!0,(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!0)},this.webRecognition.start(),console.log("[VoiceMaster] Started web"),!0):!1}catch(t){return console.error("[VoiceMaster] Failed to start web:",t),!1}}scheduleRestart(){const t=Date.now()-this.lastErrorTime;if(t<3e3&&this.lastErrorTime>0){this.restartTimeout&&clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>{this.scheduleRestart()},3e3-t+100);return}if(this.micBusy){console.log("[VoiceMaster] Mic busy, not scheduling restart");return}this.restartTimeout&&clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>{this.shouldBeListening&&!this.micBusy&&(console.log("[VoiceMaster] Scheduled restart firing via Gatekeeper"),Pn?this.triggerRestart():this.startWeb())},500)}async stop(){var t;if(console.log("[VoiceMaster] stop() called - beginning full cleanup"),this.shouldBeListening=!1,this.isPaused=!1,this.micBusy=!1,this.consecutiveFailures=0,this.lastErrorTime=0,this.captureDebounceTimeout&&(clearTimeout(this.captureDebounceTimeout),this.captureDebounceTimeout=null),this.pendingCaptureTranscript="",Fr.setActive(this.sessionId,!1),Fr.clearPendingForSession(this.sessionId),this.isRegistered&&(Fr.unregister(this.sessionId),$i.unregister(this.sessionId),this.isRegistered=!1),this.restartTimeout&&(clearTimeout(this.restartTimeout),this.restartTimeout=null),Pn)try{await ie.stopSession(),this.listenerHandle&&(await this.listenerHandle.remove(),this.listenerHandle=null)}catch(n){console.log("[VoiceMaster] Stop error:",n)}else if(this.webRecognition){try{this.webRecognition.stop()}catch(n){console.log("[VoiceMaster] Web stop error:",n)}this.webRecognition=null}this.isListening=!1,(t=this.config)!=null&&t.onListeningChange&&this.config.onListeningChange(!1),this.config=null,console.log("[VoiceMaster] Stopped - all state reset, session fully cleaned")}async stopAndWait(){var n;if(this.shouldBeListening=!1,!this.listenerHandle&&!this.webRecognition){console.log("[VoiceMaster] stopAndWait: nothing to stop, fast path"),this.micBusy=!1,this.isListening=!1,this.consecutiveFailures=0,this.isPaused=!1,this.config=null;return}console.log("[VoiceMaster] stopAndWait: active session, stopping...");const t=async()=>{let r=!1;const s=this.stop().then(()=>{r=!0});if(await Promise.race([s,new Promise(o=>setTimeout(o,500))]),!r){if(console.warn("[VoiceMaster] Normal stop timed out, forcing native stop"),Pn)try{await ie.stopSession()}catch{}if(this.listenerHandle){try{await this.listenerHandle.remove()}catch{}this.listenerHandle=null}if(this.webRecognition){try{this.webRecognition.stop()}catch{}this.webRecognition=null}}};await Promise.race([t(),new Promise(r=>setTimeout(()=>{console.warn("[VoiceMaster] 800ms hard timeout - forcing cleanup"),r()},800))]),this.micBusy=!1,this.isListening=!1,this.consecutiveFailures=0,this.isPaused=!1,this.listenerHandle=null,this.stateListenerHandle=null,this.webRecognition=null,(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!1),this.config=null,console.log("[VoiceMaster] stopAndWait complete - state reset")}getIsListening(){return this.isListening}getMode(){var t;return((t=this.config)==null?void 0:t.mode)||null}};li.CAPTURE_DEBOUNCE_MS=2e3,li.MAX_CONSECUTIVE_FAILURES=3;let ph=li;const it=new ph,Fv={async start(e,t){return it.start({mode:"raw",onTranscript:e,onListeningChange:t})},async stop(){return it.stop()},async stopAndWait(){return it.stopAndWait()},async checkAvailability(){return it.checkAvailability()},getIsListening(){return it.getIsListening()},setOnMicBusyChange(e){it.setOnMicBusyChange(e)},setOnRetryNeeded(e){it.setOnRetryNeeded(e)},isMicBusy(){return it.isMicBusy()},resetMicBusy(){it.resetMicBusy()},mute(e=400){it.mute(e)},setMute(e,t=400){it.setMute(e,t)},getIsMuted(){return it.getIsMuted()},async pauseLoop(){return it.pauseLoop()},resumeLoop(){it.resumeLoop()}};function su(e){const t=Math.max(400,Math.min(2600,e));if(t<=600){const o=(t-400)/200;return{elo:t,depth:1,randomPercent:Math.round(50-o*20),skillLevel:Math.round(o*2)}}if(t<=800){const o=(t-600)/200;return{elo:t,depth:1+Math.round(o),randomPercent:Math.round(30-o*10),skillLevel:Math.round(2+o*3)}}if(t<=1e3){const o=(t-800)/200;return{elo:t,depth:2+Math.round(o),randomPercent:Math.round(20-o*8),skillLevel:Math.round(5+o*3)}}if(t<=1200){const o=(t-1e3)/200;return{elo:t,depth:3+Math.round(o),randomPercent:Math.round(12-o*5),skillLevel:Math.round(8+o*2)}}if(t<=1400){const o=(t-1200)/200;return{elo:t,depth:4+Math.round(o),randomPercent:Math.round(7-o*4),skillLevel:Math.round(10+o*2)}}if(t<=1600){const o=(t-1400)/200;return{elo:t,depth:5+Math.round(o),randomPercent:Math.round(3-o*3),skillLevel:Math.round(12+o*3)}}if(t<=1800){const o=(t-1600)/200;return{elo:t,depth:6,randomPercent:0,skillLevel:Math.round(15+o*2)}}const n=(t-1800)/800,r=2e5;return{elo:t,depth:0,randomPercent:0,skillLevel:Math.round(17+n*3),nodes:Math.round(r+n*(2e6-r))}}function yR(e){return e<=600?"Beginner":e<=800?"Novice":e<=1e3?"Casual":e<=1200?"Intermediate":e<=1400?"Club Player":e<=1600?"Strong Club":e<=1800?"Expert":e<=2e3?"Master":e<=2200?"National Master":e<=2400?"International Master":"Grandmaster"}const Y1=[400,600,800,1e3,1200,1400,1600,1800,2e3,2200,2400,2600];Y1.map(e=>{const t=su(e);return{id:`elo_${e}`,elo:e,difficulty:`elo_${e}`,depth:t.depth,randomPercent:t.randomPercent}});const fp=Y1,wR={kingsideCornerWhite:["f1","g1","h1","f2","g2","h2"],queensideCornerWhite:["a1","b1","c1","a2","b2","c2"],kingsideCornerBlack:["f8","g8","h8","f7","g7","h7"],queensideCornerBlack:["a8","b8","c8","a7","b7","c7"],center:["d4","e4","d5","e5"],extendedCenter:["c3","d3","e3","f3","c4","f4","c5","f5","c6","d6","e6","f6"],kingside:["f1","g1","h1","f2","g2","h2","f3","g3","h3","f4","g4","h4","f5","g5","h5","f6","g6","h6","f7","g7","h7","f8","g8","h8"],queenside:["a1","b1","c1","a2","b2","c2","a3","b3","c3","a4","b4","c4","a5","b5","c5","a6","b6","c6","a7","b7","c7","a8","b8","c8"],corners:["a1","h1","a8","h8"]},X1="blindfold-chess-stats-v2",Z1="blindfold-chess-settings",bR="blindfold-chess-stats",J1={moves10:{total:0,count:0},moves20:{total:0,count:0},moves30:{total:0,count:0},moves40:{total:0,count:0},moves50plus:{total:0,count:0}},eb={opening:{total:0,count:0},middlegame:{total:0,count:0},endgame:{total:0,count:0}},hp={wins:0,draws:0,losses:0,lastGamePeekTime:0,totalPeekTime:0,gamesWithPeeks:0,bestPeekFreeStreak:0,lastGamePeekFreeStreak:0,lastGameAvgResponseTime:0,totalResponseTime:0,totalResponseMoves:0,bestClarityScore:0,lastClarityScore:0,lastVoicePurity:0,bestVoicePurity:0,tierStats:{},visualizationCeiling:0,visualizationCeilingElo:null,clarityByMoveCount:{...J1},totalPeekFreeGames:0,totalGamesPlayed:0,reconstructionVoiceInputs:0,reconstructionTouchInputs:0,gameVoiceMoves:0,gameTouchMoves:0,responseTimeByPhase:{...eb},lastGameEndgameDrift:0,voiceCorrections:0,voiceCommandsTotal:0,lastGameVoiceCorrections:0,mentalBlurCount:0,squareInquiryHeatmap:{},totalSquareInquiries:0,stockfishThresholdElo:null,longestGame:0,fastestWin:0,currentWinStreak:0,bestWinStreak:0,currentPeekFreeStreak:0,bestPeekFreeGameStreak:0,blindfoldGamesPlayed:0,assistedGamesCount:0,lastGameWasAssisted:!1},zv={boardReconstructionEnabled:!1,botThinkingTimeEnabled:!1,keepAwakeEnabled:!0};function Vv(e){const t={...hp,...e};return t.clarityByMoveCount={...J1,...e.clarityByMoveCount||{}},t.responseTimeByPhase={...eb,...e.responseTimeByPhase||{}},t.tierStats=e.tierStats||{},t.squareInquiryHeatmap=e.squareInquiryHeatmap||{},t}function Aa(){try{const e=localStorage.getItem(X1);if(e){const n=JSON.parse(e);return Vv(n)}const t=localStorage.getItem(bR);if(t){const n=JSON.parse(t),r=Vv(n);return mp(r),r}}catch(e){console.error("Failed to load stats:",e)}return{...hp}}function mp(e){try{localStorage.setItem(X1,JSON.stringify(e))}catch(t){console.error("Failed to save stats:",t)}}function gh(){try{const e=localStorage.getItem(Z1);if(e){const t=JSON.parse(e);return{...zv,...t}}}catch(e){console.error("Failed to load settings:",e)}return{...zv}}function vh(e){try{localStorage.setItem(Z1,JSON.stringify(e))}catch(t){console.error("Failed to save settings:",t)}}function SR(e){return e<=10?"moves10":e<=20?"moves20":e<=30?"moves30":e<=40?"moves40":"moves50plus"}function tb(e){return{opening:e.slice(0,10),middlegame:e.slice(10,30),endgame:e.slice(30)}}function kR(e){const t=tb(e);if(t.opening.length===0||t.endgame.length===0)return 0;const n=t.opening.reduce((o,a)=>o+a,0)/t.opening.length,r=t.endgame.reduce((o,a)=>o+a,0)/t.endgame.length;if(n===0)return 0;const s=(r-n)/n*100;return Math.max(0,Math.round(s))}function NR(e){if(e.length<3)return 0;const n=e.reduce((r,s)=>r+s,0)/e.length*2;return e.filter(r=>r>n).length}function CR(e){for(const t of fp){const n=e[t];if(!n||n.totalGames<3)continue;if(n.wins/n.totalGames<.5)return t}return null}function jR(e){let t=0;for(const n of fp){const r=e[n];r&&r.peekFreeWins>0&&n>t&&(t=n)}return{elo:t}}function ER(e,t,n=0,r=[],s,o,a){const l=Aa(),c=(a==null?void 0:a.botElo)||1200,u=(a==null?void 0:a.wasPeekFree)??t===0,f=(a==null?void 0:a.totalMoves)||r.length,h=(a==null?void 0:a.voiceCorrections)||0,m=(a==null?void 0:a.voiceCommands)||0,y=(a==null?void 0:a.reconstructionVoiceInputs)||0,g=(a==null?void 0:a.reconstructionTouchInputs)||0,p=(a==null?void 0:a.gameVoiceMoves)||0,w=(a==null?void 0:a.gameTouchMoves)||0,x=(a==null?void 0:a.squareInquiries)||[],v=(a==null?void 0:a.isBlindfold)??!1,b=(a==null?void 0:a.wasAssisted)??!1;e==="win"?l.wins++:e==="loss"?l.losses++:l.draws++,l.totalGamesPlayed++,v?(l.blindfoldGamesPlayed++,l.lastGamePeekTime=t,t>0&&(l.totalPeekTime+=t,l.gamesWithPeeks++),u?(l.totalPeekFreeGames++,l.currentPeekFreeStreak++,l.currentPeekFreeStreak>l.bestPeekFreeGameStreak&&(l.bestPeekFreeGameStreak=l.currentPeekFreeStreak)):l.currentPeekFreeStreak=0,l.lastGamePeekFreeStreak=n,n>l.bestPeekFreeStreak&&(l.bestPeekFreeStreak=n)):(l.lastGamePeekTime=0,l.lastGamePeekFreeStreak=0,l.currentPeekFreeStreak=0),l.tierStats[c]||(l.tierStats[c]={wins:0,losses:0,draws:0,peekFreeWins:0,totalPeeks:0,totalGames:0});const k=l.tierStats[c];k.totalGames++,e==="win"?(k.wins++,v&&u&&k.peekFreeWins++,l.currentWinStreak++,l.currentWinStreak>l.bestWinStreak&&(l.bestWinStreak=l.currentWinStreak),(l.fastestWin===0||f<l.fastestWin)&&(l.fastestWin=f)):e==="loss"?(k.losses++,l.currentWinStreak=0):k.draws++,v&&!u&&k.totalPeeks++,f>l.longestGame&&(l.longestGame=f);const S=jR(l.tierStats);if(l.visualizationCeiling=S.elo,l.visualizationCeilingElo=S.elo||null,l.stockfishThresholdElo=CR(l.tierStats),r.length>0){const C=r.reduce((j,R)=>j+R,0)/r.length;l.lastGameAvgResponseTime=C,l.totalResponseTime+=r.reduce((j,R)=>j+R,0),l.totalResponseMoves+=r.length;const N=tb(r);N.opening.length>0&&(l.responseTimeByPhase.opening.total+=N.opening.reduce((j,R)=>j+R,0),l.responseTimeByPhase.opening.count+=N.opening.length),N.middlegame.length>0&&(l.responseTimeByPhase.middlegame.total+=N.middlegame.reduce((j,R)=>j+R,0),l.responseTimeByPhase.middlegame.count+=N.middlegame.length),N.endgame.length>0&&(l.responseTimeByPhase.endgame.total+=N.endgame.reduce((j,R)=>j+R,0),l.responseTimeByPhase.endgame.count+=N.endgame.length),l.lastGameEndgameDrift=kR(r),l.mentalBlurCount+=NR(r)}else l.lastGameAvgResponseTime=0,l.lastGameEndgameDrift=0;if(l.lastGameWasAssisted=b,b&&l.assistedGamesCount++,s!==void 0){const C=b?Math.min(s,50):s;l.lastClarityScore=C,C>l.bestClarityScore&&(l.bestClarityScore=C);const N=SR(f);l.clarityByMoveCount[N].total+=C,l.clarityByMoveCount[N].count++}if(o!==void 0&&(l.lastVoicePurity=o,o>l.bestVoicePurity&&(l.bestVoicePurity=o)),l.voiceCorrections+=h,l.voiceCommandsTotal+=m,l.lastGameVoiceCorrections=h,l.reconstructionVoiceInputs+=y,l.reconstructionTouchInputs+=g,l.gameVoiceMoves+=p,l.gameTouchMoves+=w,x.length>0){l.totalSquareInquiries+=x.length;for(const C of x){const N=C.toLowerCase();l.squareInquiryHeatmap[N]=(l.squareInquiryHeatmap[N]||0)+1}}return mp(l),l}function PR(e){return e.totalResponseMoves===0?0:e.totalResponseTime/e.totalResponseMoves}function nb(e){const t=e.blindfoldGamesPlayed||0;return t===0?0:Math.round(e.totalPeekFreeGames/t*100)}function TR(e){const t=e.gameVoiceMoves+e.gameTouchMoves;return t===0?{voice:0,touch:0}:{voice:Math.round(e.gameVoiceMoves/t*100),touch:Math.round(e.gameTouchMoves/t*100)}}function rb(e){const t=e.responseTimeByPhase.opening,n=e.responseTimeByPhase.middlegame,r=e.responseTimeByPhase.endgame;return{opening:t.count>0?Math.round(t.total/t.count):0,middlegame:n.count>0?Math.round(n.total/n.count):0,endgame:r.count>0?Math.round(r.total/r.count):0}}function sb(e){const t=e.clarityByMoveCount;return{moves10:t.moves10.count>0?Math.round(t.moves10.total/t.moves10.count):0,moves20:t.moves20.count>0?Math.round(t.moves20.total/t.moves20.count):0,moves30:t.moves30.count>0?Math.round(t.moves30.total/t.moves30.count):0,moves40:t.moves40.count>0?Math.round(t.moves40.total/t.moves40.count):0,moves50plus:t.moves50plus.count>0?Math.round(t.moves50plus.total/t.moves50plus.count):0}}function ob(e){return e.voiceCommandsTotal===0?0:Math.round(e.voiceCorrections/e.voiceCommandsTotal*100)}function RR(e){const t={kingsideCornerWhite:0,queensideCornerWhite:0,kingsideCornerBlack:0,queensideCornerBlack:0,center:0,extendedCenter:0,kingside:0,queenside:0,corners:0};for(const[n,r]of Object.entries(e.squareInquiryHeatmap))for(const[s,o]of Object.entries(wR))o.includes(n)&&(t[s]+=r||0);return t}function ib(e,t=5){return Object.entries(e.squareInquiryHeatmap).map(([n,r])=>({square:n,count:r||0})).sort((n,r)=>r.count-n.count).slice(0,t)}function _R(e,t){if(e.totalSquareInquiries===0)return 0;const n=e.squareInquiryHeatmap[t.toLowerCase()]||0,r=Math.max(...Object.values(e.squareInquiryHeatmap).map(s=>s||0),1);return Math.round(n/r*100)}function MR(e,t){const n=e.tierStats[t];return!n||n.totalGames===0?0:Math.round(n.wins/n.totalGames*100)}function si(e){return e===0?"-":e<1e3?`${Math.round(e)}ms`:`${(e/1e3).toFixed(1)}s`}function AR(){mp({...hp})}function LR(e){const t=[],n=sb(e);n.moves20>0&&n.moves40>0&&n.moves20-n.moves40>20&&t.push({type:"warning",category:"visualization",title:"Clarity Degradation",message:`Your accuracy drops from ${n.moves20}% at 20 moves to ${n.moves40}% at 40 moves. Focus on endgame visualization training.`}),e.visualizationCeiling>0&&t.push({type:"success",category:"visualization",title:"Visualization Ceiling",message:`You've beaten a ${e.visualizationCeiling} Elo bot without peeking! Keep pushing higher.`});const r=nb(e);r>50&&t.push({type:"success",category:"visualization",title:"Peek-Free Progress",message:`${r}% of your games are peek-free. Your visualization is improving!`});const s=rb(e);if(s.endgame>0&&s.opening>0){const f=(s.endgame-s.opening)/s.opening*100;f>50&&t.push({type:"warning",category:"cognitive",title:"Endgame Drift Detected",message:`Your endgame response time is ${Math.round(f)}% slower than opening. The open board may be causing "mental blur."`})}const o=ob(e);o>20&&t.push({type:"tip",category:"cognitive",title:"Voice Accuracy",message:`You correct ${o}% of voice commands. Try speaking more slowly or using full square names.`}),e.stockfishThresholdElo&&t.push({type:"info",category:"tactical",title:"Stockfish Threshold",message:`Your win rate drops below 50% at ${e.stockfishThresholdElo} Elo. Focus training at this level.`});const a=RR(e),l=ib(e,3);if(l.length>0&&l[0].count>=3){const f=l.map(h=>h.square.toUpperCase()).join(", ");t.push({type:"warning",category:"tactical",title:"Board Blind Spots",message:`You frequently lose track of: ${f}. Focus on visualizing these squares.`})}const c=a.kingside,u=a.queenside;return c>u*2&&c>=5?t.push({type:"tip",category:"tactical",title:"Kingside Visualization",message:"Your mental image of the kingside is weaker. Practice visualizing the f, g, and h files."}):u>c*2&&u>=5&&t.push({type:"tip",category:"tactical",title:"Queenside Visualization",message:"Your mental image of the queenside is weaker. Practice visualizing the a, b, and c files."}),a.corners>=4&&t.push({type:"tip",category:"visualization",title:"Corner Awareness",message:"Your mental board is blurry in the corners (a1, h1, a8, h8). These squares need more focus."}),t}class ab{constructor(t){this.sqlite=t,this._connectionDict=new Map}async initWebStore(){try{return await this.sqlite.initWebStore(),Promise.resolve()}catch(t){return Promise.reject(t)}}async saveToStore(t){try{return await this.sqlite.saveToStore({database:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async saveToLocalDisk(t){try{return await this.sqlite.saveToLocalDisk({database:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async getFromLocalDiskToStore(t){const n=t??!0;try{return await this.sqlite.getFromLocalDiskToStore({overwrite:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async echo(t){try{const n=await this.sqlite.echo({value:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isSecretStored(){try{const t=await this.sqlite.isSecretStored();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async setEncryptionSecret(t){try{return await this.sqlite.setEncryptionSecret({passphrase:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async changeEncryptionSecret(t,n){try{return await this.sqlite.changeEncryptionSecret({passphrase:t,oldpassphrase:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async clearEncryptionSecret(){try{return await this.sqlite.clearEncryptionSecret(),Promise.resolve()}catch(t){return Promise.reject(t)}}async checkEncryptionSecret(t){try{const n=await this.sqlite.checkEncryptionSecret({passphrase:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async addUpgradeStatement(t,n){try{return t.endsWith(".db")&&(t=t.slice(0,-3)),await this.sqlite.addUpgradeStatement({database:t,upgrade:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async createConnection(t,n,r,s,o){try{t.endsWith(".db")&&(t=t.slice(0,-3)),await this.sqlite.createConnection({database:t,encrypted:n,mode:r,version:s,readonly:o});const a=new qv(t,o,this.sqlite),l=o?`RO_${t}`:`RW_${t}`;return this._connectionDict.set(l,a),Promise.resolve(a)}catch(a){return Promise.reject(a)}}async closeConnection(t,n){try{t.endsWith(".db")&&(t=t.slice(0,-3)),await this.sqlite.closeConnection({database:t,readonly:n});const r=n?`RO_${t}`:`RW_${t}`;return this._connectionDict.delete(r),Promise.resolve()}catch(r){return Promise.reject(r)}}async isConnection(t,n){const r={};t.endsWith(".db")&&(t=t.slice(0,-3));const s=n?`RO_${t}`:`RW_${t}`;return r.result=this._connectionDict.has(s),Promise.resolve(r)}async retrieveConnection(t,n){t.endsWith(".db")&&(t=t.slice(0,-3));const r=n?`RO_${t}`:`RW_${t}`;if(this._connectionDict.has(r)){const s=this._connectionDict.get(r);return typeof s<"u"?Promise.resolve(s):Promise.reject(`Connection ${t} is undefined`)}else return Promise.reject(`Connection ${t} does not exist`)}async getNCDatabasePath(t,n){try{const r=await this.sqlite.getNCDatabasePath({path:t,database:n});return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async createNCConnection(t,n){try{await this.sqlite.createNCConnection({databasePath:t,version:n});const r=new qv(t,!0,this.sqlite),s=`RO_${t})`;return this._connectionDict.set(s,r),Promise.resolve(r)}catch(r){return Promise.reject(r)}}async closeNCConnection(t){try{await this.sqlite.closeNCConnection({databasePath:t});const n=`RO_${t})`;return this._connectionDict.delete(n),Promise.resolve()}catch(n){return Promise.reject(n)}}async isNCConnection(t){const n={},r=`RO_${t})`;return n.result=this._connectionDict.has(r),Promise.resolve(n)}async retrieveNCConnection(t){if(this._connectionDict.has(t)){const n=`RO_${t})`,r=this._connectionDict.get(n);return typeof r<"u"?Promise.resolve(r):Promise.reject(`Connection ${t} is undefined`)}else return Promise.reject(`Connection ${t} does not exist`)}async isNCDatabase(t){try{const n=await this.sqlite.isNCDatabase({databasePath:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async retrieveAllConnections(){return this._connectionDict}async closeAllConnections(){const t=new Map;try{for(const n of this._connectionDict.keys()){const r=n.substring(3),s=n.substring(0,3)==="RO_";await this.sqlite.closeConnection({database:r,readonly:s}),t.set(n,null)}for(const n of t.keys())this._connectionDict.delete(n);return Promise.resolve()}catch(n){return Promise.reject(n)}}async checkConnectionsConsistency(){try{const t=[...this._connectionDict.keys()],n=[],r=[];for(const o of t)n.push(o.substring(0,2)),r.push(o.substring(3));const s=await this.sqlite.checkConnectionsConsistency({dbNames:r,openModes:n});return s.result||(this._connectionDict=new Map),Promise.resolve(s)}catch(t){return this._connectionDict=new Map,Promise.reject(t)}}async importFromJson(t){try{const n=await this.sqlite.importFromJson({jsonstring:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isJsonValid(t){try{const n=await this.sqlite.isJsonValid({jsonstring:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async copyFromAssets(t){const n=t??!0;try{return await this.sqlite.copyFromAssets({overwrite:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async getFromHTTPRequest(t,n){const r=n??!0;try{return await this.sqlite.getFromHTTPRequest({url:t,overwrite:r}),Promise.resolve()}catch(s){return Promise.reject(s)}}async isDatabaseEncrypted(t){t.endsWith(".db")&&(t=t.slice(0,-3));try{const n=await this.sqlite.isDatabaseEncrypted({database:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isInConfigEncryption(){try{const t=await this.sqlite.isInConfigEncryption();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isInConfigBiometricAuth(){try{const t=await this.sqlite.isInConfigBiometricAuth();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isDatabase(t){t.endsWith(".db")&&(t=t.slice(0,-3));try{const n=await this.sqlite.isDatabase({database:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async getDatabaseList(){try{const n=(await this.sqlite.getDatabaseList()).values;n.sort();const r={values:n};return Promise.resolve(r)}catch(t){return Promise.reject(t)}}async getMigratableDbList(t){const n=t||"default";try{const r=await this.sqlite.getMigratableDbList({folderPath:n});return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async addSQLiteSuffix(t,n){const r=t||"default",s=n||[];try{const o=await this.sqlite.addSQLiteSuffix({folderPath:r,dbNameList:s});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async deleteOldDatabases(t,n){const r=t||"default",s=n||[];try{const o=await this.sqlite.deleteOldDatabases({folderPath:r,dbNameList:s});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async moveDatabasesAndAddSuffix(t,n){const r=t||"default",s=n||[];return this.sqlite.moveDatabasesAndAddSuffix({folderPath:r,dbNameList:s})}}class qv{constructor(t,n,r){this.dbName=t,this.readonly=n,this.sqlite=r}getConnectionDBName(){return this.dbName}getConnectionReadOnly(){return this.readonly}async open(){try{return await this.sqlite.open({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async close(){try{return await this.sqlite.close({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async beginTransaction(){try{const t=await this.sqlite.beginTransaction({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async commitTransaction(){try{const t=await this.sqlite.commitTransaction({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async rollbackTransaction(){try{const t=await this.sqlite.rollbackTransaction({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isTransactionActive(){try{const t=await this.sqlite.isTransactionActive({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async loadExtension(t){try{return await this.sqlite.loadExtension({database:this.dbName,path:t,readonly:this.readonly}),Promise.resolve()}catch(n){return Promise.reject(n)}}async enableLoadExtension(t){try{return await this.sqlite.enableLoadExtension({database:this.dbName,toggle:t,readonly:this.readonly}),Promise.resolve()}catch(n){return Promise.reject(n)}}async getUrl(){try{const t=await this.sqlite.getUrl({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getVersion(){try{const t=await this.sqlite.getVersion({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getTableList(){try{const t=await this.sqlite.getTableList({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async execute(t,n=!0,r=!0){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const s=await this.sqlite.execute({database:this.dbName,statements:t,transaction:n,readonly:!1,isSQL92:r});return Promise.resolve(s)}}catch(s){return Promise.reject(s)}}async query(t,n,r=!0){let s;try{return n&&n.length>0?s=await this.sqlite.query({database:this.dbName,statement:t,values:n,readonly:this.readonly,isSQL92:!0}):s=await this.sqlite.query({database:this.dbName,statement:t,values:[],readonly:this.readonly,isSQL92:r}),s=await this.reorderRows(s),Promise.resolve(s)}catch(o){return Promise.reject(o)}}async run(t,n,r=!0,s="no",o=!0){let a;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(n&&n.length>0?a=await this.sqlite.run({database:this.dbName,statement:t,values:n,transaction:r,readonly:!1,returnMode:s,isSQL92:!0}):a=await this.sqlite.run({database:this.dbName,statement:t,values:[],transaction:r,readonly:!1,returnMode:s,isSQL92:o}),a.changes=await this.reorderRows(a.changes),Promise.resolve(a))}catch(l){return Promise.reject(l)}}async executeSet(t,n=!0,r="no",s=!0){let o;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(o=await this.sqlite.executeSet({database:this.dbName,set:t,transaction:n,readonly:!1,returnMode:r,isSQL92:s}),o.changes=await this.reorderRows(o.changes),Promise.resolve(o))}catch(a){return Promise.reject(a)}}async isExists(){try{const t=await this.sqlite.isDBExists({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isTable(t){try{const n=await this.sqlite.isTableExists({database:this.dbName,table:t,readonly:this.readonly});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isDBOpen(){try{const t=await this.sqlite.isDBOpen({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async delete(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteDatabase({database:this.dbName,readonly:!1}),Promise.resolve())}catch(t){return Promise.reject(t)}}async createSyncTable(){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const t=await this.sqlite.createSyncTable({database:this.dbName,readonly:!1});return Promise.resolve(t)}}catch(t){return Promise.reject(t)}}async setSyncDate(t){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.setSyncDate({database:this.dbName,syncdate:t,readonly:!1}),Promise.resolve())}catch(n){return Promise.reject(n)}}async getSyncDate(){try{const t=await this.sqlite.getSyncDate({database:this.dbName,readonly:this.readonly});let n="";return t.syncDate>0&&(n=new Date(t.syncDate*1e3).toISOString()),Promise.resolve(n)}catch(t){return Promise.reject(t)}}async exportToJson(t,n=!1){try{const r=await this.sqlite.exportToJson({database:this.dbName,jsonexportmode:t,readonly:this.readonly,encrypted:n});return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async deleteExportedRows(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteExportedRows({database:this.dbName,readonly:!1}),Promise.resolve())}catch(t){return Promise.reject(t)}}async executeTransaction(t,n=!0){let r=0,s=!1;if(this.readonly)return Promise.reject("not allowed in read-only mode");if(await this.sqlite.beginTransaction({database:this.dbName}),s=await this.sqlite.isTransactionActive({database:this.dbName}),!s)return Promise.reject("After Begin Transaction, no transaction active");try{for(const l of t){if(typeof l!="object"||!("statement"in l))throw new Error("Error a task.statement must be provided");if("values"in l&&l.values&&l.values.length>0){const c=l.statement.toUpperCase().includes("RETURNING")?"all":"no",u=await this.sqlite.run({database:this.dbName,statement:l.statement,values:l.values,transaction:!1,readonly:!1,returnMode:c,isSQL92:n});if(u.changes.changes<0)throw new Error("Error in transaction method run ");r+=u.changes.changes}else{const c=await this.sqlite.execute({database:this.dbName,statements:l.statement,transaction:!1,readonly:!1});if(c.changes.changes<0)throw new Error("Error in transaction method execute ");r+=c.changes.changes}}const o=await this.sqlite.commitTransaction({database:this.dbName});r+=o.changes.changes;const a={changes:{changes:r}};return Promise.resolve(a)}catch(o){const a=o.message?o.message:o;return await this.sqlite.rollbackTransaction({database:this.dbName}),Promise.reject(a)}}async reorderRows(t){const n=t;if(t!=null&&t.values&&typeof t.values[0]=="object"&&Object.keys(t.values[0]).includes("ios_columns")){const r=t.values[0].ios_columns,s=[];for(let o=1;o<t.values.length;o++){const a=t.values[o],l={};for(const c of r)l[c]=a[c];s.push(l)}n.values=s}return Promise.resolve(n)}}const lb=Ws("CapacitorSQLite",{web:()=>Hi(()=>import("./web-DCiQag1B.js"),[]).then(e=>new e.CapacitorSQLiteWeb),electron:()=>window.CapacitorCustomPlatform.plugins.CapacitorSQLite}),Ud="blindfold_chess";let ma=null,Jt=null,ou=!1,bc=!1,Yl=null;async function cb(){return bc?!0:Yl||(Yl=IR(),Yl)}async function IR(){var e;try{if(ou=mn.isNativePlatform(),!ou)return console.log("[TrainingStats] Web platform - using localStorage fallback"),bc=!0,!0;ma=new ab(lb);const t=await ma.checkConnectionsConsistency(),n=(await ma.isConnection(Ud,!1)).result;t.result&&n?Jt=await ma.retrieveConnection(Ud,!1):Jt=await ma.createConnection(Ud,!1,"no-encryption",1,!1),await Jt.open(),await Jt.execute(`
      CREATE TABLE IF NOT EXISTS training_stats (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        mode TEXT NOT NULL,
        score REAL NOT NULL,
        streak INTEGER NOT NULL DEFAULT 0,
        achieved_at TEXT NOT NULL
      );
    `);try{((e=(await Jt.query("PRAGMA table_info(training_stats);")).values)==null?void 0:e.some(a=>a.name==="streak"))||(await Jt.execute("ALTER TABLE training_stats ADD COLUMN streak INTEGER NOT NULL DEFAULT 0;"),console.log("[TrainingStats] Migrated: Added streak column"))}catch(s){console.warn("[TrainingStats] Migration check failed:",s)}return console.log("[TrainingStats] Database initialized successfully"),bc=!0,!0}catch(t){return console.error("[TrainingStats] Failed to initialize database:",t),bc=!0,!1}}function ub(){try{const e=localStorage.getItem("blindfold_training_stats");return e?JSON.parse(e):[]}catch{return[]}}function $R(e){localStorage.setItem("blindfold_training_stats",JSON.stringify(e))}async function OR(e,t,n=0){var s,o;await cb();const r=new Date().toISOString();try{if(!ou){const c=ub(),u=c.length>0?Math.max(...c.map(h=>h.id))+1:1,f={id:u,mode:e,score:t,streak:n,achievedAt:r};return c.unshift(f),$R(c),console.log("[TrainingStats] Session saved to localStorage:",u),u}if(!Jt)return console.error("[TrainingStats] Database not initialized"),null;const l=await Jt.run(`
      INSERT INTO training_stats (mode, score, streak, achieved_at)
      VALUES (?, ?, ?, ?);
    `,[e,t,n,r]);return console.log("[TrainingStats] Session saved:",(s=l.changes)==null?void 0:s.lastId),((o=l.changes)==null?void 0:o.lastId)||null}catch(a){return console.error("[TrainingStats] Failed to save session:",a instanceof Error?a.message:String(a)),null}}async function iu(){var t,n,r,s,o,a,l,c,u,f,h,m,y,g,p,w,x,v,b,k;await cb();const e={colorBlitzBest:null,colorBlitzBestDate:null,colorBlitzBestStreak:null,coordinateSniperBest:null,coordinateSniperBestDate:null,coordinateSniperBestStreak:null,voiceMoveMasterBest:null,voiceMoveMasterBestDate:null,voiceMoveMasterBestStreak:null,totalSessions:0,recentSessions:[]};try{if(!ou){const W=ub(),ge=W.filter(Ee=>Ee.mode==="color_blitz"),xe=W.filter(Ee=>Ee.mode==="coordinate_sniper"),we=W.filter(Ee=>Ee.mode==="voice_move_master");let Ce=null,O=null,q=null;if(ge.length>0){const Ee=ge.reduce((Te,ke)=>ke.score>Te.score?ke:Te);Ce=Ee.score,O=Ee.achievedAt,q=ge.reduce((Te,ke)=>(ke.streak||0)>(Te.streak||0)?ke:Te).streak||null}let X=null,J=null,fe=null;if(xe.length>0){const Ee=xe.reduce((Te,ke)=>ke.score<Te.score?ke:Te);X=Ee.score,J=Ee.achievedAt,fe=xe.reduce((Te,ke)=>(ke.streak||0)>(Te.streak||0)?ke:Te).streak||null}let ue=null,Ne=null,He=null;if(we.length>0){const Ee=we.reduce((Te,ke)=>ke.score>Te.score?ke:Te);ue=Ee.score,Ne=Ee.achievedAt,He=we.reduce((Te,ke)=>(ke.streak||0)>(Te.streak||0)?ke:Te).streak||null}return{colorBlitzBest:Ce,colorBlitzBestDate:O,colorBlitzBestStreak:q,coordinateSniperBest:X,coordinateSniperBestDate:J,coordinateSniperBestStreak:fe,voiceMoveMasterBest:ue,voiceMoveMasterBestDate:Ne,voiceMoveMasterBestStreak:He,totalSessions:W.length,recentSessions:W.slice(0,10)}}if(!Jt)return e;const S=`
      SELECT score as best_score, achieved_at
      FROM training_stats
      WHERE mode = 'color_blitz'
      ORDER BY score DESC
      LIMIT 1;
    `,C=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'color_blitz';
    `,N=`
      SELECT score as best_time, achieved_at
      FROM training_stats
      WHERE mode = 'coordinate_sniper'
      ORDER BY score ASC
      LIMIT 1;
    `,j=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'coordinate_sniper';
    `,R=`
      SELECT score as best_score, achieved_at
      FROM training_stats
      WHERE mode = 'voice_move_master'
      ORDER BY score DESC
      LIMIT 1;
    `,P=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'voice_move_master';
    `,D="SELECT COUNT(*) as total FROM training_stats;",I=`
      SELECT id, mode, score, streak, achieved_at as achievedAt
      FROM training_stats
      ORDER BY achieved_at DESC
      LIMIT 10;
    `,F=await Jt.query(S),L=await Jt.query(C),B=await Jt.query(N),H=await Jt.query(j),Q=await Jt.query(R),T=await Jt.query(P),$=await Jt.query(D),Y=await Jt.query(I);return{colorBlitzBest:((n=(t=F.values)==null?void 0:t[0])==null?void 0:n.best_score)||null,colorBlitzBestDate:((s=(r=F.values)==null?void 0:r[0])==null?void 0:s.achieved_at)||null,colorBlitzBestStreak:((a=(o=L.values)==null?void 0:o[0])==null?void 0:a.best_streak)||null,coordinateSniperBest:((c=(l=B.values)==null?void 0:l[0])==null?void 0:c.best_time)||null,coordinateSniperBestDate:((f=(u=B.values)==null?void 0:u[0])==null?void 0:f.achieved_at)||null,coordinateSniperBestStreak:((m=(h=H.values)==null?void 0:h[0])==null?void 0:m.best_streak)||null,voiceMoveMasterBest:((g=(y=Q.values)==null?void 0:y[0])==null?void 0:g.best_score)||null,voiceMoveMasterBestDate:((w=(p=Q.values)==null?void 0:p[0])==null?void 0:w.achieved_at)||null,voiceMoveMasterBestStreak:((v=(x=T.values)==null?void 0:x[0])==null?void 0:v.best_streak)||null,totalSessions:((k=(b=$.values)==null?void 0:b[0])==null?void 0:k.total)||0,recentSessions:Y.values||[]}}catch(S){return console.error("[TrainingStats] Failed to get stats:",S),e}}function DR(){return localStorage.getItem("blindfold_daily_goals")!=="false"}function BR(e){localStorage.setItem("blindfold_daily_goals",e?"true":"false")}function FR(){const[e,t]=d.useState(!1),[n,r]=d.useState("unknown"),[s,o]=d.useState(!1),[a,l]=d.useState(rj()),[c,u]=d.useState(gh),[f,h]=d.useState(DR()),{toast:m}=al();d.useEffect(()=>{e&&(dp().then(r),u(gh()))},[e]),d.useEffect(()=>{const b=()=>t(!1);return window.addEventListener("closeAllDialogs",b),()=>window.removeEventListener("closeAllDialogs",b)},[]);const y=async()=>{o(!0);try{const b=await dR();r(b.status)}finally{o(!1)}},g=b=>{l(b),sj(b)},p=()=>{mn.isNativePlatform()&&alert("To enable microphone access, please go to your device Settings > Apps > Blindfold Chess > Permissions > Microphone and select 'Allow'.")},x=(()=>{switch(n){case"granted":return{icon:hn,text:"Enabled",color:"text-green-500"};case"denied":case"prompt":return{icon:mo,text:"Not enabled",color:"text-muted-foreground"};case"prompt-with-rationale":return{icon:mo,text:"Blocked",color:"text-destructive"};default:return{icon:mo,text:"Unknown",color:"text-muted-foreground"}}})(),v=x.icon;return i.jsxs(Li,{open:e,onOpenChange:t,children:[i.jsx(tu,{asChild:!0,children:i.jsxs(re,{variant:"ghost",size:"icon","data-testid":"button-settings",children:[i.jsx(x2,{className:"h-5 w-5"}),i.jsx("span",{className:"sr-only",children:"Settings"})]})}),i.jsxs(Co,{className:"sm:max-w-md",children:[i.jsxs(jo,{children:[i.jsx(Eo,{children:"Settings"}),i.jsx(z1,{children:"Configure app preferences"})]}),i.jsxs("div",{className:"space-y-6 pt-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"font-semibold",children:"Notifications"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[a?i.jsx(t2,{className:"h-4 w-4 text-muted-foreground"}):i.jsx(e2,{className:"h-4 w-4 text-muted-foreground"}),i.jsx(Zt,{htmlFor:"toast-toggle",className:"text-sm",children:"Toast notifications"})]}),i.jsx(er,{id:"toast-toggle",checked:a,onCheckedChange:g,"data-testid":"switch-toast-notifications",className:"data-[state=checked]:bg-amber-400"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Show brief pop-up messages for game events"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"font-semibold",children:"Display"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(b2,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx(Zt,{htmlFor:"keep-awake-toggle",className:"text-sm",children:"Keep Screen Awake"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"Prevents auto-sleep during games"})]})]}),i.jsx(er,{id:"keep-awake-toggle",checked:c.keepAwakeEnabled,onCheckedChange:b=>{const k={...c,keepAwakeEnabled:b};u(k),vh(k),window.dispatchEvent(new CustomEvent("blindfoldSettingsChanged",{detail:k})),m({title:b?"Screen will stay active":"Screen may auto-sleep",description:b?"Screen will stay active during matches":"Normal screen timeout restored"})},"data-testid":"switch-keep-awake",className:"data-[state=checked]:bg-amber-400"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"font-semibold",children:"Training"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(pi,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx(Zt,{htmlFor:"daily-goals-toggle",className:"text-sm",children:"Daily Goals"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"Show daily training reminders"})]})]}),i.jsx(er,{id:"daily-goals-toggle",checked:f,onCheckedChange:b=>{h(b),BR(b),m({title:b?"Daily goals enabled":"Daily goals disabled",description:b?"You'll see training reminders":"Training reminders hidden"})},"data-testid":"switch-daily-goals",className:"data-[state=checked]:bg-amber-400"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"font-semibold",children:"Voice Control"}),i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(v,{className:`h-4 w-4 ${x.color}`}),i.jsxs("span",{className:"text-sm",children:["Microphone: ",i.jsx("span",{className:x.color,children:x.text})]})]})}),n==="granted"?i.jsx("p",{className:"text-xs text-muted-foreground",children:"Voice commands are ready to use"}):n==="prompt-with-rationale"?i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Microphone access was blocked. Voice control requires microphone permission for blindfold training."}),i.jsxs(re,{variant:"outline",size:"sm",onClick:p,className:"w-full","data-testid":"button-open-settings",children:[i.jsx(vc,{className:"h-3 w-3 mr-2"}),"Open Device Settings"]})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable microphone access for voice-controlled chess moves"}),i.jsxs(re,{variant:"outline",size:"sm",onClick:y,disabled:s,className:"w-full","data-testid":"button-request-mic",children:[i.jsx(hn,{className:"h-3 w-3 mr-2"}),s?"Requesting...":"Enable Microphone"]})]})]})]})]})]})}function zR(){const[e,t]=d.useState(!1);return d.useEffect(()=>{const n=()=>t(!1);return window.addEventListener("closeAllDialogs",n),()=>window.removeEventListener("closeAllDialogs",n)},[]),i.jsxs(Li,{open:e,onOpenChange:t,children:[i.jsx(tu,{asChild:!0,children:i.jsxs(re,{variant:"ghost",size:"icon","data-testid":"button-about",children:[i.jsx(m2,{className:"h-5 w-5"}),i.jsx("span",{className:"sr-only",children:"About"})]})}),i.jsxs(Co,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[i.jsx(jo,{children:i.jsx(Eo,{children:"About Blindfold Chess"})}),i.jsxs("div",{className:"space-y-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Privacy Policy"}),i.jsxs("p",{className:"text-muted-foreground",children:[i.jsx("strong",{children:"100% Offline & Private"}),"  This app is designed to be completely offline. We do not collect, store, or transmit any personal data, chess games, or voice recordings to external servers. All game history and settings are stored locally on your device."]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Open Source & Licenses"}),i.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Stockfish Chess Engine:"})," Licensed under the GNU GPL v3.",i.jsxs("a",{href:"https://stockfishchess.org",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 hover:underline ml-1 inline-flex items-center gap-1",children:["stockfishchess.org ",i.jsx(vc,{className:"h-3 w-3"})]})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"2D Chess Imagery:"}),' "Cburnett" piece set by Colin M.L. Burnett (CC BY-SA 3.0).']}),i.jsxs("li",{children:[i.jsx("strong",{children:"Capacitor Runtime:"})," Licensed under the MIT License."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Vosk Speech Recognition:"})," Offline voice recognition by Alpha Cephei, licensed under Apache 2.0.",i.jsxs("a",{href:"https://alphacephei.com/vosk",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 hover:underline ml-1 inline-flex items-center gap-1",children:["alphacephei.com/vosk ",i.jsx(vc,{className:"h-3 w-3"})]})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Project Links"}),i.jsx("div",{className:"flex flex-col gap-2",children:i.jsxs("a",{href:"https://github.com/official-stockfish/Stockfish",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 hover:underline inline-flex items-center gap-1",children:[i.jsx(vc,{className:"h-3 w-3"})," Stockfish Source Code"]})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Technical Info"}),i.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Engine:"})," Stockfish 17.1 (WASM)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Version:"})," 1.0.0"]}),i.jsxs("li",{className:"flex items-center gap-1",children:[i.jsx(aw,{className:"h-3 w-3"}),i.jsx("strong",{children:"Auto-Sleep:"})," Disabled during active games"]})]})]})]})]})]})}var db="AlertDialog",[VR,D4]=Ln(db,[b1]),Jr=b1(),fb=e=>{const{__scopeAlertDialog:t,...n}=e,r=Jr(t);return i.jsx(O1,{...r,...n,modal:!0})};fb.displayName=db;var qR="AlertDialogTrigger",WR=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Jr(n);return i.jsx(D1,{...s,...r,ref:t})});WR.displayName=qR;var UR="AlertDialogPortal",hb=e=>{const{__scopeAlertDialog:t,...n}=e,r=Jr(t);return i.jsx(B1,{...r,...n})};hb.displayName=UR;var HR="AlertDialogOverlay",mb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Jr(n);return i.jsx(op,{...s,...r,ref:t})});mb.displayName=HR;var wi="AlertDialogContent",[GR,KR]=VR(wi),QR=ky("AlertDialogContent"),pb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...s}=e,o=Jr(n),a=d.useRef(null),l=qe(t,a),c=d.useRef(null);return i.jsx(VT,{contentName:wi,titleName:gb,docsSlug:"alert-dialog",children:i.jsx(GR,{scope:n,cancelRef:c,children:i.jsxs(ip,{role:"alertdialog",...o,...s,ref:l,onOpenAutoFocus:ye(s.onOpenAutoFocus,u=>{var f;u.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(QR,{children:r}),i.jsx(XR,{contentRef:a})]})})})});pb.displayName=wi;var gb="AlertDialogTitle",vb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Jr(n);return i.jsx(ap,{...s,...r,ref:t})});vb.displayName=gb;var xb="AlertDialogDescription",yb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Jr(n);return i.jsx(lp,{...s,...r,ref:t})});yb.displayName=xb;var YR="AlertDialogAction",wb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Jr(n);return i.jsx(cp,{...s,...r,ref:t})});wb.displayName=YR;var bb="AlertDialogCancel",Sb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:s}=KR(bb,n),o=Jr(n),a=qe(t,s);return i.jsx(cp,{...o,...r,ref:a})});Sb.displayName=bb;var XR=({contentRef:e})=>{const t=`\`${wi}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${wi}\` by passing a \`${xb}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${wi}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},ZR=fb,JR=hb,kb=mb,Nb=pb,Cb=wb,jb=Sb,Eb=vb,Pb=yb;const Po=ZR,e_=JR,Tb=d.forwardRef(({className:e,...t},n)=>i.jsx(kb,{className:Ie("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Tb.displayName=kb.displayName;const Ls=d.forwardRef(({className:e,...t},n)=>i.jsxs(e_,{children:[i.jsx(Tb,{}),i.jsx(Nb,{ref:n,className:Ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Ls.displayName=Nb.displayName;const Is=({className:e,...t})=>i.jsx("div",{className:Ie("flex flex-col space-y-2 text-center sm:text-left",e),...t});Is.displayName="AlertDialogHeader";const $s=({className:e,...t})=>i.jsx("div",{className:Ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});$s.displayName="AlertDialogFooter";const Os=d.forwardRef(({className:e,...t},n)=>i.jsx(Eb,{ref:n,className:Ie("text-lg font-semibold",e),...t}));Os.displayName=Eb.displayName;const Ds=d.forwardRef(({className:e,...t},n)=>i.jsx(Pb,{ref:n,className:Ie("text-sm text-muted-foreground",e),...t}));Ds.displayName=Pb.displayName;const Bs=d.forwardRef(({className:e,...t},n)=>i.jsx(Cb,{ref:n,className:Ie(Ym(),e),...t}));Bs.displayName=Cb.displayName;const Fs=d.forwardRef(({className:e,...t},n)=>i.jsx(jb,{ref:n,className:Ie(Ym({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Fs.displayName=jb.displayName;var t_=d.createContext(void 0);function fl(e){const t=d.useContext(t_);return e||t||"ltr"}var Hd="rovingFocusGroup.onEntryFocus",n_={bubbles:!1,cancelable:!0},zu="RovingFocusGroup",[xh,Rb,r_]=_m(zu),[s_,_b]=Ln(zu,[r_]),[o_,i_]=s_(zu),Mb=d.forwardRef((e,t)=>i.jsx(xh.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(xh.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(a_,{...e,ref:t})})}));Mb.displayName=zu;var a_=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...h}=e,m=d.useRef(null),y=qe(t,m),g=fl(o),[p=null,w]=bo({prop:a,defaultProp:l,onChange:c}),[x,v]=d.useState(!1),b=Lt(u),k=Rb(n),S=d.useRef(!1),[C,N]=d.useState(0);return d.useEffect(()=>{const j=m.current;if(j)return j.addEventListener(Hd,b),()=>j.removeEventListener(Hd,b)},[b]),i.jsx(o_,{scope:n,orientation:r,dir:g,loop:s,currentTabStopId:p,onItemFocus:d.useCallback(j=>w(j),[w]),onItemShiftTab:d.useCallback(()=>v(!0),[]),onFocusableItemAdd:d.useCallback(()=>N(j=>j+1),[]),onFocusableItemRemove:d.useCallback(()=>N(j=>j-1),[]),children:i.jsx(Me.div,{tabIndex:x||C===0?-1:0,"data-orientation":r,...h,ref:y,style:{outline:"none",...e.style},onMouseDown:ye(e.onMouseDown,()=>{S.current=!0}),onFocus:ye(e.onFocus,j=>{const R=!S.current;if(j.target===j.currentTarget&&R&&!x){const P=new CustomEvent(Hd,n_);if(j.currentTarget.dispatchEvent(P),!P.defaultPrevented){const D=k().filter(H=>H.focusable),I=D.find(H=>H.active),F=D.find(H=>H.id===p),B=[I,F,...D].filter(Boolean).map(H=>H.ref.current);Ib(B,f)}}S.current=!1}),onBlur:ye(e.onBlur,()=>v(!1))})})}),Ab="RovingFocusGroupItem",Lb=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,...a}=e,l=Es(),c=o||l,u=i_(Ab,n),f=u.currentTabStopId===c,h=Rb(n),{onFocusableItemAdd:m,onFocusableItemRemove:y}=u;return d.useEffect(()=>{if(r)return m(),()=>y()},[r,m,y]),i.jsx(xh.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:i.jsx(Me.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:ye(e.onMouseDown,g=>{r?u.onItemFocus(c):g.preventDefault()}),onFocus:ye(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:ye(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const p=u_(g,u.orientation,u.dir);if(p!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let x=h().filter(v=>v.focusable).map(v=>v.ref.current);if(p==="last")x.reverse();else if(p==="prev"||p==="next"){p==="prev"&&x.reverse();const v=x.indexOf(g.currentTarget);x=u.loop?d_(x,v+1):x.slice(v+1)}setTimeout(()=>Ib(x))}})})})});Lb.displayName=Ab;var l_={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function c_(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function u_(e,t,n){const r=c_(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return l_[r]}function Ib(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function d_(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var f_=Mb,h_=Lb,pp="Tabs",[m_,B4]=Ln(pp,[_b]),$b=_b(),[p_,gp]=m_(pp),Ob=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:o,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=e,f=fl(l),[h,m]=bo({prop:r,onChange:s,defaultProp:o});return i.jsx(p_,{scope:n,baseId:Es(),value:h,onValueChange:m,orientation:a,dir:f,activationMode:c,children:i.jsx(Me.div,{dir:f,"data-orientation":a,...u,ref:t})})});Ob.displayName=pp;var Db="TabsList",Bb=d.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,o=gp(Db,n),a=$b(n);return i.jsx(f_,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:r,children:i.jsx(Me.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:t})})});Bb.displayName=Db;var Fb="TabsTrigger",zb=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...o}=e,a=gp(Fb,n),l=$b(n),c=Wb(a.baseId,r),u=Ub(a.baseId,r),f=r===a.value;return i.jsx(h_,{asChild:!0,...l,focusable:!s,active:f,children:i.jsx(Me.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...o,ref:t,onMouseDown:ye(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?a.onValueChange(r):h.preventDefault()}),onKeyDown:ye(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&a.onValueChange(r)}),onFocus:ye(e.onFocus,()=>{const h=a.activationMode!=="manual";!f&&!s&&h&&a.onValueChange(r)})})})});zb.displayName=Fb;var Vb="TabsContent",qb=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:o,...a}=e,l=gp(Vb,n),c=Wb(l.baseId,r),u=Ub(l.baseId,r),f=r===l.value,h=d.useRef(f);return d.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),i.jsx(xr,{present:s||f,children:({present:m})=>i.jsx(Me.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&o})})});qb.displayName=Vb;function Wb(e,t){return`${e}-trigger-${t}`}function Ub(e,t){return`${e}-content-${t}`}var g_=Ob,Hb=Bb,Gb=zb,Kb=qb;const hl=g_,Ki=d.forwardRef(({className:e,...t},n)=>i.jsx(Hb,{ref:n,className:Ie("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));Ki.displayName=Hb.displayName;const qn=d.forwardRef(({className:e,...t},n)=>i.jsx(Gb,{ref:n,className:Ie("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));qn.displayName=Gb.displayName;const oi=d.forwardRef(({className:e,...t},n)=>i.jsx(Kb,{ref:n,className:Ie("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));oi.displayName=Kb.displayName;const Ye=d.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Ie("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",e),...t}));Ye.displayName="Card";const _t=d.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Ie("flex flex-col space-y-1.5 p-6",e),...t}));_t.displayName="CardHeader";const Mt=d.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Ie("text-2xl font-semibold leading-none tracking-tight",e),...t}));Mt.displayName="CardTitle";const Ft=d.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Ie("text-sm text-muted-foreground",e),...t}));Ft.displayName="CardDescription";const et=d.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Ie("p-6 pt-0",e),...t}));et.displayName="CardContent";const v_=d.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Ie("flex items-center p-6 pt-0",e),...t}));v_.displayName="CardFooter";const x_=_u("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function Et({className:e,variant:t,...n}){return i.jsx("div",{className:Ie(x_({variant:t}),e),...n})}var vp="Progress",xp=100,[y_,F4]=Ln(vp),[w_,b_]=y_(vp),Qb=d.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:o=S_,...a}=e;(s||s===0)&&!Wv(s)&&console.error(k_(`${s}`,"Progress"));const l=Wv(s)?s:xp;r!==null&&!Uv(r,l)&&console.error(N_(`${r}`,"Progress"));const c=Uv(r,l)?r:null,u=au(c)?o(c,l):void 0;return i.jsx(w_,{scope:n,value:c,max:l,children:i.jsx(Me.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":au(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":Zb(c,l),"data-value":c??void 0,"data-max":l,...a,ref:t})})});Qb.displayName=vp;var Yb="ProgressIndicator",Xb=d.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=b_(Yb,n);return i.jsx(Me.div,{"data-state":Zb(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});Xb.displayName=Yb;function S_(e,t){return`${Math.round(e/t*100)}%`}function Zb(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function au(e){return typeof e=="number"}function Wv(e){return au(e)&&!isNaN(e)&&e>0}function Uv(e,t){return au(e)&&!isNaN(e)&&e<=t&&e>=0}function k_(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${xp}\`.`}function N_(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${xp} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Jb=Qb,C_=Xb;const bi=d.forwardRef(({className:e,value:t,...n},r)=>i.jsx(Jb,{ref:r,className:Ie("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...n,children:i.jsx(C_,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));bi.displayName=Jb.displayName;var j_="Separator",Hv="horizontal",E_=["horizontal","vertical"],eS=d.forwardRef((e,t)=>{const{decorative:n,orientation:r=Hv,...s}=e,o=P_(r)?r:Hv,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return i.jsx(Me.div,{"data-orientation":o,...l,...s,ref:t})});eS.displayName=j_;function P_(e){return E_.includes(e)}var tS=eS;const Pr=d.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>i.jsx(tS,{ref:s,decorative:n,orientation:t,className:Ie("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Pr.displayName=tS.displayName;function Gd({insight:e}){const t={info:i.jsx(tv,{className:"h-4 w-4"}),warning:i.jsx(k2,{className:"h-4 w-4"}),success:i.jsx(a2,{className:"h-4 w-4"}),tip:i.jsx(tv,{className:"h-4 w-4"})},n={info:"text-blue-500",warning:"text-amber-500",success:"text-green-500",tip:"text-purple-500"};return i.jsxs("div",{className:"flex gap-3 p-3 rounded-md bg-muted/50",children:[i.jsx("div",{className:n[e.type],children:t[e.type]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-sm font-medium",children:e.title}),i.jsx("p",{className:"text-xs text-muted-foreground",children:e.message})]})]})}function En({label:e,value:t,subValue:n}){return i.jsxs("div",{className:"flex items-center justify-between py-2",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:e}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"font-medium",children:t}),n&&i.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:n})]})]})}function T_({stats:e}){const t=["a","b","c","d","e","f","g","h"],n=["8","7","6","5","4","3","2","1"],r=s=>s===0?"bg-muted/30":s<25?"bg-amber-200 dark:bg-amber-900/40":s<50?"bg-amber-400 dark:bg-amber-700/60":s<75?"bg-red-400 dark:bg-red-700/70":"bg-red-600 dark:bg-red-600/80";return i.jsx("div",{className:"grid grid-cols-8 gap-0.5 aspect-square max-w-[200px] mx-auto",children:n.map(s=>t.map(o=>{const a=`${o}${s}`,l=_R(e,a);return i.jsx("div",{className:`aspect-square ${r(l)} rounded-sm flex items-center justify-center`,title:`${a.toUpperCase()}: ${e.squareInquiryHeatmap[a]||0} inquiries`,children:l>50&&i.jsx("span",{className:"text-[6px] text-white font-bold",children:a})},a)}))})}function R_(e){const t=Math.floor(e/1e3),n=Math.floor(e%1e3/100);return`${t}.${n}s`}function __({stats:e}){const t=d.useMemo(()=>LR(e),[e]),n=nb(e),r=TR(e),s=rb(e),o=sb(e),a=ob(e),l=PR(e),c=ib(e,5),[u,f]=d.useState(null);d.useEffect(()=>{iu().then(f);const g=()=>{iu().then(f)};return window.addEventListener("trainingStatsUpdated",g),()=>{window.removeEventListener("trainingStatsUpdated",g)}},[]);const h=t.filter(g=>g.category==="visualization"),m=t.filter(g=>g.category==="cognitive"),y=t.filter(g=>g.category==="tactical");return i.jsxs(hl,{defaultValue:"tactical",className:"w-full",children:[i.jsxs(Ki,{className:"grid w-full grid-cols-4 mb-4",children:[i.jsxs(qn,{value:"tactical",className:"flex items-center gap-1 text-xs",children:[i.jsx(pi,{className:"h-3 w-3"}),i.jsx("span",{className:"hidden sm:inline",children:"Tactics"})]}),i.jsxs(qn,{value:"cognitive",className:"flex items-center gap-1 text-xs",children:[i.jsx(Yy,{className:"h-3 w-3"}),i.jsx("span",{className:"hidden sm:inline",children:"Mind"})]}),i.jsxs(qn,{value:"visualization",className:"flex items-center gap-1 text-xs",children:[i.jsx(rw,{className:"h-3 w-3"}),i.jsx("span",{className:"hidden sm:inline",children:"Vision"})]}),i.jsxs(qn,{value:"training",className:"flex items-center gap-1 text-xs",children:[i.jsx(nw,{className:"h-3 w-3"}),i.jsx("span",{className:"hidden sm:inline",children:"Training"})]})]}),i.jsxs(oi,{value:"visualization",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsxs(Mt,{className:"text-sm flex items-center gap-2",children:[i.jsx(Vn,{className:"h-4 w-4 text-amber-500"}),"Visualization Ceiling"]}),i.jsx(Ft,{className:"text-xs",children:"The strongest opponent you've beaten without peeking at the board"})]}),i.jsx(et,{children:e.visualizationCeiling>0?i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-3xl font-bold text-amber-500",children:e.visualizationCeiling}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Highest Elo beaten without peeking"}),e.visualizationCeilingElo&&i.jsxs(Et,{variant:"outline",className:"mt-2",children:[e.visualizationCeilingElo," Elo"]})]}):i.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Beat a bot without peeking to set your ceiling!"})})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsx(Mt,{className:"text-sm",children:"Peek-Free Progress"}),i.jsx(Ft,{className:"text-xs",children:"How often you complete games without looking at the board"})]}),i.jsxs(et,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-2xl font-bold",children:[n,"%"]}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.totalPeekFreeGames," of ",e.blindfoldGamesPlayed||0," blindfold games"]})]}),i.jsx(bi,{value:n,className:"h-2"}),i.jsx(Pr,{}),i.jsx(En,{label:"Best Peek-Free Streak",value:`${e.bestPeekFreeGameStreak} games`}),i.jsx(En,{label:"Best Peek-Free Moves",value:e.bestPeekFreeStreak,subValue:"in a single game"})]})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsx(Mt,{className:"text-sm",children:"Reconstruction by Game Length"}),i.jsx(Ft,{className:"text-xs",children:"How well you remember the board position as games get longer"})]}),i.jsx(et,{className:"space-y-2",children:i.jsx("div",{className:"space-y-2",children:[{label:"10 moves",value:o.moves10},{label:"11-20 moves",value:o.moves20},{label:"21-30 moves",value:o.moves30},{label:"31-40 moves",value:o.moves40},{label:"40+ moves",value:o.moves50plus}].map(({label:g,value:p})=>i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-xs text-muted-foreground w-20",children:g}),i.jsx(bi,{value:p,className:"flex-1 h-2"}),i.jsx("span",{className:"text-xs font-medium w-10 text-right",children:p>0?`${p}%`:"-"})]},g))})})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsxs(Mt,{className:"text-sm flex items-center gap-2",children:[i.jsx(sw,{className:"h-4 w-4"}),"Confusion Heatmap"]}),i.jsx(Ft,{className:"text-xs",children:'Squares you inquire about most often - your mental "blind spots"'})]}),i.jsx(et,{children:e.totalSquareInquiries>0?i.jsxs(i.Fragment,{children:[i.jsx(T_,{stats:e}),i.jsx("p",{className:"text-xs text-muted-foreground text-center mt-3",children:"Red = frequently forgotten, Gray = clear"}),c.length>0&&i.jsxs("div",{className:"mt-4 space-y-1",children:[i.jsx("p",{className:"text-xs font-medium",children:"Top Blind Spots:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:c.map(({square:g,count:p})=>i.jsxs(Et,{variant:"secondary",className:"text-xs",children:[g.toUpperCase()," (",p,")"]},g))})]})]}):i.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Ask about squares during games to see which ones you forget!"})})]}),h.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-sm font-medium",children:"Insights"}),h.map((g,p)=>i.jsx(Gd,{insight:g},p))]})]}),i.jsxs(oi,{value:"cognitive",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsxs(Mt,{className:"text-sm flex items-center gap-2",children:["Endgame Drift",e.lastGameEndgameDrift>30?i.jsx(fw,{className:"h-4 w-4 text-red-500"}):i.jsx(hw,{className:"h-4 w-4 text-green-500"})]}),i.jsx(Ft,{className:"text-xs",children:'Slowing down late-game may indicate "mental blur" from fewer pieces'})]}),i.jsxs(et,{children:[i.jsx("div",{className:"text-center",children:i.jsx("p",{className:`text-3xl font-bold ${e.lastGameEndgameDrift>30?"text-red-500":"text-green-500"}`,children:e.lastGameEndgameDrift>0?`+${e.lastGameEndgameDrift}%`:"0%"})}),e.lastGameEndgameDrift>50&&i.jsx("p",{className:"text-xs text-amber-500 text-center mt-3",children:'High drift may indicate "mental blur" - difficulty tracking fewer pieces'})]})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsx(Mt,{className:"text-sm",children:"Voice Accuracy"}),i.jsx(Ft,{className:"text-xs",children:"How often your voice commands are understood correctly"})]}),i.jsxs(et,{children:[i.jsx(En,{label:"Total Voice Commands",value:e.voiceCommandsTotal}),i.jsx(En,{label:"Corrections Needed",value:e.voiceCorrections}),i.jsx(En,{label:"Correction Rate",value:`${a}%`}),i.jsx(En,{label:"Last Game Corrections",value:e.lastGameVoiceCorrections})]})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsx(Mt,{className:"text-sm",children:"Mental Clarity"}),i.jsx(Ft,{className:"text-xs",children:"Moments when you took much longer than usual - may indicate confusion"})]}),i.jsx(et,{children:i.jsx(En,{label:"Mental Blur Events",value:e.mentalBlurCount})})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsx(Mt,{className:"text-sm",children:"Voice vs Touch"}),i.jsx(Ft,{className:"text-xs",children:"How you input your moves during games"})]}),i.jsx(et,{children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4 text-blue-500"}),i.jsxs("span",{className:"font-medium",children:[r.voice,"%"]})]}),i.jsx("div",{className:"flex-1 h-2 bg-muted rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-blue-500",style:{width:`${r.voice}%`}})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"font-medium",children:[r.touch,"%"]}),i.jsx(u2,{className:"h-4 w-4 text-orange-500"})]})]})})]}),m.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-sm font-medium",children:"Insights"}),m.map((g,p)=>i.jsx(Gd,{insight:g},p))]})]}),i.jsxs(oi,{value:"tactical",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsx(Mt,{className:"text-sm",children:"Overall Record"}),i.jsx(Ft,{className:"text-xs",children:"Your wins, draws, and losses across all games"})]}),i.jsxs(et,{children:[i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.wins}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Wins"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-2xl font-bold text-gray-500",children:e.draws}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Draws"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-2xl font-bold text-red-600",children:e.losses}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Losses"})]})]}),i.jsxs("p",{className:"text-xs text-muted-foreground text-center mt-3",children:[e.blindfoldGamesPlayed||0," of ",e.totalGamesPlayed," games were blindfold"]}),i.jsx(Pr,{className:"my-4"}),i.jsx(En,{label:"Current Win Streak",value:e.currentWinStreak}),i.jsx(En,{label:"Best Win Streak",value:e.bestWinStreak}),i.jsx(En,{label:"Fastest Win",value:e.fastestWin>0?`${e.fastestWin} moves`:"-"}),i.jsx(En,{label:"Longest Game",value:e.longestGame>0?`${e.longestGame} moves`:"-"})]})]}),e.stockfishThresholdElo&&i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsxs(Mt,{className:"text-sm flex items-center gap-2",children:[i.jsx(pi,{className:"h-4 w-4 text-amber-500"}),"Stockfish Threshold"]}),i.jsx(Ft,{className:"text-xs",children:"The difficulty level where your win rate starts dropping"})]}),i.jsx(et,{children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-3xl font-bold text-amber-500",children:e.stockfishThresholdElo}),i.jsxs(Et,{variant:"outline",className:"mt-2",children:[e.stockfishThresholdElo," Elo"]})]})})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsxs(Mt,{className:"text-sm flex items-center gap-2",children:[i.jsx(ho,{className:"h-4 w-4"}),"Mean Response Time"]}),i.jsx(Ft,{className:"text-xs",children:"How quickly you find moves - faster often means clearer visualization"})]}),i.jsxs(et,{children:[i.jsx("div",{className:"text-center mb-4",children:i.jsx("p",{className:"text-3xl font-bold",children:si(l)})}),i.jsx(Pr,{className:"my-4"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"By Game Phase"}),i.jsx(En,{label:"Opening (moves 1-10)",value:si(s.opening)}),i.jsx(En,{label:"Middlegame (moves 11-30)",value:si(s.middlegame)}),i.jsx(En,{label:"Endgame (moves 31+)",value:si(s.endgame)})]})]})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsx(Mt,{className:"text-sm",children:"Win Rate by Rating"}),i.jsx(Ft,{className:"text-xs",children:"Your success rate at each Elo level"})]}),i.jsx(et,{children:i.jsx("div",{className:"space-y-2",children:fp.map(g=>{const p=e.tierStats[g],w=MR(e,g),x=(p==null?void 0:p.totalGames)||0;return x===0?null:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-xs text-muted-foreground w-24 truncate",children:[g," Elo"]}),i.jsx(bi,{value:w,className:"flex-1 h-2"}),i.jsxs("span",{className:"text-xs font-medium w-16 text-right",children:[w,"% (",x,"g)"]})]},g)})})})]}),y.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-sm font-medium",children:"Insights"}),y.map((g,p)=>i.jsx(Gd,{insight:g},p))]})]}),i.jsxs(oi,{value:"training",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsxs(Mt,{className:"text-sm flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4 text-purple-500"}),"Voice Move Master"]}),i.jsx(Ft,{className:"text-xs",children:"Announce chess moves by voice"})]}),i.jsx(et,{children:u&&u.voiceMoveMasterBest!==null?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Personal Best"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Vn,{className:"h-4 w-4 text-purple-500"}),i.jsx("span",{className:"text-2xl font-bold text-purple-500",children:u.voiceMoveMasterBest}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"moves"})]})]}),u.voiceMoveMasterBestStreak!==null&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Streak"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Rd,{className:"h-4 w-4 text-orange-500"}),i.jsx("span",{className:"text-lg font-bold text-orange-500",children:u.voiceMoveMasterBestStreak}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"in a row"})]})]}),u.voiceMoveMasterBestDate&&i.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:["Achieved ",new Date(u.voiceMoveMasterBestDate).toLocaleDateString()]}),u.voiceMoveMasterBest>=15?i.jsx(Et,{className:"bg-purple-500 text-white",children:"Gold Tier"}):u.voiceMoveMasterBest>=8?i.jsx(Et,{variant:"secondary",children:"Silver Tier"}):i.jsx(Et,{variant:"outline",children:"Bronze Tier"})]}):i.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete a Voice Move Master session to set your first record!"})})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsxs(Mt,{className:"text-sm flex items-center gap-2",children:[i.jsx(Om,{className:"h-4 w-4 text-amber-500"}),"Color Blitz"]}),i.jsx(Ft,{className:"text-xs",children:"Name square colors in 60 seconds"})]}),i.jsx(et,{children:u&&u.colorBlitzBest!==null?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Personal Best"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Vn,{className:"h-4 w-4 text-amber-500"}),i.jsx("span",{className:"text-2xl font-bold text-amber-500",children:u.colorBlitzBest}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"correct"})]})]}),u.colorBlitzBestStreak!==null&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Streak"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Rd,{className:"h-4 w-4 text-orange-500"}),i.jsx("span",{className:"text-lg font-bold text-orange-500",children:u.colorBlitzBestStreak}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"in a row"})]})]}),u.colorBlitzBestDate&&i.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:["Achieved ",new Date(u.colorBlitzBestDate).toLocaleDateString()]}),u.colorBlitzBest>=40?i.jsx(Et,{className:"bg-amber-500 text-white",children:"Gold Tier"}):u.colorBlitzBest>=20?i.jsx(Et,{variant:"secondary",children:"Silver Tier"}):i.jsx(Et,{variant:"outline",children:"Bronze Tier"})]}):i.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete a Color Blitz session to set your first record!"})})]}),i.jsxs(Ye,{children:[i.jsxs(_t,{className:"pb-2",children:[i.jsxs(Mt,{className:"text-sm flex items-center gap-2",children:[i.jsx(pi,{className:"h-4 w-4 text-blue-500"}),"Coordinate Sniper"]}),i.jsx(Ft,{className:"text-xs",children:"Find 10 squares as fast as possible"})]}),i.jsx(et,{children:u&&u.coordinateSniperBest!==null?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Personal Best"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Vn,{className:"h-4 w-4 text-blue-500"}),i.jsx("span",{className:"text-2xl font-bold text-blue-500",children:R_(u.coordinateSniperBest)})]})]}),u.coordinateSniperBestStreak!==null&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Streak"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Rd,{className:"h-4 w-4 text-orange-500"}),i.jsx("span",{className:"text-lg font-bold text-orange-500",children:u.coordinateSniperBestStreak}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"in a row"})]})]}),u.coordinateSniperBestDate&&i.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:["Achieved ",new Date(u.coordinateSniperBestDate).toLocaleDateString()]}),u.coordinateSniperBest<=1e4?i.jsx(Et,{className:"bg-blue-500 text-white",children:"Gold Tier"}):u.coordinateSniperBest<=2e4?i.jsx(Et,{variant:"secondary",children:"Silver Tier"}):i.jsx(Et,{variant:"outline",children:"Bronze Tier"})]}):i.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete a Coordinate Sniper session to set your first record!"})})]})]})]})}function M_(e){return e!==null?{comment:e,variations:[]}:{variations:[]}}function A_(e,t,n,r,s){const o={move:e,variations:s};return t&&(o.suffix=t),n&&(o.nag=n),r!==null&&(o.comment=r),o}function L_(...e){const[t,...n]=e;let r=t;for(const s of n)s!==null&&(r.variations=[s,...s.variations],s.variations=[],r=s);return t}function I_(e,t){if(t.marker&&t.marker.comment){let n=t.root;for(;;){const r=n.variations[0];if(!r){n.comment=t.marker.comment;break}n=r}}return{headers:e,root:t.root,result:(t.marker&&t.marker.result)??void 0}}function $_(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function Oi(e,t,n,r){var s=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(s,Oi.prototype),s.expected=t,s.found=n,s.location=r,s.name="SyntaxError",s}$_(Oi,Error);function Kd(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,n+=n.repeat(t),e+n.slice(0,t))}Oi.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n=null,r;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){n=e[r].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,a=this.location.source+":"+o.line+":"+o.column;if(n){var l=this.location.end,c=Kd("",o.line.toString().length," "),u=n[s.line-1],f=s.line===l.line?l.column:u.length+1,h=f-s.column||1;t+=`
 --> `+a+`
`+c+` |
`+o.line+" | "+u+`
`+c+" | "+Kd("",s.column-1," ")+Kd("",h,"^")}else t+=`
 at `+a}return t};Oi.buildMessage=function(e,t){var n={literal:function(u){return'"'+s(u.text)+'"'},class:function(u){var f=u.parts.map(function(h){return Array.isArray(h)?o(h[0])+"-"+o(h[1]):o(h)});return"["+(u.inverted?"^":"")+f.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(u){return u.description}};function r(u){return u.charCodeAt(0).toString(16).toUpperCase()}function s(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(f){return"\\x0"+r(f)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(f){return"\\x"+r(f)})}function o(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(f){return"\\x0"+r(f)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(f){return"\\x"+r(f)})}function a(u){return n[u.type](u)}function l(u){var f=u.map(a),h,m;if(f.sort(),f.length>0){for(h=1,m=1;h<f.length;h++)f[h-1]!==f[h]&&(f[m]=f[h],m++);f.length=m}switch(f.length){case 1:return f[0];case 2:return f[0]+" or "+f[1];default:return f.slice(0,-1).join(", ")+", or "+f[f.length-1]}}function c(u){return u?'"'+s(u)+'"':"end of input"}return"Expected "+l(e)+" but "+c(t)+" found."};function O_(e,t){t=t!==void 0?t:{};var n={},r=t.grammarSource,s={pgn:ns},o=ns,a="[",l='"',c="]",u=".",f="O-O-O",h="O-O",m="0-0-0",y="0-0",g="$",p="{",w="}",x=";",v="(",b=")",k="1-0",S="0-1",C="1/2-1/2",N="*",j=/^[a-zA-Z]/,R=/^[^"]/,P=/^[0-9]/,D=/^[.]/,I=/^[a-zA-Z1-8\-=]/,F=/^[+#]/,L=/^[!?]/,B=/^[^}]/,H=/^[^\r\n]/,Q=/^[ \t\r\n]/,T=vn("tag pair"),$=It("[",!1),Y=It('"',!1),W=It("]",!1),ge=vn("tag name"),xe=Tt([["a","z"],["A","Z"]],!1,!1),we=vn("tag value"),Ce=Tt(['"'],!0,!1),O=vn("move number"),q=Tt([["0","9"]],!1,!1),X=It(".",!1),J=Tt(["."],!1,!1),fe=vn("standard algebraic notation"),ue=It("O-O-O",!1),Ne=It("O-O",!1),He=It("0-0-0",!1),Ee=It("0-0",!1),$e=Tt([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Te=Tt(["+","#"],!1,!1),ke=vn("suffix annotation"),ut=Tt(["!","?"],!1,!1),vt=vn("NAG"),nn=It("$",!1),V=vn("brace comment"),U=It("{",!1),de=Tt(["}"],!0,!1),he=It("}",!1),le=vn("rest of line comment"),Fe=It(";",!1),Ae=Tt(["\r",`
`],!0,!1),Re=vn("variation"),st=It("(",!1),rn=It(")",!1),Xe=vn("game termination marker"),Qt=It("1-0",!1),sn=It("0-1",!1),Qn=It("1/2-1/2",!1),In=It("*",!1),on=vn("whitespace"),bt=Tt([" ","	","\r",`
`],!1,!1),ir=function(E,A){return I_(E,A)},gn=function(E){return Object.fromEntries(E)},es=function(E,A){return[E,A]},Lo=function(E,A){return{root:E,marker:A}},wr=function(E,A){return L_(M_(E),...A.flat())},jn=function(E,A,M,me,Se){return A_(E,A,M,me,Se)},Io=function(E){return E},De=function(E){return E.replace(/[\r\n]+/g," ")},vl=function(E){return E.trim()},Qu=function(E){return E},Zi=function(E,A){return{result:E,comment:A}},_=t.peg$currPos|0,ze=[{line:1,column:1}],lt=_,$n=t.peg$maxFailExpected||[],G=t.peg$silentFails|0,Gs;if(t.startRule){if(!(t.startRule in s))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');o=s[t.startRule]}function It(E,A){return{type:"literal",text:E,ignoreCase:A}}function Tt(E,A,M){return{type:"class",parts:E,inverted:A,ignoreCase:M}}function ts(){return{type:"end"}}function vn(E){return{type:"other",description:E}}function Ks(E){var A=ze[E],M;if(A)return A;if(E>=ze.length)M=ze.length-1;else for(M=E;!ze[--M];);for(A=ze[M],A={line:A.line,column:A.column};M<E;)e.charCodeAt(M)===10?(A.line++,A.column=1):A.column++,M++;return ze[E]=A,A}function Yn(E,A,M){var me=Ks(E),Se=Ks(A),nt={source:r,start:{offset:E,line:me.line,column:me.column},end:{offset:A,line:Se.line,column:Se.column}};return nt}function be(E){_<lt||(_>lt&&(lt=_,$n=[]),$n.push(E))}function $o(E,A,M){return new Oi(Oi.buildMessage(E,A),E,A,M)}function ns(){var E,A,M;return E=_,A=Ji(),M=Oo(),E=ir(A,M),E}function Ji(){var E,A,M;for(E=_,A=[],M=Qs();M!==n;)A.push(M),M=Qs();return M=Dt(),E=gn(A),E}function Qs(){var E,A,M,me,Se,nt,Or;return G++,E=_,Dt(),e.charCodeAt(_)===91?(A=a,_++):(A=n,G===0&&be($)),A!==n?(Dt(),M=Ys(),M!==n?(Dt(),e.charCodeAt(_)===34?(me=l,_++):(me=n,G===0&&be(Y)),me!==n?(Se=xl(),e.charCodeAt(_)===34?(nt=l,_++):(nt=n,G===0&&be(Y)),nt!==n?(Dt(),e.charCodeAt(_)===93?(Or=c,_++):(Or=n,G===0&&be(W)),Or!==n?E=es(M,Se):(_=E,E=n)):(_=E,E=n)):(_=E,E=n)):(_=E,E=n)):(_=E,E=n),G--,E===n&&G===0&&be(T),E}function Ys(){var E,A,M;if(G++,E=_,A=[],M=e.charAt(_),j.test(M)?_++:(M=n,G===0&&be(xe)),M!==n)for(;M!==n;)A.push(M),M=e.charAt(_),j.test(M)?_++:(M=n,G===0&&be(xe));else A=n;return A!==n?E=e.substring(E,_):E=A,G--,E===n&&(A=n,G===0&&be(ge)),E}function xl(){var E,A,M;for(G++,E=_,A=[],M=e.charAt(_),R.test(M)?_++:(M=n,G===0&&be(Ce));M!==n;)A.push(M),M=e.charAt(_),R.test(M)?_++:(M=n,G===0&&be(Ce));return E=e.substring(E,_),G--,A=n,G===0&&be(we),E}function Oo(){var E,A,M;return E=_,A=Xn(),Dt(),M=Ju(),M===n&&(M=null),Dt(),E=Lo(A,M),E}function Xn(){var E,A,M,me;for(E=_,A=ea(),A===n&&(A=null),M=[],me=rs();me!==n;)M.push(me),me=rs();return E=wr(A,M),E}function rs(){var E,A,M,me,Se,nt,Or,Sr;if(E=_,Dt(),Do(),Dt(),A=br(),A!==n){for(M=Yu(),M===n&&(M=null),me=[],Se=$r();Se!==n;)me.push(Se),Se=$r();for(Se=Dt(),nt=ea(),nt===n&&(nt=null),Or=[],Sr=yl();Sr!==n;)Or.push(Sr),Sr=yl();E=jn(A,M,me,nt,Or)}else _=E,E=n;return E}function Do(){var E,A,M,me,Se,nt;for(G++,E=_,A=[],M=e.charAt(_),P.test(M)?_++:(M=n,G===0&&be(q));M!==n;)A.push(M),M=e.charAt(_),P.test(M)?_++:(M=n,G===0&&be(q));if(e.charCodeAt(_)===46?(M=u,_++):(M=n,G===0&&be(X)),M!==n){for(me=Dt(),Se=[],nt=e.charAt(_),D.test(nt)?_++:(nt=n,G===0&&be(J));nt!==n;)Se.push(nt),nt=e.charAt(_),D.test(nt)?_++:(nt=n,G===0&&be(J));A=[A,M,me,Se],E=A}else _=E,E=n;return G--,E===n&&(A=n,G===0&&be(O)),E}function br(){var E,A,M,me,Se,nt;if(G++,E=_,A=_,e.substr(_,5)===f?(M=f,_+=5):(M=n,G===0&&be(ue)),M===n&&(e.substr(_,3)===h?(M=h,_+=3):(M=n,G===0&&be(Ne)),M===n&&(e.substr(_,5)===m?(M=m,_+=5):(M=n,G===0&&be(He)),M===n&&(e.substr(_,3)===y?(M=y,_+=3):(M=n,G===0&&be(Ee)),M===n))))if(M=_,me=e.charAt(_),j.test(me)?_++:(me=n,G===0&&be(xe)),me!==n){if(Se=[],nt=e.charAt(_),I.test(nt)?_++:(nt=n,G===0&&be($e)),nt!==n)for(;nt!==n;)Se.push(nt),nt=e.charAt(_),I.test(nt)?_++:(nt=n,G===0&&be($e));else Se=n;Se!==n?(me=[me,Se],M=me):(_=M,M=n)}else _=M,M=n;return M!==n?(me=e.charAt(_),F.test(me)?_++:(me=n,G===0&&be(Te)),me===n&&(me=null),M=[M,me],A=M):(_=A,A=n),A!==n?E=e.substring(E,_):E=A,G--,E===n&&(A=n,G===0&&be(fe)),E}function Yu(){var E,A,M;for(G++,E=_,A=[],M=e.charAt(_),L.test(M)?_++:(M=n,G===0&&be(ut));M!==n;)A.push(M),A.length>=2?M=n:(M=e.charAt(_),L.test(M)?_++:(M=n,G===0&&be(ut)));return A.length<1?(_=E,E=n):E=A,G--,E===n&&(A=n,G===0&&be(ke)),E}function $r(){var E,A,M,me,Se;if(G++,E=_,Dt(),e.charCodeAt(_)===36?(A=g,_++):(A=n,G===0&&be(nn)),A!==n){if(M=_,me=[],Se=e.charAt(_),P.test(Se)?_++:(Se=n,G===0&&be(q)),Se!==n)for(;Se!==n;)me.push(Se),Se=e.charAt(_),P.test(Se)?_++:(Se=n,G===0&&be(q));else me=n;me!==n?M=e.substring(M,_):M=me,M!==n?E=Io(M):(_=E,E=n)}else _=E,E=n;return G--,E===n&&G===0&&be(vt),E}function ea(){var E;return E=Xu(),E===n&&(E=Zu()),E}function Xu(){var E,A,M,me,Se;if(G++,E=_,e.charCodeAt(_)===123?(A=p,_++):(A=n,G===0&&be(U)),A!==n){for(M=_,me=[],Se=e.charAt(_),B.test(Se)?_++:(Se=n,G===0&&be(de));Se!==n;)me.push(Se),Se=e.charAt(_),B.test(Se)?_++:(Se=n,G===0&&be(de));M=e.substring(M,_),e.charCodeAt(_)===125?(me=w,_++):(me=n,G===0&&be(he)),me!==n?E=De(M):(_=E,E=n)}else _=E,E=n;return G--,E===n&&(A=n,G===0&&be(V)),E}function Zu(){var E,A,M,me,Se;if(G++,E=_,e.charCodeAt(_)===59?(A=x,_++):(A=n,G===0&&be(Fe)),A!==n){for(M=_,me=[],Se=e.charAt(_),H.test(Se)?_++:(Se=n,G===0&&be(Ae));Se!==n;)me.push(Se),Se=e.charAt(_),H.test(Se)?_++:(Se=n,G===0&&be(Ae));M=e.substring(M,_),E=vl(M)}else _=E,E=n;return G--,E===n&&(A=n,G===0&&be(le)),E}function yl(){var E,A,M,me;return G++,E=_,Dt(),e.charCodeAt(_)===40?(A=v,_++):(A=n,G===0&&be(st)),A!==n?(M=Xn(),M!==n?(Dt(),e.charCodeAt(_)===41?(me=b,_++):(me=n,G===0&&be(rn)),me!==n?E=Qu(M):(_=E,E=n)):(_=E,E=n)):(_=E,E=n),G--,E===n&&G===0&&be(Re),E}function Ju(){var E,A,M;return G++,E=_,e.substr(_,3)===k?(A=k,_+=3):(A=n,G===0&&be(Qt)),A===n&&(e.substr(_,3)===S?(A=S,_+=3):(A=n,G===0&&be(sn)),A===n&&(e.substr(_,7)===C?(A=C,_+=7):(A=n,G===0&&be(Qn)),A===n&&(e.charCodeAt(_)===42?(A=N,_++):(A=n,G===0&&be(In))))),A!==n?(Dt(),M=ea(),M===n&&(M=null),E=Zi(A,M)):(_=E,E=n),G--,E===n&&(A=n,G===0&&be(Xe)),E}function Dt(){var E,A;for(G++,E=[],A=e.charAt(_),Q.test(A)?_++:(A=n,G===0&&be(bt));A!==n;)E.push(A),A=e.charAt(_),Q.test(A)?_++:(A=n,G===0&&be(bt));return G--,A=n,G===0&&be(on),E}if(Gs=o(),t.peg$library)return{peg$result:Gs,peg$currPos:_,peg$FAILED:n,peg$maxFailExpected:$n,peg$maxFailPos:lt};if(Gs!==n&&_===e.length)return Gs;throw Gs!==n&&_<e.length&&be(ts()),$o($n,lt<e.length?e.charAt(lt):null,lt<e.length?Yn(lt,lt+1):Yn(lt,lt))}/**
 * @license
 * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const Sc=0xffffffffffffffffn;function Qd(e,t){return(e<<t|e>>64n-t)&0xffffffffffffffffn}function Gv(e,t){return e*t&Sc}function D_(e){return function(){let t=BigInt(e&Sc),n=BigInt(e>>64n&Sc);const r=Gv(Qd(Gv(t,5n),7n),9n);return n^=t,t=(Qd(t,24n)^n^n<<16n)&Sc,n=Qd(n,37n),e=n<<64n|t,r}}const Vu=D_(0xa187eb39cdcaed8f31c4b365b102e01en),B_=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>Vu()))),F_=Array.from({length:8},()=>Vu()),z_=Array.from({length:16},()=>Vu()),Yd=Vu(),dn="w",Dn="b",$t="p",yh="n",kc="b",ba="r",hs="q",Bt="k",Xd="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Xl{constructor(t,n){xt(this,"color");xt(this,"from");xt(this,"to");xt(this,"piece");xt(this,"captured");xt(this,"promotion");xt(this,"flags");xt(this,"san");xt(this,"lan");xt(this,"before");xt(this,"after");const{color:r,piece:s,from:o,to:a,flags:l,captured:c,promotion:u}=n,f=Ut(o),h=Ut(a);this.color=r,this.piece=s,this.from=f,this.to=h,this.san=t._moveToSan(n,t._moves({legal:!0})),this.lan=f+h,this.before=t.fen(),t._makeMove(n),this.after=t.fen(),t._undoMove(),this.flags="";for(const m in Oe)Oe[m]&l&&(this.flags+=no[m]);c&&(this.captured=c),u&&(this.promotion=u,this.lan+=u)}isCapture(){return this.flags.indexOf(no.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(no.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(no.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(no.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(no.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(no.BIG_PAWN)>-1}}const Yt=-1,no={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},Oe={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},wh={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},V_={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},q_={...wh,...V_},Le={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Zd={b:[16,32,17,15],w:[-16,-32,-17,-15]},Kv={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},W_=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],U_=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],H_={p:1,n:2,b:4,r:8,q:16,k:32},G_="pnbrqkPNBRQK",Qv=[yh,kc,ba,hs],K_=7,Q_=6,Y_=1,X_=0,Zl={[Bt]:Oe.KSIDE_CASTLE,[hs]:Oe.QSIDE_CASTLE},ls={w:[{square:Le.a1,flag:Oe.QSIDE_CASTLE},{square:Le.h1,flag:Oe.KSIDE_CASTLE}],b:[{square:Le.a8,flag:Oe.QSIDE_CASTLE},{square:Le.h8,flag:Oe.KSIDE_CASTLE}]},Z_={b:Y_,w:Q_},Jd="--";function po(e){return e>>4}function el(e){return e&15}function nS(e){return"0123456789".indexOf(e)!==-1}function Ut(e){const t=el(e),n=po(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function pa(e){return e===dn?Dn:dn}function J_(e){const t=e.split(/\s+/);if(t.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(t[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(t[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const s=t[0].split("/");if(s.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let a=0;a<s.length;a++){let l=0,c=!1;for(let u=0;u<s[a].length;u++)if(nS(s[a][u])){if(c)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};l+=parseInt(s[a][u],10),c=!0}else{if(!/^[prnbqkPRNBQK]$/.test(s[a][u]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};l+=1,c=!1}if(l!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(t[3][1]=="3"&&t[1]=="w"||t[3][1]=="6"&&t[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const o=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:a,regex:l}of o){if(!l.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${a} king`};if((t[0].match(l)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${a} kings`}}return Array.from(s[0]+s[7]).some(a=>a.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function eM(e,t){const n=e.from,r=e.to,s=e.piece;let o=0,a=0,l=0;for(let c=0,u=t.length;c<u;c++){const f=t[c].from,h=t[c].to,m=t[c].piece;s===m&&n!==f&&r===h&&(o++,po(n)===po(f)&&a++,el(n)===el(f)&&l++)}return o>0?a>0&&l>0?Ut(n):l>0?Ut(n).charAt(1):Ut(n).charAt(0):""}function cs(e,t,n,r,s,o=void 0,a=Oe.NORMAL){const l=po(r);if(s===$t&&(l===K_||l===X_))for(let c=0;c<Qv.length;c++){const u=Qv[c];e.push({color:t,from:n,to:r,piece:s,captured:o,promotion:u,flags:a|Oe.PROMOTION})}else e.push({color:t,from:n,to:r,piece:s,captured:o,flags:a})}function Yv(e){let t=e.charAt(0);return t>="a"&&t<="h"?e.match(/[a-h]\d.*[a-h]\d/)?void 0:$t:(t=t.toLowerCase(),t==="o"?Bt:t)}function ef(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class Mr{constructor(t=Xd,{skipValidation:n=!1}={}){xt(this,"_board",new Array(128));xt(this,"_turn",dn);xt(this,"_header",{});xt(this,"_kings",{w:Yt,b:Yt});xt(this,"_epSquare",-1);xt(this,"_halfMoves",0);xt(this,"_moveNumber",0);xt(this,"_history",[]);xt(this,"_comments",{});xt(this,"_castling",{w:0,b:0});xt(this,"_hash",0n);xt(this,"_positionCount",new Map);this.load(t,{skipValidation:n})}clear({preserveHeaders:t=!1}={}){this._board=new Array(128),this._kings={w:Yt,b:Yt},this._turn=dn,this._castling={w:0,b:0},this._epSquare=Yt,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=t?this._header:{...q_},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(t,{skipValidation:n=!1,preserveHeaders:r=!1}={}){let s=t.split(/\s+/);if(s.length>=2&&s.length<6){const l=["-","-","0","1"];t=s.concat(l.slice(-(6-s.length))).join(" ")}if(s=t.split(/\s+/),!n){const{ok:l,error:c}=J_(t);if(!l)throw new Error(c)}const o=s[0];let a=0;this.clear({preserveHeaders:r});for(let l=0;l<o.length;l++){const c=o.charAt(l);if(c==="/")a+=8;else if(nS(c))a+=parseInt(c,10);else{const u=c<"a"?dn:Dn;this._put({type:c.toLowerCase(),color:u},Ut(a)),a++}}this._turn=s[1],s[2].indexOf("K")>-1&&(this._castling.w|=Oe.KSIDE_CASTLE),s[2].indexOf("Q")>-1&&(this._castling.w|=Oe.QSIDE_CASTLE),s[2].indexOf("k")>-1&&(this._castling.b|=Oe.KSIDE_CASTLE),s[2].indexOf("q")>-1&&(this._castling.b|=Oe.QSIDE_CASTLE),this._epSquare=s[3]==="-"?Yt:Le[s[3]],this._halfMoves=parseInt(s[4],10),this._moveNumber=parseInt(s[5],10),this._hash=this._computeHash(),this._updateSetup(t),this._incPositionCount()}fen({forceEnpassantSquare:t=!1}={}){var a,l;let n=0,r="";for(let c=Le.a8;c<=Le.h1;c++){if(this._board[c]){n>0&&(r+=n,n=0);const{color:u,type:f}=this._board[c];r+=u===dn?f.toUpperCase():f.toLowerCase()}else n++;c+1&136&&(n>0&&(r+=n),c!==Le.h1&&(r+="/"),n=0,c+=8)}let s="";this._castling[dn]&Oe.KSIDE_CASTLE&&(s+="K"),this._castling[dn]&Oe.QSIDE_CASTLE&&(s+="Q"),this._castling[Dn]&Oe.KSIDE_CASTLE&&(s+="k"),this._castling[Dn]&Oe.QSIDE_CASTLE&&(s+="q"),s=s||"-";let o="-";if(this._epSquare!==Yt)if(t)o=Ut(this._epSquare);else{const c=this._epSquare+(this._turn===dn?16:-16),u=[c+1,c-1];for(const f of u){if(f&136)continue;const h=this._turn;if(((a=this._board[f])==null?void 0:a.color)===h&&((l=this._board[f])==null?void 0:l.type)===$t){this._makeMove({color:h,from:f,to:this._epSquare,piece:$t,captured:$t,flags:Oe.EP_CAPTURE});const m=!this._isKingAttacked(h);if(this._undoMove(),m){o=Ut(this._epSquare);break}}}}return[r,this._turn,s,o,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(t){if(!this._board[t])return 0n;const{color:n,type:r}=this._board[t],s={w:0,b:1}[n],o={p:0,n:1,b:2,r:3,q:4,k:5}[r];return B_[s][o][t]}_epKey(){return this._epSquare===Yt?0n:F_[this._epSquare&7]}_castlingKey(){const t=this._castling.w>>5|this._castling.b>>3;return z_[t]}_computeHash(){let t=0n;for(let n=Le.a8;n<=Le.h1;n++){if(n&136){n+=7;continue}this._board[n]&&(t^=this._pieceKey(n))}return t^=this._epKey(),t^=this._castlingKey(),this._turn==="b"&&(t^=Yd),t}_updateSetup(t){this._history.length>0||(t!==Xd?(this._header.SetUp="1",this._header.FEN=t):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(Xd)}get(t){return this._board[Le[t]]}findPiece(t){var r;const n=[];for(let s=Le.a8;s<=Le.h1;s++){if(s&136){s+=7;continue}!this._board[s]||((r=this._board[s])==null?void 0:r.color)!==t.color||this._board[s].color===t.color&&this._board[s].type===t.type&&n.push(Ut(s))}return n}put({type:t,color:n},r){return this._put({type:t,color:n},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(t,n){this._hash^=this._pieceKey(t),this._board[t]=n,this._hash^=this._pieceKey(t)}_put({type:t,color:n},r){if(G_.indexOf(t.toLowerCase())===-1||!(r in Le))return!1;const s=Le[r];if(t==Bt&&!(this._kings[n]==Yt||this._kings[n]==s))return!1;const o=this._board[s];return o&&o.type===Bt&&(this._kings[o.color]=Yt),this._set(s,{type:t,color:n}),t===Bt&&(this._kings[n]=s),!0}_clear(t){this._hash^=this._pieceKey(t),delete this._board[t]}remove(t){const n=this.get(t);return this._clear(Le[t]),n&&n.type===Bt&&(this._kings[n.color]=Yt),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){var r,s,o,a,l,c,u,f,h,m,y,g;this._hash^=this._castlingKey();const t=((r=this._board[Le.e1])==null?void 0:r.type)===Bt&&((s=this._board[Le.e1])==null?void 0:s.color)===dn,n=((o=this._board[Le.e8])==null?void 0:o.type)===Bt&&((a=this._board[Le.e8])==null?void 0:a.color)===Dn;(!t||((l=this._board[Le.a1])==null?void 0:l.type)!==ba||((c=this._board[Le.a1])==null?void 0:c.color)!==dn)&&(this._castling.w&=-65),(!t||((u=this._board[Le.h1])==null?void 0:u.type)!==ba||((f=this._board[Le.h1])==null?void 0:f.color)!==dn)&&(this._castling.w&=-33),(!n||((h=this._board[Le.a8])==null?void 0:h.type)!==ba||((m=this._board[Le.a8])==null?void 0:m.color)!==Dn)&&(this._castling.b&=-65),(!n||((y=this._board[Le.h8])==null?void 0:y.type)!==ba||((g=this._board[Le.h8])==null?void 0:g.color)!==Dn)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){var o,a;if(this._epSquare===Yt)return;const t=this._epSquare+(this._turn===dn?-16:16),n=this._epSquare+(this._turn===dn?16:-16),r=[n+1,n-1];if(this._board[t]!==null||this._board[this._epSquare]!==null||((o=this._board[n])==null?void 0:o.color)!==pa(this._turn)||((a=this._board[n])==null?void 0:a.type)!==$t){this._hash^=this._epKey(),this._epSquare=Yt;return}const s=l=>{var c,u;return!(l&136)&&((c=this._board[l])==null?void 0:c.color)===this._turn&&((u=this._board[l])==null?void 0:u.type)===$t};r.some(s)||(this._hash^=this._epKey(),this._epSquare=Yt)}_attacked(t,n,r){const s=[];for(let o=Le.a8;o<=Le.h1;o++){if(o&136){o+=7;continue}if(this._board[o]===void 0||this._board[o].color!==t)continue;const a=this._board[o],l=o-n;if(l===0)continue;const c=l+119;if(W_[c]&H_[a.type]){if(a.type===$t){if(l>0&&a.color===dn||l<=0&&a.color===Dn)if(r)s.push(Ut(o));else return!0;continue}if(a.type==="n"||a.type==="k")if(r){s.push(Ut(o));continue}else return!0;const u=U_[c];let f=o+u,h=!1;for(;f!==n;){if(this._board[f]!=null){h=!0;break}f+=u}if(!h)if(r){s.push(Ut(o));continue}else return!0}}return r?s:!1}attackers(t,n){return n?this._attacked(n,Le[t],!0):this._attacked(this._turn,Le[t],!0)}_isKingAttacked(t){const n=this._kings[t];return n===-1?!1:this._attacked(pa(t),n)}hash(){return this._hash.toString(16)}isAttacked(t,n){return this._attacked(n,Le[t])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const t={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let r=0,s=0;for(let o=Le.a8;o<=Le.h1;o++){if(s=(s+1)%2,o&136){o+=7;continue}const a=this._board[o];a&&(t[a.type]=a.type in t?t[a.type]+1:1,a.type===kc&&n.push(s),r++)}if(r===2)return!0;if(r===3&&(t[kc]===1||t[yh]===1))return!0;if(r===t[kc]+2){let o=0;const a=n.length;for(let l=0;l<a;l++)o+=n[l];if(o===0||o===a)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:t=!1,square:n=void 0,piece:r=void 0}={}){const s=this._moves({square:n,piece:r});return t?s.map(o=>new Xl(this,o)):s.map(o=>this._moveToSan(o,s))}_moves({legal:t=!0,piece:n=void 0,square:r=void 0}={}){var y;const s=r?r.toLowerCase():void 0,o=n==null?void 0:n.toLowerCase(),a=[],l=this._turn,c=pa(l);let u=Le.a8,f=Le.h1,h=!1;if(s)if(s in Le)u=f=Le[s],h=!0;else return[];for(let g=u;g<=f;g++){if(g&136){g+=7;continue}if(!this._board[g]||this._board[g].color===c)continue;const{type:p}=this._board[g];let w;if(p===$t){if(o&&o!==p)continue;w=g+Zd[l][0],this._board[w]||(cs(a,l,g,w,$t),w=g+Zd[l][1],Z_[l]===po(g)&&!this._board[w]&&cs(a,l,g,w,$t,void 0,Oe.BIG_PAWN));for(let x=2;x<4;x++)w=g+Zd[l][x],!(w&136)&&(((y=this._board[w])==null?void 0:y.color)===c?cs(a,l,g,w,$t,this._board[w].type,Oe.CAPTURE):w===this._epSquare&&cs(a,l,g,w,$t,$t,Oe.EP_CAPTURE))}else{if(o&&o!==p)continue;for(let x=0,v=Kv[p].length;x<v;x++){const b=Kv[p][x];for(w=g;w+=b,!(w&136);){if(!this._board[w])cs(a,l,g,w,p);else{if(this._board[w].color===l)break;cs(a,l,g,w,p,this._board[w].type,Oe.CAPTURE);break}if(p===yh||p===Bt)break}}}}if((o===void 0||o===Bt)&&(!h||f===this._kings[l])){if(this._castling[l]&Oe.KSIDE_CASTLE){const g=this._kings[l],p=g+2;!this._board[g+1]&&!this._board[p]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,g+1)&&!this._attacked(c,p)&&cs(a,l,this._kings[l],p,Bt,void 0,Oe.KSIDE_CASTLE)}if(this._castling[l]&Oe.QSIDE_CASTLE){const g=this._kings[l],p=g-2;!this._board[g-1]&&!this._board[g-2]&&!this._board[g-3]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,g-1)&&!this._attacked(c,p)&&cs(a,l,this._kings[l],p,Bt,void 0,Oe.QSIDE_CASTLE)}}if(!t||this._kings[l]===-1)return a;const m=[];for(let g=0,p=a.length;g<p;g++)this._makeMove(a[g]),this._isKingAttacked(l)||m.push(a[g]),this._undoMove();return m}move(t,{strict:n=!1}={}){let r=null;if(typeof t=="string")r=this._moveFromSan(t,n);else if(t===null)r=this._moveFromSan(Jd,n);else if(typeof t=="object"){const o=this._moves();for(let a=0,l=o.length;a<l;a++)if(t.from===Ut(o[a].from)&&t.to===Ut(o[a].to)&&(!("promotion"in o[a])||t.promotion===o[a].promotion)){r=o[a];break}}if(!r)throw typeof t=="string"?new Error(`Invalid move: ${t}`):new Error(`Invalid move: ${JSON.stringify(t)}`);if(this.isCheck()&&r.flags&Oe.NULL_MOVE)throw new Error("Null move not allowed when in check");const s=new Xl(this,r);return this._makeMove(r),this._incPositionCount(),s}_push(t){this._history.push({move:t,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(t,n){this._hash^=this._pieceKey(t),this._board[n]=this._board[t],delete this._board[t],this._hash^=this._pieceKey(n)}_makeMove(t){var s,o,a,l;const n=this._turn,r=pa(n);if(this._push(t),t.flags&Oe.NULL_MOVE){n===Dn&&this._moveNumber++,this._halfMoves++,this._turn=r,this._epSquare=Yt;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),t.captured&&(this._hash^=this._pieceKey(t.to)),this._movePiece(t.from,t.to),t.flags&Oe.EP_CAPTURE&&(this._turn===Dn?this._clear(t.to-16):this._clear(t.to+16)),t.promotion&&(this._clear(t.to),this._set(t.to,{type:t.promotion,color:n})),this._board[t.to].type===Bt){if(this._kings[n]=t.to,t.flags&Oe.KSIDE_CASTLE){const c=t.to-1,u=t.to+1;this._movePiece(u,c)}else if(t.flags&Oe.QSIDE_CASTLE){const c=t.to+1,u=t.to-2;this._movePiece(u,c)}this._castling[n]=0}if(this._castling[n]){for(let c=0,u=ls[n].length;c<u;c++)if(t.from===ls[n][c].square&&this._castling[n]&ls[n][c].flag){this._castling[n]^=ls[n][c].flag;break}}if(this._castling[r]){for(let c=0,u=ls[r].length;c<u;c++)if(t.to===ls[r][c].square&&this._castling[r]&ls[r][c].flag){this._castling[r]^=ls[r][c].flag;break}}if(this._hash^=this._castlingKey(),t.flags&Oe.BIG_PAWN){let c;n===Dn?c=t.to-16:c=t.to+16,!(t.to-1&136)&&((s=this._board[t.to-1])==null?void 0:s.type)===$t&&((o=this._board[t.to-1])==null?void 0:o.color)===r||!(t.to+1&136)&&((a=this._board[t.to+1])==null?void 0:a.type)===$t&&((l=this._board[t.to+1])==null?void 0:l.color)===r?(this._epSquare=c,this._hash^=this._epKey()):this._epSquare=Yt}else this._epSquare=Yt;t.piece===$t?this._halfMoves=0:t.flags&(Oe.CAPTURE|Oe.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===Dn&&this._moveNumber++,this._turn=r,this._hash^=Yd}undo(){const t=this._hash,n=this._undoMove();if(n){const r=new Xl(this,n);return this._decPositionCount(t),r}return null}_undoMove(){const t=this._history.pop();if(t===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const n=t.move;this._kings=t.kings,this._turn=t.turn,this._castling=t.castling,this._epSquare=t.epSquare,this._halfMoves=t.halfMoves,this._moveNumber=t.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=Yd;const r=this._turn,s=pa(r);if(n.flags&Oe.NULL_MOVE)return n;if(this._movePiece(n.to,n.from),n.piece&&(this._clear(n.from),this._set(n.from,{type:n.piece,color:r})),n.captured)if(n.flags&Oe.EP_CAPTURE){let o;r===Dn?o=n.to-16:o=n.to+16,this._set(o,{type:$t,color:s})}else this._set(n.to,{type:n.captured,color:s});if(n.flags&(Oe.KSIDE_CASTLE|Oe.QSIDE_CASTLE)){let o,a;n.flags&Oe.KSIDE_CASTLE?(o=n.to+1,a=n.to-1):(o=n.to-2,a=n.to+1),this._movePiece(a,o)}return n}pgn({newline:t=`
`,maxWidth:n=0}={}){const r=[];let s=!1;for(const m in this._header)this._header[m]&&r.push(`[${m} "${this._header[m]}"]`+t),s=!0;s&&this._history.length&&r.push(t);const o=m=>{const y=this._comments[this.fen()];if(typeof y<"u"){const g=m.length>0?" ":"";m=`${m}${g}{${y}}`}return m},a=[];for(;this._history.length>0;)a.push(this._undoMove());const l=[];let c="";for(a.length===0&&l.push(o(""));a.length>0;){c=o(c);const m=a.pop();if(!m)break;if(!this._history.length&&m.color==="b"){const y=`${this._moveNumber}. ...`;c=c?`${c} ${y}`:y}else m.color==="w"&&(c.length&&l.push(c),c=this._moveNumber+".");c=c+" "+this._moveToSan(m,this._moves({legal:!0})),this._makeMove(m)}if(c.length&&l.push(o(c)),l.push(this._header.Result||"*"),n===0)return r.join("")+l.join(" ");const u=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},f=function(m,y){for(const g of y.split(" "))if(g){if(m+g.length>n){for(;u();)m--;r.push(t),m=0}r.push(g),m+=g.length,r.push(" "),m++}return u()&&m--,m};let h=0;for(let m=0;m<l.length;m++){if(h+l[m].length>n&&l[m].includes("{")){h=f(h,l[m]);continue}h+l[m].length>n&&m!==0?(r[r.length-1]===" "&&r.pop(),r.push(t),h=0):m!==0&&(r.push(" "),h++),r.push(l[m]),h+=l[m].length}return r.join("")}header(...t){for(let n=0;n<t.length;n+=2)typeof t[n]=="string"&&typeof t[n+1]=="string"&&(this._header[t[n]]=t[n+1]);return this._header}setHeader(t,n){return this._header[t]=n??wh[t]??null,this.getHeaders()}removeHeader(t){return t in this._header?(this._header[t]=wh[t]||null,!0):!1}getHeaders(){const t={};for(const[n,r]of Object.entries(this._header))r!==null&&(t[n]=r);return t}loadPgn(t,{strict:n=!1,newlineChar:r=`\r?
`}={}){r!==`\r?
`&&(t=t.replace(new RegExp(r,"g"),`
`));const s=O_(t);this.reset();const o=s.headers;let a="";for(const u in o)u.toLowerCase()==="fen"&&(a=o[u]),this.header(u,o[u]);if(!n)a&&this.load(a,{preserveHeaders:!0});else if(o.SetUp==="1"){if(!("FEN"in o))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(o.FEN,{preserveHeaders:!0})}let l=s.root;for(;l;){if(l.move){const u=this._moveFromSan(l.move,n);if(u==null)throw new Error(`Invalid move in PGN: ${l.move}`);this._makeMove(u),this._incPositionCount()}l.comment!==void 0&&(this._comments[this.fen()]=l.comment),l=l.variations[0]}const c=s.result;c&&Object.keys(this._header).length&&this._header.Result!==c&&this.setHeader("Result",c)}_moveToSan(t,n){let r="";if(t.flags&Oe.KSIDE_CASTLE)r="O-O";else if(t.flags&Oe.QSIDE_CASTLE)r="O-O-O";else{if(t.flags&Oe.NULL_MOVE)return Jd;if(t.piece!==$t){const s=eM(t,n);r+=t.piece.toUpperCase()+s}t.flags&(Oe.CAPTURE|Oe.EP_CAPTURE)&&(t.piece===$t&&(r+=Ut(t.from)[0]),r+="x"),r+=Ut(t.to),t.promotion&&(r+="="+t.promotion.toUpperCase())}return this._makeMove(t),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(t,n=!1){let r=ef(t);if(n||(r==="0-0"?r="O-O":r==="0-0-0"&&(r="O-O-O")),r==Jd)return{color:this._turn,from:0,to:0,piece:"k",flags:Oe.NULL_MOVE};let s=Yv(r),o=this._moves({legal:!0,piece:s});for(let m=0,y=o.length;m<y;m++)if(r===ef(this._moveToSan(o[m],o)))return o[m];if(n)return null;let a,l,c,u,f,h=!1;if(l=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),l?(a=l[1],c=l[2],u=l[3],f=l[4],c.length==1&&(h=!0)):(l=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),l&&(a=l[1],c=l[2],u=l[3],f=l[4],c.length==1&&(h=!0))),s=Yv(r),o=this._moves({legal:!0,piece:a||s}),!u)return null;for(let m=0,y=o.length;m<y;m++)if(c){if((!a||a.toLowerCase()==o[m].piece)&&Le[c]==o[m].from&&Le[u]==o[m].to&&(!f||f.toLowerCase()==o[m].promotion))return o[m];if(h){const g=Ut(o[m].from);if((!a||a.toLowerCase()==o[m].piece)&&Le[u]==o[m].to&&(c==g[0]||c==g[1])&&(!f||f.toLowerCase()==o[m].promotion))return o[m]}}else if(r===ef(this._moveToSan(o[m],o)).replace("x",""))return o[m];return null}ascii(){let t=`   +------------------------+
`;for(let n=Le.a8;n<=Le.h1;n++){if(el(n)===0&&(t+=" "+"87654321"[po(n)]+" |"),this._board[n]){const r=this._board[n].type,o=this._board[n].color===dn?r.toUpperCase():r.toLowerCase();t+=" "+o+" "}else t+=" . ";n+1&136&&(t+=`|
`,n+=8)}return t+=`   +------------------------+
`,t+="     a  b  c  d  e  f  g  h",t}perft(t){const n=this._moves({legal:!1});let r=0;const s=this._turn;for(let o=0,a=n.length;o<a;o++)this._makeMove(n[o]),this._isKingAttacked(s)||(t-1>0?r+=this.perft(t-1):r++),this._undoMove();return r}setTurn(t){return this._turn==t?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const t=[];let n=[];for(let r=Le.a8;r<=Le.h1;r++)this._board[r]==null?n.push(null):n.push({square:Ut(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(t.push(n),n=[],r+=8);return t}squareColor(t){if(t in Le){const n=Le[t];return(po(n)+el(n))%2===0?"light":"dark"}return null}history({verbose:t=!1}={}){const n=[],r=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const s=n.pop();if(!s)break;t?r.push(new Xl(this,s)):r.push(this._moveToSan(s,this._moves())),this._makeMove(s)}return r}_getPositionCount(t){return this._positionCount.get(t)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(t){const n=this._positionCount.get(t)??0;n===1?this._positionCount.delete(t):this._positionCount.set(t,n-1)}_pruneComments(){const t=[],n={},r=s=>{s in this._comments&&(n[s]=this._comments[s])};for(;this._history.length>0;)t.push(this._undoMove());for(r(this.fen());;){const s=t.pop();if(!s)break;this._makeMove(s),r(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(t){this._comments[this.fen()]=t.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const t=this._comments[this.fen()];return delete this._comments[this.fen()],t}getComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>({fen:t,comment:this._comments[t]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>{const n=this._comments[t];return delete this._comments[t],{fen:t,comment:n}})}setCastlingRights(t,n){for(const s of[Bt,hs])n[s]!==void 0&&(n[s]?this._castling[t]|=Zl[s]:this._castling[t]&=~Zl[s]);this._updateCastlingRights();const r=this.getCastlingRights(t);return(n[Bt]===void 0||n[Bt]===r[Bt])&&(n[hs]===void 0||n[hs]===r[hs])}getCastlingRights(t){return{[Bt]:(this._castling[t]&Zl[Bt])!==0,[hs]:(this._castling[t]&Zl[hs])!==0}}moveNumber(){return this._moveNumber}}const ii=["a","b","c","d","e","f","g","h"],Jl=["8","7","6","5","4","3","2","1"],lu=e=>({file:ii.indexOf(e[0]),rank:parseInt(e[1])-1}),Xv=(e,t)=>`${ii[e]}${t+1}`,tM=(e,t)=>{const n=lu(e),r=lu(t),s=Math.abs(r.file-n.file),o=Math.abs(r.rank-n.rank);return s===2&&o===1||s===1&&o===2},nM=(e,t)=>{const n=lu(e),r=lu(t),s=r.file-n.file;return Math.abs(s)===2?Xv(r.file,n.rank):Xv(n.file,r.rank)},rM={K:"/pieces/wK.svg",Q:"/pieces/wQ.svg",R:"/pieces/wR.svg",B:"/pieces/wB.svg",N:"/pieces/wN.svg",P:"/pieces/wP.svg",k:"/pieces/bK.svg",q:"/pieces/bQ.svg",r:"/pieces/bR.svg",b:"/pieces/bB.svg",n:"/pieces/bN.svg",p:"/pieces/bP.svg"};function sM({fen:e="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",orientation:t="white",showCoordinates:n=!0,highlightedSquares:r=[],legalMoveSquares:s=[],lastMoveSquares:o=[],lastMove:a,selectedSquare:l=null,lockedPiece:c=null,onSquareClick:u,onMove:f,interactionMode:h="free",className:m="",noCard:y=!1,enableArrows:g=!0,enablePremoves:p=!1,isPlayerTurn:w=!0,premove:x=null,onPremove:v,arrowDrawMode:b=!1,highlightColor:k="yellow",customHighlightColors:S,hideSelectionHighlight:C=!1}){const N=(S==null?void 0:S.selectedPiece)||(k==="red"?"#ef4444":"#facc15"),j=(S==null?void 0:S.lastMove)||"#f97316",R=(S==null?void 0:S.availableMoves)||"#fbbf24",[P,D]=d.useState(null),I=l!==null?l:P,[F,L]=d.useState([]),[B,H]=d.useState(null),[Q,T]=d.useState(!1),[$,Y]=d.useState(null),W=d.useRef(null),ge=a?[a.from,a.to]:o;d.useEffect(()=>{D(null)},[e]),d.useEffect(()=>{b||Y(null)},[b]);const we=(V=>{const U=V.split(" ")[0].split("/"),de=[];for(const he of U){const le=[];for(const Fe of he)if(isNaN(parseInt(Fe)))le.push(Fe);else for(let Ae=0;Ae<parseInt(Fe);Ae++)le.push(null);de.push(le)}return de})(e),Ce=t==="white"?Jl:[...Jl].reverse(),O=t==="white"?ii:[...ii].reverse(),q=d.useCallback((V,U)=>{if(!W.current)return null;const de=W.current.getBoundingClientRect(),he=V-de.left,le=U-de.top,Fe=de.width/8,Ae=de.height/8,Re=Math.floor(he/Fe),st=Math.floor(le/Ae);if(Re<0||Re>7||st<0||st>7)return null;const rn=O[Re],Xe=Ce[st];return`${rn}${Xe}`},[O,Ce]),X=(V,U,de)=>{const he=`${V}${U}`;if(h==="viewOnly")return;if(b){if($===null)Y(he);else if($===he)Y(null);else{const Re={from:$,to:he},st=F.findIndex(rn=>rn.from===Re.from&&rn.to===Re.to);st>=0?L(F.filter((rn,Xe)=>Xe!==st)):L([...F,Re]),Y(null)}return}de&&L([]);const le=Re=>Re===Re.toUpperCase(),Ae=(()=>{var Qt;if(!I)return null;const Re=I[0],st=I[1],rn=Jl.indexOf(st),Xe=ii.indexOf(Re);return((Qt=we[rn])==null?void 0:Qt[Xe])||null})();if(de&&Ae&&I!==he){const Re=le(Ae),st=le(de);if(Re===st){if(c){u==null||u(he);return}D(he),u==null||u(he);return}}if(f&&I&&I!==he){if(f(I,he)){D(null);return}if(de&&l===null&&!c){D(he),u==null||u(he);return}}de?l===null&&!c&&D(he):I&&!c&&D(null),u==null||u(he)},J=d.useCallback(V=>{V.preventDefault()},[]),fe=d.useCallback(V=>{if(!(!g||h==="viewOnly")&&(V.button===2||b)){V.preventDefault(),T(!0);const U=q(V.clientX,V.clientY);U&&H({from:U,currentSquare:U})}},[g,b,q]),ue=d.useCallback(V=>{if(!B||!Q)return;const U=q(V.clientX,V.clientY);U&&U!==B.currentSquare&&H({...B,currentSquare:U})},[B,Q,q]),Ne=d.useCallback(V=>{if(g&&(V.button===2||b)&&B&&Q){const U=q(V.clientX,V.clientY);if(U&&U!==B.from){const de={from:B.from,to:U},he=F.findIndex(le=>le.from===de.from&&le.to===de.to);he>=0?L(F.filter((le,Fe)=>Fe!==he)):L([...F,de])}H(null),T(!1)}},[g,b,B,Q,F,q]),He=d.useCallback(V=>{},[]),Ee=d.useCallback(V=>{},[]),$e=d.useCallback(V=>{},[]),Te=d.useCallback(V=>{const U=V[0],de=V[1],he=O.indexOf(U),le=Ce.indexOf(de);return{x:(he+.5)*12.5,y:(le+.5)*12.5}},[O,Ce]),ke=(V,U)=>(V+U)%2===0?"bg-board-light":"bg-board-dark",ut=V=>x&&(x.from===V||x.to===V),vt=(V,U,de=!1)=>{const he=Te(V.from),le=Te(V.to),Fe=de?"rgba(255, 170, 0, 0.7)":"rgba(255, 170, 0, 0.8)";if(tM(V.from,V.to)){const In=nM(V.from,V.to),on=Te(In),bt=le.x-on.x,ir=le.y-on.y,gn=Math.sqrt(bt*bt+ir*ir),wr=(gn-3*.7)/gn,jn=on.x+bt*wr,Io=on.y+ir*wr;return i.jsxs("g",{children:[i.jsx("line",{x1:he.x,y1:he.y,x2:on.x,y2:on.y,stroke:Fe,strokeWidth:"2.5",strokeLinecap:"round"}),i.jsx("line",{x1:on.x,y1:on.y,x2:jn,y2:Io,stroke:Fe,strokeWidth:"2.5",strokeLinecap:"round"}),i.jsx("polygon",{points:"0,-2 4,0 0,2",fill:Fe,transform:`translate(${le.x},${le.y}) rotate(${Math.atan2(ir,bt)*180/Math.PI})`})]},`arrow-${U}`)}const Ae=le.x-he.x,Re=le.y-he.y,st=Math.sqrt(Ae*Ae+Re*Re),Qt=(st-3*.7)/st,sn=he.x+Ae*Qt,Qn=he.y+Re*Qt;return i.jsxs("g",{children:[i.jsx("line",{x1:he.x,y1:he.y,x2:sn,y2:Qn,stroke:Fe,strokeWidth:"2.5",strokeLinecap:"round"}),i.jsx("polygon",{points:"0,-2 4,0 0,2",fill:Fe,transform:`translate(${le.x},${le.y}) rotate(${Math.atan2(Re,Ae)*180/Math.PI})`})]},`arrow-${U}`)},nn=i.jsxs("div",{ref:W,className:"relative w-full h-full select-none",onContextMenu:J,onMouseDown:fe,onMouseMove:ue,onMouseUp:Ne,onMouseLeave:()=>{Q&&(H(null),T(!1))},onTouchStart:He,onTouchMove:Ee,onTouchEnd:$e,children:[i.jsx("div",{className:"grid grid-cols-8 grid-rows-8 gap-0 w-full h-full",children:Ce.map((V,U)=>O.map((de,he)=>{var ir;const le=`${de}${V}`,Fe=Jl.indexOf(V),Ae=ii.indexOf(de),Re=(ir=we[Fe])==null?void 0:ir[Ae],st=r.includes(le),rn=I===le,Xe=c===le,Qt=ge.includes(le),sn=ut(le),Qn=s.includes(le),In=Qn&&Re!==null,on=$===le,bt=(gn,es)=>{const Lo=parseInt(gn.slice(1,3),16),wr=parseInt(gn.slice(3,5),16),jn=parseInt(gn.slice(5,7),16);return`rgba(${Lo}, ${wr}, ${jn}, ${es})`};return i.jsxs("div",{"data-testid":`square-${le}`,"data-square":le,onClick:()=>X(de,V,Re),className:`
                    relative flex items-center justify-center cursor-pointer
                    ${ke(he,U)}
                    ${st?"ring-2 ring-primary ring-inset":""}
                    ${sn?"bg-opacity-80 after:absolute after:inset-0 after:bg-blue-500/40":""}
                    ${on?"ring-4 ring-orange-400 ring-inset":""}
                    hover-elevate
                  `,style:{...!C&&rn&&!Xe?{boxShadow:`inset 0 0 0 4px ${N}`}:{},...!C&&Xe?{boxShadow:`inset 0 0 0 4px ${N}`}:{}},children:[Qt&&i.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{backgroundColor:bt(j,.3)}}),Re&&i.jsx("img",{src:rM[Re],alt:Re,className:"w-[75%] h-[75%] select-none relative z-10 pointer-events-none",draggable:!1}),Qn&&!In&&i.jsx("div",{className:"absolute w-3 h-3 sm:w-4 sm:h-4 rounded-full pointer-events-none z-10",style:{backgroundColor:bt(R,.4)}}),In&&i.jsx("div",{className:"absolute inset-0 rounded-full pointer-events-none z-10",style:{border:`3px solid ${bt(R,.5)}`}}),n&&he===0&&i.jsx("span",{className:"absolute bottom-0.5 left-1 text-xs font-semibold select-none opacity-70",children:V}),n&&U===7&&i.jsx("span",{className:"absolute bottom-0.5 right-1 text-xs font-semibold select-none opacity-70",children:de})]},le)}))}),(F.length>0||B)&&i.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[F.map((V,U)=>vt(V,U)),B&&B.from!==B.currentSquare&&vt({from:B.from,to:B.currentSquare},-1,!0)]})]});return y?i.jsx("div",{className:`aspect-square w-full ${m}`,children:nn}):i.jsx(Ye,{className:`aspect-square w-full max-w-full md:max-w-[600px] p-1 md:p-2 ${m}`,children:nn})}const oM=[{key:"q",name:"Queen",white:"/pieces/wQ.svg",black:"/pieces/bQ.svg"},{key:"r",name:"Rook",white:"/pieces/wR.svg",black:"/pieces/bR.svg"},{key:"b",name:"Bishop",white:"/pieces/wB.svg",black:"/pieces/bB.svg"},{key:"n",name:"Knight",white:"/pieces/wN.svg",black:"/pieces/bN.svg"}];function iM({open:e,color:t,onSelect:n}){return i.jsx(Li,{open:e,onOpenChange:()=>{},children:i.jsxs(Co,{className:"sm:max-w-md",onPointerDownOutside:r=>r.preventDefault(),children:[i.jsx(jo,{children:i.jsx(Eo,{className:"text-center",children:"Promote Pawn"})}),i.jsx("div",{className:"grid grid-cols-4 gap-2",children:oM.map(r=>i.jsx(re,{variant:"outline",className:"h-20 hover-elevate",onClick:()=>n(r.key),"data-testid":`button-promote-${r.key}`,children:i.jsx("img",{src:t==="white"?r.white:r.black,alt:r.name,className:"w-12 h-12",draggable:!1})},r.key))}),i.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"Select a piece to promote your pawn"})]})})}function tl(e,[t,n]){return Math.min(n,Math.max(t,e))}var aM=[" ","Enter","ArrowUp","ArrowDown"],lM=[" ","Enter"],ml="Select",[qu,Wu,cM]=_m(ml),[Qi,z4]=Ln(ml,[cM,$u]),Uu=$u(),[uM,Us]=Qi(ml),[dM,fM]=Qi(ml),rS=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:o,value:a,defaultValue:l,onValueChange:c,dir:u,name:f,autoComplete:h,disabled:m,required:y,form:g}=e,p=Uu(t),[w,x]=d.useState(null),[v,b]=d.useState(null),[k,S]=d.useState(!1),C=fl(u),[N=!1,j]=bo({prop:r,defaultProp:s,onChange:o}),[R,P]=bo({prop:a,defaultProp:l,onChange:c}),D=d.useRef(null),I=w?g||!!w.closest("form"):!0,[F,L]=d.useState(new Set),B=Array.from(F).map(H=>H.props.value).join(";");return i.jsx(hP,{...p,children:i.jsxs(uM,{required:y,scope:t,trigger:w,onTriggerChange:x,valueNode:v,onValueNodeChange:b,valueNodeHasChildren:k,onValueNodeHasChildrenChange:S,contentId:Es(),value:R,onValueChange:P,open:N,onOpenChange:j,dir:C,triggerPointerDownPosRef:D,disabled:m,children:[i.jsx(qu.Provider,{scope:t,children:i.jsx(dM,{scope:e.__scopeSelect,onNativeOptionAdd:d.useCallback(H=>{L(Q=>new Set(Q).add(H))},[]),onNativeOptionRemove:d.useCallback(H=>{L(Q=>{const T=new Set(Q);return T.delete(H),T})},[]),children:n})}),I?i.jsxs(PS,{"aria-hidden":!0,required:y,tabIndex:-1,name:f,autoComplete:h,value:R,onChange:H=>P(H.target.value),disabled:m,form:g,children:[R===void 0?i.jsx("option",{value:""}):null,Array.from(F)]},B):null]})})};rS.displayName=ml;var sS="SelectTrigger",oS=d.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,o=Uu(n),a=Us(sS,n),l=a.disabled||r,c=qe(t,a.onTriggerChange),u=Wu(n),f=d.useRef("touch"),[h,m,y]=TS(p=>{const w=u().filter(b=>!b.disabled),x=w.find(b=>b.value===a.value),v=RS(w,p,x);v!==void 0&&a.onValueChange(v.value)}),g=p=>{l||(a.onOpenChange(!0),y()),p&&(a.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return i.jsx(Ww,{asChild:!0,...o,children:i.jsx(Me.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":ES(a.value)?"":void 0,...s,ref:c,onClick:ye(s.onClick,p=>{p.currentTarget.focus(),f.current!=="mouse"&&g(p)}),onPointerDown:ye(s.onPointerDown,p=>{f.current=p.pointerType;const w=p.target;w.hasPointerCapture(p.pointerId)&&w.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(g(p),p.preventDefault())}),onKeyDown:ye(s.onKeyDown,p=>{const w=h.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&m(p.key),!(w&&p.key===" ")&&aM.includes(p.key)&&(g(),p.preventDefault())})})})});oS.displayName=sS;var iS="SelectValue",aS=d.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:o,placeholder:a="",...l}=e,c=Us(iS,n),{onValueNodeHasChildrenChange:u}=c,f=o!==void 0,h=qe(t,c.onValueNodeChange);return Kt(()=>{u(f)},[u,f]),i.jsx(Me.span,{...l,ref:h,style:{pointerEvents:"none"},children:ES(c.value)?i.jsx(i.Fragment,{children:a}):o})});aS.displayName=iS;var hM="SelectIcon",lS=d.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return i.jsx(Me.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});lS.displayName=hM;var mM="SelectPortal",cS=e=>i.jsx(Pu,{asChild:!0,...e});cS.displayName=mM;var To="SelectContent",uS=d.forwardRef((e,t)=>{const n=Us(To,e.__scopeSelect),[r,s]=d.useState();if(Kt(()=>{s(new DocumentFragment)},[]),!n.open){const o=r;return o?Ao.createPortal(i.jsx(dS,{scope:e.__scopeSelect,children:i.jsx(qu.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),o):null}return i.jsx(fS,{...e,ref:t})});uS.displayName=To;var lr=10,[dS,Hs]=Qi(To),pM="SelectContentImpl",gM=_i("SelectContent.RemoveScroll"),fS=d.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:y,sticky:g,hideWhenDetached:p,avoidCollisions:w,...x}=e,v=Us(To,n),[b,k]=d.useState(null),[S,C]=d.useState(null),N=qe(t,q=>k(q)),[j,R]=d.useState(null),[P,D]=d.useState(null),I=Wu(n),[F,L]=d.useState(!1),B=d.useRef(!1);d.useEffect(()=>{if(b)return y1(b)},[b]),u1();const H=d.useCallback(q=>{const[X,...J]=I().map(Ne=>Ne.ref.current),[fe]=J.slice(-1),ue=document.activeElement;for(const Ne of q)if(Ne===ue||(Ne==null||Ne.scrollIntoView({block:"nearest"}),Ne===X&&S&&(S.scrollTop=0),Ne===fe&&S&&(S.scrollTop=S.scrollHeight),Ne==null||Ne.focus(),document.activeElement!==ue))return},[I,S]),Q=d.useCallback(()=>H([j,b]),[H,j,b]);d.useEffect(()=>{F&&Q()},[F,Q]);const{onOpenChange:T,triggerPointerDownPosRef:$}=v;d.useEffect(()=>{if(b){let q={x:0,y:0};const X=fe=>{var ue,Ne;q={x:Math.abs(Math.round(fe.pageX)-(((ue=$.current)==null?void 0:ue.x)??0)),y:Math.abs(Math.round(fe.pageY)-(((Ne=$.current)==null?void 0:Ne.y)??0))}},J=fe=>{q.x<=10&&q.y<=10?fe.preventDefault():b.contains(fe.target)||T(!1),document.removeEventListener("pointermove",X),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",X),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",X),document.removeEventListener("pointerup",J,{capture:!0})}}},[b,T,$]),d.useEffect(()=>{const q=()=>T(!1);return window.addEventListener("blur",q),window.addEventListener("resize",q),()=>{window.removeEventListener("blur",q),window.removeEventListener("resize",q)}},[T]);const[Y,W]=TS(q=>{const X=I().filter(ue=>!ue.disabled),J=X.find(ue=>ue.ref.current===document.activeElement),fe=RS(X,q,J);fe&&setTimeout(()=>fe.ref.current.focus())}),ge=d.useCallback((q,X,J)=>{const fe=!B.current&&!J;(v.value!==void 0&&v.value===X||fe)&&(R(q),fe&&(B.current=!0))},[v.value]),xe=d.useCallback(()=>b==null?void 0:b.focus(),[b]),we=d.useCallback((q,X,J)=>{const fe=!B.current&&!J;(v.value!==void 0&&v.value===X||fe)&&D(q)},[v.value]),Ce=r==="popper"?bh:hS,O=Ce===bh?{side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:y,sticky:g,hideWhenDetached:p,avoidCollisions:w}:{};return i.jsx(dS,{scope:n,content:b,viewport:S,onViewportChange:C,itemRefCallback:ge,selectedItem:j,onItemLeave:xe,itemTextRefCallback:we,focusSelectedItem:Q,selectedItemText:P,position:r,isPositioned:F,searchRef:Y,children:i.jsx(ep,{as:gM,allowPinchZoom:!0,children:i.jsx(Jm,{asChild:!0,trapped:v.open,onMountAutoFocus:q=>{q.preventDefault()},onUnmountAutoFocus:ye(s,q=>{var X;(X=v.trigger)==null||X.focus({preventScroll:!0}),q.preventDefault()}),children:i.jsx(ll,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:q=>q.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:i.jsx(Ce,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:q=>q.preventDefault(),...x,...O,onPlaced:()=>L(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:ye(x.onKeyDown,q=>{const X=q.ctrlKey||q.altKey||q.metaKey;if(q.key==="Tab"&&q.preventDefault(),!X&&q.key.length===1&&W(q.key),["ArrowUp","ArrowDown","Home","End"].includes(q.key)){let fe=I().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);if(["ArrowUp","End"].includes(q.key)&&(fe=fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(q.key)){const ue=q.target,Ne=fe.indexOf(ue);fe=fe.slice(Ne+1)}setTimeout(()=>H(fe)),q.preventDefault()}})})})})})})});fS.displayName=pM;var vM="SelectItemAlignedPosition",hS=d.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,o=Us(To,n),a=Hs(To,n),[l,c]=d.useState(null),[u,f]=d.useState(null),h=qe(t,N=>f(N)),m=Wu(n),y=d.useRef(!1),g=d.useRef(!0),{viewport:p,selectedItem:w,selectedItemText:x,focusSelectedItem:v}=a,b=d.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&p&&w&&x){const N=o.trigger.getBoundingClientRect(),j=u.getBoundingClientRect(),R=o.valueNode.getBoundingClientRect(),P=x.getBoundingClientRect();if(o.dir!=="rtl"){const ue=P.left-j.left,Ne=R.left-ue,He=N.left-Ne,Ee=N.width+He,$e=Math.max(Ee,j.width),Te=window.innerWidth-lr,ke=tl(Ne,[lr,Math.max(lr,Te-$e)]);l.style.minWidth=Ee+"px",l.style.left=ke+"px"}else{const ue=j.right-P.right,Ne=window.innerWidth-R.right-ue,He=window.innerWidth-N.right-Ne,Ee=N.width+He,$e=Math.max(Ee,j.width),Te=window.innerWidth-lr,ke=tl(Ne,[lr,Math.max(lr,Te-$e)]);l.style.minWidth=Ee+"px",l.style.right=ke+"px"}const D=m(),I=window.innerHeight-lr*2,F=p.scrollHeight,L=window.getComputedStyle(u),B=parseInt(L.borderTopWidth,10),H=parseInt(L.paddingTop,10),Q=parseInt(L.borderBottomWidth,10),T=parseInt(L.paddingBottom,10),$=B+H+F+T+Q,Y=Math.min(w.offsetHeight*5,$),W=window.getComputedStyle(p),ge=parseInt(W.paddingTop,10),xe=parseInt(W.paddingBottom,10),we=N.top+N.height/2-lr,Ce=I-we,O=w.offsetHeight/2,q=w.offsetTop+O,X=B+H+q,J=$-X;if(X<=we){const ue=D.length>0&&w===D[D.length-1].ref.current;l.style.bottom="0px";const Ne=u.clientHeight-p.offsetTop-p.offsetHeight,He=Math.max(Ce,O+(ue?xe:0)+Ne+Q),Ee=X+He;l.style.height=Ee+"px"}else{const ue=D.length>0&&w===D[0].ref.current;l.style.top="0px";const He=Math.max(we,B+p.offsetTop+(ue?ge:0)+O)+J;l.style.height=He+"px",p.scrollTop=X-we+p.offsetTop}l.style.margin=`${lr}px 0`,l.style.minHeight=Y+"px",l.style.maxHeight=I+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[m,o.trigger,o.valueNode,l,u,p,w,x,o.dir,r]);Kt(()=>b(),[b]);const[k,S]=d.useState();Kt(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const C=d.useCallback(N=>{N&&g.current===!0&&(b(),v==null||v(),g.current=!1)},[b,v]);return i.jsx(yM,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:C,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:i.jsx(Me.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});hS.displayName=vM;var xM="SelectPopperPosition",bh=d.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=lr,...o}=e,a=Uu(n);return i.jsx(Uw,{...a,...o,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});bh.displayName=xM;var[yM,yp]=Qi(To,{}),Sh="SelectViewport",mS=d.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,o=Hs(Sh,n),a=yp(Sh,n),l=qe(t,o.onViewportChange),c=d.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(qu.Slot,{scope:n,children:i.jsx(Me.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ye(s.onScroll,u=>{const f=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&h){const y=Math.abs(c.current-f.scrollTop);if(y>0){const g=window.innerHeight-lr*2,p=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),x=Math.max(p,w);if(x<g){const v=x+y,b=Math.min(g,v),k=v-b;h.style.height=b+"px",h.style.bottom==="0px"&&(f.scrollTop=k>0?k:0,h.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});mS.displayName=Sh;var pS="SelectGroup",[wM,bM]=Qi(pS),SM=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Es();return i.jsx(wM,{scope:n,id:s,children:i.jsx(Me.div,{role:"group","aria-labelledby":s,...r,ref:t})})});SM.displayName=pS;var gS="SelectLabel",vS=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=bM(gS,n);return i.jsx(Me.div,{id:s.id,...r,ref:t})});vS.displayName=gS;var cu="SelectItem",[kM,xS]=Qi(cu),yS=d.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:o,...a}=e,l=Us(cu,n),c=Hs(cu,n),u=l.value===r,[f,h]=d.useState(o??""),[m,y]=d.useState(!1),g=qe(t,v=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,v,r,s)}),p=Es(),w=d.useRef("touch"),x=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(kM,{scope:n,value:r,disabled:s,textId:p,isSelected:u,onItemTextChange:d.useCallback(v=>{h(b=>b||((v==null?void 0:v.textContent)??"").trim())},[]),children:i.jsx(qu.ItemSlot,{scope:n,value:r,disabled:s,textValue:f,children:i.jsx(Me.div,{role:"option","aria-labelledby":p,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:g,onFocus:ye(a.onFocus,()=>y(!0)),onBlur:ye(a.onBlur,()=>y(!1)),onClick:ye(a.onClick,()=>{w.current!=="mouse"&&x()}),onPointerUp:ye(a.onPointerUp,()=>{w.current==="mouse"&&x()}),onPointerDown:ye(a.onPointerDown,v=>{w.current=v.pointerType}),onPointerMove:ye(a.onPointerMove,v=>{var b;w.current=v.pointerType,s?(b=c.onItemLeave)==null||b.call(c):w.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ye(a.onPointerLeave,v=>{var b;v.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:ye(a.onKeyDown,v=>{var k;((k=c.searchRef)==null?void 0:k.current)!==""&&v.key===" "||(lM.includes(v.key)&&x(),v.key===" "&&v.preventDefault())})})})})});yS.displayName=cu;var Sa="SelectItemText",wS=d.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...o}=e,a=Us(Sa,n),l=Hs(Sa,n),c=xS(Sa,n),u=fM(Sa,n),[f,h]=d.useState(null),m=qe(t,x=>h(x),c.onItemTextChange,x=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,x,c.value,c.disabled)}),y=f==null?void 0:f.textContent,g=d.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:y},c.value),[c.disabled,c.value,y]),{onNativeOptionAdd:p,onNativeOptionRemove:w}=u;return Kt(()=>(p(g),()=>w(g)),[p,w,g]),i.jsxs(i.Fragment,{children:[i.jsx(Me.span,{id:c.textId,...o,ref:m}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Ao.createPortal(o.children,a.valueNode):null]})});wS.displayName=Sa;var bS="SelectItemIndicator",SS=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return xS(bS,n).isSelected?i.jsx(Me.span,{"aria-hidden":!0,...r,ref:t}):null});SS.displayName=bS;var kh="SelectScrollUpButton",kS=d.forwardRef((e,t)=>{const n=Hs(kh,e.__scopeSelect),r=yp(kh,e.__scopeSelect),[s,o]=d.useState(!1),a=qe(t,r.onScrollButtonChange);return Kt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;o(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(CS,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});kS.displayName=kh;var Nh="SelectScrollDownButton",NS=d.forwardRef((e,t)=>{const n=Hs(Nh,e.__scopeSelect),r=yp(Nh,e.__scopeSelect),[s,o]=d.useState(!1),a=qe(t,r.onScrollButtonChange);return Kt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<u;o(f)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(CS,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});NS.displayName=Nh;var CS=d.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,o=Hs("SelectScrollButton",n),a=d.useRef(null),l=Wu(n),c=d.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return d.useEffect(()=>()=>c(),[c]),Kt(()=>{var f;const u=l().find(h=>h.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),i.jsx(Me.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:ye(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:ye(s.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:ye(s.onPointerLeave,()=>{c()})})}),NM="SelectSeparator",jS=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return i.jsx(Me.div,{"aria-hidden":!0,...r,ref:t})});jS.displayName=NM;var Ch="SelectArrow",CM=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Uu(n),o=Us(Ch,n),a=Hs(Ch,n);return o.open&&a.position==="popper"?i.jsx(Hw,{...s,...r,ref:t}):null});CM.displayName=Ch;function ES(e){return e===""||e===void 0}var PS=d.forwardRef((e,t)=>{const{value:n,...r}=e,s=d.useRef(null),o=qe(t,s),a=Xm(n);return d.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&f){const h=new Event("change",{bubbles:!0});f.call(l,n),l.dispatchEvent(h)}},[a,n]),i.jsx(cl,{asChild:!0,children:i.jsx("select",{...r,ref:o,defaultValue:n})})});PS.displayName="BubbleSelect";function TS(e){const t=Lt(e),n=d.useRef(""),r=d.useRef(0),s=d.useCallback(a=>{const l=n.current+a;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=d.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,o]}function RS(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=jM(e,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function jM(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var EM=rS,_S=oS,PM=aS,TM=lS,RM=cS,MS=uS,_M=mS,AS=vS,LS=yS,MM=wS,AM=SS,IS=kS,$S=NS,OS=jS;const Zv=EM,Jv=PM,jh=d.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(_S,{ref:r,className:Ie("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,i.jsx(TM,{asChild:!0,children:i.jsx(Jy,{className:"h-4 w-4 opacity-50"})})]}));jh.displayName=_S.displayName;const DS=d.forwardRef(({className:e,...t},n)=>i.jsx(IS,{ref:n,className:Ie("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(r2,{className:"h-4 w-4"})}));DS.displayName=IS.displayName;const BS=d.forwardRef(({className:e,...t},n)=>i.jsx($S,{ref:n,className:Ie("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(Jy,{className:"h-4 w-4"})}));BS.displayName=$S.displayName;const Eh=d.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>i.jsx(RM,{children:i.jsxs(MS,{ref:s,className:Ie("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[i.jsx(DS,{}),i.jsx(_M,{className:Ie("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(BS,{})]})}));Eh.displayName=MS.displayName;const LM=d.forwardRef(({className:e,...t},n)=>i.jsx(AS,{ref:n,className:Ie("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));LM.displayName=AS.displayName;const Nr=d.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(LS,{ref:r,className:Ie("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(AM,{children:i.jsx(ul,{className:"h-4 w-4"})})}),i.jsx(MM,{children:t})]}));Nr.displayName=LS.displayName;const IM=d.forwardRef(({className:e,...t},n)=>i.jsx(OS,{ref:n,className:Ie("-mx-1 my-1 h-px bg-muted",e),...t}));IM.displayName=OS.displayName;function ai(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}var $M=x0[" useInsertionEffect ".trim().toString()]||Kt;function OM({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,o,a]=DM({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const f=d.useRef(e!==void 0);d.useEffect(()=>{const h=f.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const u=d.useCallback(f=>{var h;if(l){const m=BM(f)?f(e):f;m!==e&&((h=a.current)==null||h.call(a,m))}else o(f)},[l,e,o,a]);return[c,u]}function DM({defaultProp:e,onChange:t}){const[n,r]=d.useState(e),s=d.useRef(n),o=d.useRef(t);return $M(()=>{o.current=t},[t]),d.useEffect(()=>{var a;s.current!==n&&((a=o.current)==null||a.call(o,n),s.current=n)},[n,s]),[n,r,o]}function BM(e){return typeof e=="function"}function Ph(e){const t=FM(e),n=d.forwardRef((r,s)=>{const{children:o,...a}=r,l=d.Children.toArray(o),c=l.find(VM);if(c){const u=c.props.children,f=l.map(h=>h===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:h);return i.jsx(t,{...a,ref:s,children:d.isValidElement(u)?d.cloneElement(u,void 0,f):null})}return i.jsx(t,{...a,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}function FM(e){const t=d.forwardRef((n,r)=>{const{children:s,...o}=n;if(d.isValidElement(s)){const a=WM(s),l=qM(o,s.props);return s.type!==d.Fragment&&(l.ref=r?Rm(r,a):a),d.cloneElement(s,l)}return d.Children.count(s)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var zM=Symbol("radix.slottable");function VM(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===zM}function qM(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...l)=>{const c=o(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function WM(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var UM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],pl=UM.reduce((e,t)=>{const n=Ph(`Primitive.${t}`),r=d.forwardRef((s,o)=>{const{asChild:a,...l}=s,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function HM(e){const t=e+"CollectionProvider",[n,r]=Ln(t),[s,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=p=>{const{scope:w,children:x}=p,v=bn.useRef(null),b=bn.useRef(new Map).current;return i.jsx(s,{scope:w,itemMap:b,collectionRef:v,children:x})};a.displayName=t;const l=e+"CollectionSlot",c=Ph(l),u=bn.forwardRef((p,w)=>{const{scope:x,children:v}=p,b=o(l,x),k=qe(w,b.collectionRef);return i.jsx(c,{ref:k,children:v})});u.displayName=l;const f=e+"CollectionItemSlot",h="data-radix-collection-item",m=Ph(f),y=bn.forwardRef((p,w)=>{const{scope:x,children:v,...b}=p,k=bn.useRef(null),S=qe(w,k),C=o(f,x);return bn.useEffect(()=>(C.itemMap.set(k,{ref:k,...b}),()=>void C.itemMap.delete(k))),i.jsx(m,{[h]:"",ref:S,children:v})});y.displayName=f;function g(p){const w=o(e+"CollectionConsumer",p);return bn.useCallback(()=>{const v=w.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((C,N)=>b.indexOf(C.ref.current)-b.indexOf(N.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:u,ItemSlot:y},g,r]}var FS=["PageUp","PageDown"],zS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],VS={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Yi="Slider",[Th,GM,KM]=HM(Yi),[qS,V4]=Ln(Yi,[KM]),[QM,Hu]=qS(Yi),WS=d.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:o=1,orientation:a="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:f,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:y=!1,form:g,...p}=e,w=d.useRef(new Set),x=d.useRef(0),b=a==="horizontal"?YM:XM,[k=[],S]=OM({prop:f,defaultProp:u,onChange:D=>{var F;(F=[...w.current][x.current])==null||F.focus(),h(D)}}),C=d.useRef(k);function N(D){const I=nA(k,D);P(D,I)}function j(D){P(D,x.current)}function R(){const D=C.current[x.current];k[x.current]!==D&&m(k)}function P(D,I,{commit:F}={commit:!1}){const L=iA(o),B=aA(Math.round((D-r)/o)*o+r,L),H=tl(B,[r,s]);S((Q=[])=>{const T=eA(Q,H,I);if(oA(T,c*o)){x.current=T.indexOf(H);const $=String(T)!==String(Q);return $&&F&&m(T),$?T:Q}else return Q})}return i.jsx(QM,{scope:e.__scopeSlider,name:n,disabled:l,min:r,max:s,valueIndexToChangeRef:x,thumbs:w.current,values:k,orientation:a,form:g,children:i.jsx(Th.Provider,{scope:e.__scopeSlider,children:i.jsx(Th.Slot,{scope:e.__scopeSlider,children:i.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...p,ref:t,onPointerDown:ai(p.onPointerDown,()=>{l||(C.current=k)}),min:r,max:s,inverted:y,onSlideStart:l?void 0:N,onSlideMove:l?void 0:j,onSlideEnd:l?void 0:R,onHomeKeyDown:()=>!l&&P(r,0,{commit:!0}),onEndKeyDown:()=>!l&&P(s,k.length-1,{commit:!0}),onStepKeyDown:({event:D,direction:I})=>{if(!l){const B=FS.includes(D.key)||D.shiftKey&&zS.includes(D.key)?10:1,H=x.current,Q=k[H],T=o*B*I;P(Q+T,H,{commit:!0})}}})})})})});WS.displayName=Yi;var[US,HS]=qS(Yi,{startEdge:"left",endEdge:"right",size:"width",direction:1}),YM=d.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:o,onSlideStart:a,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...f}=e,[h,m]=d.useState(null),y=qe(t,b=>m(b)),g=d.useRef(void 0),p=fl(s),w=p==="ltr",x=w&&!o||!w&&o;function v(b){const k=g.current||h.getBoundingClientRect(),S=[0,k.width],N=wp(S,x?[n,r]:[r,n]);return g.current=k,N(b-k.left)}return i.jsx(US,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:i.jsx(GS,{dir:p,"data-orientation":"horizontal",...f,ref:y,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const k=v(b.clientX);a==null||a(k)},onSlideMove:b=>{const k=v(b.clientX);l==null||l(k)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:b=>{const S=VS[x?"from-left":"from-right"].includes(b.key);u==null||u({event:b,direction:S?-1:1})}})})}),XM=d.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=e,f=d.useRef(null),h=qe(t,f),m=d.useRef(void 0),y=!s;function g(p){const w=m.current||f.current.getBoundingClientRect(),x=[0,w.height],b=wp(x,y?[r,n]:[n,r]);return m.current=w,b(p-w.top)}return i.jsx(US,{scope:e.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:i.jsx(GS,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:p=>{const w=g(p.clientY);o==null||o(w)},onSlideMove:p=>{const w=g(p.clientY);a==null||a(w)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:p=>{const x=VS[y?"from-bottom":"from-top"].includes(p.key);c==null||c({event:p,direction:x?-1:1})}})})}),GS=d.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:o,onHomeKeyDown:a,onEndKeyDown:l,onStepKeyDown:c,...u}=e,f=Hu(Yi,n);return i.jsx(pl.span,{...u,ref:t,onKeyDown:ai(e.onKeyDown,h=>{h.key==="Home"?(a(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):FS.concat(zS).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:ai(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),f.thumbs.has(m)?m.focus():r(h)}),onPointerMove:ai(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&s(h)}),onPointerUp:ai(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),o(h))})})}),KS="SliderTrack",QS=d.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=Hu(KS,n);return i.jsx(pl.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});QS.displayName=KS;var Rh="SliderRange",YS=d.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=Hu(Rh,n),o=HS(Rh,n),a=d.useRef(null),l=qe(t,a),c=s.values.length,u=s.values.map(m=>JS(m,s.min,s.max)),f=c>1?Math.min(...u):0,h=100-Math.max(...u);return i.jsx(pl.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:l,style:{...e.style,[o.startEdge]:f+"%",[o.endEdge]:h+"%"}})});YS.displayName=Rh;var _h="SliderThumb",XS=d.forwardRef((e,t)=>{const n=GM(e.__scopeSlider),[r,s]=d.useState(null),o=qe(t,l=>s(l)),a=d.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return i.jsx(ZM,{...e,ref:o,index:a})}),ZM=d.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...o}=e,a=Hu(_h,n),l=HS(_h,n),[c,u]=d.useState(null),f=qe(t,v=>u(v)),h=c?a.form||!!c.closest("form"):!0,m=Hm(c),y=a.values[r],g=y===void 0?0:JS(y,a.min,a.max),p=tA(r,a.values.length),w=m==null?void 0:m[l.size],x=w?rA(w,g,l.direction):0;return d.useEffect(()=>{if(c)return a.thumbs.add(c),()=>{a.thumbs.delete(c)}},[c,a.thumbs]),i.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${g}% + ${x}px)`},children:[i.jsx(Th.ItemSlot,{scope:e.__scopeSlider,children:i.jsx(pl.span,{role:"slider","aria-label":e["aria-label"]||p,"aria-valuemin":a.min,"aria-valuenow":y,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...o,ref:f,style:y===void 0?{display:"none"}:e.style,onFocus:ai(e.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),h&&i.jsx(ZS,{name:s??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:y},r)]})});XS.displayName=_h;var JM="RadioBubbleInput",ZS=d.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const s=d.useRef(null),o=qe(s,r),a=Xm(t);return d.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==t&&f){const h=new Event("input",{bubbles:!0});f.call(l,t),l.dispatchEvent(h)}},[a,t]),i.jsx(pl.input,{style:{display:"none"},...n,ref:o,defaultValue:t})});ZS.displayName=JM;function eA(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,o)=>s-o)}function JS(e,t,n){const o=100/(n-t)*(e-t);return tl(o,[0,100])}function tA(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function nA(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function rA(e,t,n){const r=e/2,o=wp([0,50],[0,r]);return(r-o(t)*n)*n}function sA(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function oA(e,t){if(t>0){const n=sA(e);return Math.min(...n)>=t}return!0}function wp(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function iA(e){return(String(e).split(".")[1]||"").length}function aA(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var ek=WS,lA=QS,cA=YS,uA=XS;const tk=d.forwardRef(({className:e,...t},n)=>i.jsxs(ek,{ref:n,className:Ie("relative flex w-full touch-none select-none items-center",e),...t,children:[i.jsx(lA,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-muted",children:i.jsx(cA,{className:"absolute h-full bg-primary"})}),i.jsx(uA,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));tk.displayName=ek.displayName;function dA(e,t){return d.useReducer((n,r)=>t[n][r]??n,e)}var bp="ScrollArea",[nk,q4]=Ln(bp),[fA,or]=nk(bp),rk=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:o=600,...a}=e,[l,c]=d.useState(null),[u,f]=d.useState(null),[h,m]=d.useState(null),[y,g]=d.useState(null),[p,w]=d.useState(null),[x,v]=d.useState(0),[b,k]=d.useState(0),[S,C]=d.useState(!1),[N,j]=d.useState(!1),R=qe(t,D=>c(D)),P=fl(s);return i.jsx(fA,{scope:n,type:r,dir:P,scrollHideDelay:o,scrollArea:l,viewport:u,onViewportChange:f,content:h,onContentChange:m,scrollbarX:y,onScrollbarXChange:g,scrollbarXEnabled:S,onScrollbarXEnabledChange:C,scrollbarY:p,onScrollbarYChange:w,scrollbarYEnabled:N,onScrollbarYEnabledChange:j,onCornerWidthChange:v,onCornerHeightChange:k,children:i.jsx(Me.div,{dir:P,...a,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});rk.displayName=bp;var sk="ScrollAreaViewport",ok=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...o}=e,a=or(sk,n),l=d.useRef(null),c=qe(t,l,a.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(Me.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:i.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});ok.displayName=sk;var Ir="ScrollAreaScrollbar",Sp=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=or(Ir,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:a}=s,l=e.orientation==="horizontal";return d.useEffect(()=>(l?o(!0):a(!0),()=>{l?o(!1):a(!1)}),[l,o,a]),s.type==="hover"?i.jsx(hA,{...r,ref:t,forceMount:n}):s.type==="scroll"?i.jsx(mA,{...r,ref:t,forceMount:n}):s.type==="auto"?i.jsx(ik,{...r,ref:t,forceMount:n}):s.type==="always"?i.jsx(kp,{...r,ref:t}):null});Sp.displayName=Ir;var hA=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=or(Ir,e.__scopeScrollArea),[o,a]=d.useState(!1);return d.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),a(!0)},f=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(xr,{present:n||o,children:i.jsx(ik,{"data-state":o?"visible":"hidden",...r,ref:t})})}),mA=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=or(Ir,e.__scopeScrollArea),o=e.orientation==="horizontal",a=Ku(()=>c("SCROLL_END"),100),[l,c]=dA("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),d.useEffect(()=>{const u=s.viewport,f=o?"scrollLeft":"scrollTop";if(u){let h=u[f];const m=()=>{const y=u[f];h!==y&&(c("SCROLL"),a()),h=y};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,o,c,a]),i.jsx(xr,{present:n||l!=="hidden",children:i.jsx(kp,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:ye(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ye(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),ik=d.forwardRef((e,t)=>{const n=or(Ir,e.__scopeScrollArea),{forceMount:r,...s}=e,[o,a]=d.useState(!1),l=e.orientation==="horizontal",c=Ku(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?u:f)}},10);return Di(n.viewport,c),Di(n.content,c),i.jsx(xr,{present:r||o,children:i.jsx(kp,{"data-state":o?"visible":"hidden",...s,ref:t})})}),kp=d.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=or(Ir,e.__scopeScrollArea),o=d.useRef(null),a=d.useRef(0),[l,c]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=dk(l.viewport,l.content),f={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>o.current=m,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:m=>a.current=m};function h(m,y){return wA(m,a.current,l,y)}return n==="horizontal"?i.jsx(pA,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const m=s.viewport.scrollLeft,y=e0(m,l,s.dir);o.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=h(m,s.dir))}}):n==="vertical"?i.jsx(gA,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const m=s.viewport.scrollTop,y=e0(m,l);o.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=h(m))}}):null}),pA=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,o=or(Ir,e.__scopeScrollArea),[a,l]=d.useState(),c=d.useRef(null),u=qe(t,c,o.onScrollbarXChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(lk,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Gu(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(o.viewport){const m=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(m),hk(m,h)&&f.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:du(a.paddingLeft),paddingEnd:du(a.paddingRight)}})}})}),gA=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,o=or(Ir,e.__scopeScrollArea),[a,l]=d.useState(),c=d.useRef(null),u=qe(t,c,o.onScrollbarYChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(lk,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Gu(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(o.viewport){const m=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(m),hk(m,h)&&f.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:du(a.paddingTop),paddingEnd:du(a.paddingBottom)}})}})}),[vA,ak]=nk(Ir),lk=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:o,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:f,onResize:h,...m}=e,y=or(Ir,n),[g,p]=d.useState(null),w=qe(t,R=>p(R)),x=d.useRef(null),v=d.useRef(""),b=y.viewport,k=r.content-r.viewport,S=Lt(f),C=Lt(c),N=Ku(h,10);function j(R){if(x.current){const P=R.clientX-x.current.left,D=R.clientY-x.current.top;u({x:P,y:D})}}return d.useEffect(()=>{const R=P=>{const D=P.target;(g==null?void 0:g.contains(D))&&S(P,k)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[b,g,k,S]),d.useEffect(C,[r,C]),Di(g,N),Di(y.content,N),i.jsx(vA,{scope:n,scrollbar:g,hasThumb:s,onThumbChange:Lt(o),onThumbPointerUp:Lt(a),onThumbPositionChange:C,onThumbPointerDown:Lt(l),children:i.jsx(Me.div,{...m,ref:w,style:{position:"absolute",...m.style},onPointerDown:ye(e.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),x.current=g.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),j(R))}),onPointerMove:ye(e.onPointerMove,j),onPointerUp:ye(e.onPointerUp,R=>{const P=R.target;P.hasPointerCapture(R.pointerId)&&P.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=v.current,y.viewport&&(y.viewport.style.scrollBehavior=""),x.current=null})})})}),uu="ScrollAreaThumb",ck=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=ak(uu,e.__scopeScrollArea);return i.jsx(xr,{present:n||s.hasThumb,children:i.jsx(xA,{ref:t,...r})})}),xA=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,o=or(uu,n),a=ak(uu,n),{onThumbPositionChange:l}=a,c=qe(t,h=>a.onThumbChange(h)),u=d.useRef(void 0),f=Ku(()=>{u.current&&(u.current(),u.current=void 0)},100);return d.useEffect(()=>{const h=o.viewport;if(h){const m=()=>{if(f(),!u.current){const y=bA(h,l);u.current=y,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[o.viewport,f,l]),i.jsx(Me.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ye(e.onPointerDownCapture,h=>{const y=h.target.getBoundingClientRect(),g=h.clientX-y.left,p=h.clientY-y.top;a.onThumbPointerDown({x:g,y:p})}),onPointerUp:ye(e.onPointerUp,a.onThumbPointerUp)})});ck.displayName=uu;var Np="ScrollAreaCorner",uk=d.forwardRef((e,t)=>{const n=or(Np,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(yA,{...e,ref:t}):null});uk.displayName=Np;var yA=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=or(Np,n),[o,a]=d.useState(0),[l,c]=d.useState(0),u=!!(o&&l);return Di(s.scrollbarX,()=>{var h;const f=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(f),c(f)}),Di(s.scrollbarY,()=>{var h;const f=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(f),a(f)}),u?i.jsx(Me.div,{...r,ref:t,style:{width:o,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function du(e){return e?parseInt(e,10):0}function dk(e,t){const n=e/t;return isNaN(n)?0:n}function Gu(e){const t=dk(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function wA(e,t,n,r="ltr"){const s=Gu(n),o=s/2,a=t||o,l=s-a,c=n.scrollbar.paddingStart+a,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,h=r==="ltr"?[0,f]:[f*-1,0];return fk([c,u],h)(e)}function e0(e,t,n="ltr"){const r=Gu(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-s,a=t.content-t.viewport,l=o-r,c=n==="ltr"?[0,a]:[a*-1,0],u=tl(e,c);return fk([0,a],[0,l])(u)}function fk(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function hk(e,t){return e>0&&e<t}var bA=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const o={left:e.scrollLeft,top:e.scrollTop},a=n.left!==o.left,l=n.top!==o.top;(a||l)&&t(),n=o,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Ku(e,t){const n=Lt(e),r=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(r.current),[]),d.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Di(e,t){const n=Lt(t);Kt(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var mk=rk,SA=ok,kA=uk;const Cp=d.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(mk,{ref:r,className:Ie("relative overflow-hidden",e),...n,children:[i.jsx(SA,{className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(pk,{}),i.jsx(kA,{})]}));Cp.displayName=mk.displayName;const pk=d.forwardRef(({className:e,orientation:t="vertical",...n},r)=>i.jsx(Sp,{ref:r,orientation:t,className:Ie("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:i.jsx(ck,{className:"relative flex-1 rounded-full bg-border"})}));pk.displayName=Sp.displayName;const NA="/assets/title_cropped-BD2iTFVW.webp",tf={wK:"/pieces/wK.svg",wQ:"/pieces/wQ.svg",wR:"/pieces/wR.svg",wB:"/pieces/wB.svg",wN:"/pieces/wN.svg",wP:"/pieces/wP.svg",bK:"/pieces/bK.svg",bQ:"/pieces/bQ.svg",bR:"/pieces/bR.svg",bB:"/pieces/bB.svg",bN:"/pieces/bN.svg",bP:"/pieces/bP.svg"},CA=["wK","wQ","wR","wB","wN","wP","bK","bQ","bR","bB","bN","bP"],jA={K:["king"],Q:["queen"],R:["rook","castle","rock","brook"],B:["bishop","bish","bishup"],N:["knight","night","horse","nite"],P:["pawn","pond"]},EA={ay:"a",aye:"a",eh:"a",bee:"b",be:"b",cee:"c",see:"c",sea:"c",dee:"d",eee:"e",ee:"e",ef:"f",eff:"f",gee:"g",jee:"g",aitch:"h",ach:"h",alpha:"a",alfa:"a",apple:"a",able:"a",bravo:"b",boy:"b",baker:"b",charlie:"c",cat:"c",delta:"d",dog:"d",david:"d",echo:"e",easy:"e",edward:"e",foxtrot:"f",fox:"f",frank:"f",golf:"g",george:"g",hotel:"h",henry:"h"};function PA(e){let t=e.toLowerCase();return t=t.replace(/\bbefore\b/g,"b 4"),t=t.replace(/\bsci\s*fi\b/g,"c 5"),t=t.replace(/\bscifi\b/g,"c 5"),t=t.replace(/\bquincy\b/g,"queen c"),t=t.replace(/\bhe\s+([1-8])\b/g,"e $1"),t=t.replace(/\bhe\s+(one|two|three|four|five|six|seven|eight|for)\b/gi,"e $1"),t=t.replace(/\bthe\s+([1-8])\b/g,"d $1"),t=t.replace(/\bthe\s+(one|two|three|four|five|six|seven|eight)\b/gi,"d $1"),t=t.replace(/\b([a-h])\s+for\b/g,"$1 4"),t}const TA={one:"1",won:"1",first:"1",two:"2",too:"2",second:"2",three:"3",free:"3",third:"3",tree:"3",four:"4",fore:"4",forth:"4",fourth:"4",for:"4",five:"5",fifth:"5",six:"6",sixth:"6",sicks:"6",seven:"7",seventh:"7",eight:"8",ate:"8",eighth:"8"};function RA(e){const t=Array(8).fill(null).map(()=>Array(8).fill(null)),[n]=e.split(" "),r=n.split("/"),s={K:"wK",Q:"wQ",R:"wR",B:"wB",N:"wN",P:"wP",k:"bK",q:"bQ",r:"bR",b:"bB",n:"bN",p:"bP"};return r.forEach((o,a)=>{let l=0;for(const c of o)/\d/.test(c)?l+=parseInt(c):s[c]&&(t[a][l]=s[c],l++)}),t}function _A(e,t){let n=0,r=0;for(let s=0;s<8;s++)for(let o=0;o<8;o++){const a=t[s][o],l=e[s][o];a!==null&&(r++,a===l&&n++)}return r===0?100:Math.round(n/r*100)}function t0(e){const n=PA(e).toLowerCase().trim();let r=null,s=null;for(const[o,a]of Object.entries(EA))if(n.includes(o)){r=a;break}if(!r){const o=n.match(/\b([a-h])\b/);o&&(r=o[1])}for(const[o,a]of Object.entries(TA))if(n.includes(o)){s=a;break}if(!s){const o=n.match(/[1-8]/);o&&(s=o[0])}if(!r||!s){const o=n.match(/([a-h])\s*([1-8])/);if(o)return{file:o[1],rank:o[2]}}return r&&s?{file:r,rank:s}:null}function MA(e){const t=e.toLowerCase();for(const[n,r]of Object.entries(jA))for(const s of r)if(t.includes(s))return n;return null}function n0(e){const t=e.toLowerCase();return t.includes("white")?"w":t.includes("black")?"b":null}function AA({actualFen:e,playerColor:t,onComplete:n,onSkip:r,onContinue:s,onViewReport:o}){const[a,l]=d.useState("ready"),[c,u]=d.useState(Array(8).fill(null).map(()=>Array(8).fill(null))),[f,h]=d.useState(null),[m,y]=d.useState(!1),[g,p]=d.useState(null),[w,x]=d.useState(100),[v,b]=d.useState(!1),[k,S]=d.useState(null),[C,N]=d.useState(""),[j,R]=d.useState(!0),[P,D]=d.useState(null),[I,F]=d.useState("w"),L=d.useRef("w"),[B,H]=d.useState(new Set),Q=d.useRef(0),T=d.useRef(0),$=d.useRef(null),Y=d.useRef(!0),W=RA(e);d.useEffect(()=>{L.current=I},[I]);const ge=d.useCallback((V,U)=>{const de=V.charCodeAt(0)-97;return{row:8-parseInt(U),col:de}},[]),xe=d.useCallback((V,U,de,he)=>{u(Fe=>{const Ae=Fe.map(Re=>[...Re]);return Ae[U][de]=V,Ae});const le=V.charAt(0);if(F(le),L.current=le,he){Q.current++;const Fe=`${U}-${de}`;H(Ae=>new Set(Ae).add(Fe)),setTimeout(()=>{H(Ae=>{const Re=new Set(Ae);return Re.delete(Fe),Re})},300)}else T.current++},[]),we=d.useCallback((V,U,de)=>{u(he=>{const le=he.map(Fe=>[...Fe]);return le[V][U]&&(de?Q.current++:T.current++,le[V][U]=null),le})},[]),Ce=d.useCallback(V=>{const U=V.toLowerCase().trim();if(N(V),U.includes("clear all")||U.includes("reset board")||U.includes("reset")){u(Array(8).fill(null).map(()=>Array(8).fill(null))),S(null);return}if(U.includes("done")||U.includes("submit")||U.includes("check position")){$.current&&$.current();return}if(U==="white"||U==="switch to white"||U==="white pieces"){F("w"),L.current="w";return}if(U==="black"||U==="switch to black"||U==="black pieces"){F("b"),L.current="b";return}if(k){const Fe=n0(U);if(Fe){const Ae=Fe+k.pieceType,{row:Re,col:st}=ge(k.square.file,k.square.rank);xe(Ae,Re,st,!0),S(null);return}}if(U.includes("clear")||U.includes("remove")||U.includes("delete")){const Fe=t0(U);if(Fe){const{row:Ae,col:Re}=ge(Fe.file,Fe.rank);we(Ae,Re,!0)}return}const de=MA(U),he=t0(U),le=n0(U);if(le&&(F(le),L.current=le),de&&he){const Ae=(le||L.current)+de,{row:Re,col:st}=ge(he.file,he.rank);xe(Ae,Re,st,!0),S(null)}},[k,ge,xe,we]),O=d.useRef(Ce);d.useEffect(()=>{O.current=Ce},[Ce]);const q=d.useCallback(async()=>{if(m)return;if(await G1(),!await K1()){console.warn("[Reconstruction] Microphone permission not granted"),await dp()==="prompt-with-rationale"&&alert("Voice control requires microphone access. Please enable it in your device Settings > Apps > Blindfold Chess > Permissions.");return}await it.start({mode:"placement",onTranscript:de=>{O.current(de)},onListeningChange:de=>{b(de)}})&&console.log("[Reconstruction] Voice started via voiceMaster")},[m]),X=d.useCallback(()=>{it.stop(),b(!1),S(null)},[]);d.useEffect(()=>(Y.current=!0,()=>{Y.current=!1,it.stop(),$i.clearProtectedLane()}),[]),d.useEffect(()=>{if(a==="ready"){const V=setInterval(()=>{R(U=>!U)},800);return()=>clearInterval(V)}},[a]);const J=d.useRef(!1);d.useEffect(()=>{if(a==="ready"){J.current=!1;return}if(a==="playing"&&!m&&!J.current){J.current=!0;const V=setTimeout(()=>{q()},500);return()=>clearTimeout(V)}},[a,m,q]);const fe=d.useCallback((V,U)=>{m||(f?xe(f,V,U,!1):c[V][U]&&we(V,U,!1))},[f,c,m,xe,we]),ue=d.useCallback((V,U)=>{m||(V.dataTransfer.setData("piece",U),V.dataTransfer.effectAllowed="copy",D(U))},[m]),Ne=d.useCallback(()=>{D(null)},[]),He=d.useCallback(V=>{V.preventDefault(),V.dataTransfer.dropEffect="copy"},[]),Ee=d.useCallback((V,U,de)=>{if(V.preventDefault(),m)return;const he=V.dataTransfer.getData("piece");he&&xe(he,U,de,!1),D(null)},[m,xe]),$e=d.useCallback((V,U)=>{m||h(U)},[m]),Te=()=>{u(Array(8).fill(null).map(()=>Array(8).fill(null))),h(null),Q.current=0,T.current=0},ke=d.useCallback(()=>{const V=_A(c,W);p(V);const U=Q.current+T.current,de=U>0?Math.round(Q.current/U*100):0;x(de),y(!0),X(),n(V,de,Q.current,T.current)},[c,W,X,n]);d.useEffect(()=>{$.current=ke},[ke]);const ut=t==="white"?["a","b","c","d","e","f","g","h"]:["h","g","f","e","d","c","b","a"],vt=t==="white"?["8","7","6","5","4","3","2","1"]:["1","2","3","4","5","6","7","8"],nn=(k==null?void 0:k.type)==="color"?"animate-pulse ring-4 ring-amber-400":"";return a==="ready"?i.jsxs(Ye,{className:"w-full max-w-md mx-auto",children:[i.jsx(_t,{className:"pb-2",children:i.jsxs(Mt,{className:"text-lg flex items-center justify-between",children:[i.jsx("span",{children:"Board Reconstruction"}),i.jsx(re,{variant:"ghost",size:"sm",onClick:r,"data-testid":"button-skip-reconstruction-ready",children:"Skip"})]})}),i.jsxs(et,{className:"flex flex-col items-center justify-center py-12 gap-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx(hn,{className:`h-16 w-16 text-blue-500 transition-transform duration-300 ${j?"scale-110":"scale-100"}`}),i.jsx("div",{className:`absolute -top-1 -right-1 h-4 w-4 rounded-full ${j?"bg-green-500":"bg-green-400"} transition-colors duration-300`})]}),i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Ready to Reconstruct?"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Rebuild the position from memory using voice commands"}),i.jsx("p",{className:"text-muted-foreground text-xs",children:'Say pieces like "White Knight F3" or "Black Queen D8"'})]}),i.jsxs(re,{size:"lg",onClick:()=>{$i.register("reconstruction"),l("playing")},className:"mt-4","data-testid":"button-start-reconstruction",children:[i.jsx(hn,{className:"h-5 w-5 mr-2"}),"Start"]})]})]}):i.jsxs(Ye,{className:"w-full max-w-md mx-auto",children:[i.jsx(_t,{className:"pb-2",children:i.jsxs(Mt,{className:"text-lg flex items-center justify-between",children:[i.jsx("span",{children:"Reconstruct the Board"}),i.jsxs("div",{className:"flex items-center gap-2",children:[g!==null&&i.jsxs(Et,{variant:g>=80?"default":g>=50?"secondary":"destructive",children:[g,"%"]}),m&&w>0&&i.jsxs(Et,{variant:"outline",className:"text-amber-600 border-amber-400",children:["Voice: ",w,"%"]})]})]})}),i.jsxs(et,{className:"space-y-3",children:[!m&&i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"flex-1",children:i.jsx("p",{className:"text-sm text-muted-foreground",children:k?`Say "White" or "Black" for ${k.pieceType==="K"?"King":k.pieceType==="Q"?"Queen":k.pieceType==="R"?"Rook":k.pieceType==="B"?"Bishop":k.pieceType==="N"?"Knight":"Pawn"} on ${k.square.file}${k.square.rank}`:v?`"${C||"Knight f3"}"`:"Drag pieces or use voice commands"})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>F(V=>V==="w"?"b":"w"),className:`w-7 h-7 rounded flex items-center justify-center transition-all border-2 ${I==="w"?"bg-white border-stone-400":"bg-stone-800 border-stone-600"}`,title:`Placing ${I==="w"?"White":"Black"} pieces - tap to switch`,"data-testid":"button-sticky-color",children:i.jsx("span",{className:`text-xs font-bold ${I==="w"?"text-stone-800":"text-white"}`,children:I==="w"?"W":"B"})}),i.jsx(re,{size:"icon",variant:v?"destructive":"outline",onClick:v?X:q,className:v?"animate-pulse":"","data-testid":"button-reconstruction-mic",children:v?i.jsx(hn,{className:"h-4 w-4"}):i.jsx(mo,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-1 justify-center p-2 bg-muted rounded-md",style:{touchAction:"none"},children:[CA.map(V=>i.jsx("div",{draggable:!m,onDragStart:U=>ue(U,V),onDragEnd:Ne,onTouchStart:U=>$e(U,V),onClick:()=>!m&&h(f===V?null:V),className:`w-8 h-8 rounded transition-all cursor-grab active:cursor-grabbing ${f===V?"ring-2 ring-amber-400 bg-amber-100":P===V?"opacity-50":"hover:bg-muted-foreground/20"} ${m?"opacity-50 cursor-not-allowed":""}`,"data-testid":`piece-palette-${V}`,children:i.jsx("img",{src:tf[V],alt:V,className:"w-full h-full pointer-events-none",draggable:!1})},V)),i.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center bg-red-100 hover:bg-red-200 cursor-pointer",onClick:()=>h(null),"data-testid":"piece-palette-eraser",children:i.jsx(dw,{className:"h-4 w-4 text-red-600"})})]}),i.jsx("div",{className:`aspect-square w-full max-w-xs mx-auto rounded ${nn}`,children:i.jsx("div",{className:"grid grid-cols-8 grid-rows-8 w-full h-full border border-stone-400",style:{touchAction:"none"},children:Array.from({length:64}).map((V,U)=>{const de=Math.floor(U/8),he=U%8,le=t==="white"?de:7-de,Fe=t==="white"?he:7-he,Ae=(de+he)%2===0,Re=c[le][Fe],st=W[le][Fe],rn=`${le}-${Fe}`,Xe=B.has(rn);let Qt=Ae?"bg-amber-100":"bg-amber-700";const sn=Re===st,Qn=!Re&&st;return m&&(sn?Re!==null&&(Qt=Ae?"bg-green-200":"bg-green-600"):Qt=Ae?"bg-red-200":"bg-red-500"),i.jsxs("div",{onClick:()=>fe(le,Fe),onDragOver:He,onDrop:In=>Ee(In,le,Fe),className:`relative flex items-center justify-center cursor-pointer ${Qt} ${!m&&(f||P)?"hover:ring-2 hover:ring-amber-400 hover:ring-inset":""}`,style:{touchAction:"none"},"data-testid":`reconstruction-square-${ut[he]}${vt[de]}`,children:[m&&st&&!sn&&i.jsx("img",{src:tf[st],alt:`actual-${st}`,className:"absolute w-[85%] h-[85%] opacity-30 pointer-events-none",draggable:!1}),Re&&i.jsx("img",{src:tf[Re],alt:Re,className:`w-[85%] h-[85%] pointer-events-none z-10 transition-transform ${Xe?"animate-[voicePop_0.2s_ease-out]":""} ${m&&!sn?"animate-[shake_0.5s_ease-in-out]":""}`,draggable:!1}),m&&Qn&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center animate-[fadeSlideIn_0.6s_ease-out_forwards]",style:{animationDelay:`${(le*8+Fe)*30}ms`},children:i.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"})}),he===0&&i.jsx("span",{className:"absolute top-0.5 left-0.5 text-[8px] font-semibold select-none opacity-70",children:vt[de]}),de===7&&i.jsx("span",{className:"absolute bottom-0.5 right-0.5 text-[8px] font-semibold select-none opacity-70",children:ut[he]})]},U)})})}),i.jsx("div",{className:"flex gap-2",children:m?i.jsxs("div",{className:"flex gap-2 w-full",children:[o&&i.jsxs(re,{variant:"outline",size:"sm",onClick:o,className:"flex-1","data-testid":"button-reconstruction-view-report",children:[i.jsx(Zy,{className:"mr-1 h-4 w-4"}),"View Report"]}),i.jsx(re,{size:"sm",onClick:s||r,className:"flex-1 bg-amber-400 hover:bg-amber-500 text-stone-900","data-testid":"button-reconstruction-continue",children:"Main Menu"})]}):i.jsxs(i.Fragment,{children:[i.jsxs(re,{variant:"outline",size:"sm",onClick:Te,className:"flex-1","data-testid":"button-reconstruction-reset",children:[i.jsx(lw,{className:"mr-1 h-4 w-4"}),"Reset"]}),i.jsx(re,{variant:"outline",size:"sm",onClick:()=>{X(),r()},className:"flex-1","data-testid":"button-reconstruction-skip",children:"Skip"}),i.jsxs(re,{size:"sm",onClick:ke,className:"flex-1 bg-amber-400 hover:bg-amber-500 text-stone-900","data-testid":"button-reconstruction-submit",children:[i.jsx(v2,{className:"mr-1 h-4 w-4"}),"Check"]})]})}),m&&i.jsx("div",{className:"text-center text-sm",children:g!==null&&g>=80?i.jsxs("p",{className:"text-green-600 flex items-center justify-center gap-1",children:[i.jsx(ul,{className:"h-4 w-4"})," Excellent memory!"]}):g!==null&&g>=50?i.jsx("p",{className:"text-amber-600",children:"Good effort! Keep practicing."}):i.jsxs("p",{className:"text-red-600 flex items-center justify-center gap-1",children:[i.jsx(So,{className:"h-4 w-4"})," Keep training your visualization!"]})})]})]})}function LA({responseTimes:e,onJumpToMove:t}){if(e.length<3)return i.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"Not enough moves to display stamina graph"});const n=Math.max(...e,1),r=e.length,o=Math.max(100,r*(4+2)),a=(y,g)=>{const p=y/g;return p<.15?"bg-green-500":p<.6?"bg-amber-400":"bg-red-400"},l=Math.floor(r*.15),c=Math.floor(r*.6),u={opening:e.slice(0,l),middlegame:e.slice(l,c),endgame:e.slice(c)},f=u.opening.length>0?u.opening.reduce((y,g)=>y+g,0)/u.opening.length:0,h=u.endgame.length>0?u.endgame.reduce((y,g)=>y+g,0)/u.endgame.length:0,m=f>0?Math.round((h-f)/f*100):0;return i.jsxs("div",{className:"space-y-3","data-testid":"mental-stamina-graph",children:[i.jsx("div",{className:"w-full overflow-x-auto pb-1",children:i.jsxs("div",{className:"h-24 flex items-end bg-muted/30 rounded-md p-2 relative",style:{width:`${o}px`,minWidth:"100%"},children:[e.map((y,g)=>{const p=Math.max(4,y/n*100),w=a(g,r);return i.jsx("div",{className:`${w} rounded-t-sm flex-1 cursor-pointer hover:opacity-80 active:opacity-60`,style:{height:`${p}%`,minWidth:"4px",marginLeft:"1px",marginRight:"1px"},onClick:()=>t==null?void 0:t(g),title:`Move ${g+1}: ${si(y)}`,"data-testid":`stamina-bar-${g}`},g)}),i.jsx("div",{className:"absolute bottom-0 w-full h-[1px] bg-muted-foreground/20"})]})}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded"}),i.jsx("span",{children:"Opening"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded"}),i.jsx("span",{children:"Middlegame"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-red-400 rounded"}),i.jsx("span",{children:"Endgame"})]})]}),m!==0&&i.jsx("div",{className:"flex items-center justify-center gap-2 text-sm",children:m>0?i.jsxs(i.Fragment,{children:[i.jsx(fw,{className:"h-4 w-4 text-red-500"}),i.jsxs("span",{className:"text-red-500",children:[m,"% slower in endgame"]})]}):i.jsxs(i.Fragment,{children:[i.jsx(hw,{className:"h-4 w-4 text-green-500"}),i.jsxs("span",{className:"text-green-500",children:[Math.abs(m),"% faster in endgame"]})]})})]})}function IA({squareInquiries:e}){const t=["a","b","c","d","e","f","g","h"],n=["8","7","6","5","4","3","2","1"],r={};for(const a of e){const l=a.toLowerCase();r[l]=(r[l]||0)+1}const s=Math.max(...Object.values(r),1),o=a=>{const l=r[a]||0;if(l===0)return"bg-muted/30";const c=l/s*100;return c<25?"bg-amber-200 dark:bg-amber-900/40":c<50?"bg-amber-400 dark:bg-amber-700/60":c<75?"bg-red-400 dark:bg-red-700/70":"bg-red-600 dark:bg-red-600/80"};return e.length===0?i.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"No square inquiries this game"}):i.jsxs("div",{className:"space-y-2","data-testid":"spatial-blur-heatmap",children:[i.jsx("div",{className:"grid grid-cols-8 gap-0.5 aspect-square max-w-[180px] mx-auto",children:n.map(a=>t.map(l=>{const c=`${l}${a}`,u=r[c]||0;return i.jsx("div",{className:`${o(c)} rounded-sm flex items-center justify-center text-[8px] font-mono`,title:`${c.toUpperCase()}: ${u} inquiries`,"data-testid":`heatmap-square-${c}`,children:u>0&&i.jsx("span",{className:"text-foreground/70",children:u})},c)}))}),i.jsxs("p",{className:"text-xs text-muted-foreground text-center","data-testid":"text-total-inquiries",children:[e.length," total inquiries"]})]})}function $A({open:e,gameResult:t,playerColor:n,clarityScore:r,responseTimes:s,squareInquiries:o,reconstructionScore:a,reconstructionVoicePurity:l,reconstructionEnabled:c,onRematch:u,onMainMenu:f,onAnalyze:h}){const m=t==="white_win"&&n==="white"||t==="black_win"&&n==="black",y=t==="draw"?"Game Drawn":m?"Victory":"Defeat",g=t==="draw"?"text-amber-500":m?"text-green-500":"text-red-500",p=s.length>0?s.reduce((w,x)=>w+x,0)/s.length:0;return i.jsx(Li,{open:e,children:i.jsxs(Co,{className:"max-w-md max-h-[90vh] overflow-y-auto [&>button.absolute]:hidden",onPointerDownOutside:w=>w.preventDefault(),onInteractOutside:w=>w.preventDefault(),onEscapeKeyDown:w=>w.preventDefault(),children:[i.jsxs(re,{variant:"ghost",size:"icon",className:"absolute right-4 top-4 h-6 w-6 rounded-sm opacity-70 hover:opacity-100",onClick:f,"data-testid":"button-postmortem-close",children:[i.jsx(So,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]}),i.jsx(jo,{children:i.jsxs(Eo,{className:"flex items-center gap-3",children:[i.jsx(Vn,{className:`h-6 w-6 ${g}`}),i.jsx("span",{className:g,children:y})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(Ye,{className:"bg-muted/30 border-0",children:i.jsxs(et,{className:"p-3 text-center",children:[i.jsx(Yy,{className:"h-5 w-5 mx-auto mb-1 text-amber-500"}),i.jsxs("p",{className:"text-2xl font-bold text-amber-500",children:[r,"%"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Reconstruction Score"})]})}),i.jsx(Ye,{className:"bg-muted/30 border-0",children:i.jsxs(et,{className:"p-3 text-center",children:[i.jsx(ho,{className:"h-5 w-5 mx-auto mb-1 text-blue-500"}),i.jsx("p",{className:"text-2xl font-bold",children:si(p)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Response"})]})})]}),i.jsx(Pr,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Jj,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm font-medium",children:"Mental Stamina"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Response time changes throughout the game"}),i.jsx(LA,{responseTimes:s})]}),i.jsx(Pr,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(sw,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm font-medium",children:"Spatial Blurs"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Squares you needed to inquire about"}),i.jsx(IA,{squareInquiries:o})]}),c&&a!==null&&i.jsxs(i.Fragment,{children:[i.jsx(Pr,{}),i.jsxs("div",{className:"space-y-2","data-testid":"reconstruction-stats",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(p2,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm font-medium",children:"Board Reconstruction"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(Ye,{className:"bg-muted/30 border-0",children:i.jsxs(et,{className:"p-3 text-center",children:[i.jsxs("p",{className:`text-xl font-bold ${a>=80?"text-green-500":a>=50?"text-amber-500":"text-red-500"}`,children:[a,"%"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Accuracy"})]})}),l!==null&&i.jsx(Ye,{className:"bg-muted/30 border-0",children:i.jsxs(et,{className:"p-3 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-1 mb-0.5",children:[i.jsx(hn,{className:"h-3 w-3 text-purple-500"}),i.jsxs("p",{className:`text-xl font-bold ${l>=80?"text-purple-500":l>=50?"text-amber-500":"text-muted-foreground"}`,children:[l,"%"]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Voice Purity"})]})})]})]})]}),i.jsx(Pr,{}),h&&i.jsxs(re,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:h,"data-testid":"button-postmortem-analyze",children:[i.jsx(cw,{className:"mr-2 h-4 w-4"}),"Analyze Game"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(re,{className:"flex-1 bg-black hover:bg-stone-800 text-white",onClick:u,"data-testid":"button-postmortem-rematch",children:[i.jsx(lw,{className:"mr-2 h-4 w-4"}),"Rematch"]}),i.jsxs(re,{variant:"outline",className:"flex-1 bg-amber-400 hover:bg-amber-500 text-black border-black",onClick:f,"data-testid":"button-postmortem-menu",children:[i.jsx(f2,{className:"mr-2 h-4 w-4"}),"Menu"]})]})]})]})})}const r0=10;function s0(e){return Math.max(-r0,Math.min(r0,e))}class OA{constructor(){this.worker=null,this.isReady=!1,this.isSearching=!1,this.messageHandlers=[],this.initPromise=null,this.requestQueue=Promise.resolve()}async init(){if(!this.isReady)return this.initPromise?this.initPromise:(this.initPromise=new Promise((t,n)=>{try{typeof WebAssembly=="object"&&WebAssembly.validate(Uint8Array.of(0,97,115,109,1,0,0,0))||console.warn("[ClientStockfish] WebAssembly not supported, using slower JS fallback");const s="/stockfish/stockfish-17.1-lite-single-03e3232.js";this.worker=new Worker(s),this.worker.onmessage=l=>{const c=typeof l.data=="string"?l.data:"";for(const u of this.messageHandlers)u(c)},this.worker.onerror=l=>{console.error("[ClientStockfish] Worker error:",l),n(l)},this.sendCommand("uci");let o=!1;const a=l=>{l==="uciok"&&(o=!0,this.sendCommand("setoption name Hash value 16"),console.log("[ClientStockfish] Set Hash table to 16MB for mobile optimization"),this.sendCommand("isready")),l==="readyok"&&o&&(this.removeHandler(a),this.isReady=!0,console.log("[ClientStockfish] Engine ready"),t())};this.addHandler(a),setTimeout(()=>{this.isReady||n(new Error("Stockfish initialization timeout"))},3e4)}catch(r){n(r)}}),this.initPromise)}addHandler(t){this.messageHandlers.push(t)}removeHandler(t){const n=this.messageHandlers.indexOf(t);n>-1&&this.messageHandlers.splice(n,1)}sendCommand(t){this.worker&&this.worker.postMessage(t)}async getBestMove(t,n={}){const r=()=>new Promise(async(o,a)=>{const l=setTimeout(()=>{a(new Error("getBestMove timeout"))},3e4);try{this.isReady||await this.init(),n.skillLevel!==void 0&&this.sendCommand(`setoption name Skill Level value ${n.skillLevel}`),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`);let c="go";n.depth?c+=` depth ${n.depth}`:n.nodes?c+=` nodes ${n.nodes}`:n.moveTime?c+=` movetime ${n.moveTime}`:c+=" depth 15",this.isSearching=!0,this.sendCommand(c);let u,f;const h=m=>{if(m.startsWith("info depth")){const y=m.match(/depth (\d+)/),g=m.match(/score cp (-?\d+)/),p=m.match(/score mate (-?\d+)/);y&&(f=parseInt(y[1])),g&&(u=parseInt(g[1])/100),p&&(u=parseInt(p[1])>0?100:-100)}if(m.startsWith("bestmove")){clearTimeout(l),this.removeHandler(h),this.isSearching=!1;const y=m.match(/bestmove (\S+)/);y?o({bestMove:y[1],evaluation:u,depth:f}):a(new Error("Failed to parse bestmove"))}};this.addHandler(h)}catch(c){clearTimeout(l),this.isSearching=!1,a(c)}}),s=this.requestQueue.then(r,r);return this.requestQueue=s.catch(()=>{}),s}async analyzePosition(t,n=1e6){const r=()=>new Promise(async(o,a)=>{const l=setTimeout(()=>{a(new Error("analyzePosition timeout"))},6e4);try{this.isReady||await this.init(),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`),this.isSearching=!0,this.sendCommand(`go nodes ${n}`);let c=0,u=0,f="",h=[],m=!1,y;const g=p=>{if(p.startsWith("info depth")&&p.includes(" pv ")){const w=p.match(/depth (\d+)/),x=p.match(/score cp (-?\d+)/),v=p.match(/score mate (-?\d+)/),b=p.match(/ pv (.+)/);if(w&&(u=parseInt(w[1])),x&&(c=parseInt(x[1])/100,m=!1,y=void 0),v){const k=parseInt(v[1]);c=k>0?999:-999,m=!0,y=Math.abs(k)}b&&(h=b[1].trim().split(" "))}if(p.startsWith("bestmove")){clearTimeout(l),this.removeHandler(g),this.isSearching=!1;const w=p.match(/bestmove (\S+)/);w?(f=w[1],o({evaluation:s0(c),bestMove:f,bestMoveEval:s0(c),principalVariation:h,depth:u,isMate:m,mateIn:y})):a(new Error("Failed to parse bestmove"))}};this.addHandler(g)}catch(c){clearTimeout(l),this.isSearching=!1,a(c)}}),s=this.requestQueue.then(r,r);return this.requestQueue=s.catch(()=>{}),s}async getTopMoves(t,n=3,r=1e6,s){const o=s===void 0||s==="w"?1:-1,a=()=>new Promise(async(c,u)=>{const f=setTimeout(()=>{this.sendCommand("setoption name MultiPV value 1"),c([])},3e4);try{this.isReady||await this.init(),this.sendCommand("stop"),this.sendCommand("ucinewgame"),this.sendCommand(`setoption name MultiPV value ${n}`),this.sendCommand(`position fen ${t}`),this.isSearching=!0,this.sendCommand(`go nodes ${r}`);const h=new Map,m=y=>{if(y.startsWith("info depth")&&y.includes(" pv ")){const g=y.match(/multipv (\d+)/),p=y.match(/score cp (-?\d+)/),w=y.match(/score mate (-?\d+)/),x=y.match(/ pv (.+)/),v=g?parseInt(g[1]):1;if(x){const b=x[1].trim().split(" "),k=b[0];let S=0,C=!1,N;if(p&&(S=parseInt(p[1])/100*o),w){const j=parseInt(w[1]);S=(j>0?999:-999)*o,C=!0,N=Math.abs(j)}h.set(v,{move:k,evaluation:S,isMate:C,mateIn:N,principalVariation:b})}}if(y.startsWith("bestmove")){clearTimeout(f),this.removeHandler(m),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1");const g=[];for(let p=1;p<=n;p++){const w=h.get(p);w&&g.push(w)}c(g)}};this.addHandler(m)}catch(h){clearTimeout(f),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1"),u(h)}}),l=this.requestQueue.then(a,a);return this.requestQueue=l.catch(()=>{}),l}async getBotMove(t,n){const r=u=>u<=400?0:u<=600?2:u<=800?4:u<=1e3?6:u<=1200?8:u<=1400?11:u<=1600?14:u<=1800?17:u<=2e3?18:u<=2200?19:20,s=u=>u<=600?5:u<=1e3?4:u<=1400?3:u<=1800?2:1,o=u=>u<=400?500:u<=600?1e3:u<=800?2e3:u<=1e3?5e3:u<=1200?1e4:u<=1400?2e4:u<=1600?5e4:u<=1800?1e5:u<=2e3?25e4:u<=2200?5e5:u<=2400?1e6:15e5,a=u=>u<=400||u<=600?1:u<=800?2:u<=1e3?3:u<=1200?4:u<=1400?5:u<=1600?6:0,l=()=>new Promise(async(u,f)=>{const h=setTimeout(()=>{f(new Error("getBotMove timeout"))},3e4);try{this.isReady||await this.init();const m=r(n),y=s(n),g=o(n),p=a(n);this.sendCommand(`setoption name Skill Level value ${m}`),this.sendCommand("setoption name UCI_LimitStrength value true"),this.sendCommand(`setoption name UCI_Elo value ${Math.min(Math.max(n,400),3200)}`),this.sendCommand(`setoption name MultiPV value ${y}`),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`),this.isSearching=!0,p>0?this.sendCommand(`go depth ${p} nodes ${g}`):this.sendCommand(`go nodes ${g}`);const w=new Map,x=v=>{var b;if(v.startsWith("info depth")&&v.includes(" pv ")){const k=v.match(/multipv (\d+)/),S=v.match(/ pv (\S+)/),C=v.match(/score cp (-?\d+)/),N=k?parseInt(k[1]):1,j=S?S[1]:null,R=C?parseInt(C[1])/100:void 0;j&&w.set(N,{move:j,eval:R})}if(v.startsWith("bestmove")){clearTimeout(h),this.removeHandler(x),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1"),this.sendCommand("setoption name UCI_LimitStrength value false"),this.sendCommand("setoption name Skill Level value 20");let k;const S=Array.from(w.values()).slice(0,y);if(S.length===0){const C=v.match(/bestmove (\S+)/);k=C?C[1]:void 0}else if(S.length===1)k=S[0].move;else{const C=Math.random()*100;n<=600?C<40?k=S[0].move:C<70&&S[1]?k=S[1].move:C<90&&S[2]?k=S[2].move:k=S[Math.min(Math.floor(C/25),S.length-1)].move:n<=1e3?C<55?k=S[0].move:C<80&&S[1]?k=S[1].move:C<95&&S[2]?k=S[2].move:k=S[Math.min(Math.floor(C/25),S.length-1)].move:n<=1400?C<70?k=S[0].move:C<90&&S[1]?k=S[1].move:S[2]?k=S[2].move:k=S[0].move:n<=1800?C<85?k=S[0].move:C<97&&S[1]?k=S[1].move:S[2]?k=S[2].move:k=S[0].move:C<95?k=S[0].move:S[1]?k=S[1].move:k=S[0].move}k?u({bestMove:k,evaluation:(b=w.get(1))==null?void 0:b.eval,isFreeCapture:!1}):f(new Error("Failed to get bot move"))}};this.addHandler(x)}catch(m){clearTimeout(h),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1"),this.sendCommand("setoption name UCI_LimitStrength value false"),this.sendCommand("setoption name Skill Level value 20"),f(m)}}),c=this.requestQueue.then(l,l);return this.requestQueue=c.catch(()=>{}),c}async getDepthLimitedMove(t,n){const r=()=>new Promise(async(o,a)=>{const l=setTimeout(()=>{a(new Error("getDepthLimitedMove timeout"))},3e4);try{this.isReady||await this.init(),this.sendCommand("setoption name UCI_LimitStrength value false"),this.sendCommand("setoption name Skill Level value 20"),this.sendCommand("setoption name MultiPV value 1"),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`),this.isSearching=!0,this.sendCommand(`go depth ${n}`);let c,u;const f=h=>{if(h.startsWith("info depth")&&h.includes(" pv ")){const m=h.match(/ pv (\S+)/),y=h.match(/score cp (-?\d+)/),g=h.match(/score mate (-?\d+)/);m&&(c=m[1]),y?u=parseInt(y[1])/100:g&&(u=parseInt(g[1])>0?100:-100)}if(h.startsWith("bestmove")){clearTimeout(l),this.removeHandler(f),this.isSearching=!1;const m=h.match(/bestmove (\S+)/);m&&(c=m[1]),c?o({bestMove:c,evaluation:u,isFreeCapture:!1}):a(new Error("Failed to get depth-limited move"))}};this.addHandler(f)}catch(c){clearTimeout(l),this.isSearching=!1,a(c)}}),s=this.requestQueue.then(r,r);return this.requestQueue=s.catch(()=>{}),s}stopAnalysis(){this.worker&&this.isSearching&&(this.sendCommand("stop"),this.isSearching=!1,console.debug("[ClientStockfish] Analysis halted safely."))}shutdown(){this.worker&&(this.sendCommand("quit"),this.worker.terminate(),this.worker=null,this.isReady=!1,this.initPromise=null)}isInitialized(){return this.isReady}}const Si=new OA;function DA({evaluation:e,isLoading:t,isMate:n,mateIn:r,playerColor:s}){const o=e!==null?s==="black"?-e:e:null,l=e!==null?(y=>n?y>0?100:0:50+Math.max(-10,Math.min(10,y))/10*50)(e):50,c=y=>y===null?"...":n&&r!==void 0?y>0?`M${r}`:`-M${r}`:`${y>=0?"+":""}${y.toFixed(1)}`,u=s==="black",f=u?"bg-white":"bg-stone-900",h=u?"bg-stone-900":"bg-white",m=u?l:100-l;return i.jsxs("div",{className:"flex flex-col items-center w-full h-full","data-testid":"evaluation-bar",children:[i.jsx("div",{className:"text-xs font-mono font-bold mb-1 flex-shrink-0","data-testid":"evaluation-value",children:c(o)}),i.jsxs("div",{className:`relative w-full rounded overflow-hidden border border-border ${h} flex-1 min-h-0`,children:[i.jsx("div",{className:`absolute top-0 left-0 right-0 ${f} transition-all duration-300`,style:{height:`${m}%`}}),i.jsx("div",{className:"absolute left-0 right-0 h-[2px] bg-amber-500",style:{top:"50%",transform:"translateY(-50%)"}}),t&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:i.jsx(ow,{className:"h-3 w-3 animate-spin text-white"})})]})]})}function BA({position:e,flipped:t,lastMove:n,bestMoveSquares:r}){const s=new Mr(e),o=["a","b","c","d","e","f","g","h"],a=["8","7","6","5","4","3","2","1"],l=t?[...o].reverse():o,c=t?[...a].reverse():a,u={K:"",Q:"",R:"",B:"",N:"",P:"",k:"",q:"",r:"",b:"",n:"",p:""};return i.jsx("div",{className:"aspect-square w-full","data-testid":"analysis-board",children:i.jsx("div",{className:"grid grid-cols-8 grid-rows-8 w-full h-full border border-stone-400",children:c.map(f=>l.map(h=>{const m=`${h}${f}`,y=s.get(m),g=(o.indexOf(h)+a.indexOf(f))%2===0,p=n&&(n.from===m||n.to===m),w=r&&(r.from===m||r.to===m);return i.jsx("div",{className:`aspect-square flex items-center justify-center text-2xl sm:text-3xl
                  ${g?"bg-amber-100 dark:bg-amber-200":"bg-amber-600 dark:bg-amber-700"}
                  ${p?"ring-2 ring-inset ring-amber-400":""}
                  ${w?"ring-2 ring-inset ring-emerald-500":""}
                `,"data-testid":`analysis-square-${m}`,children:y&&i.jsx("span",{className:y.color==="w"?"text-white drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)]":"text-black",children:u[y.color==="w"?y.type.toUpperCase():y.type]})},m)}))})})}function o0({moveHistory:e,playerColor:t,onClose:n,gameResult:r,botElo:s}){const{toast:o}=al(),[a,l]=d.useState(0),[c,u]=d.useState(!0),[f,h]=d.useState(!1),[m,y]=d.useState(!0),[g,p]=d.useState(0),[w,x]=d.useState(new Map),v=d.useRef(!1);d.useEffect(()=>{const O=document.getElementById(`move-${a}`);O&&O.scrollIntoView({behavior:"smooth",block:"nearest"})},[a]);const b=d.useMemo(()=>{const O=new Mr,q=r==="white_win"?"1-0":r==="black_win"?"0-1":r==="draw"?"1/2-1/2":"*",X=new Date,J=`${X.getFullYear()}.${String(X.getMonth()+1).padStart(2,"0")}.${String(X.getDate()).padStart(2,"0")}`;return O.header("Event","Blindfold Chess Challenge","Site","Mobile App","Date",J,"Round","?","White",t==="white"?"User":`Stockfish (Elo ${s||"?"})`,"Black",t==="black"?"User":`Stockfish (Elo ${s||"?"})`,"Result",q),e.forEach(fe=>{try{O.move(fe)}catch{console.warn("[PGN] Could not add move:",fe)}}),O.pgn()},[e,t,r,s]),k=async()=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(b);else{const O=document.createElement("textarea");O.value=b,O.style.position="fixed",O.style.left="-9999px",document.body.appendChild(O),O.focus(),O.select(),document.execCommand("copy"),document.body.removeChild(O)}h(!0),o({title:"PGN Copied",description:"Game notation copied to clipboard",duration:2e3}),setTimeout(()=>h(!1),2e3)}catch(O){console.error("[PGN] Copy failed:",O),o({title:"Copy Failed",description:"Could not copy to clipboard",variant:"destructive",duration:2e3})}},S=()=>{const O=new Date,X=`blindfold-game-${`${O.getFullYear()}${String(O.getMonth()+1).padStart(2,"0")}${String(O.getDate()).padStart(2,"0")}-${String(O.getHours()).padStart(2,"0")}${String(O.getMinutes()).padStart(2,"0")}`}.pgn.txt`,J=document.createElement("a"),fe=new Blob([b],{type:"text/plain"});J.href=URL.createObjectURL(fe),J.download=X,document.body.appendChild(J),J.click(),document.body.removeChild(J),URL.revokeObjectURL(J.href),o({title:"PGN Downloaded",description:X,duration:2e3})},C=d.useMemo(()=>{const O=[],q=new Mr;O.push({fen:q.fen(),lastMove:null});for(let X=0;X<e.length;X++)try{const J=q.move(e[X]);J?O.push({fen:q.fen(),lastMove:{from:J.from,to:J.to}}):console.warn(`[Analysis] Move returned null at index ${X}: ${e[X]}`)}catch(J){console.warn(`[Analysis] Skipping invalid move at index ${X}: ${e[X]}`,J)}return console.log(`[Analysis] Built ${O.length} positions from ${e.length} moves`),O},[e]);d.useEffect(()=>((async()=>{y(!0),p(0),v.current=!1;const q=new Map,X=C.length;for(let J=0;J<X&&!v.current;J++){const{fen:fe}=C[J];try{const ue=await Si.analyzePosition(fe,5e5);if(v.current)break;const He=fe.split(" ")[1]==="b",Ee=He?-ue.evaluation:ue.evaluation,$e=ue.mateIn!==void 0&&He?-ue.mateIn:ue.mateIn;q.set(J,{eval:Ee,isMate:ue.isMate,mateIn:$e!==void 0?Math.abs($e):void 0,bestMove:ue.bestMove})}catch(ue){if(v.current)break;console.error(`[Analysis] Error evaluating position ${J}:`,ue)}v.current||(p(Math.round((J+1)/X*100)),x(new Map(q))),await new Promise(ue=>setTimeout(ue,10))}v.current||y(!1)})(),()=>{v.current=!0}),[C]);const N=C[a]||C[0],j=N.fen,R=N.lastMove,P=w.get(a),D=(P==null?void 0:P.eval)??null,I=(P==null?void 0:P.isMate)??!1,F=P==null?void 0:P.mateIn,L=(P==null?void 0:P.bestMove)??null,B=()=>l(0),H=()=>l(Math.max(0,a-1)),Q=()=>l(Math.min(C.length-1,a+1)),T=()=>l(C.length-1),$=O=>l(Math.min(O,C.length-1)),W=(()=>{const O=[];for(let q=0;q<e.length;q+=2)O.push({moveNumber:Math.floor(q/2)+1,white:e[q],black:e[q+1],whiteIndex:q+1,blackIndex:e[q+1]?q+2:void 0});return O})(),ge=O=>!O||O.length<4?null:{from:O.slice(0,2),to:O.slice(2,4)},xe=O=>{if(!O)return null;try{const X=new Mr(j).move({from:O.slice(0,2),to:O.slice(2,4),promotion:O.length>4?O[4]:void 0});return X?X.san:O}catch{return O}},we=c?ge(L):null,Ce=xe(L);return m&&g<100?i.jsxs("div",{className:"fixed inset-0 z-50 bg-background flex flex-col","data-testid":"analysis-view",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Game Analysis"}),i.jsx(re,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-analysis-close",children:i.jsx(So,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 gap-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ow,{className:"h-6 w-6 animate-spin text-amber-500"}),i.jsx("span",{className:"text-lg font-medium",children:"Analyzing game..."})]}),i.jsxs("div",{className:"w-full max-w-xs space-y-2",children:[i.jsx(bi,{value:g,className:"h-3"}),i.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:[g,"% complete (",Math.round(g/100*C.length)," / ",C.length," positions)"]})]}),i.jsx("p",{className:"text-sm text-muted-foreground text-center max-w-sm",children:"This will take a few seconds. Once complete, you can navigate through moves instantly."})]})]}):i.jsxs("div",{className:"fixed inset-0 z-50 bg-background flex flex-col","data-testid":"analysis-view",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Game Analysis"}),i.jsx(re,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-analysis-close",children:i.jsx(So,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[i.jsxs("div",{className:"flex flex-col gap-3 items-center",children:[i.jsxs("div",{className:"grid grid-cols-[24px_1fr] gap-2 w-full max-w-[352px]",children:[i.jsx(DA,{evaluation:D,isLoading:!1,isMate:I,mateIn:F,playerColor:t}),i.jsx(BA,{position:j,flipped:t==="black",lastMove:R,bestMoveSquares:we})]}),i.jsxs("div",{className:"flex justify-center gap-1",children:[i.jsx(re,{variant:"outline",size:"icon",onClick:B,disabled:a===0,"data-testid":"button-analysis-start",children:i.jsx(s2,{className:"h-4 w-4"})}),i.jsx(re,{variant:"outline",size:"icon",onClick:H,disabled:a===0,"data-testid":"button-analysis-back",children:i.jsx(Im,{className:"h-4 w-4"})}),i.jsx(re,{variant:"outline",size:"icon",onClick:Q,disabled:a===C.length-1,"data-testid":"button-analysis-forward",children:i.jsx(n2,{className:"h-4 w-4"})}),i.jsx(re,{variant:"outline",size:"icon",onClick:T,disabled:a===C.length-1,"data-testid":"button-analysis-end",children:i.jsx(o2,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm","data-testid":"best-move-display",children:[i.jsx(re,{variant:c?"default":"outline",size:"sm",onClick:()=>u(!c),className:"h-7 px-2","data-testid":"button-toggle-best-move",children:c?"Hide Best":"Show Best"}),c&&Ce&&i.jsxs("span",{className:"font-mono bg-emerald-500/20 text-emerald-600 dark:text-emerald-400 px-2 py-1 rounded","data-testid":"text-best-move",children:["Best: ",Ce]})]})]}),i.jsxs("div",{className:"flex items-center justify-between mt-4 mb-2",children:[i.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Move List"}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs(re,{variant:"outline",size:"sm",onClick:k,className:"h-7 px-2","data-testid":"button-copy-pgn",children:[f?i.jsx(ul,{className:"h-3 w-3 mr-1"}):i.jsx(ew,{className:"h-3 w-3 mr-1"}),f?"Copied":"Copy"]}),i.jsxs(re,{variant:"outline",size:"sm",onClick:S,className:"h-7 px-2","data-testid":"button-download-pgn",children:[i.jsx(c2,{className:"h-3 w-3 mr-1"}),"Download"]})]})]}),i.jsx(Ye,{className:"p-3 max-h-40 overflow-y-auto scroll-smooth","data-testid":"analysis-move-list",children:i.jsx("div",{className:"grid grid-cols-[auto_1fr_1fr] gap-x-3 gap-y-1 text-sm font-mono",children:W.map(O=>i.jsxs(d.Fragment,{children:[i.jsxs("span",{className:"text-muted-foreground",children:[O.moveNumber,"."]}),i.jsx("button",{id:`move-${O.whiteIndex}`,onClick:()=>$(O.whiteIndex),className:`text-left px-1 rounded hover:bg-muted transition-colors ${a===O.whiteIndex?"bg-amber-400 text-black font-bold":""}`,"data-testid":`move-white-${O.moveNumber}`,children:O.white}),O.black?i.jsx("button",{id:`move-${O.blackIndex}`,onClick:()=>$(O.blackIndex),className:`text-left px-1 rounded hover:bg-muted transition-colors ${a===O.blackIndex?"bg-amber-400 text-black font-bold":""}`,"data-testid":`move-black-${O.moveNumber}`,children:O.black}):i.jsx("span",{})]},O.moveNumber))})})]})]})}const nf=Ws("KeepAwake",{web:()=>Hi(()=>import("./web-YipvMudu.js"),[]).then(e=>new e.KeepAwakeWeb)});var Ue;(function(e){e.Heavy="HEAVY",e.Medium="MEDIUM",e.Light="LIGHT"})(Ue||(Ue={}));var Bi;(function(e){e.Success="SUCCESS",e.Warning="WARNING",e.Error="ERROR"})(Bi||(Bi={}));const Ve=Ws("Haptics",{web:()=>Hi(()=>import("./web-Bq9qwzhW.js"),[]).then(e=>new e.HapticsWeb)}),gk=Object.freeze(Object.defineProperty({__proto__:null,Haptics:Ve,get ImpactStyle(){return Ue},get NotificationType(){return Bi}},Symbol.toStringTag,{value:"Module"}));new BigUint64Array(768);new BigUint64Array(4);new BigUint64Array(8);const zr=[];function FA(){if(zr.length>0)return;let e=new Array(781);e[0]=1n;for(let t=1;t<781;t++)e[t]=e[t-1]*6364136223846793005n+1442695040888963407n&0xFFFFFFFFFFFFFFFFn;for(let t=0;t<781;t++)zr[t]=e[t]}const zA={p:0,P:1,n:2,N:3,b:4,B:5,r:6,R:7,q:8,Q:9,k:10,K:11};function VA(e,t,n){const r=[],s=e.split("/");for(let l=0;l<8;l++){const c=s[l],u=[];for(const f of c)if(f>="1"&&f<="8")for(let h=0;h<parseInt(f);h++)u.push("");else u.push(f);r.push(u)}const o=t==="w"?"P":"p",a=t==="w"?3:4;return n>0&&r[a][n-1]===o||n<7&&r[a][n+1]===o}function qA(e){FA();const t=e.split(" "),n=t[0],r=t[1]||"w",s=t[2]||"-",o=t[3]||"-";let a=0n,l=56;for(const c of n)if(c==="/")l-=16;else if(c>="1"&&c<="8")l+=parseInt(c);else{const u=zA[c];if(u!==void 0){const f=64*u+l;f<768&&(a^=zr[f])}l++}if(s.includes("K")&&(a^=zr[768]),s.includes("Q")&&(a^=zr[769]),s.includes("k")&&(a^=zr[770]),s.includes("q")&&(a^=zr[771]),o!=="-"){const c=o.charCodeAt(0)-97;c>=0&&c<8&&VA(n,r,c)&&(a^=zr[772+c])}return r==="w"&&(a^=zr[780]),a}function WA(e){const t=e&7,n=e>>3&7,r=e>>6&7,s=e>>9&7,o=e>>12&7,a="abcdefgh",l=a[r]+(s+1),c=a[t]+(n+1);let u;return o>0&&(u=["","n","b","r","q"][o]),{from:l,to:c,promotion:u}}let rf=null,dr=[],sf=!1,ec=null;async function UA(){if(!sf)return ec||(ec=(async()=>{try{const e=await fetch("/openings.bin");if(!e.ok)throw new Error(`Failed to load opening book: ${e.status}`);rf=await e.arrayBuffer();const t=new DataView(rf),n=rf.byteLength/16;dr=[];for(let r=0;r<n;r++){const s=r*16,o=t.getUint32(s,!1),a=t.getUint32(s+4,!1),l=BigInt(o)<<32n|BigInt(a),c=t.getUint16(s+8,!1),u=t.getUint16(s+10,!1);dr.push({key:l,move:c,weight:u})}dr.sort((r,s)=>r.key<s.key?-1:r.key>s.key?1:0),sf=!0,console.log(`[OpeningBook] Loaded ${n} entries from Polyglot book`)}catch(e){console.error("[OpeningBook] Failed to load opening book:",e),dr=[],sf=!0}})(),ec)}function HA(e){const t=[];let n=0,r=dr.length-1,s=-1;for(;n<=r;){const o=Math.floor((n+r)/2);dr[o].key===e?(s=o,r=o-1):dr[o].key<e?n=o+1:r=o-1}if(s===-1)return t;for(let o=s;o<dr.length&&dr[o].key===e;o++)t.push({move:dr[o].move,weight:dr[o].weight});return t}async function GA(e){await UA();const t=qA(e),r=HA(t).map(s=>{const o=WA(s.move);return{from:o.from,to:o.to,promotion:o.promotion,weight:s.weight}});return r.sort((s,o)=>o.weight-s.weight),{moves:r}}function KA(e){return e<30}function QA(e,t){const n=e.split(" ")[0];let r=0;if(t==="white")for(const s of n)s>="A"&&s<="Z"&&r++;else for(const s of n)s>="a"&&s<="z"&&r++;return r}function YA(e,t){if(!e||!e.captured)return!1;try{const r=new Mr(t).moves({verbose:!0}),s=e.to;return r.some(o=>o.to===s&&o.captured)}catch{return!1}}function XA(e,t){try{const n=new Mr(e),r=t.slice(0,2),s=t.slice(2,4),o=n.move({from:r,to:s,promotion:t.length>4?t[4]:void 0});return!o||!o.captured?!1:!n.moves({verbose:!0}).some(l=>l.to===s&&l.captured)}catch{return!1}}function ZA(e,t,n,r,s){let o=500+Math.random()*1e3;return YA(s,n)?Math.min(o,800):(e<=10&&(o*=.7),QA(n,r)>=10&&e>10&&e<30&&(o*=1.3),t<60?o*=.5:t<180&&(o*=.7),Math.max(300,Math.min(3e3,o)))}function JA(e){const t=e.split(" ")[0];let n=0;for(const r of t)/[pnbrqkPNBRQK]/.test(r)&&n++;return n}function e4(e,t,n,r="blitz"){if(n<30)return 500;if(n<60)return 1e3;const o=r==="classical"?2:r==="rapid"?1.5:1,a=(c,u)=>(Math.random()*(u-c)+c)*1e3;let l;return e<=6?l=a(1,2):e<=10?l=a(2,3):e<=15?l=a(3,8):e<=20||t>=26?l=a(4,8):t>=20?l=a(4,7):t>=14?l=a(3,6):t>=9?l=a(2,4):l=a(1,2),l*o}function t4(e){try{const n=new Mr(e).moves({verbose:!0});if(n.length===0)return null;const r=n[Math.floor(Math.random()*n.length)];return r.from+r.to+(r.promotion||"")}catch{return null}}async function n4(e,t,n,r){try{const s=su(t);if(s.randomPercent>0&&Math.random()*100<s.randomPercent){const l=t4(e);if(l)return console.log(`[BotEngine] Elo ${t}: Playing random move (${s.randomPercent}% chance)`),{move:l,isBookMove:!1}}if(KA((n==null?void 0:n.length)||0)){const l=await GA(e);if(l.moves.length>0){const c=l.moves,u=c.reduce((m,y)=>m+y.weight,0);let f=Math.random()*u;for(const m of c)if(f-=m.weight,f<=0)return{move:m.from+m.to+(m.promotion||""),isBookMove:!0};const h=c[0];return{move:h.from+h.to+(h.promotion||""),isBookMove:!0}}}let o;s.depth>0?(o=await Si.getBestMove(e,{depth:s.depth,skillLevel:s.skillLevel}),console.log(`[BotEngine] Elo ${t}: Depth ${s.depth}, Skill ${s.skillLevel}`)):(o=await Si.getBestMove(e,{nodes:s.nodes||5e5,skillLevel:s.skillLevel}),console.log(`[BotEngine] Elo ${t}: Unleashed nodes ${s.nodes}, Skill ${s.skillLevel}`));const a=XA(e,o.bestMove);return{move:o.bestMove,evaluation:o.evaluation,isFreeCapture:a}}catch(s){return console.error("[BotEngine] Error getting bot move:",s),null}}const of="blindfold_chess";let ga=null,Sn=null,Ro=!1,Mh=!1,tc=null;async function Xi(){return Mh?!0:tc||(tc=r4(),tc)}async function r4(){try{if(Ro=mn.isNativePlatform(),!Ro)return console.log("[GameHistory] Web platform - using localStorage fallback"),!0;ga=new ab(lb);const e=await ga.checkConnectionsConsistency(),t=(await ga.isConnection(of,!1)).result;return e.result&&t?Sn=await ga.retrieveConnection(of,!1):Sn=await ga.createConnection(of,!1,"no-encryption",1,!1),await Sn.open(),await Sn.execute(`
      CREATE TABLE IF NOT EXISTS games (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        date TEXT NOT NULL,
        result TEXT NOT NULL,
        playerColor TEXT NOT NULL,
        botName TEXT NOT NULL,
        botElo INTEGER NOT NULL,
        moveCount INTEGER NOT NULL,
        pgn TEXT NOT NULL,
        clarityScore REAL NOT NULL,
        isFavorite INTEGER DEFAULT 0,
        timeControl TEXT NOT NULL
      );
    `),console.log("[GameHistory] Database initialized successfully"),Mh=!0,!0}catch(e){return console.error("[GameHistory] Failed to initialize database:",e),Mh=!0,!1}}function gl(){try{const e=localStorage.getItem("blindfold_game_history");return e?JSON.parse(e):[]}catch{return[]}}function jp(e){localStorage.setItem("blindfold_game_history",JSON.stringify(e))}async function i0(e){var t,n;await Xi();try{if(!Ro){const o=gl(),a=o.length>0?Math.max(...o.map(c=>c.id))+1:1,l={...e,id:a};return o.unshift(l),jp(o),console.log("[GameHistory] Game saved to localStorage:",a),a}if(!Sn)return console.error("[GameHistory] Database not initialized"),null;const s=await Sn.run(`
      INSERT INTO games (date, result, playerColor, botName, botElo, moveCount, pgn, clarityScore, isFavorite, timeControl)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
    `,[e.date,e.result,e.playerColor,e.botName,e.botElo,e.moveCount,e.pgn,e.clarityScore,e.isFavorite?1:0,e.timeControl]);return console.log("[GameHistory] Game saved:",(t=s.changes)==null?void 0:t.lastId),((n=s.changes)==null?void 0:n.lastId)??null}catch(r){return console.error("[GameHistory] Failed to save game:",r),null}}async function s4(){await Xi();try{if(!Ro)return gl();if(!Sn)return console.error("[GameHistory] Database not initialized"),[];const e=await Sn.query("SELECT * FROM games ORDER BY date DESC;");return e.values?e.values.map(t=>({id:t.id,date:t.date,result:t.result,playerColor:t.playerColor,botName:t.botName,botElo:t.botElo,moveCount:t.moveCount,pgn:t.pgn,clarityScore:t.clarityScore,isFavorite:t.isFavorite===1,timeControl:t.timeControl})):[]}catch(e){return console.error("[GameHistory] Failed to get games:",e),[]}}async function o4(){await Xi();try{if(!Ro)return gl().filter(t=>t.isFavorite);if(!Sn)return console.error("[GameHistory] Database not initialized"),[];const e=await Sn.query("SELECT * FROM games WHERE isFavorite = 1 ORDER BY date DESC;");return e.values?e.values.map(t=>({id:t.id,date:t.date,result:t.result,playerColor:t.playerColor,botName:t.botName,botElo:t.botElo,moveCount:t.moveCount,pgn:t.pgn,clarityScore:t.clarityScore,isFavorite:t.isFavorite===1,timeControl:t.timeControl})):[]}catch(e){return console.error("[GameHistory] Failed to get favorite games:",e),[]}}async function vk(e){await Xi();try{if(!Ro){const r=gl(),s=r.find(o=>o.id===e);return s?(s.isFavorite=!s.isFavorite,jp(r),s.isFavorite):!1}if(!Sn)return console.error("[GameHistory] Database not initialized"),!1;const t=await Sn.query("SELECT isFavorite FROM games WHERE id = ?;",[e]);if(!t.values||t.values.length===0)return!1;const n=t.values[0].isFavorite===1?0:1;return await Sn.run("UPDATE games SET isFavorite = ? WHERE id = ?;",[n,e]),console.log("[GameHistory] Toggled favorite for game:",e),n===1}catch(t){return console.error("[GameHistory] Failed to toggle favorite:",t),!1}}async function i4(e){await Xi();try{if(!Ro){const n=gl().filter(r=>r.id!==e);return jp(n),console.log("[GameHistory] Game deleted from localStorage:",e),!0}return Sn?(await Sn.run("DELETE FROM games WHERE id = ?;",[e]),console.log("[GameHistory] Game deleted:",e),!0):(console.error("[GameHistory] Database not initialized"),!1)}catch(t){return console.error("[GameHistory] Failed to delete game:",t),!1}}function a4({game:e,onView:t,onToggleFavorite:n,onDelete:r}){const s=e.result==="win"?i.jsx(Vn,{className:"h-5 w-5 text-amber-500"}):e.result==="loss"?i.jsx(tw,{className:"h-5 w-5 text-stone-400"}):i.jsx(iw,{className:"h-5 w-5 text-stone-500"}),o=e.result==="win"?"Victory":e.result==="loss"?"Defeat":"Draw",a=e.result==="win"?"text-green-600 dark:text-green-400":e.result==="loss"?"text-red-600 dark:text-red-400":"text-muted-foreground",l=new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),c=new Date(e.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),u=async h=>{h.stopPropagation(),mn.isNativePlatform()&&await Ve.impact({style:Ue.Light}),n()},f=h=>{h.stopPropagation(),r()};return i.jsx(Ye,{className:"cursor-pointer hover-elevate active-elevate-2 transition-all",onClick:t,"data-testid":`card-game-${e.id}`,children:i.jsx(et,{className:"p-3",children:i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i.jsx("div",{className:"flex-shrink-0",children:s}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`font-semibold ${a}`,children:o}),i.jsx("span",{className:"text-muted-foreground",children:"vs"}),i.jsx("span",{className:"font-medium truncate",children:e.botName}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",e.botElo,")"]})]}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mt-1",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Xy,{className:"h-3 w-3"}),l]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(ho,{className:"h-3 w-3"}),c]}),i.jsxs("span",{children:[e.moveCount," moves"]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:u,"data-testid":`button-favorite-${e.id}`,children:i.jsx(uw,{className:`h-5 w-5 ${e.isFavorite?"fill-amber-400 text-amber-400":"text-muted-foreground"}`})}),i.jsx(re,{variant:"ghost",size:"icon",onClick:f,"data-testid":`button-delete-${e.id}`,children:i.jsx(dw,{className:"h-5 w-5 text-muted-foreground hover:text-destructive"})})]})]})})})}function l4({onBack:e,onViewGame:t}){const[n,r]=d.useState([]),[s,o]=d.useState([]),[a,l]=d.useState(!0),[c,u]=d.useState(null),[f,h]=d.useState("all"),m=async()=>{l(!0);const[w,x]=await Promise.all([s4(),o4()]);r(w.filter(v=>v.moveCount>0)),o(x.filter(v=>v.moveCount>0)),l(!1)};d.useEffect(()=>{m()},[]);const y=async w=>{const x=await vk(w.id);r(v=>v.map(b=>b.id===w.id?{...b,isFavorite:x}:b)),o(x?v=>[{...w,isFavorite:!0},...v.filter(b=>b.id!==w.id)]:v=>v.filter(b=>b.id!==w.id))},g=async()=>{if(!c)return;await i4(c.id)&&(r(x=>x.filter(v=>v.id!==c.id)),o(x=>x.filter(v=>v.id!==c.id))),u(null)},p=f==="favorites"?s:n;return i.jsxs("div",{className:"min-h-screen bg-background flex flex-col","data-testid":"game-history-page",children:[i.jsxs("header",{className:"flex items-center gap-2 p-3 border-b border-border",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-history-back",children:i.jsx(Im,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-lg font-semibold",children:"Game History"})]}),i.jsxs(hl,{value:f,onValueChange:h,className:"flex-1 flex flex-col",children:[i.jsx("div",{className:"px-3 pt-3",children:i.jsxs(Ki,{className:"grid w-full grid-cols-2",children:[i.jsxs(qn,{value:"all","data-testid":"tab-all-games",children:["All Games (",n.length,")"]}),i.jsxs(qn,{value:"favorites","data-testid":"tab-favorites",children:["Favorites (",s.length,")"]})]})}),i.jsx(oi,{value:f,className:"flex-1 mt-0 px-3 pb-3",children:i.jsx(Cp,{className:"h-[calc(100vh-140px)]",children:a?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"animate-pulse text-muted-foreground",children:"Loading games..."})}):p.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx("div",{className:"text-muted-foreground mb-2",children:f==="favorites"?"No favorite games yet":"No games played yet"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:f==="favorites"?"Star a game to add it to your favorites":"Complete a game to see it here"})]}):i.jsx("div",{className:"space-y-2 py-2",children:p.map(w=>i.jsx(a4,{game:w,onView:()=>t(w),onToggleFavorite:()=>y(w),onDelete:()=>u(w)},w.id))})})})]}),i.jsx(Po,{open:c!==null,onOpenChange:()=>u(null),children:i.jsxs(Ls,{children:[i.jsxs(Is,{children:[i.jsx(Os,{children:"Delete this game from history?"}),i.jsx(Ds,{children:"This action cannot be undone. The game record will be permanently removed."})]}),i.jsxs($s,{children:[i.jsx(Fs,{"data-testid":"button-delete-cancel",children:"Cancel"}),i.jsx(Bs,{onClick:g,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90","data-testid":"button-delete-confirm",children:"Delete"})]})]})})]})}async function c4(e,t){const n=t||`blindfold-chess-${Date.now()}.pgn`;if(typeof navigator<"u"&&navigator.share)try{const r=new Blob([e],{type:"application/vnd.chess-pgn"}),s=new File([r],n,{type:"application/vnd.chess-pgn"});return navigator.canShare&&navigator.canShare({files:[s]})?(await navigator.share({files:[s],title:"Blindfold Chess Game"}),!0):(await navigator.share({text:e,title:"Blindfold Chess Game"}),!0)}catch(r){if(r.name==="AbortError")return!1;console.warn("Share API failed, falling back to clipboard:",r)}return xk(e)}async function xk(e){try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(e),!0;const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-9999px",document.body.appendChild(t),t.select();const n=document.execCommand("copy");return document.body.removeChild(t),n}catch(t){return console.error("Failed to copy PGN to clipboard:",t),!1}}function u4(e){const t=[],n=/\d+\.\s*(\S+)(?:\s+(\S+))?/g;let r;const s=["1-0","0-1","1/2-1/2","*"];for(;(r=n.exec(e))!==null;)r[1]&&!s.includes(r[1])&&t.push(r[1]),r[2]&&!s.includes(r[2])&&t.push(r[2]);return t}function d4({game:e,open:t,onClose:n,onAnalyze:r}){const[s,o]=d.useState((e==null?void 0:e.isFavorite)??!1),[a,l]=d.useState(!1),{toast:c}=al();if(d.useEffect(()=>{e&&o(e.isFavorite)},[e]),!e||!t)return null;const u=async()=>{mn.isNativePlatform()&&await Ve.impact({style:Ue.Light});const v=await c4(e.pgn,`blindfold-vs-${e.botElo}.pgn`);c(v?{title:"PGN shared",description:"Game exported successfully"}:{title:"Share failed",description:"Could not share the game",variant:"destructive"})},f=async()=>{mn.isNativePlatform()&&await Ve.impact({style:Ue.Light}),await xk(e.pgn)?(l(!0),c({title:"Copied",description:"PGN copied to clipboard"}),setTimeout(()=>l(!1),2e3)):c({title:"Copy failed",description:"Could not copy PGN",variant:"destructive"})},h=e.result==="win"?i.jsx(Vn,{className:"h-10 w-10 text-amber-500"}):e.result==="loss"?i.jsx(tw,{className:"h-10 w-10 text-stone-400"}):i.jsx(iw,{className:"h-10 w-10 text-stone-500"}),m=e.result==="win"?"Victory":e.result==="loss"?"Defeat":"Draw",y=e.result==="win"?"text-green-600 dark:text-green-400":e.result==="loss"?"text-red-600 dark:text-red-400":"text-muted-foreground",g=new Date(e.date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),p=new Date(e.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),w=()=>{const v=u4(e.pgn);r(v)},x=async()=>{mn.isNativePlatform()&&await Ve.impact({style:Ue.Light});const v=await vk(e.id);o(v)};return i.jsxs("div",{className:"min-h-screen bg-background flex flex-col","data-testid":"history-game-report",children:[i.jsxs("header",{className:"flex items-center justify-between p-3 border-b border-border",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-history-report-back",children:i.jsx(Im,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-lg font-semibold",children:"Game Details"}),i.jsx(re,{variant:"ghost",size:"icon",onClick:x,"data-testid":"button-history-report-favorite",children:i.jsx(uw,{className:`h-5 w-5 ${s?"fill-amber-400 text-amber-400":""}`})})]}),i.jsx("div",{className:"flex-1 p-4 overflow-auto",children:i.jsx(Ye,{children:i.jsxs(et,{className:"pt-6 space-y-4",children:[i.jsxs("div",{className:"flex flex-col items-center gap-3 py-4",children:[h,i.jsx("h2",{className:`text-3xl font-bold ${y}`,children:m}),i.jsxs("p",{className:"text-lg",children:["vs ",i.jsx("span",{className:"font-semibold",children:e.botName}),i.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",e.botElo,")"]})]})]}),i.jsx(Pr,{}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xy,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:g})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ho,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:p})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Played as"}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("div",{className:`w-4 h-4 rounded-full ${e.playerColor==="white"?"bg-white border border-stone-400":"bg-black"}`}),i.jsx("span",{className:"font-medium capitalize",children:e.playerColor})]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Moves"}),i.jsx("p",{className:"font-medium mt-1",children:e.moveCount})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Time Control"}),i.jsx("p",{className:"font-medium mt-1",children:e.timeControl})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Reconstruction Score"}),i.jsxs("p",{className:"font-medium mt-1",children:[Math.round(e.clarityScore),"%"]})]})]}),i.jsx(Pr,{}),i.jsxs(re,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:w,"data-testid":"button-history-analyze",children:[i.jsx(cw,{className:"mr-2 h-4 w-4"}),"Analyze Game"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(re,{variant:"outline",className:"flex-1",onClick:u,"data-testid":"button-history-share-pgn",children:[i.jsx(y2,{className:"mr-2 h-4 w-4"}),"Share PGN"]}),i.jsxs(re,{variant:"outline",className:"flex-1",onClick:f,"data-testid":"button-history-copy-pgn",children:[a?i.jsx(ul,{className:"mr-2 h-4 w-4"}):i.jsx(ew,{className:"mr-2 h-4 w-4"}),a?"Copied":"Copy PGN"]})]})]})})})]})}function Ep(){const[e,t]=d.useState(null),[n,r]=d.useState(!0),[s,o]=d.useState(null),[a,l]=d.useState([]),c=d.useRef(null);if(d.useEffect(()=>{const f=oR(t),h=async()=>{try{const m=await ie.getStatus();o(m);const y=await ie.getLogs();if(y&&y.logs){const g=y.logs;l(g.slice(-10))}}catch{}};return h(),c.current=window.setInterval(h,2e3),()=>{f(),c.current&&clearInterval(c.current)}},[]),!e)return null;const u=({ok:f})=>f?i.jsx(ul,{className:"w-3 h-3 text-green-400"}):i.jsx(So,{className:"w-3 h-3 text-red-400"});return i.jsxs("div",{className:"fixed bottom-4 left-4 z-50 bg-black/90 text-white text-xs rounded-lg shadow-lg max-w-[280px]",onClick:()=>r(!n),"data-testid":"voice-debug-overlay",children:[i.jsxs("div",{className:"flex items-center gap-2 p-2 border-b border-white/20",children:[e.micListening?i.jsx(hn,{className:"w-4 h-4 text-green-400 animate-pulse"}):i.jsx(mo,{className:"w-4 h-4 text-red-400"}),i.jsx("span",{className:"font-bold",children:"Voice Debug"}),i.jsx("span",{className:"text-white/50 ml-auto",children:n?"":""})]}),n&&i.jsxs("div",{className:"p-2 space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(u,{ok:e.permissionStatus==="granted"}),i.jsxs("span",{children:["Permission: ",e.permissionStatus]})]}),i.jsx("div",{className:"text-white/50 text-[10px] mt-1 mb-1",children:"--- Native Status (polled) ---"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(u,{ok:(s==null?void 0:s.serviceBound)??!1}),i.jsxs("span",{children:["Service Bound: ",s!=null&&s.serviceBound?"Yes":"No"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(u,{ok:(s==null?void 0:s.modelReady)??!1}),i.jsxs("span",{children:["Model Ready: ",s!=null&&s.modelReady?"Yes":"No"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(u,{ok:(s==null?void 0:s.sessionActive)??!1}),i.jsxs("span",{children:["Session Active: ",s!=null&&s.sessionActive?"Yes":"No"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(u,{ok:e.micListening}),i.jsxs("span",{children:["Mic Listening: ",e.micListening?"Yes":"No"]})]}),e.lastResult&&i.jsx("div",{className:"mt-2 p-1 bg-green-900/50 rounded",children:i.jsxs("span",{className:"text-green-300",children:['Last: "',e.lastResult,'"']})}),e.lastError&&i.jsxs("div",{className:"mt-2 p-1 bg-red-900/50 rounded flex items-start gap-1",children:[i.jsx(i2,{className:"w-3 h-3 text-red-400 mt-0.5 shrink-0"}),i.jsx("span",{className:"text-red-300 break-all",children:e.lastError})]}),a.length>0&&i.jsxs("div",{className:"mt-2 p-1 bg-blue-900/50 rounded",children:[i.jsx("div",{className:"text-blue-300 text-[10px]",children:"Native Logs:"}),a.map((f,h)=>i.jsx("div",{className:"text-blue-200 text-[9px] truncate",children:f},h))]}),i.jsxs("div",{className:"text-white/30 mt-1",children:["Updated: ",new Date(e.timestamp).toLocaleTimeString()]})]})]})}const f4={p:100,n:320,b:330,r:500,q:900,k:2e4},Pp="blindfold-saved-game";function h4(e){try{localStorage.setItem(Pp,JSON.stringify(e))}catch(t){console.warn("Failed to save game state:",t)}}function m4(){try{const e=localStorage.getItem(Pp);if(e)return JSON.parse(e)}catch(e){console.warn("Failed to load saved game:",e)}return null}function nc(){try{localStorage.removeItem(Pp)}catch(e){console.warn("Failed to clear saved game:",e)}}function p4(e){if(e)return{from:e.from,to:e.to,captured:e.captured,capturedValue:e.captured?f4[e.captured]:void 0}}function g4(e){return new Promise(t=>setTimeout(t,e))}const v4={easy:{maxPeeks:Number.POSITIVE_INFINITY},medium:{maxPeeks:20},hard:{maxPeeks:10},expert:{maxPeeks:5},master:{maxPeeks:2},grandmaster:{maxPeeks:0}};function x4({historyTrigger:e,onStateChange:t,returnToTitleRef:n,onTrainNowClick:r}){const{toast:s}=al(),[o,a]=d.useState(!0),[l,c]=d.useState(null),[u,f]=d.useState(!1),[h,m]=d.useState("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"),[y,g]=d.useState([]),[p,w]=d.useState(null),[x,v]=d.useState([]),[b,k]=d.useState(null),[S,C]=d.useState("white"),[N,j]=d.useState(null),[R,P]=d.useState(300),[D,I]=d.useState(300),[F,L]=d.useState(()=>localStorage.getItem("blindfold-settings-time")||"blitz"),[B,H]=d.useState(!1),[Q,T]=d.useState("medium"),[$,Y]=d.useState("empty_board"),[W,ge]=d.useState(!0),[xe,we]=d.useState(Number.POSITIVE_INFINITY),[Ce,O]=d.useState(!1),q=d.useRef(null),X=d.useRef(0),[J,fe]=d.useState(0),[ue,Ne]=d.useState(0),He=d.useRef(!1),Ee=d.useRef(null),$e=d.useRef([]),Te=d.useRef(0),ke=d.useRef(0),ut=d.useRef(0),vt=d.useRef(0),nn=d.useRef(0),V=d.useRef(0),U=d.useRef(0),de=d.useRef([]),he=d.useRef(!1),le=d.useRef(null),Fe=d.useRef(1200),[Ae,Re]=d.useState(()=>gh()),[st,rn]=d.useState(()=>Aa());d.useEffect(()=>{Xi();const z=m4();z&&(Ji(z),$o(!0))},[]),d.useEffect(()=>{const z=ne=>{const ae=ne;ae.detail&&Re(ae.detail)};return window.addEventListener("blindfoldSettingsChanged",z),()=>{window.removeEventListener("blindfoldSettingsChanged",z)}},[]);const[Xe,Qt]=d.useState(null),[sn,Qn]=d.useState(!1),[In,on]=d.useState(!1),[bt,ir]=d.useState(()=>{const z=localStorage.getItem("blindfold-settings-elo");return z?Number(z):1200}),[gn,es]=d.useState(()=>localStorage.getItem("blindfold-settings-color")||"white"),[Lo,wr]=d.useState(!1),[jn,Io]=d.useState(!1),[De,vl]=d.useState(!1),[Qu,Zi]=d.useState(!1),[_,ze]=d.useState(null),[lt,$n]=d.useState(null),G=d.useRef(null),[Gs,It]=d.useState(0),Tt=d.useRef(""),[ts,vn]=d.useState(null),[Ks,Yn]=d.useState(!1),[be,$o]=d.useState(!1),[ns,Ji]=d.useState(null),[Qs,Ys]=d.useState(!1),[xl,Oo]=d.useState(null),Xn=d.useRef(null),[rs,Do]=d.useState(null),br=d.useRef(null),[Yu,$r]=d.useState(!1),[ea,Xu]=d.useState([]),[Zu,yl]=d.useState([]),[Ju,Dt]=d.useState(null),[E,A]=d.useState(null),[M,me]=d.useState(!1),[Se,nt]=d.useState([]),[Or,Sr]=d.useState(!1),[Rp,wl]=d.useState(null),je=d.useRef(null),Xs=d.useRef(300),Zs=d.useRef(300),Ct=d.useRef([]),an=d.useRef(null),ed=d.useRef(!1),Js=d.useRef(!1),Bo=d.useRef(null),[_p,Mp]=d.useState(!1),bl=mn.isNativePlatform();d.useEffect(()=>()=>{Si.stopAnalysis(),an.current&&clearInterval(an.current),br.current&&clearTimeout(br.current),Js.current&&(ie.stopSession().catch(()=>{}),Js.current=!1),Bo.current&&(Bo.current.remove().catch(()=>{}),Bo.current=null)},[]),d.useEffect(()=>{localStorage.setItem("blindfold-settings-elo",String(bt))},[bt]),d.useEffect(()=>{localStorage.setItem("blindfold-settings-color",gn)},[gn]),d.useEffect(()=>{localStorage.setItem("blindfold-settings-time",F)},[F]),d.useEffect(()=>{e&&e>0&&Sr(!0)},[e]),d.useEffect(()=>{je.current=l,Xs.current=R,Zs.current=D,Ct.current=y},[l,R,D,y]),d.useEffect(()=>{if(!u||N||!l||!Xe)return;const z={pgn:l.pgn(),playerColor:S,whiteTime:R,blackTime:D,timeControl:F,botElo:Xe.elo,isBlindfold:B,blindfoldDifficulty:Q,remainingPeeks:xe,savedAt:Date.now()};h4(z)},[u,N,l,Xe,y,S,R,D,F,B,Q,xe]);const Sl=d.useCallback(()=>{nc(),an.current&&(clearInterval(an.current),an.current=null),G.current&&(clearTimeout(G.current),G.current=null),c(null),f(!1),j(null),m("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"),g([]),w(null),v([]),k(null),Qt(null),Qn(!1),O(!1),$n(null),Wt.stop(),X.current=0,fe(0),Ne(0),He.current=!1,Ee.current=null,$e.current=[],Te.current=0,ke.current=0,ut.current=0,vt.current=0,nn.current=0,V.current=0,U.current=0,de.current=[],he.current=!1,le.current&&(clearTimeout(le.current),le.current=null),Ys(!1),Oo(null),Xn.current=null,Dt(null),A(null),Do(null),br.current&&(clearTimeout(br.current),br.current=null)},[]);d.useEffect(()=>{t&&t(Qs?"reconstruction":M?"analysis":u&&!N?"in_game":o?"idle":"setup")},[Qs,M,u,N,o,t]);const ta=d.useCallback(()=>{if(u&&je.current&&Ct.current.length>0&&!N&&Xe){an.current&&(clearInterval(an.current),an.current=null);const z=je.current.pgn()||"",ne={date:new Date().toISOString(),result:"loss",playerColor:S,botName:String(Xe.elo),botElo:Xe.elo,moveCount:Ct.current.length,pgn:z,clarityScore:0,isFavorite:!1,timeControl:F};i0(ne).then(ae=>{ae&&console.log("[Game] Saved resigned game to history:",ae)})}Wt.stop(),Ys(!1),me(!1),$r(!1),Sr(!1),wl(null),Sl(),a(!0)},[u,N,Xe,S,F,Sl]);d.useEffect(()=>(n&&(n.current=ta),()=>{n&&(n.current=null)}),[ta,n]);const Fo=d.useCallback((z,ne,ae)=>{var rt;const Be=z==="draw"?"draw":z==="white_win"&&S==="white"||z==="black_win"&&S==="black"?"win":"loss",Pe=X.current===0;Xu([...$e.current]),yl([...de.current]),nt([...Ct.current]);const Ze=Ct.current.length,te=ER(Be,X.current,ue,$e.current,ne,ae,{botElo:Fe.current,wasPeekFree:Pe,totalMoves:Ze,voiceCorrections:ke.current,voiceCommands:ut.current,reconstructionVoiceInputs:vt.current,reconstructionTouchInputs:nn.current,gameVoiceMoves:V.current,gameTouchMoves:U.current,squareInquiries:de.current,isBlindfold:B,wasAssisted:he.current});if(rn(te),window.dispatchEvent(new CustomEvent("statsUpdated")),Ae.boardReconstructionEnabled||$r(!0),Xe&&Ze>0){const xn=((rt=je.current)==null?void 0:rt.pgn())||"",yn={date:new Date().toISOString(),result:Be,playerColor:S,botName:String(Xe.elo),botElo:Xe.elo,moveCount:Ze,pgn:xn,clarityScore:ne??0,isFavorite:!1,timeControl:F};i0(yn).then(On=>{On&&console.log("[Game] Saved game to history:",On)})}else Xe&&Ze===0&&console.log("[Game] Zero-move game detected. Not saving to history.")},[S,ue,B,Xe,F]),Rt=d.useCallback(z=>{nc(),an.current&&(clearInterval(an.current),an.current=null),j(z),Wt.stop(),De&&jt(z==="draw"?"Game drawn":z==="white_win"&&S==="white"||z==="black_win"&&S==="black"?"You win!":"You lose"),Ae.boardReconstructionEnabled&&je.current?(Xn.current={result:z,fen:je.current.fen()},Oo(je.current.fen()),Do(3)):Fo(z)},[S,De,Ae.boardReconstructionEnabled,Fo]);d.useEffect(()=>{if(rs!==null)return rs>0?br.current=setTimeout(()=>{Do(z=>z!==null?z-1:null)},1e3):(Ys(!0),Do(null)),()=>{br.current&&clearTimeout(br.current)}},[rs]);const wk=d.useCallback((z,ne,ae,_e)=>{vt.current=ae,nn.current=_e,Dt(z),A(ne),Xn.current&&(Fo(Xn.current.result,z,ne),Xn.current=null)},[Fo]),bk=d.useCallback(()=>{Ys(!1),Oo(null),Xn.current=null,ta()},[ta]),Sk=d.useCallback(()=>{Dt(null),A(null),Xn.current&&Fo(Xn.current.result),Ys(!1),Oo(null),Xn.current=null,$r(!0)},[Fo]),na=d.useCallback(async(z,ne,ae,_e)=>{if(!ne)return null;Qn(!0);try{const Be=S==="white"?Zs.current:Xs.current,Pe=(ae==null?void 0:ae.length)||0,Ze=await n4(z,ne,ae,_e);if(!Ze)throw new Error("Bot failed to generate move");Ze.isBookMove&&Te.current++;let te;if(Ze.isFreeCapture)te=2e3;else if(Ae.botThinkingTimeEnabled){const rt=Math.ceil((Pe+2)/2),xn=JA(z);te=e4(rt,xn,Be,F)}else{const rt=Math.ceil((Pe+2)/2);te=ZA(rt,Be,z,S==="white"?"black":"white",_e)}return te>2e3&&on(!0),await g4(te),on(!1),Ze}catch(Be){return console.error("Error getting bot move:",Be),s({title:"Error",description:"Bot failed to respond",variant:"destructive"}),null}finally{Qn(!1),on(!1)}},[s,S,Ae.botThinkingTimeEnabled,F]),Ap=async(z,ne)=>{X.current=0,Fe.current=z.elo;const ae=new Mr;c(ae),je.current=ae,m(ae.fen()),g([]),Ct.current=[],w(null),v([]),j(null),Qt(z);const _e=ne==="random"?Math.random()<.5?"white":"black":ne;C(_e);const Be=F==="practice"?99999999:F==="blitz"?300:F==="rapid"?900:1800;if(P(Be),I(Be),Xs.current=Be,Zs.current=Be,we(B?v4[Q].maxPeeks:Number.POSITIVE_INFINITY),f(!0),wr(!1),_e==="black"){const Pe=await na(ae.fen(),z.elo);if(Pe&&je.current){const Ze=je.current.move(Pe.move);Ze&&k({from:Ze.from,to:Ze.to}),m(je.current.fen());const te=[Pe.move];g(te),Ct.current=te,Ee.current=Date.now();try{Ve.impact({style:Ue.Medium}).catch(()=>{}),setTimeout(()=>{Ve.impact({style:Ue.Medium}).catch(()=>{})},100)}catch{}if(De){const rt=Uo(Pe.move,Pe.move.includes("x"),je.current.isCheck(),!1);Tt.current=rt,jt(rt)}}}},kk=d.useCallback(async z=>{const ne=new Mr;ne.loadPgn(z.pgn);const ae=su(z.botElo),_e={id:`elo_${z.botElo}`,elo:z.botElo,difficulty:`elo_${Math.round(z.botElo/200)*200}`,depth:ae.depth,randomPercent:ae.randomPercent};X.current=0,Fe.current=_e.elo,fe(0),Ne(0),He.current=!1,Ee.current=null,$e.current=[],Te.current=0,ke.current=0,ut.current=0,vt.current=0,nn.current=0,V.current=0,U.current=0,de.current=[],c(ne),je.current=ne,m(ne.fen());const Be=ne.history();g(Be),Ct.current=Be,w(null),v([]),j(null),Qt(_e),C(z.playerColor),P(z.whiteTime),I(z.blackTime),Xs.current=z.whiteTime,Zs.current=z.blackTime,L(z.timeControl),H(z.isBlindfold),T(z.blindfoldDifficulty),we(z.remainingPeeks);const Pe=ne.history({verbose:!0});if(Pe.length>0){const rt=Pe[Pe.length-1];k({from:rt.from,to:rt.to})}a(!1),f(!0),wr(!1),nc();const Ze=ne.turn(),te=z.playerColor==="white"?"b":"w";if(Ze===te){const rt=await na(ne.fen(),_e.elo,Be);if(rt&&je.current){const xn=je.current.move(rt.move);xn&&k({from:xn.from,to:xn.to}),m(je.current.fen());const yn=[...Ct.current,rt.move];g(yn),Ct.current=yn,Ee.current=Date.now();try{Ve.impact({style:Ue.Medium}).catch(()=>{})}catch{}if(De){const On=Uo(rt.move,rt.move.includes("x"),je.current.isCheck(),!1);Tt.current=On,jt(On)}}}},[s,na,De]);d.useEffect(()=>{if(N!==null){an.current&&(clearInterval(an.current),an.current=null);return}if(u&&l&&F!=="practice"){const z=setInterval(()=>{l.turn()==="w"?P(ae=>{const _e=Math.max(0,ae-1);return Xs.current=_e,_e===0&&ae>0&&Rt("black_win"),_e}):I(ae=>{const _e=Math.max(0,ae-1);return Zs.current=_e,_e===0&&ae>0&&Rt("white_win"),_e})},1e3);return an.current=z,()=>{clearInterval(z),an.current=null}}},[u,l,Rt,F,N]),d.useEffect(()=>((async()=>{try{u&&B&&Ae.keepAwakeEnabled?(await nf.keepAwake(),console.log("[KeepAwake] Screen wake lock enabled for blindfold game")):(await nf.allowSleep(),console.log("[KeepAwake] Screen wake lock released"))}catch(ne){console.log("[KeepAwake] Plugin not available (web mode):",ne)}})(),()=>{nf.allowSleep().catch(()=>{})}),[u,B,Ae.keepAwakeEnabled]),d.useEffect(()=>{if(!bl||!jn||!u||!je.current||N!==null)return;let z=!1;return(async()=>{try{if(!await Fu()||z){console.warn("[NativeVoice] Voice not ready or cancelled");return}if(console.log("[NativeVoice] Starting voice session..."),Bo.current&&await Bo.current.remove(),z||(console.log("[NativeVoice] Setting up onSpeechResult listener..."),Bo.current=await ie.addListener("onSpeechResult",_e=>{console.log("[NativeVoice] *** RECEIVED onSpeechResult:",_e.text);const Be=_e.text,Pe=je.current;if(!Pe){console.log("[NativeVoice] No game ref, ignoring");return}const Ze=Be.trim();if(Ze.length<2){console.log("[NativeVoice] Too short, ignoring:",Ze);return}ut.current++,ze(Be),console.log("[NativeVoice] Processing transcript:",Be);const te=Be.toLowerCase();if(te.includes("repeat")||te.includes("say again")||te==="again"||te.includes("what was that")){Tt.current&&De?ie.speakAndListen({text:Tt.current}).catch(()=>{}):ie.startListening().catch(()=>{});return}if(Ks){if(te.includes("yes")||te.includes("confirm")||te.includes("i confirm")){Ve.impact({style:Ue.Medium}).catch(()=>{}),Yn(!1),Rt(S==="white"?"black_win":"white_win"),ze(null);return}if(te.includes("no")||te.includes("cancel")||te.includes("never mind")){Ve.impact({style:Ue.Light}).catch(()=>{}),Yn(!1),ze(null),ie.startListening().catch(()=>{});return}ie.startListening().catch(()=>{});return}if(lt){G.current&&(clearTimeout(G.current),G.current=null);const oe=Lv(Be);let Z=null;if(lt.isPawnCapture&&lt.pawnFiles&&oe.file?Z=Dv(lt.candidates,oe.file):(oe.file||oe.rank)&&(Z=Iv(lt.candidates,oe)),Z){$n(null);try{const se=Pe.move(Z);if(se){V.current++,k({from:se.from,to:se.to}),m(Pe.fen());const pe=[...Ct.current,Z];if(g(pe),Ct.current=pe,Ve.impact({style:Ue.Light}).catch(()=>{}),De){const We=Uo(Z,Z.includes("x"),!1,!1);Tt.current=We,ie.speakAndListen({text:We}).catch(()=>{})}else ie.startListening().catch(()=>{});Pe.isCheckmate()?Rt(Pe.turn()==="w"?"black_win":"white_win"):Pe.isDraw()&&Rt("draw"),ze(null)}}catch(se){console.error("[NativeVoice] Disambiguation move error:",se),ie.startListening().catch(()=>{})}return}ke.current++;const ee=lt.isPawnCapture?"I didn't catch that. Which file?":"I didn't catch that. Which piece?";De?ie.speakAndListen({text:ee}).catch(()=>{}):ie.startListening().catch(()=>{});return}const rt=te.match(/what(?:'?s| is)?\s+(?:on\s+)?([a-h])[\s-]?([1-8])/);if(rt){const oe=`${rt[1]}${rt[2]}`;B&&de.current.push(oe);const Z=Pe.get(oe);let ee="";Z?ee=`${Z.color==="w"?"White":"Black"} ${{p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[Z.type]} on ${oe}`:ee=`${oe.toUpperCase()} is empty`,Ve.impact({style:Ue.Light}).catch(()=>{}),De?ie.speakAndListen({text:ee}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}const xn=te.match(/where\s+(?:is|are)\s+(?:my\s+)?(\w+)/);if(xn){const oe=xn[1].toLowerCase(),ee={king:"k",queen:"q",rook:"r",bishop:"b",knight:"n",pawn:"p",kings:"k",queens:"q",rooks:"r",bishops:"b",knights:"n",pawns:"p",horse:"n",horses:"n",castle:"r",castles:"r"}[oe];if(ee){const se=S==="white"?"w":"b",pe=[],We=["a","b","c","d","e","f","g","h"],Je=["1","2","3","4","5","6","7","8"];for(const ot of We)for(const dt of Je){const ln=`${ot}${dt}`,qt=Pe.get(ln);qt&&qt.type===ee&&qt.color===se&&pe.push(ln.toUpperCase())}const Ke={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"};let ct="";pe.length===0?ct=`You have no ${Ke[ee]}`:pe.length===1?ct=`Your ${Ke[ee]} is on ${pe[0]}`:ct=`Your ${Ke[ee]}s are on ${pe.join(" and ")}`,Ve.impact({style:Ue.Light}).catch(()=>{}),De?ie.speakAndListen({text:ct}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}}if(te.includes("last move")||te.includes("previous move")||te.includes("opponent's move")){Ve.impact({style:Ue.Light}).catch(()=>{});const oe=Pe.history({verbose:!0});let Z="";if(oe.length===0)Z="No moves have been made yet";else{const ee=oe[oe.length-1],pe={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[ee.piece]||ee.piece,We=ee.captured?" takes":"",Je=ee.to.toUpperCase();ee.piece==="p"?Z=`${ee.from.toUpperCase()}${We} ${Je}`:Z=`${pe}${We} ${Je}`}De?ie.speakAndListen({text:Z}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}const yn=te.match(/legal\s+moves?\s+(?:for\s+)?(?:my\s+)?(\w+)/);if(yn){const oe=yn[1].toLowerCase(),ee={king:"k",queen:"q",rook:"r",bishop:"b",knight:"n",pawn:"p",kings:"k",queens:"q",rooks:"r",bishops:"b",knights:"n",pawns:"p",horse:"n",horses:"n",castle:"r",castles:"r"}[oe];if(ee){Ve.impact({style:Ue.Light}).catch(()=>{});const pe={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"}[ee],Je=Pe.moves({verbose:!0}).filter(ot=>ot.piece===ee),Ke=Array.from(new Set(Je.map(ot=>ot.to.toUpperCase())));let ct="";if(Ke.length===0)ct=`Your ${pe} has no legal moves`;else if(Ke.length<=4)ct=`Your ${pe} can move to ${Ke.join(", ")}`;else{const ot=Ke.slice(0,3);ct=`Your ${pe} has ${Ke.length} legal moves, including ${ot.join(", ")}`}De?ie.speakAndListen({text:ct}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}}if(te.includes("resign")||te.includes("quit")||te.includes("give up")||te.includes("i resign")){Ve.impact({style:Ue.Medium}).catch(()=>{}),Yn(!0),ze(null),De?ie.speakAndListen({text:"Resign? Say yes or no."}).catch(()=>{}):ie.startListening().catch(()=>{});return}if(te==="peek"||te==="peak"){if(xe<=0||$==="no_board"||Q==="grandmaster"){De?ie.speakAndListen({text:"Peeking is not allowed"}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}Ve.impact({style:Ue.Light}).catch(()=>{}),he.current=!0,O(!0),we(oe=>oe-1),le.current&&clearTimeout(le.current),le.current=setTimeout(()=>{O(!1),le.current=null},5e3),De?ie.speakAndListen({text:"Board visible for 5 seconds"}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}if(te.includes("clock")||te.includes("how much time")||te.includes("time left")||te.includes("remaining")){Ve.impact({style:Ue.Light}).catch(()=>{});const oe=S==="white"?R:D,Z=Math.floor(oe/60),ee=oe%60;let se="";Z>0?se=`${Z} minute${Z!==1?"s":""} and ${ee} second${ee!==1?"s":""} remaining`:se=`${ee} second${ee!==1?"s":""} remaining`,De?ie.speakAndListen({text:se}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}if(te.includes("material")){Ve.impact({style:Ue.Light}).catch(()=>{});const oe={p:1,n:3,b:3,r:5,q:9,k:0};let Z=0,ee=0;const se=Pe.board();for(const Je of se)for(const Ke of Je)if(Ke){const ct=oe[Ke.type]||0;Ke.color==="w"?Z+=ct:ee+=ct}const pe=Z-ee;let We="";pe>0?We=`White is up ${pe} point${pe!==1?"s":""}`:pe<0?We=`Black is up ${Math.abs(pe)} point${Math.abs(pe)!==1?"s":""}`:We="Material is equal",De?ie.speakAndListen({text:We}).catch(()=>{}):ie.startListening().catch(()=>{}),ze(null);return}if(te.includes("eval")||te.includes("evaluation")){Ve.impact({style:Ue.Light}).catch(()=>{}),he.current=!0,De&&ie.speakAndListen({text:"Evaluating position"}).catch(()=>{}),Si.analyzePosition(Pe.fen(),5e5).then(oe=>{let Z="";if(oe.isMate&&oe.mateIn!==void 0)Z=oe.mateIn>0?`Mate in ${oe.mateIn} for white`:`Mate in ${Math.abs(oe.mateIn)} for black`;else{const ee=Math.abs(oe.evaluation);ee<.3?Z="Position is equal":oe.evaluation>0?Z=`White is better by ${ee.toFixed(1)}`:Z=`Black is better by ${ee.toFixed(1)}`}De?ie.speakAndListen({text:Z}).catch(()=>{}):ie.startListening().catch(()=>{})}).catch(()=>{De?ie.speakAndListen({text:"Unable to evaluate position"}).catch(()=>{}):ie.startListening().catch(()=>{})}),ze(null);return}const On=Pe.moves({verbose:!0}).map(oe=>oe.san),ht=Av(Be,On);if(ht.move&&!ht.isAmbiguous)try{const oe=Pe.move(ht.move);if(oe){V.current++,k({from:oe.from,to:oe.to});const Z=Pe.fen();m(Z);const ee=[...Ct.current,ht.move];g(ee),Ct.current=ee,Ve.impact({style:Ue.Light}).catch(()=>{}),Pe.isCheckmate()?Rt(Pe.turn()==="w"?"black_win":"white_win"):Pe.isDraw()&&Rt("draw"),ze(null),ie.startListening().catch(()=>{})}}catch(oe){console.error("[NativeVoice] Move error:",oe),ie.startListening().catch(()=>{})}else if(ht.isAmbiguous&&ht.candidates.length>1){const oe=Bv(ht.candidates),Z=oe?Ov(ht.candidates):[];let ee;if(oe&&Z.length===2){const se=Z[0].toUpperCase(),pe=Z[1].toUpperCase();ee=`Did you mean ${se} takes ${ht.targetSquare} or ${pe} takes ${ht.targetSquare}?`}else{const se=$v(ht.candidates),pe=ht.piece==="R"?"rook":ht.piece==="N"?"knight":ht.piece==="B"?"bishop":ht.piece==="Q"?"queen":"piece";ee=se.length===2?`Two ${pe}s can move to ${ht.targetSquare}. The one on ${se[0]} or ${se[1]}?`:`Multiple ${pe}s can move to ${ht.targetSquare}. Which one?`}$n({candidates:ht.candidates,piece:ht.piece,targetSquare:ht.targetSquare,isPawnCapture:oe,pawnFiles:Z}),ze(`Clarify: ${ht.candidates.join(" or ")}`),De?ie.speakAndListen({text:ee}).catch(()=>{}):ie.startListening().catch(()=>{}),G.current=setTimeout(()=>{$n(null),ze(null),De?ie.speakAndListen({text:"Move cancelled"}).catch(()=>{}):ie.startListening().catch(()=>{})},1e4)}else ze(null),ie.startListening().catch(()=>{})}),z))return;console.log("[NativeVoice] Calling startSession..."),await ie.startSession(),Js.current=!0,Zi(!0),Mp(!1),console.log("[NativeVoice] Session started - listener active, waiting for speech")}catch(ae){console.error("[NativeVoice] Setup failed, falling back to web voice:",ae),Mp(!0),Js.current=!1}})(),()=>{z=!0,Js.current&&(ie.stopSession().catch(()=>{}),Js.current=!1,Zi(!1))}},[bl,jn,u,N,De,Rt]),d.useEffect(()=>{if(bl&&!_p)return;if(!jn){Wt.stop();return}if(!u||!je.current||N!==null){Wt.stop();return}$i.register("game"),Wt.setOnResult(async(_e,Be)=>{const Pe=je.current;if(!Pe)return;if(Be.trim().length<2){console.log("[Game] Ignoring empty/short transcript:",Be);return}ut.current++,ze(Be);const te=Be.toLowerCase();if(Ks){if(te.includes("yes")||te.includes("confirm")||te.includes("i confirm")){try{Ve.impact({style:Ue.Medium}).catch(()=>{})}catch{}Yn(!1),Rt(S==="white"?"black_win":"white_win"),ze(null);return}if(te.includes("no")||te.includes("cancel")||te.includes("never mind")){try{Ve.impact({style:Ue.Light}).catch(()=>{})}catch{}Yn(!1),ze(null);return}return}if(te.includes("repeat")||te.includes("say again")||te.includes("what was that")||te.includes("again")){Tt.current&&De&&jt(Tt.current).catch(Z=>console.warn("[Voice] Echo failed:",Z));return}const rt=te.match(/what(?:'?s| is)?\s+(?:on\s+)?([a-h])[\s-]?([1-8])/);if(rt){const Z=`${rt[1]}${rt[2]}`;B&&de.current.push(Z);const ee=Pe.get(Z);let se="";if(ee){const pe=ee.color==="w"?"White":"Black",Je={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[ee.type]||ee.type;se=`${pe} ${Je} on ${Z}`}else se=`${Z.toUpperCase()} is empty`;De&&jt(se).catch(pe=>console.warn("[Voice] Echo failed:",pe)),ze(null);return}if(te.includes("last move")||te.includes("previous move")||te.includes("opponent's move")){try{Ve.impact({style:Ue.Light}).catch(()=>{})}catch{}const Z=Pe.history({verbose:!0});let ee="";if(Z.length===0)ee="No moves have been made yet";else{const se=Z[Z.length-1],We={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[se.piece]||se.piece,Je=se.captured?" takes":"",Ke=se.from.toUpperCase(),ct=se.to.toUpperCase();se.piece==="p"?ee=`${Ke}${Je} ${ct}`:ee=`${We}${Je} ${ct}`}De&&jt(ee).catch(se=>console.warn("[Voice] Echo failed:",se)),ze(null);return}if(/\b(how much time|what('?s| is) the time|time left|clock|my time)\b/.test(te)){try{Ve.impact({style:Ue.Light}).catch(()=>{})}catch{}const Z=S==="white"?Xs.current:Zs.current,ee=S==="white"?Zs.current:Xs.current,se=We=>{const Je=Math.floor(We/60),Ke=We%60;return Je>0&&Ke>0?`${Je} minute${Je!==1?"s":""} ${Ke} second${Ke!==1?"s":""}`:Je>0?`${Je} minute${Je!==1?"s":""}`:`${Ke} second${Ke!==1?"s":""}`},pe=`You have ${se(Z)}. Opponent has ${se(ee)}.`;De&&jt(pe).catch(We=>console.warn("[Voice] Echo failed:",We)),ze(null);return}const yn=te.match(/where(?:'?s| is| are)?\s+(?:my\s+)?(\w+)/);if(yn){const Z=yn[1].toLowerCase(),se={king:"k",kings:"k",queen:"q",queens:"q",rook:"r",rooks:"r",castle:"r",castles:"r",bishop:"b",bishops:"b",knight:"n",knights:"n",horse:"n",horses:"n",pawn:"p",pawns:"p"}[Z];if(se){try{Ve.impact({style:Ue.Light}).catch(()=>{})}catch{}const pe=S==="white"?"w":"b",Je={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"}[se],Ke=[],ct=["a","b","c","d","e","f","g","h"];for(const dt of ct)for(let ln=1;ln<=8;ln++){const qt=`${dt}${ln}`,eo=Pe.get(qt);eo&&eo.type===se&&eo.color===pe&&Ke.push(qt.toUpperCase())}let ot="";Ke.length===0?ot=`You have no ${Je}s`:Ke.length===1?ot=`Your ${Je} is on ${Ke[0]}`:ot=`You have ${Je}s on ${Ke.slice(0,-1).join(", ")} and ${Ke[Ke.length-1]}`,De&&jt(ot).catch(dt=>console.warn("[Voice] Echo failed:",dt)),ze(null);return}}if(te.includes("material")){try{Ve.impact({style:Ue.Light}).catch(()=>{})}catch{}const Z={p:1,n:3,b:3,r:5,q:9},ee={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen"},se={p:0,n:0,b:0,r:0,q:0},pe={p:0,n:0,b:0,r:0,q:0},We=["a","b","c","d","e","f","g","h"];for(const ot of We)for(let dt=1;dt<=8;dt++){const ln=`${ot}${dt}`,qt=Pe.get(ln);qt&&qt.type!=="k"&&(qt.color==="w"?se[qt.type]++:pe[qt.type]++)}const Je={};let Ke=0;for(const ot of["q","r","b","n","p"]){const dt=se[ot]-pe[ot];dt!==0&&(Je[ot]=dt,Ke+=dt*Z[ot])}let ct="";if(Ke===0)ct="Material is equal";else{const ot=Ke>0?"White":"Black",dt=Math.abs(Ke),ln=[];for(const qt of["q","r","b","n","p"]){const eo=Ke>0?Je[qt]:-(Je[qt]||0);if(eo&&eo>0){const $p=eo,Op=ee[qt];ln.push($p===1?`a ${Op}`:`${$p} ${Op}s`)}}if(ln.length>0){const qt=ln.length===1?ln[0]:`${ln.slice(0,-1).join(", ")} and ${ln[ln.length-1]}`;ct=`${ot} is up ${qt}`}else ct=`${ot} is up by ${dt} point${dt!==1?"s":""}`}De&&jt(ct).catch(ot=>console.warn("[Voice] Echo failed:",ot)),ze(null);return}const On=te.match(/legal\s+moves?\s+(?:for\s+)?(?:my\s+)?(\w+)/);if(On){const Z=On[1].toLowerCase(),se={king:"k",queen:"q",rook:"r",bishop:"b",knight:"n",pawn:"p",kings:"k",queens:"q",rooks:"r",bishops:"b",knights:"n",pawns:"p",horse:"n",horses:"n",castle:"r",castles:"r"}[Z];if(se){try{Ve.impact({style:Ue.Light}).catch(()=>{})}catch{}const We={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"}[se],Ke=Pe.moves({verbose:!0}).filter(dt=>dt.piece===se),ct=Array.from(new Set(Ke.map(dt=>dt.to.toUpperCase())));let ot="";if(ct.length===0)ot=`Your ${We} has no legal moves`;else if(ct.length<=4)ot=`Your ${We} can move to ${ct.join(", ")}`;else{const dt=ct.slice(0,3);ot=`Your ${We} has ${ct.length} legal moves, including ${dt.join(", ")}`}De&&jt(ot).catch(dt=>console.warn("[Voice] Echo failed:",dt)),ze(null);return}}if(te.includes("resign")||te.includes("quit")||te.includes("give up")||te.includes("i resign")){try{Ve.impact({style:Ue.Medium}).catch(()=>{})}catch{}Yn(!0),ze(null);return}if(te==="peek"||te==="peak"){if($==="no_board"||Q==="grandmaster"){De&&jt("Peeking is not allowed in this mode").catch(Z=>console.warn("[Voice] Echo failed:",Z)),ze(null);return}try{Ve.impact({style:Ue.Light}).catch(()=>{})}catch{}he.current=!0,O(!0),le.current&&clearTimeout(le.current),le.current=setTimeout(()=>{O(!1),le.current=null},5e3),De&&jt("Board visible for 5 seconds").catch(Z=>console.warn("[Voice] Echo failed:",Z)),ze(null);return}if(te.includes("eval")||te.includes("evaluation")){try{Ve.impact({style:Ue.Light}).catch(()=>{})}catch{}he.current=!0,De&&(async()=>{try{const Z=await Si.getBestMove(Pe.fen(),{depth:12});let ee="";if(Z.evaluation!==void 0){const se=Z.evaluation,pe=se>=0?"plus":"minus",We=Math.abs(se).toFixed(1);Math.abs(se)>=100?ee=se>0?"White has checkmate":"Black has checkmate":Math.abs(se)<.3?ee="Position is equal":ee=`Evaluation is ${pe} ${We}`}else ee="Unable to evaluate position";await jt(ee)}catch(Z){console.warn("[Voice] Eval failed:",Z),jt("Unable to evaluate position").catch(()=>{})}})(),ze(null);return}if(lt){G.current&&(clearTimeout(G.current),G.current=null);const Z=Lv(Be);let ee=null;if(lt.isPawnCapture&&lt.pawnFiles&&Z.file?ee=Dv(lt.candidates,Z.file):(Z.file||Z.rank)&&(ee=Iv(lt.candidates,Z)),ee){if($n(null),De){const We=Uo(ee,ee.includes("x"),!1,!1);Tt.current=We,jt(We).catch(Je=>console.warn("[Voice] Echo failed:",Je))}if(!je.current)return;const pe=je.current.move(ee);if(pe){V.current++,m(je.current.fen()),k({from:pe.from,to:pe.to});const We=[...Ct.current,pe.san];if(g(We),Ct.current=We,w(null),v([]),ze(null),je.current.isCheckmate()){const Je=je.current.turn()==="w"?"black_win":"white_win";Rt(Je)}else(je.current.isDraw()||je.current.isStalemate()||je.current.isThreefoldRepetition()||je.current.isInsufficientMaterial())&&Rt("draw")}return}ke.current++;const se=lt.isPawnCapture?"I didn't catch that. Which file?":"I didn't catch that. Which piece?";De&&jt(se).catch(pe=>console.warn("[Voice] Echo failed:",pe)),G.current=setTimeout(async()=>{$n(null),ze(null),De&&jt("Move cancelled").catch(pe=>console.warn("[Voice] Echo failed:",pe))},1e4);return}const ht=Pe.moves(),oe=Av(Be,ht);if(oe.move){if(De){const ee=Uo(oe.move,oe.move.includes("x"),!1,!1);Tt.current=ee,jt(ee).catch(se=>console.warn("[Voice] Echo failed:",se))}if(!je.current)return;const Z=je.current.move(oe.move);if(Z){if(Ee.current!==null){const se=Date.now()-Ee.current;$e.current.push(se),Ee.current=null}if(B){if(!He.current){const se=J+1;fe(se),se>ue&&Ne(se)}He.current=!1}V.current++;try{Ve.impact({style:Ue.Light}).catch(()=>{})}catch{}m(je.current.fen()),k({from:Z.from,to:Z.to});const ee=[...Ct.current,Z.san];if(g(ee),Ct.current=ee,w(null),v([]),ze(null),je.current.isCheckmate()){const se=je.current.turn()==="w"?"black_win":"white_win";Rt(se)}else(je.current.isDraw()||je.current.isStalemate()||je.current.isThreefoldRepetition()||je.current.isInsufficientMaterial())&&Rt("draw")}}else if(oe.isAmbiguous&&oe.candidates.length>1){const Z=Bv(oe.candidates),ee=Z?Ov(oe.candidates):[];let se;if(Z&&ee.length===2){const pe=ee[0].toUpperCase(),We=ee[1].toUpperCase();se=`Did you mean ${pe} takes ${oe.targetSquare} or ${We} takes ${oe.targetSquare}?`}else{const pe=$v(oe.candidates),We=oe.piece==="R"?"rook":oe.piece==="N"?"knight":oe.piece==="B"?"bishop":oe.piece==="Q"?"queen":"piece";se=pe.length===2?`Two ${We}s can move to ${oe.targetSquare}. The one on ${pe[0]} or ${pe[1]}?`:`Multiple ${We}s can move to ${oe.targetSquare}. Which one?`}$n({candidates:oe.candidates,piece:oe.piece,targetSquare:oe.targetSquare,isPawnCapture:Z,pawnFiles:ee}),ze(`Clarify: ${oe.candidates.join(" or ")}`),De&&jt(se).catch(pe=>console.warn("[Voice] Echo failed:",pe)),G.current=setTimeout(async()=>{$n(null),ze(null),De&&jt("Move cancelled").catch(pe=>console.warn("[Voice] Echo failed:",pe))},1e4)}else ke.current++,s({title:"Didn't understand",description:`Heard: "${Be}". Try again.`,variant:"destructive"}),It(Z=>Z+1)}),Wt.setOnListeningChange(Zi);const z=je.current,ne=z.turn();if((ne==="w"&&S==="white"||ne==="b"&&S==="black")&&!sn&&!ts&&N===null&&!ed.current){const _e=z.moves();Wt.setLegalMoves(_e),Wt.start(),Wt.getMuted()&&Wt.resumeLoop()}else N!==null&&Wt.stop();return()=>{Wt.reset(),$i.clearProtectedLane(),G.current&&(clearTimeout(G.current),G.current=null)}},[jn,u,h,S,sn,ts,N,De,s,Rt,lt,Gs,Ks,_p]),d.useEffect(()=>{if(!Xe||!je.current||N!==null)return;const z=je.current,ne=z.turn();if((ne==="w"&&S==="black"||ne==="b"&&S==="white")&&u&&!sn){const _e=z.history(),Be=z.fen(),Pe=b?p4({from:b.from,to:b.to}):void 0;na(Be,Xe.elo,_e,Pe).then(async Ze=>{if(Ze&&je.current){const te=je.current.move(Ze.move);te&&k({from:te.from,to:te.to});const rt=je.current.fen();m(rt);const xn=[...Ct.current,Ze.move];g(xn),Ct.current=xn,Ee.current=Date.now();try{Ve.impact({style:Ue.Medium}).catch(()=>{}),setTimeout(()=>{Ve.impact({style:Ue.Medium}).catch(()=>{})},100)}catch{}if(De){const yn=je.current.isCheck(),On=je.current.isCheckmate(),ht=Ze.move.includes("x"),oe=Uo(Ze.move,ht,yn,On);if(Tt.current=oe,bl&&Js.current&&jn)try{await ie.speakAndListen({text:oe})}catch(Z){console.error("[NativeVoice] TTS error:",Z)}else{ed.current=!0;try{await jt(oe)}catch(Z){console.error("[Voice] TTS error:",Z)}finally{ed.current=!1}}}if(je.current.isCheckmate()){const yn=je.current.turn()==="w"?"black_win":"white_win";Rt(yn)}else(je.current.isDraw()||je.current.isStalemate()||je.current.isThreefoldRepetition()||je.current.isInsufficientMaterial())&&Rt("draw")}})}},[h,Xe,S,u,sn,N,De,jn,na,Rt,b]);const kl=z=>{if(z>=99999)return"";const ne=Math.floor(z/60),ae=z%60;return`${ne}:${ae.toString().padStart(2,"0")}`},Nk=(z,ne)=>{if(!l)return!1;const ae=l.get(z);if(!ae||ae.type!=="p")return!1;const _e=ne[1];return ae.color==="w"&&_e==="8"||ae.color==="b"&&_e==="1"},Lp=async(z,ne,ae="q")=>{if(l)try{const _e=l.move({from:z,to:ne,promotion:ae});if(_e){if(U.current++,Ee.current!==null){const Ze=Date.now()-Ee.current;$e.current.push(Ze),Ee.current=null}if(B){if(!He.current){const Ze=J+1;fe(Ze),Ze>ue&&Ne(Ze)}He.current=!1}const Be=l.fen();m(Be),k({from:_e.from,to:_e.to});const Pe=[...Ct.current,_e.san];g(Pe),Ct.current=Pe,w(null),v([]),l.isCheckmate()?Rt(l.turn()==="w"?"black_win":"white_win"):(l.isDraw()||l.isStalemate()||l.isThreefoldRepetition()||l.isInsufficientMaterial())&&Rt("draw")}}catch(_e){console.error("Invalid move:",_e)}},Ck=d.useCallback(z=>{if(!(!l||N||!(l.turn()==="w"&&S==="white"||l.turn()==="b"&&S==="black")))if(p)if(x.includes(z))Nk(p,z)?vn({from:p,to:z}):Lp(p,z);else{const ae=l.get(z);if(ae&&(ae.color==="w"&&S==="white"||ae.color==="b"&&S==="black")){w(z);const _e=l.moves({square:z,verbose:!0});v(_e.map(Be=>Be.to))}else w(null),v([])}else{const ae=l.get(z);if(ae&&(ae.color==="w"&&S==="white"||ae.color==="b"&&S==="black")){w(z);const _e=l.moves({square:z,verbose:!0});v(_e.map(Be=>Be.to))}}},[l,N,S,p,x]),Ip=()=>{xe<=0||(O(!0),q.current=Date.now(),He.current=!0,fe(0))},Nl=()=>{if(Ce&&xe>0&&(we(z=>z-1),q.current)){const z=Date.now()-q.current;X.current+=z}O(!1),q.current=null};if(Rp)return i.jsx(d4,{game:Rp,open:!0,onClose:()=>{wl(null),Sr(!0)},onAnalyze:z=>{nt(z),wl(null),Sr(!1),me(!0)}});if(Or)return i.jsx(l4,{onBack:()=>Sr(!1),onViewGame:z=>{wl(z)}});if(M&&Se.length>0)return i.jsx(o0,{moveHistory:Se,playerColor:S,gameResult:N,botElo:bt,onClose:()=>{me(!1),a(!0)}});if(o)return i.jsxs("div",{className:"h-full w-full flex flex-col items-center relative overflow-hidden bg-white","data-testid":"screen-title",children:[i.jsx("img",{src:NA,alt:"Blindfold Chess",className:"absolute inset-0 w-full h-full object-contain object-center z-0"}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-1 p-4 pt-2 w-full",children:[i.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-black text-center tracking-tight","data-testid":"text-title",children:"Blindfold Chess"}),i.jsx("p",{className:"text-black/70 text-center text-sm md:text-base",children:"Train your visualization and memory"})]}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 p-4 pb-4 w-full max-w-sm",children:[i.jsxs(re,{size:"lg",variant:"ghost",className:"w-full text-base py-4 bg-amber-400 hover:bg-amber-500 text-stone-900 border border-amber-500 dark:bg-black dark:hover:bg-black/90 dark:text-white dark:border-black",onClick:()=>r==null?void 0:r(),"data-testid":"button-train-now",children:[i.jsx(nw,{className:"mr-2 h-5 w-5"}),"Train Now"]}),i.jsxs(re,{size:"lg",variant:"ghost",className:"w-full text-base py-4 bg-amber-400 hover:bg-amber-500 text-stone-900 border border-amber-500 dark:bg-black dark:hover:bg-black/90 dark:text-white dark:border-black",onClick:()=>a(!1),"data-testid":"button-start-now",children:[i.jsx(nv,{className:"mr-2 h-5 w-5"}),"Play Now"]})]})]});if(!u){const z=async()=>{const ne=su(bt),ae={id:`elo_${bt}`,elo:bt,difficulty:`elo_${Math.round(bt/200)*200}`,depth:ne.depth,randomPercent:ne.randomPercent};try{await Ve.impact({style:Ue.Heavy})}catch{}wr(!0),setTimeout(()=>{Ap(ae,gn)},200)};return i.jsxs("div",{className:`h-full flex flex-col max-w-lg mx-auto px-4 py-2 transition-opacity duration-200 ${Lo?"opacity-0":"opacity-100"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:()=>a(!0),"data-testid":"button-setup-back",children:i.jsx(Rs,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Game Set-up"})]}),i.jsxs(Ye,{className:"flex flex-col",children:[i.jsxs(et,{className:"overflow-y-auto pt-4 pb-2 space-y-3",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Zt,{htmlFor:"blindfold-toggle",children:"Blindfold Challenge"}),i.jsx(er,{id:"blindfold-toggle",checked:B,onCheckedChange:H,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-blindfold"})]}),B&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Zt,{children:"Blindfold Difficulty"}),i.jsxs(Zv,{value:Q,onValueChange:ne=>T(ne),children:[i.jsx(jh,{"data-testid":"select-blindfold-difficulty",children:i.jsx(Jv,{})}),i.jsxs(Eh,{children:[i.jsx(Nr,{value:"easy",children:"Easy (Unlimited Peeks)"}),i.jsx(Nr,{value:"medium",children:"Medium (20 Peeks)"}),i.jsx(Nr,{value:"hard",children:"Hard (10 Peeks)"}),i.jsx(Nr,{value:"expert",children:"Expert (5 Peeks)"}),i.jsx(Nr,{value:"master",children:"Master (2 Peeks)"}),i.jsx(Nr,{value:"grandmaster",children:"Grandmaster (No Peeks)"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Zt,{children:"Display Mode"}),i.jsxs(Zv,{value:$,onValueChange:ne=>{const ae=ne;Y(ae),ae==="no_board"&&(ge(!1),Io(!0),vl(!0))},children:[i.jsx(jh,{"data-testid":"select-blindfold-display",children:i.jsx(Jv,{})}),i.jsxs(Eh,{children:[i.jsx(Nr,{value:"empty_board",children:"Empty Board"}),i.jsx(Nr,{value:"black_overlay",children:"Black Overlay"}),i.jsx(Nr,{value:"no_board",children:"No Board"})]})]})]}),$!=="no_board"&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Zt,{htmlFor:"coordinates-toggle",children:"Show Coordinates (1-8, a-h)"}),i.jsx(er,{id:"coordinates-toggle",checked:W,onCheckedChange:ge,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-coordinates"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Zt,{htmlFor:"reconstruction-toggle",className:"text-sm",children:"Board Reconstruction Challenge"}),i.jsx(er,{id:"reconstruction-toggle",checked:Ae.boardReconstructionEnabled,onCheckedChange:ne=>{const ae={...Ae,boardReconstructionEnabled:ne};Re(ae),vh(ae)},className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-board-reconstruction"})]}),Ae.boardReconstructionEnabled&&i.jsx("p",{className:"text-xs text-muted-foreground",children:"After each game, reconstruct the final position to test your memory."}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(hn,{className:"h-4 w-4"}),i.jsx(Zt,{htmlFor:"voice-input",children:"Voice Input"})]}),i.jsx(er,{id:"voice-input",checked:jn,onCheckedChange:Io,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-voice-input"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($m,{className:"h-4 w-4"}),i.jsx(Zt,{htmlFor:"voice-output",children:"Voice Output"})]}),i.jsx(er,{id:"voice-output",checked:De,onCheckedChange:vl,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-voice-output"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex flex-col gap-0.5",children:[i.jsx(Zt,{htmlFor:"bot-thinking-toggle",className:"text-sm",children:"Bot Thinking Time"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"Human-like delays"})]}),i.jsx(er,{id:"bot-thinking-toggle",checked:Ae.botThinkingTimeEnabled,onCheckedChange:ne=>{const ae={...Ae,botThinkingTimeEnabled:ne};Re(ae),vh(ae)},className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-bot-thinking-time"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Zt,{children:"Time Control"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs(re,{variant:"outline",size:"sm",className:F==="blitz"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>L("blitz"),"data-testid":"button-time-blitz",children:[i.jsx(ho,{className:"mr-1 h-3 w-3"}),"5 min"]}),i.jsxs(re,{variant:"outline",size:"sm",className:F==="rapid"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>L("rapid"),"data-testid":"button-time-rapid",children:[i.jsx(ho,{className:"mr-1 h-3 w-3"}),"15 min"]}),i.jsxs(re,{variant:"outline",size:"sm",className:F==="classical"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>L("classical"),"data-testid":"button-time-classical",children:[i.jsx(ho,{className:"mr-1 h-3 w-3"}),"30 min"]}),i.jsxs(re,{variant:"outline",size:"sm",className:F==="practice"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>L("practice"),"data-testid":"button-time-practice",children:[i.jsx(h2,{className:"mr-1 h-3 w-3"}),"Practice"]})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Zt,{children:"Bot Rating"}),i.jsxs("span",{className:"text-sm font-medium text-amber-600 dark:text-amber-400",children:[bt," - ",yR(bt)]})]}),i.jsx(tk,{value:[bt],onValueChange:ne=>ir(ne[0]),min:400,max:2600,step:50,className:"w-full","data-testid":"slider-bot-elo"}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[i.jsx("span",{children:"400"}),i.jsx("span",{children:"1000"}),i.jsx("span",{children:"1600"}),i.jsx("span",{children:"2200"}),i.jsx("span",{children:"2600"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Zt,{children:"Your Color"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs(re,{variant:"outline",size:"sm",className:gn==="white"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>es("white"),"data-testid":"button-color-white",children:[i.jsx("div",{className:"w-4 h-4 rounded-full bg-white border border-gray-400 mr-1"}),"White"]}),i.jsxs(re,{variant:"outline",size:"sm",className:gn==="black"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>es("black"),"data-testid":"button-color-black",children:[i.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-900 mr-1"}),"Black"]}),i.jsxs(re,{variant:"outline",size:"sm",className:gn==="random"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>es("random"),"data-testid":"button-color-random",children:[i.jsx(w2,{className:"w-4 h-4 mr-1"}),"Random"]})]})]})]}),i.jsx("div",{className:"p-4 pt-2 border-t",children:i.jsxs(re,{size:"lg",className:"w-full bg-amber-400 hover:bg-amber-500 text-stone-900 border border-black",onClick:z,"data-testid":"button-start-game",children:[i.jsx(nv,{className:"mr-2 h-5 w-5"}),"Start Game"]})})]})]})}return i.jsxs("div",{className:"h-[100dvh] w-full flex flex-col overflow-hidden animate-in fade-in duration-300",children:[i.jsx(Ep,{}),Qs&&xl&&i.jsx("div",{className:"mb-3",children:i.jsx(AA,{actualFen:xl,playerColor:S,onComplete:wk,onSkip:Sk,onContinue:bk,onViewReport:()=>$r(!0)})}),i.jsx($A,{open:Yu&&!M,gameResult:N,playerColor:S,clarityScore:st.lastClarityScore,responseTimes:ea,squareInquiries:Zu,reconstructionScore:Ju,reconstructionVoicePurity:E,reconstructionEnabled:Ae.boardReconstructionEnabled,onRematch:()=>{if(Xe){const z=S==="white"?"black":"white";$r(!1),me(!1),Sl(),setTimeout(()=>Ap(Xe,z),100)}},onMainMenu:()=>{$r(!1),me(!1),Sl(),ta()},onAnalyze:()=>{me(!0)}}),M&&Se.length>0&&i.jsx(o0,{moveHistory:Se,playerColor:S,gameResult:N,botElo:bt,onClose:()=>me(!1)}),!Qs&&i.jsxs("main",{className:"absolute inset-0 flex flex-col p-2 md:p-4 max-w-4xl mx-auto w-full overflow-hidden",children:[i.jsx(Ye,{className:`flex-none lg:hidden ${l&&(S==="white"&&l.turn()==="b"||S==="black"&&l.turn()==="w")?"ring-2 ring-amber-400":""}`,children:i.jsx(et,{className:"py-2 px-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${S==="white"?"bg-black":"bg-white border border-gray-400"}`}),i.jsx(ev,{className:"h-4 w-4 text-amber-500"}),i.jsx("span",{className:"font-medium text-sm",children:Xe?`${Xe.elo} Elo Bot`:"Bot"}),sn&&i.jsx("span",{className:`text-xs animate-pulse ${In?"text-amber-500 font-medium":"text-primary"}`,children:In?"Thinking...":"thinking..."})]}),i.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(S==="white"&&l.turn()==="b"||S==="black"&&l.turn()==="w")?"text-foreground":"text-muted-foreground"}`,children:kl(S==="white"?D:R)})]})})}),i.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-2 min-h-0 overflow-hidden",children:[i.jsxs("div",{className:"flex-1 flex flex-col gap-2 min-h-0 overflow-hidden",children:[i.jsx(Ye,{className:`hidden lg:block flex-none ${l&&(S==="white"&&l.turn()==="b"||S==="black"&&l.turn()==="w")?"ring-2 ring-amber-400":""}`,children:i.jsx(et,{className:"py-2 px-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${S==="white"?"bg-black":"bg-white border border-gray-400"}`}),i.jsx(ev,{className:"h-4 w-4 text-amber-500"}),i.jsx("span",{className:"font-medium text-sm","data-testid":"text-opponent-name",children:Xe?`${Xe.elo} Elo Bot`:"Bot"}),sn&&i.jsx("span",{className:`text-xs animate-pulse ${In?"text-amber-500 font-medium":"text-primary"}`,"data-testid":"text-bot-thinking",children:In?"Thinking...":"thinking..."})]}),i.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(S==="white"&&l.turn()==="b"||S==="black"&&l.turn()==="w")?"text-foreground":"text-muted-foreground"}`,"data-testid":"text-opponent-time",children:kl(S==="white"?D:R)})]})})}),i.jsx("div",{className:"flex-1 flex items-center justify-center min-h-0 overflow-hidden",children:i.jsx(Ye,{className:`aspect-square max-h-full max-w-full md:max-w-[600px] p-1 md:p-2 ${B&&$==="no_board"&&!Ce?"invisible":""}`,children:i.jsxs("div",{className:"relative w-full h-full",children:[i.jsx(sM,{fen:h,orientation:S,showCoordinates:B&&W,highlightedSquares:x,lastMove:b||void 0,onSquareClick:Ck,noCard:!0}),rs!==null&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 z-50","data-testid":"overlay-reconstruction-countdown","aria-live":"polite",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-8xl md:text-9xl font-bold text-amber-400 animate-pulse","data-testid":"text-countdown-number",children:rs}),i.jsx("div",{className:"text-lg md:text-xl text-white mt-4 font-medium",children:"Memorize the position..."})]})}),B&&!Ce&&$==="empty_board"&&i.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-visible",children:i.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((z,ne)=>{const ae=Math.floor(ne/8),_e=ne%8,Be=(ae+_e)%2===0,Pe=S==="white"?["a","b","c","d","e","f","g","h"]:["h","g","f","e","d","c","b","a"],Ze=S==="white"?["8","7","6","5","4","3","2","1"]:["1","2","3","4","5","6","7","8"],te=_e===0,rt=ae===7;return i.jsxs("div",{className:`relative ${Be?"bg-amber-100":"bg-amber-700"}`,children:[W&&te&&i.jsx("span",{className:`absolute bottom-0.5 left-1 text-xs font-semibold select-none ${Be?"text-amber-800/70":"text-amber-100/70"}`,children:Ze[ae]}),W&&rt&&i.jsx("span",{className:`absolute bottom-0.5 right-1 text-xs font-semibold select-none ${Be?"text-amber-800/70":"text-amber-100/70"}`,children:Pe[_e]})]},ne)})})}),B&&!Ce&&$==="black_overlay"&&i.jsxs("div",{className:"absolute inset-0 bg-black pointer-events-none overflow-visible",children:[i.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 8 8",preserveAspectRatio:"none",children:[Array.from({length:9}).map((z,ne)=>i.jsx("line",{x1:"0",y1:ne,x2:"8",y2:ne,stroke:"white",strokeWidth:"0.02"},`h-${ne}`)),Array.from({length:9}).map((z,ne)=>i.jsx("line",{x1:ne,y1:"0",x2:ne,y2:"8",stroke:"white",strokeWidth:"0.02"},`v-${ne}`))]}),W&&i.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((z,ne)=>{const ae=Math.floor(ne/8),_e=ne%8,Be=S==="white"?["a","b","c","d","e","f","g","h"]:["h","g","f","e","d","c","b","a"],Pe=S==="white"?["8","7","6","5","4","3","2","1"]:["1","2","3","4","5","6","7","8"],Ze=_e===0,te=ae===7;return i.jsxs("div",{className:"relative",children:[Ze&&i.jsx("span",{className:"absolute bottom-0.5 left-1 text-xs font-semibold select-none text-white/70",children:Pe[ae]}),te&&i.jsx("span",{className:"absolute bottom-0.5 right-1 text-xs font-semibold select-none text-white/70",children:Be[_e]})]},ne)})})]})]})})}),i.jsx(Ye,{className:`flex-none hidden lg:flex ${l&&(S==="white"&&l.turn()==="w"||S==="black"&&l.turn()==="b")?"ring-2 ring-amber-400":""}`,children:i.jsx(et,{className:"py-2 px-4 w-full",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${S==="white"?"bg-white border border-gray-400":"bg-black"}`}),i.jsx("span",{className:"font-medium text-sm","data-testid":"text-player-name",children:"You"})]}),i.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(S==="white"&&l.turn()==="w"||S==="black"&&l.turn()==="b")?"text-foreground":"text-muted-foreground"}`,"data-testid":"text-player-time",children:kl(S==="white"?R:D)})]})})})]}),i.jsxs("div",{className:"flex flex-col gap-2 lg:w-48 flex-none",children:[B&&Q!=="grandmaster"&&i.jsxs(re,{variant:Ce?"default":"outline",className:`w-full ${Ce?"bg-amber-400 hover:bg-amber-500 text-black":""}`,onMouseDown:Ip,onMouseUp:Nl,onMouseLeave:Nl,onTouchStart:Ip,onTouchEnd:Nl,onTouchCancel:Nl,disabled:xe<=0,"data-testid":"button-peek",children:[i.jsx(rw,{className:"mr-2 h-4 w-4"}),Ce?"Peeking...":"Hold to Peek"]}),B&&i.jsx("div",{className:"text-center text-sm text-muted-foreground","data-testid":"text-peeks-remaining",children:isFinite(xe)?`${xe} peeks left`:"Unlimited peeks"}),B&&i.jsxs("div",{className:"text-center text-sm","data-testid":"text-peek-free-streak",children:[i.jsx("span",{className:"text-muted-foreground",children:"Streak: "}),i.jsx("span",{className:"font-semibold text-amber-500",children:J}),ue>0&&i.jsxs("span",{className:"text-muted-foreground/70 text-xs ml-1",children:["(best: ",ue,")"]})]}),jn&&i.jsx("div",{className:"flex items-center justify-center gap-2 text-sm",children:lt?i.jsxs(i.Fragment,{children:[i.jsx(hn,{className:"h-4 w-4 text-amber-500 animate-pulse"}),i.jsx("span",{className:"text-amber-500",children:"Which piece?"})]}):Qu?i.jsxs(i.Fragment,{children:[i.jsx(hn,{className:"h-4 w-4 text-primary animate-pulse"}),i.jsx("span",{className:"text-primary",children:"Listening..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(mo,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-muted-foreground",children:"Voice paused"})]})}),_&&i.jsx("div",{className:`text-xs text-center ${lt?"text-amber-500 font-medium":"text-muted-foreground"}`,children:lt?_:`Heard: "${_}"`}),i.jsx(Ye,{className:`lg:hidden ${l&&(S==="white"&&l.turn()==="w"||S==="black"&&l.turn()==="b")?"ring-2 ring-amber-400":""}`,children:i.jsx(et,{className:"py-2 px-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${S==="white"?"bg-white border border-gray-400":"bg-black"}`}),i.jsx("span",{className:"font-medium text-sm",children:"You"})]}),i.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(S==="white"&&l.turn()==="w"||S==="black"&&l.turn()==="b")?"text-foreground":"text-muted-foreground"}`,children:kl(S==="white"?R:D)})]})})}),i.jsx(Ye,{className:"flex-none",children:i.jsx(et,{className:"p-2",children:i.jsx(Cp,{className:"h-16 lg:h-48",children:i.jsx("div",{className:"text-xs font-mono space-y-1",children:y.map((z,ne)=>i.jsxs("span",{className:ne%2===0?"font-semibold":"",children:[ne%2===0&&i.jsxs("span",{className:"text-muted-foreground",children:[Math.floor(ne/2)+1,". "]}),z," "]},ne))})})})}),!N&&i.jsxs(re,{variant:"outline",size:"sm",className:"w-full text-red-600 border-red-300 hover:bg-red-50",onClick:()=>Yn(!0),"data-testid":"button-resign",children:[i.jsx(Mu,{className:"mr-2 h-4 w-4"}),"Resign"]})]})]})]}),i.jsx(iM,{open:!!ts,color:S,onSelect:z=>{ts&&(Lp(ts.from,ts.to,z),vn(null))}}),i.jsx(Po,{open:Ks,onOpenChange:Yn,children:i.jsxs(Ls,{children:[i.jsxs(Is,{children:[i.jsx(Os,{children:"Resign Game?"}),i.jsx(Ds,{children:"Are you sure you want to resign? This will count as a loss."})]}),i.jsxs($s,{children:[i.jsx(Fs,{"data-testid":"button-resign-cancel",children:"Cancel"}),i.jsx(Bs,{className:"bg-red-600 hover:bg-red-700",onClick:()=>{Rt(S==="white"?"black_win":"white_win"),Yn(!1)},"data-testid":"button-resign-confirm",children:"Resign"})]})]})}),i.jsx(Po,{open:be,onOpenChange:$o,children:i.jsxs(Ls,{children:[i.jsxs(Is,{children:[i.jsx(Os,{children:"Resume Game?"}),i.jsxs(Ds,{children:["You have an unfinished game",ns?` (${ns.playerColor==="white"?"White":"Black"} vs ${ns.botElo} Elo)`:"",". Would you like to continue?"]})]}),i.jsxs($s,{children:[i.jsx(Fs,{"data-testid":"button-resume-cancel",onClick:()=>{nc(),Ji(null),$o(!1)},children:"New Game"}),i.jsx(Bs,{onClick:()=>{ns&&(kk(ns),Ji(null)),$o(!1)},"data-testid":"button-resume-confirm",children:"Resume"})]})]})})]})}const lo=mn.isNativePlatform();async function yt(e){if(lo)try{await ie.speakAndListen({text:e})}catch(t){console.error("[Training] speakAndListen error:",t)}else await jt(e)}const ki=["a","b","c","d","e","f","g","h"],Tp=["1","2","3","4","5","6","7","8"];function Ah(e,t){return`${e==="a"?"ay":e} ${t}`}function yk(e,t){return(e+t)%2===0}function co(){const e=Math.floor(Math.random()*8),t=Math.floor(Math.random()*8);return{file:ki[e],rank:Tp[t],fileIndex:e,rankIndex:t}}function Nc(e){const t=Math.floor(e/1e3),n=Math.floor(e%1e3/100);return`${t}.${n}s`}function y4({onBack:e,onStateChange:t,returnToMenuRef:n}){const[r,s]=d.useState("menu"),[o,a]=d.useState(null),[l,c]=d.useState("ready");d.useEffect(()=>{iu().then(a)},[r]),d.useEffect(()=>{r==="menu"?t==null||t("menu"):t==null||t(l)},[r,l,t]),d.useEffect(()=>(n&&(n.current=()=>{s("menu"),c("ready")}),()=>{n&&(n.current=null)}),[n]);const u=async(f,h,m)=>{await OR(f,h,m),a(await iu()),window.dispatchEvent(new CustomEvent("trainingStatsUpdated"))};return r==="color_blitz"?i.jsx(w4,{onBack:()=>s("menu"),onComplete:(f,h)=>u("color_blitz",f,h),stats:o,onGameStateChange:c}):r==="coordinate_sniper"?i.jsx(b4,{onBack:()=>s("menu"),onComplete:(f,h)=>u("coordinate_sniper",f,h),stats:o,onGameStateChange:c}):r==="voice_move_master"?i.jsx(S4,{onBack:()=>s("menu"),onComplete:(f,h)=>u("voice_move_master",f,h),stats:o,onGameStateChange:c}):i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-training-back",children:i.jsx(Rs,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Training Gym"})]}),i.jsxs("div",{className:"space-y-3 flex-1",children:[i.jsxs(Ye,{className:"hover-elevate cursor-pointer",onClick:()=>s("voice_move_master"),"data-testid":"card-voice-move-master",children:[i.jsx(_t,{className:"pb-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-2 rounded-lg bg-purple-500/20",children:i.jsx($m,{className:"h-5 w-5 text-purple-500"})}),i.jsxs("div",{children:[i.jsx(Mt,{className:"text-lg",children:"Voice Move Master"}),i.jsx(Ft,{children:"Announce moves by voice in 60 seconds"})]})]})}),i.jsx(et,{children:o!==null&&o.voiceMoveMasterBest!==null&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Vn,{className:"h-4 w-4 text-amber-500"}),i.jsxs("span",{children:["Best: ",o.voiceMoveMasterBest," correct"]})]})})]}),i.jsxs(Ye,{className:"hover-elevate cursor-pointer",onClick:()=>s("color_blitz"),"data-testid":"card-color-blitz",children:[i.jsx(_t,{className:"pb-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:i.jsx(Om,{className:"h-5 w-5 text-amber-500"})}),i.jsxs("div",{children:[i.jsx(Mt,{className:"text-lg",children:"Color Blitz"}),i.jsx(Ft,{children:"Name square colors in 60 seconds"})]})]})}),i.jsx(et,{children:o!==null&&o.colorBlitzBest!==null&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Vn,{className:"h-4 w-4 text-amber-500"}),i.jsxs("span",{children:["Best: ",o.colorBlitzBest," correct"]})]})})]}),i.jsxs(Ye,{className:"hover-elevate cursor-pointer",onClick:()=>s("coordinate_sniper"),"data-testid":"card-coordinate-sniper",children:[i.jsx(_t,{className:"pb-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:i.jsx(pi,{className:"h-5 w-5 text-blue-500"})}),i.jsxs("div",{children:[i.jsx(Mt,{className:"text-lg",children:"Coordinate Sniper"}),i.jsx(Ft,{children:"Find 10 squares as fast as possible"})]})]})}),i.jsx(et,{children:o!==null&&o.coordinateSniperBest!==null&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Vn,{className:"h-4 w-4 text-amber-500"}),i.jsxs("span",{children:["Best: ",Nc(o.coordinateSniperBest)]})]})})]})]})]})}function w4({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,o]=d.useState("ready"),[a,l]=d.useState(()=>co()),[c,u]=d.useState(0),[f,h]=d.useState(0),[m,y]=d.useState(0),[g,p]=d.useState(60),[w,x]=d.useState(!1),[v,b]=d.useState(!1),[k,S]=d.useState(!1),[C,N]=d.useState(!1),[j,R]=d.useState("challenge"),P=d.useRef(null),D=n!==null&&n.colorBlitzBest!==null&&c>n.colorBlitzBest,I=d.useRef(null),F=d.useRef(!1),L=d.useRef(null),B=d.useRef(!1),H=async()=>{if(B.current){try{await ie.stopSession()}catch{}B.current=!1}if(L.current){try{await L.current.remove()}catch{}L.current=null}S(!1)},Q=()=>{P.current&&clearInterval(P.current),H(),e()},T=async(W=!1)=>{N(W),o("playing"),u(0),h(0),y(0),p(60),F.current=!1;const ge=co();l(ge),setTimeout(async()=>{w&&(await yt(Ah(ge.file,ge.rank)),F.current=!0)},300)},$=()=>{P.current&&clearInterval(P.current),H(),e()};d.useEffect(()=>{if(!lo||!w||s!=="playing")return;let W=!1;return(async()=>{try{if(!await Fu()||W){console.warn("[ColorBlitz] Voice not ready or cancelled");return}if(console.log("[ColorBlitz] Starting voice session..."),L.current&&await L.current.remove(),W||(L.current=await ie.addListener("onSpeechResult",we=>{var X,J;const Ce=we.text.toLowerCase();console.log("[ColorBlitz] Voice:",Ce),W1(Ce);const O=["light","white","lie","lye","lite","lied","liked","right","bright","lyte","lit","like","life"],q=["dark","black","bark","duck","dock","doc","dork","dog","dart"];O.some(fe=>Ce.includes(fe))?(X=I.current)==null||X.call(I,"light"):q.some(fe=>Ce.includes(fe))&&((J=I.current)==null||J.call(I,"dark")),ie.startListening().catch(()=>{})}),W))return;await ie.startSession(),V1(!0),await ie.startListening(),q1(!0),B.current=!0,S(!0),console.log("[ColorBlitz] Native voice session started")}catch(xe){console.error("[ColorBlitz] Native voice setup failed:",xe),nu(String(xe))}})(),()=>{W=!0,H()}},[w,s]),d.useEffect(()=>(s==="playing"&&!C&&(P.current=setInterval(()=>{p(W=>W<=1?(o("finished"),0):W-1)},1e3)),()=>{P.current&&clearInterval(P.current)}),[s,C]),d.useEffect(()=>{s==="finished"&&!C&&t(c,m)},[s,c,m,t,C]),d.useEffect(()=>{r==null||r(s)},[s,r]);const Y=d.useCallback(W=>{if(s!=="playing")return;if((W==="white"||W==="light"?"light":"dark")==="dark"===yk(a.fileIndex,a.rankIndex)){u(Ce=>Ce+1),h(Ce=>{const O=Ce+1;return y(q=>Math.max(q,O)),Ve.notification({type:Bi.Success}).catch(()=>{}),O});const we=co();l(we),w&&setTimeout(async()=>{await yt(Ah(we.file,we.rank))},300)}else h(0),Ve.impact({style:Ue.Heavy}).catch(()=>{}),setTimeout(()=>{Ve.impact({style:Ue.Heavy}).catch(()=>{})},100),w&&setTimeout(async()=>{await yt("Wrong")},300)},[s,a,w]);return d.useEffect(()=>{I.current=Y},[Y]),s==="ready"?i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:Q,"data-testid":"button-colorblitz-back",children:i.jsx(Rs,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Color Blitz"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx(Om,{className:"h-12 w-12 text-amber-500 mx-auto"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"})]}),i.jsx(hl,{value:j,onValueChange:W=>R(W),className:"w-full max-w-xs",children:i.jsxs(Ki,{className:"grid w-full grid-cols-2",children:[i.jsx(qn,{value:"challenge","data-testid":"tab-colorblitz-challenge",children:"1 Minute Challenge"}),i.jsx(qn,{value:"practice","data-testid":"tab-colorblitz-practice",children:"Practice"})]})}),i.jsx("p",{className:"text-muted-foreground text-center",children:j==="challenge"?"Name as many square colors as you can in 60 seconds!":"Practice at your own pace with unlimited time."}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(er,{id:"voice-mode",checked:w,onCheckedChange:x,"data-testid":"switch-voice-mode"}),i.jsxs(Zt,{htmlFor:"voice-mode",className:"flex items-center gap-2",children:[w?i.jsx(hn,{className:"h-4 w-4"}):i.jsx(mo,{className:"h-4 w-4"}),"Voice Mode"]})]}),j==="challenge"&&n!==null&&n.colorBlitzBest!==null&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",i.jsx("span",{className:"font-semibold text-amber-500",children:n.colorBlitzBest})," correct"]}),i.jsx(re,{size:"lg",onClick:()=>T(j==="practice"),"data-testid":"button-start-colorblitz",children:"Start"})]})]}):s==="finished"?i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:Q,"data-testid":"button-colorblitz-back-finished",children:i.jsx(Rs,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Color Blitz"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[i.jsx(Vn,{className:`h-16 w-16 ${D?"text-amber-500":"text-muted-foreground"}`}),i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h2",{className:"text-4xl font-bold",children:c}),i.jsx("p",{className:"text-lg text-muted-foreground",children:"squares correct"}),D&&i.jsx(Et,{className:"bg-amber-500 text-white",children:"New Personal Best!"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(re,{variant:"outline",onClick:Q,"data-testid":"button-colorblitz-menu",children:"Menu"}),i.jsx(re,{onClick:()=>T(!1),"data-testid":"button-colorblitz-retry",children:"Play Again"})]})]})]}):i.jsxs(i.Fragment,{children:[lo&&i.jsx(Ep,{}),i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[C?i.jsx(Et,{variant:"outline",children:"Practice"}):i.jsxs("span",{className:"text-2xl font-bold tabular-nums",children:[g,"s"]}),w&&k&&i.jsx(hn,{className:"h-4 w-4 text-red-500 animate-pulse"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-lg font-semibold",children:c}),f>=5&&i.jsxs(Et,{variant:"outline",className:"text-amber-500 border-amber-500",children:[f," streak"]})]})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[i.jsx("div",{className:"text-center",children:i.jsxs("p",{className:"text-6xl font-bold font-mono tracking-wider",children:[a.file,a.rank]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full",children:[i.jsx(re,{size:"lg",className:"h-20 text-xl bg-amber-100 hover:bg-amber-200 text-amber-900 dark:bg-amber-100 dark:hover:bg-amber-200",onClick:()=>Y("light"),"data-testid":"button-answer-light",children:"Light"}),i.jsx(re,{size:"lg",className:"h-20 text-xl bg-amber-900 hover:bg-amber-800 text-amber-100",onClick:()=>Y("dark"),"data-testid":"button-answer-dark",children:"Dark"})]}),i.jsxs(re,{variant:"outline",onClick:()=>b(!0),className:"mt-4","data-testid":"button-colorblitz-resign",children:[i.jsx(Mu,{className:"h-4 w-4 mr-2"}),"Resign"]})]})]}),i.jsx(Po,{open:v,onOpenChange:b,children:i.jsxs(Ls,{children:[i.jsxs(Is,{children:[i.jsx(Os,{children:"Quit Game?"}),i.jsxs(Ds,{children:["Your current score of ",c," will not be saved."]})]}),i.jsxs($s,{children:[i.jsx(Fs,{"data-testid":"button-colorblitz-resign-cancel",children:"Continue"}),i.jsx(Bs,{onClick:$,"data-testid":"button-colorblitz-resign-confirm",children:"Quit"})]})]})})]})}function b4({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,o]=d.useState("ready"),[a,l]=d.useState(()=>co()),[c,u]=d.useState(0),[f,h]=d.useState(0),[m,y]=d.useState(0),[g,p]=d.useState(0),[w,x]=d.useState(0),[v,b]=d.useState(null),[k,S]=d.useState(null),[C,N]=d.useState(!1),[j,R]=d.useState(!1),[P,D]=d.useState("challenge"),[I,F]=d.useState(!1),L=10,B=n!==null&&n.coordinateSniperBest!==null&&w<n.coordinateSniperBest&&w>0,H=()=>{e()},Q=($=!1)=>{R($),o("playing"),u(0),h(0),y(0),p(Date.now()),x(0),b(null),S(null);const Y=co();l(Y);const W=Y.file==="a"?"ay":Y.file;yt(`Find ${W} ${Y.rank}`)};d.useEffect(()=>{let $=null;return s==="playing"&&($=setInterval(()=>{x(Date.now()-g)},100)),()=>{$&&clearInterval($)}},[s,g]),d.useEffect(()=>{r==null||r(s)},[s,r]);const T=d.useCallback(($,Y)=>{if(s!=="playing")return;const W=`${a.file}${a.rank}`,ge=`${$}${Y}`;if(ge===W){Ve.impact({style:Ue.Light}).catch(()=>{}),b({square:ge,correct:!0});const xe=c+1;u(xe);const we=f+1;h(we);const Ce=Math.max(m,we);if(y(Ce),xe>=L&&!j){const O=Date.now()-g;x(O),o("finished"),t(O,Ce),yt("Complete!")}else if(xe>=L&&j){u(0),h(0),y(0),setTimeout(()=>{b(null);const O=co();l(O);const q=O.file==="a"?"ay":O.file;yt(`Great! Find ${q} ${O.rank}`)},200);return}else setTimeout(()=>{b(null);const O=co();l(O);const q=O.file==="a"?"ay":O.file;yt(`Find ${q} ${O.rank}`)},200)}else Ve.impact({style:Ue.Heavy}).catch(()=>{}),Ve.impact({style:Ue.Heavy}).catch(()=>{}),b({square:ge,correct:!1}),S(W),h(0),yt(`No, that's ${Ah($,Y)}`),setTimeout(()=>{b(null),S(null)},1e3)},[s,a,c,f,m,g,t]);return s==="ready"?i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-sniper-back",children:i.jsx(Rs,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Coordinate Sniper"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx(pi,{className:"h-12 w-12 text-blue-500 mx-auto"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"})]}),i.jsx(hl,{value:P,onValueChange:$=>D($),className:"w-full max-w-xs",children:i.jsxs(Ki,{className:"grid w-full grid-cols-2",children:[i.jsx(qn,{value:"challenge","data-testid":"tab-sniper-challenge",children:"10 Square Race"}),i.jsx(qn,{value:"practice","data-testid":"tab-sniper-practice",children:"Practice"})]})}),i.jsx("p",{className:"text-muted-foreground text-center",children:P==="challenge"?"Find 10 squares as fast as you can!":"Practice finding squares with no time pressure."}),i.jsxs("div",{className:"flex items-center gap-3 justify-center",children:[i.jsx(Zt,{htmlFor:"board-flip",className:"text-sm text-muted-foreground",children:"Play as Black"}),i.jsx(er,{id:"board-flip",checked:I,onCheckedChange:F,"data-testid":"switch-board-flip"})]}),P==="challenge"&&n!==null&&n.coordinateSniperBest!==null&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",i.jsx("span",{className:"font-semibold text-blue-500",children:Nc(n.coordinateSniperBest)})]}),i.jsx(re,{size:"lg",onClick:()=>Q(P==="practice"),"data-testid":"button-start-sniper",children:"Start"})]})]}):s==="finished"?i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-sniper-back-finished",children:i.jsx(Rs,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Coordinate Sniper"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[i.jsx(Vn,{className:`h-16 w-16 ${B?"text-blue-500":"text-muted-foreground"}`}),i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h2",{className:"text-4xl font-bold",children:Nc(w)}),i.jsx("p",{className:"text-lg text-muted-foreground",children:"to find 10 squares"}),B&&i.jsx(Et,{className:"bg-blue-500 text-white",children:"New Personal Best!"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(re,{variant:"outline",onClick:e,"data-testid":"button-sniper-menu",children:"Menu"}),i.jsx(re,{onClick:()=>Q(!1),"data-testid":"button-sniper-retry",children:"Play Again"})]})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("p",{className:"text-lg font-semibold",children:["Find: ",i.jsxs("span",{className:"text-2xl font-mono",children:[a.file,a.rank]})]}),i.jsx("div",{className:"flex items-center gap-2",children:j?i.jsx(Et,{variant:"outline",children:"Practice"}):i.jsx("span",{className:"text-lg font-mono tabular-nums",children:Nc(w)})})]}),!j&&i.jsx(bi,{value:c/L*100,className:"mb-2"}),i.jsx("p",{className:"text-sm text-muted-foreground text-center mb-2",children:j?`${c} found`:`${c}/${L} found`}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[i.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:(I?["1","2","3","4","5","6","7","8"]:["8","7","6","5","4","3","2","1"]).map(($,Y)=>(I?[...ki].reverse():ki).map((W,ge)=>{const xe=`${W}${$}`,we=ki.indexOf(W),Ce=Tp.indexOf($),O=yk(we,Ce),q=(v==null?void 0:v.square)===xe,X=k===xe;let J=O?"bg-amber-700":"bg-amber-100";return q?J=v.correct?"bg-green-500":"bg-red-500":X&&(J="bg-green-500"),i.jsx("button",{className:`aspect-square ${J} transition-colors duration-100`,onClick:()=>T(W,$),"data-testid":`square-${xe}`},xe)}))}),i.jsxs(re,{variant:"outline",onClick:()=>N(!0),className:"mt-4","data-testid":"button-sniper-resign",children:[i.jsx(Mu,{className:"h-4 w-4 mr-2"}),"Resign"]})]})]}),i.jsx(Po,{open:C,onOpenChange:N,children:i.jsxs(Ls,{children:[i.jsxs(Is,{children:[i.jsx(Os,{children:"Quit Game?"}),i.jsxs(Ds,{children:["Your progress (",c,"/",L," found) will not be saved."]})]}),i.jsxs($s,{children:[i.jsx(Fs,{"data-testid":"button-sniper-resign-cancel",children:"Continue"}),i.jsx(Bs,{onClick:H,"data-testid":"button-sniper-resign-confirm",children:"Quit"})]})]})})]})}const Cc={p:"pawn",n:"knight",b:"bishop",r:"rook",q:"queen",k:"king"};function Lh(){const e=new Mr,t=5+Math.floor(Math.random()*11);for(let s=0;s<t;s++){const o=e.moves({verbose:!0});if(o.length===0)break;const a=o[Math.floor(Math.random()*o.length)];e.move(a)}const n=e.moves({verbose:!0});if(n.length===0)return Lh();const r=n[Math.floor(Math.random()*n.length)];return{chess:e,move:{from:r.from,to:r.to,san:r.san,piece:r.piece,captured:r.captured}}}function S4({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,o]=d.useState("ready"),[a,l]=d.useState(null),[c,u]=d.useState(0),[f,h]=d.useState(0),[m,y]=d.useState(0),[g,p]=d.useState(60),[w,x]=d.useState(!1),[v,b]=d.useState(!1),[k,S]=d.useState(!1),[C,N]=d.useState(null),[j,R]=d.useState(""),[P,D]=d.useState(!1),[I,F]=d.useState("challenge"),L=d.useRef(null),B=d.useRef(null),H=n!==null&&n.voiceMoveMasterBest!==null&&c>n.voiceMoveMasterBest,Q=d.useRef(null),T=d.useRef(!1),$=d.useRef(null),Y=async()=>{if(T.current){try{await ie.stopSession()}catch{}T.current=!1}if(Q.current){try{await Q.current.remove()}catch{}Q.current=null}x(!1)},W=()=>{L.current&&clearInterval(L.current),B.current&&clearTimeout(B.current),Y(),e()},ge=async(X=!1)=>{D(X),o("playing"),u(0),h(0),y(0),p(60),N(null);const J=Lh();l(J),setTimeout(async()=>{await yt("Say the move.")},300)},xe=()=>{L.current&&clearInterval(L.current),B.current&&clearTimeout(B.current),Y(),e()},we=d.useCallback(X=>{var He,Ee;if(!a||s!=="playing")return;const J=X.toLowerCase().trim();if(console.log("[VoiceMoveMaster] Processing:",J),J.includes("resign")||J.includes("quit")){S(!0),yt("Are you sure you want to resign? Say yes or no.");return}if(k){if(J.includes("yes")){b(!0),S(!1);return}else if(J.includes("no")){S(!1),yt("Okay, continue playing.");return}}if(J.includes("repeat")||J.includes("again")||J.includes("say again")){yt("Look at the highlighted squares on the board.");return}if(J.includes("time")||J.includes("clock")){yt(`${g} seconds remaining`);return}if(J.includes("material")){const $e=k4(a.chess);yt($e);return}const fe=J.match(/what'?s?\s+on\s+([a-h])\s*([1-8])/i);if(fe){const $e=`${fe[1]}${fe[2]}`,Te=a.chess.get($e);if(Te){const ke=Te.color==="w"?"White":"Black",ut=Cc[Te.type];yt(`${ke} ${ut}`)}else yt("Empty");return}const ue=J.match(/where\s+is\s+my\s+(\w+)/i);if(ue){const $e=ue[1].toLowerCase(),Te=(He=Object.entries(Cc).find(([,ke])=>ke===$e))==null?void 0:He[0];if(Te){const ke=a.chess.turn(),ut=a.chess.board(),vt=[];for(let nn=0;nn<8;nn++)for(let V=0;V<8;V++){const U=ut[nn][V];U&&U.type===Te&&U.color===ke&&vt.push(`${ki[V]}${Tp[7-nn]}`)}vt.length>0?yt(`Your ${$e} is on ${vt.slice(0,3).join(", ")}`):yt(`You don't have a ${$e}`)}return}if(J.includes("eval")||J.includes("evaluate")){const $e=N4(a.chess);$e>0?yt(`White is up ${$e} points`):$e<0?yt(`Black is up ${Math.abs($e)} points`):yt("Position is equal");return}const Ne=J.match(/legal\s+moves?\s+for\s+(\w+)/i);if(Ne){const $e=Ne[1].toLowerCase(),Te=(Ee=Object.entries(Cc).find(([,ke])=>ke===$e))==null?void 0:Ee[0];if(Te){const ke=a.chess.moves({verbose:!0}).filter(ut=>ut.piece===Te).slice(0,4).map(ut=>ut.san);ke.length>0?yt(`${$e} can play ${ke.join(", ")}`):yt(`No legal moves for ${$e}`)}return}if(R4(J,a.move)){B.current&&(clearTimeout(B.current),B.current=null),Ve.notification({type:Bi.Success}).catch(()=>{}),N({text:"Correct!",correct:!0});const $e=c+1,Te=f+1;u($e),h(Te);const ke=Math.max(m,Te);y(ke),yt("Correct!"),setTimeout(()=>{N(null);const ut=Lh();l(ut)},500)}else h(0),B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{Ve.notification({type:Bi.Error}).catch(()=>{}),N({text:"Try again",correct:!1}),setTimeout(()=>N(null),1e3)},1e3)},[a,s,c,f,m,g,k]);if(d.useEffect(()=>{$.current=we},[we]),d.useEffect(()=>{if(!lo||s!=="playing")return;let X=!1;return(async()=>{try{if(!await Fu()||X){console.warn("[VoiceMoveMaster] Voice not ready or cancelled");return}if(console.log("[VoiceMoveMaster] Starting voice session..."),Q.current&&await Q.current.remove(),X||(Q.current=await ie.addListener("onSpeechResult",ue=>{var He;const Ne=ue.text;W1(Ne),Ne.length>=2&&((He=$.current)==null||He.call($,Ne)),ie.startListening().catch(()=>{})}),X))return;await ie.startSession(),V1(!0),await ie.startListening(),q1(!0),T.current=!0,x(!0),console.log("[VoiceMoveMaster] Native voice session started")}catch(fe){console.error("[VoiceMoveMaster] Native voice setup failed:",fe),nu(String(fe))}})(),()=>{X=!0,Y()}},[s]),d.useEffect(()=>(s==="playing"&&!P&&(L.current=setInterval(()=>{p(X=>X<=1?(o("finished"),0):X-1)},1e3)),()=>{L.current&&clearInterval(L.current)}),[s,P]),d.useEffect(()=>{s==="finished"&&!P&&t(c,m)},[s,c,m,t,P]),d.useEffect(()=>{r==null||r(s)},[s,r]),s==="ready")return i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:W,"data-testid":"button-voicemaster-back",children:i.jsx(Rs,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Voice Move Master"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx($m,{className:"h-12 w-12 text-purple-500 mx-auto"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"})]}),i.jsx(hl,{value:I,onValueChange:X=>F(X),className:"w-full max-w-xs",children:i.jsxs(Ki,{className:"grid w-full grid-cols-2",children:[i.jsx(qn,{value:"challenge","data-testid":"tab-voicemaster-challenge",children:"1 Minute Challenge"}),i.jsx(qn,{value:"practice","data-testid":"tab-voicemaster-practice",children:"Practice"})]})}),i.jsx("p",{className:"text-muted-foreground text-center",children:I==="challenge"?"Say the highlighted move within 60 seconds!":"Practice announcing moves at your own pace."}),I==="challenge"&&n!==null&&n.voiceMoveMasterBest!==null&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",i.jsxs("span",{className:"font-semibold text-purple-500",children:[n.voiceMoveMasterBest," moves"]})]}),i.jsx(re,{size:"lg",onClick:()=>ge(I==="practice"),"data-testid":"button-start-voicemaster",children:"Start"})]})]});if(s==="finished")return i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:W,"data-testid":"button-voicemaster-back-finished",children:i.jsx(Rs,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Voice Move Master"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[i.jsx(Vn,{className:`h-16 w-16 ${H?"text-purple-500":"text-muted-foreground"}`}),i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h2",{className:"text-4xl font-bold",children:c}),i.jsx("p",{className:"text-lg text-muted-foreground",children:"moves announced correctly"}),m>1&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Best streak: ",m]}),H&&i.jsx(Et,{className:"bg-purple-500 text-white",children:"New Personal Best!"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(re,{variant:"outline",onClick:W,"data-testid":"button-voicemaster-menu",children:"Menu"}),i.jsx(re,{onClick:()=>ge(!1),"data-testid":"button-voicemaster-retry",children:"Play Again"})]})]})]});const Ce=(a==null?void 0:a.chess.board())||[],O=(a==null?void 0:a.move.from)||"",q=(a==null?void 0:a.move.to)||"";return i.jsxs(i.Fragment,{children:[lo&&i.jsx(Ep,{}),i.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[P?i.jsx(Et,{variant:"outline",children:"Practice"}):i.jsx("span",{className:"text-2xl font-mono font-bold tabular-nums",children:g}),w&&i.jsx(hn,{className:"h-5 w-5 text-red-500 animate-pulse"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-lg font-semibold",children:c}),f>=3&&i.jsxs(Et,{variant:"outline",className:"text-purple-500 border-purple-500",children:[f," streak"]})]})]}),C&&i.jsx("div",{className:`text-center py-2 mb-2 rounded ${C.correct?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:i.jsx("span",{className:"font-semibold",children:C.text})}),i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:["8","7","6","5","4","3","2","1"].map((X,J)=>ki.map((fe,ue)=>{var vt;const Ne=`${fe}${X}`,He=(ue+J)%2===1,Ee=(vt=Ce[J])==null?void 0:vt[ue],$e=Ne===O,Te=Ne===q;let ke=He?"bg-amber-700":"bg-amber-100";$e?ke="bg-yellow-400":Te&&(ke="bg-red-500");const ut={wk:"",wq:"",wr:"",wb:"",wn:"",wp:"",bk:"",bq:"",br:"",bb:"",bn:"",bp:""};return i.jsx("div",{className:`aspect-square ${ke} flex items-center justify-center text-2xl`,children:Ee&&ut[`${Ee.color}${Ee.type}`]},Ne)}))})}),i.jsx("div",{className:"text-center mb-4",children:i.jsxs("p",{className:"text-lg",children:[lo?"Say: ":"Type: ",i.jsx("span",{className:"font-bold text-purple-500",children:a==null?void 0:a.move.san})]})}),!lo&&i.jsxs("form",{className:"flex gap-2 mb-4",onSubmit:X=>{X.preventDefault(),j.trim()&&(we(j),R(""))},children:[i.jsx("input",{type:"text",value:j,onChange:X=>R(X.target.value),placeholder:"Type move here...",className:"flex-1 px-3 py-2 border rounded-md bg-background",autoFocus:!0,"data-testid":"input-voicemaster-text"}),i.jsx(re,{type:"submit","data-testid":"button-voicemaster-submit",children:"Submit"})]}),i.jsxs(re,{variant:"outline",onClick:()=>b(!0),className:"mx-auto mb-4","data-testid":"button-voicemaster-resign",children:[i.jsx(Mu,{className:"h-4 w-4 mr-2"}),"Resign"]}),i.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(l2,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm font-medium",children:"Chess Notation"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs text-muted-foreground",children:[i.jsxs("span",{children:[i.jsx("strong",{children:"e4"})," = pawn to e4"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"R"})," = Rook"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"N"})," = Knight"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"B"})," = Bishop"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"Q"})," = Queen"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"K"})," = King"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"Bb2"})," = Bishop to b2"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"Nxc5"})," = Knight takes c5"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"0-0"})," = Kingside castle"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"0-0-0"})," = Queenside castle"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"+"})," = Check"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"#"})," = Checkmate"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"=Q"})," = Promote to Queen"]}),i.jsxs("span",{children:[i.jsx("strong",{children:"e.p."})," = En passant"]}),i.jsxs("span",{className:"col-span-2",children:[i.jsx("strong",{children:"Rac1"})," = When 2 rooks can go to c1, specify which (a-file)"]})]})]})]}),i.jsx(Po,{open:v,onOpenChange:b,children:i.jsxs(Ls,{children:[i.jsxs(Is,{children:[i.jsx(Os,{children:"Quit Game?"}),i.jsxs(Ds,{children:["Your current score of ",c," will not be saved."]})]}),i.jsxs($s,{children:[i.jsx(Fs,{"data-testid":"button-voicemaster-resign-cancel",children:"Continue"}),i.jsx(Bs,{onClick:xe,"data-testid":"button-voicemaster-resign-confirm",children:"Quit"})]})]})})]})}function k4(e){const t=e.board();let n=0,r=0;const s={p:1,n:3,b:3,r:5,q:9,k:0};for(const a of t)for(const l of a)if(l){const c=s[l.type];l.color==="w"?n+=c:r+=c}const o=n-r;return o>0?`White is up ${o} point${o!==1?"s":""}`:o<0?`Black is up ${Math.abs(o)} point${Math.abs(o)!==1?"s":""}`:"Material is equal"}function N4(e){const t=e.board();let n=0;const r={p:1,n:3,b:3,r:5,q:9,k:0};for(const s of t)for(const o of s)if(o){const a=r[o.type];n+=o.color==="w"?a:-a}return n}const C4=["to","takes","captures","moves","x","move"],j4={one:"1",won:"1",first:"1",two:"2",too:"2",second:"2",three:"3",free:"3",tree:"3",third:"3",four:"4",fore:"4",forth:"4",fourth:"4",five:"5",fifth:"5",six:"6",sixth:"6",sicks:"6",seven:"7",seventh:"7",eight:"8",ate:"8",eighth:"8"},E4={night:"knight",nite:"knight",horse:"knight",rock:"rook",castle:"rook",brook:"rook",bish:"bishop",bishup:"bishop",pond:"pawn"},P4={ay:"a",aye:"a",eh:"a",alpha:"a",alfa:"a",apple:"a",able:"a",bee:"b",be:"b",bravo:"b",boy:"b",baker:"b",cee:"c",see:"c",sea:"c",charlie:"c",cat:"c",dee:"d",delta:"d",dog:"d",david:"d",eee:"e",ee:"e",echo:"e",easy:"e",edward:"e",ef:"f",eff:"f",foxtrot:"f",fox:"f",frank:"f",if:"f",of:"f",gee:"g",jee:"g",golf:"g",george:"g",aitch:"h",ach:"h",hotel:"h",henry:"h"};function T4(e){let t=e.toLowerCase();t=t.replace(/\bbefore\b/g,"b 4"),t=t.replace(/\bsci\s*fi\b/g,"c 5"),t=t.replace(/\bscifi\b/g,"c 5"),t=t.replace(/\bquincy\b/g,"queen c");for(const[n,r]of Object.entries(P4))t=t.replace(new RegExp(`\\b${n}\\b`,"g"),r);t=t.replace(/\bhe\s+([1-8])\b/g,"e $1"),t=t.replace(/\bhe\s+(one|two|three|four|five|six|seven|eight|won|too|free|fore|for|fifth|sixth|seventh|eighth)\b/gi,"e $1"),t=t.replace(/\bthe\s+([1-8])\b/g,"d $1"),t=t.replace(/\bthe\s+(one|two|three|four|five|six|seven|eight)\b/gi,"d $1"),t=t.replace(/\b([a-h])\s+for\b/g,"$1 4");for(const[n,r]of Object.entries(j4))t=t.replace(new RegExp(`\\b${n}\\b`,"g"),r);for(const[n,r]of Object.entries(E4))t=t.replace(new RegExp(`\\b${n}\\b`,"g"),r);return t}function R4(e,t){const n=T4(e);console.log("[matchesMove] Input:",e," Normalized:",n," Target:",t.san);let r=n.replace(/[^a-z0-9\s]/g,"");const o=r.split(/\s+/).filter(w=>!C4.includes(w)),a=o.join(" "),l=r.replace(/\s+/g,"").match(/^([a-h])([1-8])$/);if(l&&t.piece==="p"){const w=l[1]+l[2];if(t.to===w)return!0}const c=a.replace(/\s+/g,"").match(/^([a-h])([1-8])$/);if(c&&t.piece==="p"){const w=c[1]+c[2];if(t.to===w)return!0}const u=t.san.toLowerCase().replace(/[+#x]/g,"");if(a.replace(/\s+/g,"").includes(u))return!0;const f=["knight","night","bishop","rook","queen","king","pawn"],h=Cc[t.piece],m=o.some(w=>h==="pawn"&&!f.some(x=>x!=="pawn"&&a.includes(x))||a.includes(h)||h==="knight"&&a.includes("night")),y=t.to[0],g=t.to[1],p=a.includes(t.to)||a.includes(y)&&a.includes(g);return!!(m&&p)}function _4(){const[e,t]=d.useState(!1),[n,r]=d.useState(!1),[s,o]=d.useState(Aa()),[a,l]=d.useState(0),[c,u]=d.useState("idle"),[f,h]=d.useState(!1),m=d.useRef(null),[y,g]=d.useState(!1),[p,w]=d.useState("menu"),x=d.useRef(null);d.useEffect(()=>{const C=()=>{o(Aa())};return window.addEventListener("statsUpdated",C),()=>window.removeEventListener("statsUpdated",C)},[]),d.useEffect(()=>{if(!mn.isNativePlatform()){Ql(!0);return}(async()=>{try{console.log("[App] Requesting mic permission on startup..."),Rv("requesting...");const N=await ie.requestPermissions();if(console.log("[App] Mic permission result:",N.mic),Rv(N.mic),N.mic!=="granted"){console.warn("[App] Mic permission denied"),nu("Mic permission denied"),Ql(!1);return}console.log("[App] Permission granted, waiting for Vosk service..."),await ie.waitUntilReady(),console.log("[App] Vosk service ready"),iR(!0),Ql(!0)}catch(N){console.error("[App] Failed to initialize voice:",N),nu(String(N)),Ql(!1)}})()},[]);const v=()=>{l(C=>C+1)},b=()=>{if(y){if(p==="menu"||p==="ready"||p==="finished"){g(!1);return}h(!0);return}if(c==="idle"){r(!1),t(!1),window.dispatchEvent(new CustomEvent("closeAllDialogs"));return}if(c==="setup"){m.current&&m.current();return}h(!0)},k=()=>{if(h(!1),y){x.current&&x.current(),g(!1);return}m.current&&m.current()},S=()=>{if(y&&p==="playing")return"Quit this training game and return to title?";switch(c){case"in_game":return"Resign this game and return to title?";case"reconstruction":return"Leave this challenge and return to title?";case"analysis":return"Skip analysis and return to title?";default:return"Return to title?"}};return i.jsx(LP,{defaultTheme:"dark",children:i.jsxs(_P,{children:[i.jsxs("div",{className:"fixed inset-0 w-full h-full bg-background overflow-hidden",children:[i.jsxs("header",{className:"absolute top-0 left-0 right-0 z-50 grid grid-cols-3 items-center px-3 border-b border-border bg-background",style:{paddingTop:"var(--safe-area-top)",minHeight:"calc(56px + var(--safe-area-top, 0px))"},children:[i.jsx("div",{className:"flex justify-start",children:i.jsxs(Li,{open:n,onOpenChange:r,children:[i.jsx(tu,{asChild:!0,children:i.jsx(re,{variant:"ghost",size:"icon","data-testid":"button-voice-help",children:i.jsx(hn,{className:"h-5 w-5"})})}),i.jsxs(Co,{children:[i.jsx(jo,{children:i.jsx(Eo,{children:"Voice Commands"})}),i.jsxs("div",{className:"space-y-4 text-sm max-h-[60vh] overflow-y-auto",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold",children:"Basic Moves"}),i.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"e4"'})," - Move pawn to e4"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"knight f3"'})," - Move knight to f3"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"bishop takes c6"'})," - Capture on c6"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"castle kingside"'})," - Castle short (O-O)"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"castle queenside"'})," - Castle long (O-O-O)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold",children:"When Two Pieces Can Move"}),i.jsx("p",{className:"text-muted-foreground",children:"If you have two pieces that can reach the same square, specify which one:"}),i.jsx("p",{className:"font-mono text-foreground",children:'"Rook F to D1"'})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold",children:"Query Commands"}),i.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"say again"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"repeat"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"again"'})," - Hear the last move"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"last move"'})," - Hear opponent's last move"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:`"what's on e4"`})," - Check what piece is on a square"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"where is my queen"'})," - Find your piece locations"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"how much time"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"clock"'})," - Hear remaining time"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"resign"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"quit"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"give up"'})," - Resign the game"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold",children:"Resign Confirmation"}),i.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"yes"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"confirm"'})," - Confirm resignation"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"no"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"cancel"'})," - Cancel resignation"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold",children:"Pro Commands"}),i.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"material"'})," - Hear material balance"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"legal moves for knight"'})," - List piece's legal moves"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"peek"'})," - Show board for 5 seconds"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"evaluate"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"eval"'})," - Hear engine evaluation"]})]}),i.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:'Note: "peek" and "evaluate" mark the game as assisted'})]})]})]})]})}),i.jsx("button",{onClick:b,className:`text-lg font-bold text-center whitespace-nowrap cursor-pointer transition-colors bg-transparent border-none p-0 m-0 font-inherit text-inherit outline-none select-none ${c==="idle"?"cursor-default text-foreground":"text-foreground hover:text-primary"}`,style:{WebkitTapHighlightColor:"transparent",WebkitTouchCallout:"none"},"data-testid":"button-title-home",children:"Blindfold Chess"}),i.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[i.jsx(re,{variant:"ghost",size:"icon",onClick:v,"data-testid":"button-game-history",children:i.jsx(d2,{className:"h-5 w-5"})}),i.jsxs(Li,{open:e,onOpenChange:t,children:[i.jsx(tu,{asChild:!0,children:i.jsx(re,{variant:"ghost",size:"icon","data-testid":"button-stats",children:i.jsx(Zy,{className:"h-5 w-5"})})}),i.jsxs(Co,{className:"max-w-lg max-h-[85vh] overflow-hidden",children:[i.jsx(jo,{children:i.jsx(Eo,{children:"Training Metrics"})}),i.jsx(__,{stats:s}),i.jsxs(re,{variant:"outline",size:"sm",className:"w-full text-muted-foreground mt-4",onClick:()=>{AR(),o(Aa())},"data-testid":"button-reset-stats",children:[i.jsx(g2,{className:"mr-2 h-3 w-3"}),"Reset All Statistics"]})]})]})]})]}),i.jsx("main",{className:"absolute left-0 right-0 z-0 overflow-hidden",style:{top:"calc(56px + var(--safe-area-top, 0px))",bottom:"calc(56px + var(--safe-area-bottom, 0px))"},children:y?i.jsx(y4,{onBack:()=>g(!1),onStateChange:w,returnToMenuRef:x}):i.jsx(x4,{historyTrigger:a,onStateChange:u,returnToTitleRef:m,onTrainNowClick:()=>g(!0)})}),i.jsxs("footer",{className:"absolute bottom-0 left-0 right-0 z-50 grid grid-cols-3 items-center px-2 border-t border-border bg-background",style:{paddingBottom:"var(--safe-area-bottom)",minHeight:"calc(56px + var(--safe-area-bottom, 0px))"},children:[i.jsx("div",{className:"flex justify-start",children:i.jsx(FR,{})}),i.jsx("div",{className:"flex justify-center",children:i.jsx($P,{})}),i.jsx("div",{className:"flex justify-end",children:i.jsx(zR,{})})]})]}),i.jsx(Po,{open:f,onOpenChange:h,children:i.jsxs(Ls,{children:[i.jsxs(Is,{children:[i.jsx(Os,{children:"Return to Title"}),i.jsx(Ds,{children:S()})]}),i.jsxs($s,{children:[i.jsx(Fs,{"data-testid":"button-cancel-return",children:"Cancel"}),i.jsx(Bs,{onClick:k,"data-testid":"button-confirm-return",children:"Confirm"})]})]})}),i.jsx(oE,{})]})})}by(document.getElementById("root")).render(i.jsx(_4,{}));export{Ue as I,Bi as N,up as W};
