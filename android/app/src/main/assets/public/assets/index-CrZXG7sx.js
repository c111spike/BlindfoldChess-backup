var IN=Object.defineProperty;var $N=(e,t,n)=>t in e?IN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Tt=(e,t,n)=>$N(e,typeof t!="symbol"?t+"":t,n);function ON(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function wx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bx={exports:{}},_u={},Sx={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jl=Symbol.for("react.element"),DN=Symbol.for("react.portal"),BN=Symbol.for("react.fragment"),FN=Symbol.for("react.strict_mode"),zN=Symbol.for("react.profiler"),VN=Symbol.for("react.provider"),qN=Symbol.for("react.context"),KN=Symbol.for("react.forward_ref"),WN=Symbol.for("react.suspense"),UN=Symbol.for("react.memo"),HN=Symbol.for("react.lazy"),Xp=Symbol.iterator;function GN(e){return e===null||typeof e!="object"?null:(e=Xp&&e[Xp]||e["@@iterator"],typeof e=="function"?e:null)}var Nx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kx=Object.assign,jx={};function oa(e,t,n){this.props=e,this.context=t,this.refs=jx,this.updater=n||Nx}oa.prototype.isReactComponent={};oa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};oa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Cx(){}Cx.prototype=oa.prototype;function Xh(e,t,n){this.props=e,this.context=t,this.refs=jx,this.updater=n||Nx}var Zh=Xh.prototype=new Cx;Zh.constructor=Xh;kx(Zh,oa.prototype);Zh.isPureReactComponent=!0;var Zp=Array.isArray,Ex=Object.prototype.hasOwnProperty,Jh={current:null},Px={key:!0,ref:!0,__self:!0,__source:!0};function Tx(e,t,n){var s,r={},i=null,a=null;if(t!=null)for(s in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)Ex.call(t,s)&&!Px.hasOwnProperty(s)&&(r[s]=t[s]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:jl,type:e,key:i,ref:a,props:r,_owner:Jh.current}}function QN(e,t){return{$$typeof:jl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function em(e){return typeof e=="object"&&e!==null&&e.$$typeof===jl}function YN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Jp=/\/+/g;function vd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?YN(""+e.key):t.toString(36)}function Nc(e,t,n,s,r){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case jl:case DN:a=!0}}if(a)return a=e,r=r(a),e=s===""?"."+vd(a,0):s,Zp(r)?(n="",e!=null&&(n=e.replace(Jp,"$&/")+"/"),Nc(r,t,n,"",function(u){return u})):r!=null&&(em(r)&&(r=QN(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Jp,"$&/")+"/")+e)),t.push(r)),1;if(a=0,s=s===""?".":s+":",Zp(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+vd(i,l);a+=Nc(i,t,n,c,r)}else if(c=GN(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+vd(i,l++),a+=Nc(i,t,n,c,r);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Wl(e,t,n){if(e==null)return e;var s=[],r=0;return Nc(e,s,"","",function(i){return t.call(n,i,r++)}),s}function XN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Bn={current:null},kc={transition:null},ZN={ReactCurrentDispatcher:Bn,ReactCurrentBatchConfig:kc,ReactCurrentOwner:Jh};function Rx(){throw Error("act(...) is not supported in production builds of React.")}nt.Children={map:Wl,forEach:function(e,t,n){Wl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Wl(e,function(){t++}),t},toArray:function(e){return Wl(e,function(t){return t})||[]},only:function(e){if(!em(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};nt.Component=oa;nt.Fragment=BN;nt.Profiler=zN;nt.PureComponent=Xh;nt.StrictMode=FN;nt.Suspense=WN;nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZN;nt.act=Rx;nt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=kx({},e.props),r=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Jh.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Ex.call(t,c)&&!Px.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:jl,type:e.type,key:r,ref:i,props:s,_owner:a}};nt.createContext=function(e){return e={$$typeof:qN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:VN,_context:e},e.Consumer=e};nt.createElement=Tx;nt.createFactory=function(e){var t=Tx.bind(null,e);return t.type=e,t};nt.createRef=function(){return{current:null}};nt.forwardRef=function(e){return{$$typeof:KN,render:e}};nt.isValidElement=em;nt.lazy=function(e){return{$$typeof:HN,_payload:{_status:-1,_result:e},_init:XN}};nt.memo=function(e,t){return{$$typeof:UN,type:e,compare:t===void 0?null:t}};nt.startTransition=function(e){var t=kc.transition;kc.transition={};try{e()}finally{kc.transition=t}};nt.unstable_act=Rx;nt.useCallback=function(e,t){return Bn.current.useCallback(e,t)};nt.useContext=function(e){return Bn.current.useContext(e)};nt.useDebugValue=function(){};nt.useDeferredValue=function(e){return Bn.current.useDeferredValue(e)};nt.useEffect=function(e,t){return Bn.current.useEffect(e,t)};nt.useId=function(){return Bn.current.useId()};nt.useImperativeHandle=function(e,t,n){return Bn.current.useImperativeHandle(e,t,n)};nt.useInsertionEffect=function(e,t){return Bn.current.useInsertionEffect(e,t)};nt.useLayoutEffect=function(e,t){return Bn.current.useLayoutEffect(e,t)};nt.useMemo=function(e,t){return Bn.current.useMemo(e,t)};nt.useReducer=function(e,t,n){return Bn.current.useReducer(e,t,n)};nt.useRef=function(e){return Bn.current.useRef(e)};nt.useState=function(e){return Bn.current.useState(e)};nt.useSyncExternalStore=function(e,t,n){return Bn.current.useSyncExternalStore(e,t,n)};nt.useTransition=function(){return Bn.current.useTransition()};nt.version="18.3.1";Sx.exports=nt;var d=Sx.exports;const Ln=wx(d),Mx=ON({__proto__:null,default:Ln},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JN=d,ek=Symbol.for("react.element"),tk=Symbol.for("react.fragment"),nk=Object.prototype.hasOwnProperty,sk=JN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rk={key:!0,ref:!0,__self:!0,__source:!0};function _x(e,t,n){var s,r={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(s in t)nk.call(t,s)&&!rk.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)r[s]===void 0&&(r[s]=t[s]);return{$$typeof:ek,type:e,key:i,ref:a,props:r,_owner:sk.current}}_u.Fragment=tk;_u.jsx=_x;_u.jsxs=_x;bx.exports=_u;var o=bx.exports,Ax={exports:{}},ls={},Lx={exports:{}},Ix={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,$){var Q=T.length;T.push($);e:for(;0<Q;){var U=Q-1>>>1,ve=T[U];if(0<r(ve,$))T[U]=$,T[Q]=ve,Q=U;else break e}}function n(T){return T.length===0?null:T[0]}function s(T){if(T.length===0)return null;var $=T[0],Q=T.pop();if(Q!==$){T[0]=Q;e:for(var U=0,ve=T.length,H=ve>>>1;U<H;){var xe=2*(U+1)-1,ie=T[xe],se=xe+1,V=T[se];if(0>r(ie,Q))se<ve&&0>r(V,ie)?(T[U]=V,T[se]=Q,U=se):(T[U]=ie,T[xe]=Q,U=xe);else if(se<ve&&0>r(V,Q))T[U]=V,T[se]=Q,U=se;else break e}}return $}function r(T,$){var Q=T.sortIndex-$.sortIndex;return Q!==0?Q:T.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],f=1,m=null,h=3,y=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(T){for(var $=n(u);$!==null;){if($.callback===null)s(u);else if($.startTime<=T)s(u),$.sortIndex=$.expirationTime,t(c,$);else break;$=n(u)}}function S(T){if(g=!1,b(T),!p)if(n(c)!==null)p=!0,q(N);else{var $=n(u);$!==null&&G(S,$.startTime-T)}}function N(T,$){p=!1,g&&(g=!1,x(C),C=-1),y=!0;var Q=h;try{for(b($),m=n(c);m!==null&&(!(m.expirationTime>$)||T&&!D());){var U=m.callback;if(typeof U=="function"){m.callback=null,h=m.priorityLevel;var ve=U(m.expirationTime<=$);$=e.unstable_now(),typeof ve=="function"?m.callback=ve:m===n(c)&&s(c),b($)}else s(c);m=n(c)}if(m!==null)var H=!0;else{var xe=n(u);xe!==null&&G(S,xe.startTime-$),H=!1}return H}finally{m=null,h=Q,y=!1}}var j=!1,k=null,C=-1,R=5,P=-1;function D(){return!(e.unstable_now()-P<R)}function A(){if(k!==null){var T=e.unstable_now();P=T;var $=!0;try{$=k(!0,T)}finally{$?z():(j=!1,k=null)}}else j=!1}var z;if(typeof v=="function")z=function(){v(A)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,F=_.port2;_.port1.onmessage=A,z=function(){F.postMessage(null)}}else z=function(){w(A,0)};function q(T){k=T,j||(j=!0,z())}function G(T,$){C=w(function(){T(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){p||y||(p=!0,q(N))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var Q=h;h=$;try{return T()}finally{h=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,$){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var Q=h;h=T;try{return $()}finally{h=Q}},e.unstable_scheduleCallback=function(T,$,Q){var U=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?U+Q:U):Q=U,T){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=Q+ve,T={id:f++,callback:$,priorityLevel:T,startTime:Q,expirationTime:ve,sortIndex:-1},Q>U?(T.sortIndex=Q,t(u,T),n(c)===null&&T===n(u)&&(g?(x(C),C=-1):g=!0,G(S,Q-U))):(T.sortIndex=ve,t(c,T),p||y||(p=!0,q(N))),T},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(T){var $=h;return function(){var Q=h;h=$;try{return T.apply(this,arguments)}finally{h=Q}}}})(Ix);Lx.exports=Ix;var ok=Lx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ik=d,as=ok;function te(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $x=new Set,el={};function Uo(e,t){Fi(e,t),Fi(e+"Capture",t)}function Fi(e,t){for(el[e]=t,e=0;e<t.length;e++)$x.add(t[e])}var xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kf=Object.prototype.hasOwnProperty,ak=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eg={},tg={};function lk(e){return kf.call(tg,e)?!0:kf.call(eg,e)?!1:ak.test(e)?tg[e]=!0:(eg[e]=!0,!1)}function ck(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function uk(e,t,n,s){if(t===null||typeof t>"u"||ck(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Fn(e,t,n,s,r,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var mn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){mn[e]=new Fn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];mn[t]=new Fn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){mn[e]=new Fn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){mn[e]=new Fn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){mn[e]=new Fn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){mn[e]=new Fn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){mn[e]=new Fn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){mn[e]=new Fn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){mn[e]=new Fn(e,5,!1,e.toLowerCase(),null,!1,!1)});var tm=/[\-:]([a-z])/g;function nm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(tm,nm);mn[t]=new Fn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(tm,nm);mn[t]=new Fn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(tm,nm);mn[t]=new Fn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){mn[e]=new Fn(e,1,!1,e.toLowerCase(),null,!1,!1)});mn.xlinkHref=new Fn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){mn[e]=new Fn(e,1,!1,e.toLowerCase(),null,!0,!0)});function sm(e,t,n,s){var r=mn.hasOwnProperty(t)?mn[t]:null;(r!==null?r.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(uk(t,n,r,s)&&(n=null),s||r===null?lk(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,s=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var kr=ik.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ul=Symbol.for("react.element"),di=Symbol.for("react.portal"),fi=Symbol.for("react.fragment"),rm=Symbol.for("react.strict_mode"),jf=Symbol.for("react.profiler"),Ox=Symbol.for("react.provider"),Dx=Symbol.for("react.context"),om=Symbol.for("react.forward_ref"),Cf=Symbol.for("react.suspense"),Ef=Symbol.for("react.suspense_list"),im=Symbol.for("react.memo"),$r=Symbol.for("react.lazy"),Bx=Symbol.for("react.offscreen"),ng=Symbol.iterator;function wa(e){return e===null||typeof e!="object"?null:(e=ng&&e[ng]||e["@@iterator"],typeof e=="function"?e:null)}var $t=Object.assign,xd;function $a(e){if(xd===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);xd=t&&t[1]||""}return`
`+xd+e}var yd=!1;function wd(e,t){if(!e||yd)return"";yd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=s.stack.split(`
`),a=r.length-1,l=i.length-1;1<=a&&0<=l&&r[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(r[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||r[a]!==i[l]){var c=`
`+r[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{yd=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$a(e):""}function dk(e){switch(e.tag){case 5:return $a(e.type);case 16:return $a("Lazy");case 13:return $a("Suspense");case 19:return $a("SuspenseList");case 0:case 2:case 15:return e=wd(e.type,!1),e;case 11:return e=wd(e.type.render,!1),e;case 1:return e=wd(e.type,!0),e;default:return""}}function Pf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fi:return"Fragment";case di:return"Portal";case jf:return"Profiler";case rm:return"StrictMode";case Cf:return"Suspense";case Ef:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Dx:return(e.displayName||"Context")+".Consumer";case Ox:return(e._context.displayName||"Context")+".Provider";case om:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case im:return t=e.displayName||null,t!==null?t:Pf(e.type)||"Memo";case $r:t=e._payload,e=e._init;try{return Pf(e(t))}catch{}}return null}function fk(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pf(t);case 8:return t===rm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function eo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Fx(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hk(e){var t=Fx(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){s=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Hl(e){e._valueTracker||(e._valueTracker=hk(e))}function zx(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=Fx(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Wc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Tf(e,t){var n=t.checked;return $t({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function sg(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=eo(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Vx(e,t){t=t.checked,t!=null&&sm(e,"checked",t,!1)}function Rf(e,t){Vx(e,t);var n=eo(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Mf(e,t.type,n):t.hasOwnProperty("defaultValue")&&Mf(e,t.type,eo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Mf(e,t,n){(t!=="number"||Wc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Oa=Array.isArray;function Pi(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+eo(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function _f(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(te(91));return $t({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function og(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(te(92));if(Oa(n)){if(1<n.length)throw Error(te(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:eo(n)}}function qx(e,t){var n=eo(t.value),s=eo(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function ig(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Kx(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Af(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Kx(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gl,Wx=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Gl=Gl||document.createElement("div"),Gl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Gl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function tl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Va={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mk=["Webkit","ms","Moz","O"];Object.keys(Va).forEach(function(e){mk.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Va[t]=Va[e]})});function Ux(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Va.hasOwnProperty(e)&&Va[e]?(""+t).trim():t+"px"}function Hx(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=Ux(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,r):e[n]=r}}var pk=$t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lf(e,t){if(t){if(pk[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(te(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(te(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(te(61))}if(t.style!=null&&typeof t.style!="object")throw Error(te(62))}}function If(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $f=null;function am(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Of=null,Ti=null,Ri=null;function ag(e){if(e=Pl(e)){if(typeof Of!="function")throw Error(te(280));var t=e.stateNode;t&&(t=Ou(t),Of(e.stateNode,e.type,t))}}function Gx(e){Ti?Ri?Ri.push(e):Ri=[e]:Ti=e}function Qx(){if(Ti){var e=Ti,t=Ri;if(Ri=Ti=null,ag(e),t)for(e=0;e<t.length;e++)ag(t[e])}}function Yx(e,t){return e(t)}function Xx(){}var bd=!1;function Zx(e,t,n){if(bd)return e(t,n);bd=!0;try{return Yx(e,t,n)}finally{bd=!1,(Ti!==null||Ri!==null)&&(Xx(),Qx())}}function nl(e,t){var n=e.stateNode;if(n===null)return null;var s=Ou(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(te(231,t,typeof n));return n}var Df=!1;if(xr)try{var ba={};Object.defineProperty(ba,"passive",{get:function(){Df=!0}}),window.addEventListener("test",ba,ba),window.removeEventListener("test",ba,ba)}catch{Df=!1}function gk(e,t,n,s,r,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var qa=!1,Uc=null,Hc=!1,Bf=null,vk={onError:function(e){qa=!0,Uc=e}};function xk(e,t,n,s,r,i,a,l,c){qa=!1,Uc=null,gk.apply(vk,arguments)}function yk(e,t,n,s,r,i,a,l,c){if(xk.apply(this,arguments),qa){if(qa){var u=Uc;qa=!1,Uc=null}else throw Error(te(198));Hc||(Hc=!0,Bf=u)}}function Ho(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Jx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function lg(e){if(Ho(e)!==e)throw Error(te(188))}function wk(e){var t=e.alternate;if(!t){if(t=Ho(e),t===null)throw Error(te(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return lg(r),e;if(i===s)return lg(r),t;i=i.sibling}throw Error(te(188))}if(n.return!==s.return)n=r,s=i;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,s=i;break}if(l===s){a=!0,s=r,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,s=r;break}if(l===s){a=!0,s=i,n=r;break}l=l.sibling}if(!a)throw Error(te(189))}}if(n.alternate!==s)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?e:t}function e0(e){return e=wk(e),e!==null?t0(e):null}function t0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=t0(e);if(t!==null)return t;e=e.sibling}return null}var n0=as.unstable_scheduleCallback,cg=as.unstable_cancelCallback,bk=as.unstable_shouldYield,Sk=as.unstable_requestPaint,qt=as.unstable_now,Nk=as.unstable_getCurrentPriorityLevel,lm=as.unstable_ImmediatePriority,s0=as.unstable_UserBlockingPriority,Gc=as.unstable_NormalPriority,kk=as.unstable_LowPriority,r0=as.unstable_IdlePriority,Au=null,Zs=null;function jk(e){if(Zs&&typeof Zs.onCommitFiberRoot=="function")try{Zs.onCommitFiberRoot(Au,e,void 0,(e.current.flags&128)===128)}catch{}}var Ts=Math.clz32?Math.clz32:Pk,Ck=Math.log,Ek=Math.LN2;function Pk(e){return e>>>=0,e===0?32:31-(Ck(e)/Ek|0)|0}var Ql=64,Yl=4194304;function Da(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Qc(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,r=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~r;l!==0?s=Da(l):(i&=a,i!==0&&(s=Da(i)))}else a=n&~r,a!==0?s=Da(a):i!==0&&(s=Da(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&r)&&(r=s&-s,i=t&-t,r>=i||r===16&&(i&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Ts(t),r=1<<n,s|=e[n],t&=~r;return s}function Tk(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rk(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Ts(i),l=1<<a,c=r[a];c===-1?(!(l&n)||l&s)&&(r[a]=Tk(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Ff(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function o0(){var e=Ql;return Ql<<=1,!(Ql&4194240)&&(Ql=64),e}function Sd(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Cl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ts(t),e[t]=n}function Mk(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-Ts(n),i=1<<r;t[r]=0,s[r]=-1,e[r]=-1,n&=~i}}function cm(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Ts(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}var pt=0;function i0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var a0,um,l0,c0,u0,zf=!1,Xl=[],Kr=null,Wr=null,Ur=null,sl=new Map,rl=new Map,Br=[],_k="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ug(e,t){switch(e){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":Ur=null;break;case"pointerover":case"pointerout":sl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rl.delete(t.pointerId)}}function Sa(e,t,n,s,r,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},t!==null&&(t=Pl(t),t!==null&&um(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function Ak(e,t,n,s,r){switch(t){case"focusin":return Kr=Sa(Kr,e,t,n,s,r),!0;case"dragenter":return Wr=Sa(Wr,e,t,n,s,r),!0;case"mouseover":return Ur=Sa(Ur,e,t,n,s,r),!0;case"pointerover":var i=r.pointerId;return sl.set(i,Sa(sl.get(i)||null,e,t,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,rl.set(i,Sa(rl.get(i)||null,e,t,n,s,r)),!0}return!1}function d0(e){var t=No(e.target);if(t!==null){var n=Ho(t);if(n!==null){if(t=n.tag,t===13){if(t=Jx(n),t!==null){e.blockedOn=t,u0(e.priority,function(){l0(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Vf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);$f=s,n.target.dispatchEvent(s),$f=null}else return t=Pl(n),t!==null&&um(t),e.blockedOn=n,!1;t.shift()}return!0}function dg(e,t,n){jc(e)&&n.delete(t)}function Lk(){zf=!1,Kr!==null&&jc(Kr)&&(Kr=null),Wr!==null&&jc(Wr)&&(Wr=null),Ur!==null&&jc(Ur)&&(Ur=null),sl.forEach(dg),rl.forEach(dg)}function Na(e,t){e.blockedOn===t&&(e.blockedOn=null,zf||(zf=!0,as.unstable_scheduleCallback(as.unstable_NormalPriority,Lk)))}function ol(e){function t(r){return Na(r,e)}if(0<Xl.length){Na(Xl[0],e);for(var n=1;n<Xl.length;n++){var s=Xl[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Kr!==null&&Na(Kr,e),Wr!==null&&Na(Wr,e),Ur!==null&&Na(Ur,e),sl.forEach(t),rl.forEach(t),n=0;n<Br.length;n++)s=Br[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Br.length&&(n=Br[0],n.blockedOn===null);)d0(n),n.blockedOn===null&&Br.shift()}var Mi=kr.ReactCurrentBatchConfig,Yc=!0;function Ik(e,t,n,s){var r=pt,i=Mi.transition;Mi.transition=null;try{pt=1,dm(e,t,n,s)}finally{pt=r,Mi.transition=i}}function $k(e,t,n,s){var r=pt,i=Mi.transition;Mi.transition=null;try{pt=4,dm(e,t,n,s)}finally{pt=r,Mi.transition=i}}function dm(e,t,n,s){if(Yc){var r=Vf(e,t,n,s);if(r===null)_d(e,t,s,Xc,n),ug(e,s);else if(Ak(r,e,t,n,s))s.stopPropagation();else if(ug(e,s),t&4&&-1<_k.indexOf(e)){for(;r!==null;){var i=Pl(r);if(i!==null&&a0(i),i=Vf(e,t,n,s),i===null&&_d(e,t,s,Xc,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else _d(e,t,s,null,n)}}var Xc=null;function Vf(e,t,n,s){if(Xc=null,e=am(s),e=No(e),e!==null)if(t=Ho(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Jx(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xc=e,null}function f0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nk()){case lm:return 1;case s0:return 4;case Gc:case kk:return 16;case r0:return 536870912;default:return 16}default:return 16}}var zr=null,fm=null,Cc=null;function h0(){if(Cc)return Cc;var e,t=fm,n=t.length,s,r="value"in zr?zr.value:zr.textContent,i=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(s=1;s<=a&&t[n-s]===r[i-s];s++);return Cc=r.slice(e,1<s?1-s:void 0)}function Ec(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zl(){return!0}function fg(){return!1}function cs(e){function t(n,s,r,i,a){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zl:fg,this.isPropagationStopped=fg,this}return $t(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zl)},persist:function(){},isPersistent:Zl}),t}var ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hm=cs(ia),El=$t({},ia,{view:0,detail:0}),Ok=cs(El),Nd,kd,ka,Lu=$t({},El,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ka&&(ka&&e.type==="mousemove"?(Nd=e.screenX-ka.screenX,kd=e.screenY-ka.screenY):kd=Nd=0,ka=e),Nd)},movementY:function(e){return"movementY"in e?e.movementY:kd}}),hg=cs(Lu),Dk=$t({},Lu,{dataTransfer:0}),Bk=cs(Dk),Fk=$t({},El,{relatedTarget:0}),jd=cs(Fk),zk=$t({},ia,{animationName:0,elapsedTime:0,pseudoElement:0}),Vk=cs(zk),qk=$t({},ia,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Kk=cs(qk),Wk=$t({},ia,{data:0}),mg=cs(Wk),Uk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Gk[e])?!!t[e]:!1}function mm(){return Qk}var Yk=$t({},El,{key:function(e){if(e.key){var t=Uk[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ec(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Hk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mm,charCode:function(e){return e.type==="keypress"?Ec(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ec(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Xk=cs(Yk),Zk=$t({},Lu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pg=cs(Zk),Jk=$t({},El,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mm}),ej=cs(Jk),tj=$t({},ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),nj=cs(tj),sj=$t({},Lu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rj=cs(sj),oj=[9,13,27,32],pm=xr&&"CompositionEvent"in window,Ka=null;xr&&"documentMode"in document&&(Ka=document.documentMode);var ij=xr&&"TextEvent"in window&&!Ka,m0=xr&&(!pm||Ka&&8<Ka&&11>=Ka),gg=" ",vg=!1;function p0(e,t){switch(e){case"keyup":return oj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function g0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hi=!1;function aj(e,t){switch(e){case"compositionend":return g0(t);case"keypress":return t.which!==32?null:(vg=!0,gg);case"textInput":return e=t.data,e===gg&&vg?null:e;default:return null}}function lj(e,t){if(hi)return e==="compositionend"||!pm&&p0(e,t)?(e=h0(),Cc=fm=zr=null,hi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return m0&&t.locale!=="ko"?null:t.data;default:return null}}var cj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!cj[e.type]:t==="textarea"}function v0(e,t,n,s){Gx(s),t=Zc(t,"onChange"),0<t.length&&(n=new hm("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Wa=null,il=null;function uj(e){P0(e,0)}function Iu(e){var t=gi(e);if(zx(t))return e}function dj(e,t){if(e==="change")return t}var x0=!1;if(xr){var Cd;if(xr){var Ed="oninput"in document;if(!Ed){var yg=document.createElement("div");yg.setAttribute("oninput","return;"),Ed=typeof yg.oninput=="function"}Cd=Ed}else Cd=!1;x0=Cd&&(!document.documentMode||9<document.documentMode)}function wg(){Wa&&(Wa.detachEvent("onpropertychange",y0),il=Wa=null)}function y0(e){if(e.propertyName==="value"&&Iu(il)){var t=[];v0(t,il,e,am(e)),Zx(uj,t)}}function fj(e,t,n){e==="focusin"?(wg(),Wa=t,il=n,Wa.attachEvent("onpropertychange",y0)):e==="focusout"&&wg()}function hj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Iu(il)}function mj(e,t){if(e==="click")return Iu(t)}function pj(e,t){if(e==="input"||e==="change")return Iu(t)}function gj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ms=typeof Object.is=="function"?Object.is:gj;function al(e,t){if(Ms(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!kf.call(t,r)||!Ms(e[r],t[r]))return!1}return!0}function bg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sg(e,t){var n=bg(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bg(n)}}function w0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?w0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function b0(){for(var e=window,t=Wc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wc(e.document)}return t}function gm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function vj(e){var t=b0(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&w0(n.ownerDocument.documentElement,n)){if(s!==null&&gm(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!e.extend&&i>s&&(r=s,s=i,i=r),r=Sg(n,i);var a=Sg(n,s);r&&a&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var xj=xr&&"documentMode"in document&&11>=document.documentMode,mi=null,qf=null,Ua=null,Kf=!1;function Ng(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kf||mi==null||mi!==Wc(s)||(s=mi,"selectionStart"in s&&gm(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ua&&al(Ua,s)||(Ua=s,s=Zc(qf,"onSelect"),0<s.length&&(t=new hm("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=mi)))}function Jl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var pi={animationend:Jl("Animation","AnimationEnd"),animationiteration:Jl("Animation","AnimationIteration"),animationstart:Jl("Animation","AnimationStart"),transitionend:Jl("Transition","TransitionEnd")},Pd={},S0={};xr&&(S0=document.createElement("div").style,"AnimationEvent"in window||(delete pi.animationend.animation,delete pi.animationiteration.animation,delete pi.animationstart.animation),"TransitionEvent"in window||delete pi.transitionend.transition);function $u(e){if(Pd[e])return Pd[e];if(!pi[e])return e;var t=pi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in S0)return Pd[e]=t[n];return e}var N0=$u("animationend"),k0=$u("animationiteration"),j0=$u("animationstart"),C0=$u("transitionend"),E0=new Map,kg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oo(e,t){E0.set(e,t),Uo(t,[e])}for(var Td=0;Td<kg.length;Td++){var Rd=kg[Td],yj=Rd.toLowerCase(),wj=Rd[0].toUpperCase()+Rd.slice(1);oo(yj,"on"+wj)}oo(N0,"onAnimationEnd");oo(k0,"onAnimationIteration");oo(j0,"onAnimationStart");oo("dblclick","onDoubleClick");oo("focusin","onFocus");oo("focusout","onBlur");oo(C0,"onTransitionEnd");Fi("onMouseEnter",["mouseout","mouseover"]);Fi("onMouseLeave",["mouseout","mouseover"]);Fi("onPointerEnter",["pointerout","pointerover"]);Fi("onPointerLeave",["pointerout","pointerover"]);Uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ba));function jg(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,yk(s,t,void 0,e),e.currentTarget=null}function P0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var a=s.length-1;0<=a;a--){var l=s[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;jg(r,l,u),i=c}else for(a=0;a<s.length;a++){if(l=s[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;jg(r,l,u),i=c}}}if(Hc)throw e=Bf,Hc=!1,Bf=null,e}function jt(e,t){var n=t[Qf];n===void 0&&(n=t[Qf]=new Set);var s=e+"__bubble";n.has(s)||(T0(t,e,2,!1),n.add(s))}function Md(e,t,n){var s=0;t&&(s|=4),T0(n,e,s,t)}var ec="_reactListening"+Math.random().toString(36).slice(2);function ll(e){if(!e[ec]){e[ec]=!0,$x.forEach(function(n){n!=="selectionchange"&&(bj.has(n)||Md(n,!1,e),Md(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ec]||(t[ec]=!0,Md("selectionchange",!1,t))}}function T0(e,t,n,s){switch(f0(t)){case 1:var r=Ik;break;case 4:r=$k;break;default:r=dm}n=r.bind(null,t,n,e),r=void 0,!Df||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),s?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function _d(e,t,n,s,r){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;l!==null;){if(a=No(l),a===null)return;if(c=a.tag,c===5||c===6){s=i=a;continue e}l=l.parentNode}}s=s.return}Zx(function(){var u=i,f=am(n),m=[];e:{var h=E0.get(e);if(h!==void 0){var y=hm,p=e;switch(e){case"keypress":if(Ec(n)===0)break e;case"keydown":case"keyup":y=Xk;break;case"focusin":p="focus",y=jd;break;case"focusout":p="blur",y=jd;break;case"beforeblur":case"afterblur":y=jd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=hg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Bk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=ej;break;case N0:case k0:case j0:y=Vk;break;case C0:y=nj;break;case"scroll":y=Ok;break;case"wheel":y=rj;break;case"copy":case"cut":case"paste":y=Kk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=pg}var g=(t&4)!==0,w=!g&&e==="scroll",x=g?h!==null?h+"Capture":null:h;g=[];for(var v=u,b;v!==null;){b=v;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,x!==null&&(S=nl(v,x),S!=null&&g.push(cl(v,S,b)))),w)break;v=v.return}0<g.length&&(h=new y(h,p,null,n,f),m.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",h&&n!==$f&&(p=n.relatedTarget||n.fromElement)&&(No(p)||p[yr]))break e;if((y||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,y?(p=n.relatedTarget||n.toElement,y=u,p=p?No(p):null,p!==null&&(w=Ho(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(y=null,p=u),y!==p)){if(g=hg,S="onMouseLeave",x="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=pg,S="onPointerLeave",x="onPointerEnter",v="pointer"),w=y==null?h:gi(y),b=p==null?h:gi(p),h=new g(S,v+"leave",y,n,f),h.target=w,h.relatedTarget=b,S=null,No(f)===u&&(g=new g(x,v+"enter",p,n,f),g.target=b,g.relatedTarget=w,S=g),w=S,y&&p)t:{for(g=y,x=p,v=0,b=g;b;b=oi(b))v++;for(b=0,S=x;S;S=oi(S))b++;for(;0<v-b;)g=oi(g),v--;for(;0<b-v;)x=oi(x),b--;for(;v--;){if(g===x||x!==null&&g===x.alternate)break t;g=oi(g),x=oi(x)}g=null}else g=null;y!==null&&Cg(m,h,y,g,!1),p!==null&&w!==null&&Cg(m,w,p,g,!0)}}e:{if(h=u?gi(u):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var N=dj;else if(xg(h))if(x0)N=pj;else{N=hj;var j=fj}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=mj);if(N&&(N=N(e,u))){v0(m,N,n,f);break e}j&&j(e,h,u),e==="focusout"&&(j=h._wrapperState)&&j.controlled&&h.type==="number"&&Mf(h,"number",h.value)}switch(j=u?gi(u):window,e){case"focusin":(xg(j)||j.contentEditable==="true")&&(mi=j,qf=u,Ua=null);break;case"focusout":Ua=qf=mi=null;break;case"mousedown":Kf=!0;break;case"contextmenu":case"mouseup":case"dragend":Kf=!1,Ng(m,n,f);break;case"selectionchange":if(xj)break;case"keydown":case"keyup":Ng(m,n,f)}var k;if(pm)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else hi?p0(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(m0&&n.locale!=="ko"&&(hi||C!=="onCompositionStart"?C==="onCompositionEnd"&&hi&&(k=h0()):(zr=f,fm="value"in zr?zr.value:zr.textContent,hi=!0)),j=Zc(u,C),0<j.length&&(C=new mg(C,e,null,n,f),m.push({event:C,listeners:j}),k?C.data=k:(k=g0(n),k!==null&&(C.data=k)))),(k=ij?aj(e,n):lj(e,n))&&(u=Zc(u,"onBeforeInput"),0<u.length&&(f=new mg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:u}),f.data=k))}P0(m,t)})}function cl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Zc(e,t){for(var n=t+"Capture",s=[];e!==null;){var r=e,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=nl(e,n),i!=null&&s.unshift(cl(e,i,r)),i=nl(e,t),i!=null&&s.push(cl(e,i,r))),e=e.return}return s}function oi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Cg(e,t,n,s,r){for(var i=t._reactName,a=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,r?(c=nl(n,i),c!=null&&a.unshift(cl(n,c,l))):r||(c=nl(n,i),c!=null&&a.push(cl(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Sj=/\r\n?/g,Nj=/\u0000|\uFFFD/g;function Eg(e){return(typeof e=="string"?e:""+e).replace(Sj,`
`).replace(Nj,"")}function tc(e,t,n){if(t=Eg(t),Eg(e)!==t&&n)throw Error(te(425))}function Jc(){}var Wf=null,Uf=null;function Hf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Gf=typeof setTimeout=="function"?setTimeout:void 0,kj=typeof clearTimeout=="function"?clearTimeout:void 0,Pg=typeof Promise=="function"?Promise:void 0,jj=typeof queueMicrotask=="function"?queueMicrotask:typeof Pg<"u"?function(e){return Pg.resolve(null).then(e).catch(Cj)}:Gf;function Cj(e){setTimeout(function(){throw e})}function Ad(e,t){var n=t,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){e.removeChild(r),ol(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);ol(t)}function Hr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Tg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var aa=Math.random().toString(36).slice(2),Qs="__reactFiber$"+aa,ul="__reactProps$"+aa,yr="__reactContainer$"+aa,Qf="__reactEvents$"+aa,Ej="__reactListeners$"+aa,Pj="__reactHandles$"+aa;function No(e){var t=e[Qs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[yr]||n[Qs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Tg(e);e!==null;){if(n=e[Qs])return n;e=Tg(e)}return t}e=n,n=e.parentNode}return null}function Pl(e){return e=e[Qs]||e[yr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(te(33))}function Ou(e){return e[ul]||null}var Yf=[],vi=-1;function io(e){return{current:e}}function Et(e){0>vi||(e.current=Yf[vi],Yf[vi]=null,vi--)}function bt(e,t){vi++,Yf[vi]=e.current,e.current=t}var to={},Cn=io(to),Hn=io(!1),_o=to;function zi(e,t){var n=e.type.contextTypes;if(!n)return to;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Gn(e){return e=e.childContextTypes,e!=null}function eu(){Et(Hn),Et(Cn)}function Rg(e,t,n){if(Cn.current!==to)throw Error(te(168));bt(Cn,t),bt(Hn,n)}function R0(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in t))throw Error(te(108,fk(e)||"Unknown",r));return $t({},n,s)}function tu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||to,_o=Cn.current,bt(Cn,e),bt(Hn,Hn.current),!0}function Mg(e,t,n){var s=e.stateNode;if(!s)throw Error(te(169));n?(e=R0(e,t,_o),s.__reactInternalMemoizedMergedChildContext=e,Et(Hn),Et(Cn),bt(Cn,e)):Et(Hn),bt(Hn,n)}var mr=null,Du=!1,Ld=!1;function M0(e){mr===null?mr=[e]:mr.push(e)}function Tj(e){Du=!0,M0(e)}function ao(){if(!Ld&&mr!==null){Ld=!0;var e=0,t=pt;try{var n=mr;for(pt=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}mr=null,Du=!1}catch(r){throw mr!==null&&(mr=mr.slice(e+1)),n0(lm,ao),r}finally{pt=t,Ld=!1}}return null}var xi=[],yi=0,nu=null,su=0,ds=[],fs=0,Ao=null,pr=1,gr="";function bo(e,t){xi[yi++]=su,xi[yi++]=nu,nu=e,su=t}function _0(e,t,n){ds[fs++]=pr,ds[fs++]=gr,ds[fs++]=Ao,Ao=e;var s=pr;e=gr;var r=32-Ts(s)-1;s&=~(1<<r),n+=1;var i=32-Ts(t)+r;if(30<i){var a=r-r%5;i=(s&(1<<a)-1).toString(32),s>>=a,r-=a,pr=1<<32-Ts(t)+r|n<<r|s,gr=i+e}else pr=1<<i|n<<r|s,gr=e}function vm(e){e.return!==null&&(bo(e,1),_0(e,1,0))}function xm(e){for(;e===nu;)nu=xi[--yi],xi[yi]=null,su=xi[--yi],xi[yi]=null;for(;e===Ao;)Ao=ds[--fs],ds[fs]=null,gr=ds[--fs],ds[fs]=null,pr=ds[--fs],ds[fs]=null}var os=null,rs=null,Rt=!1,Ps=null;function A0(e,t){var n=hs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function _g(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,os=e,rs=Hr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,os=e,rs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ao!==null?{id:pr,overflow:gr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=hs(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,os=e,rs=null,!0):!1;default:return!1}}function Xf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Zf(e){if(Rt){var t=rs;if(t){var n=t;if(!_g(e,t)){if(Xf(e))throw Error(te(418));t=Hr(n.nextSibling);var s=os;t&&_g(e,t)?A0(s,n):(e.flags=e.flags&-4097|2,Rt=!1,os=e)}}else{if(Xf(e))throw Error(te(418));e.flags=e.flags&-4097|2,Rt=!1,os=e}}}function Ag(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;os=e}function nc(e){if(e!==os)return!1;if(!Rt)return Ag(e),Rt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Hf(e.type,e.memoizedProps)),t&&(t=rs)){if(Xf(e))throw L0(),Error(te(418));for(;t;)A0(e,t),t=Hr(t.nextSibling)}if(Ag(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){rs=Hr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}rs=null}}else rs=os?Hr(e.stateNode.nextSibling):null;return!0}function L0(){for(var e=rs;e;)e=Hr(e.nextSibling)}function Vi(){rs=os=null,Rt=!1}function ym(e){Ps===null?Ps=[e]:Ps.push(e)}var Rj=kr.ReactCurrentBatchConfig;function ja(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var s=n.stateNode}if(!s)throw Error(te(147,e));var r=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=r.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,e))}return e}function sc(e,t){throw e=Object.prototype.toString.call(t),Error(te(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Lg(e){var t=e._init;return t(e._payload)}function I0(e){function t(x,v){if(e){var b=x.deletions;b===null?(x.deletions=[v],x.flags|=16):b.push(v)}}function n(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function s(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function r(x,v){return x=Xr(x,v),x.index=0,x.sibling=null,x}function i(x,v,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<v?(x.flags|=2,v):b):(x.flags|=2,v)):(x.flags|=1048576,v)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,v,b,S){return v===null||v.tag!==6?(v=zd(b,x.mode,S),v.return=x,v):(v=r(v,b),v.return=x,v)}function c(x,v,b,S){var N=b.type;return N===fi?f(x,v,b.props.children,S,b.key):v!==null&&(v.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===$r&&Lg(N)===v.type)?(S=r(v,b.props),S.ref=ja(x,v,b),S.return=x,S):(S=Lc(b.type,b.key,b.props,null,x.mode,S),S.ref=ja(x,v,b),S.return=x,S)}function u(x,v,b,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Vd(b,x.mode,S),v.return=x,v):(v=r(v,b.children||[]),v.return=x,v)}function f(x,v,b,S,N){return v===null||v.tag!==7?(v=To(b,x.mode,S,N),v.return=x,v):(v=r(v,b),v.return=x,v)}function m(x,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=zd(""+v,x.mode,b),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ul:return b=Lc(v.type,v.key,v.props,null,x.mode,b),b.ref=ja(x,null,v),b.return=x,b;case di:return v=Vd(v,x.mode,b),v.return=x,v;case $r:var S=v._init;return m(x,S(v._payload),b)}if(Oa(v)||wa(v))return v=To(v,x.mode,b,null),v.return=x,v;sc(x,v)}return null}function h(x,v,b,S){var N=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return N!==null?null:l(x,v,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ul:return b.key===N?c(x,v,b,S):null;case di:return b.key===N?u(x,v,b,S):null;case $r:return N=b._init,h(x,v,N(b._payload),S)}if(Oa(b)||wa(b))return N!==null?null:f(x,v,b,S,null);sc(x,b)}return null}function y(x,v,b,S,N){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(b)||null,l(v,x,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ul:return x=x.get(S.key===null?b:S.key)||null,c(v,x,S,N);case di:return x=x.get(S.key===null?b:S.key)||null,u(v,x,S,N);case $r:var j=S._init;return y(x,v,b,j(S._payload),N)}if(Oa(S)||wa(S))return x=x.get(b)||null,f(v,x,S,N,null);sc(v,S)}return null}function p(x,v,b,S){for(var N=null,j=null,k=v,C=v=0,R=null;k!==null&&C<b.length;C++){k.index>C?(R=k,k=null):R=k.sibling;var P=h(x,k,b[C],S);if(P===null){k===null&&(k=R);break}e&&k&&P.alternate===null&&t(x,k),v=i(P,v,C),j===null?N=P:j.sibling=P,j=P,k=R}if(C===b.length)return n(x,k),Rt&&bo(x,C),N;if(k===null){for(;C<b.length;C++)k=m(x,b[C],S),k!==null&&(v=i(k,v,C),j===null?N=k:j.sibling=k,j=k);return Rt&&bo(x,C),N}for(k=s(x,k);C<b.length;C++)R=y(k,x,C,b[C],S),R!==null&&(e&&R.alternate!==null&&k.delete(R.key===null?C:R.key),v=i(R,v,C),j===null?N=R:j.sibling=R,j=R);return e&&k.forEach(function(D){return t(x,D)}),Rt&&bo(x,C),N}function g(x,v,b,S){var N=wa(b);if(typeof N!="function")throw Error(te(150));if(b=N.call(b),b==null)throw Error(te(151));for(var j=N=null,k=v,C=v=0,R=null,P=b.next();k!==null&&!P.done;C++,P=b.next()){k.index>C?(R=k,k=null):R=k.sibling;var D=h(x,k,P.value,S);if(D===null){k===null&&(k=R);break}e&&k&&D.alternate===null&&t(x,k),v=i(D,v,C),j===null?N=D:j.sibling=D,j=D,k=R}if(P.done)return n(x,k),Rt&&bo(x,C),N;if(k===null){for(;!P.done;C++,P=b.next())P=m(x,P.value,S),P!==null&&(v=i(P,v,C),j===null?N=P:j.sibling=P,j=P);return Rt&&bo(x,C),N}for(k=s(x,k);!P.done;C++,P=b.next())P=y(k,x,C,P.value,S),P!==null&&(e&&P.alternate!==null&&k.delete(P.key===null?C:P.key),v=i(P,v,C),j===null?N=P:j.sibling=P,j=P);return e&&k.forEach(function(A){return t(x,A)}),Rt&&bo(x,C),N}function w(x,v,b,S){if(typeof b=="object"&&b!==null&&b.type===fi&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ul:e:{for(var N=b.key,j=v;j!==null;){if(j.key===N){if(N=b.type,N===fi){if(j.tag===7){n(x,j.sibling),v=r(j,b.props.children),v.return=x,x=v;break e}}else if(j.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===$r&&Lg(N)===j.type){n(x,j.sibling),v=r(j,b.props),v.ref=ja(x,j,b),v.return=x,x=v;break e}n(x,j);break}else t(x,j);j=j.sibling}b.type===fi?(v=To(b.props.children,x.mode,S,b.key),v.return=x,x=v):(S=Lc(b.type,b.key,b.props,null,x.mode,S),S.ref=ja(x,v,b),S.return=x,x=S)}return a(x);case di:e:{for(j=b.key;v!==null;){if(v.key===j)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(x,v.sibling),v=r(v,b.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else t(x,v);v=v.sibling}v=Vd(b,x.mode,S),v.return=x,x=v}return a(x);case $r:return j=b._init,w(x,v,j(b._payload),S)}if(Oa(b))return p(x,v,b,S);if(wa(b))return g(x,v,b,S);sc(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(x,v.sibling),v=r(v,b),v.return=x,x=v):(n(x,v),v=zd(b,x.mode,S),v.return=x,x=v),a(x)):n(x,v)}return w}var qi=I0(!0),$0=I0(!1),ru=io(null),ou=null,wi=null,wm=null;function bm(){wm=wi=ou=null}function Sm(e){var t=ru.current;Et(ru),e._currentValue=t}function Jf(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function _i(e,t){ou=e,wm=wi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Wn=!0),e.firstContext=null)}function gs(e){var t=e._currentValue;if(wm!==e)if(e={context:e,memoizedValue:t,next:null},wi===null){if(ou===null)throw Error(te(308));wi=e,ou.dependencies={lanes:0,firstContext:e}}else wi=wi.next=e;return t}var ko=null;function Nm(e){ko===null?ko=[e]:ko.push(e)}function O0(e,t,n,s){var r=t.interleaved;return r===null?(n.next=n,Nm(t)):(n.next=r.next,r.next=n),t.interleaved=n,wr(e,s)}function wr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Or=!1;function km(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Gr(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,at&2){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,wr(e,n)}return r=s.interleaved,r===null?(t.next=t,Nm(s)):(t.next=r.next,r.next=t),s.interleaved=t,wr(e,n)}function Pc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,cm(e,n)}}function Ig(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?r=i=t:i=i.next=t}else r=i=t;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function iu(e,t,n,s){var r=e.updateQueue;Or=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(i!==null){var m=r.baseState;a=0,f=u=c=null,l=i;do{var h=l.lane,y=l.eventTime;if((s&h)===h){f!==null&&(f=f.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,g=l;switch(h=t,y=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){m=p.call(y,m,h);break e}m=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(y,m,h):p,h==null)break e;m=$t({},m,h);break e;case 2:Or=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=r.effects,h===null?r.effects=[l]:h.push(l))}else y={eventTime:y,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=y,c=m):f=f.next=y,a|=h;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;h=l,l=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(f===null&&(c=m),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=f,t=r.shared.interleaved,t!==null){r=t;do a|=r.lane,r=r.next;while(r!==t)}else i===null&&(r.shared.lanes=0);Io|=a,e.lanes=a,e.memoizedState=m}}function $g(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(te(191,r));r.call(s)}}}var Tl={},Js=io(Tl),dl=io(Tl),fl=io(Tl);function jo(e){if(e===Tl)throw Error(te(174));return e}function jm(e,t){switch(bt(fl,t),bt(dl,e),bt(Js,Tl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Af(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Af(t,e)}Et(Js),bt(Js,t)}function Ki(){Et(Js),Et(dl),Et(fl)}function B0(e){jo(fl.current);var t=jo(Js.current),n=Af(t,e.type);t!==n&&(bt(dl,e),bt(Js,n))}function Cm(e){dl.current===e&&(Et(Js),Et(dl))}var Lt=io(0);function au(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Id=[];function Em(){for(var e=0;e<Id.length;e++)Id[e]._workInProgressVersionPrimary=null;Id.length=0}var Tc=kr.ReactCurrentDispatcher,$d=kr.ReactCurrentBatchConfig,Lo=0,It=null,Xt=null,on=null,lu=!1,Ha=!1,hl=0,Mj=0;function vn(){throw Error(te(321))}function Pm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ms(e[n],t[n]))return!1;return!0}function Tm(e,t,n,s,r,i){if(Lo=i,It=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Tc.current=e===null||e.memoizedState===null?Ij:$j,e=n(s,r),Ha){i=0;do{if(Ha=!1,hl=0,25<=i)throw Error(te(301));i+=1,on=Xt=null,t.updateQueue=null,Tc.current=Oj,e=n(s,r)}while(Ha)}if(Tc.current=cu,t=Xt!==null&&Xt.next!==null,Lo=0,on=Xt=It=null,lu=!1,t)throw Error(te(300));return e}function Rm(){var e=hl!==0;return hl=0,e}function Gs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?It.memoizedState=on=e:on=on.next=e,on}function vs(){if(Xt===null){var e=It.alternate;e=e!==null?e.memoizedState:null}else e=Xt.next;var t=on===null?It.memoizedState:on.next;if(t!==null)on=t,Xt=e;else{if(e===null)throw Error(te(310));Xt=e,e={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},on===null?It.memoizedState=on=e:on=on.next=e}return on}function ml(e,t){return typeof t=="function"?t(e):t}function Od(e){var t=vs(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var s=Xt,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var l=a=null,c=null,u=i;do{var f=u.lane;if((Lo&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var m={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=m,a=s):c=c.next=m,It.lanes|=f,Io|=f}u=u.next}while(u!==null&&u!==i);c===null?a=s:c.next=l,Ms(s,t.memoizedState)||(Wn=!0),t.memoizedState=s,t.baseState=a,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){r=e;do i=r.lane,It.lanes|=i,Io|=i,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Dd(e){var t=vs(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,i=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do i=e(i,a.action),a=a.next;while(a!==r);Ms(i,t.memoizedState)||(Wn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function F0(){}function z0(e,t){var n=It,s=vs(),r=t(),i=!Ms(s.memoizedState,r);if(i&&(s.memoizedState=r,Wn=!0),s=s.queue,Mm(K0.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||on!==null&&on.memoizedState.tag&1){if(n.flags|=2048,pl(9,q0.bind(null,n,s,r,t),void 0,null),an===null)throw Error(te(349));Lo&30||V0(n,t,r)}return r}function V0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=It.updateQueue,t===null?(t={lastEffect:null,stores:null},It.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function q0(e,t,n,s){t.value=n,t.getSnapshot=s,W0(t)&&U0(e)}function K0(e,t,n){return n(function(){W0(t)&&U0(e)})}function W0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ms(e,n)}catch{return!0}}function U0(e){var t=wr(e,1);t!==null&&Rs(t,e,1,-1)}function Og(e){var t=Gs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:e},t.queue=e,e=e.dispatch=Lj.bind(null,It,e),[t.memoizedState,e]}function pl(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=It.updateQueue,t===null?(t={lastEffect:null,stores:null},It.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function H0(){return vs().memoizedState}function Rc(e,t,n,s){var r=Gs();It.flags|=e,r.memoizedState=pl(1|t,n,void 0,s===void 0?null:s)}function Bu(e,t,n,s){var r=vs();s=s===void 0?null:s;var i=void 0;if(Xt!==null){var a=Xt.memoizedState;if(i=a.destroy,s!==null&&Pm(s,a.deps)){r.memoizedState=pl(t,n,i,s);return}}It.flags|=e,r.memoizedState=pl(1|t,n,i,s)}function Dg(e,t){return Rc(8390656,8,e,t)}function Mm(e,t){return Bu(2048,8,e,t)}function G0(e,t){return Bu(4,2,e,t)}function Q0(e,t){return Bu(4,4,e,t)}function Y0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function X0(e,t,n){return n=n!=null?n.concat([e]):null,Bu(4,4,Y0.bind(null,t,e),n)}function _m(){}function Z0(e,t){var n=vs();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Pm(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function J0(e,t){var n=vs();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Pm(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function ey(e,t,n){return Lo&21?(Ms(n,t)||(n=o0(),It.lanes|=n,Io|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Wn=!0),e.memoizedState=n)}function _j(e,t){var n=pt;pt=n!==0&&4>n?n:4,e(!0);var s=$d.transition;$d.transition={};try{e(!1),t()}finally{pt=n,$d.transition=s}}function ty(){return vs().memoizedState}function Aj(e,t,n){var s=Yr(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},ny(e))sy(t,n);else if(n=O0(e,t,n,s),n!==null){var r=On();Rs(n,e,s,r),ry(n,t,s)}}function Lj(e,t,n){var s=Yr(e),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(ny(e))sy(t,r);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(r.hasEagerState=!0,r.eagerState=l,Ms(l,a)){var c=t.interleaved;c===null?(r.next=r,Nm(t)):(r.next=c.next,c.next=r),t.interleaved=r;return}}catch{}finally{}n=O0(e,t,r,s),n!==null&&(r=On(),Rs(n,e,s,r),ry(n,t,s))}}function ny(e){var t=e.alternate;return e===It||t!==null&&t===It}function sy(e,t){Ha=lu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ry(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,cm(e,n)}}var cu={readContext:gs,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useInsertionEffect:vn,useLayoutEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useMutableSource:vn,useSyncExternalStore:vn,useId:vn,unstable_isNewReconciler:!1},Ij={readContext:gs,useCallback:function(e,t){return Gs().memoizedState=[e,t===void 0?null:t],e},useContext:gs,useEffect:Dg,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Rc(4194308,4,Y0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Rc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Rc(4,2,e,t)},useMemo:function(e,t){var n=Gs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Gs();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Aj.bind(null,It,e),[s.memoizedState,e]},useRef:function(e){var t=Gs();return e={current:e},t.memoizedState=e},useState:Og,useDebugValue:_m,useDeferredValue:function(e){return Gs().memoizedState=e},useTransition:function(){var e=Og(!1),t=e[0];return e=_j.bind(null,e[1]),Gs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=It,r=Gs();if(Rt){if(n===void 0)throw Error(te(407));n=n()}else{if(n=t(),an===null)throw Error(te(349));Lo&30||V0(s,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,Dg(K0.bind(null,s,i,e),[e]),s.flags|=2048,pl(9,q0.bind(null,s,i,n,t),void 0,null),n},useId:function(){var e=Gs(),t=an.identifierPrefix;if(Rt){var n=gr,s=pr;n=(s&~(1<<32-Ts(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=hl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Mj++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$j={readContext:gs,useCallback:Z0,useContext:gs,useEffect:Mm,useImperativeHandle:X0,useInsertionEffect:G0,useLayoutEffect:Q0,useMemo:J0,useReducer:Od,useRef:H0,useState:function(){return Od(ml)},useDebugValue:_m,useDeferredValue:function(e){var t=vs();return ey(t,Xt.memoizedState,e)},useTransition:function(){var e=Od(ml)[0],t=vs().memoizedState;return[e,t]},useMutableSource:F0,useSyncExternalStore:z0,useId:ty,unstable_isNewReconciler:!1},Oj={readContext:gs,useCallback:Z0,useContext:gs,useEffect:Mm,useImperativeHandle:X0,useInsertionEffect:G0,useLayoutEffect:Q0,useMemo:J0,useReducer:Dd,useRef:H0,useState:function(){return Dd(ml)},useDebugValue:_m,useDeferredValue:function(e){var t=vs();return Xt===null?t.memoizedState=e:ey(t,Xt.memoizedState,e)},useTransition:function(){var e=Dd(ml)[0],t=vs().memoizedState;return[e,t]},useMutableSource:F0,useSyncExternalStore:z0,useId:ty,unstable_isNewReconciler:!1};function js(e,t){if(e&&e.defaultProps){t=$t({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function eh(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:$t({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Fu={isMounted:function(e){return(e=e._reactInternals)?Ho(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=On(),r=Yr(e),i=vr(s,r);i.payload=t,n!=null&&(i.callback=n),t=Gr(e,i,r),t!==null&&(Rs(t,e,r,s),Pc(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=On(),r=Yr(e),i=vr(s,r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Gr(e,i,r),t!==null&&(Rs(t,e,r,s),Pc(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=On(),s=Yr(e),r=vr(n,s);r.tag=2,t!=null&&(r.callback=t),t=Gr(e,r,s),t!==null&&(Rs(t,e,s,n),Pc(t,e,s))}};function Bg(e,t,n,s,r,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,a):t.prototype&&t.prototype.isPureReactComponent?!al(n,s)||!al(r,i):!0}function oy(e,t,n){var s=!1,r=to,i=t.contextType;return typeof i=="object"&&i!==null?i=gs(i):(r=Gn(t)?_o:Cn.current,s=t.contextTypes,i=(s=s!=null)?zi(e,r):to),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Fu,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function Fg(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Fu.enqueueReplaceState(t,t.state,null)}function th(e,t,n,s){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},km(e);var i=t.contextType;typeof i=="object"&&i!==null?r.context=gs(i):(i=Gn(t)?_o:Cn.current,r.context=zi(e,i)),r.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(eh(e,t,i,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&Fu.enqueueReplaceState(r,r.state,null),iu(e,n,r,s),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function Wi(e,t){try{var n="",s=t;do n+=dk(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:r,digest:null}}function Bd(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function nh(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Dj=typeof WeakMap=="function"?WeakMap:Map;function iy(e,t,n){n=vr(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){du||(du=!0,fh=s),nh(e,t)},n}function ay(e,t,n){n=vr(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var r=t.value;n.payload=function(){return s(r)},n.callback=function(){nh(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){nh(e,t),typeof s!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function zg(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new Dj;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(n)||(r.add(n),e=Zj.bind(null,e,t,n),t.then(e,e))}function Vg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qg(e,t,n,s,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=vr(-1,1),t.tag=2,Gr(n,t,1))),n.lanes|=1),e)}var Bj=kr.ReactCurrentOwner,Wn=!1;function An(e,t,n,s){t.child=e===null?$0(t,null,n,s):qi(t,e.child,n,s)}function Kg(e,t,n,s,r){n=n.render;var i=t.ref;return _i(t,r),s=Tm(e,t,n,s,i,r),n=Rm(),e!==null&&!Wn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,br(e,t,r)):(Rt&&n&&vm(t),t.flags|=1,An(e,t,s,r),t.child)}function Wg(e,t,n,s,r){if(e===null){var i=n.type;return typeof i=="function"&&!Fm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,ly(e,t,i,s,r)):(e=Lc(n.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&r)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:al,n(a,s)&&e.ref===t.ref)return br(e,t,r)}return t.flags|=1,e=Xr(i,s),e.ref=t.ref,e.return=t,t.child=e}function ly(e,t,n,s,r){if(e!==null){var i=e.memoizedProps;if(al(i,s)&&e.ref===t.ref)if(Wn=!1,t.pendingProps=s=i,(e.lanes&r)!==0)e.flags&131072&&(Wn=!0);else return t.lanes=e.lanes,br(e,t,r)}return sh(e,t,n,s,r)}function cy(e,t,n){var s=t.pendingProps,r=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},bt(Si,ns),ns|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,bt(Si,ns),ns|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,bt(Si,ns),ns|=s}else i!==null?(s=i.baseLanes|n,t.memoizedState=null):s=n,bt(Si,ns),ns|=s;return An(e,t,r,n),t.child}function uy(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function sh(e,t,n,s,r){var i=Gn(n)?_o:Cn.current;return i=zi(t,i),_i(t,r),n=Tm(e,t,n,s,i,r),s=Rm(),e!==null&&!Wn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,br(e,t,r)):(Rt&&s&&vm(t),t.flags|=1,An(e,t,n,r),t.child)}function Ug(e,t,n,s,r){if(Gn(n)){var i=!0;tu(t)}else i=!1;if(_i(t,r),t.stateNode===null)Mc(e,t),oy(t,n,s),th(t,n,s,r),s=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=gs(u):(u=Gn(n)?_o:Cn.current,u=zi(t,u));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==s||c!==u)&&Fg(t,a,s,u),Or=!1;var h=t.memoizedState;a.state=h,iu(t,s,a,r),c=t.memoizedState,l!==s||h!==c||Hn.current||Or?(typeof f=="function"&&(eh(t,n,f,s),c=t.memoizedState),(l=Or||Bg(t,n,l,s,h,c,u))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),a.props=s,a.state=c,a.context=u,s=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{a=t.stateNode,D0(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:js(t.type,l),a.props=u,m=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=gs(c):(c=Gn(n)?_o:Cn.current,c=zi(t,c));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||h!==c)&&Fg(t,a,s,c),Or=!1,h=t.memoizedState,a.state=h,iu(t,s,a,r);var p=t.memoizedState;l!==m||h!==p||Hn.current||Or?(typeof y=="function"&&(eh(t,n,y,s),p=t.memoizedState),(u=Or||Bg(t,n,u,s,h,p,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,p,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,p,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),a.props=s,a.state=p,a.context=c,s=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return rh(e,t,n,s,i,r)}function rh(e,t,n,s,r,i){uy(e,t);var a=(t.flags&128)!==0;if(!s&&!a)return r&&Mg(t,n,!1),br(e,t,i);s=t.stateNode,Bj.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&a?(t.child=qi(t,e.child,null,i),t.child=qi(t,null,l,i)):An(e,t,l,i),t.memoizedState=s.state,r&&Mg(t,n,!0),t.child}function dy(e){var t=e.stateNode;t.pendingContext?Rg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Rg(e,t.context,!1),jm(e,t.containerInfo)}function Hg(e,t,n,s,r){return Vi(),ym(r),t.flags|=256,An(e,t,n,s),t.child}var oh={dehydrated:null,treeContext:null,retryLane:0};function ih(e){return{baseLanes:e,cachePool:null,transitions:null}}function fy(e,t,n){var s=t.pendingProps,r=Lt.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(r&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),bt(Lt,r&1),e===null)return Zf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=s.children,e=s.fallback,i?(s=t.mode,i=t.child,a={mode:"hidden",children:a},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=qu(a,s,0,null),e=To(e,s,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ih(n),t.memoizedState=oh,e):Am(t,a));if(r=e.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return Fj(e,t,a,s,l,r,n);if(i){i=s.fallback,a=t.mode,r=e.child,l=r.sibling;var c={mode:"hidden",children:s.children};return!(a&1)&&t.child!==r?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Xr(r,c),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=Xr(l,i):(i=To(i,a,n,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,a=e.child.memoizedState,a=a===null?ih(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=oh,s}return i=e.child,e=i.sibling,s=Xr(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Am(e,t){return t=qu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function rc(e,t,n,s){return s!==null&&ym(s),qi(t,e.child,null,n),e=Am(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Fj(e,t,n,s,r,i,a){if(n)return t.flags&256?(t.flags&=-257,s=Bd(Error(te(422))),rc(e,t,a,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,r=t.mode,s=qu({mode:"visible",children:s.children},r,0,null),i=To(i,r,a,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&qi(t,e.child,null,a),t.child.memoizedState=ih(a),t.memoizedState=oh,i);if(!(t.mode&1))return rc(e,t,a,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(te(419)),s=Bd(i,s,void 0),rc(e,t,a,s)}if(l=(a&e.childLanes)!==0,Wn||l){if(s=an,s!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|a)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,wr(e,r),Rs(s,e,r,-1))}return Bm(),s=Bd(Error(te(421))),rc(e,t,a,s)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=Jj.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,rs=Hr(r.nextSibling),os=t,Rt=!0,Ps=null,e!==null&&(ds[fs++]=pr,ds[fs++]=gr,ds[fs++]=Ao,pr=e.id,gr=e.overflow,Ao=t),t=Am(t,s.children),t.flags|=4096,t)}function Gg(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Jf(e.return,t,n)}function Fd(e,t,n,s,r){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function hy(e,t,n){var s=t.pendingProps,r=s.revealOrder,i=s.tail;if(An(e,t,s.children,n),s=Lt.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gg(e,n,t);else if(e.tag===19)Gg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(bt(Lt,s),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&au(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Fd(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&au(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Fd(t,!0,n,null,i);break;case"together":Fd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function br(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Io|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(te(153));if(t.child!==null){for(e=t.child,n=Xr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Xr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function zj(e,t,n){switch(t.tag){case 3:dy(t),Vi();break;case 5:B0(t);break;case 1:Gn(t.type)&&tu(t);break;case 4:jm(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,r=t.memoizedProps.value;bt(ru,s._currentValue),s._currentValue=r;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(bt(Lt,Lt.current&1),t.flags|=128,null):n&t.child.childLanes?fy(e,t,n):(bt(Lt,Lt.current&1),e=br(e,t,n),e!==null?e.sibling:null);bt(Lt,Lt.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return hy(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),bt(Lt,Lt.current),s)break;return null;case 22:case 23:return t.lanes=0,cy(e,t,n)}return br(e,t,n)}var my,ah,py,gy;my=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ah=function(){};py=function(e,t,n,s){var r=e.memoizedProps;if(r!==s){e=t.stateNode,jo(Js.current);var i=null;switch(n){case"input":r=Tf(e,r),s=Tf(e,s),i=[];break;case"select":r=$t({},r,{value:void 0}),s=$t({},s,{value:void 0}),i=[];break;case"textarea":r=_f(e,r),s=_f(e,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Jc)}Lf(n,s);var a;n=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(el.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var c=s[u];if(l=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(el.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&jt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};gy=function(e,t,n,s){n!==s&&(t.flags|=4)};function Ca(e,t){if(!Rt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function xn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Vj(e,t,n){var s=t.pendingProps;switch(xm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(t),null;case 1:return Gn(t.type)&&eu(),xn(t),null;case 3:return s=t.stateNode,Ki(),Et(Hn),Et(Cn),Em(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(nc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ps!==null&&(ph(Ps),Ps=null))),ah(e,t),xn(t),null;case 5:Cm(t);var r=jo(fl.current);if(n=t.type,e!==null&&t.stateNode!=null)py(e,t,n,s,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(te(166));return xn(t),null}if(e=jo(Js.current),nc(t)){s=t.stateNode,n=t.type;var i=t.memoizedProps;switch(s[Qs]=t,s[ul]=i,e=(t.mode&1)!==0,n){case"dialog":jt("cancel",s),jt("close",s);break;case"iframe":case"object":case"embed":jt("load",s);break;case"video":case"audio":for(r=0;r<Ba.length;r++)jt(Ba[r],s);break;case"source":jt("error",s);break;case"img":case"image":case"link":jt("error",s),jt("load",s);break;case"details":jt("toggle",s);break;case"input":sg(s,i),jt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},jt("invalid",s);break;case"textarea":og(s,i),jt("invalid",s)}Lf(n,i),r=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&tc(s.textContent,l,e),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&tc(s.textContent,l,e),r=["children",""+l]):el.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&jt("scroll",s)}switch(n){case"input":Hl(s),rg(s,i,!0);break;case"textarea":Hl(s),ig(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Jc)}s=r,t.updateQueue=s,s!==null&&(t.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Kx(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=a.createElement(n,{is:s.is}):(e=a.createElement(n),n==="select"&&(a=e,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):e=a.createElementNS(e,n),e[Qs]=t,e[ul]=s,my(e,t,!1,!1),t.stateNode=e;e:{switch(a=If(n,s),n){case"dialog":jt("cancel",e),jt("close",e),r=s;break;case"iframe":case"object":case"embed":jt("load",e),r=s;break;case"video":case"audio":for(r=0;r<Ba.length;r++)jt(Ba[r],e);r=s;break;case"source":jt("error",e),r=s;break;case"img":case"image":case"link":jt("error",e),jt("load",e),r=s;break;case"details":jt("toggle",e),r=s;break;case"input":sg(e,s),r=Tf(e,s),jt("invalid",e);break;case"option":r=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},r=$t({},s,{value:void 0}),jt("invalid",e);break;case"textarea":og(e,s),r=_f(e,s),jt("invalid",e);break;default:r=s}Lf(n,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Hx(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Wx(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&tl(e,c):typeof c=="number"&&tl(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(el.hasOwnProperty(i)?c!=null&&i==="onScroll"&&jt("scroll",e):c!=null&&sm(e,i,c,a))}switch(n){case"input":Hl(e),rg(e,s,!1);break;case"textarea":Hl(e),ig(e);break;case"option":s.value!=null&&e.setAttribute("value",""+eo(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?Pi(e,!!s.multiple,i,!1):s.defaultValue!=null&&Pi(e,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=Jc)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xn(t),null;case 6:if(e&&t.stateNode!=null)gy(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(te(166));if(n=jo(fl.current),jo(Js.current),nc(t)){if(s=t.stateNode,n=t.memoizedProps,s[Qs]=t,(i=s.nodeValue!==n)&&(e=os,e!==null))switch(e.tag){case 3:tc(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&tc(s.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Qs]=t,t.stateNode=s}return xn(t),null;case 13:if(Et(Lt),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Rt&&rs!==null&&t.mode&1&&!(t.flags&128))L0(),Vi(),t.flags|=98560,i=!1;else if(i=nc(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(te(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(te(317));i[Qs]=t}else Vi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;xn(t),i=!1}else Ps!==null&&(ph(Ps),Ps=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Lt.current&1?Zt===0&&(Zt=3):Bm())),t.updateQueue!==null&&(t.flags|=4),xn(t),null);case 4:return Ki(),ah(e,t),e===null&&ll(t.stateNode.containerInfo),xn(t),null;case 10:return Sm(t.type._context),xn(t),null;case 17:return Gn(t.type)&&eu(),xn(t),null;case 19:if(Et(Lt),i=t.memoizedState,i===null)return xn(t),null;if(s=(t.flags&128)!==0,a=i.rendering,a===null)if(s)Ca(i,!1);else{if(Zt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=au(e),a!==null){for(t.flags|=128,Ca(i,!1),s=a.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)i=n,e=s,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return bt(Lt,Lt.current&1|2),t.child}e=e.sibling}i.tail!==null&&qt()>Ui&&(t.flags|=128,s=!0,Ca(i,!1),t.lanes=4194304)}else{if(!s)if(e=au(a),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ca(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Rt)return xn(t),null}else 2*qt()-i.renderingStartTime>Ui&&n!==1073741824&&(t.flags|=128,s=!0,Ca(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=qt(),t.sibling=null,n=Lt.current,bt(Lt,s?n&1|2:n&1),t):(xn(t),null);case 22:case 23:return Dm(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?ns&1073741824&&(xn(t),t.subtreeFlags&6&&(t.flags|=8192)):xn(t),null;case 24:return null;case 25:return null}throw Error(te(156,t.tag))}function qj(e,t){switch(xm(t),t.tag){case 1:return Gn(t.type)&&eu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ki(),Et(Hn),Et(Cn),Em(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Cm(t),null;case 13:if(Et(Lt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(te(340));Vi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Et(Lt),null;case 4:return Ki(),null;case 10:return Sm(t.type._context),null;case 22:case 23:return Dm(),null;case 24:return null;default:return null}}var oc=!1,bn=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,be=null;function bi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Bt(e,t,s)}else n.current=null}function lh(e,t,n){try{n()}catch(s){Bt(e,t,s)}}var Qg=!1;function Wj(e,t){if(Wf=Yc,e=b0(),gm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,f=0,m=e,h=null;t:for(;;){for(var y;m!==n||r!==0&&m.nodeType!==3||(l=a+r),m!==i||s!==0&&m.nodeType!==3||(c=a+s),m.nodeType===3&&(a+=m.nodeValue.length),(y=m.firstChild)!==null;)h=m,m=y;for(;;){if(m===e)break t;if(h===n&&++u===r&&(l=a),h===i&&++f===s&&(c=a),(y=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Uf={focusedElem:e,selectionRange:n},Yc=!1,be=t;be!==null;)if(t=be,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,be=e;else for(;be!==null;){t=be;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:js(t.type,g),w);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(S){Bt(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,be=e;break}be=t.return}return p=Qg,Qg=!1,p}function Ga(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,i!==void 0&&lh(t,n,i)}r=r.next}while(r!==s)}}function zu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function ch(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function vy(e){var t=e.alternate;t!==null&&(e.alternate=null,vy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Qs],delete t[ul],delete t[Qf],delete t[Ej],delete t[Pj])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xy(e){return e.tag===5||e.tag===3||e.tag===4}function Yg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function uh(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Jc));else if(s!==4&&(e=e.child,e!==null))for(uh(e,t,n),e=e.sibling;e!==null;)uh(e,t,n),e=e.sibling}function dh(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(dh(e,t,n),e=e.sibling;e!==null;)dh(e,t,n),e=e.sibling}var fn=null,Cs=!1;function Tr(e,t,n){for(n=n.child;n!==null;)yy(e,t,n),n=n.sibling}function yy(e,t,n){if(Zs&&typeof Zs.onCommitFiberUnmount=="function")try{Zs.onCommitFiberUnmount(Au,n)}catch{}switch(n.tag){case 5:bn||bi(n,t);case 6:var s=fn,r=Cs;fn=null,Tr(e,t,n),fn=s,Cs=r,fn!==null&&(Cs?(e=fn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):fn.removeChild(n.stateNode));break;case 18:fn!==null&&(Cs?(e=fn,n=n.stateNode,e.nodeType===8?Ad(e.parentNode,n):e.nodeType===1&&Ad(e,n),ol(e)):Ad(fn,n.stateNode));break;case 4:s=fn,r=Cs,fn=n.stateNode.containerInfo,Cs=!0,Tr(e,t,n),fn=s,Cs=r;break;case 0:case 11:case 14:case 15:if(!bn&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&lh(n,t,a),r=r.next}while(r!==s)}Tr(e,t,n);break;case 1:if(!bn&&(bi(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){Bt(n,t,l)}Tr(e,t,n);break;case 21:Tr(e,t,n);break;case 22:n.mode&1?(bn=(s=bn)||n.memoizedState!==null,Tr(e,t,n),bn=s):Tr(e,t,n);break;default:Tr(e,t,n)}}function Xg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Kj),t.forEach(function(s){var r=eC.bind(null,e,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Ns(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:fn=l.stateNode,Cs=!1;break e;case 3:fn=l.stateNode.containerInfo,Cs=!0;break e;case 4:fn=l.stateNode.containerInfo,Cs=!0;break e}l=l.return}if(fn===null)throw Error(te(160));yy(i,a,r),fn=null,Cs=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){Bt(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wy(t,e),t=t.sibling}function wy(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ns(t,e),Hs(e),s&4){try{Ga(3,e,e.return),zu(3,e)}catch(g){Bt(e,e.return,g)}try{Ga(5,e,e.return)}catch(g){Bt(e,e.return,g)}}break;case 1:Ns(t,e),Hs(e),s&512&&n!==null&&bi(n,n.return);break;case 5:if(Ns(t,e),Hs(e),s&512&&n!==null&&bi(n,n.return),e.flags&32){var r=e.stateNode;try{tl(r,"")}catch(g){Bt(e,e.return,g)}}if(s&4&&(r=e.stateNode,r!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Vx(r,i),If(l,a);var u=If(l,i);for(a=0;a<c.length;a+=2){var f=c[a],m=c[a+1];f==="style"?Hx(r,m):f==="dangerouslySetInnerHTML"?Wx(r,m):f==="children"?tl(r,m):sm(r,f,m,u)}switch(l){case"input":Rf(r,i);break;case"textarea":qx(r,i);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Pi(r,!!i.multiple,y,!1):h!==!!i.multiple&&(i.defaultValue!=null?Pi(r,!!i.multiple,i.defaultValue,!0):Pi(r,!!i.multiple,i.multiple?[]:"",!1))}r[ul]=i}catch(g){Bt(e,e.return,g)}}break;case 6:if(Ns(t,e),Hs(e),s&4){if(e.stateNode===null)throw Error(te(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(g){Bt(e,e.return,g)}}break;case 3:if(Ns(t,e),Hs(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{ol(t.containerInfo)}catch(g){Bt(e,e.return,g)}break;case 4:Ns(t,e),Hs(e);break;case 13:Ns(t,e),Hs(e),r=e.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||($m=qt())),s&4&&Xg(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(bn=(u=bn)||f,Ns(t,e),bn=u):Ns(t,e),Hs(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(be=e,f=e.child;f!==null;){for(m=be=f;be!==null;){switch(h=be,y=h.child,h.tag){case 0:case 11:case 14:case 15:Ga(4,h,h.return);break;case 1:bi(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){s=h,n=h.return;try{t=s,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Bt(s,n,g)}}break;case 5:bi(h,h.return);break;case 22:if(h.memoizedState!==null){Jg(m);continue}}y!==null?(y.return=h,be=y):Jg(m)}f=f.sibling}e:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{r=m.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Ux("display",a))}catch(g){Bt(e,e.return,g)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(g){Bt(e,e.return,g)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ns(t,e),Hs(e),s&4&&Xg(e);break;case 21:break;default:Ns(t,e),Hs(e)}}function Hs(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(xy(n)){var s=n;break e}n=n.return}throw Error(te(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(tl(r,""),s.flags&=-33);var i=Yg(e);dh(e,i,r);break;case 3:case 4:var a=s.stateNode.containerInfo,l=Yg(e);uh(e,l,a);break;default:throw Error(te(161))}}catch(c){Bt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Uj(e,t,n){be=e,by(e)}function by(e,t,n){for(var s=(e.mode&1)!==0;be!==null;){var r=be,i=r.child;if(r.tag===22&&s){var a=r.memoizedState!==null||oc;if(!a){var l=r.alternate,c=l!==null&&l.memoizedState!==null||bn;l=oc;var u=bn;if(oc=a,(bn=c)&&!u)for(be=r;be!==null;)a=be,c=a.child,a.tag===22&&a.memoizedState!==null?ev(r):c!==null?(c.return=a,be=c):ev(r);for(;i!==null;)be=i,by(i),i=i.sibling;be=r,oc=l,bn=u}Zg(e)}else r.subtreeFlags&8772&&i!==null?(i.return=r,be=i):Zg(e)}}function Zg(e){for(;be!==null;){var t=be;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:bn||zu(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!bn)if(n===null)s.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:js(t.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&$g(t,i,s);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}$g(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&ol(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}bn||t.flags&512&&ch(t)}catch(h){Bt(t,t.return,h)}}if(t===e){be=null;break}if(n=t.sibling,n!==null){n.return=t.return,be=n;break}be=t.return}}function Jg(e){for(;be!==null;){var t=be;if(t===e){be=null;break}var n=t.sibling;if(n!==null){n.return=t.return,be=n;break}be=t.return}}function ev(e){for(;be!==null;){var t=be;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{zu(4,t)}catch(c){Bt(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var r=t.return;try{s.componentDidMount()}catch(c){Bt(t,r,c)}}var i=t.return;try{ch(t)}catch(c){Bt(t,i,c)}break;case 5:var a=t.return;try{ch(t)}catch(c){Bt(t,a,c)}}}catch(c){Bt(t,t.return,c)}if(t===e){be=null;break}var l=t.sibling;if(l!==null){l.return=t.return,be=l;break}be=t.return}}var Hj=Math.ceil,uu=kr.ReactCurrentDispatcher,Lm=kr.ReactCurrentOwner,ps=kr.ReactCurrentBatchConfig,at=0,an=null,Gt=null,hn=0,ns=0,Si=io(0),Zt=0,gl=null,Io=0,Vu=0,Im=0,Qa=null,Kn=null,$m=0,Ui=1/0,dr=null,du=!1,fh=null,Qr=null,ic=!1,Vr=null,fu=0,Ya=0,hh=null,_c=-1,Ac=0;function On(){return at&6?qt():_c!==-1?_c:_c=qt()}function Yr(e){return e.mode&1?at&2&&hn!==0?hn&-hn:Rj.transition!==null?(Ac===0&&(Ac=o0()),Ac):(e=pt,e!==0||(e=window.event,e=e===void 0?16:f0(e.type)),e):1}function Rs(e,t,n,s){if(50<Ya)throw Ya=0,hh=null,Error(te(185));Cl(e,n,s),(!(at&2)||e!==an)&&(e===an&&(!(at&2)&&(Vu|=n),Zt===4&&Fr(e,hn)),Qn(e,s),n===1&&at===0&&!(t.mode&1)&&(Ui=qt()+500,Du&&ao()))}function Qn(e,t){var n=e.callbackNode;Rk(e,t);var s=Qc(e,e===an?hn:0);if(s===0)n!==null&&cg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&cg(n),t===1)e.tag===0?Tj(tv.bind(null,e)):M0(tv.bind(null,e)),jj(function(){!(at&6)&&ao()}),n=null;else{switch(i0(s)){case 1:n=lm;break;case 4:n=s0;break;case 16:n=Gc;break;case 536870912:n=r0;break;default:n=Gc}n=Ty(n,Sy.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Sy(e,t){if(_c=-1,Ac=0,at&6)throw Error(te(327));var n=e.callbackNode;if(Ai()&&e.callbackNode!==n)return null;var s=Qc(e,e===an?hn:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=hu(e,s);else{t=s;var r=at;at|=2;var i=ky();(an!==e||hn!==t)&&(dr=null,Ui=qt()+500,Po(e,t));do try{Yj();break}catch(l){Ny(e,l)}while(!0);bm(),uu.current=i,at=r,Gt!==null?t=0:(an=null,hn=0,t=Zt)}if(t!==0){if(t===2&&(r=Ff(e),r!==0&&(s=r,t=mh(e,r))),t===1)throw n=gl,Po(e,0),Fr(e,s),Qn(e,qt()),n;if(t===6)Fr(e,s);else{if(r=e.current.alternate,!(s&30)&&!Gj(r)&&(t=hu(e,s),t===2&&(i=Ff(e),i!==0&&(s=i,t=mh(e,i))),t===1))throw n=gl,Po(e,0),Fr(e,s),Qn(e,qt()),n;switch(e.finishedWork=r,e.finishedLanes=s,t){case 0:case 1:throw Error(te(345));case 2:So(e,Kn,dr);break;case 3:if(Fr(e,s),(s&130023424)===s&&(t=$m+500-qt(),10<t)){if(Qc(e,0)!==0)break;if(r=e.suspendedLanes,(r&s)!==s){On(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Gf(So.bind(null,e,Kn,dr),t);break}So(e,Kn,dr);break;case 4:if(Fr(e,s),(s&4194240)===s)break;for(t=e.eventTimes,r=-1;0<s;){var a=31-Ts(s);i=1<<a,a=t[a],a>r&&(r=a),s&=~i}if(s=r,s=qt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Hj(s/1960))-s,10<s){e.timeoutHandle=Gf(So.bind(null,e,Kn,dr),s);break}So(e,Kn,dr);break;case 5:So(e,Kn,dr);break;default:throw Error(te(329))}}}return Qn(e,qt()),e.callbackNode===n?Sy.bind(null,e):null}function mh(e,t){var n=Qa;return e.current.memoizedState.isDehydrated&&(Po(e,t).flags|=256),e=hu(e,t),e!==2&&(t=Kn,Kn=n,t!==null&&ph(t)),e}function ph(e){Kn===null?Kn=e:Kn.push.apply(Kn,e)}function Gj(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Ms(i(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fr(e,t){for(t&=~Im,t&=~Vu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ts(t),s=1<<n;e[n]=-1,t&=~s}}function tv(e){if(at&6)throw Error(te(327));Ai();var t=Qc(e,0);if(!(t&1))return Qn(e,qt()),null;var n=hu(e,t);if(e.tag!==0&&n===2){var s=Ff(e);s!==0&&(t=s,n=mh(e,s))}if(n===1)throw n=gl,Po(e,0),Fr(e,t),Qn(e,qt()),n;if(n===6)throw Error(te(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,So(e,Kn,dr),Qn(e,qt()),null}function Om(e,t){var n=at;at|=1;try{return e(t)}finally{at=n,at===0&&(Ui=qt()+500,Du&&ao())}}function $o(e){Vr!==null&&Vr.tag===0&&!(at&6)&&Ai();var t=at;at|=1;var n=ps.transition,s=pt;try{if(ps.transition=null,pt=1,e)return e()}finally{pt=s,ps.transition=n,at=t,!(at&6)&&ao()}}function Dm(){ns=Si.current,Et(Si)}function Po(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,kj(n)),Gt!==null)for(n=Gt.return;n!==null;){var s=n;switch(xm(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&eu();break;case 3:Ki(),Et(Hn),Et(Cn),Em();break;case 5:Cm(s);break;case 4:Ki();break;case 13:Et(Lt);break;case 19:Et(Lt);break;case 10:Sm(s.type._context);break;case 22:case 23:Dm()}n=n.return}if(an=e,Gt=e=Xr(e.current,null),hn=ns=t,Zt=0,gl=null,Im=Vu=Io=0,Kn=Qa=null,ko!==null){for(t=0;t<ko.length;t++)if(n=ko[t],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var a=i.next;i.next=r,s.next=a}n.pending=s}ko=null}return e}function Ny(e,t){do{var n=Gt;try{if(bm(),Tc.current=cu,lu){for(var s=It.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}lu=!1}if(Lo=0,on=Xt=It=null,Ha=!1,hl=0,Lm.current=null,n===null||n.return===null){Zt=1,gl=t,Gt=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=hn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=Vg(a);if(y!==null){y.flags&=-257,qg(y,a,l,i,t),y.mode&1&&zg(i,u,t),t=y,c=u;var p=t.updateQueue;if(p===null){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}else{if(!(t&1)){zg(i,u,t),Bm();break e}c=Error(te(426))}}else if(Rt&&l.mode&1){var w=Vg(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),qg(w,a,l,i,t),ym(Wi(c,l));break e}}i=c=Wi(c,l),Zt!==4&&(Zt=2),Qa===null?Qa=[i]:Qa.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=iy(i,c,t);Ig(i,x);break e;case 1:l=c;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Qr===null||!Qr.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=ay(i,l,t);Ig(i,S);break e}}i=i.return}while(i!==null)}Cy(n)}catch(N){t=N,Gt===n&&n!==null&&(Gt=n=n.return);continue}break}while(!0)}function ky(){var e=uu.current;return uu.current=cu,e===null?cu:e}function Bm(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),an===null||!(Io&268435455)&&!(Vu&268435455)||Fr(an,hn)}function hu(e,t){var n=at;at|=2;var s=ky();(an!==e||hn!==t)&&(dr=null,Po(e,t));do try{Qj();break}catch(r){Ny(e,r)}while(!0);if(bm(),at=n,uu.current=s,Gt!==null)throw Error(te(261));return an=null,hn=0,Zt}function Qj(){for(;Gt!==null;)jy(Gt)}function Yj(){for(;Gt!==null&&!bk();)jy(Gt)}function jy(e){var t=Py(e.alternate,e,ns);e.memoizedProps=e.pendingProps,t===null?Cy(e):Gt=t,Lm.current=null}function Cy(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=qj(n,t),n!==null){n.flags&=32767,Gt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Zt=6,Gt=null;return}}else if(n=Vj(n,t,ns),n!==null){Gt=n;return}if(t=t.sibling,t!==null){Gt=t;return}Gt=t=e}while(t!==null);Zt===0&&(Zt=5)}function So(e,t,n){var s=pt,r=ps.transition;try{ps.transition=null,pt=1,Xj(e,t,n,s)}finally{ps.transition=r,pt=s}return null}function Xj(e,t,n,s){do Ai();while(Vr!==null);if(at&6)throw Error(te(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(te(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Mk(e,i),e===an&&(Gt=an=null,hn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ic||(ic=!0,Ty(Gc,function(){return Ai(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ps.transition,ps.transition=null;var a=pt;pt=1;var l=at;at|=4,Lm.current=null,Wj(e,n),wy(n,e),vj(Uf),Yc=!!Wf,Uf=Wf=null,e.current=n,Uj(n),Sk(),at=l,pt=a,ps.transition=i}else e.current=n;if(ic&&(ic=!1,Vr=e,fu=r),i=e.pendingLanes,i===0&&(Qr=null),jk(n.stateNode),Qn(e,qt()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(du)throw du=!1,e=fh,fh=null,e;return fu&1&&e.tag!==0&&Ai(),i=e.pendingLanes,i&1?e===hh?Ya++:(Ya=0,hh=e):Ya=0,ao(),null}function Ai(){if(Vr!==null){var e=i0(fu),t=ps.transition,n=pt;try{if(ps.transition=null,pt=16>e?16:e,Vr===null)var s=!1;else{if(e=Vr,Vr=null,fu=0,at&6)throw Error(te(331));var r=at;for(at|=4,be=e.current;be!==null;){var i=be,a=i.child;if(be.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(be=u;be!==null;){var f=be;switch(f.tag){case 0:case 11:case 15:Ga(8,f,i)}var m=f.child;if(m!==null)m.return=f,be=m;else for(;be!==null;){f=be;var h=f.sibling,y=f.return;if(vy(f),f===u){be=null;break}if(h!==null){h.return=y,be=h;break}be=y}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}be=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,be=a;else e:for(;be!==null;){if(i=be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ga(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,be=x;break e}be=i.return}}var v=e.current;for(be=v;be!==null;){a=be;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,be=b;else e:for(a=v;be!==null;){if(l=be,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:zu(9,l)}}catch(N){Bt(l,l.return,N)}if(l===a){be=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,be=S;break e}be=l.return}}if(at=r,ao(),Zs&&typeof Zs.onPostCommitFiberRoot=="function")try{Zs.onPostCommitFiberRoot(Au,e)}catch{}s=!0}return s}finally{pt=n,ps.transition=t}}return!1}function nv(e,t,n){t=Wi(n,t),t=iy(e,t,1),e=Gr(e,t,1),t=On(),e!==null&&(Cl(e,1,t),Qn(e,t))}function Bt(e,t,n){if(e.tag===3)nv(e,e,n);else for(;t!==null;){if(t.tag===3){nv(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Qr===null||!Qr.has(s))){e=Wi(n,e),e=ay(t,e,1),t=Gr(t,e,1),e=On(),t!==null&&(Cl(t,1,e),Qn(t,e));break}}t=t.return}}function Zj(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=On(),e.pingedLanes|=e.suspendedLanes&n,an===e&&(hn&n)===n&&(Zt===4||Zt===3&&(hn&130023424)===hn&&500>qt()-$m?Po(e,0):Im|=n),Qn(e,t)}function Ey(e,t){t===0&&(e.mode&1?(t=Yl,Yl<<=1,!(Yl&130023424)&&(Yl=4194304)):t=1);var n=On();e=wr(e,t),e!==null&&(Cl(e,t,n),Qn(e,n))}function Jj(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ey(e,n)}function eC(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(te(314))}s!==null&&s.delete(t),Ey(e,n)}var Py;Py=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Hn.current)Wn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Wn=!1,zj(e,t,n);Wn=!!(e.flags&131072)}else Wn=!1,Rt&&t.flags&1048576&&_0(t,su,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Mc(e,t),e=t.pendingProps;var r=zi(t,Cn.current);_i(t,n),r=Tm(null,t,s,e,r,n);var i=Rm();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Gn(s)?(i=!0,tu(t)):i=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,km(t),r.updater=Fu,t.stateNode=r,r._reactInternals=t,th(t,s,e,n),t=rh(null,t,s,!0,i,n)):(t.tag=0,Rt&&i&&vm(t),An(null,t,r,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Mc(e,t),e=t.pendingProps,r=s._init,s=r(s._payload),t.type=s,r=t.tag=nC(s),e=js(s,e),r){case 0:t=sh(null,t,s,e,n);break e;case 1:t=Ug(null,t,s,e,n);break e;case 11:t=Kg(null,t,s,e,n);break e;case 14:t=Wg(null,t,s,js(s.type,e),n);break e}throw Error(te(306,s,""))}return t;case 0:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:js(s,r),sh(e,t,s,r,n);case 1:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:js(s,r),Ug(e,t,s,r,n);case 3:e:{if(dy(t),e===null)throw Error(te(387));s=t.pendingProps,i=t.memoizedState,r=i.element,D0(e,t),iu(t,s,null,n);var a=t.memoizedState;if(s=a.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){r=Wi(Error(te(423)),t),t=Hg(e,t,s,n,r);break e}else if(s!==r){r=Wi(Error(te(424)),t),t=Hg(e,t,s,n,r);break e}else for(rs=Hr(t.stateNode.containerInfo.firstChild),os=t,Rt=!0,Ps=null,n=$0(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vi(),s===r){t=br(e,t,n);break e}An(e,t,s,n)}t=t.child}return t;case 5:return B0(t),e===null&&Zf(t),s=t.type,r=t.pendingProps,i=e!==null?e.memoizedProps:null,a=r.children,Hf(s,r)?a=null:i!==null&&Hf(s,i)&&(t.flags|=32),uy(e,t),An(e,t,a,n),t.child;case 6:return e===null&&Zf(t),null;case 13:return fy(e,t,n);case 4:return jm(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=qi(t,null,s,n):An(e,t,s,n),t.child;case 11:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:js(s,r),Kg(e,t,s,r,n);case 7:return An(e,t,t.pendingProps,n),t.child;case 8:return An(e,t,t.pendingProps.children,n),t.child;case 12:return An(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,r=t.pendingProps,i=t.memoizedProps,a=r.value,bt(ru,s._currentValue),s._currentValue=a,i!==null)if(Ms(i.value,a)){if(i.children===r.children&&!Hn.current){t=br(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=vr(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Jf(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(te(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Jf(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}An(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps.children,_i(t,n),r=gs(r),s=s(r),t.flags|=1,An(e,t,s,n),t.child;case 14:return s=t.type,r=js(s,t.pendingProps),r=js(s.type,r),Wg(e,t,s,r,n);case 15:return ly(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:js(s,r),Mc(e,t),t.tag=1,Gn(s)?(e=!0,tu(t)):e=!1,_i(t,n),oy(t,s,r),th(t,s,r,n),rh(null,t,s,!0,e,n);case 19:return hy(e,t,n);case 22:return cy(e,t,n)}throw Error(te(156,t.tag))};function Ty(e,t){return n0(e,t)}function tC(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hs(e,t,n,s){return new tC(e,t,n,s)}function Fm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function nC(e){if(typeof e=="function")return Fm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===om)return 11;if(e===im)return 14}return 2}function Xr(e,t){var n=e.alternate;return n===null?(n=hs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,s,r,i){var a=2;if(s=e,typeof e=="function")Fm(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case fi:return To(n.children,r,i,t);case rm:a=8,r|=8;break;case jf:return e=hs(12,n,t,r|2),e.elementType=jf,e.lanes=i,e;case Cf:return e=hs(13,n,t,r),e.elementType=Cf,e.lanes=i,e;case Ef:return e=hs(19,n,t,r),e.elementType=Ef,e.lanes=i,e;case Bx:return qu(n,r,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ox:a=10;break e;case Dx:a=9;break e;case om:a=11;break e;case im:a=14;break e;case $r:a=16,s=null;break e}throw Error(te(130,e==null?e:typeof e,""))}return t=hs(a,n,t,r),t.elementType=e,t.type=s,t.lanes=i,t}function To(e,t,n,s){return e=hs(7,e,s,t),e.lanes=n,e}function qu(e,t,n,s){return e=hs(22,e,s,t),e.elementType=Bx,e.lanes=n,e.stateNode={isHidden:!1},e}function zd(e,t,n){return e=hs(6,e,null,t),e.lanes=n,e}function Vd(e,t,n){return t=hs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function sC(e,t,n,s,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sd(0),this.expirationTimes=Sd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sd(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function zm(e,t,n,s,r,i,a,l,c){return e=new sC(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=hs(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},km(i),e}function rC(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:di,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function Ry(e){if(!e)return to;e=e._reactInternals;e:{if(Ho(e)!==e||e.tag!==1)throw Error(te(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Gn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(te(171))}if(e.tag===1){var n=e.type;if(Gn(n))return R0(e,n,t)}return t}function My(e,t,n,s,r,i,a,l,c){return e=zm(n,s,!0,e,r,i,a,l,c),e.context=Ry(null),n=e.current,s=On(),r=Yr(n),i=vr(s,r),i.callback=t??null,Gr(n,i,r),e.current.lanes=r,Cl(e,r,s),Qn(e,s),e}function Ku(e,t,n,s){var r=t.current,i=On(),a=Yr(r);return n=Ry(n),t.context===null?t.context=n:t.pendingContext=n,t=vr(i,a),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Gr(r,t,a),e!==null&&(Rs(e,r,a,i),Pc(e,r,a)),a}function mu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function sv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Vm(e,t){sv(e,t),(e=e.alternate)&&sv(e,t)}function oC(){return null}var _y=typeof reportError=="function"?reportError:function(e){console.error(e)};function qm(e){this._internalRoot=e}Wu.prototype.render=qm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(te(409));Ku(e,t,null,null)};Wu.prototype.unmount=qm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$o(function(){Ku(null,e,null,null)}),t[yr]=null}};function Wu(e){this._internalRoot=e}Wu.prototype.unstable_scheduleHydration=function(e){if(e){var t=c0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Br.length&&t!==0&&t<Br[n].priority;n++);Br.splice(n,0,e),n===0&&d0(e)}};function Km(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Uu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rv(){}function iC(e,t,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var u=mu(a);i.call(u)}}var a=My(t,s,e,0,null,!1,!1,"",rv);return e._reactRootContainer=a,e[yr]=a.current,ll(e.nodeType===8?e.parentNode:e),$o(),a}for(;r=e.lastChild;)e.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var u=mu(c);l.call(u)}}var c=zm(e,0,!1,null,null,!1,!1,"",rv);return e._reactRootContainer=c,e[yr]=c.current,ll(e.nodeType===8?e.parentNode:e),$o(function(){Ku(t,c,n,s)}),c}function Hu(e,t,n,s,r){var i=n._reactRootContainer;if(i){var a=i;if(typeof r=="function"){var l=r;r=function(){var c=mu(a);l.call(c)}}Ku(t,a,e,r)}else a=iC(n,t,e,r,s);return mu(a)}a0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Da(t.pendingLanes);n!==0&&(cm(t,n|1),Qn(t,qt()),!(at&6)&&(Ui=qt()+500,ao()))}break;case 13:$o(function(){var s=wr(e,1);if(s!==null){var r=On();Rs(s,e,1,r)}}),Vm(e,1)}};um=function(e){if(e.tag===13){var t=wr(e,134217728);if(t!==null){var n=On();Rs(t,e,134217728,n)}Vm(e,134217728)}};l0=function(e){if(e.tag===13){var t=Yr(e),n=wr(e,t);if(n!==null){var s=On();Rs(n,e,t,s)}Vm(e,t)}};c0=function(){return pt};u0=function(e,t){var n=pt;try{return pt=e,t()}finally{pt=n}};Of=function(e,t,n){switch(t){case"input":if(Rf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=Ou(s);if(!r)throw Error(te(90));zx(s),Rf(s,r)}}}break;case"textarea":qx(e,n);break;case"select":t=n.value,t!=null&&Pi(e,!!n.multiple,t,!1)}};Yx=Om;Xx=$o;var aC={usingClientEntryPoint:!1,Events:[Pl,gi,Ou,Gx,Qx,Om]},Ea={findFiberByHostInstance:No,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lC={bundleType:Ea.bundleType,version:Ea.version,rendererPackageName:Ea.rendererPackageName,rendererConfig:Ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=e0(e),e===null?null:e.stateNode},findFiberByHostInstance:Ea.findFiberByHostInstance||oC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{Au=ac.inject(lC),Zs=ac}catch{}}ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aC;ls.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Km(t))throw Error(te(200));return rC(e,t,null,n)};ls.createRoot=function(e,t){if(!Km(e))throw Error(te(299));var n=!1,s="",r=_y;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=zm(e,1,!1,null,null,n,!1,s,r),e[yr]=t.current,ll(e.nodeType===8?e.parentNode:e),new qm(t)};ls.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(te(188)):(e=Object.keys(e).join(","),Error(te(268,e)));return e=e0(t),e=e===null?null:e.stateNode,e};ls.flushSync=function(e){return $o(e)};ls.hydrate=function(e,t,n){if(!Uu(t))throw Error(te(200));return Hu(null,e,t,!0,n)};ls.hydrateRoot=function(e,t,n){if(!Km(e))throw Error(te(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",a=_y;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=My(t,null,e,1,n??null,r,!1,i,a),e[yr]=t.current,ll(e),s)for(e=0;e<s.length;e++)n=s[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Wu(t)};ls.render=function(e,t,n){if(!Uu(t))throw Error(te(200));return Hu(null,e,t,!1,n)};ls.unmountComponentAtNode=function(e){if(!Uu(e))throw Error(te(40));return e._reactRootContainer?($o(function(){Hu(null,null,e,!1,function(){e._reactRootContainer=null,e[yr]=null})}),!0):!1};ls.unstable_batchedUpdates=Om;ls.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Uu(n))throw Error(te(200));if(e==null||e._reactInternals===void 0)throw Error(te(38));return Hu(e,t,n,!1,s)};ls.version="18.3.1-next-f1338f8080-20240426";function Ay(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ay)}catch(e){console.error(e)}}Ay(),Ax.exports=ls;var Go=Ax.exports;const cC=wx(Go);var Ly,ov=Go;Ly=ov.createRoot,ov.hydrateRoot;const uC=1,dC=1e6,Wm="simulchess_toasts_enabled";function fC(){if(typeof window>"u")return!0;const e=localStorage.getItem(Wm);return e===null?!0:e==="true"}function hC(e){typeof window>"u"||localStorage.setItem(Wm,String(e))}let qd=0;function mC(){return qd=(qd+1)%Number.MAX_SAFE_INTEGER,qd.toString()}const Kd=new Map,iv=e=>{if(Kd.has(e))return;const t=setTimeout(()=>{Kd.delete(e),Xa({type:"REMOVE_TOAST",toastId:e})},dC);Kd.set(e,t)},pC=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,uC)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?iv(n):e.toasts.forEach(s=>{iv(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===n||n===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Ic=[];let $c={toasts:[]};function Xa(e){$c=pC($c,e),Ic.forEach(t=>{t($c)})}function gC({...e}){if(!(typeof window<"u"?localStorage.getItem(Wm)!=="false":!0))return{id:"",dismiss:()=>{},update:()=>{}};const n=mC(),s=i=>Xa({type:"UPDATE_TOAST",toast:{...i,id:n}}),r=()=>Xa({type:"DISMISS_TOAST",toastId:n});return Xa({type:"ADD_TOAST",toast:{...e,id:n,open:!0,onOpenChange:i=>{i||r()}}}),{id:n,dismiss:r,update:s}}function Rl(){const[e,t]=d.useState($c);return d.useEffect(()=>(Ic.push(t),()=>{const n=Ic.indexOf(t);n>-1&&Ic.splice(n,1)}),[e]),{...e,toast:gC,dismiss:n=>Xa({type:"DISMISS_TOAST",toastId:n})}}function Pe(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function av(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Um(...e){return t=>{let n=!1;const s=e.map(r=>{const i=av(r,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():av(e[r],null)}}}}function Ye(...e){return d.useCallback(Um(...e),e)}function vC(e,t){const n=d.createContext(t),s=i=>{const{children:a,...l}=i,c=d.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:a})};s.displayName=e+"Provider";function r(i){const a=d.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[s,r]}function Yn(e,t=[]){let n=[];function s(i,a){const l=d.createContext(a),c=n.length;n=[...n,a];const u=m=>{var x;const{scope:h,children:y,...p}=m,g=((x=h==null?void 0:h[e])==null?void 0:x[c])||l,w=d.useMemo(()=>p,Object.values(p));return o.jsx(g.Provider,{value:w,children:y})};u.displayName=i+"Provider";function f(m,h){var g;const y=((g=h==null?void 0:h[e])==null?void 0:g[c])||l,p=d.useContext(y);if(p)return p;if(a!==void 0)return a;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[u,f]}const r=()=>{const i=n.map(a=>d.createContext(a));return function(l){const c=(l==null?void 0:l[e])||i;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return r.scopeName=e,[s,xC(r,...t)]}function xC(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const a=s.reduce((l,{useScope:c,scopeName:u})=>{const m=c(i)[`__scope${u}`];return{...l,...m}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function Hi(e){const t=wC(e),n=d.forwardRef((s,r)=>{const{children:i,...a}=s,l=d.Children.toArray(i),c=l.find(bC);if(c){const u=c.props.children,f=l.map(m=>m===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:m);return o.jsx(t,{...a,ref:r,children:d.isValidElement(u)?d.cloneElement(u,void 0,f):null})}return o.jsx(t,{...a,ref:r,children:i})});return n.displayName=`${e}.Slot`,n}var yC=Hi("Slot");function wC(e){const t=d.forwardRef((n,s)=>{const{children:r,...i}=n;if(d.isValidElement(r)){const a=NC(r),l=SC(i,r.props);return r.type!==d.Fragment&&(l.ref=s?Um(s,a):a),d.cloneElement(r,l)}return d.Children.count(r)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Iy=Symbol("radix.slottable");function $y(e){const t=({children:n})=>o.jsx(o.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Iy,t}function bC(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Iy}function SC(e,t){const n={...t};for(const s in t){const r=e[s],i=t[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...l)=>{i(...l),r(...l)}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...e,...n}}function NC(e){var s,r;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Hm(e){const t=e+"CollectionProvider",[n,s]=Yn(t),[r,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:w,children:x}=g,v=Ln.useRef(null),b=Ln.useRef(new Map).current;return o.jsx(r,{scope:w,itemMap:b,collectionRef:v,children:x})};a.displayName=t;const l=e+"CollectionSlot",c=Hi(l),u=Ln.forwardRef((g,w)=>{const{scope:x,children:v}=g,b=i(l,x),S=Ye(w,b.collectionRef);return o.jsx(c,{ref:S,children:v})});u.displayName=l;const f=e+"CollectionItemSlot",m="data-radix-collection-item",h=Hi(f),y=Ln.forwardRef((g,w)=>{const{scope:x,children:v,...b}=g,S=Ln.useRef(null),N=Ye(w,S),j=i(f,x);return Ln.useEffect(()=>(j.itemMap.set(S,{ref:S,...b}),()=>void j.itemMap.delete(S))),o.jsx(h,{[m]:"",ref:N,children:v})});y.displayName=f;function p(g){const w=i(e+"CollectionConsumer",g);return Ln.useCallback(()=>{const v=w.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${m}]`));return Array.from(w.itemMap.values()).sort((j,k)=>b.indexOf(j.ref.current)-b.indexOf(k.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:u,ItemSlot:y},p,s]}var kC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Be=kC.reduce((e,t)=>{const n=Hi(`Primitive.${t}`),s=d.forwardRef((r,i)=>{const{asChild:a,...l}=r,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function Oy(e,t){e&&Go.flushSync(()=>e.dispatchEvent(t))}function Kt(e){const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function jC(e,t=globalThis==null?void 0:globalThis.document){const n=Kt(e);d.useEffect(()=>{const s=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var CC="DismissableLayer",gh="dismissableLayer.update",EC="dismissableLayer.pointerDownOutside",PC="dismissableLayer.focusOutside",lv,Dy=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ml=d.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=e,u=d.useContext(Dy),[f,m]=d.useState(null),h=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=d.useState({}),p=Ye(t,k=>m(k)),g=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(w),v=f?g.indexOf(f):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,S=v>=x,N=RC(k=>{const C=k.target,R=[...u.branches].some(P=>P.contains(C));!S||R||(r==null||r(k),a==null||a(k),k.defaultPrevented||l==null||l())},h),j=MC(k=>{const C=k.target;[...u.branches].some(P=>P.contains(C))||(i==null||i(k),a==null||a(k),k.defaultPrevented||l==null||l())},h);return jC(k=>{v===u.layers.size-1&&(s==null||s(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},h),d.useEffect(()=>{if(f)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(lv=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),cv(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=lv)}},[f,h,n,u]),d.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),cv())},[f,u]),d.useEffect(()=>{const k=()=>y({});return document.addEventListener(gh,k),()=>document.removeEventListener(gh,k)},[]),o.jsx(Be.div,{...c,ref:p,style:{pointerEvents:b?S?"auto":"none":void 0,...e.style},onFocusCapture:Pe(e.onFocusCapture,j.onFocusCapture),onBlurCapture:Pe(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:Pe(e.onPointerDownCapture,N.onPointerDownCapture)})});Ml.displayName=CC;var TC="DismissableLayerBranch",By=d.forwardRef((e,t)=>{const n=d.useContext(Dy),s=d.useRef(null),r=Ye(t,s);return d.useEffect(()=>{const i=s.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(Be.div,{...e,ref:r})});By.displayName=TC;function RC(e,t=globalThis==null?void 0:globalThis.document){const n=Kt(e),s=d.useRef(!1),r=d.useRef(()=>{});return d.useEffect(()=>{const i=l=>{if(l.target&&!s.current){let c=function(){Fy(EC,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=c,t.addEventListener("click",r.current,{once:!0})):c()}else t.removeEventListener("click",r.current);s.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",i),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function MC(e,t=globalThis==null?void 0:globalThis.document){const n=Kt(e),s=d.useRef(!1);return d.useEffect(()=>{const r=i=>{i.target&&!s.current&&Fy(PC,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function cv(){const e=new CustomEvent(gh);document.dispatchEvent(e)}function Fy(e,t,n,{discrete:s}){const r=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),s?Oy(r,i):r.dispatchEvent(i)}var _C=Ml,AC=By,ln=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{},LC="Portal",Gu=d.forwardRef((e,t)=>{var l;const{container:n,...s}=e,[r,i]=d.useState(!1);ln(()=>i(!0),[]);const a=n||r&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?cC.createPortal(o.jsx(Be.div,{...s,ref:t}),a):null});Gu.displayName=LC;function IC(e,t){return d.useReducer((n,s)=>t[n][s]??n,e)}var zs=e=>{const{present:t,children:n}=e,s=$C(t),r=typeof n=="function"?n({present:s.isPresent}):d.Children.only(n),i=Ye(s.ref,OC(r));return typeof n=="function"||s.isPresent?d.cloneElement(r,{ref:i}):null};zs.displayName="Presence";function $C(e){const[t,n]=d.useState(),s=d.useRef({}),r=d.useRef(e),i=d.useRef("none"),a=e?"mounted":"unmounted",[l,c]=IC(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const u=lc(s.current);i.current=l==="mounted"?u:"none"},[l]),ln(()=>{const u=s.current,f=r.current;if(f!==e){const h=i.current,y=lc(u);e?c("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&h!==y?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,c]),ln(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,m=y=>{const g=lc(s.current).includes(y.animationName);if(y.target===t&&g&&(c("ANIMATION_END"),!r.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},h=y=>{y.target===t&&(i.current=lc(s.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:d.useCallback(u=>{u&&(s.current=getComputedStyle(u)),n(u)},[])}}function lc(e){return(e==null?void 0:e.animationName)||"none"}function OC(e){var s,r;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Oo({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,r]=DC({defaultProp:t,onChange:n}),i=e!==void 0,a=i?e:s,l=Kt(n),c=d.useCallback(u=>{if(i){const m=typeof u=="function"?u(e):u;m!==e&&l(m)}else r(u)},[i,e,r,l]);return[a,c]}function DC({defaultProp:e,onChange:t}){const n=d.useState(e),[s]=n,r=d.useRef(s),i=Kt(t);return d.useEffect(()=>{r.current!==s&&(i(s),r.current=s)},[s,r,i]),n}var BC="VisuallyHidden",_l=d.forwardRef((e,t)=>o.jsx(Be.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));_l.displayName=BC;var FC=_l,Gm="ToastProvider",[Qm,zC,VC]=Hm("Toast"),[zy,n3]=Yn("Toast",[VC]),[qC,Qu]=zy(Gm),Vy=e=>{const{__scopeToast:t,label:n="Notification",duration:s=5e3,swipeDirection:r="right",swipeThreshold:i=50,children:a}=e,[l,c]=d.useState(null),[u,f]=d.useState(0),m=d.useRef(!1),h=d.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Gm}\`. Expected non-empty \`string\`.`),o.jsx(Qm.Provider,{scope:t,children:o.jsx(qC,{scope:t,label:n,duration:s,swipeDirection:r,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:d.useCallback(()=>f(y=>y+1),[]),onToastRemove:d.useCallback(()=>f(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:h,children:a})})};Vy.displayName=Gm;var qy="ToastViewport",KC=["F8"],vh="toast.viewportPause",xh="toast.viewportResume",Ky=d.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:s=KC,label:r="Notifications ({hotkey})",...i}=e,a=Qu(qy,n),l=zC(n),c=d.useRef(null),u=d.useRef(null),f=d.useRef(null),m=d.useRef(null),h=Ye(t,m,a.onViewportChange),y=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=a.toastCount>0;d.useEffect(()=>{const w=x=>{var b;s.length!==0&&s.every(S=>x[S]||x.code===S)&&((b=m.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[s]),d.useEffect(()=>{const w=c.current,x=m.current;if(p&&w&&x){const v=()=>{if(!a.isClosePausedRef.current){const j=new CustomEvent(vh);x.dispatchEvent(j),a.isClosePausedRef.current=!0}},b=()=>{if(a.isClosePausedRef.current){const j=new CustomEvent(xh);x.dispatchEvent(j),a.isClosePausedRef.current=!1}},S=j=>{!w.contains(j.relatedTarget)&&b()},N=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",v),w.addEventListener("focusout",S),w.addEventListener("pointermove",v),w.addEventListener("pointerleave",N),window.addEventListener("blur",v),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",v),w.removeEventListener("focusout",S),w.removeEventListener("pointermove",v),w.removeEventListener("pointerleave",N),window.removeEventListener("blur",v),window.removeEventListener("focus",b)}}},[p,a.isClosePausedRef]);const g=d.useCallback(({tabbingDirection:w})=>{const v=l().map(b=>{const S=b.ref.current,N=[S,...s2(S)];return w==="forwards"?N:N.reverse()});return(w==="forwards"?v.reverse():v).flat()},[l]);return d.useEffect(()=>{const w=m.current;if(w){const x=v=>{var N,j,k;const b=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!b){const C=document.activeElement,R=v.shiftKey;if(v.target===w&&R){(N=u.current)==null||N.focus();return}const A=g({tabbingDirection:R?"backwards":"forwards"}),z=A.findIndex(_=>_===C);Wd(A.slice(z+1))?v.preventDefault():R?(j=u.current)==null||j.focus():(k=f.current)==null||k.focus()}};return w.addEventListener("keydown",x),()=>w.removeEventListener("keydown",x)}},[l,g]),o.jsxs(AC,{ref:c,role:"region","aria-label":r.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&o.jsx(yh,{ref:u,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"forwards"});Wd(w)}}),o.jsx(Qm.Slot,{scope:n,children:o.jsx(Be.ol,{tabIndex:-1,...i,ref:h})}),p&&o.jsx(yh,{ref:f,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"backwards"});Wd(w)}})]})});Ky.displayName=qy;var Wy="ToastFocusProxy",yh=d.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:s,...r}=e,i=Qu(Wy,n);return o.jsx(_l,{"aria-hidden":!0,tabIndex:0,...r,ref:t,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&s()}})});yh.displayName=Wy;var Yu="Toast",WC="toast.swipeStart",UC="toast.swipeMove",HC="toast.swipeCancel",GC="toast.swipeEnd",Uy=d.forwardRef((e,t)=>{const{forceMount:n,open:s,defaultOpen:r,onOpenChange:i,...a}=e,[l=!0,c]=Oo({prop:s,defaultProp:r,onChange:i});return o.jsx(zs,{present:n||l,children:o.jsx(XC,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:Kt(e.onPause),onResume:Kt(e.onResume),onSwipeStart:Pe(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Pe(e.onSwipeMove,u=>{const{x:f,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:Pe(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Pe(e.onSwipeEnd,u=>{const{x:f,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});Uy.displayName=Yu;var[QC,YC]=zy(Yu,{onClose(){}}),XC=d.forwardRef((e,t)=>{const{__scopeToast:n,type:s="foreground",duration:r,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:f,onSwipeMove:m,onSwipeCancel:h,onSwipeEnd:y,...p}=e,g=Qu(Yu,n),[w,x]=d.useState(null),v=Ye(t,_=>x(_)),b=d.useRef(null),S=d.useRef(null),N=r||g.duration,j=d.useRef(0),k=d.useRef(N),C=d.useRef(0),{onToastAdd:R,onToastRemove:P}=g,D=Kt(()=>{var F;(w==null?void 0:w.contains(document.activeElement))&&((F=g.viewport)==null||F.focus()),a()}),A=d.useCallback(_=>{!_||_===1/0||(window.clearTimeout(C.current),j.current=new Date().getTime(),C.current=window.setTimeout(D,_))},[D]);d.useEffect(()=>{const _=g.viewport;if(_){const F=()=>{A(k.current),u==null||u()},q=()=>{const G=new Date().getTime()-j.current;k.current=k.current-G,window.clearTimeout(C.current),c==null||c()};return _.addEventListener(vh,q),_.addEventListener(xh,F),()=>{_.removeEventListener(vh,q),_.removeEventListener(xh,F)}}},[g.viewport,N,c,u,A]),d.useEffect(()=>{i&&!g.isClosePausedRef.current&&A(N)},[i,N,g.isClosePausedRef,A]),d.useEffect(()=>(R(),()=>P()),[R,P]);const z=d.useMemo(()=>w?Jy(w):null,[w]);return g.viewport?o.jsxs(o.Fragment,{children:[z&&o.jsx(ZC,{__scopeToast:n,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),o.jsx(QC,{scope:n,onClose:D,children:Go.createPortal(o.jsx(Qm.ItemSlot,{scope:n,children:o.jsx(_C,{asChild:!0,onEscapeKeyDown:Pe(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||D(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(Be.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...p,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Pe(e.onKeyDown,_=>{_.key==="Escape"&&(l==null||l(_.nativeEvent),_.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:Pe(e.onPointerDown,_=>{_.button===0&&(b.current={x:_.clientX,y:_.clientY})}),onPointerMove:Pe(e.onPointerMove,_=>{if(!b.current)return;const F=_.clientX-b.current.x,q=_.clientY-b.current.y,G=!!S.current,T=["left","right"].includes(g.swipeDirection),$=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,Q=T?$(0,F):0,U=T?0:$(0,q),ve=_.pointerType==="touch"?10:2,H={x:Q,y:U},xe={originalEvent:_,delta:H};G?(S.current=H,cc(UC,m,xe,{discrete:!1})):uv(H,g.swipeDirection,ve)?(S.current=H,cc(WC,f,xe,{discrete:!1}),_.target.setPointerCapture(_.pointerId)):(Math.abs(F)>ve||Math.abs(q)>ve)&&(b.current=null)}),onPointerUp:Pe(e.onPointerUp,_=>{const F=S.current,q=_.target;if(q.hasPointerCapture(_.pointerId)&&q.releasePointerCapture(_.pointerId),S.current=null,b.current=null,F){const G=_.currentTarget,T={originalEvent:_,delta:F};uv(F,g.swipeDirection,g.swipeThreshold)?cc(GC,y,T,{discrete:!0}):cc(HC,h,T,{discrete:!0}),G.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),ZC=e=>{const{__scopeToast:t,children:n,...s}=e,r=Qu(Yu,t),[i,a]=d.useState(!1),[l,c]=d.useState(!1);return t2(()=>a(!0)),d.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(Gu,{asChild:!0,children:o.jsx(_l,{...s,children:i&&o.jsxs(o.Fragment,{children:[r.label," ",n]})})})},JC="ToastTitle",Hy=d.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return o.jsx(Be.div,{...s,ref:t})});Hy.displayName=JC;var e2="ToastDescription",Gy=d.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return o.jsx(Be.div,{...s,ref:t})});Gy.displayName=e2;var Qy="ToastAction",Yy=d.forwardRef((e,t)=>{const{altText:n,...s}=e;return n.trim()?o.jsx(Zy,{altText:n,asChild:!0,children:o.jsx(Ym,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Qy}\`. Expected non-empty \`string\`.`),null)});Yy.displayName=Qy;var Xy="ToastClose",Ym=d.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e,r=YC(Xy,n);return o.jsx(Zy,{asChild:!0,children:o.jsx(Be.button,{type:"button",...s,ref:t,onClick:Pe(e.onClick,r.onClose)})})});Ym.displayName=Xy;var Zy=d.forwardRef((e,t)=>{const{__scopeToast:n,altText:s,...r}=e;return o.jsx(Be.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...r,ref:t})});function Jy(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),n2(s)){const r=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!r)if(i){const a=s.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...Jy(s))}}),t}function cc(e,t,n,{discrete:s}){const r=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),s?Oy(r,i):r.dispatchEvent(i)}var uv=(e,t,n=0)=>{const s=Math.abs(e.x),r=Math.abs(e.y),i=s>r;return t==="left"||t==="right"?i&&s>n:!i&&r>n};function t2(e=()=>{}){const t=Kt(e);ln(()=>{let n=0,s=0;return n=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(s)}},[t])}function n2(e){return e.nodeType===e.ELEMENT_NODE}function s2(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Wd(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var r2=Vy,ew=Ky,tw=Uy,nw=Hy,sw=Gy,rw=Yy,ow=Ym;function iw(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=iw(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function aw(){for(var e,t,n=0,s="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=iw(e))&&(s&&(s+=" "),s+=t);return s}const dv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,fv=aw,Xu=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return fv(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:i}=t,a=Object.keys(r).map(u=>{const f=n==null?void 0:n[u],m=i==null?void 0:i[u];if(f===null)return null;const h=dv(f)||dv(m);return r[u][h]}),l=n&&Object.entries(n).reduce((u,f)=>{let[m,h]=f;return h===void 0||(u[m]=h),u},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((u,f)=>{let{class:m,className:h,...y}=f;return Object.entries(y).every(p=>{let[g,w]=p;return Array.isArray(w)?w.includes({...i,...l}[g]):{...i,...l}[g]===w})?[...u,m,h]:u},[]);return fv(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lw=(...e)=>e.filter((t,n,s)=>!!t&&s.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var i2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=d.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:a,...l},c)=>d.createElement("svg",{ref:c,...i2,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:lw("lucide",r),...l},[...a.map(([u,f])=>d.createElement(u,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=(e,t)=>{const n=d.forwardRef(({className:s,...r},i)=>d.createElement(a2,{ref:i,iconNode:t,className:lw(`lucide-${o2(e)}`,s),...r}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=Ce("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=Ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=Ce("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=Ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=Ce("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=Ce("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=Ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=Ce("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=Ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=Ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=Ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=Ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=Ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=Ce("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=Ce("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=Ce("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=Ce("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=Ce("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=Ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=Ce("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=Ce("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=Ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=Ce("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=Ce("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=Ce("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=Ce("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=Ce("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=Ce("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=Ce("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=Ce("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=Ce("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=Ce("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=Ce("Infinity",[["path",{d:"M12 12c-2-2.67-4-4-6-4a4 4 0 1 0 0 8c2 0 4-1.33 6-4Zm0 0c2 2.67 4 4 6 4a4 4 0 0 0 0-8c-2 0-4 1.33-6 4Z",key:"1z0uae"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=Ce("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=Ce("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=Ce("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=Ce("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=Ce("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=Ce("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=Ce("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=Ce("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=Ce("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=Ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=Ce("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=Ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=Ce("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=Ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=Ce("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=Ce("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=Ce("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=Ce("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=Ce("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=Ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=Ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=Ce("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=Ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=Ce("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=Ce("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=Ce("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=Ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=Ce("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Jm="-",A2=e=>{const t=I2(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:a=>{const l=a.split(Jm);return l[0]===""&&l.length!==1&&l.shift(),kw(l,t)||L2(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&s[a]?[...c,...s[a]]:c}}},kw=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),r=s?kw(e.slice(1),s):void 0;if(r)return r;if(t.validators.length===0)return;const i=e.join(Jm);return(a=t.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},gv=/^\[(.+)\]$/,L2=e=>{if(gv.test(e)){const t=gv.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},I2=e=>{const{theme:t,prefix:n}=e,s={nextPart:new Map,validators:[]};return O2(Object.entries(e.classGroups),n).forEach(([i,a])=>{wh(a,s,i,t)}),s},wh=(e,t,n,s)=>{e.forEach(r=>{if(typeof r=="string"){const i=r===""?t:vv(t,r);i.classGroupId=n;return}if(typeof r=="function"){if($2(r)){wh(r(s),t,n,s);return}t.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([i,a])=>{wh(a,vv(t,i),n,s)})})},vv=(e,t)=>{let n=e;return t.split(Jm).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},$2=e=>e.isThemeGetter,O2=(e,t)=>t?e.map(([n,s])=>{const r=s.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[t+a,l])):i);return[n,r]}):e,D2=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const r=(i,a)=>{n.set(i,a),t++,t>e&&(t=0,s=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=s.get(i))!==void 0)return r(i,a),a},set(i,a){n.has(i)?n.set(i,a):r(i,a)}}},jw="!",B2=e=>{const{separator:t,experimentalParseClassName:n}=e,s=t.length===1,r=t[0],i=t.length,a=l=>{const c=[];let u=0,f=0,m;for(let w=0;w<l.length;w++){let x=l[w];if(u===0){if(x===r&&(s||l.slice(w,w+i)===t)){c.push(l.slice(f,w)),f=w+i;continue}if(x==="/"){m=w;continue}}x==="["?u++:x==="]"&&u--}const h=c.length===0?l:l.substring(f),y=h.startsWith(jw),p=y?h.substring(1):h,g=m&&m>f?m-f:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:p,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:a}):a},F2=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(s=>{s[0]==="["?(t.push(...n.sort(),s),n=[]):n.push(s)}),t.push(...n.sort()),t},z2=e=>({cache:D2(e.cacheSize),parseClassName:B2(e),...A2(e)}),V2=/\s+/,q2=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r}=t,i=[],a=e.trim().split(V2);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:f,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:y}=n(u);let p=!!y,g=s(p?h.substring(0,y):h);if(!g){if(!p){l=u+(l.length>0?" "+l:l);continue}if(g=s(h),!g){l=u+(l.length>0?" "+l:l);continue}p=!1}const w=F2(f).join(":"),x=m?w+jw:w,v=x+g;if(i.includes(v))continue;i.push(v);const b=r(g,p);for(let S=0;S<b.length;++S){const N=b[S];i.push(x+N)}l=u+(l.length>0?" "+l:l)}return l};function K2(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Cw(t))&&(s&&(s+=" "),s+=n);return s}const Cw=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=Cw(e[s]))&&(n&&(n+=" "),n+=t);return n};function W2(e,...t){let n,s,r,i=a;function a(c){const u=t.reduce((f,m)=>m(f),e());return n=z2(u),s=n.cache.get,r=n.cache.set,i=l,l(c)}function l(c){const u=s(c);if(u)return u;const f=q2(c,n);return r(c,f),f}return function(){return i(K2.apply(null,arguments))}}const kt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Ew=/^\[(?:([a-z-]+):)?(.+)\]$/i,U2=/^\d+\/\d+$/,H2=new Set(["px","full","screen"]),G2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Q2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Y2=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,X2=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Z2=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ur=e=>Li(e)||H2.has(e)||U2.test(e),Rr=e=>la(e,"length",iE),Li=e=>!!e&&!Number.isNaN(Number(e)),Ud=e=>la(e,"number",Li),Pa=e=>!!e&&Number.isInteger(Number(e)),J2=e=>e.endsWith("%")&&Li(e.slice(0,-1)),Je=e=>Ew.test(e),Mr=e=>G2.test(e),eE=new Set(["length","size","percentage"]),tE=e=>la(e,eE,Pw),nE=e=>la(e,"position",Pw),sE=new Set(["image","url"]),rE=e=>la(e,sE,lE),oE=e=>la(e,"",aE),Ta=()=>!0,la=(e,t,n)=>{const s=Ew.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):n(s[2]):!1},iE=e=>Q2.test(e)&&!Y2.test(e),Pw=()=>!1,aE=e=>X2.test(e),lE=e=>Z2.test(e),cE=()=>{const e=kt("colors"),t=kt("spacing"),n=kt("blur"),s=kt("brightness"),r=kt("borderColor"),i=kt("borderRadius"),a=kt("borderSpacing"),l=kt("borderWidth"),c=kt("contrast"),u=kt("grayscale"),f=kt("hueRotate"),m=kt("invert"),h=kt("gap"),y=kt("gradientColorStops"),p=kt("gradientColorStopPositions"),g=kt("inset"),w=kt("margin"),x=kt("opacity"),v=kt("padding"),b=kt("saturate"),S=kt("scale"),N=kt("sepia"),j=kt("skew"),k=kt("space"),C=kt("translate"),R=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",Je,t],A=()=>[Je,t],z=()=>["",ur,Rr],_=()=>["auto",Li,Je],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],q=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Je],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[Li,Je];return{cacheSize:500,separator:":",theme:{colors:[Ta],spacing:[ur,Rr],blur:["none","",Mr,Je],brightness:U(),borderColor:[e],borderRadius:["none","","full",Mr,Je],borderSpacing:A(),borderWidth:z(),contrast:U(),grayscale:$(),hueRotate:U(),invert:$(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[J2,Rr],inset:D(),margin:D(),opacity:U(),padding:A(),saturate:U(),scale:U(),sepia:$(),skew:U(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",Je]}],container:["container"],columns:[{columns:[Mr]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),Je]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Pa,Je]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Je]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",Pa,Je]}],"grid-cols":[{"grid-cols":[Ta]}],"col-start-end":[{col:["auto",{span:["full",Pa,Je]},Je]}],"col-start":[{"col-start":_()}],"col-end":[{"col-end":_()}],"grid-rows":[{"grid-rows":[Ta]}],"row-start-end":[{row:["auto",{span:[Pa,Je]},Je]}],"row-start":[{"row-start":_()}],"row-end":[{"row-end":_()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Je]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Je]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Je,t]}],"min-w":[{"min-w":[Je,t,"min","max","fit"]}],"max-w":[{"max-w":[Je,t,"none","full","min","max","fit","prose",{screen:[Mr]},Mr]}],h:[{h:[Je,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Je,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Je,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Je,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Mr,Rr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ud]}],"font-family":[{font:[Ta]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Je]}],"line-clamp":[{"line-clamp":["none",Li,Ud]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ur,Je]}],"list-image":[{"list-image":["none",Je]}],"list-style-type":[{list:["none","disc","decimal",Je]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ur,Rr]}],"underline-offset":[{"underline-offset":["auto",ur,Je]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),nE]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",tE]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},rE]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...q(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:q()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...q()]}],"outline-offset":[{"outline-offset":[ur,Je]}],"outline-w":[{outline:[ur,Rr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[ur,Rr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Mr,oE]}],"shadow-color":[{shadow:[Ta]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Mr,Je]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[m]}],saturate:[{saturate:[b]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Je]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",Je]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",Je]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Pa,Je]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Je]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Je]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Je]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ur,Rr,Ud]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},uE=W2(cE);function Ke(...e){return uE(aw(e))}const dE=r2,Tw=d.forwardRef(({className:e,...t},n)=>o.jsx(ew,{ref:n,className:Ke("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:right-0 sm:flex-col md:max-w-[420px]",e),...t}));Tw.displayName=ew.displayName;const fE=Xu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Rw=d.forwardRef(({className:e,variant:t,...n},s)=>o.jsx(tw,{ref:s,className:Ke(fE({variant:t}),e),...n}));Rw.displayName=tw.displayName;const hE=d.forwardRef(({className:e,...t},n)=>o.jsx(rw,{ref:n,className:Ke("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));hE.displayName=rw.displayName;const Mw=d.forwardRef(({className:e,...t},n)=>o.jsx(ow,{ref:n,className:Ke("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:o.jsx(Do,{className:"h-4 w-4"})}));Mw.displayName=ow.displayName;const _w=d.forwardRef(({className:e,...t},n)=>o.jsx(nw,{ref:n,className:Ke("text-sm font-semibold",e),...t}));_w.displayName=nw.displayName;const Aw=d.forwardRef(({className:e,...t},n)=>o.jsx(sw,{ref:n,className:Ke("text-sm opacity-90",e),...t}));Aw.displayName=sw.displayName;function mE(){const{toasts:e}=Rl();return o.jsxs(dE,{children:[e.map(function({id:t,title:n,description:s,action:r,...i}){return o.jsxs(Rw,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(_w,{children:n}),s&&o.jsx(Aw,{children:s})]}),r,o.jsx(Mw,{})]},t)}),o.jsx(Tw,{})]})}var pE=Mx[" useId ".trim().toString()]||(()=>{}),gE=0;function Zr(e){const[t,n]=d.useState(pE());return ln(()=>{e||n(s=>s??String(gE++))},[e]),e||(t?`radix-${t}`:"")}const vE=["top","right","bottom","left"],no=Math.min,ss=Math.max,pu=Math.round,uc=Math.floor,tr=e=>({x:e,y:e}),xE={left:"right",right:"left",bottom:"top",top:"bottom"},yE={start:"end",end:"start"};function bh(e,t,n){return ss(e,no(t,n))}function Sr(e,t){return typeof e=="function"?e(t):e}function Nr(e){return e.split("-")[0]}function ca(e){return e.split("-")[1]}function ep(e){return e==="x"?"y":"x"}function tp(e){return e==="y"?"height":"width"}function so(e){return["top","bottom"].includes(Nr(e))?"y":"x"}function np(e){return ep(so(e))}function wE(e,t,n){n===void 0&&(n=!1);const s=ca(e),r=np(e),i=tp(r);let a=r==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=gu(a)),[a,gu(a)]}function bE(e){const t=gu(e);return[Sh(e),t,Sh(t)]}function Sh(e){return e.replace(/start|end/g,t=>yE[t])}function SE(e,t,n){const s=["left","right"],r=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:s:t?s:r;case"left":case"right":return t?i:a;default:return[]}}function NE(e,t,n,s){const r=ca(e);let i=SE(Nr(e),n==="start",s);return r&&(i=i.map(a=>a+"-"+r),t&&(i=i.concat(i.map(Sh)))),i}function gu(e){return e.replace(/left|right|bottom|top/g,t=>xE[t])}function kE(e){return{top:0,right:0,bottom:0,left:0,...e}}function Lw(e){return typeof e!="number"?kE(e):{top:e,right:e,bottom:e,left:e}}function vu(e){const{x:t,y:n,width:s,height:r}=e;return{width:s,height:r,top:n,left:t,right:t+s,bottom:n+r,x:t,y:n}}function xv(e,t,n){let{reference:s,floating:r}=e;const i=so(t),a=np(t),l=tp(a),c=Nr(t),u=i==="y",f=s.x+s.width/2-r.width/2,m=s.y+s.height/2-r.height/2,h=s[l]/2-r[l]/2;let y;switch(c){case"top":y={x:f,y:s.y-r.height};break;case"bottom":y={x:f,y:s.y+s.height};break;case"right":y={x:s.x+s.width,y:m};break;case"left":y={x:s.x-r.width,y:m};break;default:y={x:s.x,y:s.y}}switch(ca(t)){case"start":y[a]-=h*(n&&u?-1:1);break;case"end":y[a]+=h*(n&&u?-1:1);break}return y}const jE=async(e,t,n)=>{const{placement:s="bottom",strategy:r="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:r}),{x:f,y:m}=xv(u,s,c),h=s,y={},p=0;for(let g=0;g<l.length;g++){const{name:w,fn:x}=l[g],{x:v,y:b,data:S,reset:N}=await x({x:f,y:m,initialPlacement:s,placement:h,strategy:r,middlewareData:y,rects:u,platform:a,elements:{reference:e,floating:t}});f=v??f,m=b??m,y={...y,[w]:{...y[w],...S}},N&&p<=50&&(p++,typeof N=="object"&&(N.placement&&(h=N.placement),N.rects&&(u=N.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:r}):N.rects),{x:f,y:m}=xv(u,h,c)),g=-1)}return{x:f,y:m,placement:h,strategy:r,middlewareData:y}};async function xl(e,t){var n;t===void 0&&(t={});const{x:s,y:r,platform:i,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:h=!1,padding:y=0}=Sr(t,e),p=Lw(y),w=l[h?m==="floating"?"reference":"floating":m],x=vu(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),v=m==="floating"?{x:s,y:r,width:a.floating.width,height:a.floating.height}:a.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),S=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},N=vu(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:b,strategy:c}):v);return{top:(x.top-N.top+p.top)/S.y,bottom:(N.bottom-x.bottom+p.bottom)/S.y,left:(x.left-N.left+p.left)/S.x,right:(N.right-x.right+p.right)/S.x}}const CE=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:r,rects:i,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:f=0}=Sr(e,t)||{};if(u==null)return{};const m=Lw(f),h={x:n,y:s},y=np(r),p=tp(y),g=await a.getDimensions(u),w=y==="y",x=w?"top":"left",v=w?"bottom":"right",b=w?"clientHeight":"clientWidth",S=i.reference[p]+i.reference[y]-h[y]-i.floating[p],N=h[y]-i.reference[y],j=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let k=j?j[b]:0;(!k||!await(a.isElement==null?void 0:a.isElement(j)))&&(k=l.floating[b]||i.floating[p]);const C=S/2-N/2,R=k/2-g[p]/2-1,P=no(m[x],R),D=no(m[v],R),A=P,z=k-g[p]-D,_=k/2-g[p]/2+C,F=bh(A,_,z),q=!c.arrow&&ca(r)!=null&&_!==F&&i.reference[p]/2-(_<A?P:D)-g[p]/2<0,G=q?_<A?_-A:_-z:0;return{[y]:h[y]+G,data:{[y]:F,centerOffset:_-F-G,...q&&{alignmentOffset:G}},reset:q}}}),EE=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:r,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...w}=Sr(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=Nr(r),v=so(l),b=Nr(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(u.floating)),N=h||(b||!g?[gu(l)]:bE(l)),j=p!=="none";!h&&j&&N.push(...NE(l,g,p,S));const k=[l,...N],C=await xl(t,w),R=[];let P=((s=i.flip)==null?void 0:s.overflows)||[];if(f&&R.push(C[x]),m){const _=wE(r,a,S);R.push(C[_[0]],C[_[1]])}if(P=[...P,{placement:r,overflows:R}],!R.every(_=>_<=0)){var D,A;const _=(((D=i.flip)==null?void 0:D.index)||0)+1,F=k[_];if(F)return{data:{index:_,overflows:P},reset:{placement:F}};let q=(A=P.filter(G=>G.overflows[0]<=0).sort((G,T)=>G.overflows[1]-T.overflows[1])[0])==null?void 0:A.placement;if(!q)switch(y){case"bestFit":{var z;const G=(z=P.filter(T=>{if(j){const $=so(T.placement);return $===v||$==="y"}return!0}).map(T=>[T.placement,T.overflows.filter($=>$>0).reduce(($,Q)=>$+Q,0)]).sort((T,$)=>T[1]-$[1])[0])==null?void 0:z[0];G&&(q=G);break}case"initialPlacement":q=l;break}if(r!==q)return{reset:{placement:q}}}return{}}}};function yv(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function wv(e){return vE.some(t=>e[t]>=0)}const PE=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...r}=Sr(e,t);switch(s){case"referenceHidden":{const i=await xl(t,{...r,elementContext:"reference"}),a=yv(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:wv(a)}}}case"escaped":{const i=await xl(t,{...r,altBoundary:!0}),a=yv(i,n.floating);return{data:{escapedOffsets:a,escaped:wv(a)}}}default:return{}}}}};async function TE(e,t){const{placement:n,platform:s,elements:r}=e,i=await(s.isRTL==null?void 0:s.isRTL(r.floating)),a=Nr(n),l=ca(n),c=so(n)==="y",u=["left","top"].includes(a)?-1:1,f=i&&c?-1:1,m=Sr(t,e);let{mainAxis:h,crossAxis:y,alignmentAxis:p}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof p=="number"&&(y=l==="end"?p*-1:p),c?{x:y*f,y:h*u}:{x:h*u,y:y*f}}const RE=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:r,y:i,placement:a,middlewareData:l}=t,c=await TE(t,e);return a===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:r+c.x,y:i+c.y,data:{...c,placement:a}}}}},ME=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:r}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:w=>{let{x,y:v}=w;return{x,y:v}}},...c}=Sr(e,t),u={x:n,y:s},f=await xl(t,c),m=so(Nr(r)),h=ep(m);let y=u[h],p=u[m];if(i){const w=h==="y"?"top":"left",x=h==="y"?"bottom":"right",v=y+f[w],b=y-f[x];y=bh(v,y,b)}if(a){const w=m==="y"?"top":"left",x=m==="y"?"bottom":"right",v=p+f[w],b=p-f[x];p=bh(v,p,b)}const g=l.fn({...t,[h]:y,[m]:p});return{...g,data:{x:g.x-n,y:g.y-s,enabled:{[h]:i,[m]:a}}}}}},_E=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:r,rects:i,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Sr(e,t),f={x:n,y:s},m=so(r),h=ep(m);let y=f[h],p=f[m];const g=Sr(l,t),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=h==="y"?"height":"width",S=i.reference[h]-i.floating[b]+w.mainAxis,N=i.reference[h]+i.reference[b]-w.mainAxis;y<S?y=S:y>N&&(y=N)}if(u){var x,v;const b=h==="y"?"width":"height",S=["top","left"].includes(Nr(r)),N=i.reference[m]-i.floating[b]+(S&&((x=a.offset)==null?void 0:x[m])||0)+(S?0:w.crossAxis),j=i.reference[m]+i.reference[b]+(S?0:((v=a.offset)==null?void 0:v[m])||0)-(S?w.crossAxis:0);p<N?p=N:p>j&&(p=j)}return{[h]:y,[m]:p}}}},AE=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:r,rects:i,platform:a,elements:l}=t,{apply:c=()=>{},...u}=Sr(e,t),f=await xl(t,u),m=Nr(r),h=ca(r),y=so(r)==="y",{width:p,height:g}=i.floating;let w,x;m==="top"||m==="bottom"?(w=m,x=h===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(x=m,w=h==="end"?"top":"bottom");const v=g-f.top-f.bottom,b=p-f.left-f.right,S=no(g-f[w],v),N=no(p-f[x],b),j=!t.middlewareData.shift;let k=S,C=N;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(C=b),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(k=v),j&&!h){const P=ss(f.left,0),D=ss(f.right,0),A=ss(f.top,0),z=ss(f.bottom,0);y?C=p-2*(P!==0||D!==0?P+D:ss(f.left,f.right)):k=g-2*(A!==0||z!==0?A+z:ss(f.top,f.bottom))}await c({...t,availableWidth:C,availableHeight:k});const R=await a.getDimensions(l.floating);return p!==R.width||g!==R.height?{reset:{rects:!0}}:{}}}};function td(){return typeof window<"u"}function ua(e){return Iw(e)?(e.nodeName||"").toLowerCase():"#document"}function is(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function rr(e){var t;return(t=(Iw(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Iw(e){return td()?e instanceof Node||e instanceof is(e).Node:!1}function _s(e){return td()?e instanceof Element||e instanceof is(e).Element:!1}function nr(e){return td()?e instanceof HTMLElement||e instanceof is(e).HTMLElement:!1}function bv(e){return!td()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof is(e).ShadowRoot}function Il(e){const{overflow:t,overflowX:n,overflowY:s,display:r}=As(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(r)}function LE(e){return["table","td","th"].includes(ua(e))}function nd(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function sp(e){const t=rp(),n=_s(e)?As(e):e;return["transform","translate","scale","rotate","perspective"].some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(n.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(n.contain||"").includes(s))}function IE(e){let t=ro(e);for(;nr(t)&&!Gi(t);){if(sp(t))return t;if(nd(t))return null;t=ro(t)}return null}function rp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Gi(e){return["html","body","#document"].includes(ua(e))}function As(e){return is(e).getComputedStyle(e)}function sd(e){return _s(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ro(e){if(ua(e)==="html")return e;const t=e.assignedSlot||e.parentNode||bv(e)&&e.host||rr(e);return bv(t)?t.host:t}function $w(e){const t=ro(e);return Gi(t)?e.ownerDocument?e.ownerDocument.body:e.body:nr(t)&&Il(t)?t:$w(t)}function yl(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=$w(e),i=r===((s=e.ownerDocument)==null?void 0:s.body),a=is(r);if(i){const l=Nh(a);return t.concat(a,a.visualViewport||[],Il(r)?r:[],l&&n?yl(l):[])}return t.concat(r,yl(r,[],n))}function Nh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ow(e){const t=As(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const r=nr(e),i=r?e.offsetWidth:n,a=r?e.offsetHeight:s,l=pu(n)!==i||pu(s)!==a;return l&&(n=i,s=a),{width:n,height:s,$:l}}function op(e){return _s(e)?e:e.contextElement}function Ii(e){const t=op(e);if(!nr(t))return tr(1);const n=t.getBoundingClientRect(),{width:s,height:r,$:i}=Ow(t);let a=(i?pu(n.width):n.width)/s,l=(i?pu(n.height):n.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const $E=tr(0);function Dw(e){const t=is(e);return!rp()||!t.visualViewport?$E:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function OE(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==is(e)?!1:t}function Bo(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=op(e);let a=tr(1);t&&(s?_s(s)&&(a=Ii(s)):a=Ii(e));const l=OE(i,n,s)?Dw(i):tr(0);let c=(r.left+l.x)/a.x,u=(r.top+l.y)/a.y,f=r.width/a.x,m=r.height/a.y;if(i){const h=is(i),y=s&&_s(s)?is(s):s;let p=h,g=Nh(p);for(;g&&s&&y!==p;){const w=Ii(g),x=g.getBoundingClientRect(),v=As(g),b=x.left+(g.clientLeft+parseFloat(v.paddingLeft))*w.x,S=x.top+(g.clientTop+parseFloat(v.paddingTop))*w.y;c*=w.x,u*=w.y,f*=w.x,m*=w.y,c+=b,u+=S,p=is(g),g=Nh(p)}}return vu({width:f,height:m,x:c,y:u})}function ip(e,t){const n=sd(e).scrollLeft;return t?t.left+n:Bo(rr(e)).left+n}function Bw(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),r=s.left+t.scrollLeft-(n?0:ip(e,s)),i=s.top+t.scrollTop;return{x:r,y:i}}function DE(e){let{elements:t,rect:n,offsetParent:s,strategy:r}=e;const i=r==="fixed",a=rr(s),l=t?nd(t.floating):!1;if(s===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=tr(1);const f=tr(0),m=nr(s);if((m||!m&&!i)&&((ua(s)!=="body"||Il(a))&&(c=sd(s)),nr(s))){const y=Bo(s);u=Ii(s),f.x=y.x+s.clientLeft,f.y=y.y+s.clientTop}const h=a&&!m&&!i?Bw(a,c,!0):tr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x+h.x,y:n.y*u.y-c.scrollTop*u.y+f.y+h.y}}function BE(e){return Array.from(e.getClientRects())}function FE(e){const t=rr(e),n=sd(e),s=e.ownerDocument.body,r=ss(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=ss(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let a=-n.scrollLeft+ip(e);const l=-n.scrollTop;return As(s).direction==="rtl"&&(a+=ss(t.clientWidth,s.clientWidth)-r),{width:r,height:i,x:a,y:l}}function zE(e,t){const n=is(e),s=rr(e),r=n.visualViewport;let i=s.clientWidth,a=s.clientHeight,l=0,c=0;if(r){i=r.width,a=r.height;const u=rp();(!u||u&&t==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:a,x:l,y:c}}function VE(e,t){const n=Bo(e,!0,t==="fixed"),s=n.top+e.clientTop,r=n.left+e.clientLeft,i=nr(e)?Ii(e):tr(1),a=e.clientWidth*i.x,l=e.clientHeight*i.y,c=r*i.x,u=s*i.y;return{width:a,height:l,x:c,y:u}}function Sv(e,t,n){let s;if(t==="viewport")s=zE(e,n);else if(t==="document")s=FE(rr(e));else if(_s(t))s=VE(t,n);else{const r=Dw(e);s={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return vu(s)}function Fw(e,t){const n=ro(e);return n===t||!_s(n)||Gi(n)?!1:As(n).position==="fixed"||Fw(n,t)}function qE(e,t){const n=t.get(e);if(n)return n;let s=yl(e,[],!1).filter(l=>_s(l)&&ua(l)!=="body"),r=null;const i=As(e).position==="fixed";let a=i?ro(e):e;for(;_s(a)&&!Gi(a);){const l=As(a),c=sp(a);!c&&l.position==="fixed"&&(r=null),(i?!c&&!r:!c&&l.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Il(a)&&!c&&Fw(e,a))?s=s.filter(f=>f!==a):r=l,a=ro(a)}return t.set(e,s),s}function KE(e){let{element:t,boundary:n,rootBoundary:s,strategy:r}=e;const a=[...n==="clippingAncestors"?nd(t)?[]:qE(t,this._c):[].concat(n),s],l=a[0],c=a.reduce((u,f)=>{const m=Sv(t,f,r);return u.top=ss(m.top,u.top),u.right=no(m.right,u.right),u.bottom=no(m.bottom,u.bottom),u.left=ss(m.left,u.left),u},Sv(t,l,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function WE(e){const{width:t,height:n}=Ow(e);return{width:t,height:n}}function UE(e,t,n){const s=nr(t),r=rr(t),i=n==="fixed",a=Bo(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=tr(0);if(s||!s&&!i)if((ua(t)!=="body"||Il(r))&&(l=sd(t)),s){const h=Bo(t,!0,i,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else r&&(c.x=ip(r));const u=r&&!s&&!i?Bw(r,l):tr(0),f=a.left+l.scrollLeft-c.x-u.x,m=a.top+l.scrollTop-c.y-u.y;return{x:f,y:m,width:a.width,height:a.height}}function Hd(e){return As(e).position==="static"}function Nv(e,t){if(!nr(e)||As(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return rr(e)===n&&(n=n.ownerDocument.body),n}function zw(e,t){const n=is(e);if(nd(e))return n;if(!nr(e)){let r=ro(e);for(;r&&!Gi(r);){if(_s(r)&&!Hd(r))return r;r=ro(r)}return n}let s=Nv(e,t);for(;s&&LE(s)&&Hd(s);)s=Nv(s,t);return s&&Gi(s)&&Hd(s)&&!sp(s)?n:s||IE(e)||n}const HE=async function(e){const t=this.getOffsetParent||zw,n=this.getDimensions,s=await n(e.floating);return{reference:UE(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function GE(e){return As(e).direction==="rtl"}const QE={convertOffsetParentRelativeRectToViewportRelativeRect:DE,getDocumentElement:rr,getClippingRect:KE,getOffsetParent:zw,getElementRects:HE,getClientRects:BE,getDimensions:WE,getScale:Ii,isElement:_s,isRTL:GE};function Vw(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function YE(e,t){let n=null,s;const r=rr(e);function i(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:f,top:m,width:h,height:y}=u;if(l||t(),!h||!y)return;const p=uc(m),g=uc(r.clientWidth-(f+h)),w=uc(r.clientHeight-(m+y)),x=uc(f),b={rootMargin:-p+"px "+-g+"px "+-w+"px "+-x+"px",threshold:ss(0,no(1,c))||1};let S=!0;function N(j){const k=j[0].intersectionRatio;if(k!==c){if(!S)return a();k?a(!1,k):s=setTimeout(()=>{a(!1,1e-7)},1e3)}k===1&&!Vw(u,e.getBoundingClientRect())&&a(),S=!1}try{n=new IntersectionObserver(N,{...b,root:r.ownerDocument})}catch{n=new IntersectionObserver(N,b)}n.observe(e)}return a(!0),i}function XE(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,u=op(e),f=r||i?[...u?yl(u):[],...yl(t)]:[];f.forEach(x=>{r&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const m=u&&l?YE(u,n):null;let h=-1,y=null;a&&(y=new ResizeObserver(x=>{let[v]=x;v&&v.target===u&&y&&(y.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=y)==null||b.observe(t)})),n()}),u&&!c&&y.observe(u),y.observe(t));let p,g=c?Bo(e):null;c&&w();function w(){const x=Bo(e);g&&!Vw(g,x)&&n(),g=x,p=requestAnimationFrame(w)}return n(),()=>{var x;f.forEach(v=>{r&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),m==null||m(),(x=y)==null||x.disconnect(),y=null,c&&cancelAnimationFrame(p)}}const ZE=RE,JE=ME,eP=EE,tP=AE,nP=PE,kv=CE,sP=_E,rP=(e,t,n)=>{const s=new Map,r={platform:QE,...n},i={...r.platform,_c:s};return jE(e,t,{...r,platform:i})};var Dc=typeof document<"u"?d.useLayoutEffect:d.useEffect;function xu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!xu(e[s],t[s]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,r[s]))return!1;for(s=n;s--!==0;){const i=r[s];if(!(i==="_owner"&&e.$$typeof)&&!xu(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function qw(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function jv(e,t){const n=qw(e);return Math.round(t*n)/n}function Gd(e){const t=d.useRef(e);return Dc(()=>{t.current=e}),t}function oP(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:r,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[f,m]=d.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,y]=d.useState(s);xu(h,s)||y(s);const[p,g]=d.useState(null),[w,x]=d.useState(null),v=d.useCallback(T=>{T!==j.current&&(j.current=T,g(T))},[]),b=d.useCallback(T=>{T!==k.current&&(k.current=T,x(T))},[]),S=i||p,N=a||w,j=d.useRef(null),k=d.useRef(null),C=d.useRef(f),R=c!=null,P=Gd(c),D=Gd(r),A=Gd(u),z=d.useCallback(()=>{if(!j.current||!k.current)return;const T={placement:t,strategy:n,middleware:h};D.current&&(T.platform=D.current),rP(j.current,k.current,T).then($=>{const Q={...$,isPositioned:A.current!==!1};_.current&&!xu(C.current,Q)&&(C.current=Q,Go.flushSync(()=>{m(Q)}))})},[h,t,n,D,A]);Dc(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,m(T=>({...T,isPositioned:!1})))},[u]);const _=d.useRef(!1);Dc(()=>(_.current=!0,()=>{_.current=!1}),[]),Dc(()=>{if(S&&(j.current=S),N&&(k.current=N),S&&N){if(P.current)return P.current(S,N,z);z()}},[S,N,z,P,R]);const F=d.useMemo(()=>({reference:j,floating:k,setReference:v,setFloating:b}),[v,b]),q=d.useMemo(()=>({reference:S,floating:N}),[S,N]),G=d.useMemo(()=>{const T={position:n,left:0,top:0};if(!q.floating)return T;const $=jv(q.floating,f.x),Q=jv(q.floating,f.y);return l?{...T,transform:"translate("+$+"px, "+Q+"px)",...qw(q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:Q}},[n,l,q.floating,f.x,f.y]);return d.useMemo(()=>({...f,update:z,refs:F,elements:q,floatingStyles:G}),[f,z,F,q,G])}const iP=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:r}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?kv({element:s.current,padding:r}).fn(n):{}:s?kv({element:s,padding:r}).fn(n):{}}}},aP=(e,t)=>({...ZE(e),options:[e,t]}),lP=(e,t)=>({...JE(e),options:[e,t]}),cP=(e,t)=>({...sP(e),options:[e,t]}),uP=(e,t)=>({...eP(e),options:[e,t]}),dP=(e,t)=>({...tP(e),options:[e,t]}),fP=(e,t)=>({...nP(e),options:[e,t]}),hP=(e,t)=>({...iP(e),options:[e,t]});var mP="Arrow",Kw=d.forwardRef((e,t)=>{const{children:n,width:s=10,height:r=5,...i}=e;return o.jsx(Be.svg,{...i,ref:t,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});Kw.displayName=mP;var pP=Kw;function ap(e){const[t,n]=d.useState(void 0);return ln(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;n({width:a,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var lp="Popper",[Ww,rd]=Yn(lp),[gP,Uw]=Ww(lp),Hw=e=>{const{__scopePopper:t,children:n}=e,[s,r]=d.useState(null);return o.jsx(gP,{scope:t,anchor:s,onAnchorChange:r,children:n})};Hw.displayName=lp;var Gw="PopperAnchor",Qw=d.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...r}=e,i=Uw(Gw,n),a=d.useRef(null),l=Ye(t,a);return d.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||a.current)}),s?null:o.jsx(Be.div,{...r,ref:l})});Qw.displayName=Gw;var cp="PopperContent",[vP,xP]=Ww(cp),Yw=d.forwardRef((e,t)=>{var V,X,ee,O,re,de;const{__scopePopper:n,side:s="bottom",sideOffset:r=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:h=!1,updatePositionStrategy:y="optimized",onPlaced:p,...g}=e,w=Uw(cp,n),[x,v]=d.useState(null),b=Ye(t,ye=>v(ye)),[S,N]=d.useState(null),j=ap(S),k=(j==null?void 0:j.width)??0,C=(j==null?void 0:j.height)??0,R=s+(i!=="center"?"-"+i:""),P=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},D=Array.isArray(u)?u:[u],A=D.length>0,z={padding:P,boundary:D.filter(wP),altBoundary:A},{refs:_,floatingStyles:F,placement:q,isPositioned:G,middlewareData:T}=oP({strategy:"fixed",placement:R,whileElementsMounted:(...ye)=>XE(...ye,{animationFrame:y==="always"}),elements:{reference:w.anchor},middleware:[aP({mainAxis:r+C,alignmentAxis:a}),c&&lP({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?cP():void 0,...z}),c&&uP({...z}),dP({...z,apply:({elements:ye,rects:Le,availableWidth:ke,availableHeight:ae})=>{const{width:Se,height:Te}=Le.reference,De=ye.floating.style;De.setProperty("--radix-popper-available-width",`${ke}px`),De.setProperty("--radix-popper-available-height",`${ae}px`),De.setProperty("--radix-popper-anchor-width",`${Se}px`),De.setProperty("--radix-popper-anchor-height",`${Te}px`)}}),S&&hP({element:S,padding:l}),bP({arrowWidth:k,arrowHeight:C}),h&&fP({strategy:"referenceHidden",...z})]}),[$,Q]=Jw(q),U=Kt(p);ln(()=>{G&&(U==null||U())},[G,U]);const ve=(V=T.arrow)==null?void 0:V.x,H=(X=T.arrow)==null?void 0:X.y,xe=((ee=T.arrow)==null?void 0:ee.centerOffset)!==0,[ie,se]=d.useState();return ln(()=>{x&&se(window.getComputedStyle(x).zIndex)},[x]),o.jsx("div",{ref:_.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:G?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ie,"--radix-popper-transform-origin":[(O=T.transformOrigin)==null?void 0:O.x,(re=T.transformOrigin)==null?void 0:re.y].join(" "),...((de=T.hide)==null?void 0:de.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(vP,{scope:n,placedSide:$,onArrowChange:N,arrowX:ve,arrowY:H,shouldHideArrow:xe,children:o.jsx(Be.div,{"data-side":$,"data-align":Q,...g,ref:b,style:{...g.style,animation:G?void 0:"none"}})})})});Yw.displayName=cp;var Xw="PopperArrow",yP={top:"bottom",right:"left",bottom:"top",left:"right"},Zw=d.forwardRef(function(t,n){const{__scopePopper:s,...r}=t,i=xP(Xw,s),a=yP[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(pP,{...r,ref:n,style:{...r.style,display:"block"}})})});Zw.displayName=Xw;function wP(e){return e!==null}var bP=e=>({name:"transformOrigin",options:e,fn(t){var w,x,v;const{placement:n,rects:s,middlewareData:r}=t,a=((w=r.arrow)==null?void 0:w.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,f]=Jw(n),m={start:"0%",center:"50%",end:"100%"}[f],h=(((x=r.arrow)==null?void 0:x.x)??0)+l/2,y=(((v=r.arrow)==null?void 0:v.y)??0)+c/2;let p="",g="";return u==="bottom"?(p=a?m:`${h}px`,g=`${-c}px`):u==="top"?(p=a?m:`${h}px`,g=`${s.floating.height+c}px`):u==="right"?(p=`${-c}px`,g=a?m:`${y}px`):u==="left"&&(p=`${s.floating.width+c}px`,g=a?m:`${y}px`),{data:{x:p,y:g}}}});function Jw(e){const[t,n="center"]=e.split("-");return[t,n]}var SP=Hw,e1=Qw,t1=Yw,n1=Zw,[od,s3]=Yn("Tooltip",[rd]),up=rd(),s1="TooltipProvider",NP=700,Cv="tooltip.open",[kP,r1]=od(s1),o1=e=>{const{__scopeTooltip:t,delayDuration:n=NP,skipDelayDuration:s=300,disableHoverableContent:r=!1,children:i}=e,a=d.useRef(!0),l=d.useRef(!1),c=d.useRef(0);return d.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),o.jsx(kP,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:d.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:d.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:d.useCallback(u=>{l.current=u},[]),disableHoverableContent:r,children:i})};o1.displayName=s1;var i1="Tooltip",[r3,id]=od(i1),kh="TooltipTrigger",jP=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,r=id(kh,n),i=r1(kh,n),a=up(n),l=d.useRef(null),c=Ye(t,l,r.onTriggerChange),u=d.useRef(!1),f=d.useRef(!1),m=d.useCallback(()=>u.current=!1,[]);return d.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),o.jsx(e1,{asChild:!0,...a,children:o.jsx(Be.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...s,ref:c,onPointerMove:Pe(e.onPointerMove,h=>{h.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(r.onTriggerEnter(),f.current=!0)}),onPointerLeave:Pe(e.onPointerLeave,()=>{r.onTriggerLeave(),f.current=!1}),onPointerDown:Pe(e.onPointerDown,()=>{r.open&&r.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Pe(e.onFocus,()=>{u.current||r.onOpen()}),onBlur:Pe(e.onBlur,r.onClose),onClick:Pe(e.onClick,r.onClose)})})});jP.displayName=kh;var CP="TooltipPortal",[o3,EP]=od(CP,{forceMount:void 0}),Qi="TooltipContent",a1=d.forwardRef((e,t)=>{const n=EP(Qi,e.__scopeTooltip),{forceMount:s=n.forceMount,side:r="top",...i}=e,a=id(Qi,e.__scopeTooltip);return o.jsx(zs,{present:s||a.open,children:a.disableHoverableContent?o.jsx(l1,{side:r,...i,ref:t}):o.jsx(PP,{side:r,...i,ref:t})})}),PP=d.forwardRef((e,t)=>{const n=id(Qi,e.__scopeTooltip),s=r1(Qi,e.__scopeTooltip),r=d.useRef(null),i=Ye(t,r),[a,l]=d.useState(null),{trigger:c,onClose:u}=n,f=r.current,{onPointerInTransitChange:m}=s,h=d.useCallback(()=>{l(null),m(!1)},[m]),y=d.useCallback((p,g)=>{const w=p.currentTarget,x={x:p.clientX,y:p.clientY},v=AP(x,w.getBoundingClientRect()),b=LP(x,v),S=IP(g.getBoundingClientRect()),N=OP([...b,...S]);l(N),m(!0)},[m]);return d.useEffect(()=>()=>h(),[h]),d.useEffect(()=>{if(c&&f){const p=w=>y(w,f),g=w=>y(w,c);return c.addEventListener("pointerleave",p),f.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",p),f.removeEventListener("pointerleave",g)}}},[c,f,y,h]),d.useEffect(()=>{if(a){const p=g=>{const w=g.target,x={x:g.clientX,y:g.clientY},v=(c==null?void 0:c.contains(w))||(f==null?void 0:f.contains(w)),b=!$P(x,a);v?h():b&&(h(),u())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[c,f,a,u,h]),o.jsx(l1,{...e,ref:i})}),[TP,RP]=od(i1,{isInside:!1}),MP=$y("TooltipContent"),l1=d.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":r,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=e,c=id(Qi,n),u=up(n),{onClose:f}=c;return d.useEffect(()=>(document.addEventListener(Cv,f),()=>document.removeEventListener(Cv,f)),[f]),d.useEffect(()=>{if(c.trigger){const m=h=>{const y=h.target;y!=null&&y.contains(c.trigger)&&f()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,f]),o.jsx(Ml,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:m=>m.preventDefault(),onDismiss:f,children:o.jsxs(t1,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(MP,{children:s}),o.jsx(TP,{scope:n,isInside:!0,children:o.jsx(FC,{id:c.contentId,role:"tooltip",children:r||s})})]})})});a1.displayName=Qi;var c1="TooltipArrow",_P=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,r=up(n);return RP(c1,n).isInside?null:o.jsx(n1,{...r,...s,ref:t})});_P.displayName=c1;function AP(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,s,r,i)){case i:return"left";case r:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function LP(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return s}function IP(e){const{top:t,right:n,bottom:s,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:s},{x:r,y:s}]}function $P(e,t){const{x:n,y:s}=e;let r=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const l=t[i].x,c=t[i].y,u=t[a].x,f=t[a].y;c>s!=f>s&&n<(u-l)*(s-c)/(f-c)+l&&(r=!r)}return r}function OP(e){const t=e.slice();return t.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),DP(t)}function DP(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const r=e[s];for(;t.length>=2;){const i=t[t.length-1],a=t[t.length-2];if((i.x-a.x)*(r.y-a.y)>=(i.y-a.y)*(r.x-a.x))t.pop();else break}t.push(r)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const r=e[s];for(;n.length>=2;){const i=n[n.length-1],a=n[n.length-2];if((i.x-a.x)*(r.y-a.y)>=(i.y-a.y)*(r.x-a.x))n.pop();else break}n.push(r)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var BP=o1,u1=a1;const FP=BP,zP=d.forwardRef(({className:e,sideOffset:t=4,...n},s)=>o.jsx(u1,{ref:s,sideOffset:t,className:Ke("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));zP.displayName=u1.displayName;const VP={theme:"dark",setTheme:()=>null},d1=d.createContext(VP);function qP({children:e,defaultTheme:t="dark",storageKey:n="simul-chess-theme",...s}){const[r,i]=d.useState(()=>typeof window>"u"?t:localStorage.getItem(n)||t);d.useEffect(()=>{const l=window.document.documentElement;l.classList.remove("light","dark"),l.classList.add(r)},[r]);const a={theme:r,setTheme:l=>{localStorage.setItem(n,l),i(l)}};return o.jsx(d1.Provider,{...s,value:a,children:e})}const KP=()=>{const e=d.useContext(d1);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},dp=Xu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Y=d.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...r},i)=>{const a=s?yC:"button";return o.jsx(a,{className:Ke(dp({variant:t,size:n,className:e})),ref:i,...r})});Y.displayName="Button";function WP(){const{theme:e,setTheme:t}=KP();return o.jsxs(Y,{variant:"ghost",size:"icon",onClick:()=>t(e==="light"?"dark":"light"),"data-testid":"button-theme-toggle",children:[o.jsx(M2,{className:"h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),o.jsx(vw,{className:"absolute h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),o.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function fp(e){const t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var hp="Switch",[UP,i3]=Yn(hp),[HP,GP]=UP(hp),f1=d.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:r,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:u,form:f,...m}=e,[h,y]=d.useState(null),p=Ye(t,b=>y(b)),g=d.useRef(!1),w=h?f||!!h.closest("form"):!0,[x=!1,v]=Oo({prop:r,defaultProp:i,onChange:u});return o.jsxs(HP,{scope:n,checked:x,disabled:l,children:[o.jsx(Be.button,{type:"button",role:"switch","aria-checked":x,"aria-required":a,"data-state":p1(x),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:p,onClick:Pe(e.onClick,b=>{v(S=>!S),w&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})}),w&&o.jsx(QP,{control:h,bubbles:!g.current,name:s,value:c,checked:x,required:a,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});f1.displayName=hp;var h1="SwitchThumb",m1=d.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,r=GP(h1,n);return o.jsx(Be.span,{"data-state":p1(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:t})});m1.displayName=h1;var QP=e=>{const{control:t,checked:n,bubbles:s=!0,...r}=e,i=d.useRef(null),a=fp(n),l=ap(t);return d.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==n&&m){const h=new Event("click",{bubbles:s});m.call(c,n),c.dispatchEvent(h)}},[a,n,s]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:i,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function p1(e){return e?"checked":"unchecked"}var g1=f1,YP=m1;const Sn=d.forwardRef(({className:e,...t},n)=>o.jsx(g1,{className:Ke("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:o.jsx(YP,{className:Ke("pointer-events-none block h-5 w-5 rounded-full bg-stone-300 dark:bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Sn.displayName=g1.displayName;var XP="Label",v1=d.forwardRef((e,t)=>o.jsx(Be.label,{...e,ref:t,onMouseDown:n=>{var r;n.target.closest("button, input, select, textarea")||((r=e.onMouseDown)==null||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));v1.displayName=XP;var x1=v1;const ZP=Xu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Vt=d.forwardRef(({className:e,...t},n)=>o.jsx(x1,{ref:n,className:Ke(ZP(),e),...t}));Vt.displayName=x1.displayName;var Qd="focusScope.autoFocusOnMount",Yd="focusScope.autoFocusOnUnmount",Ev={bubbles:!1,cancelable:!0},JP="FocusScope",mp=d.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...a}=e,[l,c]=d.useState(null),u=Kt(r),f=Kt(i),m=d.useRef(null),h=Ye(t,g=>c(g)),y=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(s){let g=function(b){if(y.paused||!l)return;const S=b.target;l.contains(S)?m.current=S:Ir(m.current,{select:!0})},w=function(b){if(y.paused||!l)return;const S=b.relatedTarget;S!==null&&(l.contains(S)||Ir(m.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const N of b)N.removedNodes.length>0&&Ir(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const v=new MutationObserver(x);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),v.disconnect()}}},[s,l,y.paused]),d.useEffect(()=>{if(l){Tv.add(y);const g=document.activeElement;if(!l.contains(g)){const x=new CustomEvent(Qd,Ev);l.addEventListener(Qd,u),l.dispatchEvent(x),x.defaultPrevented||(eT(oT(y1(l)),{select:!0}),document.activeElement===g&&Ir(l))}return()=>{l.removeEventListener(Qd,u),setTimeout(()=>{const x=new CustomEvent(Yd,Ev);l.addEventListener(Yd,f),l.dispatchEvent(x),x.defaultPrevented||Ir(g??document.body,{select:!0}),l.removeEventListener(Yd,f),Tv.remove(y)},0)}}},[l,u,f,y]);const p=d.useCallback(g=>{if(!n&&!s||y.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(w&&x){const v=g.currentTarget,[b,S]=tT(v);b&&S?!g.shiftKey&&x===S?(g.preventDefault(),n&&Ir(b,{select:!0})):g.shiftKey&&x===b&&(g.preventDefault(),n&&Ir(S,{select:!0})):x===v&&g.preventDefault()}},[n,s,y.paused]);return o.jsx(Be.div,{tabIndex:-1,...a,ref:h,onKeyDown:p})});mp.displayName=JP;function eT(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(Ir(s,{select:t}),document.activeElement!==n)return}function tT(e){const t=y1(e),n=Pv(t,e),s=Pv(t.reverse(),e);return[n,s]}function y1(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Pv(e,t){for(const n of e)if(!nT(n,{upTo:t}))return n}function nT(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function sT(e){return e instanceof HTMLInputElement&&"select"in e}function Ir(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&sT(e)&&t&&e.select()}}var Tv=rT();function rT(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Rv(e,t),e.unshift(t)},remove(t){var n;e=Rv(e,t),(n=e[0])==null||n.resume()}}}function Rv(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function oT(e){return e.filter(t=>t.tagName!=="A")}var Xd=0;function w1(){d.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Mv()),document.body.insertAdjacentElement("beforeend",e[1]??Mv()),Xd++,()=>{Xd===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Xd--}},[])}function Mv(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ys=function(){return Ys=Object.assign||function(t){for(var n,s=1,r=arguments.length;s<r;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ys.apply(this,arguments)};function b1(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]]);return n}function iT(e,t,n){if(n||arguments.length===2)for(var s=0,r=t.length,i;s<r;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}var Bc="right-scroll-bar-position",Fc="width-before-scroll-bar",aT="with-scroll-bars-hidden",lT="--removed-body-scroll-bar-size";function Zd(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function cT(e,t){var n=d.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var r=n.value;r!==s&&(n.value=s,n.callback(s,r))}}}})[0];return n.callback=t,n.facade}var uT=typeof window<"u"?d.useLayoutEffect:d.useEffect,_v=new WeakMap;function dT(e,t){var n=cT(null,function(s){return e.forEach(function(r){return Zd(r,s)})});return uT(function(){var s=_v.get(n);if(s){var r=new Set(s),i=new Set(e),a=n.current;r.forEach(function(l){i.has(l)||Zd(l,null)}),i.forEach(function(l){r.has(l)||Zd(l,a)})}_v.set(n,e)},[e]),n}function fT(e){return e}function hT(e,t){t===void 0&&(t=fT);var n=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var a=t(i,s);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(s=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){s=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var f=a;a=[],f.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(f){a.push(f),u()},filter:function(f){return a=a.filter(f),n}}}};return r}function mT(e){e===void 0&&(e={});var t=hT(null);return t.options=Ys({async:!0,ssr:!1},e),t}var S1=function(e){var t=e.sideCar,n=b1(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return d.createElement(s,Ys({},n))};S1.isSideCarExport=!0;function pT(e,t){return e.useMedium(t),S1}var N1=mT(),Jd=function(){},ad=d.forwardRef(function(e,t){var n=d.useRef(null),s=d.useState({onScrollCapture:Jd,onWheelCapture:Jd,onTouchMoveCapture:Jd}),r=s[0],i=s[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,m=e.shards,h=e.sideCar,y=e.noIsolation,p=e.inert,g=e.allowPinchZoom,w=e.as,x=w===void 0?"div":w,v=e.gapMode,b=b1(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,N=dT([n,t]),j=Ys(Ys({},b),r);return d.createElement(d.Fragment,null,f&&d.createElement(S,{sideCar:N1,removeScrollBar:u,shards:m,noIsolation:y,inert:p,setCallbacks:i,allowPinchZoom:!!g,lockRef:n,gapMode:v}),a?d.cloneElement(d.Children.only(l),Ys(Ys({},j),{ref:N})):d.createElement(x,Ys({},j,{className:c,ref:N}),l))});ad.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ad.classNames={fullWidth:Fc,zeroRight:Bc};var gT=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function vT(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=gT();return t&&e.setAttribute("nonce",t),e}function xT(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function yT(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var wT=function(){var e=0,t=null;return{add:function(n){e==0&&(t=vT())&&(xT(t,n),yT(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},bT=function(){var e=wT();return function(t,n){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},k1=function(){var e=bT(),t=function(n){var s=n.styles,r=n.dynamic;return e(s,r),null};return t},ST={left:0,top:0,right:0,gap:0},ef=function(e){return parseInt(e||"",10)||0},NT=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],r=t[e==="padding"?"paddingRight":"marginRight"];return[ef(n),ef(s),ef(r)]},kT=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return ST;var t=NT(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},jT=k1(),$i="data-scroll-locked",CT=function(e,t,n,s){var r=e.left,i=e.top,a=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(aT,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat($i,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Bc,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Fc,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Bc," .").concat(Bc,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Fc," .").concat(Fc,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat($i,`] {
    `).concat(lT,": ").concat(l,`px;
  }
`)},Av=function(){var e=parseInt(document.body.getAttribute($i)||"0",10);return isFinite(e)?e:0},ET=function(){d.useEffect(function(){return document.body.setAttribute($i,(Av()+1).toString()),function(){var e=Av()-1;e<=0?document.body.removeAttribute($i):document.body.setAttribute($i,e.toString())}},[])},PT=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,r=s===void 0?"margin":s;ET();var i=d.useMemo(function(){return kT(r)},[r]);return d.createElement(jT,{styles:CT(i,!t,r,n?"":"!important")})},jh=!1;if(typeof window<"u")try{var dc=Object.defineProperty({},"passive",{get:function(){return jh=!0,!0}});window.addEventListener("test",dc,dc),window.removeEventListener("test",dc,dc)}catch{jh=!1}var ai=jh?{passive:!1}:!1,TT=function(e){return e.tagName==="TEXTAREA"},j1=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!TT(e)&&n[t]==="visible")},RT=function(e){return j1(e,"overflowY")},MT=function(e){return j1(e,"overflowX")},Lv=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=C1(e,s);if(r){var i=E1(e,s),a=i[1],l=i[2];if(a>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},_T=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},AT=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},C1=function(e,t){return e==="v"?RT(t):MT(t)},E1=function(e,t){return e==="v"?_T(t):AT(t)},LT=function(e,t){return e==="h"&&t==="rtl"?-1:1},IT=function(e,t,n,s,r){var i=LT(e,window.getComputedStyle(t).direction),a=i*s,l=n.target,c=t.contains(l),u=!1,f=a>0,m=0,h=0;do{var y=E1(e,l),p=y[0],g=y[1],w=y[2],x=g-w-i*p;(p||x)&&C1(e,l)&&(m+=x,h+=p),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(Math.abs(m)<1||!r)||!f&&(Math.abs(h)<1||!r))&&(u=!0),u},fc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Iv=function(e){return[e.deltaX,e.deltaY]},$v=function(e){return e&&"current"in e?e.current:e},$T=function(e,t){return e[0]===t[0]&&e[1]===t[1]},OT=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},DT=0,li=[];function BT(e){var t=d.useRef([]),n=d.useRef([0,0]),s=d.useRef(),r=d.useState(DT++)[0],i=d.useState(k1)[0],a=d.useRef(e);d.useEffect(function(){a.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var g=iT([e.lockRef.current],(e.shards||[]).map($v),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var l=d.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var x=fc(g),v=n.current,b="deltaX"in g?g.deltaX:v[0]-x[0],S="deltaY"in g?g.deltaY:v[1]-x[1],N,j=g.target,k=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in g&&k==="h"&&j.type==="range")return!1;var C=Lv(k,j);if(!C)return!0;if(C?N=k:(N=k==="v"?"h":"v",C=Lv(k,j)),!C)return!1;if(!s.current&&"changedTouches"in g&&(b||S)&&(s.current=N),!N)return!0;var R=s.current||N;return IT(R,w,g,R==="h"?b:S,!0)},[]),c=d.useCallback(function(g){var w=g;if(!(!li.length||li[li.length-1]!==i)){var x="deltaY"in w?Iv(w):fc(w),v=t.current.filter(function(N){return N.name===w.type&&(N.target===w.target||w.target===N.shadowParent)&&$T(N.delta,x)})[0];if(v&&v.should){w.cancelable&&w.preventDefault();return}if(!v){var b=(a.current.shards||[]).map($v).filter(Boolean).filter(function(N){return N.contains(w.target)}),S=b.length>0?l(w,b[0]):!a.current.noIsolation;S&&w.cancelable&&w.preventDefault()}}},[]),u=d.useCallback(function(g,w,x,v){var b={name:g,delta:w,target:x,should:v,shadowParent:FT(x)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(S){return S!==b})},1)},[]),f=d.useCallback(function(g){n.current=fc(g),s.current=void 0},[]),m=d.useCallback(function(g){u(g.type,Iv(g),g.target,l(g,e.lockRef.current))},[]),h=d.useCallback(function(g){u(g.type,fc(g),g.target,l(g,e.lockRef.current))},[]);d.useEffect(function(){return li.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",c,ai),document.addEventListener("touchmove",c,ai),document.addEventListener("touchstart",f,ai),function(){li=li.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,ai),document.removeEventListener("touchmove",c,ai),document.removeEventListener("touchstart",f,ai)}},[]);var y=e.removeScrollBar,p=e.inert;return d.createElement(d.Fragment,null,p?d.createElement(i,{styles:OT(r)}):null,y?d.createElement(PT,{gapMode:e.gapMode}):null)}function FT(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const zT=pT(N1,BT);var pp=d.forwardRef(function(e,t){return d.createElement(ad,Ys({},e,{ref:t,sideCar:zT}))});pp.classNames=ad.classNames;var VT=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ci=new WeakMap,hc=new WeakMap,mc={},tf=0,P1=function(e){return e&&(e.host||P1(e.parentNode))},qT=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=P1(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},KT=function(e,t,n,s){var r=qT(t,Array.isArray(e)?e:[e]);mc[n]||(mc[n]=new WeakMap);var i=mc[n],a=[],l=new Set,c=new Set(r),u=function(m){!m||l.has(m)||(l.add(m),u(m.parentNode))};r.forEach(u);var f=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(h){if(l.has(h))f(h);else try{var y=h.getAttribute(s),p=y!==null&&y!=="false",g=(ci.get(h)||0)+1,w=(i.get(h)||0)+1;ci.set(h,g),i.set(h,w),a.push(h),g===1&&p&&hc.set(h,!0),w===1&&h.setAttribute(n,"true"),p||h.setAttribute(s,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return f(t),l.clear(),tf++,function(){a.forEach(function(m){var h=ci.get(m)-1,y=i.get(m)-1;ci.set(m,h),i.set(m,y),h||(hc.has(m)||m.removeAttribute(s),hc.delete(m)),y||m.removeAttribute(n)}),tf--,tf||(ci=new WeakMap,ci=new WeakMap,hc=new WeakMap,mc={})}},T1=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),r=VT(e);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live]"))),KT(s,r,n,"aria-hidden")):function(){return null}},gp="Dialog",[R1,M1]=Yn(gp),[WT,Vs]=R1(gp),_1=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:r,onOpenChange:i,modal:a=!0}=e,l=d.useRef(null),c=d.useRef(null),[u=!1,f]=Oo({prop:s,defaultProp:r,onChange:i});return o.jsx(WT,{scope:t,triggerRef:l,contentRef:c,contentId:Zr(),titleId:Zr(),descriptionId:Zr(),open:u,onOpenChange:f,onOpenToggle:d.useCallback(()=>f(m=>!m),[f]),modal:a,children:n})};_1.displayName=gp;var A1="DialogTrigger",L1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=Vs(A1,n),i=Ye(t,r.triggerRef);return o.jsx(Be.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":yp(r.open),...s,ref:i,onClick:Pe(e.onClick,r.onOpenToggle)})});L1.displayName=A1;var vp="DialogPortal",[UT,I1]=R1(vp,{forceMount:void 0}),$1=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:r}=e,i=Vs(vp,t);return o.jsx(UT,{scope:t,forceMount:n,children:d.Children.map(s,a=>o.jsx(zs,{present:n||i.open,children:o.jsx(Gu,{asChild:!0,container:r,children:a})}))})};$1.displayName=vp;var yu="DialogOverlay",O1=d.forwardRef((e,t)=>{const n=I1(yu,e.__scopeDialog),{forceMount:s=n.forceMount,...r}=e,i=Vs(yu,e.__scopeDialog);return i.modal?o.jsx(zs,{present:s||i.open,children:o.jsx(GT,{...r,ref:t})}):null});O1.displayName=yu;var HT=Hi("DialogOverlay.RemoveScroll"),GT=d.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=Vs(yu,n);return o.jsx(pp,{as:HT,allowPinchZoom:!0,shards:[r.contentRef],children:o.jsx(Be.div,{"data-state":yp(r.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Fo="DialogContent",D1=d.forwardRef((e,t)=>{const n=I1(Fo,e.__scopeDialog),{forceMount:s=n.forceMount,...r}=e,i=Vs(Fo,e.__scopeDialog);return o.jsx(zs,{present:s||i.open,children:i.modal?o.jsx(QT,{...r,ref:t}):o.jsx(YT,{...r,ref:t})})});D1.displayName=Fo;var QT=d.forwardRef((e,t)=>{const n=Vs(Fo,e.__scopeDialog),s=d.useRef(null),r=Ye(t,n.contentRef,s);return d.useEffect(()=>{const i=s.current;if(i)return T1(i)},[]),o.jsx(B1,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pe(e.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Pe(e.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:Pe(e.onFocusOutside,i=>i.preventDefault())})}),YT=d.forwardRef((e,t)=>{const n=Vs(Fo,e.__scopeDialog),s=d.useRef(!1),r=d.useRef(!1);return o.jsx(B1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,i),i.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const a=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),B1=d.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:i,...a}=e,l=Vs(Fo,n),c=d.useRef(null),u=Ye(t,c);return w1(),o.jsxs(o.Fragment,{children:[o.jsx(mp,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:i,children:o.jsx(Ml,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":yp(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(ZT,{titleId:l.titleId}),o.jsx(eR,{contentRef:c,descriptionId:l.descriptionId})]})]})}),xp="DialogTitle",F1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=Vs(xp,n);return o.jsx(Be.h2,{id:r.titleId,...s,ref:t})});F1.displayName=xp;var z1="DialogDescription",V1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=Vs(z1,n);return o.jsx(Be.p,{id:r.descriptionId,...s,ref:t})});V1.displayName=z1;var q1="DialogClose",K1=d.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,r=Vs(q1,n);return o.jsx(Be.button,{type:"button",...s,ref:t,onClick:Pe(e.onClick,()=>r.onOpenChange(!1))})});K1.displayName=q1;function yp(e){return e?"open":"closed"}var W1="DialogTitleWarning",[XT,U1]=vC(W1,{contentName:Fo,titleName:xp,docsSlug:"dialog"}),ZT=({titleId:e})=>{const t=U1(W1),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},JT="DialogDescriptionWarning",eR=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${U1(JT).contentName}}.`;return d.useEffect(()=>{var i;const r=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},H1=_1,G1=L1,Q1=$1,wp=O1,bp=D1,Sp=F1,Np=V1,kp=K1;const Yi=H1,wu=G1,tR=Q1,Y1=d.forwardRef(({className:e,...t},n)=>o.jsx(wp,{ref:n,className:Ke("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Y1.displayName=wp.displayName;const zo=d.forwardRef(({className:e,children:t,...n},s)=>o.jsxs(tR,{children:[o.jsx(Y1,{}),o.jsxs(bp,{ref:s,className:Ke("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,o.jsxs(kp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(Do,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));zo.displayName=bp.displayName;const Vo=({className:e,...t})=>o.jsx("div",{className:Ke("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Vo.displayName="DialogHeader";const qo=d.forwardRef(({className:e,...t},n)=>o.jsx(Sp,{ref:n,className:Ke("text-lg font-semibold leading-none tracking-tight",e),...t}));qo.displayName=Sp.displayName;const X1=d.forwardRef(({className:e,...t},n)=>o.jsx(Np,{ref:n,className:Ke("text-sm text-muted-foreground",e),...t}));X1.displayName=Np.displayName;/*! Capacitor: https://capacitorjs.com/ - MIT License */var Xi;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Xi||(Xi={}));class nf extends Error{constructor(t,n,s){super(t),this.message=t,this.code=n,this.data=s}}const nR=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},sR=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},s=n.Plugins=n.Plugins||{},r=()=>t!==null?t.name:nR(e),i=()=>r()!=="web",a=m=>{const h=u.get(m);return!!(h!=null&&h.platforms.has(r())||l(m))},l=m=>{var h;return(h=n.PluginHeaders)===null||h===void 0?void 0:h.find(y=>y.name===m)},c=m=>e.console.error(m),u=new Map,f=(m,h={})=>{const y=u.get(m);if(y)return console.warn(`Capacitor plugin "${m}" already registered. Cannot register plugins twice.`),y.proxy;const p=r(),g=l(m);let w;const x=async()=>(!w&&p in h?w=typeof h[p]=="function"?w=await h[p]():w=h[p]:t!==null&&!w&&"web"in h&&(w=typeof h.web=="function"?w=await h.web():w=h.web),w),v=(C,R)=>{var P,D;if(g){const A=g==null?void 0:g.methods.find(z=>R===z.name);if(A)return A.rtype==="promise"?z=>n.nativePromise(m,R.toString(),z):(z,_)=>n.nativeCallback(m,R.toString(),z,_);if(C)return(P=C[R])===null||P===void 0?void 0:P.bind(C)}else{if(C)return(D=C[R])===null||D===void 0?void 0:D.bind(C);throw new nf(`"${m}" plugin is not implemented on ${p}`,Xi.Unimplemented)}},b=C=>{let R;const P=(...D)=>{const A=x().then(z=>{const _=v(z,C);if(_){const F=_(...D);return R=F==null?void 0:F.remove,F}else throw new nf(`"${m}.${C}()" is not implemented on ${p}`,Xi.Unimplemented)});return C==="addListener"&&(A.remove=async()=>R()),A};return P.toString=()=>`${C.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:C,writable:!1,configurable:!1}),P},S=b("addListener"),N=b("removeListener"),j=(C,R)=>{const P=S({eventName:C},R),D=async()=>{const z=await P;N({eventName:C,callbackId:z},R)},A=new Promise(z=>P.then(()=>z({remove:D})));return A.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await D()},A},k=new Proxy({},{get(C,R){switch(R){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?j:S;case"removeListener":return N;default:return b(R)}}});return s[m]=k,u.set(m,{name:m,proxy:k,platforms:new Set([...Object.keys(h),...g?[p]:[]])}),k};return n.convertFileSrc||(n.convertFileSrc=m=>m),n.getPlatform=r,n.handleError=c,n.isNativePlatform=i,n.isPluginAvailable=a,n.registerPlugin=f,n.Exception=nf,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},rR=e=>e.Capacitor=sR(e),jn=rR(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),lo=jn.registerPlugin;class jp{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let s=!1;this.listeners[t]||(this.listeners[t]=[],s=!0),this.listeners[t].push(n);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i),s&&this.sendRetainedArgumentsForEvent(t);const a=async()=>this.removeListener(t,n);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,s){const r=this.listeners[t];if(!r){if(s){let i=this.retainedEventArguments[t];i||(i=[]),i.push(n),this.retainedEventArguments[t]=i}return}r.forEach(i=>i(n))}hasListeners(t){var n;return!!(!((n=this.listeners[t])===null||n===void 0)&&n.length)}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:s=>{this.notifyListeners(n,s)}}}unimplemented(t="not implemented"){return new jn.Exception(t,Xi.Unimplemented)}unavailable(t="not available"){return new jn.Exception(t,Xi.Unavailable)}async removeListener(t,n){const s=this.listeners[t];if(!s)return;const r=s.indexOf(n);this.listeners[t].splice(r,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(s=>{this.notifyListeners(t,s)}))}}const Ov=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Dv=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class oR extends jp{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(s=>{if(s.length<=0)return;let[r,i]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=Dv(r).trim(),i=Dv(i).trim(),n[r]=i}),n}async setCookie(t){try{const n=Ov(t.key),s=Ov(t.value),r=`; expires=${(t.expires||"").replace("expires=","")}`,i=(t.path||"/").replace("path=",""),a=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${s||""}${r}; path=${i}; ${a};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}lo("CapacitorCookies",{web:()=>new oR});const iR=async e=>new Promise((t,n)=>{const s=new FileReader;s.onload=()=>{const r=s.result;t(r.indexOf(",")>=0?r.split(",")[1]:r)},s.onerror=r=>n(r),s.readAsDataURL(e)}),aR=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(r=>r.toLocaleLowerCase()).reduce((r,i,a)=>(r[i]=e[t[a]],r),{})},lR=(e,t=!0)=>e?Object.entries(e).reduce((s,r)=>{const[i,a]=r;let l,c;return Array.isArray(a)?(c="",a.forEach(u=>{l=t?encodeURIComponent(u):u,c+=`${i}=${l}&`}),c.slice(0,-1)):(l=t?encodeURIComponent(a):a,c=`${i}=${l}`),`${s}&${c}`},"").substr(1):null,cR=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),r=aR(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(r.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[a,l]of Object.entries(e.data||{}))i.set(a,l);n.body=i.toString()}else if(r.includes("multipart/form-data")||e.data instanceof FormData){const i=new FormData;if(e.data instanceof FormData)e.data.forEach((l,c)=>{i.append(c,l)});else for(const l of Object.keys(e.data))i.append(l,e.data[l]);n.body=i;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(r.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class uR extends jp{async request(t){const n=cR(t,t.webFetchExtra),s=lR(t.params,t.shouldEncodeUrlParams),r=s?`${t.url}?${s}`:t.url,i=await fetch(r,n),a=i.headers.get("content-type")||"";let{responseType:l="text"}=i.ok?t:{};a.includes("application/json")&&(l="json");let c,u;switch(l){case"arraybuffer":case"blob":u=await i.blob(),c=await iR(u);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const f={};return i.headers.forEach((m,h)=>{f[h]=m}),{data:c,headers:f,status:i.status,url:i.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}lo("CapacitorHttp",{web:()=>new uR});var Bv;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(Bv||(Bv={}));var Fv;(function(e){e.StatusBar="StatusBar",e.NavigationBar="NavigationBar"})(Fv||(Fv={}));class dR extends jp{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}lo("SystemBars",{web:()=>new dR});const fR="modulepreload",hR=function(e){return"/"+e},zv={},da=function(t,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=hR(c),c in zv)return;zv[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":fR,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((h,y)=>{m.addEventListener("load",h),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},Vv=lo("SpeechSynthesis",{web:()=>da(()=>import("./web-ZMJx9IYR.js"),[]).then(e=>new e.SpeechSynthesisWeb)}),Ch={permissionStatus:"unknown",modelReady:!1,sessionActive:!1,micListening:!1,lastResult:"",lastError:"",timestamp:Date.now()},Eh=new Set;function mR(e){return Eh.add(e),e({...Ch}),()=>Eh.delete(e)}function fa(e){Object.assign(Ch,e,{timestamp:Date.now()}),Eh.forEach(t=>t({...Ch}))}function qv(e){fa({permissionStatus:e})}function pR(e){fa({modelReady:e})}function Z1(e){fa({sessionActive:e})}function J1(e){fa({micListening:e})}function eb(e){fa({lastResult:e})}function bu(e){fa({lastError:e})}const oe=lo("BlindfoldNative");let Ph=null,Th=null;const gR=new Promise((e,t)=>{Ph=e,Th=t});let tb=!1,nb=!1;function pc(e){nb=e,tb=!0,e&&Ph?Ph():!e&&Th&&Th(new Error("Mic permission denied"))}async function Yo(){if(tb)return nb;try{return await gR,!0}catch{return!1}}let sf=null;async function sb(){if(jn.isNativePlatform())try{sf||(sf=await da(()=>Promise.resolve().then(()=>CN),void 0));const{Haptics:e,ImpactStyle:t}=sf;await e.impact({style:t.Light})}catch{}}class vR{constructor(){this.sessions=new Map,this.isSpeaking=!1,this.micState="LISTENING",this.pendingRestarts=[],this.settlingTimeout=null,this.resumeDelayMs=350}register(t){this.sessions.set(t.id,t),console.log(`[VoiceController] Registered session: ${t.id}`)}unregister(t){this.sessions.delete(t),console.log(`[VoiceController] Unregistered session: ${t}`)}clearPendingForSession(t){const n=this.pendingRestarts.length;this.pendingRestarts=this.pendingRestarts.filter(s=>s!==t),n!==this.pendingRestarts.length&&console.log(`[VoiceController] Cleared pending restart for: ${t}`)}setActive(t,n){const s=this.sessions.get(t);s&&(s.shouldBeActive=n)}onTTSStart(){this.settlingTimeout&&(clearTimeout(this.settlingTimeout),this.settlingTimeout=null),this.isSpeaking=!0,this.micState="SPEAKING",console.log("[VoiceController] TTS starting, state -> SPEAKING, pausing all voice sessions"),Array.from(this.sessions.values()).forEach(t=>{t.shouldBeActive&&t.pause()})}onTTSEnd(){this.isSpeaking=!1,this.micState="SETTLING";const t=this.sessions.size,n=Array.from(this.sessions.keys()).join(", ");console.log(`[VoiceController] TTS ended, state -> SETTLING, waiting ${this.resumeDelayMs}ms, sessions: [${n}] (${t})`),this.settlingTimeout=setTimeout(()=>{if(this.isSpeaking)console.log("[VoiceController] Skipping resume - TTS started again during settling");else{this.micState="LISTENING",console.log("[VoiceController] Settling complete, state -> LISTENING"),Array.from(this.sessions.entries()).forEach(([a,l])=>{console.log(`[VoiceController] Session '${a}' shouldBeActive=${l.shouldBeActive}`)});const s=new Set,r=this.pendingRestarts.length>0;r&&(console.log(`[VoiceController] Processing ${this.pendingRestarts.length} pending restarts: ${this.pendingRestarts.join(", ")}`),this.playMicLiveClick(),this.pendingRestarts.forEach(a=>{const l=this.sessions.get(a);l&&l.shouldBeActive?(console.log(`[VoiceController] Executing pending restart for: ${a}`),l.resume(),s.add(a)):console.log(`[VoiceController] Skipping pending restart for '${a}' - session=${!!l}, shouldBeActive=${l==null?void 0:l.shouldBeActive}`)}),this.pendingRestarts=[]);const i=Array.from(this.sessions.values()).filter(a=>a.shouldBeActive&&!s.has(a.id));console.log(`[VoiceController] Sessions to resume: ${i.length}`),i.length>0?(r||this.playMicLiveClick(),i.forEach(a=>{console.log(`[VoiceController] Resuming session: ${a.id}`),a.resume()})):console.log("[VoiceController] No sessions to resume")}},this.resumeDelayMs)}queueRestart(t){if(this.micState==="LISTENING"){const n=this.sessions.get(t);n&&n.shouldBeActive&&(console.log(`[VoiceController] Instant restart for session: ${t}`),this.playMicLiveClick(),n.resume())}else this.pendingRestarts.includes(t)||(this.pendingRestarts.push(t),console.log(`[VoiceController] Queued restart for session: ${t} (state: ${this.micState})`))}getMicState(){return this.micState}canStartMic(){return this.micState==="LISTENING"}async playMicLiveClick(){try{if(jn.isNativePlatform()){const{Haptics:t,ImpactStyle:n}=await da(async()=>{const{Haptics:s,ImpactStyle:r}=await Promise.resolve().then(()=>CN);return{Haptics:s,ImpactStyle:r}},void 0);await t.impact({style:n.Light})}console.log("[VoiceController] Mic live click")}catch{}}getIsSpeaking(){return this.isSpeaking}}const fr=new vR,Ja=class Ja{constructor(){this.protectedSessionId=null,this.disposableSessionId=null,this.isPurging=!1}register(t){Ja.PROTECTED_SESSIONS.includes(t)?(this.protectedSessionId==="game"&&t==="reconstruction"&&console.log("[VoiceRegistry] HANDOVER: game  reconstruction (mic stays warm)"),this.protectedSessionId=t,console.log(`[VoiceRegistry] Protected lane: ${t}`)):(this.disposableSessionId=t,console.log(`[VoiceRegistry] Disposable lane: ${t}`))}unregister(t){const n=Ja.PROTECTED_SESSIONS.includes(t);n&&this.protectedSessionId===t?(this.protectedSessionId=null,console.log(`[VoiceRegistry] Unregistered protected: ${t}`)):!n&&this.disposableSessionId===t&&(this.disposableSessionId=null,console.log(`[VoiceRegistry] Unregistered disposable: ${t}`))}async purge(){if(this.isPurging){console.log("[VoiceRegistry] Already purging, skipping");return}this.isPurging=!0;const t=!!this.protectedSessionId;console.log(`[VoiceRegistry] PURGE: Killing disposable lane${t?" (game protected)":""}`);try{Jv.stop()}catch(n){console.log("[VoiceRegistry] trainingVoice.stop error:",n)}try{ht.stop()}catch(n){console.log("[VoiceRegistry] voiceMaster.stop error:",n)}if(!t)try{sn.stop()}catch(n){console.log("[VoiceRegistry] voiceRecognition.stop error:",n)}if(qn&&!t)try{await oe.stopSession(),console.log("[VoiceRegistry] Stopped native session")}catch(n){console.log("[VoiceRegistry] stopSession error:",n)}try{ht.resetMicBusy()}catch(n){console.log("[VoiceRegistry] resetMicBusy error:",n)}try{sn.resetStartedFlag()}catch(n){console.log("[VoiceRegistry] resetStartedFlag error:",n)}this.disposableSessionId=null,await new Promise(n=>setTimeout(n,500)),this.isPurging=!1,console.log("[VoiceRegistry] PURGE complete - disposable lane cleared, flags reset")}async purgeAll(){if(this.isPurging){console.log("[VoiceRegistry] Already purging, skipping");return}this.isPurging=!0,console.log("[VoiceRegistry] NUCLEAR PURGE: Killing ALL sessions");try{sn.stop()}catch{}try{Jv.stop()}catch{}try{ht.stop()}catch{}if(qn)try{await oe.stopSession()}catch{}try{ht.resetMicBusy()}catch{}try{sn.resetStartedFlag()}catch{}this.protectedSessionId=null,this.disposableSessionId=null,await new Promise(t=>setTimeout(t,500)),this.isPurging=!1,console.log("[VoiceRegistry] NUCLEAR PURGE complete")}clearProtectedLane(){this.protectedSessionId&&(console.log(`[VoiceRegistry] Clearing protected lane: ${this.protectedSessionId}`),this.protectedSessionId=null)}getProtectedSession(){return this.protectedSessionId}getDisposableSession(){return this.disposableSessionId}getActiveSession(){return this.protectedSessionId||this.disposableSessionId}};Ja.PROTECTED_SESSIONS=["game","reconstruction"];let Rh=Ja;const Zi=new Rh,Kv={K:"King",Q:"Queen",R:"Rook",B:"Bishop",N:"Knight",P:"Pawn",k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"},qr={king:"K",queen:"Q",rook:"R",bishop:"B",bish:"B",bishup:"B",bishep:"B",bashop:"B",knight:"N",night:"N",nite:"N",kite:"N",horse:"N",pawn:"",castle:"R"},xR=["um","uh","the","a","an","like","so","well","just","actually","basically"];function yR(e){return e.toLowerCase().split(/\s+/).filter(s=>!xR.includes(s)).join(" ")}const Oi={a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",alpha:"a",alfa:"a",bravo:"b",charlie:"c",delta:"d",echo:"e",foxtrot:"f",golf:"g",hotel:"h",able:"a",apple:"a",ay:"a",aye:"a",eh:"a",boy:"b",baker:"b",bee:"b",be:"b",cat:"c",see:"c",sea:"c",cee:"c",dog:"d",dee:"d",david:"d",easy:"e",edward:"e",eee:"e",ee:"e",fox:"f",frank:"f",eff:"f",ef:"f",if:"f",of:"f",george:"g",gee:"g",jee:"g",henry:"h",aitch:"h",ach:"h"},Su={1:"1",one:"1",won:"1",first:"1",2:"2",two:"2",to:"2",too:"2",second:"2",3:"3",three:"3",free:"3",third:"3",4:"4",four:"4",for:"4",forth:"4",fourth:"4",5:"5",five:"5",fifth:"5",6:"6",six:"6",sixth:"6",sicks:"6",7:"7",seven:"7",seventh:"7",8:"8",eight:"8",ate:"8",eighth:"8"};function ui(e,t=!1,n=!1,s=!1){if(!e)return"";if(e==="O-O"||e==="0-0")return s?"Castles kingside, checkmate!":n?"Castles kingside, check":"Castles kingside";if(e==="O-O-O"||e==="0-0-0")return s?"Castles queenside, checkmate!":n?"Castles queenside, check":"Castles queenside";let r="",i=e.replace(/[+#=].*$/,"");const a=i.match(/^([KQRBN])/);a?(r=Kv[a[1]]+" ",i=i.substring(1)):r="";const l=i.includes("x");i=i.replace("x","");const c=i.match(/([a-h])([1-8])/g);if(c&&c.length>0){const u=c[c.length-1],f=u[0],m=u[1];if(l||t){if(c.length>1||!a){const h=i[0];h&&h.match(/[a-h]/)&&(r+=h+" ")}r+="takes "+f+m}else r+=f+m}if(e.includes("=")){const u=e.match(/=([QRBN])/);u&&(r+=", promotes to "+Kv[u[1]])}return s||e.includes("#")?r+=", checkmate!":(n||e.includes("+"))&&(r+=", check"),r.trim()}let _r=[],Ra=!1,yo=null,rf=!1;const qn=jn.isNativePlatform();async function Cp(){if(!qn){try{if(navigator.permissions){const e=await navigator.permissions.query({name:"microphone"});return e.state==="granted"?"granted":e.state==="denied"?"denied":"prompt"}}catch{}return"prompt"}try{return(await oe.checkPermissions()).mic}catch(e){return console.error("[Voice] Error checking permissions:",e),"unknown"}}async function rb(){if(!qn)try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(t=>t.stop()),!0}catch{return console.warn("[Voice] Web microphone permission denied"),!1}try{const e=await oe.checkPermissions();return e.mic==="granted"?!0:e.mic==="denied"||e.mic==="prompt"?(await oe.requestPermissions()).mic==="granted":!1}catch(e){return console.error("[Voice] Permission handling error:",e),!1}}async function wR(){const e=await rb(),t=await Cp();return{granted:e,status:t}}function bR(){return qn?Promise.resolve([]):Ra&&_r.length>0?Promise.resolve(_r):yo||(yo=new Promise(e=>{const t=window.speechSynthesis.getVoices();if(t.length>0){_r=t,Ra=!0,yo=null,e(t);return}const n=()=>{_r=window.speechSynthesis.getVoices(),Ra=!0,yo=null,window.speechSynthesis.removeEventListener("voiceschanged",n),e(_r)};window.speechSynthesis.addEventListener("voiceschanged",n),setTimeout(()=>{Ra||(_r=window.speechSynthesis.getVoices(),Ra=_r.length>0,yo=null,window.speechSynthesis.removeEventListener("voiceschanged",n),e(_r))},1e3)}),yo)}let Mh=null;function SR(){Mh&&Mh.abort()}const NR={a:"Ay",b:"Bee",c:"See",d:"Dee",e:"e",f:"f",g:"Gee",h:"h"},kR={N:"Knight",B:"Bishop",R:"Rook",Q:"Queen",K:"King"},jR=new Set(["correct","wrong","next","say","the","move","look","okay","continue","seconds","remaining","are","you","sure","want","resign","yes","no","can","play","legal","moves","for","material","is","equal","white","black","up","point","points","at","highlighted","squares","on","board"]);function CR(e){const t=e.toLowerCase().replace(/[^a-z\s]/g,"").split(/\s+/).filter(i=>i.length>0);if(t.length>0&&t.every(i=>jR.has(i))||!/[a-h]\s*[1-8]|[NBRQK][a-h]|O-O/.test(e))return e;let r=e.replace(/O-O-O/gi,"queenside castle").replace(/O-O/gi,"kingside castle").replace(/x/g," takes ").replace(/\+/g," check").replace(/#/g," checkmate");for(const[i,a]of Object.entries(kR))r=r.replace(new RegExp(`\\b${i}([a-h])([1-8])`,"g"),`${a} $1$2`),r=r.replace(new RegExp(`\\b${i}\\s*takes\\s*([a-h])([1-8])`,"gi"),`${a} takes $1$2`),r=r.replace(new RegExp(`\\b${i}([a-h1-8])([a-h])([1-8])`,"g"),`${a} $1$2$3`);for(const[i,a]of Object.entries(NR))r=r.replace(new RegExp(`\\b${i}\\s*([1-8])`,"gi"),`${a} $1`);return r=r.replace(/\ba\s+([1-8])\b/gi,"Ay $1"),r=r.replace(/\s+/g," ").trim(),r}async function At(e,t=.9){fr.onTTSStart(),rf=!0,SR(),console.log("[Voice] Mic muted: Bot is speaking");const n=CR(e);try{if(qn)await new Promise(async s=>{let r=!1;const i=Math.max(2500,n.length*150),a=setTimeout(()=>{r||(console.warn("[Voice] TTS Event timeout - forcing resume after",i,"ms"),r=!0,l&&l.remove().catch(()=>{}),s())},i);let l=null;try{l=await Vv.addListener("end",()=>{r||(console.log("[Voice] TTS End detected via event - mic resume now safe"),clearTimeout(a),r=!0,l&&l.remove().catch(()=>{}),s())})}catch(c){console.warn("[Voice] Failed to setup TTS listener:",c)}try{await Vv.speak({text:n,language:"en-US",rate:t,pitch:1,volume:1})}catch(c){console.error("[Voice] Speak error:",c),clearTimeout(a),l&&l.remove().catch(()=>{}),r=!0,s()}l||(console.log("[Voice] No listener available, using fallback timing"),await new Promise(c=>setTimeout(c,Math.max(1e3,n.length*100))),r||(clearTimeout(a),r=!0,s()))});else{if(console.log("[Voice] speechSynthesis in window:","speechSynthesis"in window),console.log("[Voice] window.speechSynthesis:",typeof window.speechSynthesis),!("speechSynthesis"in window)||!window.speechSynthesis){console.warn("Speech synthesis not supported");return}try{window.speechSynthesis.cancel()}catch(r){console.warn("[Voice] Failed to cancel previous speech:",r)}await new Promise(r=>setTimeout(r,50));const s=await bR();console.log("[Voice] Loaded voices:",s.length),await new Promise(r=>{const i=new SpeechSynthesisUtterance(n);i.rate=t,i.pitch=1,i.volume=1;const a=s.find(l=>l.lang.startsWith("en-"));a?(i.voice=a,i.lang=a.lang):i.lang="en-US",i.onend=()=>{console.log("[Voice] Speech ended successfully"),r()},i.onerror=l=>{console.error("[Voice] Speech error:",l),r()},console.log("[Voice] Speaking:",n),window.speechSynthesis.speak(i)})}}finally{rf=!1,fr.onTTSEnd(),setTimeout(()=>{rf||console.log("[Voice] Mic active: Listening for your move")},100)}}function ob(e){let t=e;return t=t.replace(/\bbefore\b/gi,"b 4"),t=t.replace(/\bsci\s*fi\b/gi,"c 5"),t=t.replace(/\bscifi\b/gi,"c 5"),t=t.replace(/\bquincy\b/gi,"queen c"),t=t.replace(/\brookie\b/gi,"rook e"),t=t.replace(/\brookies\b/gi,"rook e"),t=t.replace(/\brook\s+he\b/gi,"rook e"),t=t.replace(/\brock\s+([a-h])\b/gi,"rook $1"),t=t.replace(/\bhe\s+([1-8])\b/g,"e $1"),t=t.replace(/\bhe\s+(one|two|three|four|five|six|seven|eight|won|too|free|fore|for|fifth|sixth|seventh|eighth)\b/gi,"e $1"),t=t.replace(/\bthe\s+([1-8])\b/g,"d $1"),t=t.replace(/\bthe\s+(one|two|three|four|five|six|seven|eight)\b/gi,"d $1"),t=t.replace(/\b([a-h])\s+for\b/gi,"$1 4"),t}function Wv(e,t){const n=ob(e.toLowerCase().trim()),s=yR(n),r=s.replace(/\s+/g,"").match(/^([a-h])([1-8])$/);if(r){const g=r[1]+r[2],w=t.find(x=>!/^[KQRBN]/i.test(x)&&x.includes(g));if(w)return w}if(s.includes("castle")||s.includes("castles"))if(s.includes("queen")||s.includes("long")){if(t.includes("O-O-O"))return"O-O-O"}else if(s.includes("king")||s.includes("short")){if(t.includes("O-O"))return"O-O"}else{if(t.includes("O-O"))return"O-O";if(t.includes("O-O-O"))return"O-O-O"}let i="",a="",l="",c="",u="",f=!1,m="";const h=s.split(/\s+/);for(const g of h){const w=g.toLowerCase();qr[w]!==void 0&&(i=qr[w]),(w==="takes"||w==="captures"||w==="x")&&(f=!0),!(w==="promotes"||w==="promotion")&&(Oi[w]&&(a?c||(c=a,a=Oi[w]):a=Oi[w]),Su[w]&&(l&&!u&&(u=l),l=Su[w]),["queen","rook","bishop","knight"].includes(w)&&(s.includes("promote")||s.includes("equals"))&&(m=qr[w]||"Q"))}for(const g of h){const w=g.match(/^([a-h])([1-8])$/i);w&&(a&&!c&&(c=a),l&&!u&&(u=l),a=w[1].toLowerCase(),l=w[2])}if(!m&&(l==="1"||l==="8")){const g=h[h.length-1].toLowerCase();["queen","rook","bishop","knight"].includes(g)&&(m=qr[g]||"Q")}if(!a||!l)return null;const y=a+l,p=t.filter(g=>{const w=g.replace(/[+#]/g,"");if(!w.includes(y))return!1;if(i){if(!w.startsWith(i))return!1}else if(w.match(/^[KQRBN]/))return!1;if(c){const x=w.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(x&&x[1]&&x[1]!==c)return!1}if(u){const x=w.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(x&&x[2]&&x[2]!==u)return!1}return!0});if(p.length===1){let g=p[0];return m&&g.includes("=")&&(g=g.replace(/=[QRBN]/,"="+m)),g}if(p.length>1){const g=p.filter(x=>x.includes("x")),w=p.filter(x=>!x.includes("x"));return f&&g.length===1?g[0]:!f&&w.length===1?w[0]:p[0]}return null}function Uv(e,t){const n=ob(e.toLowerCase().trim());if(n.includes("castle")||n.includes("castles"))if(n.includes("queen")||n.includes("long")){if(t.includes("O-O-O"))return{move:"O-O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""}}else if(n.includes("king")||n.includes("short")){if(t.includes("O-O"))return{move:"O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""}}else{if(t.includes("O-O"))return{move:"O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""};if(t.includes("O-O-O"))return{move:"O-O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""}}let s="",r="",i="",a="",l="",c=!1,u="";const f=n.split(/\s+/);for(const y of f){const p=y.toLowerCase();qr[p]!==void 0&&(s=qr[p]),(p==="takes"||p==="captures"||p==="x")&&(c=!0),!(p==="promotes"||p==="promotion")&&(Oi[p]&&(r?a||(a=r,r=Oi[p]):r=Oi[p]),Su[p]&&(i&&!l&&(l=i),i=Su[p]),["queen","rook","bishop","knight"].includes(p)&&(n.includes("promote")||n.includes("equals"))&&(u=qr[p]||"Q"))}for(const y of f){const p=y.match(/^([a-h])([1-8])$/i);p&&(r&&!a&&(a=r),i&&!l&&(l=i),r=p[1].toLowerCase(),i=p[2])}if(!u&&(i==="1"||i==="8")){const y=f[f.length-1].toLowerCase();["queen","rook","bishop","knight"].includes(y)&&(u=qr[y]||"Q")}if(!r||!i)return{move:null,isAmbiguous:!1,candidates:[],piece:"",targetSquare:""};const m=r+i,h=t.filter(y=>{const p=y.replace(/[+#]/g,"");if(!p.includes(m))return!1;if(s){if(!p.startsWith(s))return!1}else if(p.match(/^[KQRBN]/))return!1;if(a){const g=p.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(g&&g[1]&&g[1]!==a)return!1}if(l){const g=p.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(g&&g[2]&&g[2]!==l)return!1}return!0});if(h.length===1){let y=h[0];return u&&y.includes("=")&&(y=y.replace(/=[QRBN]/,"="+u)),{move:y,isAmbiguous:!1,candidates:[],piece:s,targetSquare:m}}if(h.length>1){const y=h.filter(g=>g.includes("x")),p=h.filter(g=>!g.includes("x"));return c&&y.length===1?{move:y[0],isAmbiguous:!1,candidates:[],piece:s,targetSquare:m}:!c&&p.length===1?{move:p[0],isAmbiguous:!1,candidates:[],piece:s,targetSquare:m}:{move:null,isAmbiguous:!0,candidates:h,piece:s,targetSquare:m}}return{move:null,isAmbiguous:!1,candidates:[],piece:s,targetSquare:m}}const of={one:"1",won:"1",want:"1",two:"2",too:"2",to:"2",three:"3",tree:"3",free:"3",four:"4",for:"4",fore:"4",five:"5",fife:"5",six:"6",sick:"6",sicks:"6",seven:"7",eight:"8",ate:"8",ait:"8",a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",alpha:"a",alfa:"a",bravo:"b",charlie:"c",delta:"d",echo:"e",foxtrot:"f",golf:"g",hotel:"h",ay:"a",aye:"a",apple:"a",bee:"b",be:"b",boy:"b",see:"c",sea:"c",cee:"c",dee:"d",the:"d",tea:"d",dog:"d",ee:"e",easy:"e",eff:"f",if:"f",of:"f",off:"f",fox:"f",gee:"g",jee:"g",aitch:"h",ach:"h"};function Hv(e){const t=e.toLowerCase().trim(),n=t.split(/\s+/);let s=null,r=null;for(const i of n){const a=of[i];a?/^[a-h]$/.test(a)?s||(s=a):/^[1-8]$/.test(a)&&(r||(r=a)):i.length===1&&(/^[a-h]$/i.test(i)?s||(s=i.toLowerCase()):/^[1-8]$/.test(i)&&(r||(r=i)))}if(of[t]){const i=of[t];/^[a-h]$/.test(i)?s=i:/^[1-8]$/.test(i)&&(r=i)}return t.length===1&&(/^[a-h]$/i.test(t)?s=t.toLowerCase():/^[1-8]$/.test(t)&&(r=t)),{file:s,rank:r}}function Gv(e,t){for(const n of e){const r=n.replace(/[+#]/g,"").match(/^[KQRBN]([a-h])?([1-8])?x?[a-h][1-8]/);if(r){const i=r[1]||null,a=r[2]||null;if(t.file&&t.rank){if(i===t.file&&a===t.rank)return n}else if(t.file){if(i===t.file)return n}else if(t.rank&&a===t.rank)return n}}return null}function Qv(e){const t=[];for(const n of e){const r=n.replace(/[+#]/g,"").match(/^[KQRBN]([a-h])?([1-8])?x?[a-h][1-8]/);if(r){const i=r[1]||"",a=r[2]||"";(i||a)&&t.push(i+a)}}return t}function Yv(e){const t=[];for(const n of e){const r=n.replace(/[+#=QRBN]/g,"").match(/^([a-h])x[a-h][1-8]$/);r&&t.push(r[1])}return t}function Xv(e,t){for(const n of e)if(n.replace(/[+#]/g,"").startsWith(t+"x"))return n;return null}function Zv(e){return e.length<2?!1:e.every(t=>{const n=t.replace(/[+#=QRBN]/g,"");return/^[a-h]x[a-h][1-8]$/.test(n)})}class ER{constructor(){this.onResult=null,this.onListeningChange=null,this.legalMoves=[],this.isStarted=!1,this.isMuted=!1,this.unmuteTimeout=null}async pauseLoop(){console.log("[VoiceRecognition] pauseLoop"),await ht.pauseLoop(),this.isMuted=!0}resumeLoop(){console.log("[VoiceRecognition] resumeLoop"),this.isMuted=!1,ht.resumeLoop()}setMute(t,n=400){this.unmuteTimeout&&(clearTimeout(this.unmuteTimeout),this.unmuteTimeout=null),t?(this.isMuted=!0,console.log("[VoiceRecognition] Software MUTE: transcripts will be ignored")):this.unmuteTimeout=setTimeout(()=>{this.isMuted=!1,this.unmuteTimeout=null,console.log("[VoiceRecognition] Software UNMUTE: mic LIVE")},n)}getMuted(){return this.isMuted}setLegalMoves(t){this.legalMoves=t,this.isStarted&&ht.setLegalMoves(t)}setOnResult(t){this.onResult=t}setOnListeningChange(t){this.onListeningChange=t}async start(){if(this.isStarted){console.log("[VoiceRecognition] Already started, skipping duplicate start");return}await this.startInternal()}async startInternal(){try{const t=await ht.start({mode:"move",legalMoves:this.legalMoves,onTranscript:(n,s)=>{if(this.isMuted){console.log("[VoiceRecognition] Ignored while muted:",n);return}this.onResult&&this.onResult(s||null,n)},onListeningChange:n=>{this.onListeningChange&&this.onListeningChange(n)}});this.isStarted=t,console.log("[VoiceRecognition] startInternal result:",t)}catch(t){console.log("[VoiceRecognition] startInternal failed:",t),this.isStarted=!1}}async forceRestart(){console.log("[VoiceRecognition] Force restart - bypassing guard"),await this.startInternal()}stop(){this.isStarted&&(this.isStarted=!1,ht.stop())}async stopAndWait(){this.isStarted&&(this.isStarted=!1,await ht.stopAndWait())}resetStartedFlag(){this.isStarted=!1}abort(){this.stop()}async reset(){await this.stopAndWait(),this.onResult=null,this.onListeningChange=null,this.legalMoves=[]}isSupported(){return!0}getIsListening(){return ht.getIsListening()&&ht.getMode()==="move"}async waitForInitialization(){await ht.checkAvailability()}}const sn=new ER;Mh=sn;const Ei=class Ei{constructor(){this.isListening=!1,this.shouldBeListening=!1,this.config=null,this.listenerHandle=null,this.stateListenerHandle=null,this.webRecognition=null,this.restartTimeout=null,this.availabilityChecked=!1,this.isAvailable=!1,this.lastErrorTime=0,this.consecutiveFailures=0,this.micBusy=!1,this.onMicBusyChange=null,this.onRetryNeeded=null,this.sessionId="master",this.isRegistered=!1,this.isPaused=!1,this.captureDebounceTimeout=null,this.pendingCaptureTranscript="",this.shouldRestart=!0,this.restartPromise=null,this.isStarting=!1,this.expectedStops=0,this.isMuted=!1,this.muteTimeout=null}async checkAvailability(){if(this.availabilityChecked)return this.isAvailable;if(qn)try{return await Yo()?(this.isAvailable=!0,this.availabilityChecked=!0,!0):(console.log("[VoiceMaster] Voice service not ready (permission denied or init failed)"),this.isAvailable=!1,this.availabilityChecked=!0,!1)}catch(t){return console.error("[VoiceMaster] Error checking availability:",t),this.isAvailable=!1,this.availabilityChecked=!0,!1}else{const t=typeof window<"u"?window.SpeechRecognition||window.webkitSpeechRecognition:null;return this.isAvailable=!!t,this.availabilityChecked=!0,this.isAvailable}}setOnMicBusyChange(t){this.onMicBusyChange=t}setOnRetryNeeded(t){this.onRetryNeeded=t}isMicBusy(){return this.micBusy}resetMicBusy(){this.micBusy=!1,this.consecutiveFailures=0,this.lastErrorTime=0,this.onMicBusyChange&&this.onMicBusyChange(!1)}mute(t=400){this.isMuted=!0,this.muteTimeout&&clearTimeout(this.muteTimeout),this.muteTimeout=setTimeout(()=>{this.isMuted=!1,this.muteTimeout=null,console.log("[VoiceMaster] Mute window ended, listening again")},t),console.log(`[VoiceMaster] Mute window started: ${t}ms`)}setMute(t,n=400){this.muteTimeout&&(clearTimeout(this.muteTimeout),this.muteTimeout=null),t?(this.isMuted=!0,console.log("[VoiceMaster] Software MUTE: transcripts will be ignored")):this.muteTimeout=setTimeout(()=>{this.isMuted=!1,this.muteTimeout=null,console.log("[VoiceMaster] Software UNMUTE: mic LIVE")},n)}getIsMuted(){return this.isMuted}triggerRestart(){if(this.restartPromise){console.log("[VoiceMaster] Restart already in progress, skipping duplicate.");return}this.restartPromise=(async()=>{try{if(console.log("[VoiceMaster] Serialized restart sequence initiating..."),this.expectedStops++,console.log("[VoiceMaster] triggerRestart: expectedStops incremented to",this.expectedStops),console.log("[VoiceMaster] triggerRestart: preparing to restart listening"),this.expectedStops=0,await new Promise(t=>setTimeout(t,100)),this.shouldRestart&&!this.micBusy){console.log("[VoiceMaster] triggerRestart: restarting mic capture");try{await oe.startListening()}catch(t){console.warn("[VoiceMaster] triggerRestart startListening failed, scheduling retry:",t),setTimeout(()=>{this.shouldRestart&&!this.micBusy&&!this.restartPromise&&this.triggerRestart()},200)}}else console.log("[VoiceMaster] triggerRestart: shouldRestart=false or micBusy, skipping")}catch(t){console.warn("[VoiceMaster] Restart sequence failed:",t),setTimeout(()=>{this.shouldRestart&&!this.micBusy&&!this.restartPromise&&this.triggerRestart()},200)}finally{this.restartPromise=null}})()}async pauseLoop(){console.log("[VoiceMaster] Pausing Loop for TTS"),this.shouldRestart=!1,qn&&console.log("[VoiceMaster] pauseLoop: mic paused (flag set, results ignored)")}resumeLoop(){if(console.log("[VoiceMaster] Resuming Loop after TTS"),this.shouldRestart=!0,!this.config){console.log("[VoiceMaster] resumeLoop: no config, skipping");return}this.triggerRestart()}getShouldRestartLoop(){return this.shouldRestart}async start(t){return this.micBusy=!1,this.isListening=!1,this.consecutiveFailures=0,this.isPaused=!1,this.shouldRestart=!0,this.isMuted=!1,console.log("[VoiceMaster] Atomic reset: state cleared for fresh start, loop enabled"),(this.listenerHandle||this.webRecognition||this.shouldBeListening)&&(console.log("[VoiceMaster] Clean handoff: stopping previous session"),await this.stop(),await new Promise(s=>setTimeout(s,100))),this.config=t,await this.checkAvailability()?(this.isRegistered||(fr.register({id:this.sessionId,pause:()=>this.pauseInternal(),resume:()=>this.resumeInternal(),shouldBeActive:!0}),this.isRegistered=!0),fr.setActive(this.sessionId,!0),Zi.register(this.sessionId),this.shouldBeListening=!0,console.log(`[VoiceMaster] Starting in '${t.mode}' mode`),fr.canStartMic()?qn?this.startNative():this.startWeb():(console.log("[VoiceMaster] TTS active or settling, queueing start for after TTS"),fr.queueRestart(this.sessionId),t.onListeningChange&&t.onListeningChange(!0),!0)):(console.log("[VoiceMaster] Not available, cannot start"),!1)}setLegalMoves(t){this.config&&(this.config.legalMoves=t)}processTranscript(t){if(!this.config||!this.shouldBeListening)return;if(this.isMuted){console.log("[VoiceMaster] Ignoring transcript during mute window:",t);return}const n=this.config.mode;switch(console.log(`[VoiceMaster] Processing in '${n}' mode:`,t),n){case"raw":this.config.onTranscript(t);break;case"move":this.processMoveMode(t);break;case"placement":this.processPlacementMode(t);break}}processMoveMode(t){if(!this.config)return;const n=t.toLowerCase(),s=n.includes("takes")||n.includes("captures"),r=/\b(knight|bishop|rook|queen|king|horse|castle)\b/.test(n),i=/[a-h]\s*[1-8]/.test(n);if((r||s)&&!i){console.log("[VoiceMaster] Piece/capture detected, waiting for target square..."),this.pendingCaptureTranscript=t,this.captureDebounceTimeout&&clearTimeout(this.captureDebounceTimeout),this.captureDebounceTimeout=setTimeout(()=>{var c,u;console.log("[VoiceMaster] Debounce timeout, processing:",this.pendingCaptureTranscript);const l=Wv(this.pendingCaptureTranscript,((c=this.config)==null?void 0:c.legalMoves)||[]);(u=this.config)==null||u.onTranscript(this.pendingCaptureTranscript,l),this.pendingCaptureTranscript=""},Ei.CAPTURE_DEBOUNCE_MS);return}this.pendingCaptureTranscript&&i&&(this.captureDebounceTimeout&&(clearTimeout(this.captureDebounceTimeout),this.captureDebounceTimeout=null),this.pendingCaptureTranscript="");const a=Wv(t,this.config.legalMoves||[]);this.config.onTranscript(t,a)}processPlacementMode(t){this.config&&this.config.onTranscript(t)}pauseInternal(){var t;if(console.log(`[VoiceMaster] pauseInternal called - isListening=${this.isListening}, shouldBeListening=${this.shouldBeListening}`),this.shouldRestart=!1,!this.isListening){console.log("[VoiceMaster] Not pausing - already not listening");return}if(this.isPaused=!0,console.log("[VoiceMaster] Pausing for TTS"),qn)console.log("[VoiceMaster] Pausing - mic will resume on TTS end");else if(this.webRecognition)try{this.webRecognition.stop()}catch(n){console.log("[VoiceMaster] Web pause error:",n)}this.isListening=!1,(t=this.config)!=null&&t.onListeningChange&&this.config.onListeningChange(!1),console.log("[VoiceMaster] pauseInternal complete - isListening now false")}async resumeInternal(){if(console.log(`[VoiceMaster] resumeInternal called - shouldBeListening=${this.shouldBeListening}, isListening=${this.isListening}, isPaused=${this.isPaused}`),!this.shouldBeListening){console.log("[VoiceMaster] Not resuming - shouldBeListening is false");return}if(this.isListening){console.log("[VoiceMaster] Already listening, skipping resume");return}if(this.isPaused=!1,this.shouldRestart=!0,console.log("[VoiceMaster] Resuming after TTS"),qn){if(this.restartPromise){console.log("[VoiceMaster] Waiting for pending restart to complete...");try{await this.restartPromise}catch{}}this.triggerRestart()}else this.startWeb()}async startNative(){var n;if(this.isStarting)return console.log("[VoiceMaster] startNative blocked: Already starting"),!1;if(this.micBusy)return console.log("[VoiceMaster] Mic is busy, not starting"),!1;const t=Date.now()-this.lastErrorTime;if(t<3e3&&this.lastErrorTime>0)return console.log(`[VoiceMaster] Lockout: ${3e3-t}ms remaining, queueing restart`),this.restartTimeout||this.scheduleRestart(),!0;this.isStarting=!0;try{return this.listenerHandle&&(await this.listenerHandle.remove(),this.listenerHandle=null),this.listenerHandle=await oe.addListener("onSpeechResult",s=>{if(!this.shouldRestart){console.log("[VoiceMaster] Loop paused, ignoring speech result");return}if(s.text&&this.shouldBeListening){const r=s.text;this.consecutiveFailures=0,this.processTranscript(r),this.shouldRestart&&this.shouldBeListening&&oe.startListening().catch(i=>{console.log("[VoiceMaster] startListening error after result:",i)})}}),console.log("[VoiceMaster] Starting BlindfoldNative session..."),await oe.startSession(),console.log("[VoiceMaster] Starting BlindfoldNative listening..."),await oe.startListening(),this.isListening=!0,this.consecutiveFailures=0,console.log("[VoiceMaster] Started native - isListening=true, shouldBeListening="+this.shouldBeListening),(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!0),await sb(),!0}catch(s){return console.error("[VoiceMaster] Failed to start native:",s),this.lastErrorTime=Date.now(),this.consecutiveFailures++,this.consecutiveFailures>=Ei.MAX_CONSECUTIVE_FAILURES?(console.log("[VoiceMaster] Too many failures, mic is busy"),this.micBusy=!0,this.isListening=!1,this.onMicBusyChange&&this.onMicBusyChange(!0),this.onRetryNeeded&&this.onRetryNeeded(),!1):(this.shouldBeListening&&this.scheduleRestart(),!1)}finally{this.isStarting=!1}}startWeb(){try{const t=window.SpeechRecognition||window.webkitSpeechRecognition;return t?(this.webRecognition=new t,this.webRecognition.continuous=!0,this.webRecognition.interimResults=!1,this.webRecognition.lang="en-US",this.webRecognition.onresult=n=>{const s=n.results[n.results.length-1];if(s.isFinal&&this.shouldBeListening){const r=s[0].transcript;this.processTranscript(r)}},this.webRecognition.onerror=n=>{console.log("[VoiceMaster] Web error:",n.error),n.error!=="aborted"&&n.error!=="not-allowed"&&this.shouldBeListening&&this.scheduleRestart()},this.webRecognition.onend=()=>{var n;this.isListening=!1,(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!1),this.shouldBeListening&&this.scheduleRestart()},this.webRecognition.onstart=()=>{var n;this.isListening=!0,(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!0)},this.webRecognition.start(),console.log("[VoiceMaster] Started web"),!0):!1}catch(t){return console.error("[VoiceMaster] Failed to start web:",t),!1}}scheduleRestart(){const t=Date.now()-this.lastErrorTime;if(t<3e3&&this.lastErrorTime>0){this.restartTimeout&&clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>{this.scheduleRestart()},3e3-t+100);return}if(this.micBusy){console.log("[VoiceMaster] Mic busy, not scheduling restart");return}this.restartTimeout&&clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>{this.shouldBeListening&&!this.micBusy&&(console.log("[VoiceMaster] Scheduled restart firing via Gatekeeper"),qn?this.triggerRestart():this.startWeb())},500)}async stop(){var t;if(console.log("[VoiceMaster] stop() called - beginning full cleanup"),this.shouldBeListening=!1,this.isPaused=!1,this.micBusy=!1,this.consecutiveFailures=0,this.lastErrorTime=0,this.captureDebounceTimeout&&(clearTimeout(this.captureDebounceTimeout),this.captureDebounceTimeout=null),this.pendingCaptureTranscript="",fr.setActive(this.sessionId,!1),fr.clearPendingForSession(this.sessionId),this.isRegistered&&(fr.unregister(this.sessionId),Zi.unregister(this.sessionId),this.isRegistered=!1),this.restartTimeout&&(clearTimeout(this.restartTimeout),this.restartTimeout=null),qn)try{await oe.stopSession(),this.listenerHandle&&(await this.listenerHandle.remove(),this.listenerHandle=null)}catch(n){console.log("[VoiceMaster] Stop error:",n)}else if(this.webRecognition){try{this.webRecognition.stop()}catch(n){console.log("[VoiceMaster] Web stop error:",n)}this.webRecognition=null}this.isListening=!1,(t=this.config)!=null&&t.onListeningChange&&this.config.onListeningChange(!1),this.config=null,console.log("[VoiceMaster] Stopped - all state reset, session fully cleaned")}async stopAndWait(){var n;if(this.shouldBeListening=!1,!this.listenerHandle&&!this.webRecognition){console.log("[VoiceMaster] stopAndWait: nothing to stop, fast path"),this.micBusy=!1,this.isListening=!1,this.consecutiveFailures=0,this.isPaused=!1,this.config=null;return}console.log("[VoiceMaster] stopAndWait: active session, stopping...");const t=async()=>{let s=!1;const r=this.stop().then(()=>{s=!0});if(await Promise.race([r,new Promise(i=>setTimeout(i,500))]),!s){if(console.warn("[VoiceMaster] Normal stop timed out, forcing native stop"),qn)try{await oe.stopSession()}catch{}if(this.listenerHandle){try{await this.listenerHandle.remove()}catch{}this.listenerHandle=null}if(this.webRecognition){try{this.webRecognition.stop()}catch{}this.webRecognition=null}}};await Promise.race([t(),new Promise(s=>setTimeout(()=>{console.warn("[VoiceMaster] 800ms hard timeout - forcing cleanup"),s()},800))]),this.micBusy=!1,this.isListening=!1,this.consecutiveFailures=0,this.isPaused=!1,this.listenerHandle=null,this.stateListenerHandle=null,this.webRecognition=null,(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!1),this.config=null,console.log("[VoiceMaster] stopAndWait complete - state reset")}getIsListening(){return this.isListening}getMode(){var t;return((t=this.config)==null?void 0:t.mode)||null}};Ei.CAPTURE_DEBOUNCE_MS=2e3,Ei.MAX_CONSECUTIVE_FAILURES=3;let _h=Ei;const ht=new _h,Jv={async start(e,t){return ht.start({mode:"raw",onTranscript:e,onListeningChange:t})},async stop(){return ht.stop()},async stopAndWait(){return ht.stopAndWait()},async checkAvailability(){return ht.checkAvailability()},getIsListening(){return ht.getIsListening()},setOnMicBusyChange(e){ht.setOnMicBusyChange(e)},setOnRetryNeeded(e){ht.setOnRetryNeeded(e)},isMicBusy(){return ht.isMicBusy()},resetMicBusy(){ht.resetMicBusy()},mute(e=400){ht.mute(e)},setMute(e,t=400){ht.setMute(e,t)},getIsMuted(){return ht.getIsMuted()},async pauseLoop(){return ht.pauseLoop()},resumeLoop(){ht.resumeLoop()}};function Nu(e){const t=Math.max(400,Math.min(2600,e));if(t<=600){const i=(t-400)/200;return{elo:t,depth:1,randomPercent:Math.round(50-i*20),skillLevel:Math.round(i*2)}}if(t<=800){const i=(t-600)/200;return{elo:t,depth:1+Math.round(i),randomPercent:Math.round(30-i*10),skillLevel:Math.round(2+i*3)}}if(t<=1e3){const i=(t-800)/200;return{elo:t,depth:2+Math.round(i),randomPercent:Math.round(20-i*8),skillLevel:Math.round(5+i*3)}}if(t<=1200){const i=(t-1e3)/200;return{elo:t,depth:3+Math.round(i),randomPercent:Math.round(12-i*5),skillLevel:Math.round(8+i*2)}}if(t<=1400){const i=(t-1200)/200;return{elo:t,depth:4+Math.round(i),randomPercent:Math.round(7-i*4),skillLevel:Math.round(10+i*2)}}if(t<=1600){const i=(t-1400)/200;return{elo:t,depth:5+Math.round(i),randomPercent:Math.round(3-i*3),skillLevel:Math.round(12+i*3)}}if(t<=1800){const i=(t-1600)/200;return{elo:t,depth:6,randomPercent:0,skillLevel:Math.round(15+i*2)}}const n=(t-1800)/800,s=2e5;return{elo:t,depth:0,randomPercent:0,skillLevel:Math.round(17+n*3),nodes:Math.round(s+n*(2e6-s))}}function PR(e){return e<=600?"Beginner":e<=800?"Novice":e<=1e3?"Casual":e<=1200?"Intermediate":e<=1400?"Club Player":e<=1600?"Strong Club":e<=1800?"Expert":e<=2e3?"Master":e<=2200?"National Master":e<=2400?"International Master":"Grandmaster"}const ib=[400,600,800,1e3,1200,1400,1600,1800,2e3,2200,2400,2600];ib.map(e=>{const t=Nu(e);return{id:`elo_${e}`,elo:e,difficulty:`elo_${e}`,depth:t.depth,randomPercent:t.randomPercent}});const Ep=ib,TR={kingsideCornerWhite:["f1","g1","h1","f2","g2","h2"],queensideCornerWhite:["a1","b1","c1","a2","b2","c2"],kingsideCornerBlack:["f8","g8","h8","f7","g7","h7"],queensideCornerBlack:["a8","b8","c8","a7","b7","c7"],center:["d4","e4","d5","e5"],extendedCenter:["c3","d3","e3","f3","c4","f4","c5","f5","c6","d6","e6","f6"],kingside:["f1","g1","h1","f2","g2","h2","f3","g3","h3","f4","g4","h4","f5","g5","h5","f6","g6","h6","f7","g7","h7","f8","g8","h8"],queenside:["a1","b1","c1","a2","b2","c2","a3","b3","c3","a4","b4","c4","a5","b5","c5","a6","b6","c6","a7","b7","c7","a8","b8","c8"],corners:["a1","h1","a8","h8"]},ab="blindfold-chess-stats-v2",lb="blindfold-chess-settings",RR="blindfold-chess-stats",cb={moves10:{total:0,count:0},moves20:{total:0,count:0},moves30:{total:0,count:0},moves40:{total:0,count:0},moves50plus:{total:0,count:0}},ub={opening:{total:0,count:0},middlegame:{total:0,count:0},endgame:{total:0,count:0}},Pp={wins:0,draws:0,losses:0,lastGamePeekTime:0,totalPeekTime:0,gamesWithPeeks:0,bestPeekFreeStreak:0,lastGamePeekFreeStreak:0,lastGameAvgResponseTime:0,totalResponseTime:0,totalResponseMoves:0,bestClarityScore:0,lastClarityScore:0,lastVoicePurity:0,bestVoicePurity:0,tierStats:{},visualizationCeiling:0,visualizationCeilingElo:null,clarityByMoveCount:{...cb},totalPeekFreeGames:0,totalGamesPlayed:0,reconstructionVoiceInputs:0,reconstructionTouchInputs:0,gameVoiceMoves:0,gameTouchMoves:0,responseTimeByPhase:{...ub},lastGameEndgameDrift:0,voiceCorrections:0,voiceCommandsTotal:0,lastGameVoiceCorrections:0,mentalBlurCount:0,squareInquiryHeatmap:{},totalSquareInquiries:0,stockfishThresholdElo:null,longestGame:0,fastestWin:0,currentWinStreak:0,bestWinStreak:0,currentPeekFreeStreak:0,bestPeekFreeGameStreak:0,blindfoldGamesPlayed:0,assistedGamesCount:0,lastGameWasAssisted:!1},ex={boardReconstructionEnabled:!1,botThinkingTimeEnabled:!1,keepAwakeEnabled:!0};function tx(e){const t={...Pp,...e};return t.clarityByMoveCount={...cb,...e.clarityByMoveCount||{}},t.responseTimeByPhase={...ub,...e.responseTimeByPhase||{}},t.tierStats=e.tierStats||{},t.squareInquiryHeatmap=e.squareInquiryHeatmap||{},t}function Za(){try{const e=localStorage.getItem(ab);if(e){const n=JSON.parse(e);return tx(n)}const t=localStorage.getItem(RR);if(t){const n=JSON.parse(t),s=tx(n);return Tp(s),s}}catch(e){console.error("Failed to load stats:",e)}return{...Pp}}function Tp(e){try{localStorage.setItem(ab,JSON.stringify(e))}catch(t){console.error("Failed to save stats:",t)}}function Ah(){try{const e=localStorage.getItem(lb);if(e){const t=JSON.parse(e);return{...ex,...t}}}catch(e){console.error("Failed to load settings:",e)}return{...ex}}function Lh(e){try{localStorage.setItem(lb,JSON.stringify(e))}catch(t){console.error("Failed to save settings:",t)}}function MR(e){return e<=10?"moves10":e<=20?"moves20":e<=30?"moves30":e<=40?"moves40":"moves50plus"}function db(e){return{opening:e.slice(0,10),middlegame:e.slice(10,30),endgame:e.slice(30)}}function _R(e){const t=db(e);if(t.opening.length===0||t.endgame.length===0)return 0;const n=t.opening.reduce((i,a)=>i+a,0)/t.opening.length,s=t.endgame.reduce((i,a)=>i+a,0)/t.endgame.length;if(n===0)return 0;const r=(s-n)/n*100;return Math.max(0,Math.round(r))}function AR(e){if(e.length<3)return 0;const n=e.reduce((s,r)=>s+r,0)/e.length*2;return e.filter(s=>s>n).length}function LR(e){for(const t of Ep){const n=e[t];if(!n||n.totalGames<3)continue;if(n.wins/n.totalGames<.5)return t}return null}function IR(e){let t=0;for(const n of Ep){const s=e[n];s&&s.peekFreeWins>0&&n>t&&(t=n)}return{elo:t}}function $R(e,t,n=0,s=[],r,i,a){const l=Za(),c=(a==null?void 0:a.botElo)||1200,u=(a==null?void 0:a.wasPeekFree)??t===0,f=(a==null?void 0:a.totalMoves)||s.length,m=(a==null?void 0:a.voiceCorrections)||0,h=(a==null?void 0:a.voiceCommands)||0,y=(a==null?void 0:a.reconstructionVoiceInputs)||0,p=(a==null?void 0:a.reconstructionTouchInputs)||0,g=(a==null?void 0:a.gameVoiceMoves)||0,w=(a==null?void 0:a.gameTouchMoves)||0,x=(a==null?void 0:a.squareInquiries)||[],v=(a==null?void 0:a.isBlindfold)??!1,b=(a==null?void 0:a.wasAssisted)??!1;e==="win"?l.wins++:e==="loss"?l.losses++:l.draws++,l.totalGamesPlayed++,v?(l.blindfoldGamesPlayed++,l.lastGamePeekTime=t,t>0&&(l.totalPeekTime+=t,l.gamesWithPeeks++),u?(l.totalPeekFreeGames++,l.currentPeekFreeStreak++,l.currentPeekFreeStreak>l.bestPeekFreeGameStreak&&(l.bestPeekFreeGameStreak=l.currentPeekFreeStreak)):l.currentPeekFreeStreak=0,l.lastGamePeekFreeStreak=n,n>l.bestPeekFreeStreak&&(l.bestPeekFreeStreak=n)):(l.lastGamePeekTime=0,l.lastGamePeekFreeStreak=0,l.currentPeekFreeStreak=0),l.tierStats[c]||(l.tierStats[c]={wins:0,losses:0,draws:0,peekFreeWins:0,totalPeeks:0,totalGames:0});const S=l.tierStats[c];S.totalGames++,e==="win"?(S.wins++,v&&u&&S.peekFreeWins++,l.currentWinStreak++,l.currentWinStreak>l.bestWinStreak&&(l.bestWinStreak=l.currentWinStreak),(l.fastestWin===0||f<l.fastestWin)&&(l.fastestWin=f)):e==="loss"?(S.losses++,l.currentWinStreak=0):S.draws++,v&&!u&&S.totalPeeks++,f>l.longestGame&&(l.longestGame=f);const N=IR(l.tierStats);if(l.visualizationCeiling=N.elo,l.visualizationCeilingElo=N.elo||null,l.stockfishThresholdElo=LR(l.tierStats),s.length>0){const j=s.reduce((C,R)=>C+R,0)/s.length;l.lastGameAvgResponseTime=j,l.totalResponseTime+=s.reduce((C,R)=>C+R,0),l.totalResponseMoves+=s.length;const k=db(s);k.opening.length>0&&(l.responseTimeByPhase.opening.total+=k.opening.reduce((C,R)=>C+R,0),l.responseTimeByPhase.opening.count+=k.opening.length),k.middlegame.length>0&&(l.responseTimeByPhase.middlegame.total+=k.middlegame.reduce((C,R)=>C+R,0),l.responseTimeByPhase.middlegame.count+=k.middlegame.length),k.endgame.length>0&&(l.responseTimeByPhase.endgame.total+=k.endgame.reduce((C,R)=>C+R,0),l.responseTimeByPhase.endgame.count+=k.endgame.length),l.lastGameEndgameDrift=_R(s),l.mentalBlurCount+=AR(s)}else l.lastGameAvgResponseTime=0,l.lastGameEndgameDrift=0;if(l.lastGameWasAssisted=b,b&&l.assistedGamesCount++,r!==void 0){const j=b?Math.min(r,50):r;l.lastClarityScore=j,j>l.bestClarityScore&&(l.bestClarityScore=j);const k=MR(f);l.clarityByMoveCount[k].total+=j,l.clarityByMoveCount[k].count++}if(i!==void 0&&(l.lastVoicePurity=i,i>l.bestVoicePurity&&(l.bestVoicePurity=i)),l.voiceCorrections+=m,l.voiceCommandsTotal+=h,l.lastGameVoiceCorrections=m,l.reconstructionVoiceInputs+=y,l.reconstructionTouchInputs+=p,l.gameVoiceMoves+=g,l.gameTouchMoves+=w,x.length>0){l.totalSquareInquiries+=x.length;for(const j of x){const k=j.toLowerCase();l.squareInquiryHeatmap[k]=(l.squareInquiryHeatmap[k]||0)+1}}return Tp(l),l}function OR(e){return e.totalResponseMoves===0?0:e.totalResponseTime/e.totalResponseMoves}function fb(e){const t=e.blindfoldGamesPlayed||0;return t===0?0:Math.round(e.totalPeekFreeGames/t*100)}function DR(e){const t=e.gameVoiceMoves+e.gameTouchMoves;return t===0?{voice:0,touch:0}:{voice:Math.round(e.gameVoiceMoves/t*100),touch:Math.round(e.gameTouchMoves/t*100)}}function hb(e){const t=e.responseTimeByPhase.opening,n=e.responseTimeByPhase.middlegame,s=e.responseTimeByPhase.endgame;return{opening:t.count>0?Math.round(t.total/t.count):0,middlegame:n.count>0?Math.round(n.total/n.count):0,endgame:s.count>0?Math.round(s.total/s.count):0}}function mb(e){const t=e.clarityByMoveCount;return{moves10:t.moves10.count>0?Math.round(t.moves10.total/t.moves10.count):0,moves20:t.moves20.count>0?Math.round(t.moves20.total/t.moves20.count):0,moves30:t.moves30.count>0?Math.round(t.moves30.total/t.moves30.count):0,moves40:t.moves40.count>0?Math.round(t.moves40.total/t.moves40.count):0,moves50plus:t.moves50plus.count>0?Math.round(t.moves50plus.total/t.moves50plus.count):0}}function pb(e){return e.voiceCommandsTotal===0?0:Math.round(e.voiceCorrections/e.voiceCommandsTotal*100)}function BR(e){const t={kingsideCornerWhite:0,queensideCornerWhite:0,kingsideCornerBlack:0,queensideCornerBlack:0,center:0,extendedCenter:0,kingside:0,queenside:0,corners:0};for(const[n,s]of Object.entries(e.squareInquiryHeatmap))for(const[r,i]of Object.entries(TR))i.includes(n)&&(t[r]+=s||0);return t}function gb(e,t=5){return Object.entries(e.squareInquiryHeatmap).map(([n,s])=>({square:n,count:s||0})).sort((n,s)=>s.count-n.count).slice(0,t)}function FR(e,t){if(e.totalSquareInquiries===0)return 0;const n=e.squareInquiryHeatmap[t.toLowerCase()]||0,s=Math.max(...Object.values(e.squareInquiryHeatmap).map(r=>r||0),1);return Math.round(n/s*100)}function zR(e,t){const n=e.tierStats[t];return!n||n.totalGames===0?0:Math.round(n.wins/n.totalGames*100)}function Ni(e){return e===0?"-":e<1e3?`${Math.round(e)}ms`:`${(e/1e3).toFixed(1)}s`}function VR(){Tp({...Pp})}function qR(e){const t=[],n=mb(e);n.moves20>0&&n.moves40>0&&n.moves20-n.moves40>20&&t.push({type:"warning",category:"visualization",title:"Clarity Degradation",message:`Your accuracy drops from ${n.moves20}% at 20 moves to ${n.moves40}% at 40 moves. Focus on endgame visualization training.`}),e.visualizationCeiling>0&&t.push({type:"success",category:"visualization",title:"Visualization Ceiling",message:`You've beaten a ${e.visualizationCeiling} Elo bot without peeking! Keep pushing higher.`});const s=fb(e);s>50&&t.push({type:"success",category:"visualization",title:"Peek-Free Progress",message:`${s}% of your games are peek-free. Your visualization is improving!`});const r=hb(e);if(r.endgame>0&&r.opening>0){const f=(r.endgame-r.opening)/r.opening*100;f>50&&t.push({type:"warning",category:"cognitive",title:"Endgame Drift Detected",message:`Your endgame response time is ${Math.round(f)}% slower than opening. The open board may be causing "mental blur."`})}const i=pb(e);i>20&&t.push({type:"tip",category:"cognitive",title:"Voice Accuracy",message:`You correct ${i}% of voice commands. Try speaking more slowly or using full square names.`}),e.stockfishThresholdElo&&t.push({type:"info",category:"tactical",title:"Stockfish Threshold",message:`Your win rate drops below 50% at ${e.stockfishThresholdElo} Elo. Focus training at this level.`});const a=BR(e),l=gb(e,3);if(l.length>0&&l[0].count>=3){const f=l.map(m=>m.square.toUpperCase()).join(", ");t.push({type:"warning",category:"tactical",title:"Board Blind Spots",message:`You frequently lose track of: ${f}. Focus on visualizing these squares.`})}const c=a.kingside,u=a.queenside;return c>u*2&&c>=5?t.push({type:"tip",category:"tactical",title:"Kingside Visualization",message:"Your mental image of the kingside is weaker. Practice visualizing the f, g, and h files."}):u>c*2&&u>=5&&t.push({type:"tip",category:"tactical",title:"Queenside Visualization",message:"Your mental image of the queenside is weaker. Practice visualizing the a, b, and c files."}),a.corners>=4&&t.push({type:"tip",category:"visualization",title:"Corner Awareness",message:"Your mental board is blurry in the corners (a1, h1, a8, h8). These squares need more focus."}),t}class vb{constructor(t){this.sqlite=t,this._connectionDict=new Map}async initWebStore(){try{return await this.sqlite.initWebStore(),Promise.resolve()}catch(t){return Promise.reject(t)}}async saveToStore(t){try{return await this.sqlite.saveToStore({database:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async saveToLocalDisk(t){try{return await this.sqlite.saveToLocalDisk({database:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async getFromLocalDiskToStore(t){const n=t??!0;try{return await this.sqlite.getFromLocalDiskToStore({overwrite:n}),Promise.resolve()}catch(s){return Promise.reject(s)}}async echo(t){try{const n=await this.sqlite.echo({value:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isSecretStored(){try{const t=await this.sqlite.isSecretStored();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async setEncryptionSecret(t){try{return await this.sqlite.setEncryptionSecret({passphrase:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async changeEncryptionSecret(t,n){try{return await this.sqlite.changeEncryptionSecret({passphrase:t,oldpassphrase:n}),Promise.resolve()}catch(s){return Promise.reject(s)}}async clearEncryptionSecret(){try{return await this.sqlite.clearEncryptionSecret(),Promise.resolve()}catch(t){return Promise.reject(t)}}async checkEncryptionSecret(t){try{const n=await this.sqlite.checkEncryptionSecret({passphrase:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async addUpgradeStatement(t,n){try{return t.endsWith(".db")&&(t=t.slice(0,-3)),await this.sqlite.addUpgradeStatement({database:t,upgrade:n}),Promise.resolve()}catch(s){return Promise.reject(s)}}async createConnection(t,n,s,r,i){try{t.endsWith(".db")&&(t=t.slice(0,-3)),await this.sqlite.createConnection({database:t,encrypted:n,mode:s,version:r,readonly:i});const a=new nx(t,i,this.sqlite),l=i?`RO_${t}`:`RW_${t}`;return this._connectionDict.set(l,a),Promise.resolve(a)}catch(a){return Promise.reject(a)}}async closeConnection(t,n){try{t.endsWith(".db")&&(t=t.slice(0,-3)),await this.sqlite.closeConnection({database:t,readonly:n});const s=n?`RO_${t}`:`RW_${t}`;return this._connectionDict.delete(s),Promise.resolve()}catch(s){return Promise.reject(s)}}async isConnection(t,n){const s={};t.endsWith(".db")&&(t=t.slice(0,-3));const r=n?`RO_${t}`:`RW_${t}`;return s.result=this._connectionDict.has(r),Promise.resolve(s)}async retrieveConnection(t,n){t.endsWith(".db")&&(t=t.slice(0,-3));const s=n?`RO_${t}`:`RW_${t}`;if(this._connectionDict.has(s)){const r=this._connectionDict.get(s);return typeof r<"u"?Promise.resolve(r):Promise.reject(`Connection ${t} is undefined`)}else return Promise.reject(`Connection ${t} does not exist`)}async getNCDatabasePath(t,n){try{const s=await this.sqlite.getNCDatabasePath({path:t,database:n});return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async createNCConnection(t,n){try{await this.sqlite.createNCConnection({databasePath:t,version:n});const s=new nx(t,!0,this.sqlite),r=`RO_${t})`;return this._connectionDict.set(r,s),Promise.resolve(s)}catch(s){return Promise.reject(s)}}async closeNCConnection(t){try{await this.sqlite.closeNCConnection({databasePath:t});const n=`RO_${t})`;return this._connectionDict.delete(n),Promise.resolve()}catch(n){return Promise.reject(n)}}async isNCConnection(t){const n={},s=`RO_${t})`;return n.result=this._connectionDict.has(s),Promise.resolve(n)}async retrieveNCConnection(t){if(this._connectionDict.has(t)){const n=`RO_${t})`,s=this._connectionDict.get(n);return typeof s<"u"?Promise.resolve(s):Promise.reject(`Connection ${t} is undefined`)}else return Promise.reject(`Connection ${t} does not exist`)}async isNCDatabase(t){try{const n=await this.sqlite.isNCDatabase({databasePath:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async retrieveAllConnections(){return this._connectionDict}async closeAllConnections(){const t=new Map;try{for(const n of this._connectionDict.keys()){const s=n.substring(3),r=n.substring(0,3)==="RO_";await this.sqlite.closeConnection({database:s,readonly:r}),t.set(n,null)}for(const n of t.keys())this._connectionDict.delete(n);return Promise.resolve()}catch(n){return Promise.reject(n)}}async checkConnectionsConsistency(){try{const t=[...this._connectionDict.keys()],n=[],s=[];for(const i of t)n.push(i.substring(0,2)),s.push(i.substring(3));const r=await this.sqlite.checkConnectionsConsistency({dbNames:s,openModes:n});return r.result||(this._connectionDict=new Map),Promise.resolve(r)}catch(t){return this._connectionDict=new Map,Promise.reject(t)}}async importFromJson(t){try{const n=await this.sqlite.importFromJson({jsonstring:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isJsonValid(t){try{const n=await this.sqlite.isJsonValid({jsonstring:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async copyFromAssets(t){const n=t??!0;try{return await this.sqlite.copyFromAssets({overwrite:n}),Promise.resolve()}catch(s){return Promise.reject(s)}}async getFromHTTPRequest(t,n){const s=n??!0;try{return await this.sqlite.getFromHTTPRequest({url:t,overwrite:s}),Promise.resolve()}catch(r){return Promise.reject(r)}}async isDatabaseEncrypted(t){t.endsWith(".db")&&(t=t.slice(0,-3));try{const n=await this.sqlite.isDatabaseEncrypted({database:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isInConfigEncryption(){try{const t=await this.sqlite.isInConfigEncryption();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isInConfigBiometricAuth(){try{const t=await this.sqlite.isInConfigBiometricAuth();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isDatabase(t){t.endsWith(".db")&&(t=t.slice(0,-3));try{const n=await this.sqlite.isDatabase({database:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async getDatabaseList(){try{const n=(await this.sqlite.getDatabaseList()).values;n.sort();const s={values:n};return Promise.resolve(s)}catch(t){return Promise.reject(t)}}async getMigratableDbList(t){const n=t||"default";try{const s=await this.sqlite.getMigratableDbList({folderPath:n});return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async addSQLiteSuffix(t,n){const s=t||"default",r=n||[];try{const i=await this.sqlite.addSQLiteSuffix({folderPath:s,dbNameList:r});return Promise.resolve(i)}catch(i){return Promise.reject(i)}}async deleteOldDatabases(t,n){const s=t||"default",r=n||[];try{const i=await this.sqlite.deleteOldDatabases({folderPath:s,dbNameList:r});return Promise.resolve(i)}catch(i){return Promise.reject(i)}}async moveDatabasesAndAddSuffix(t,n){const s=t||"default",r=n||[];return this.sqlite.moveDatabasesAndAddSuffix({folderPath:s,dbNameList:r})}}class nx{constructor(t,n,s){this.dbName=t,this.readonly=n,this.sqlite=s}getConnectionDBName(){return this.dbName}getConnectionReadOnly(){return this.readonly}async open(){try{return await this.sqlite.open({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async close(){try{return await this.sqlite.close({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async beginTransaction(){try{const t=await this.sqlite.beginTransaction({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async commitTransaction(){try{const t=await this.sqlite.commitTransaction({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async rollbackTransaction(){try{const t=await this.sqlite.rollbackTransaction({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isTransactionActive(){try{const t=await this.sqlite.isTransactionActive({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async loadExtension(t){try{return await this.sqlite.loadExtension({database:this.dbName,path:t,readonly:this.readonly}),Promise.resolve()}catch(n){return Promise.reject(n)}}async enableLoadExtension(t){try{return await this.sqlite.enableLoadExtension({database:this.dbName,toggle:t,readonly:this.readonly}),Promise.resolve()}catch(n){return Promise.reject(n)}}async getUrl(){try{const t=await this.sqlite.getUrl({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getVersion(){try{const t=await this.sqlite.getVersion({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getTableList(){try{const t=await this.sqlite.getTableList({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async execute(t,n=!0,s=!0){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const r=await this.sqlite.execute({database:this.dbName,statements:t,transaction:n,readonly:!1,isSQL92:s});return Promise.resolve(r)}}catch(r){return Promise.reject(r)}}async query(t,n,s=!0){let r;try{return n&&n.length>0?r=await this.sqlite.query({database:this.dbName,statement:t,values:n,readonly:this.readonly,isSQL92:!0}):r=await this.sqlite.query({database:this.dbName,statement:t,values:[],readonly:this.readonly,isSQL92:s}),r=await this.reorderRows(r),Promise.resolve(r)}catch(i){return Promise.reject(i)}}async run(t,n,s=!0,r="no",i=!0){let a;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(n&&n.length>0?a=await this.sqlite.run({database:this.dbName,statement:t,values:n,transaction:s,readonly:!1,returnMode:r,isSQL92:!0}):a=await this.sqlite.run({database:this.dbName,statement:t,values:[],transaction:s,readonly:!1,returnMode:r,isSQL92:i}),a.changes=await this.reorderRows(a.changes),Promise.resolve(a))}catch(l){return Promise.reject(l)}}async executeSet(t,n=!0,s="no",r=!0){let i;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(i=await this.sqlite.executeSet({database:this.dbName,set:t,transaction:n,readonly:!1,returnMode:s,isSQL92:r}),i.changes=await this.reorderRows(i.changes),Promise.resolve(i))}catch(a){return Promise.reject(a)}}async isExists(){try{const t=await this.sqlite.isDBExists({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isTable(t){try{const n=await this.sqlite.isTableExists({database:this.dbName,table:t,readonly:this.readonly});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isDBOpen(){try{const t=await this.sqlite.isDBOpen({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async delete(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteDatabase({database:this.dbName,readonly:!1}),Promise.resolve())}catch(t){return Promise.reject(t)}}async createSyncTable(){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const t=await this.sqlite.createSyncTable({database:this.dbName,readonly:!1});return Promise.resolve(t)}}catch(t){return Promise.reject(t)}}async setSyncDate(t){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.setSyncDate({database:this.dbName,syncdate:t,readonly:!1}),Promise.resolve())}catch(n){return Promise.reject(n)}}async getSyncDate(){try{const t=await this.sqlite.getSyncDate({database:this.dbName,readonly:this.readonly});let n="";return t.syncDate>0&&(n=new Date(t.syncDate*1e3).toISOString()),Promise.resolve(n)}catch(t){return Promise.reject(t)}}async exportToJson(t,n=!1){try{const s=await this.sqlite.exportToJson({database:this.dbName,jsonexportmode:t,readonly:this.readonly,encrypted:n});return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async deleteExportedRows(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteExportedRows({database:this.dbName,readonly:!1}),Promise.resolve())}catch(t){return Promise.reject(t)}}async executeTransaction(t,n=!0){let s=0,r=!1;if(this.readonly)return Promise.reject("not allowed in read-only mode");if(await this.sqlite.beginTransaction({database:this.dbName}),r=await this.sqlite.isTransactionActive({database:this.dbName}),!r)return Promise.reject("After Begin Transaction, no transaction active");try{for(const l of t){if(typeof l!="object"||!("statement"in l))throw new Error("Error a task.statement must be provided");if("values"in l&&l.values&&l.values.length>0){const c=l.statement.toUpperCase().includes("RETURNING")?"all":"no",u=await this.sqlite.run({database:this.dbName,statement:l.statement,values:l.values,transaction:!1,readonly:!1,returnMode:c,isSQL92:n});if(u.changes.changes<0)throw new Error("Error in transaction method run ");s+=u.changes.changes}else{const c=await this.sqlite.execute({database:this.dbName,statements:l.statement,transaction:!1,readonly:!1});if(c.changes.changes<0)throw new Error("Error in transaction method execute ");s+=c.changes.changes}}const i=await this.sqlite.commitTransaction({database:this.dbName});s+=i.changes.changes;const a={changes:{changes:s}};return Promise.resolve(a)}catch(i){const a=i.message?i.message:i;return await this.sqlite.rollbackTransaction({database:this.dbName}),Promise.reject(a)}}async reorderRows(t){const n=t;if(t!=null&&t.values&&typeof t.values[0]=="object"&&Object.keys(t.values[0]).includes("ios_columns")){const s=t.values[0].ios_columns,r=[];for(let i=1;i<t.values.length;i++){const a=t.values[i],l={};for(const c of s)l[c]=a[c];r.push(l)}n.values=r}return Promise.resolve(n)}}const xb=lo("CapacitorSQLite",{web:()=>da(()=>import("./web-CjUieWAO.js"),[]).then(e=>new e.CapacitorSQLiteWeb),electron:()=>window.CapacitorCustomPlatform.plugins.CapacitorSQLite}),af="blindfold_chess";let Ma=null,vt=null,ku=!1,zc=!1,gc=null;async function yb(){return zc?!0:gc||(gc=KR(),gc)}async function KR(){try{if(ku=jn.isNativePlatform(),!ku)return console.log("[TrainingStats] Web platform - using localStorage fallback"),zc=!0,!0;Ma=new vb(xb);const e=await Ma.checkConnectionsConsistency(),t=(await Ma.isConnection(af,!1)).result;e.result&&t?vt=await Ma.retrieveConnection(af,!1):vt=await Ma.createConnection(af,!1,"no-encryption",1,!1),await vt.open(),await vt.execute(`
      CREATE TABLE IF NOT EXISTS training_stats (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        mode TEXT NOT NULL,
        score REAL NOT NULL,
        streak INTEGER NOT NULL DEFAULT 0,
        variant TEXT DEFAULT NULL,
        achieved_at TEXT NOT NULL
      );
    `);try{const r=(await vt.query("PRAGMA table_info(training_stats);")).values||[],i=r.some(l=>l.name==="streak"),a=r.some(l=>l.name==="variant");i||(await vt.execute("ALTER TABLE training_stats ADD COLUMN streak INTEGER NOT NULL DEFAULT 0;"),console.log("[TrainingStats] Migrated: Added streak column")),a||(await vt.execute("ALTER TABLE training_stats ADD COLUMN variant TEXT DEFAULT NULL;"),console.log("[TrainingStats] Migrated: Added variant column"))}catch(s){console.warn("[TrainingStats] Migration check failed:",s)}return console.log("[TrainingStats] Database initialized successfully"),zc=!0,!0}catch(e){return console.error("[TrainingStats] Failed to initialize database:",e),zc=!0,!1}}function wb(){try{const e=localStorage.getItem("blindfold_training_stats");return e?JSON.parse(e):[]}catch{return[]}}function WR(e){localStorage.setItem("blindfold_training_stats",JSON.stringify(e))}async function UR(e,t,n=0,s){var i,a;await yb();const r=new Date().toISOString();try{if(!ku){const u=wb(),f=u.length>0?Math.max(...u.map(h=>h.id))+1:1,m={id:f,mode:e,score:t,streak:n,variant:s,achievedAt:r};return u.unshift(m),WR(u),console.log("[TrainingStats] Session saved to localStorage:",f,s?`(${s})`:""),f}if(!vt)return console.error("[TrainingStats] Database not initialized"),null;const c=await vt.run(`
      INSERT INTO training_stats (mode, score, streak, variant, achieved_at)
      VALUES (?, ?, ?, ?, ?);
    `,[e,t,n,s||null,r]);return console.log("[TrainingStats] Session saved:",(i=c.changes)==null?void 0:i.lastId,s?`(${s})`:""),((a=c.changes)==null?void 0:a.lastId)||null}catch(l){return console.error("[TrainingStats] Failed to save session:",l instanceof Error?l.message:String(l)),null}}async function ju(){var t,n,s,r,i,a,l,c,u,f,m,h,y,p,g,w,x,v,b,S,N,j,k,C,R,P,D,A,z,_,F,q,G,T,$,Q,U,ve,H,xe,ie,se,V,X,ee,O,re,de,ye,Le;await yb();const e={colorBlitzBest:null,colorBlitzBestDate:null,colorBlitzBestStreak:null,coordinateSniperBest:null,coordinateSniperBestDate:null,coordinateSniperBestStreak:null,voiceMoveMasterBest:null,voiceMoveMasterBestDate:null,voiceMoveMasterBestStreak:null,knightsPathBest:null,knightsPathBestDate:null,knightsPathAudioBest:null,knightsPathAudioBestDate:null,endgameDrillsBest:null,endgameDrillsBestDate:null,endgameKQvKBest:null,endgameKQvKBestDate:null,endgameKRvKBest:null,endgameKRvKBestDate:null,blindfoldMarathonBest:null,blindfoldMarathonBestDate:null,marathonStreakEasy:null,marathonStreakMedium:null,marathonStreakHard:null,totalSessions:0,recentSessions:[]};try{if(!ku){const M=wb(),qe=M.filter(J=>J.mode==="color_blitz"),lt=M.filter(J=>J.mode==="coordinate_sniper"),un=M.filter(J=>J.mode==="voice_move_master"),Z=M.filter(J=>J.mode==="knights_path"&&J.variant!=="audio"),qs=M.filter(J=>J.mode==="knights_path"&&J.variant==="audio"),_t=M.filter(J=>J.mode==="endgame_drills"),Pt=M.filter(J=>J.mode==="endgame_drills"&&J.variant==="kq_vs_k"),ws=M.filter(J=>J.mode==="endgame_drills"&&J.variant==="kr_vs_k"),tn=M.filter(J=>J.mode==="blindfold_marathon"),Ks=M.filter(J=>J.mode==="blindfold_marathon"&&J.variant==="easy"),Tn=M.filter(J=>J.mode==="blindfold_marathon"&&J.variant==="medium"),Ee=M.filter(J=>J.mode==="blindfold_marathon"&&J.variant==="hard");let ar=null,bs=null,Er=null;if(qe.length>0){const J=qe.reduce((We,Ut)=>Ut.score>We.score?Ut:We);ar=J.score,bs=J.achievedAt,Er=qe.reduce((We,Ut)=>(Ut.streak||0)>(We.streak||0)?Ut:We).streak||null}let Ws=null,Us=null,ho=null;if(lt.length>0){const J=lt.reduce((We,Ut)=>Ut.score<We.score?Ut:We);Ws=J.score,Us=J.achievedAt,ho=lt.reduce((We,Ut)=>(Ut.streak||0)>(We.streak||0)?Ut:We).streak||null}let lr=null,Rn=null,Ss=null;if(un.length>0){const J=un.reduce((We,Ut)=>Ut.score>We.score?Ut:We);lr=J.score,Rn=J.achievedAt,Ss=un.reduce((We,Ut)=>(Ut.streak||0)>(We.streak||0)?Ut:We).streak||null}let cr=null,Zn=null;if(Z.length>0){const J=Z.reduce((dt,We)=>We.score<dt.score?We:dt);cr=J.score,Zn=J.achievedAt}let Jo=null,us=null;if(qs.length>0){const J=qs.reduce((dt,We)=>We.score<dt.score?We:dt);Jo=J.score,us=J.achievedAt}let Pr=null,ei=null;if(_t.length>0){const J=_t.reduce((dt,We)=>We.score<dt.score?We:dt);Pr=J.score,ei=J.achievedAt}let ti=null,mo=null;if(Pt.length>0){const J=Pt.reduce((dt,We)=>We.score<dt.score?We:dt);ti=J.score,mo=J.achievedAt}let ni=null,Ot=null;if(ws.length>0){const J=ws.reduce((dt,We)=>We.score<dt.score?We:dt);ni=J.score,Ot=J.achievedAt}let E=null,I=null;if(tn.length>0){const J=tn.reduce((dt,We)=>We.score<dt.score?We:dt);E=J.score,I=J.achievedAt}const L=Ks.length>0&&Math.max(...Ks.map(J=>J.streak||0))||null,Ne=Tn.length>0&&Math.max(...Tn.map(J=>J.streak||0))||null,Me=Ee.length>0&&Math.max(...Ee.map(J=>J.streak||0))||null;return{colorBlitzBest:ar,colorBlitzBestDate:bs,colorBlitzBestStreak:Er,coordinateSniperBest:Ws,coordinateSniperBestDate:Us,coordinateSniperBestStreak:ho,voiceMoveMasterBest:lr,voiceMoveMasterBestDate:Rn,voiceMoveMasterBestStreak:Ss,knightsPathBest:cr,knightsPathBestDate:Zn,knightsPathAudioBest:Jo,knightsPathAudioBestDate:us,endgameDrillsBest:Pr,endgameDrillsBestDate:ei,endgameKQvKBest:ti,endgameKQvKBestDate:mo,endgameKRvKBest:ni,endgameKRvKBestDate:Ot,blindfoldMarathonBest:E,blindfoldMarathonBestDate:I,marathonStreakEasy:L,marathonStreakMedium:Ne,marathonStreakHard:Me,totalSessions:M.length,recentSessions:M.slice(0,10)}}if(!vt)return e;const ke=`
      SELECT score as best_score, achieved_at
      FROM training_stats
      WHERE mode = 'color_blitz'
      ORDER BY score DESC
      LIMIT 1;
    `,ae=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'color_blitz';
    `,Se=`
      SELECT score as best_time, achieved_at
      FROM training_stats
      WHERE mode = 'coordinate_sniper'
      ORDER BY score ASC
      LIMIT 1;
    `,Te=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'coordinate_sniper';
    `,De=`
      SELECT score as best_score, achieved_at
      FROM training_stats
      WHERE mode = 'voice_move_master'
      ORDER BY score DESC
      LIMIT 1;
    `,Ie=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'voice_move_master';
    `,B=`
      SELECT score as best_time, achieved_at
      FROM training_stats
      WHERE mode = 'knights_path' AND (variant IS NULL OR variant != 'audio')
      ORDER BY score ASC
      LIMIT 1;
    `,K=`
      SELECT score as best_time, achieved_at
      FROM training_stats
      WHERE mode = 'knights_path' AND variant = 'audio'
      ORDER BY score ASC
      LIMIT 1;
    `,me=`
      SELECT score as best_time, achieved_at
      FROM training_stats
      WHERE mode = 'endgame_drills'
      ORDER BY score ASC
      LIMIT 1;
    `,ce=`
      SELECT score as best_time, achieved_at
      FROM training_stats
      WHERE mode = 'endgame_drills' AND variant = 'kq_vs_k'
      ORDER BY score ASC
      LIMIT 1;
    `,ue=`
      SELECT score as best_time, achieved_at
      FROM training_stats
      WHERE mode = 'endgame_drills' AND variant = 'kr_vs_k'
      ORDER BY score ASC
      LIMIT 1;
    `,Fe=`
      SELECT score as best_time, achieved_at
      FROM training_stats
      WHERE mode = 'blindfold_marathon'
      ORDER BY score ASC
      LIMIT 1;
    `,Re=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'blindfold_marathon' AND variant = 'easy';
    `,_e=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'blindfold_marathon' AND variant = 'medium';
    `,rt=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'blindfold_marathon' AND variant = 'hard';
    `,Mt="SELECT COUNT(*) as total FROM training_stats;",et=`
      SELECT id, mode, score, streak, variant, achieved_at as achievedAt
      FROM training_stats
      ORDER BY achieved_at DESC
      LIMIT 10;
    `,Wt=await vt.query(ke),Jt=await vt.query(ae),En=await vt.query(Se),Pn=await vt.query(Te),Qt=await vt.query(De),St=await vt.query(Ie),zn=await vt.query(B),en=await vt.query(K),ys=await vt.query(me),ir=await vt.query(ce),Xn=await vt.query(ue),cn=await vt.query(Fe),Cr=await vt.query(Re),Ve=await vt.query(_e),Zo=await vt.query(rt),va=await vt.query(Mt),fo=await vt.query(et);return{colorBlitzBest:((n=(t=Wt.values)==null?void 0:t[0])==null?void 0:n.best_score)||null,colorBlitzBestDate:((r=(s=Wt.values)==null?void 0:s[0])==null?void 0:r.achieved_at)||null,colorBlitzBestStreak:((a=(i=Jt.values)==null?void 0:i[0])==null?void 0:a.best_streak)||null,coordinateSniperBest:((c=(l=En.values)==null?void 0:l[0])==null?void 0:c.best_time)||null,coordinateSniperBestDate:((f=(u=En.values)==null?void 0:u[0])==null?void 0:f.achieved_at)||null,coordinateSniperBestStreak:((h=(m=Pn.values)==null?void 0:m[0])==null?void 0:h.best_streak)||null,voiceMoveMasterBest:((p=(y=Qt.values)==null?void 0:y[0])==null?void 0:p.best_score)||null,voiceMoveMasterBestDate:((w=(g=Qt.values)==null?void 0:g[0])==null?void 0:w.achieved_at)||null,voiceMoveMasterBestStreak:((v=(x=St.values)==null?void 0:x[0])==null?void 0:v.best_streak)||null,knightsPathBest:((S=(b=zn.values)==null?void 0:b[0])==null?void 0:S.best_time)||null,knightsPathBestDate:((j=(N=zn.values)==null?void 0:N[0])==null?void 0:j.achieved_at)||null,knightsPathAudioBest:((C=(k=en.values)==null?void 0:k[0])==null?void 0:C.best_time)||null,knightsPathAudioBestDate:((P=(R=en.values)==null?void 0:R[0])==null?void 0:P.achieved_at)||null,endgameDrillsBest:((A=(D=ys.values)==null?void 0:D[0])==null?void 0:A.best_time)||null,endgameDrillsBestDate:((_=(z=ys.values)==null?void 0:z[0])==null?void 0:_.achieved_at)||null,endgameKQvKBest:((q=(F=ir.values)==null?void 0:F[0])==null?void 0:q.best_time)||null,endgameKQvKBestDate:((T=(G=ir.values)==null?void 0:G[0])==null?void 0:T.achieved_at)||null,endgameKRvKBest:((Q=($=Xn.values)==null?void 0:$[0])==null?void 0:Q.best_time)||null,endgameKRvKBestDate:((ve=(U=Xn.values)==null?void 0:U[0])==null?void 0:ve.achieved_at)||null,blindfoldMarathonBest:((xe=(H=cn.values)==null?void 0:H[0])==null?void 0:xe.best_time)||null,blindfoldMarathonBestDate:((se=(ie=cn.values)==null?void 0:ie[0])==null?void 0:se.achieved_at)||null,marathonStreakEasy:((X=(V=Cr.values)==null?void 0:V[0])==null?void 0:X.best_streak)||null,marathonStreakMedium:((O=(ee=Ve.values)==null?void 0:ee[0])==null?void 0:O.best_streak)||null,marathonStreakHard:((de=(re=Zo.values)==null?void 0:re[0])==null?void 0:de.best_streak)||null,totalSessions:((Le=(ye=va.values)==null?void 0:ye[0])==null?void 0:Le.total)||0,recentSessions:fo.values||[]}}catch(ke){return console.error("[TrainingStats] Failed to get stats:",ke),e}}function HR(){return localStorage.getItem("blindfold_daily_goals")!=="false"}function GR(e){localStorage.setItem("blindfold_daily_goals",e?"true":"false")}function QR(){const[e,t]=d.useState(!1),[n,s]=d.useState("unknown"),[r,i]=d.useState(!1),[a,l]=d.useState(fC()),[c,u]=d.useState(Ah),[f,m]=d.useState(HR()),{toast:h}=Rl();d.useEffect(()=>{e&&(Cp().then(s),u(Ah()))},[e]),d.useEffect(()=>{const b=()=>t(!1);return window.addEventListener("closeAllDialogs",b),()=>window.removeEventListener("closeAllDialogs",b)},[]);const y=async()=>{i(!0);try{const b=await wR();s(b.status)}finally{i(!1)}},p=b=>{l(b),hC(b)},g=()=>{jn.isNativePlatform()&&alert("To enable microphone access, please go to your device Settings > Apps > Blindfold Chess > Permissions > Microphone and select 'Allow'.")},x=(()=>{switch(n){case"granted":return{icon:Ft,text:"Enabled",color:"text-green-500"};case"denied":case"prompt":return{icon:er,text:"Not enabled",color:"text-muted-foreground"};case"prompt-with-rationale":return{icon:er,text:"Blocked",color:"text-destructive"};default:return{icon:er,text:"Unknown",color:"text-muted-foreground"}}})(),v=x.icon;return o.jsxs(Yi,{open:e,onOpenChange:t,children:[o.jsx(wu,{asChild:!0,children:o.jsxs(Y,{variant:"ghost",size:"icon","data-testid":"button-settings",children:[o.jsx(E2,{className:"h-5 w-5"}),o.jsx("span",{className:"sr-only",children:"Settings"})]})}),o.jsxs(zo,{className:"sm:max-w-md",children:[o.jsxs(Vo,{children:[o.jsx(qo,{children:"Settings"}),o.jsx(X1,{children:"Configure app preferences"})]}),o.jsxs("div",{className:"space-y-6 pt-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"font-semibold",children:"Notifications"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[a?o.jsx(u2,{className:"h-4 w-4 text-muted-foreground"}):o.jsx(c2,{className:"h-4 w-4 text-muted-foreground"}),o.jsx(Vt,{htmlFor:"toast-toggle",className:"text-sm",children:"Toast notifications"})]}),o.jsx(Sn,{id:"toast-toggle",checked:a,onCheckedChange:p,"data-testid":"switch-toast-notifications",className:"data-[state=checked]:bg-amber-400"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Show brief pop-up messages for game events"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"font-semibold",children:"Display"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(R2,{className:"h-4 w-4 text-muted-foreground"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(Vt,{htmlFor:"keep-awake-toggle",className:"text-sm",children:"Keep Screen Awake"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Prevents auto-sleep during games"})]})]}),o.jsx(Sn,{id:"keep-awake-toggle",checked:c.keepAwakeEnabled,onCheckedChange:b=>{const S={...c,keepAwakeEnabled:b};u(S),Lh(S),window.dispatchEvent(new CustomEvent("blindfoldSettingsChanged",{detail:S})),h({title:b?"Screen will stay active":"Screen may auto-sleep",description:b?"Screen will stay active during matches":"Normal screen timeout restored"})},"data-testid":"switch-keep-awake",className:"data-[state=checked]:bg-amber-400"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"font-semibold",children:"Training"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Co,{className:"h-4 w-4 text-muted-foreground"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(Vt,{htmlFor:"daily-goals-toggle",className:"text-sm",children:"Daily Goals"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Show daily training reminders"})]})]}),o.jsx(Sn,{id:"daily-goals-toggle",checked:f,onCheckedChange:b=>{m(b),GR(b),h({title:b?"Daily goals enabled":"Daily goals disabled",description:b?"You'll see training reminders":"Training reminders hidden"})},"data-testid":"switch-daily-goals",className:"data-[state=checked]:bg-amber-400"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"font-semibold",children:"Voice Control"}),o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(v,{className:`h-4 w-4 ${x.color}`}),o.jsxs("span",{className:"text-sm",children:["Microphone: ",o.jsx("span",{className:x.color,children:x.text})]})]})}),n==="granted"?o.jsx("p",{className:"text-xs text-muted-foreground",children:"Voice commands are ready to use"}):n==="prompt-with-rationale"?o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:"Microphone access was blocked. Voice control requires microphone permission for blindfold training."}),o.jsxs(Y,{variant:"outline",size:"sm",onClick:g,className:"w-full","data-testid":"button-open-settings",children:[o.jsx(Oc,{className:"h-3 w-3 mr-2"}),"Open Device Settings"]})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable microphone access for voice-controlled chess moves"}),o.jsxs(Y,{variant:"outline",size:"sm",onClick:y,disabled:r,className:"w-full","data-testid":"button-request-mic",children:[o.jsx(Ft,{className:"h-3 w-3 mr-2"}),r?"Requesting...":"Enable Microphone"]})]})]})]})]})]})}function YR(){const[e,t]=d.useState(!1);return d.useEffect(()=>{const n=()=>t(!1);return window.addEventListener("closeAllDialogs",n),()=>window.removeEventListener("closeAllDialogs",n)},[]),o.jsxs(Yi,{open:e,onOpenChange:t,children:[o.jsx(wu,{asChild:!0,children:o.jsxs(Y,{variant:"ghost",size:"icon","data-testid":"button-about",children:[o.jsx(N2,{className:"h-5 w-5"}),o.jsx("span",{className:"sr-only",children:"About"})]})}),o.jsxs(zo,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[o.jsx(Vo,{children:o.jsx(qo,{children:"About Blindfold Chess"})}),o.jsxs("div",{className:"space-y-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Privacy Policy"}),o.jsxs("p",{className:"text-muted-foreground",children:[o.jsx("strong",{children:"100% Offline & Private"}),"  This app is designed to be completely offline. We do not collect, store, or transmit any personal data, chess games, or voice recordings to external servers. All game history and settings are stored locally on your device."]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Open Source & Licenses"}),o.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Stockfish Chess Engine:"})," Licensed under the GNU GPL v3.",o.jsxs("a",{href:"https://stockfishchess.org",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 hover:underline ml-1 inline-flex items-center gap-1",children:["stockfishchess.org ",o.jsx(Oc,{className:"h-3 w-3"})]})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"2D Chess Imagery:"}),' "Cburnett" piece set by Colin M.L. Burnett (CC BY-SA 3.0).']}),o.jsxs("li",{children:[o.jsx("strong",{children:"Capacitor Runtime:"})," Licensed under the MIT License."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Vosk Speech Recognition:"})," Offline voice recognition by Alpha Cephei, licensed under Apache 2.0.",o.jsxs("a",{href:"https://alphacephei.com/vosk",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 hover:underline ml-1 inline-flex items-center gap-1",children:["alphacephei.com/vosk ",o.jsx(Oc,{className:"h-3 w-3"})]})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Project Links"}),o.jsx("div",{className:"flex flex-col gap-2",children:o.jsxs("a",{href:"https://github.com/official-stockfish/Stockfish",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 hover:underline inline-flex items-center gap-1",children:[o.jsx(Oc,{className:"h-3 w-3"})," Stockfish Source Code"]})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Technical Info"}),o.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Engine:"})," Stockfish 17.1 (WASM)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Version:"})," 1.0.0"]}),o.jsxs("li",{className:"flex items-center gap-1",children:[o.jsx(vw,{className:"h-3 w-3"}),o.jsx("strong",{children:"Auto-Sleep:"})," Disabled during active games"]})]})]})]})]})]})}var bb="AlertDialog",[XR,a3]=Yn(bb,[M1]),jr=M1(),Sb=e=>{const{__scopeAlertDialog:t,...n}=e,s=jr(t);return o.jsx(H1,{...s,...n,modal:!0})};Sb.displayName=bb;var ZR="AlertDialogTrigger",JR=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,r=jr(n);return o.jsx(G1,{...r,...s,ref:t})});JR.displayName=ZR;var eM="AlertDialogPortal",Nb=e=>{const{__scopeAlertDialog:t,...n}=e,s=jr(t);return o.jsx(Q1,{...s,...n})};Nb.displayName=eM;var tM="AlertDialogOverlay",kb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,r=jr(n);return o.jsx(wp,{...r,...s,ref:t})});kb.displayName=tM;var Di="AlertDialogContent",[nM,sM]=XR(Di),rM=$y("AlertDialogContent"),jb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:s,...r}=e,i=jr(n),a=d.useRef(null),l=Ye(t,a),c=d.useRef(null);return o.jsx(XT,{contentName:Di,titleName:Cb,docsSlug:"alert-dialog",children:o.jsx(nM,{scope:n,cancelRef:c,children:o.jsxs(bp,{role:"alertdialog",...i,...r,ref:l,onOpenAutoFocus:Pe(r.onOpenAutoFocus,u=>{var f;u.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[o.jsx(rM,{children:s}),o.jsx(iM,{contentRef:a})]})})})});jb.displayName=Di;var Cb="AlertDialogTitle",Eb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,r=jr(n);return o.jsx(Sp,{...r,...s,ref:t})});Eb.displayName=Cb;var Pb="AlertDialogDescription",Tb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,r=jr(n);return o.jsx(Np,{...r,...s,ref:t})});Tb.displayName=Pb;var oM="AlertDialogAction",Rb=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,r=jr(n);return o.jsx(kp,{...r,...s,ref:t})});Rb.displayName=oM;var Mb="AlertDialogCancel",_b=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,{cancelRef:r}=sM(Mb,n),i=jr(n),a=Ye(t,r);return o.jsx(kp,{...i,...s,ref:a})});_b.displayName=Mb;var iM=({contentRef:e})=>{const t=`\`${Di}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Di}\` by passing a \`${Pb}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Di}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},aM=Sb,lM=Nb,Ab=kb,Lb=jb,Ib=Rb,$b=_b,Ob=Eb,Db=Tb;const sr=aM,cM=lM,Bb=d.forwardRef(({className:e,...t},n)=>o.jsx(Ab,{className:Ke("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Bb.displayName=Ab.displayName;const Ls=d.forwardRef(({className:e,...t},n)=>o.jsxs(cM,{children:[o.jsx(Bb,{}),o.jsx(Lb,{ref:n,className:Ke("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Ls.displayName=Lb.displayName;const Is=({className:e,...t})=>o.jsx("div",{className:Ke("flex flex-col space-y-2 text-center sm:text-left",e),...t});Is.displayName="AlertDialogHeader";const $s=({className:e,...t})=>o.jsx("div",{className:Ke("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});$s.displayName="AlertDialogFooter";const Os=d.forwardRef(({className:e,...t},n)=>o.jsx(Ob,{ref:n,className:Ke("text-lg font-semibold",e),...t}));Os.displayName=Ob.displayName;const Ds=d.forwardRef(({className:e,...t},n)=>o.jsx(Db,{ref:n,className:Ke("text-sm text-muted-foreground",e),...t}));Ds.displayName=Db.displayName;const Bs=d.forwardRef(({className:e,...t},n)=>o.jsx(Ib,{ref:n,className:Ke(dp(),e),...t}));Bs.displayName=Ib.displayName;const Fs=d.forwardRef(({className:e,...t},n)=>o.jsx($b,{ref:n,className:Ke(dp({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Fs.displayName=$b.displayName;var uM=d.createContext(void 0);function $l(e){const t=d.useContext(uM);return e||t||"ltr"}var lf="rovingFocusGroup.onEntryFocus",dM={bubbles:!1,cancelable:!0},ld="RovingFocusGroup",[Ih,Fb,fM]=Hm(ld),[hM,zb]=Yn(ld,[fM]),[mM,pM]=hM(ld),Vb=d.forwardRef((e,t)=>o.jsx(Ih.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(Ih.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(gM,{...e,ref:t})})}));Vb.displayName=ld;var gM=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:r=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...m}=e,h=d.useRef(null),y=Ye(t,h),p=$l(i),[g=null,w]=Oo({prop:a,defaultProp:l,onChange:c}),[x,v]=d.useState(!1),b=Kt(u),S=Fb(n),N=d.useRef(!1),[j,k]=d.useState(0);return d.useEffect(()=>{const C=h.current;if(C)return C.addEventListener(lf,b),()=>C.removeEventListener(lf,b)},[b]),o.jsx(mM,{scope:n,orientation:s,dir:p,loop:r,currentTabStopId:g,onItemFocus:d.useCallback(C=>w(C),[w]),onItemShiftTab:d.useCallback(()=>v(!0),[]),onFocusableItemAdd:d.useCallback(()=>k(C=>C+1),[]),onFocusableItemRemove:d.useCallback(()=>k(C=>C-1),[]),children:o.jsx(Be.div,{tabIndex:x||j===0?-1:0,"data-orientation":s,...m,ref:y,style:{outline:"none",...e.style},onMouseDown:Pe(e.onMouseDown,()=>{N.current=!0}),onFocus:Pe(e.onFocus,C=>{const R=!N.current;if(C.target===C.currentTarget&&R&&!x){const P=new CustomEvent(lf,dM);if(C.currentTarget.dispatchEvent(P),!P.defaultPrevented){const D=S().filter(q=>q.focusable),A=D.find(q=>q.active),z=D.find(q=>q.id===g),F=[A,z,...D].filter(Boolean).map(q=>q.ref.current);Wb(F,f)}}N.current=!1}),onBlur:Pe(e.onBlur,()=>v(!1))})})}),qb="RovingFocusGroupItem",Kb=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:r=!1,tabStopId:i,...a}=e,l=Zr(),c=i||l,u=pM(qb,n),f=u.currentTabStopId===c,m=Fb(n),{onFocusableItemAdd:h,onFocusableItemRemove:y}=u;return d.useEffect(()=>{if(s)return h(),()=>y()},[s,h,y]),o.jsx(Ih.ItemSlot,{scope:n,id:c,focusable:s,active:r,children:o.jsx(Be.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:Pe(e.onMouseDown,p=>{s?u.onItemFocus(c):p.preventDefault()}),onFocus:Pe(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:Pe(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){u.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const g=yM(p,u.orientation,u.dir);if(g!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let x=m().filter(v=>v.focusable).map(v=>v.ref.current);if(g==="last")x.reverse();else if(g==="prev"||g==="next"){g==="prev"&&x.reverse();const v=x.indexOf(p.currentTarget);x=u.loop?wM(x,v+1):x.slice(v+1)}setTimeout(()=>Wb(x))}})})})});Kb.displayName=qb;var vM={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function xM(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function yM(e,t,n){const s=xM(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return vM[s]}function Wb(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function wM(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var bM=Vb,SM=Kb,Rp="Tabs",[NM,l3]=Yn(Rp,[zb]),Ub=zb(),[kM,Mp]=NM(Rp),Hb=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:r,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=e,f=$l(l),[m,h]=Oo({prop:s,onChange:r,defaultProp:i});return o.jsx(kM,{scope:n,baseId:Zr(),value:m,onValueChange:h,orientation:a,dir:f,activationMode:c,children:o.jsx(Be.div,{dir:f,"data-orientation":a,...u,ref:t})})});Hb.displayName=Rp;var Gb="TabsList",Qb=d.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...r}=e,i=Mp(Gb,n),a=Ub(n);return o.jsx(bM,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:s,children:o.jsx(Be.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:t})})});Qb.displayName=Gb;var Yb="TabsTrigger",Xb=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:r=!1,...i}=e,a=Mp(Yb,n),l=Ub(n),c=eS(a.baseId,s),u=tS(a.baseId,s),f=s===a.value;return o.jsx(SM,{asChild:!0,...l,focusable:!r,active:f,children:o.jsx(Be.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:c,...i,ref:t,onMouseDown:Pe(e.onMouseDown,m=>{!r&&m.button===0&&m.ctrlKey===!1?a.onValueChange(s):m.preventDefault()}),onKeyDown:Pe(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&a.onValueChange(s)}),onFocus:Pe(e.onFocus,()=>{const m=a.activationMode!=="manual";!f&&!r&&m&&a.onValueChange(s)})})})});Xb.displayName=Yb;var Zb="TabsContent",Jb=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:r,children:i,...a}=e,l=Mp(Zb,n),c=eS(l.baseId,s),u=tS(l.baseId,s),f=s===l.value,m=d.useRef(f);return d.useEffect(()=>{const h=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(h)},[]),o.jsx(zs,{present:r||f,children:({present:h})=>o.jsx(Be.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:h&&i})})});Jb.displayName=Zb;function eS(e,t){return`${e}-trigger-${t}`}function tS(e,t){return`${e}-content-${t}`}var jM=Hb,nS=Qb,sS=Xb,rS=Jb;const ha=jM,Xo=d.forwardRef(({className:e,...t},n)=>o.jsx(nS,{ref:n,className:Ke("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));Xo.displayName=nS.displayName;const In=d.forwardRef(({className:e,...t},n)=>o.jsx(sS,{ref:n,className:Ke("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));In.displayName=sS.displayName;const ki=d.forwardRef(({className:e,...t},n)=>o.jsx(rS,{ref:n,className:Ke("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));ki.displayName=rS.displayName;const Ze=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Ke("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",e),...t}));Ze.displayName="Card";const xt=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Ke("flex flex-col space-y-1.5 p-6",e),...t}));xt.displayName="CardHeader";const yt=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Ke("text-2xl font-semibold leading-none tracking-tight",e),...t}));yt.displayName="CardTitle";const Ct=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Ke("text-sm text-muted-foreground",e),...t}));Ct.displayName="CardDescription";const it=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Ke("p-6 pt-0",e),...t}));it.displayName="CardContent";const CM=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Ke("flex items-center p-6 pt-0",e),...t}));CM.displayName="CardFooter";const EM=Xu("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function ct({className:e,variant:t,...n}){return o.jsx("div",{className:Ke(EM({variant:t}),e),...n})}var _p="Progress",Ap=100,[PM,c3]=Yn(_p),[TM,RM]=PM(_p),oS=d.forwardRef((e,t)=>{const{__scopeProgress:n,value:s=null,max:r,getValueLabel:i=MM,...a}=e;(r||r===0)&&!sx(r)&&console.error(_M(`${r}`,"Progress"));const l=sx(r)?r:Ap;s!==null&&!rx(s,l)&&console.error(AM(`${s}`,"Progress"));const c=rx(s,l)?s:null,u=Cu(c)?i(c,l):void 0;return o.jsx(TM,{scope:n,value:c,max:l,children:o.jsx(Be.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Cu(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":lS(c,l),"data-value":c??void 0,"data-max":l,...a,ref:t})})});oS.displayName=_p;var iS="ProgressIndicator",aS=d.forwardRef((e,t)=>{const{__scopeProgress:n,...s}=e,r=RM(iS,n);return o.jsx(Be.div,{"data-state":lS(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...s,ref:t})});aS.displayName=iS;function MM(e,t){return`${Math.round(e/t*100)}%`}function lS(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Cu(e){return typeof e=="number"}function sx(e){return Cu(e)&&!isNaN(e)&&e>0}function rx(e,t){return Cu(e)&&!isNaN(e)&&e<=t&&e>=0}function _M(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Ap}\`.`}function AM(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Ap} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var cS=oS,LM=aS;const Jr=d.forwardRef(({className:e,value:t,...n},s)=>o.jsx(cS,{ref:s,className:Ke("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...n,children:o.jsx(LM,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Jr.displayName=cS.displayName;var IM="Separator",ox="horizontal",$M=["horizontal","vertical"],uS=d.forwardRef((e,t)=>{const{decorative:n,orientation:s=ox,...r}=e,i=OM(s)?s:ox,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return o.jsx(Be.div,{"data-orientation":i,...l,...r,ref:t})});uS.displayName=IM;function OM(e){return $M.includes(e)}var dS=uS;const Xs=d.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...s},r)=>o.jsx(dS,{ref:r,decorative:n,orientation:t,className:Ke("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));Xs.displayName=dS.displayName;function cf({insight:e}){const t={info:o.jsx(mv,{className:"h-4 w-4"}),warning:o.jsx(_2,{className:"h-4 w-4"}),success:o.jsx(p2,{className:"h-4 w-4"}),tip:o.jsx(mv,{className:"h-4 w-4"})},n={info:"text-blue-500",warning:"text-amber-500",success:"text-green-500",tip:"text-purple-500"};return o.jsxs("div",{className:"flex gap-3 p-3 rounded-md bg-muted/50",children:[o.jsx("div",{className:n[e.type],children:t[e.type]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium",children:e.title}),o.jsx("p",{className:"text-xs text-muted-foreground",children:e.message})]})]})}function Vn({label:e,value:t,subValue:n}){return o.jsxs("div",{className:"flex items-center justify-between py-2",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:e}),o.jsxs("div",{className:"text-right",children:[o.jsx("span",{className:"font-medium",children:t}),n&&o.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:n})]})]})}function DM({stats:e}){const t=["a","b","c","d","e","f","g","h"],n=["8","7","6","5","4","3","2","1"],s=r=>r===0?"bg-muted/30":r<25?"bg-amber-200 dark:bg-amber-900/40":r<50?"bg-amber-400 dark:bg-amber-700/60":r<75?"bg-red-400 dark:bg-red-700/70":"bg-red-600 dark:bg-red-600/80";return o.jsx("div",{className:"grid grid-cols-8 gap-0.5 aspect-square max-w-[200px] mx-auto",children:n.map(r=>t.map(i=>{const a=`${i}${r}`,l=FR(e,a);return o.jsx("div",{className:`aspect-square ${s(l)} rounded-sm flex items-center justify-center`,title:`${a.toUpperCase()}: ${e.squareInquiryHeatmap[a]||0} inquiries`,children:l>50&&o.jsx("span",{className:"text-[6px] text-white font-bold",children:a})},a)}))})}function _a(e){const t=Math.floor(e/1e3),n=Math.floor(e%1e3/100);return`${t}.${n}s`}function BM({stats:e}){const t=d.useMemo(()=>qR(e),[e]),n=fb(e),s=DR(e),r=hb(e),i=mb(e),a=pb(e),l=OR(e),c=gb(e,5),[u,f]=d.useState(null);d.useEffect(()=>{ju().then(f);const p=()=>{ju().then(f)};return window.addEventListener("trainingStatsUpdated",p),()=>{window.removeEventListener("trainingStatsUpdated",p)}},[]);const m=t.filter(p=>p.category==="visualization"),h=t.filter(p=>p.category==="cognitive"),y=t.filter(p=>p.category==="tactical");return o.jsxs(ha,{defaultValue:"tactical",className:"w-full",children:[o.jsxs(Xo,{className:"grid w-full grid-cols-4 mb-4",children:[o.jsxs(In,{value:"tactical",className:"flex items-center gap-1 text-xs",children:[o.jsx(Co,{className:"h-3 w-3"}),o.jsx("span",{className:"hidden sm:inline",children:"Tactics"})]}),o.jsxs(In,{value:"cognitive",className:"flex items-center gap-1 text-xs",children:[o.jsx(vl,{className:"h-3 w-3"}),o.jsx("span",{className:"hidden sm:inline",children:"Mind"})]}),o.jsxs(In,{value:"visualization",className:"flex items-center gap-1 text-xs",children:[o.jsx(Ju,{className:"h-3 w-3"}),o.jsx("span",{className:"hidden sm:inline",children:"Vision"})]}),o.jsxs(In,{value:"training",className:"flex items-center gap-1 text-xs",children:[o.jsx(hw,{className:"h-3 w-3"}),o.jsx("span",{className:"hidden sm:inline",children:"Training"})]})]}),o.jsxs(ki,{value:"visualization",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[o.jsxs(Ze,{children:[o.jsxs(xt,{className:"pb-2",children:[o.jsxs(yt,{className:"text-sm flex items-center gap-2",children:[o.jsx(wn,{className:"h-4 w-4 text-amber-500"}),"Visualization Ceiling"]}),o.jsx(Ct,{className:"text-xs",children:"The strongest opponent you've beaten without peeking at the board"})]}),o.jsx(it,{children:e.visualizationCeiling>0?o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-3xl font-bold text-amber-500",children:e.visualizationCeiling}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Highest Elo beaten without peeking"}),e.visualizationCeilingElo&&o.jsxs(ct,{variant:"outline",className:"mt-2",children:[e.visualizationCeilingElo," Elo"]})]}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Beat a bot without peeking to set your ceiling!"})})]}),o.jsxs(Ze,{children:[o.jsxs(xt,{className:"pb-2",children:[o.jsx(yt,{className:"text-sm",children:"Peek-Free Progress"}),o.jsx(Ct,{className:"text-xs",children:"How often you complete games without looking at the board"})]}),o.jsxs(it,{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-2xl font-bold",children:[n,"%"]}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.totalPeekFreeGames," of ",e.blindfoldGamesPlayed||0," blindfold games"]})]}),o.jsx(Jr,{value:n,className:"h-2"}),o.jsx(Xs,{}),o.jsx(Vn,{label:"Best Peek-Free Streak",value:`${e.bestPeekFreeGameStreak} games`}),o.jsx(Vn,{label:"Best Peek-Free Moves",value:e.bestPeekFreeStreak,subValue:"in a single game"})]})]}),o.jsxs(Ze,{children:[o.jsxs(xt,{className:"pb-2",children:[o.jsx(yt,{className:"text-sm",children:"Reconstruction by Game Length"}),o.jsx(Ct,{className:"text-xs",children:"How well you remember the board position as games get longer"})]}),o.jsx(it,{className:"space-y-2",children:o.jsx("div",{className:"space-y-2",children:[{label:"10 moves",value:i.moves10},{label:"11-20 moves",value:i.moves20},{label:"21-30 moves",value:i.moves30},{label:"31-40 moves",value:i.moves40},{label:"40+ moves",value:i.moves50plus}].map(({label:p,value:g})=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xs text-muted-foreground w-20",children:p}),o.jsx(Jr,{value:g,className:"flex-1 h-2"}),o.jsx("span",{className:"text-xs font-medium w-10 text-right",children:g>0?`${g}%`:"-"})]},p))})})]}),o.jsxs(Ze,{children:[o.jsxs(xt,{className:"pb-2",children:[o.jsxs(yt,{className:"text-sm flex items-center gap-2",children:[o.jsx(mw,{className:"h-4 w-4"}),"Confusion Heatmap"]}),o.jsx(Ct,{className:"text-xs",children:'Squares you inquire about most often - your mental "blind spots"'})]}),o.jsx(it,{children:e.totalSquareInquiries>0?o.jsxs(o.Fragment,{children:[o.jsx(DM,{stats:e}),o.jsx("p",{className:"text-xs text-muted-foreground text-center mt-3",children:"Red = frequently forgotten, Gray = clear"}),c.length>0&&o.jsxs("div",{className:"mt-4 space-y-1",children:[o.jsx("p",{className:"text-xs font-medium",children:"Top Blind Spots:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:c.map(({square:p,count:g})=>o.jsxs(ct,{variant:"secondary",className:"text-xs",children:[p.toUpperCase()," (",g,")"]},p))})]})]}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Ask about squares during games to see which ones you forget!"})})]}),m.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Insights"}),m.map((p,g)=>o.jsx(cf,{insight:p},g))]})]}),o.jsxs(ki,{value:"cognitive",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[o.jsxs(Ze,{children:[o.jsxs(xt,{className:"pb-2",children:[o.jsxs(yt,{className:"text-sm flex items-center gap-2",children:["Endgame Drift",e.lastGameEndgameDrift>30?o.jsx(Sw,{className:"h-4 w-4 text-red-500"}):o.jsx(Nw,{className:"h-4 w-4 text-green-500"})]}),o.jsx(Ct,{className:"text-xs",children:'Slowing down late-game may indicate "mental blur" from fewer pieces'})]}),o.jsxs(it,{children:[o.jsx("div",{className:"text-center",children:o.jsx("p",{className:`text-3xl font-bold ${e.lastGameEndgameDrift>30?"text-red-500":"text-green-500"}`,children:e.lastGameEndgameDrift>0?`+${e.lastGameEndgameDrift}%`:"0%"})}),e.lastGameEndgameDrift>50&&o.jsx("p",{className:"text-xs text-amber-500 text-center mt-3",children:'High drift may indicate "mental blur" - difficulty tracking fewer pieces'})]})]}),o.jsxs(Ze,{children:[o.jsxs(xt,{className:"pb-2",children:[o.jsx(yt,{className:"text-sm",children:"Voice Accuracy"}),o.jsx(Ct,{className:"text-xs",children:"How often your voice commands are understood correctly"})]}),o.jsxs(it,{children:[o.jsx(Vn,{label:"Total Voice Commands",value:e.voiceCommandsTotal}),o.jsx(Vn,{label:"Corrections Needed",value:e.voiceCorrections}),o.jsx(Vn,{label:"Correction Rate",value:`${a}%`}),o.jsx(Vn,{label:"Last Game Corrections",value:e.lastGameVoiceCorrections})]})]}),o.jsxs(Ze,{children:[o.jsxs(xt,{className:"pb-2",children:[o.jsx(yt,{className:"text-sm",children:"Mental Clarity"}),o.jsx(Ct,{className:"text-xs",children:"Moments when you took much longer than usual - may indicate confusion"})]}),o.jsx(it,{children:o.jsx(Vn,{label:"Mental Blur Events",value:e.mentalBlurCount})})]}),o.jsxs(Ze,{children:[o.jsxs(xt,{className:"pb-2",children:[o.jsx(yt,{className:"text-sm",children:"Voice vs Touch"}),o.jsx(Ct,{className:"text-xs",children:"How you input your moves during games"})]}),o.jsx(it,{children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ft,{className:"h-4 w-4 text-blue-500"}),o.jsxs("span",{className:"font-medium",children:[s.voice,"%"]})]}),o.jsx("div",{className:"flex-1 h-2 bg-muted rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-blue-500",style:{width:`${s.voice}%`}})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"font-medium",children:[s.touch,"%"]}),o.jsx(y2,{className:"h-4 w-4 text-orange-500"})]})]})})]}),h.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Insights"}),h.map((p,g)=>o.jsx(cf,{insight:p},g))]})]}),o.jsxs(ki,{value:"tactical",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[o.jsxs(Ze,{children:[o.jsxs(xt,{className:"pb-2",children:[o.jsx(yt,{className:"text-sm",children:"Overall Record"}),o.jsx(Ct,{className:"text-xs",children:"Your wins, draws, and losses across all games"})]}),o.jsxs(it,{children:[o.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.wins}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Wins"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-2xl font-bold text-gray-500",children:e.draws}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Draws"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-2xl font-bold text-red-600",children:e.losses}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Losses"})]})]}),o.jsxs("p",{className:"text-xs text-muted-foreground text-center mt-3",children:[e.blindfoldGamesPlayed||0," of ",e.totalGamesPlayed," games were blindfold"]}),o.jsx(Xs,{className:"my-4"}),o.jsx(Vn,{label:"Current Win Streak",value:e.currentWinStreak}),o.jsx(Vn,{label:"Best Win Streak",value:e.bestWinStreak}),o.jsx(Vn,{label:"Fastest Win",value:e.fastestWin>0?`${e.fastestWin} moves`:"-"}),o.jsx(Vn,{label:"Longest Game",value:e.longestGame>0?`${e.longestGame} moves`:"-"})]})]}),e.stockfishThresholdElo&&o.jsxs(Ze,{children:[o.jsxs(xt,{className:"pb-2",children:[o.jsxs(yt,{className:"text-sm flex items-center gap-2",children:[o.jsx(Co,{className:"h-4 w-4 text-amber-500"}),"Stockfish Threshold"]}),o.jsx(Ct,{className:"text-xs",children:"The difficulty level where your win rate starts dropping"})]}),o.jsx(it,{children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-3xl font-bold text-amber-500",children:e.stockfishThresholdElo}),o.jsxs(ct,{variant:"outline",className:"mt-2",children:[e.stockfishThresholdElo," Elo"]})]})})]}),o.jsxs(Ze,{children:[o.jsxs(xt,{className:"pb-2",children:[o.jsxs(yt,{className:"text-sm flex items-center gap-2",children:[o.jsx(Ro,{className:"h-4 w-4"}),"Mean Response Time"]}),o.jsx(Ct,{className:"text-xs",children:"How quickly you find moves - faster often means clearer visualization"})]}),o.jsxs(it,{children:[o.jsx("div",{className:"text-center mb-4",children:o.jsx("p",{className:"text-3xl font-bold",children:Ni(l)})}),o.jsx(Xs,{className:"my-4"}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"By Game Phase"}),o.jsx(Vn,{label:"Opening (moves 1-10)",value:Ni(r.opening)}),o.jsx(Vn,{label:"Middlegame (moves 11-30)",value:Ni(r.middlegame)}),o.jsx(Vn,{label:"Endgame (moves 31+)",value:Ni(r.endgame)})]})]})]}),o.jsxs(Ze,{children:[o.jsxs(xt,{className:"pb-2",children:[o.jsx(yt,{className:"text-sm",children:"Win Rate by Rating"}),o.jsx(Ct,{className:"text-xs",children:"Your success rate at each Elo level"})]}),o.jsx(it,{children:o.jsx("div",{className:"space-y-2",children:Ep.map(p=>{const g=e.tierStats[p],w=zR(e,p),x=(g==null?void 0:g.totalGames)||0;return x===0?null:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-xs text-muted-foreground w-24 truncate",children:[p," Elo"]}),o.jsx(Jr,{value:w,className:"flex-1 h-2"}),o.jsxs("span",{className:"text-xs font-medium w-16 text-right",children:[w,"% (",x,"g)"]})]},p)})})})]}),y.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Insights"}),y.map((p,g)=>o.jsx(cf,{insight:p},g))]})]}),o.jsxs(ki,{value:"training",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[o.jsxs(Ze,{children:[o.jsxs(xt,{className:"pb-2",children:[o.jsxs(yt,{className:"text-sm flex items-center gap-2",children:[o.jsx(Ft,{className:"h-4 w-4 text-purple-500"}),"Voice Move Master"]}),o.jsx(Ct,{className:"text-xs",children:"Announce chess moves by voice"})]}),o.jsx(it,{children:u&&u.voiceMoveMasterBest!==null?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Personal Best"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(wn,{className:"h-4 w-4 text-purple-500"}),o.jsx("span",{className:"text-2xl font-bold text-purple-500",children:u.voiceMoveMasterBest}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"moves"})]})]}),u.voiceMoveMasterBestStreak!==null&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Streak"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ii,{className:"h-4 w-4 text-orange-500"}),o.jsx("span",{className:"text-lg font-bold text-orange-500",children:u.voiceMoveMasterBestStreak}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"in a row"})]})]}),u.voiceMoveMasterBestDate&&o.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:["Achieved ",new Date(u.voiceMoveMasterBestDate).toLocaleDateString()]}),u.voiceMoveMasterBest>=15?o.jsx(ct,{className:"bg-purple-500 text-white",children:"Gold Tier"}):u.voiceMoveMasterBest>=8?o.jsx(ct,{variant:"secondary",children:"Silver Tier"}):o.jsx(ct,{variant:"outline",children:"Bronze Tier"})]}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete a Voice Move Master session to set your first record!"})})]}),o.jsxs(Ze,{children:[o.jsxs(xt,{className:"pb-2",children:[o.jsxs(yt,{className:"text-sm flex items-center gap-2",children:[o.jsx(Zm,{className:"h-4 w-4 text-amber-500"}),"Color Blitz"]}),o.jsx(Ct,{className:"text-xs",children:"Name square colors in 60 seconds"})]}),o.jsx(it,{children:u&&u.colorBlitzBest!==null?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Personal Best"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(wn,{className:"h-4 w-4 text-amber-500"}),o.jsx("span",{className:"text-2xl font-bold text-amber-500",children:u.colorBlitzBest}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"correct"})]})]}),u.colorBlitzBestStreak!==null&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Streak"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ii,{className:"h-4 w-4 text-orange-500"}),o.jsx("span",{className:"text-lg font-bold text-orange-500",children:u.colorBlitzBestStreak}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"in a row"})]})]}),u.colorBlitzBestDate&&o.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:["Achieved ",new Date(u.colorBlitzBestDate).toLocaleDateString()]}),u.colorBlitzBest>=40?o.jsx(ct,{className:"bg-amber-500 text-white",children:"Gold Tier"}):u.colorBlitzBest>=20?o.jsx(ct,{variant:"secondary",children:"Silver Tier"}):o.jsx(ct,{variant:"outline",children:"Bronze Tier"})]}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete a Color Blitz session to set your first record!"})})]}),o.jsxs(Ze,{children:[o.jsxs(xt,{className:"pb-2",children:[o.jsxs(yt,{className:"text-sm flex items-center gap-2",children:[o.jsx(Co,{className:"h-4 w-4 text-blue-500"}),"Coordinate Sniper"]}),o.jsx(Ct,{className:"text-xs",children:"Find 10 squares as fast as possible"})]}),o.jsx(it,{children:u&&u.coordinateSniperBest!==null?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Personal Best"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(wn,{className:"h-4 w-4 text-blue-500"}),o.jsx("span",{className:"text-2xl font-bold text-blue-500",children:_a(u.coordinateSniperBest)})]})]}),u.coordinateSniperBestStreak!==null&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Streak"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ii,{className:"h-4 w-4 text-orange-500"}),o.jsx("span",{className:"text-lg font-bold text-orange-500",children:u.coordinateSniperBestStreak}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"in a row"})]})]}),u.coordinateSniperBestDate&&o.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:["Achieved ",new Date(u.coordinateSniperBestDate).toLocaleDateString()]}),u.coordinateSniperBest<=1e4?o.jsx(ct,{className:"bg-blue-500 text-white",children:"Gold Tier"}):u.coordinateSniperBest<=2e4?o.jsx(ct,{variant:"secondary",children:"Silver Tier"}):o.jsx(ct,{variant:"outline",children:"Bronze Tier"})]}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete a Coordinate Sniper session to set your first record!"})})]}),o.jsxs(Ze,{children:[o.jsxs(xt,{className:"pb-2",children:[o.jsxs(yt,{className:"text-sm flex items-center gap-2",children:[o.jsx(Ll,{className:"h-4 w-4 text-green-500"}),"Knight's Path"]}),o.jsx(Ct,{className:"text-xs",children:"Navigate knight through 5 paths"})]}),o.jsx(it,{children:u&&(u.knightsPathBest!==null||u.knightsPathAudioBest!==null)?o.jsxs("div",{className:"space-y-3",children:[u.knightsPathBest!==null&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Fastest (Touch)"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(wn,{className:"h-4 w-4 text-green-500"}),o.jsx("span",{className:"text-xl font-bold text-green-500",children:_a(u.knightsPathBest)})]})]}),u.knightsPathAudioBest!==null&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Fastest (Voice)"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ft,{className:"h-4 w-4 text-purple-500"}),o.jsx("span",{className:"text-xl font-bold text-purple-500",children:_a(u.knightsPathAudioBest)})]})]})]}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete a Knight's Path session to set your first record!"})})]}),o.jsxs(Ze,{children:[o.jsxs(xt,{className:"pb-2",children:[o.jsxs(yt,{className:"text-sm flex items-center gap-2",children:[o.jsx(Co,{className:"h-4 w-4 text-red-500"}),"Endgame Drills"]}),o.jsx(Ct,{className:"text-xs",children:"Checkmate practice by endgame type"})]}),o.jsx(it,{children:u&&(u.endgameKQvKBest!==null||u.endgameKRvKBest!==null)?o.jsxs("div",{className:"space-y-3",children:[u.endgameKQvKBest!==null&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"K&Q vs K"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(wn,{className:"h-4 w-4 text-red-500"}),o.jsx("span",{className:"text-xl font-bold text-red-500",children:_a(u.endgameKQvKBest)})]})]}),u.endgameKRvKBest!==null&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"K&R vs K"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(wn,{className:"h-4 w-4 text-red-500"}),o.jsx("span",{className:"text-xl font-bold text-red-500",children:_a(u.endgameKRvKBest)})]})]})]}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete an endgame drill to set your first record!"})})]}),o.jsxs(Ze,{children:[o.jsxs(xt,{className:"pb-2",children:[o.jsxs(yt,{className:"text-sm flex items-center gap-2",children:[o.jsx(vl,{className:"h-4 w-4 text-orange-500"}),"Blindfold Marathon"]}),o.jsx(Ct,{className:"text-xs",children:"Best streaks per difficulty level"})]}),o.jsx(it,{children:u&&(u.marathonStreakEasy!==null||u.marathonStreakMedium!==null||u.marathonStreakHard!==null)?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Easy (10-20 moves)"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ii,{className:"h-4 w-4 text-green-500"}),o.jsx("span",{className:"text-lg font-bold text-green-500",children:u.marathonStreakEasy||0}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"streak"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Medium (20-30 moves)"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ii,{className:"h-4 w-4 text-amber-500"}),o.jsx("span",{className:"text-lg font-bold text-amber-500",children:u.marathonStreakMedium||0}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"streak"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Hard (30-40 moves)"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ii,{className:"h-4 w-4 text-red-500"}),o.jsx("span",{className:"text-lg font-bold text-red-500",children:u.marathonStreakHard||0}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"streak"})]})]})]}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete Blindfold Marathon rounds to track your streaks!"})})]})]})]})}function FM(e){return e!==null?{comment:e,variations:[]}:{variations:[]}}function zM(e,t,n,s,r){const i={move:e,variations:r};return t&&(i.suffix=t),n&&(i.nag=n),s!==null&&(i.comment=s),i}function VM(...e){const[t,...n]=e;let s=t;for(const r of n)r!==null&&(s.variations=[r,...r.variations],r.variations=[],s=r);return t}function qM(e,t){if(t.marker&&t.marker.comment){let n=t.root;for(;;){const s=n.variations[0];if(!s){n.comment=t.marker.comment;break}n=s}}return{headers:e,root:t.root,result:(t.marker&&t.marker.result)??void 0}}function KM(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function Ji(e,t,n,s){var r=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(r,Ji.prototype),r.expected=t,r.found=n,r.location=s,r.name="SyntaxError",r}KM(Ji,Error);function uf(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,n+=n.repeat(t),e+n.slice(0,t))}Ji.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n=null,s;for(s=0;s<e.length;s++)if(e[s].source===this.location.source){n=e[s].text.split(/\r\n|\n|\r/g);break}var r=this.location.start,i=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(r):r,a=this.location.source+":"+i.line+":"+i.column;if(n){var l=this.location.end,c=uf("",i.line.toString().length," "),u=n[r.line-1],f=r.line===l.line?l.column:u.length+1,m=f-r.column||1;t+=`
 --> `+a+`
`+c+` |
`+i.line+" | "+u+`
`+c+" | "+uf("",r.column-1," ")+uf("",m,"^")}else t+=`
 at `+a}return t};Ji.buildMessage=function(e,t){var n={literal:function(u){return'"'+r(u.text)+'"'},class:function(u){var f=u.parts.map(function(m){return Array.isArray(m)?i(m[0])+"-"+i(m[1]):i(m)});return"["+(u.inverted?"^":"")+f.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(u){return u.description}};function s(u){return u.charCodeAt(0).toString(16).toUpperCase()}function r(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(f){return"\\x0"+s(f)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(f){return"\\x"+s(f)})}function i(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(f){return"\\x0"+s(f)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(f){return"\\x"+s(f)})}function a(u){return n[u.type](u)}function l(u){var f=u.map(a),m,h;if(f.sort(),f.length>0){for(m=1,h=1;m<f.length;m++)f[m-1]!==f[m]&&(f[h]=f[m],h++);f.length=h}switch(f.length){case 1:return f[0];case 2:return f[0]+" or "+f[1];default:return f.slice(0,-1).join(", ")+", or "+f[f.length-1]}}function c(u){return u?'"'+r(u)+'"':"end of input"}return"Expected "+l(e)+" but "+c(t)+" found."};function WM(e,t){t=t!==void 0?t:{};var n={},s=t.grammarSource,r={pgn:bs},i=bs,a="[",l='"',c="]",u=".",f="O-O-O",m="O-O",h="0-0-0",y="0-0",p="$",g="{",w="}",x=";",v="(",b=")",S="1-0",N="0-1",j="1/2-1/2",k="*",C=/^[a-zA-Z]/,R=/^[^"]/,P=/^[0-9]/,D=/^[.]/,A=/^[a-zA-Z1-8\-=]/,z=/^[+#]/,_=/^[!?]/,F=/^[^}]/,q=/^[^\r\n]/,G=/^[ \t\r\n]/,T=tn("tag pair"),$=_t("[",!1),Q=_t('"',!1),U=_t("]",!1),ve=tn("tag name"),H=Pt([["a","z"],["A","Z"]],!1,!1),xe=tn("tag value"),ie=Pt(['"'],!0,!1),se=tn("move number"),V=Pt([["0","9"]],!1,!1),X=_t(".",!1),ee=Pt(["."],!1,!1),O=tn("standard algebraic notation"),re=_t("O-O-O",!1),de=_t("O-O",!1),ye=_t("0-0-0",!1),Le=_t("0-0",!1),ke=Pt([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),ae=Pt(["+","#"],!1,!1),Se=tn("suffix annotation"),Te=Pt(["!","?"],!1,!1),De=tn("NAG"),Ie=_t("$",!1),B=tn("brace comment"),K=_t("{",!1),me=Pt(["}"],!0,!1),ce=_t("}",!1),ue=tn("rest of line comment"),Fe=_t(";",!1),Re=Pt(["\r",`
`],!0,!1),_e=tn("variation"),rt=_t("(",!1),Mt=_t(")",!1),et=tn("game termination marker"),Wt=_t("1-0",!1),Jt=_t("0-1",!1),En=_t("1/2-1/2",!1),Pn=_t("*",!1),Qt=tn("whitespace"),St=Pt([" ","	","\r",`
`],!1,!1),zn=function(E,I){return qM(E,I)},en=function(E){return Object.fromEntries(E)},ys=function(E,I){return[E,I]},ir=function(E,I){return{root:E,marker:I}},Xn=function(E,I){return VM(FM(E),...I.flat())},cn=function(E,I,L,Ne,Me){return zM(E,I,L,Ne,Me)},Cr=function(E){return E},Ve=function(E){return E.replace(/[\r\n]+/g," ")},Zo=function(E){return E.trim()},va=function(E){return E},fo=function(E,I){return{result:E,comment:I}},M=t.peg$currPos|0,qe=[{line:1,column:1}],lt=M,un=t.peg$maxFailExpected||[],Z=t.peg$silentFails|0,qs;if(t.startRule){if(!(t.startRule in r))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');i=r[t.startRule]}function _t(E,I){return{type:"literal",text:E,ignoreCase:I}}function Pt(E,I,L){return{type:"class",parts:E,inverted:I,ignoreCase:L}}function ws(){return{type:"end"}}function tn(E){return{type:"other",description:E}}function Ks(E){var I=qe[E],L;if(I)return I;if(E>=qe.length)L=qe.length-1;else for(L=E;!qe[--L];);for(I=qe[L],I={line:I.line,column:I.column};L<E;)e.charCodeAt(L)===10?(I.line++,I.column=1):I.column++,L++;return qe[E]=I,I}function Tn(E,I,L){var Ne=Ks(E),Me=Ks(I),J={source:s,start:{offset:E,line:Ne.line,column:Ne.column},end:{offset:I,line:Me.line,column:Me.column}};return J}function Ee(E){M<lt||(M>lt&&(lt=M,un=[]),un.push(E))}function ar(E,I,L){return new Ji(Ji.buildMessage(E,I),E,I,L)}function bs(){var E,I,L;return E=M,I=Er(),L=lr(),E=zn(I,L),E}function Er(){var E,I,L;for(E=M,I=[],L=Ws();L!==n;)I.push(L),L=Ws();return L=Ot(),E=en(I),E}function Ws(){var E,I,L,Ne,Me,J,dt;return Z++,E=M,Ot(),e.charCodeAt(M)===91?(I=a,M++):(I=n,Z===0&&Ee($)),I!==n?(Ot(),L=Us(),L!==n?(Ot(),e.charCodeAt(M)===34?(Ne=l,M++):(Ne=n,Z===0&&Ee(Q)),Ne!==n?(Me=ho(),e.charCodeAt(M)===34?(J=l,M++):(J=n,Z===0&&Ee(Q)),J!==n?(Ot(),e.charCodeAt(M)===93?(dt=c,M++):(dt=n,Z===0&&Ee(U)),dt!==n?E=ys(L,Me):(M=E,E=n)):(M=E,E=n)):(M=E,E=n)):(M=E,E=n)):(M=E,E=n),Z--,E===n&&Z===0&&Ee(T),E}function Us(){var E,I,L;if(Z++,E=M,I=[],L=e.charAt(M),C.test(L)?M++:(L=n,Z===0&&Ee(H)),L!==n)for(;L!==n;)I.push(L),L=e.charAt(M),C.test(L)?M++:(L=n,Z===0&&Ee(H));else I=n;return I!==n?E=e.substring(E,M):E=I,Z--,E===n&&(I=n,Z===0&&Ee(ve)),E}function ho(){var E,I,L;for(Z++,E=M,I=[],L=e.charAt(M),R.test(L)?M++:(L=n,Z===0&&Ee(ie));L!==n;)I.push(L),L=e.charAt(M),R.test(L)?M++:(L=n,Z===0&&Ee(ie));return E=e.substring(E,M),Z--,I=n,Z===0&&Ee(xe),E}function lr(){var E,I,L;return E=M,I=Rn(),Ot(),L=ni(),L===n&&(L=null),Ot(),E=ir(I,L),E}function Rn(){var E,I,L,Ne;for(E=M,I=Pr(),I===n&&(I=null),L=[],Ne=Ss();Ne!==n;)L.push(Ne),Ne=Ss();return E=Xn(I,L),E}function Ss(){var E,I,L,Ne,Me,J,dt,We;if(E=M,Ot(),cr(),Ot(),I=Zn(),I!==n){for(L=Jo(),L===n&&(L=null),Ne=[],Me=us();Me!==n;)Ne.push(Me),Me=us();for(Me=Ot(),J=Pr(),J===n&&(J=null),dt=[],We=mo();We!==n;)dt.push(We),We=mo();E=cn(I,L,Ne,J,dt)}else M=E,E=n;return E}function cr(){var E,I,L,Ne,Me,J;for(Z++,E=M,I=[],L=e.charAt(M),P.test(L)?M++:(L=n,Z===0&&Ee(V));L!==n;)I.push(L),L=e.charAt(M),P.test(L)?M++:(L=n,Z===0&&Ee(V));if(e.charCodeAt(M)===46?(L=u,M++):(L=n,Z===0&&Ee(X)),L!==n){for(Ne=Ot(),Me=[],J=e.charAt(M),D.test(J)?M++:(J=n,Z===0&&Ee(ee));J!==n;)Me.push(J),J=e.charAt(M),D.test(J)?M++:(J=n,Z===0&&Ee(ee));I=[I,L,Ne,Me],E=I}else M=E,E=n;return Z--,E===n&&(I=n,Z===0&&Ee(se)),E}function Zn(){var E,I,L,Ne,Me,J;if(Z++,E=M,I=M,e.substr(M,5)===f?(L=f,M+=5):(L=n,Z===0&&Ee(re)),L===n&&(e.substr(M,3)===m?(L=m,M+=3):(L=n,Z===0&&Ee(de)),L===n&&(e.substr(M,5)===h?(L=h,M+=5):(L=n,Z===0&&Ee(ye)),L===n&&(e.substr(M,3)===y?(L=y,M+=3):(L=n,Z===0&&Ee(Le)),L===n))))if(L=M,Ne=e.charAt(M),C.test(Ne)?M++:(Ne=n,Z===0&&Ee(H)),Ne!==n){if(Me=[],J=e.charAt(M),A.test(J)?M++:(J=n,Z===0&&Ee(ke)),J!==n)for(;J!==n;)Me.push(J),J=e.charAt(M),A.test(J)?M++:(J=n,Z===0&&Ee(ke));else Me=n;Me!==n?(Ne=[Ne,Me],L=Ne):(M=L,L=n)}else M=L,L=n;return L!==n?(Ne=e.charAt(M),z.test(Ne)?M++:(Ne=n,Z===0&&Ee(ae)),Ne===n&&(Ne=null),L=[L,Ne],I=L):(M=I,I=n),I!==n?E=e.substring(E,M):E=I,Z--,E===n&&(I=n,Z===0&&Ee(O)),E}function Jo(){var E,I,L;for(Z++,E=M,I=[],L=e.charAt(M),_.test(L)?M++:(L=n,Z===0&&Ee(Te));L!==n;)I.push(L),I.length>=2?L=n:(L=e.charAt(M),_.test(L)?M++:(L=n,Z===0&&Ee(Te)));return I.length<1?(M=E,E=n):E=I,Z--,E===n&&(I=n,Z===0&&Ee(Se)),E}function us(){var E,I,L,Ne,Me;if(Z++,E=M,Ot(),e.charCodeAt(M)===36?(I=p,M++):(I=n,Z===0&&Ee(Ie)),I!==n){if(L=M,Ne=[],Me=e.charAt(M),P.test(Me)?M++:(Me=n,Z===0&&Ee(V)),Me!==n)for(;Me!==n;)Ne.push(Me),Me=e.charAt(M),P.test(Me)?M++:(Me=n,Z===0&&Ee(V));else Ne=n;Ne!==n?L=e.substring(L,M):L=Ne,L!==n?E=Cr(L):(M=E,E=n)}else M=E,E=n;return Z--,E===n&&Z===0&&Ee(De),E}function Pr(){var E;return E=ei(),E===n&&(E=ti()),E}function ei(){var E,I,L,Ne,Me;if(Z++,E=M,e.charCodeAt(M)===123?(I=g,M++):(I=n,Z===0&&Ee(K)),I!==n){for(L=M,Ne=[],Me=e.charAt(M),F.test(Me)?M++:(Me=n,Z===0&&Ee(me));Me!==n;)Ne.push(Me),Me=e.charAt(M),F.test(Me)?M++:(Me=n,Z===0&&Ee(me));L=e.substring(L,M),e.charCodeAt(M)===125?(Ne=w,M++):(Ne=n,Z===0&&Ee(ce)),Ne!==n?E=Ve(L):(M=E,E=n)}else M=E,E=n;return Z--,E===n&&(I=n,Z===0&&Ee(B)),E}function ti(){var E,I,L,Ne,Me;if(Z++,E=M,e.charCodeAt(M)===59?(I=x,M++):(I=n,Z===0&&Ee(Fe)),I!==n){for(L=M,Ne=[],Me=e.charAt(M),q.test(Me)?M++:(Me=n,Z===0&&Ee(Re));Me!==n;)Ne.push(Me),Me=e.charAt(M),q.test(Me)?M++:(Me=n,Z===0&&Ee(Re));L=e.substring(L,M),E=Zo(L)}else M=E,E=n;return Z--,E===n&&(I=n,Z===0&&Ee(ue)),E}function mo(){var E,I,L,Ne;return Z++,E=M,Ot(),e.charCodeAt(M)===40?(I=v,M++):(I=n,Z===0&&Ee(rt)),I!==n?(L=Rn(),L!==n?(Ot(),e.charCodeAt(M)===41?(Ne=b,M++):(Ne=n,Z===0&&Ee(Mt)),Ne!==n?E=va(L):(M=E,E=n)):(M=E,E=n)):(M=E,E=n),Z--,E===n&&Z===0&&Ee(_e),E}function ni(){var E,I,L;return Z++,E=M,e.substr(M,3)===S?(I=S,M+=3):(I=n,Z===0&&Ee(Wt)),I===n&&(e.substr(M,3)===N?(I=N,M+=3):(I=n,Z===0&&Ee(Jt)),I===n&&(e.substr(M,7)===j?(I=j,M+=7):(I=n,Z===0&&Ee(En)),I===n&&(e.charCodeAt(M)===42?(I=k,M++):(I=n,Z===0&&Ee(Pn))))),I!==n?(Ot(),L=Pr(),L===n&&(L=null),E=fo(I,L)):(M=E,E=n),Z--,E===n&&(I=n,Z===0&&Ee(et)),E}function Ot(){var E,I;for(Z++,E=[],I=e.charAt(M),G.test(I)?M++:(I=n,Z===0&&Ee(St));I!==n;)E.push(I),I=e.charAt(M),G.test(I)?M++:(I=n,Z===0&&Ee(St));return Z--,I=n,Z===0&&Ee(Qt),E}if(qs=i(),t.peg$library)return{peg$result:qs,peg$currPos:M,peg$FAILED:n,peg$maxFailExpected:un,peg$maxFailPos:lt};if(qs!==n&&M===e.length)return qs;throw qs!==n&&M<e.length&&Ee(ws()),ar(un,lt<e.length?e.charAt(lt):null,lt<e.length?Tn(lt,lt+1):Tn(lt,lt))}/**
 * @license
 * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const Vc=0xffffffffffffffffn;function df(e,t){return(e<<t|e>>64n-t)&0xffffffffffffffffn}function ix(e,t){return e*t&Vc}function UM(e){return function(){let t=BigInt(e&Vc),n=BigInt(e>>64n&Vc);const s=ix(df(ix(t,5n),7n),9n);return n^=t,t=(df(t,24n)^n^n<<16n)&Vc,n=df(n,37n),e=n<<64n|t,s}}const cd=UM(0xa187eb39cdcaed8f31c4b365b102e01en),HM=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>cd()))),GM=Array.from({length:8},()=>cd()),QM=Array.from({length:16},()=>cd()),ff=cd(),yn="w",es="b",Ht="p",$h="n",qc="b",Fa="r",Dr="q",Yt="k",hf="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class vc{constructor(t,n){Tt(this,"color");Tt(this,"from");Tt(this,"to");Tt(this,"piece");Tt(this,"captured");Tt(this,"promotion");Tt(this,"flags");Tt(this,"san");Tt(this,"lan");Tt(this,"before");Tt(this,"after");const{color:s,piece:r,from:i,to:a,flags:l,captured:c,promotion:u}=n,f=rn(i),m=rn(a);this.color=s,this.piece=r,this.from=f,this.to=m,this.san=t._moveToSan(n,t._moves({legal:!0})),this.lan=f+m,this.before=t.fen(),t._makeMove(n),this.after=t.fen(),t._undoMove(),this.flags="";for(const h in Ue)Ue[h]&l&&(this.flags+=wo[h]);c&&(this.captured=c),u&&(this.promotion=u,this.lan+=u)}isCapture(){return this.flags.indexOf(wo.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(wo.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(wo.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(wo.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(wo.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(wo.BIG_PAWN)>-1}}const dn=-1,wo={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},Ue={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},Oh={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},YM={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},XM={...Oh,...YM},ze={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},mf={b:[16,32,17,15],w:[-16,-32,-17,-15]},ax={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},ZM=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],JM=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],e_={p:1,n:2,b:4,r:8,q:16,k:32},t_="pnbrqkPNBRQK",lx=[$h,qc,Fa,Dr],n_=7,s_=6,r_=1,o_=0,xc={[Yt]:Ue.KSIDE_CASTLE,[Dr]:Ue.QSIDE_CASTLE},Ar={w:[{square:ze.a1,flag:Ue.QSIDE_CASTLE},{square:ze.h1,flag:Ue.KSIDE_CASTLE}],b:[{square:ze.a8,flag:Ue.QSIDE_CASTLE},{square:ze.h8,flag:Ue.KSIDE_CASTLE}]},i_={b:r_,w:s_},pf="--";function Mo(e){return e>>4}function wl(e){return e&15}function fS(e){return"0123456789".indexOf(e)!==-1}function rn(e){const t=wl(e),n=Mo(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function Aa(e){return e===yn?es:yn}function a_(e){const t=e.split(/\s+/);if(t.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(t[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const s=parseInt(t[4],10);if(isNaN(s)||s<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const r=t[0].split("/");if(r.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let a=0;a<r.length;a++){let l=0,c=!1;for(let u=0;u<r[a].length;u++)if(fS(r[a][u])){if(c)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};l+=parseInt(r[a][u],10),c=!0}else{if(!/^[prnbqkPRNBQK]$/.test(r[a][u]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};l+=1,c=!1}if(l!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(t[3][1]=="3"&&t[1]=="w"||t[3][1]=="6"&&t[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const i=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:a,regex:l}of i){if(!l.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${a} king`};if((t[0].match(l)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${a} kings`}}return Array.from(r[0]+r[7]).some(a=>a.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function l_(e,t){const n=e.from,s=e.to,r=e.piece;let i=0,a=0,l=0;for(let c=0,u=t.length;c<u;c++){const f=t[c].from,m=t[c].to,h=t[c].piece;r===h&&n!==f&&s===m&&(i++,Mo(n)===Mo(f)&&a++,wl(n)===wl(f)&&l++)}return i>0?a>0&&l>0?rn(n):l>0?rn(n).charAt(1):rn(n).charAt(0):""}function Lr(e,t,n,s,r,i=void 0,a=Ue.NORMAL){const l=Mo(s);if(r===Ht&&(l===n_||l===o_))for(let c=0;c<lx.length;c++){const u=lx[c];e.push({color:t,from:n,to:s,piece:r,captured:i,promotion:u,flags:a|Ue.PROMOTION})}else e.push({color:t,from:n,to:s,piece:r,captured:i,flags:a})}function cx(e){let t=e.charAt(0);return t>="a"&&t<="h"?e.match(/[a-h]\d.*[a-h]\d/)?void 0:Ht:(t=t.toLowerCase(),t==="o"?Yt:t)}function gf(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class Dn{constructor(t=hf,{skipValidation:n=!1}={}){Tt(this,"_board",new Array(128));Tt(this,"_turn",yn);Tt(this,"_header",{});Tt(this,"_kings",{w:dn,b:dn});Tt(this,"_epSquare",-1);Tt(this,"_halfMoves",0);Tt(this,"_moveNumber",0);Tt(this,"_history",[]);Tt(this,"_comments",{});Tt(this,"_castling",{w:0,b:0});Tt(this,"_hash",0n);Tt(this,"_positionCount",new Map);this.load(t,{skipValidation:n})}clear({preserveHeaders:t=!1}={}){this._board=new Array(128),this._kings={w:dn,b:dn},this._turn=yn,this._castling={w:0,b:0},this._epSquare=dn,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=t?this._header:{...XM},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(t,{skipValidation:n=!1,preserveHeaders:s=!1}={}){let r=t.split(/\s+/);if(r.length>=2&&r.length<6){const l=["-","-","0","1"];t=r.concat(l.slice(-(6-r.length))).join(" ")}if(r=t.split(/\s+/),!n){const{ok:l,error:c}=a_(t);if(!l)throw new Error(c)}const i=r[0];let a=0;this.clear({preserveHeaders:s});for(let l=0;l<i.length;l++){const c=i.charAt(l);if(c==="/")a+=8;else if(fS(c))a+=parseInt(c,10);else{const u=c<"a"?yn:es;this._put({type:c.toLowerCase(),color:u},rn(a)),a++}}this._turn=r[1],r[2].indexOf("K")>-1&&(this._castling.w|=Ue.KSIDE_CASTLE),r[2].indexOf("Q")>-1&&(this._castling.w|=Ue.QSIDE_CASTLE),r[2].indexOf("k")>-1&&(this._castling.b|=Ue.KSIDE_CASTLE),r[2].indexOf("q")>-1&&(this._castling.b|=Ue.QSIDE_CASTLE),this._epSquare=r[3]==="-"?dn:ze[r[3]],this._halfMoves=parseInt(r[4],10),this._moveNumber=parseInt(r[5],10),this._hash=this._computeHash(),this._updateSetup(t),this._incPositionCount()}fen({forceEnpassantSquare:t=!1}={}){var a,l;let n=0,s="";for(let c=ze.a8;c<=ze.h1;c++){if(this._board[c]){n>0&&(s+=n,n=0);const{color:u,type:f}=this._board[c];s+=u===yn?f.toUpperCase():f.toLowerCase()}else n++;c+1&136&&(n>0&&(s+=n),c!==ze.h1&&(s+="/"),n=0,c+=8)}let r="";this._castling[yn]&Ue.KSIDE_CASTLE&&(r+="K"),this._castling[yn]&Ue.QSIDE_CASTLE&&(r+="Q"),this._castling[es]&Ue.KSIDE_CASTLE&&(r+="k"),this._castling[es]&Ue.QSIDE_CASTLE&&(r+="q"),r=r||"-";let i="-";if(this._epSquare!==dn)if(t)i=rn(this._epSquare);else{const c=this._epSquare+(this._turn===yn?16:-16),u=[c+1,c-1];for(const f of u){if(f&136)continue;const m=this._turn;if(((a=this._board[f])==null?void 0:a.color)===m&&((l=this._board[f])==null?void 0:l.type)===Ht){this._makeMove({color:m,from:f,to:this._epSquare,piece:Ht,captured:Ht,flags:Ue.EP_CAPTURE});const h=!this._isKingAttacked(m);if(this._undoMove(),h){i=rn(this._epSquare);break}}}}return[s,this._turn,r,i,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(t){if(!this._board[t])return 0n;const{color:n,type:s}=this._board[t],r={w:0,b:1}[n],i={p:0,n:1,b:2,r:3,q:4,k:5}[s];return HM[r][i][t]}_epKey(){return this._epSquare===dn?0n:GM[this._epSquare&7]}_castlingKey(){const t=this._castling.w>>5|this._castling.b>>3;return QM[t]}_computeHash(){let t=0n;for(let n=ze.a8;n<=ze.h1;n++){if(n&136){n+=7;continue}this._board[n]&&(t^=this._pieceKey(n))}return t^=this._epKey(),t^=this._castlingKey(),this._turn==="b"&&(t^=ff),t}_updateSetup(t){this._history.length>0||(t!==hf?(this._header.SetUp="1",this._header.FEN=t):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(hf)}get(t){return this._board[ze[t]]}findPiece(t){var s;const n=[];for(let r=ze.a8;r<=ze.h1;r++){if(r&136){r+=7;continue}!this._board[r]||((s=this._board[r])==null?void 0:s.color)!==t.color||this._board[r].color===t.color&&this._board[r].type===t.type&&n.push(rn(r))}return n}put({type:t,color:n},s){return this._put({type:t,color:n},s)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(t,n){this._hash^=this._pieceKey(t),this._board[t]=n,this._hash^=this._pieceKey(t)}_put({type:t,color:n},s){if(t_.indexOf(t.toLowerCase())===-1||!(s in ze))return!1;const r=ze[s];if(t==Yt&&!(this._kings[n]==dn||this._kings[n]==r))return!1;const i=this._board[r];return i&&i.type===Yt&&(this._kings[i.color]=dn),this._set(r,{type:t,color:n}),t===Yt&&(this._kings[n]=r),!0}_clear(t){this._hash^=this._pieceKey(t),delete this._board[t]}remove(t){const n=this.get(t);return this._clear(ze[t]),n&&n.type===Yt&&(this._kings[n.color]=dn),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){var s,r,i,a,l,c,u,f,m,h,y,p;this._hash^=this._castlingKey();const t=((s=this._board[ze.e1])==null?void 0:s.type)===Yt&&((r=this._board[ze.e1])==null?void 0:r.color)===yn,n=((i=this._board[ze.e8])==null?void 0:i.type)===Yt&&((a=this._board[ze.e8])==null?void 0:a.color)===es;(!t||((l=this._board[ze.a1])==null?void 0:l.type)!==Fa||((c=this._board[ze.a1])==null?void 0:c.color)!==yn)&&(this._castling.w&=-65),(!t||((u=this._board[ze.h1])==null?void 0:u.type)!==Fa||((f=this._board[ze.h1])==null?void 0:f.color)!==yn)&&(this._castling.w&=-33),(!n||((m=this._board[ze.a8])==null?void 0:m.type)!==Fa||((h=this._board[ze.a8])==null?void 0:h.color)!==es)&&(this._castling.b&=-65),(!n||((y=this._board[ze.h8])==null?void 0:y.type)!==Fa||((p=this._board[ze.h8])==null?void 0:p.color)!==es)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){var i,a;if(this._epSquare===dn)return;const t=this._epSquare+(this._turn===yn?-16:16),n=this._epSquare+(this._turn===yn?16:-16),s=[n+1,n-1];if(this._board[t]!==null||this._board[this._epSquare]!==null||((i=this._board[n])==null?void 0:i.color)!==Aa(this._turn)||((a=this._board[n])==null?void 0:a.type)!==Ht){this._hash^=this._epKey(),this._epSquare=dn;return}const r=l=>{var c,u;return!(l&136)&&((c=this._board[l])==null?void 0:c.color)===this._turn&&((u=this._board[l])==null?void 0:u.type)===Ht};s.some(r)||(this._hash^=this._epKey(),this._epSquare=dn)}_attacked(t,n,s){const r=[];for(let i=ze.a8;i<=ze.h1;i++){if(i&136){i+=7;continue}if(this._board[i]===void 0||this._board[i].color!==t)continue;const a=this._board[i],l=i-n;if(l===0)continue;const c=l+119;if(ZM[c]&e_[a.type]){if(a.type===Ht){if(l>0&&a.color===yn||l<=0&&a.color===es)if(s)r.push(rn(i));else return!0;continue}if(a.type==="n"||a.type==="k")if(s){r.push(rn(i));continue}else return!0;const u=JM[c];let f=i+u,m=!1;for(;f!==n;){if(this._board[f]!=null){m=!0;break}f+=u}if(!m)if(s){r.push(rn(i));continue}else return!0}}return s?r:!1}attackers(t,n){return n?this._attacked(n,ze[t],!0):this._attacked(this._turn,ze[t],!0)}_isKingAttacked(t){const n=this._kings[t];return n===-1?!1:this._attacked(Aa(t),n)}hash(){return this._hash.toString(16)}isAttacked(t,n){return this._attacked(n,ze[t])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const t={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let s=0,r=0;for(let i=ze.a8;i<=ze.h1;i++){if(r=(r+1)%2,i&136){i+=7;continue}const a=this._board[i];a&&(t[a.type]=a.type in t?t[a.type]+1:1,a.type===qc&&n.push(r),s++)}if(s===2)return!0;if(s===3&&(t[qc]===1||t[$h]===1))return!0;if(s===t[qc]+2){let i=0;const a=n.length;for(let l=0;l<a;l++)i+=n[l];if(i===0||i===a)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:t=!1,square:n=void 0,piece:s=void 0}={}){const r=this._moves({square:n,piece:s});return t?r.map(i=>new vc(this,i)):r.map(i=>this._moveToSan(i,r))}_moves({legal:t=!0,piece:n=void 0,square:s=void 0}={}){var y;const r=s?s.toLowerCase():void 0,i=n==null?void 0:n.toLowerCase(),a=[],l=this._turn,c=Aa(l);let u=ze.a8,f=ze.h1,m=!1;if(r)if(r in ze)u=f=ze[r],m=!0;else return[];for(let p=u;p<=f;p++){if(p&136){p+=7;continue}if(!this._board[p]||this._board[p].color===c)continue;const{type:g}=this._board[p];let w;if(g===Ht){if(i&&i!==g)continue;w=p+mf[l][0],this._board[w]||(Lr(a,l,p,w,Ht),w=p+mf[l][1],i_[l]===Mo(p)&&!this._board[w]&&Lr(a,l,p,w,Ht,void 0,Ue.BIG_PAWN));for(let x=2;x<4;x++)w=p+mf[l][x],!(w&136)&&(((y=this._board[w])==null?void 0:y.color)===c?Lr(a,l,p,w,Ht,this._board[w].type,Ue.CAPTURE):w===this._epSquare&&Lr(a,l,p,w,Ht,Ht,Ue.EP_CAPTURE))}else{if(i&&i!==g)continue;for(let x=0,v=ax[g].length;x<v;x++){const b=ax[g][x];for(w=p;w+=b,!(w&136);){if(!this._board[w])Lr(a,l,p,w,g);else{if(this._board[w].color===l)break;Lr(a,l,p,w,g,this._board[w].type,Ue.CAPTURE);break}if(g===$h||g===Yt)break}}}}if((i===void 0||i===Yt)&&(!m||f===this._kings[l])){if(this._castling[l]&Ue.KSIDE_CASTLE){const p=this._kings[l],g=p+2;!this._board[p+1]&&!this._board[g]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,p+1)&&!this._attacked(c,g)&&Lr(a,l,this._kings[l],g,Yt,void 0,Ue.KSIDE_CASTLE)}if(this._castling[l]&Ue.QSIDE_CASTLE){const p=this._kings[l],g=p-2;!this._board[p-1]&&!this._board[p-2]&&!this._board[p-3]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,p-1)&&!this._attacked(c,g)&&Lr(a,l,this._kings[l],g,Yt,void 0,Ue.QSIDE_CASTLE)}}if(!t||this._kings[l]===-1)return a;const h=[];for(let p=0,g=a.length;p<g;p++)this._makeMove(a[p]),this._isKingAttacked(l)||h.push(a[p]),this._undoMove();return h}move(t,{strict:n=!1}={}){let s=null;if(typeof t=="string")s=this._moveFromSan(t,n);else if(t===null)s=this._moveFromSan(pf,n);else if(typeof t=="object"){const i=this._moves();for(let a=0,l=i.length;a<l;a++)if(t.from===rn(i[a].from)&&t.to===rn(i[a].to)&&(!("promotion"in i[a])||t.promotion===i[a].promotion)){s=i[a];break}}if(!s)throw typeof t=="string"?new Error(`Invalid move: ${t}`):new Error(`Invalid move: ${JSON.stringify(t)}`);if(this.isCheck()&&s.flags&Ue.NULL_MOVE)throw new Error("Null move not allowed when in check");const r=new vc(this,s);return this._makeMove(s),this._incPositionCount(),r}_push(t){this._history.push({move:t,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(t,n){this._hash^=this._pieceKey(t),this._board[n]=this._board[t],delete this._board[t],this._hash^=this._pieceKey(n)}_makeMove(t){var r,i,a,l;const n=this._turn,s=Aa(n);if(this._push(t),t.flags&Ue.NULL_MOVE){n===es&&this._moveNumber++,this._halfMoves++,this._turn=s,this._epSquare=dn;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),t.captured&&(this._hash^=this._pieceKey(t.to)),this._movePiece(t.from,t.to),t.flags&Ue.EP_CAPTURE&&(this._turn===es?this._clear(t.to-16):this._clear(t.to+16)),t.promotion&&(this._clear(t.to),this._set(t.to,{type:t.promotion,color:n})),this._board[t.to].type===Yt){if(this._kings[n]=t.to,t.flags&Ue.KSIDE_CASTLE){const c=t.to-1,u=t.to+1;this._movePiece(u,c)}else if(t.flags&Ue.QSIDE_CASTLE){const c=t.to+1,u=t.to-2;this._movePiece(u,c)}this._castling[n]=0}if(this._castling[n]){for(let c=0,u=Ar[n].length;c<u;c++)if(t.from===Ar[n][c].square&&this._castling[n]&Ar[n][c].flag){this._castling[n]^=Ar[n][c].flag;break}}if(this._castling[s]){for(let c=0,u=Ar[s].length;c<u;c++)if(t.to===Ar[s][c].square&&this._castling[s]&Ar[s][c].flag){this._castling[s]^=Ar[s][c].flag;break}}if(this._hash^=this._castlingKey(),t.flags&Ue.BIG_PAWN){let c;n===es?c=t.to-16:c=t.to+16,!(t.to-1&136)&&((r=this._board[t.to-1])==null?void 0:r.type)===Ht&&((i=this._board[t.to-1])==null?void 0:i.color)===s||!(t.to+1&136)&&((a=this._board[t.to+1])==null?void 0:a.type)===Ht&&((l=this._board[t.to+1])==null?void 0:l.color)===s?(this._epSquare=c,this._hash^=this._epKey()):this._epSquare=dn}else this._epSquare=dn;t.piece===Ht?this._halfMoves=0:t.flags&(Ue.CAPTURE|Ue.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===es&&this._moveNumber++,this._turn=s,this._hash^=ff}undo(){const t=this._hash,n=this._undoMove();if(n){const s=new vc(this,n);return this._decPositionCount(t),s}return null}_undoMove(){const t=this._history.pop();if(t===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const n=t.move;this._kings=t.kings,this._turn=t.turn,this._castling=t.castling,this._epSquare=t.epSquare,this._halfMoves=t.halfMoves,this._moveNumber=t.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=ff;const s=this._turn,r=Aa(s);if(n.flags&Ue.NULL_MOVE)return n;if(this._movePiece(n.to,n.from),n.piece&&(this._clear(n.from),this._set(n.from,{type:n.piece,color:s})),n.captured)if(n.flags&Ue.EP_CAPTURE){let i;s===es?i=n.to-16:i=n.to+16,this._set(i,{type:Ht,color:r})}else this._set(n.to,{type:n.captured,color:r});if(n.flags&(Ue.KSIDE_CASTLE|Ue.QSIDE_CASTLE)){let i,a;n.flags&Ue.KSIDE_CASTLE?(i=n.to+1,a=n.to-1):(i=n.to-2,a=n.to+1),this._movePiece(a,i)}return n}pgn({newline:t=`
`,maxWidth:n=0}={}){const s=[];let r=!1;for(const h in this._header)this._header[h]&&s.push(`[${h} "${this._header[h]}"]`+t),r=!0;r&&this._history.length&&s.push(t);const i=h=>{const y=this._comments[this.fen()];if(typeof y<"u"){const p=h.length>0?" ":"";h=`${h}${p}{${y}}`}return h},a=[];for(;this._history.length>0;)a.push(this._undoMove());const l=[];let c="";for(a.length===0&&l.push(i(""));a.length>0;){c=i(c);const h=a.pop();if(!h)break;if(!this._history.length&&h.color==="b"){const y=`${this._moveNumber}. ...`;c=c?`${c} ${y}`:y}else h.color==="w"&&(c.length&&l.push(c),c=this._moveNumber+".");c=c+" "+this._moveToSan(h,this._moves({legal:!0})),this._makeMove(h)}if(c.length&&l.push(i(c)),l.push(this._header.Result||"*"),n===0)return s.join("")+l.join(" ");const u=function(){return s.length>0&&s[s.length-1]===" "?(s.pop(),!0):!1},f=function(h,y){for(const p of y.split(" "))if(p){if(h+p.length>n){for(;u();)h--;s.push(t),h=0}s.push(p),h+=p.length,s.push(" "),h++}return u()&&h--,h};let m=0;for(let h=0;h<l.length;h++){if(m+l[h].length>n&&l[h].includes("{")){m=f(m,l[h]);continue}m+l[h].length>n&&h!==0?(s[s.length-1]===" "&&s.pop(),s.push(t),m=0):h!==0&&(s.push(" "),m++),s.push(l[h]),m+=l[h].length}return s.join("")}header(...t){for(let n=0;n<t.length;n+=2)typeof t[n]=="string"&&typeof t[n+1]=="string"&&(this._header[t[n]]=t[n+1]);return this._header}setHeader(t,n){return this._header[t]=n??Oh[t]??null,this.getHeaders()}removeHeader(t){return t in this._header?(this._header[t]=Oh[t]||null,!0):!1}getHeaders(){const t={};for(const[n,s]of Object.entries(this._header))s!==null&&(t[n]=s);return t}loadPgn(t,{strict:n=!1,newlineChar:s=`\r?
`}={}){s!==`\r?
`&&(t=t.replace(new RegExp(s,"g"),`
`));const r=WM(t);this.reset();const i=r.headers;let a="";for(const u in i)u.toLowerCase()==="fen"&&(a=i[u]),this.header(u,i[u]);if(!n)a&&this.load(a,{preserveHeaders:!0});else if(i.SetUp==="1"){if(!("FEN"in i))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(i.FEN,{preserveHeaders:!0})}let l=r.root;for(;l;){if(l.move){const u=this._moveFromSan(l.move,n);if(u==null)throw new Error(`Invalid move in PGN: ${l.move}`);this._makeMove(u),this._incPositionCount()}l.comment!==void 0&&(this._comments[this.fen()]=l.comment),l=l.variations[0]}const c=r.result;c&&Object.keys(this._header).length&&this._header.Result!==c&&this.setHeader("Result",c)}_moveToSan(t,n){let s="";if(t.flags&Ue.KSIDE_CASTLE)s="O-O";else if(t.flags&Ue.QSIDE_CASTLE)s="O-O-O";else{if(t.flags&Ue.NULL_MOVE)return pf;if(t.piece!==Ht){const r=l_(t,n);s+=t.piece.toUpperCase()+r}t.flags&(Ue.CAPTURE|Ue.EP_CAPTURE)&&(t.piece===Ht&&(s+=rn(t.from)[0]),s+="x"),s+=rn(t.to),t.promotion&&(s+="="+t.promotion.toUpperCase())}return this._makeMove(t),this.isCheck()&&(this.isCheckmate()?s+="#":s+="+"),this._undoMove(),s}_moveFromSan(t,n=!1){let s=gf(t);if(n||(s==="0-0"?s="O-O":s==="0-0-0"&&(s="O-O-O")),s==pf)return{color:this._turn,from:0,to:0,piece:"k",flags:Ue.NULL_MOVE};let r=cx(s),i=this._moves({legal:!0,piece:r});for(let h=0,y=i.length;h<y;h++)if(s===gf(this._moveToSan(i[h],i)))return i[h];if(n)return null;let a,l,c,u,f,m=!1;if(l=s.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),l?(a=l[1],c=l[2],u=l[3],f=l[4],c.length==1&&(m=!0)):(l=s.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),l&&(a=l[1],c=l[2],u=l[3],f=l[4],c.length==1&&(m=!0))),r=cx(s),i=this._moves({legal:!0,piece:a||r}),!u)return null;for(let h=0,y=i.length;h<y;h++)if(c){if((!a||a.toLowerCase()==i[h].piece)&&ze[c]==i[h].from&&ze[u]==i[h].to&&(!f||f.toLowerCase()==i[h].promotion))return i[h];if(m){const p=rn(i[h].from);if((!a||a.toLowerCase()==i[h].piece)&&ze[u]==i[h].to&&(c==p[0]||c==p[1])&&(!f||f.toLowerCase()==i[h].promotion))return i[h]}}else if(s===gf(this._moveToSan(i[h],i)).replace("x",""))return i[h];return null}ascii(){let t=`   +------------------------+
`;for(let n=ze.a8;n<=ze.h1;n++){if(wl(n)===0&&(t+=" "+"87654321"[Mo(n)]+" |"),this._board[n]){const s=this._board[n].type,i=this._board[n].color===yn?s.toUpperCase():s.toLowerCase();t+=" "+i+" "}else t+=" . ";n+1&136&&(t+=`|
`,n+=8)}return t+=`   +------------------------+
`,t+="     a  b  c  d  e  f  g  h",t}perft(t){const n=this._moves({legal:!1});let s=0;const r=this._turn;for(let i=0,a=n.length;i<a;i++)this._makeMove(n[i]),this._isKingAttacked(r)||(t-1>0?s+=this.perft(t-1):s++),this._undoMove();return s}setTurn(t){return this._turn==t?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const t=[];let n=[];for(let s=ze.a8;s<=ze.h1;s++)this._board[s]==null?n.push(null):n.push({square:rn(s),type:this._board[s].type,color:this._board[s].color}),s+1&136&&(t.push(n),n=[],s+=8);return t}squareColor(t){if(t in ze){const n=ze[t];return(Mo(n)+wl(n))%2===0?"light":"dark"}return null}history({verbose:t=!1}={}){const n=[],s=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const r=n.pop();if(!r)break;t?s.push(new vc(this,r)):s.push(this._moveToSan(r,this._moves())),this._makeMove(r)}return s}_getPositionCount(t){return this._positionCount.get(t)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(t){const n=this._positionCount.get(t)??0;n===1?this._positionCount.delete(t):this._positionCount.set(t,n-1)}_pruneComments(){const t=[],n={},s=r=>{r in this._comments&&(n[r]=this._comments[r])};for(;this._history.length>0;)t.push(this._undoMove());for(s(this.fen());;){const r=t.pop();if(!r)break;this._makeMove(r),s(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(t){this._comments[this.fen()]=t.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const t=this._comments[this.fen()];return delete this._comments[this.fen()],t}getComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>({fen:t,comment:this._comments[t]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>{const n=this._comments[t];return delete this._comments[t],{fen:t,comment:n}})}setCastlingRights(t,n){for(const r of[Yt,Dr])n[r]!==void 0&&(n[r]?this._castling[t]|=xc[r]:this._castling[t]&=~xc[r]);this._updateCastlingRights();const s=this.getCastlingRights(t);return(n[Yt]===void 0||n[Yt]===s[Yt])&&(n[Dr]===void 0||n[Dr]===s[Dr])}getCastlingRights(t){return{[Yt]:(this._castling[t]&xc[Yt])!==0,[Dr]:(this._castling[t]&xc[Dr])!==0}}moveNumber(){return this._moveNumber}}const ji=["a","b","c","d","e","f","g","h"],yc=["8","7","6","5","4","3","2","1"],Eu=e=>({file:ji.indexOf(e[0]),rank:parseInt(e[1])-1}),ux=(e,t)=>`${ji[e]}${t+1}`,c_=(e,t)=>{const n=Eu(e),s=Eu(t),r=Math.abs(s.file-n.file),i=Math.abs(s.rank-n.rank);return r===2&&i===1||r===1&&i===2},u_=(e,t)=>{const n=Eu(e),s=Eu(t),r=s.file-n.file;return Math.abs(r)===2?ux(s.file,n.rank):ux(n.file,s.rank)},d_={K:"/pieces/wK.svg",Q:"/pieces/wQ.svg",R:"/pieces/wR.svg",B:"/pieces/wB.svg",N:"/pieces/wN.svg",P:"/pieces/wP.svg",k:"/pieces/bK.svg",q:"/pieces/bQ.svg",r:"/pieces/bR.svg",b:"/pieces/bB.svg",n:"/pieces/bN.svg",p:"/pieces/bP.svg"};function f_({fen:e="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",orientation:t="white",showCoordinates:n=!0,highlightedSquares:s=[],legalMoveSquares:r=[],lastMoveSquares:i=[],lastMove:a,selectedSquare:l=null,lockedPiece:c=null,onSquareClick:u,onMove:f,interactionMode:m="free",className:h="",noCard:y=!1,enableArrows:p=!0,enablePremoves:g=!1,isPlayerTurn:w=!0,premove:x=null,onPremove:v,arrowDrawMode:b=!1,highlightColor:S="yellow",customHighlightColors:N,hideSelectionHighlight:j=!1}){const k=(N==null?void 0:N.selectedPiece)||(S==="red"?"#ef4444":"#facc15"),C=(N==null?void 0:N.lastMove)||"#f97316",R=(N==null?void 0:N.availableMoves)||"#fbbf24",[P,D]=d.useState(null),A=l!==null?l:P,[z,_]=d.useState([]),[F,q]=d.useState(null),[G,T]=d.useState(!1),[$,Q]=d.useState(null),U=d.useRef(null),ve=a?[a.from,a.to]:i;d.useEffect(()=>{D(null)},[e]),d.useEffect(()=>{b||Q(null)},[b]);const xe=(B=>{const K=B.split(" ")[0].split("/"),me=[];for(const ce of K){const ue=[];for(const Fe of ce)if(isNaN(parseInt(Fe)))ue.push(Fe);else for(let Re=0;Re<parseInt(Fe);Re++)ue.push(null);me.push(ue)}return me})(e),ie=t==="white"?yc:[...yc].reverse(),se=t==="white"?ji:[...ji].reverse(),V=d.useCallback((B,K)=>{if(!U.current)return null;const me=U.current.getBoundingClientRect(),ce=B-me.left,ue=K-me.top,Fe=me.width/8,Re=me.height/8,_e=Math.floor(ce/Fe),rt=Math.floor(ue/Re);if(_e<0||_e>7||rt<0||rt>7)return null;const Mt=se[_e],et=ie[rt];return`${Mt}${et}`},[se,ie]),X=(B,K,me)=>{const ce=`${B}${K}`;if(m==="viewOnly")return;if(b){if($===null)Q(ce);else if($===ce)Q(null);else{const _e={from:$,to:ce},rt=z.findIndex(Mt=>Mt.from===_e.from&&Mt.to===_e.to);rt>=0?_(z.filter((Mt,et)=>et!==rt)):_([...z,_e]),Q(null)}return}me&&_([]);const ue=_e=>_e===_e.toUpperCase(),Re=(()=>{var Wt;if(!A)return null;const _e=A[0],rt=A[1],Mt=yc.indexOf(rt),et=ji.indexOf(_e);return((Wt=xe[Mt])==null?void 0:Wt[et])||null})();if(me&&Re&&A!==ce){const _e=ue(Re),rt=ue(me);if(_e===rt){if(c){u==null||u(ce);return}D(ce),u==null||u(ce);return}}if(f&&A&&A!==ce){if(f(A,ce)){D(null);return}if(me&&l===null&&!c){D(ce),u==null||u(ce);return}}me?l===null&&!c&&D(ce):A&&!c&&D(null),u==null||u(ce)},ee=d.useCallback(B=>{B.preventDefault()},[]),O=d.useCallback(B=>{if(!(!p||m==="viewOnly")&&(B.button===2||b)){B.preventDefault(),T(!0);const K=V(B.clientX,B.clientY);K&&q({from:K,currentSquare:K})}},[p,b,V]),re=d.useCallback(B=>{if(!F||!G)return;const K=V(B.clientX,B.clientY);K&&K!==F.currentSquare&&q({...F,currentSquare:K})},[F,G,V]),de=d.useCallback(B=>{if(p&&(B.button===2||b)&&F&&G){const K=V(B.clientX,B.clientY);if(K&&K!==F.from){const me={from:F.from,to:K},ce=z.findIndex(ue=>ue.from===me.from&&ue.to===me.to);ce>=0?_(z.filter((ue,Fe)=>Fe!==ce)):_([...z,me])}q(null),T(!1)}},[p,b,F,G,z,V]),ye=d.useCallback(B=>{},[]),Le=d.useCallback(B=>{},[]),ke=d.useCallback(B=>{},[]),ae=d.useCallback(B=>{const K=B[0],me=B[1],ce=se.indexOf(K),ue=ie.indexOf(me);return{x:(ce+.5)*12.5,y:(ue+.5)*12.5}},[se,ie]),Se=(B,K)=>(B+K)%2===0?"bg-board-light":"bg-board-dark",Te=B=>x&&(x.from===B||x.to===B),De=(B,K,me=!1)=>{const ce=ae(B.from),ue=ae(B.to),Fe=me?"rgba(255, 170, 0, 0.7)":"rgba(255, 170, 0, 0.8)";if(c_(B.from,B.to)){const Pn=u_(B.from,B.to),Qt=ae(Pn),St=ue.x-Qt.x,zn=ue.y-Qt.y,en=Math.sqrt(St*St+zn*zn),Xn=(en-3*.7)/en,cn=Qt.x+St*Xn,Cr=Qt.y+zn*Xn;return o.jsxs("g",{children:[o.jsx("line",{x1:ce.x,y1:ce.y,x2:Qt.x,y2:Qt.y,stroke:Fe,strokeWidth:"2.5",strokeLinecap:"round"}),o.jsx("line",{x1:Qt.x,y1:Qt.y,x2:cn,y2:Cr,stroke:Fe,strokeWidth:"2.5",strokeLinecap:"round"}),o.jsx("polygon",{points:"0,-2 4,0 0,2",fill:Fe,transform:`translate(${ue.x},${ue.y}) rotate(${Math.atan2(zn,St)*180/Math.PI})`})]},`arrow-${K}`)}const Re=ue.x-ce.x,_e=ue.y-ce.y,rt=Math.sqrt(Re*Re+_e*_e),Wt=(rt-3*.7)/rt,Jt=ce.x+Re*Wt,En=ce.y+_e*Wt;return o.jsxs("g",{children:[o.jsx("line",{x1:ce.x,y1:ce.y,x2:Jt,y2:En,stroke:Fe,strokeWidth:"2.5",strokeLinecap:"round"}),o.jsx("polygon",{points:"0,-2 4,0 0,2",fill:Fe,transform:`translate(${ue.x},${ue.y}) rotate(${Math.atan2(_e,Re)*180/Math.PI})`})]},`arrow-${K}`)},Ie=o.jsxs("div",{ref:U,className:"relative w-full h-full select-none",onContextMenu:ee,onMouseDown:O,onMouseMove:re,onMouseUp:de,onMouseLeave:()=>{G&&(q(null),T(!1))},onTouchStart:ye,onTouchMove:Le,onTouchEnd:ke,children:[o.jsx("div",{className:"grid grid-cols-8 grid-rows-8 gap-0 w-full h-full",children:ie.map((B,K)=>se.map((me,ce)=>{var zn;const ue=`${me}${B}`,Fe=yc.indexOf(B),Re=ji.indexOf(me),_e=(zn=xe[Fe])==null?void 0:zn[Re],rt=s.includes(ue),Mt=A===ue,et=c===ue,Wt=ve.includes(ue),Jt=Te(ue),En=r.includes(ue),Pn=En&&_e!==null,Qt=$===ue,St=(en,ys)=>{const ir=parseInt(en.slice(1,3),16),Xn=parseInt(en.slice(3,5),16),cn=parseInt(en.slice(5,7),16);return`rgba(${ir}, ${Xn}, ${cn}, ${ys})`};return o.jsxs("div",{"data-testid":`square-${ue}`,"data-square":ue,onClick:()=>X(me,B,_e),className:`
                    relative flex items-center justify-center cursor-pointer
                    ${Se(ce,K)}
                    ${rt?"ring-2 ring-primary ring-inset":""}
                    ${Jt?"bg-opacity-80 after:absolute after:inset-0 after:bg-blue-500/40":""}
                    ${Qt?"ring-4 ring-orange-400 ring-inset":""}
                    hover-elevate
                  `,style:{...!j&&Mt&&!et?{boxShadow:`inset 0 0 0 4px ${k}`}:{},...!j&&et?{boxShadow:`inset 0 0 0 4px ${k}`}:{}},children:[Wt&&o.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{backgroundColor:St(C,.3)}}),_e&&o.jsx("img",{src:d_[_e],alt:_e,className:"w-[75%] h-[75%] select-none relative z-10 pointer-events-none",draggable:!1}),En&&!Pn&&o.jsx("div",{className:"absolute w-3 h-3 sm:w-4 sm:h-4 rounded-full pointer-events-none z-10",style:{backgroundColor:St(R,.4)}}),Pn&&o.jsx("div",{className:"absolute inset-0 rounded-full pointer-events-none z-10",style:{border:`3px solid ${St(R,.5)}`}}),n&&ce===0&&o.jsx("span",{className:"absolute bottom-0.5 left-1 text-xs font-semibold select-none opacity-70",children:B}),n&&K===7&&o.jsx("span",{className:"absolute bottom-0.5 right-1 text-xs font-semibold select-none opacity-70",children:me})]},ue)}))}),(z.length>0||F)&&o.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[z.map((B,K)=>De(B,K)),F&&F.from!==F.currentSquare&&De({from:F.from,to:F.currentSquare},-1,!0)]})]});return y?o.jsx("div",{className:`aspect-square w-full ${h}`,children:Ie}):o.jsx(Ze,{className:`aspect-square w-full max-w-full md:max-w-[600px] p-1 md:p-2 ${h}`,children:Ie})}const h_=[{key:"q",name:"Queen",white:"/pieces/wQ.svg",black:"/pieces/bQ.svg"},{key:"r",name:"Rook",white:"/pieces/wR.svg",black:"/pieces/bR.svg"},{key:"b",name:"Bishop",white:"/pieces/wB.svg",black:"/pieces/bB.svg"},{key:"n",name:"Knight",white:"/pieces/wN.svg",black:"/pieces/bN.svg"}];function m_({open:e,color:t,onSelect:n}){return o.jsx(Yi,{open:e,onOpenChange:()=>{},children:o.jsxs(zo,{className:"sm:max-w-md",onPointerDownOutside:s=>s.preventDefault(),children:[o.jsx(Vo,{children:o.jsx(qo,{className:"text-center",children:"Promote Pawn"})}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:h_.map(s=>o.jsx(Y,{variant:"outline",className:"h-20 hover-elevate",onClick:()=>n(s.key),"data-testid":`button-promote-${s.key}`,children:o.jsx("img",{src:t==="white"?s.white:s.black,alt:s.name,className:"w-12 h-12",draggable:!1})},s.key))}),o.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"Select a piece to promote your pawn"})]})})}function bl(e,[t,n]){return Math.min(n,Math.max(t,e))}var p_=[" ","Enter","ArrowUp","ArrowDown"],g_=[" ","Enter"],Ol="Select",[ud,dd,v_]=Hm(Ol),[ma,u3]=Yn(Ol,[v_,rd]),fd=rd(),[x_,co]=ma(Ol),[y_,w_]=ma(Ol),hS=e=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:r,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:u,name:f,autoComplete:m,disabled:h,required:y,form:p}=e,g=fd(t),[w,x]=d.useState(null),[v,b]=d.useState(null),[S,N]=d.useState(!1),j=$l(u),[k=!1,C]=Oo({prop:s,defaultProp:r,onChange:i}),[R,P]=Oo({prop:a,defaultProp:l,onChange:c}),D=d.useRef(null),A=w?p||!!w.closest("form"):!0,[z,_]=d.useState(new Set),F=Array.from(z).map(q=>q.props.value).join(";");return o.jsx(SP,{...g,children:o.jsxs(x_,{required:y,scope:t,trigger:w,onTriggerChange:x,valueNode:v,onValueNodeChange:b,valueNodeHasChildren:S,onValueNodeHasChildrenChange:N,contentId:Zr(),value:R,onValueChange:P,open:k,onOpenChange:C,dir:j,triggerPointerDownPosRef:D,disabled:h,children:[o.jsx(ud.Provider,{scope:t,children:o.jsx(y_,{scope:e.__scopeSelect,onNativeOptionAdd:d.useCallback(q=>{_(G=>new Set(G).add(q))},[]),onNativeOptionRemove:d.useCallback(q=>{_(G=>{const T=new Set(G);return T.delete(q),T})},[]),children:n})}),A?o.jsxs(DS,{"aria-hidden":!0,required:y,tabIndex:-1,name:f,autoComplete:m,value:R,onChange:q=>P(q.target.value),disabled:h,form:p,children:[R===void 0?o.jsx("option",{value:""}):null,Array.from(z)]},F):null]})})};hS.displayName=Ol;var mS="SelectTrigger",pS=d.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:s=!1,...r}=e,i=fd(n),a=co(mS,n),l=a.disabled||s,c=Ye(t,a.onTriggerChange),u=dd(n),f=d.useRef("touch"),[m,h,y]=BS(g=>{const w=u().filter(b=>!b.disabled),x=w.find(b=>b.value===a.value),v=FS(w,g,x);v!==void 0&&a.onValueChange(v.value)}),p=g=>{l||(a.onOpenChange(!0),y()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return o.jsx(e1,{asChild:!0,...i,children:o.jsx(Be.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":OS(a.value)?"":void 0,...r,ref:c,onClick:Pe(r.onClick,g=>{g.currentTarget.focus(),f.current!=="mouse"&&p(g)}),onPointerDown:Pe(r.onPointerDown,g=>{f.current=g.pointerType;const w=g.target;w.hasPointerCapture(g.pointerId)&&w.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(p(g),g.preventDefault())}),onKeyDown:Pe(r.onKeyDown,g=>{const w=m.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&h(g.key),!(w&&g.key===" ")&&p_.includes(g.key)&&(p(),g.preventDefault())})})})});pS.displayName=mS;var gS="SelectValue",vS=d.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:r,children:i,placeholder:a="",...l}=e,c=co(gS,n),{onValueNodeHasChildrenChange:u}=c,f=i!==void 0,m=Ye(t,c.onValueNodeChange);return ln(()=>{u(f)},[u,f]),o.jsx(Be.span,{...l,ref:m,style:{pointerEvents:"none"},children:OS(c.value)?o.jsx(o.Fragment,{children:a}):i})});vS.displayName=gS;var b_="SelectIcon",xS=d.forwardRef((e,t)=>{const{__scopeSelect:n,children:s,...r}=e;return o.jsx(Be.span,{"aria-hidden":!0,...r,ref:t,children:s||""})});xS.displayName=b_;var S_="SelectPortal",yS=e=>o.jsx(Gu,{asChild:!0,...e});yS.displayName=S_;var Ko="SelectContent",wS=d.forwardRef((e,t)=>{const n=co(Ko,e.__scopeSelect),[s,r]=d.useState();if(ln(()=>{r(new DocumentFragment)},[]),!n.open){const i=s;return i?Go.createPortal(o.jsx(bS,{scope:e.__scopeSelect,children:o.jsx(ud.Slot,{scope:e.__scopeSelect,children:o.jsx("div",{children:e.children})})}),i):null}return o.jsx(SS,{...e,ref:t})});wS.displayName=Ko;var ks=10,[bS,uo]=ma(Ko),N_="SelectContentImpl",k_=Hi("SelectContent.RemoveScroll"),SS=d.forwardRef((e,t)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:m,collisionBoundary:h,collisionPadding:y,sticky:p,hideWhenDetached:g,avoidCollisions:w,...x}=e,v=co(Ko,n),[b,S]=d.useState(null),[N,j]=d.useState(null),k=Ye(t,V=>S(V)),[C,R]=d.useState(null),[P,D]=d.useState(null),A=dd(n),[z,_]=d.useState(!1),F=d.useRef(!1);d.useEffect(()=>{if(b)return T1(b)},[b]),w1();const q=d.useCallback(V=>{const[X,...ee]=A().map(de=>de.ref.current),[O]=ee.slice(-1),re=document.activeElement;for(const de of V)if(de===re||(de==null||de.scrollIntoView({block:"nearest"}),de===X&&N&&(N.scrollTop=0),de===O&&N&&(N.scrollTop=N.scrollHeight),de==null||de.focus(),document.activeElement!==re))return},[A,N]),G=d.useCallback(()=>q([C,b]),[q,C,b]);d.useEffect(()=>{z&&G()},[z,G]);const{onOpenChange:T,triggerPointerDownPosRef:$}=v;d.useEffect(()=>{if(b){let V={x:0,y:0};const X=O=>{var re,de;V={x:Math.abs(Math.round(O.pageX)-(((re=$.current)==null?void 0:re.x)??0)),y:Math.abs(Math.round(O.pageY)-(((de=$.current)==null?void 0:de.y)??0))}},ee=O=>{V.x<=10&&V.y<=10?O.preventDefault():b.contains(O.target)||T(!1),document.removeEventListener("pointermove",X),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",X),document.addEventListener("pointerup",ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",X),document.removeEventListener("pointerup",ee,{capture:!0})}}},[b,T,$]),d.useEffect(()=>{const V=()=>T(!1);return window.addEventListener("blur",V),window.addEventListener("resize",V),()=>{window.removeEventListener("blur",V),window.removeEventListener("resize",V)}},[T]);const[Q,U]=BS(V=>{const X=A().filter(re=>!re.disabled),ee=X.find(re=>re.ref.current===document.activeElement),O=FS(X,V,ee);O&&setTimeout(()=>O.ref.current.focus())}),ve=d.useCallback((V,X,ee)=>{const O=!F.current&&!ee;(v.value!==void 0&&v.value===X||O)&&(R(V),O&&(F.current=!0))},[v.value]),H=d.useCallback(()=>b==null?void 0:b.focus(),[b]),xe=d.useCallback((V,X,ee)=>{const O=!F.current&&!ee;(v.value!==void 0&&v.value===X||O)&&D(V)},[v.value]),ie=s==="popper"?Dh:NS,se=ie===Dh?{side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:m,collisionBoundary:h,collisionPadding:y,sticky:p,hideWhenDetached:g,avoidCollisions:w}:{};return o.jsx(bS,{scope:n,content:b,viewport:N,onViewportChange:j,itemRefCallback:ve,selectedItem:C,onItemLeave:H,itemTextRefCallback:xe,focusSelectedItem:G,selectedItemText:P,position:s,isPositioned:z,searchRef:Q,children:o.jsx(pp,{as:k_,allowPinchZoom:!0,children:o.jsx(mp,{asChild:!0,trapped:v.open,onMountAutoFocus:V=>{V.preventDefault()},onUnmountAutoFocus:Pe(r,V=>{var X;(X=v.trigger)==null||X.focus({preventScroll:!0}),V.preventDefault()}),children:o.jsx(Ml,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:V=>V.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:o.jsx(ie,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:V=>V.preventDefault(),...x,...se,onPlaced:()=>_(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Pe(x.onKeyDown,V=>{const X=V.ctrlKey||V.altKey||V.metaKey;if(V.key==="Tab"&&V.preventDefault(),!X&&V.key.length===1&&U(V.key),["ArrowUp","ArrowDown","Home","End"].includes(V.key)){let O=A().filter(re=>!re.disabled).map(re=>re.ref.current);if(["ArrowUp","End"].includes(V.key)&&(O=O.slice().reverse()),["ArrowUp","ArrowDown"].includes(V.key)){const re=V.target,de=O.indexOf(re);O=O.slice(de+1)}setTimeout(()=>q(O)),V.preventDefault()}})})})})})})});SS.displayName=N_;var j_="SelectItemAlignedPosition",NS=d.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:s,...r}=e,i=co(Ko,n),a=uo(Ko,n),[l,c]=d.useState(null),[u,f]=d.useState(null),m=Ye(t,k=>f(k)),h=dd(n),y=d.useRef(!1),p=d.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:x,focusSelectedItem:v}=a,b=d.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&g&&w&&x){const k=i.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),R=i.valueNode.getBoundingClientRect(),P=x.getBoundingClientRect();if(i.dir!=="rtl"){const re=P.left-C.left,de=R.left-re,ye=k.left-de,Le=k.width+ye,ke=Math.max(Le,C.width),ae=window.innerWidth-ks,Se=bl(de,[ks,Math.max(ks,ae-ke)]);l.style.minWidth=Le+"px",l.style.left=Se+"px"}else{const re=C.right-P.right,de=window.innerWidth-R.right-re,ye=window.innerWidth-k.right-de,Le=k.width+ye,ke=Math.max(Le,C.width),ae=window.innerWidth-ks,Se=bl(de,[ks,Math.max(ks,ae-ke)]);l.style.minWidth=Le+"px",l.style.right=Se+"px"}const D=h(),A=window.innerHeight-ks*2,z=g.scrollHeight,_=window.getComputedStyle(u),F=parseInt(_.borderTopWidth,10),q=parseInt(_.paddingTop,10),G=parseInt(_.borderBottomWidth,10),T=parseInt(_.paddingBottom,10),$=F+q+z+T+G,Q=Math.min(w.offsetHeight*5,$),U=window.getComputedStyle(g),ve=parseInt(U.paddingTop,10),H=parseInt(U.paddingBottom,10),xe=k.top+k.height/2-ks,ie=A-xe,se=w.offsetHeight/2,V=w.offsetTop+se,X=F+q+V,ee=$-X;if(X<=xe){const re=D.length>0&&w===D[D.length-1].ref.current;l.style.bottom="0px";const de=u.clientHeight-g.offsetTop-g.offsetHeight,ye=Math.max(ie,se+(re?H:0)+de+G),Le=X+ye;l.style.height=Le+"px"}else{const re=D.length>0&&w===D[0].ref.current;l.style.top="0px";const ye=Math.max(xe,F+g.offsetTop+(re?ve:0)+se)+ee;l.style.height=ye+"px",g.scrollTop=X-xe+g.offsetTop}l.style.margin=`${ks}px 0`,l.style.minHeight=Q+"px",l.style.maxHeight=A+"px",s==null||s(),requestAnimationFrame(()=>y.current=!0)}},[h,i.trigger,i.valueNode,l,u,g,w,x,i.dir,s]);ln(()=>b(),[b]);const[S,N]=d.useState();ln(()=>{u&&N(window.getComputedStyle(u).zIndex)},[u]);const j=d.useCallback(k=>{k&&p.current===!0&&(b(),v==null||v(),p.current=!1)},[b,v]);return o.jsx(E_,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:j,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:o.jsx(Be.div,{...r,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});NS.displayName=j_;var C_="SelectPopperPosition",Dh=d.forwardRef((e,t)=>{const{__scopeSelect:n,align:s="start",collisionPadding:r=ks,...i}=e,a=fd(n);return o.jsx(t1,{...a,...i,ref:t,align:s,collisionPadding:r,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Dh.displayName=C_;var[E_,Lp]=ma(Ko,{}),Bh="SelectViewport",kS=d.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:s,...r}=e,i=uo(Bh,n),a=Lp(Bh,n),l=Ye(t,i.onViewportChange),c=d.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(ud.Slot,{scope:n,children:o.jsx(Be.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:Pe(r.onScroll,u=>{const f=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&m){const y=Math.abs(c.current-f.scrollTop);if(y>0){const p=window.innerHeight-ks*2,g=parseFloat(m.style.minHeight),w=parseFloat(m.style.height),x=Math.max(g,w);if(x<p){const v=x+y,b=Math.min(p,v),S=v-b;m.style.height=b+"px",m.style.bottom==="0px"&&(f.scrollTop=S>0?S:0,m.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});kS.displayName=Bh;var jS="SelectGroup",[P_,T_]=ma(jS),R_=d.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,r=Zr();return o.jsx(P_,{scope:n,id:r,children:o.jsx(Be.div,{role:"group","aria-labelledby":r,...s,ref:t})})});R_.displayName=jS;var CS="SelectLabel",ES=d.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,r=T_(CS,n);return o.jsx(Be.div,{id:r.id,...s,ref:t})});ES.displayName=CS;var Pu="SelectItem",[M_,PS]=ma(Pu),TS=d.forwardRef((e,t)=>{const{__scopeSelect:n,value:s,disabled:r=!1,textValue:i,...a}=e,l=co(Pu,n),c=uo(Pu,n),u=l.value===s,[f,m]=d.useState(i??""),[h,y]=d.useState(!1),p=Ye(t,v=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,v,s,r)}),g=Zr(),w=d.useRef("touch"),x=()=>{r||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(M_,{scope:n,value:s,disabled:r,textId:g,isSelected:u,onItemTextChange:d.useCallback(v=>{m(b=>b||((v==null?void 0:v.textContent)??"").trim())},[]),children:o.jsx(ud.ItemSlot,{scope:n,value:s,disabled:r,textValue:f,children:o.jsx(Be.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...a,ref:p,onFocus:Pe(a.onFocus,()=>y(!0)),onBlur:Pe(a.onBlur,()=>y(!1)),onClick:Pe(a.onClick,()=>{w.current!=="mouse"&&x()}),onPointerUp:Pe(a.onPointerUp,()=>{w.current==="mouse"&&x()}),onPointerDown:Pe(a.onPointerDown,v=>{w.current=v.pointerType}),onPointerMove:Pe(a.onPointerMove,v=>{var b;w.current=v.pointerType,r?(b=c.onItemLeave)==null||b.call(c):w.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Pe(a.onPointerLeave,v=>{var b;v.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:Pe(a.onKeyDown,v=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&v.key===" "||(g_.includes(v.key)&&x(),v.key===" "&&v.preventDefault())})})})})});TS.displayName=Pu;var za="SelectItemText",RS=d.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:r,...i}=e,a=co(za,n),l=uo(za,n),c=PS(za,n),u=w_(za,n),[f,m]=d.useState(null),h=Ye(t,x=>m(x),c.onItemTextChange,x=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,x,c.value,c.disabled)}),y=f==null?void 0:f.textContent,p=d.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:y},c.value),[c.disabled,c.value,y]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=u;return ln(()=>(g(p),()=>w(p)),[g,w,p]),o.jsxs(o.Fragment,{children:[o.jsx(Be.span,{id:c.textId,...i,ref:h}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Go.createPortal(i.children,a.valueNode):null]})});RS.displayName=za;var MS="SelectItemIndicator",_S=d.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return PS(MS,n).isSelected?o.jsx(Be.span,{"aria-hidden":!0,...s,ref:t}):null});_S.displayName=MS;var Fh="SelectScrollUpButton",AS=d.forwardRef((e,t)=>{const n=uo(Fh,e.__scopeSelect),s=Lp(Fh,e.__scopeSelect),[r,i]=d.useState(!1),a=Ye(t,s.onScrollButtonChange);return ln(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),r?o.jsx(IS,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});AS.displayName=Fh;var zh="SelectScrollDownButton",LS=d.forwardRef((e,t)=>{const n=uo(zh,e.__scopeSelect),s=Lp(zh,e.__scopeSelect),[r,i]=d.useState(!1),a=Ye(t,s.onScrollButtonChange);return ln(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<u;i(f)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),r?o.jsx(IS,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});LS.displayName=zh;var IS=d.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:s,...r}=e,i=uo("SelectScrollButton",n),a=d.useRef(null),l=dd(n),c=d.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return d.useEffect(()=>()=>c(),[c]),ln(()=>{var f;const u=l().find(m=>m.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),o.jsx(Be.div,{"aria-hidden":!0,...r,ref:t,style:{flexShrink:0,...r.style},onPointerDown:Pe(r.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(s,50))}),onPointerMove:Pe(r.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),a.current===null&&(a.current=window.setInterval(s,50))}),onPointerLeave:Pe(r.onPointerLeave,()=>{c()})})}),__="SelectSeparator",$S=d.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return o.jsx(Be.div,{"aria-hidden":!0,...s,ref:t})});$S.displayName=__;var Vh="SelectArrow",A_=d.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,r=fd(n),i=co(Vh,n),a=uo(Vh,n);return i.open&&a.position==="popper"?o.jsx(n1,{...r,...s,ref:t}):null});A_.displayName=Vh;function OS(e){return e===""||e===void 0}var DS=d.forwardRef((e,t)=>{const{value:n,...s}=e,r=d.useRef(null),i=Ye(t,r),a=fp(n);return d.useEffect(()=>{const l=r.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&f){const m=new Event("change",{bubbles:!0});f.call(l,n),l.dispatchEvent(m)}},[a,n]),o.jsx(_l,{asChild:!0,children:o.jsx("select",{...s,ref:i,defaultValue:n})})});DS.displayName="BubbleSelect";function BS(e){const t=Kt(e),n=d.useRef(""),s=d.useRef(0),r=d.useCallback(a=>{const l=n.current+a;t(l),function c(u){n.current=u,window.clearTimeout(s.current),u!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=d.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,r,i]}function FS(e,t,n){const r=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let a=L_(e,Math.max(i,0));r.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(r.toLowerCase()));return c!==n?c:void 0}function L_(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var I_=hS,zS=pS,$_=vS,O_=xS,D_=yS,VS=wS,B_=kS,qS=ES,KS=TS,F_=RS,z_=_S,WS=AS,US=LS,HS=$S;const Sl=I_,Nl=$_,ea=d.forwardRef(({className:e,children:t,...n},s)=>o.jsxs(zS,{ref:s,className:Ke("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,o.jsx(O_,{asChild:!0,children:o.jsx(dw,{className:"h-4 w-4 opacity-50"})})]}));ea.displayName=zS.displayName;const GS=d.forwardRef(({className:e,...t},n)=>o.jsx(WS,{ref:n,className:Ke("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(d2,{className:"h-4 w-4"})}));GS.displayName=WS.displayName;const QS=d.forwardRef(({className:e,...t},n)=>o.jsx(US,{ref:n,className:Ke("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(dw,{className:"h-4 w-4"})}));QS.displayName=US.displayName;const ta=d.forwardRef(({className:e,children:t,position:n="popper",...s},r)=>o.jsx(D_,{children:o.jsxs(VS,{ref:r,className:Ke("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...s,children:[o.jsx(GS,{}),o.jsx(B_,{className:Ke("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),o.jsx(QS,{})]})}));ta.displayName=VS.displayName;const V_=d.forwardRef(({className:e,...t},n)=>o.jsx(qS,{ref:n,className:Ke("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));V_.displayName=qS.displayName;const ts=d.forwardRef(({className:e,children:t,...n},s)=>o.jsxs(KS,{ref:s,className:Ke("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(z_,{children:o.jsx(Al,{className:"h-4 w-4"})})}),o.jsx(F_,{children:t})]}));ts.displayName=KS.displayName;const q_=d.forwardRef(({className:e,...t},n)=>o.jsx(HS,{ref:n,className:Ke("-mx-1 my-1 h-px bg-muted",e),...t}));q_.displayName=HS.displayName;function Ci(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}var K_=Mx[" useInsertionEffect ".trim().toString()]||ln;function W_({prop:e,defaultProp:t,onChange:n=()=>{},caller:s}){const[r,i,a]=U_({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:r;{const f=d.useRef(e!==void 0);d.useEffect(()=>{const m=f.current;m!==l&&console.warn(`${s} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,s])}const u=d.useCallback(f=>{var m;if(l){const h=H_(f)?f(e):f;h!==e&&((m=a.current)==null||m.call(a,h))}else i(f)},[l,e,i,a]);return[c,u]}function U_({defaultProp:e,onChange:t}){const[n,s]=d.useState(e),r=d.useRef(n),i=d.useRef(t);return K_(()=>{i.current=t},[t]),d.useEffect(()=>{var a;r.current!==n&&((a=i.current)==null||a.call(i,n),r.current=n)},[n,r]),[n,s,i]}function H_(e){return typeof e=="function"}function qh(e){const t=G_(e),n=d.forwardRef((s,r)=>{const{children:i,...a}=s,l=d.Children.toArray(i),c=l.find(Y_);if(c){const u=c.props.children,f=l.map(m=>m===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:m);return o.jsx(t,{...a,ref:r,children:d.isValidElement(u)?d.cloneElement(u,void 0,f):null})}return o.jsx(t,{...a,ref:r,children:i})});return n.displayName=`${e}.Slot`,n}function G_(e){const t=d.forwardRef((n,s)=>{const{children:r,...i}=n;if(d.isValidElement(r)){const a=Z_(r),l=X_(i,r.props);return r.type!==d.Fragment&&(l.ref=s?Um(s,a):a),d.cloneElement(r,l)}return d.Children.count(r)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Q_=Symbol("radix.slottable");function Y_(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Q_}function X_(e,t){const n={...t};for(const s in t){const r=e[s],i=t[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...l)=>{const c=i(...l);return r(...l),c}:r&&(n[s]=r):s==="style"?n[s]={...r,...i}:s==="className"&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...e,...n}}function Z_(e){var s,r;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var J_=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Dl=J_.reduce((e,t)=>{const n=qh(`Primitive.${t}`),s=d.forwardRef((r,i)=>{const{asChild:a,...l}=r,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function e4(e){const t=e+"CollectionProvider",[n,s]=Yn(t),[r,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:w,children:x}=g,v=Ln.useRef(null),b=Ln.useRef(new Map).current;return o.jsx(r,{scope:w,itemMap:b,collectionRef:v,children:x})};a.displayName=t;const l=e+"CollectionSlot",c=qh(l),u=Ln.forwardRef((g,w)=>{const{scope:x,children:v}=g,b=i(l,x),S=Ye(w,b.collectionRef);return o.jsx(c,{ref:S,children:v})});u.displayName=l;const f=e+"CollectionItemSlot",m="data-radix-collection-item",h=qh(f),y=Ln.forwardRef((g,w)=>{const{scope:x,children:v,...b}=g,S=Ln.useRef(null),N=Ye(w,S),j=i(f,x);return Ln.useEffect(()=>(j.itemMap.set(S,{ref:S,...b}),()=>void j.itemMap.delete(S))),o.jsx(h,{[m]:"",ref:N,children:v})});y.displayName=f;function p(g){const w=i(e+"CollectionConsumer",g);return Ln.useCallback(()=>{const v=w.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${m}]`));return Array.from(w.itemMap.values()).sort((j,k)=>b.indexOf(j.ref.current)-b.indexOf(k.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:u,ItemSlot:y},p,s]}var YS=["PageUp","PageDown"],XS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ZS={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},pa="Slider",[Kh,t4,n4]=e4(pa),[JS,d3]=Yn(pa,[n4]),[s4,hd]=JS(pa),eN=d.forwardRef((e,t)=>{const{name:n,min:s=0,max:r=100,step:i=1,orientation:a="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[s],value:f,onValueChange:m=()=>{},onValueCommit:h=()=>{},inverted:y=!1,form:p,...g}=e,w=d.useRef(new Set),x=d.useRef(0),b=a==="horizontal"?r4:o4,[S=[],N]=W_({prop:f,defaultProp:u,onChange:D=>{var z;(z=[...w.current][x.current])==null||z.focus(),m(D)}}),j=d.useRef(S);function k(D){const A=u4(S,D);P(D,A)}function C(D){P(D,x.current)}function R(){const D=j.current[x.current];S[x.current]!==D&&h(S)}function P(D,A,{commit:z}={commit:!1}){const _=m4(i),F=p4(Math.round((D-s)/i)*i+s,_),q=bl(F,[s,r]);N((G=[])=>{const T=l4(G,q,A);if(h4(T,c*i)){x.current=T.indexOf(q);const $=String(T)!==String(G);return $&&z&&h(T),$?T:G}else return G})}return o.jsx(s4,{scope:e.__scopeSlider,name:n,disabled:l,min:s,max:r,valueIndexToChangeRef:x,thumbs:w.current,values:S,orientation:a,form:p,children:o.jsx(Kh.Provider,{scope:e.__scopeSlider,children:o.jsx(Kh.Slot,{scope:e.__scopeSlider,children:o.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:t,onPointerDown:Ci(g.onPointerDown,()=>{l||(j.current=S)}),min:s,max:r,inverted:y,onSlideStart:l?void 0:k,onSlideMove:l?void 0:C,onSlideEnd:l?void 0:R,onHomeKeyDown:()=>!l&&P(s,0,{commit:!0}),onEndKeyDown:()=>!l&&P(r,S.length-1,{commit:!0}),onStepKeyDown:({event:D,direction:A})=>{if(!l){const F=YS.includes(D.key)||D.shiftKey&&XS.includes(D.key)?10:1,q=x.current,G=S[q],T=i*F*A;P(G+T,q,{commit:!0})}}})})})})});eN.displayName=pa;var[tN,nN]=JS(pa,{startEdge:"left",endEdge:"right",size:"width",direction:1}),r4=d.forwardRef((e,t)=>{const{min:n,max:s,dir:r,inverted:i,onSlideStart:a,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...f}=e,[m,h]=d.useState(null),y=Ye(t,b=>h(b)),p=d.useRef(void 0),g=$l(r),w=g==="ltr",x=w&&!i||!w&&i;function v(b){const S=p.current||m.getBoundingClientRect(),N=[0,S.width],k=Ip(N,x?[n,s]:[s,n]);return p.current=S,k(b-S.left)}return o.jsx(tN,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:o.jsx(sN,{dir:g,"data-orientation":"horizontal",...f,ref:y,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const S=v(b.clientX);a==null||a(S)},onSlideMove:b=>{const S=v(b.clientX);l==null||l(S)},onSlideEnd:()=>{p.current=void 0,c==null||c()},onStepKeyDown:b=>{const N=ZS[x?"from-left":"from-right"].includes(b.key);u==null||u({event:b,direction:N?-1:1})}})})}),o4=d.forwardRef((e,t)=>{const{min:n,max:s,inverted:r,onSlideStart:i,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=e,f=d.useRef(null),m=Ye(t,f),h=d.useRef(void 0),y=!r;function p(g){const w=h.current||f.current.getBoundingClientRect(),x=[0,w.height],b=Ip(x,y?[s,n]:[n,s]);return h.current=w,b(g-w.top)}return o.jsx(tN,{scope:e.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:o.jsx(sN,{"data-orientation":"vertical",...u,ref:m,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const w=p(g.clientY);i==null||i(w)},onSlideMove:g=>{const w=p(g.clientY);a==null||a(w)},onSlideEnd:()=>{h.current=void 0,l==null||l()},onStepKeyDown:g=>{const x=ZS[y?"from-bottom":"from-top"].includes(g.key);c==null||c({event:g,direction:x?-1:1})}})})}),sN=d.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:r,onSlideEnd:i,onHomeKeyDown:a,onEndKeyDown:l,onStepKeyDown:c,...u}=e,f=hd(pa,n);return o.jsx(Dl.span,{...u,ref:t,onKeyDown:Ci(e.onKeyDown,m=>{m.key==="Home"?(a(m),m.preventDefault()):m.key==="End"?(l(m),m.preventDefault()):YS.concat(XS).includes(m.key)&&(c(m),m.preventDefault())}),onPointerDown:Ci(e.onPointerDown,m=>{const h=m.target;h.setPointerCapture(m.pointerId),m.preventDefault(),f.thumbs.has(h)?h.focus():s(m)}),onPointerMove:Ci(e.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&r(m)}),onPointerUp:Ci(e.onPointerUp,m=>{const h=m.target;h.hasPointerCapture(m.pointerId)&&(h.releasePointerCapture(m.pointerId),i(m))})})}),rN="SliderTrack",oN=d.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,r=hd(rN,n);return o.jsx(Dl.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...s,ref:t})});oN.displayName=rN;var Wh="SliderRange",iN=d.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,r=hd(Wh,n),i=nN(Wh,n),a=d.useRef(null),l=Ye(t,a),c=r.values.length,u=r.values.map(h=>cN(h,r.min,r.max)),f=c>1?Math.min(...u):0,m=100-Math.max(...u);return o.jsx(Dl.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...s,ref:l,style:{...e.style,[i.startEdge]:f+"%",[i.endEdge]:m+"%"}})});iN.displayName=Wh;var Uh="SliderThumb",aN=d.forwardRef((e,t)=>{const n=t4(e.__scopeSlider),[s,r]=d.useState(null),i=Ye(t,l=>r(l)),a=d.useMemo(()=>s?n().findIndex(l=>l.ref.current===s):-1,[n,s]);return o.jsx(i4,{...e,ref:i,index:a})}),i4=d.forwardRef((e,t)=>{const{__scopeSlider:n,index:s,name:r,...i}=e,a=hd(Uh,n),l=nN(Uh,n),[c,u]=d.useState(null),f=Ye(t,v=>u(v)),m=c?a.form||!!c.closest("form"):!0,h=ap(c),y=a.values[s],p=y===void 0?0:cN(y,a.min,a.max),g=c4(s,a.values.length),w=h==null?void 0:h[l.size],x=w?d4(w,p,l.direction):0;return d.useEffect(()=>{if(c)return a.thumbs.add(c),()=>{a.thumbs.delete(c)}},[c,a.thumbs]),o.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${p}% + ${x}px)`},children:[o.jsx(Kh.ItemSlot,{scope:e.__scopeSlider,children:o.jsx(Dl.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":a.min,"aria-valuenow":y,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...i,ref:f,style:y===void 0?{display:"none"}:e.style,onFocus:Ci(e.onFocus,()=>{a.valueIndexToChangeRef.current=s})})}),m&&o.jsx(lN,{name:r??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:y},s)]})});aN.displayName=Uh;var a4="RadioBubbleInput",lN=d.forwardRef(({__scopeSlider:e,value:t,...n},s)=>{const r=d.useRef(null),i=Ye(r,s),a=fp(t);return d.useEffect(()=>{const l=r.current;if(!l)return;const c=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==t&&f){const m=new Event("input",{bubbles:!0});f.call(l,t),l.dispatchEvent(m)}},[a,t]),o.jsx(Dl.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});lN.displayName=a4;function l4(e=[],t,n){const s=[...e];return s[n]=t,s.sort((r,i)=>r-i)}function cN(e,t,n){const i=100/(n-t)*(e-t);return bl(i,[0,100])}function c4(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function u4(e,t){if(e.length===1)return 0;const n=e.map(r=>Math.abs(r-t)),s=Math.min(...n);return n.indexOf(s)}function d4(e,t,n){const s=e/2,i=Ip([0,50],[0,s]);return(s-i(t)*n)*n}function f4(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function h4(e,t){if(t>0){const n=f4(e);return Math.min(...n)>=t}return!0}function Ip(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function m4(e){return(String(e).split(".")[1]||"").length}function p4(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var uN=eN,g4=oN,v4=iN,x4=aN;const dN=d.forwardRef(({className:e,...t},n)=>o.jsxs(uN,{ref:n,className:Ke("relative flex w-full touch-none select-none items-center",e),...t,children:[o.jsx(g4,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-muted",children:o.jsx(v4,{className:"absolute h-full bg-primary"})}),o.jsx(x4,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));dN.displayName=uN.displayName;function y4(e,t){return d.useReducer((n,s)=>t[n][s]??n,e)}var $p="ScrollArea",[fN,f3]=Yn($p),[w4,xs]=fN($p),hN=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:s="hover",dir:r,scrollHideDelay:i=600,...a}=e,[l,c]=d.useState(null),[u,f]=d.useState(null),[m,h]=d.useState(null),[y,p]=d.useState(null),[g,w]=d.useState(null),[x,v]=d.useState(0),[b,S]=d.useState(0),[N,j]=d.useState(!1),[k,C]=d.useState(!1),R=Ye(t,D=>c(D)),P=$l(r);return o.jsx(w4,{scope:n,type:s,dir:P,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:f,content:m,onContentChange:h,scrollbarX:y,onScrollbarXChange:p,scrollbarXEnabled:N,onScrollbarXEnabledChange:j,scrollbarY:g,onScrollbarYChange:w,scrollbarYEnabled:k,onScrollbarYEnabledChange:C,onCornerWidthChange:v,onCornerHeightChange:S,children:o.jsx(Be.div,{dir:P,...a,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});hN.displayName=$p;var mN="ScrollAreaViewport",pN=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:s,nonce:r,...i}=e,a=xs(mN,n),l=d.useRef(null),c=Ye(t,l,a.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(Be.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:o.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});pN.displayName=mN;var or="ScrollAreaScrollbar",Op=d.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=xs(or,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=r,l=e.orientation==="horizontal";return d.useEffect(()=>(l?i(!0):a(!0),()=>{l?i(!1):a(!1)}),[l,i,a]),r.type==="hover"?o.jsx(b4,{...s,ref:t,forceMount:n}):r.type==="scroll"?o.jsx(S4,{...s,ref:t,forceMount:n}):r.type==="auto"?o.jsx(gN,{...s,ref:t,forceMount:n}):r.type==="always"?o.jsx(Dp,{...s,ref:t}):null});Op.displayName=or;var b4=d.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=xs(or,e.__scopeScrollArea),[i,a]=d.useState(!1);return d.useEffect(()=>{const l=r.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),a(!0)},f=()=>{c=window.setTimeout(()=>a(!1),r.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",f)}}},[r.scrollArea,r.scrollHideDelay]),o.jsx(zs,{present:n||i,children:o.jsx(gN,{"data-state":i?"visible":"hidden",...s,ref:t})})}),S4=d.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=xs(or,e.__scopeScrollArea),i=e.orientation==="horizontal",a=pd(()=>c("SCROLL_END"),100),[l,c]=y4("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,r.scrollHideDelay,c]),d.useEffect(()=>{const u=r.viewport,f=i?"scrollLeft":"scrollTop";if(u){let m=u[f];const h=()=>{const y=u[f];m!==y&&(c("SCROLL"),a()),m=y};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[r.viewport,i,c,a]),o.jsx(zs,{present:n||l!=="hidden",children:o.jsx(Dp,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:Pe(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Pe(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),gN=d.forwardRef((e,t)=>{const n=xs(or,e.__scopeScrollArea),{forceMount:s,...r}=e,[i,a]=d.useState(!1),l=e.orientation==="horizontal",c=pd(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?u:f)}},10);return na(n.viewport,c),na(n.content,c),o.jsx(zs,{present:s||i,children:o.jsx(Dp,{"data-state":i?"visible":"hidden",...r,ref:t})})}),Dp=d.forwardRef((e,t)=>{const{orientation:n="vertical",...s}=e,r=xs(or,e.__scopeScrollArea),i=d.useRef(null),a=d.useRef(0),[l,c]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=bN(l.viewport,l.content),f={...s,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:h=>a.current=h};function m(h,y){return P4(h,a.current,l,y)}return n==="horizontal"?o.jsx(N4,{...f,ref:t,onThumbPositionChange:()=>{if(r.viewport&&i.current){const h=r.viewport.scrollLeft,y=dx(h,l,r.dir);i.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:h=>{r.viewport&&(r.viewport.scrollLeft=h)},onDragScroll:h=>{r.viewport&&(r.viewport.scrollLeft=m(h,r.dir))}}):n==="vertical"?o.jsx(k4,{...f,ref:t,onThumbPositionChange:()=>{if(r.viewport&&i.current){const h=r.viewport.scrollTop,y=dx(h,l);i.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:h=>{r.viewport&&(r.viewport.scrollTop=h)},onDragScroll:h=>{r.viewport&&(r.viewport.scrollTop=m(h))}}):null}),N4=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...r}=e,i=xs(or,e.__scopeScrollArea),[a,l]=d.useState(),c=d.useRef(null),u=Ye(t,c,i.onScrollbarXChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(xN,{"data-orientation":"horizontal",...r,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":md(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,m)=>{if(i.viewport){const h=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),NN(h,m)&&f.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Ru(a.paddingLeft),paddingEnd:Ru(a.paddingRight)}})}})}),k4=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...r}=e,i=xs(or,e.__scopeScrollArea),[a,l]=d.useState(),c=d.useRef(null),u=Ye(t,c,i.onScrollbarYChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(xN,{"data-orientation":"vertical",...r,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":md(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,m)=>{if(i.viewport){const h=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),NN(h,m)&&f.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Ru(a.paddingTop),paddingEnd:Ru(a.paddingBottom)}})}})}),[j4,vN]=fN(or),xN=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:r,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:f,onResize:m,...h}=e,y=xs(or,n),[p,g]=d.useState(null),w=Ye(t,R=>g(R)),x=d.useRef(null),v=d.useRef(""),b=y.viewport,S=s.content-s.viewport,N=Kt(f),j=Kt(c),k=pd(m,10);function C(R){if(x.current){const P=R.clientX-x.current.left,D=R.clientY-x.current.top;u({x:P,y:D})}}return d.useEffect(()=>{const R=P=>{const D=P.target;(p==null?void 0:p.contains(D))&&N(P,S)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[b,p,S,N]),d.useEffect(j,[s,j]),na(p,k),na(y.content,k),o.jsx(j4,{scope:n,scrollbar:p,hasThumb:r,onThumbChange:Kt(i),onThumbPointerUp:Kt(a),onThumbPositionChange:j,onThumbPointerDown:Kt(l),children:o.jsx(Be.div,{...h,ref:w,style:{position:"absolute",...h.style},onPointerDown:Pe(e.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),x.current=p.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),C(R))}),onPointerMove:Pe(e.onPointerMove,C),onPointerUp:Pe(e.onPointerUp,R=>{const P=R.target;P.hasPointerCapture(R.pointerId)&&P.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=v.current,y.viewport&&(y.viewport.style.scrollBehavior=""),x.current=null})})})}),Tu="ScrollAreaThumb",yN=d.forwardRef((e,t)=>{const{forceMount:n,...s}=e,r=vN(Tu,e.__scopeScrollArea);return o.jsx(zs,{present:n||r.hasThumb,children:o.jsx(C4,{ref:t,...s})})}),C4=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:s,...r}=e,i=xs(Tu,n),a=vN(Tu,n),{onThumbPositionChange:l}=a,c=Ye(t,m=>a.onThumbChange(m)),u=d.useRef(void 0),f=pd(()=>{u.current&&(u.current(),u.current=void 0)},100);return d.useEffect(()=>{const m=i.viewport;if(m){const h=()=>{if(f(),!u.current){const y=T4(m,l);u.current=y,l()}};return l(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[i.viewport,f,l]),o.jsx(Be.div,{"data-state":a.hasThumb?"visible":"hidden",...r,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:Pe(e.onPointerDownCapture,m=>{const y=m.target.getBoundingClientRect(),p=m.clientX-y.left,g=m.clientY-y.top;a.onThumbPointerDown({x:p,y:g})}),onPointerUp:Pe(e.onPointerUp,a.onThumbPointerUp)})});yN.displayName=Tu;var Bp="ScrollAreaCorner",wN=d.forwardRef((e,t)=>{const n=xs(Bp,e.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?o.jsx(E4,{...e,ref:t}):null});wN.displayName=Bp;var E4=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,...s}=e,r=xs(Bp,n),[i,a]=d.useState(0),[l,c]=d.useState(0),u=!!(i&&l);return na(r.scrollbarX,()=>{var m;const f=((m=r.scrollbarX)==null?void 0:m.offsetHeight)||0;r.onCornerHeightChange(f),c(f)}),na(r.scrollbarY,()=>{var m;const f=((m=r.scrollbarY)==null?void 0:m.offsetWidth)||0;r.onCornerWidthChange(f),a(f)}),u?o.jsx(Be.div,{...s,ref:t,style:{width:i,height:l,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Ru(e){return e?parseInt(e,10):0}function bN(e,t){const n=e/t;return isNaN(n)?0:n}function md(e){const t=bN(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-n)*t;return Math.max(s,18)}function P4(e,t,n,s="ltr"){const r=md(n),i=r/2,a=t||i,l=r-a,c=n.scrollbar.paddingStart+a,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,m=s==="ltr"?[0,f]:[f*-1,0];return SN([c,u],m)(e)}function dx(e,t,n="ltr"){const s=md(t),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-r,a=t.content-t.viewport,l=i-s,c=n==="ltr"?[0,a]:[a*-1,0],u=bl(e,c);return SN([0,a],[0,l])(u)}function SN(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function NN(e,t){return e>0&&e<t}var T4=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},s=0;return function r(){const i={left:e.scrollLeft,top:e.scrollTop},a=n.left!==i.left,l=n.top!==i.top;(a||l)&&t(),n=i,s=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(s)};function pd(e,t){const n=Kt(e),s=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(s.current),[]),d.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,t)},[n,t])}function na(e,t){const n=Kt(t);ln(()=>{let s=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return r.observe(e),()=>{window.cancelAnimationFrame(s),r.unobserve(e)}}},[e,n])}var kN=hN,R4=pN,M4=wN;const Fp=d.forwardRef(({className:e,children:t,...n},s)=>o.jsxs(kN,{ref:s,className:Ke("relative overflow-hidden",e),...n,children:[o.jsx(R4,{className:"h-full w-full rounded-[inherit]",children:t}),o.jsx(jN,{}),o.jsx(M4,{})]}));Fp.displayName=kN.displayName;const jN=d.forwardRef(({className:e,orientation:t="vertical",...n},s)=>o.jsx(Op,{ref:s,orientation:t,className:Ke("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:o.jsx(yN,{className:"relative flex-1 rounded-full bg-border"})}));jN.displayName=Op.displayName;const _4="/assets/title_cropped-BD2iTFVW.webp",vf={wK:"/pieces/wK.svg",wQ:"/pieces/wQ.svg",wR:"/pieces/wR.svg",wB:"/pieces/wB.svg",wN:"/pieces/wN.svg",wP:"/pieces/wP.svg",bK:"/pieces/bK.svg",bQ:"/pieces/bQ.svg",bR:"/pieces/bR.svg",bB:"/pieces/bB.svg",bN:"/pieces/bN.svg",bP:"/pieces/bP.svg"},A4=["wK","wQ","wR","wB","wN","wP","bK","bQ","bR","bB","bN","bP"],L4={K:["king"],Q:["queen"],R:["rook","castle","rock","brook"],B:["bishop","bish","bishup"],N:["knight","night","horse","nite"],P:["pawn","pond"]},I4={ay:"a",aye:"a",eh:"a",bee:"b",be:"b",cee:"c",see:"c",sea:"c",dee:"d",eee:"e",ee:"e",ef:"f",eff:"f",gee:"g",jee:"g",aitch:"h",ach:"h",alpha:"a",alfa:"a",apple:"a",able:"a",bravo:"b",boy:"b",baker:"b",charlie:"c",cat:"c",delta:"d",dog:"d",david:"d",echo:"e",easy:"e",edward:"e",foxtrot:"f",fox:"f",frank:"f",golf:"g",george:"g",hotel:"h",henry:"h"};function $4(e){let t=e.toLowerCase();return t=t.replace(/\bbefore\b/g,"b 4"),t=t.replace(/\bsci\s*fi\b/g,"c 5"),t=t.replace(/\bscifi\b/g,"c 5"),t=t.replace(/\bquincy\b/g,"queen c"),t=t.replace(/\bhe\s+([1-8])\b/g,"e $1"),t=t.replace(/\bhe\s+(one|two|three|four|five|six|seven|eight|for)\b/gi,"e $1"),t=t.replace(/\bthe\s+([1-8])\b/g,"d $1"),t=t.replace(/\bthe\s+(one|two|three|four|five|six|seven|eight)\b/gi,"d $1"),t=t.replace(/\b([a-h])\s+for\b/g,"$1 4"),t}const O4={one:"1",won:"1",first:"1",two:"2",too:"2",second:"2",three:"3",free:"3",third:"3",tree:"3",four:"4",fore:"4",forth:"4",fourth:"4",for:"4",five:"5",fifth:"5",six:"6",sixth:"6",sicks:"6",seven:"7",seventh:"7",eight:"8",ate:"8",eighth:"8"};function D4(e){const t=Array(8).fill(null).map(()=>Array(8).fill(null)),[n]=e.split(" "),s=n.split("/"),r={K:"wK",Q:"wQ",R:"wR",B:"wB",N:"wN",P:"wP",k:"bK",q:"bQ",r:"bR",b:"bB",n:"bN",p:"bP"};return s.forEach((i,a)=>{let l=0;for(const c of i)/\d/.test(c)?l+=parseInt(c):r[c]&&(t[a][l]=r[c],l++)}),t}function B4(e,t){let n=0,s=0;for(let r=0;r<8;r++)for(let i=0;i<8;i++){const a=t[r][i],l=e[r][i];a!==null&&(s++,a===l&&n++)}return s===0?100:Math.round(n/s*100)}function fx(e){const n=$4(e).toLowerCase().trim();let s=null,r=null;for(const[i,a]of Object.entries(I4))if(n.includes(i)){s=a;break}if(!s){const i=n.match(/\b([a-h])\b/);i&&(s=i[1])}for(const[i,a]of Object.entries(O4))if(n.includes(i)){r=a;break}if(!r){const i=n.match(/[1-8]/);i&&(r=i[0])}if(!s||!r){const i=n.match(/([a-h])\s*([1-8])/);if(i)return{file:i[1],rank:i[2]}}return s&&r?{file:s,rank:r}:null}function F4(e){const t=e.toLowerCase();for(const[n,s]of Object.entries(L4))for(const r of s)if(t.includes(r))return n;return null}function hx(e){const t=e.toLowerCase();return t.includes("white")?"w":t.includes("black")?"b":null}function z4({actualFen:e,playerColor:t,onComplete:n,onSkip:s,onContinue:r,onViewReport:i}){const[a,l]=d.useState("ready"),[c,u]=d.useState(Array(8).fill(null).map(()=>Array(8).fill(null))),[f,m]=d.useState(null),[h,y]=d.useState(!1),[p,g]=d.useState(null),[w,x]=d.useState(100),[v,b]=d.useState(!1),[S,N]=d.useState(null),[j,k]=d.useState(""),[C,R]=d.useState(!0),[P,D]=d.useState(null),[A,z]=d.useState("w"),_=d.useRef("w"),[F,q]=d.useState(new Set),G=d.useRef(0),T=d.useRef(0),$=d.useRef(null),Q=d.useRef(!0),U=D4(e);d.useEffect(()=>{_.current=A},[A]);const ve=d.useCallback((B,K)=>{const me=B.charCodeAt(0)-97;return{row:8-parseInt(K),col:me}},[]),H=d.useCallback((B,K,me,ce)=>{u(Fe=>{const Re=Fe.map(_e=>[..._e]);return Re[K][me]=B,Re});const ue=B.charAt(0);if(z(ue),_.current=ue,ce){G.current++;const Fe=`${K}-${me}`;q(Re=>new Set(Re).add(Fe)),setTimeout(()=>{q(Re=>{const _e=new Set(Re);return _e.delete(Fe),_e})},300)}else T.current++},[]),xe=d.useCallback((B,K,me)=>{u(ce=>{const ue=ce.map(Fe=>[...Fe]);return ue[B][K]&&(me?G.current++:T.current++,ue[B][K]=null),ue})},[]),ie=d.useCallback(B=>{const K=B.toLowerCase().trim();if(k(B),K.includes("clear all")||K.includes("reset board")||K.includes("reset")){u(Array(8).fill(null).map(()=>Array(8).fill(null))),N(null);return}if(K.includes("done")||K.includes("submit")||K.includes("check position")){$.current&&$.current();return}if(K==="white"||K==="switch to white"||K==="white pieces"){z("w"),_.current="w";return}if(K==="black"||K==="switch to black"||K==="black pieces"){z("b"),_.current="b";return}if(S){const Fe=hx(K);if(Fe){const Re=Fe+S.pieceType,{row:_e,col:rt}=ve(S.square.file,S.square.rank);H(Re,_e,rt,!0),N(null);return}}if(K.includes("clear")||K.includes("remove")||K.includes("delete")){const Fe=fx(K);if(Fe){const{row:Re,col:_e}=ve(Fe.file,Fe.rank);xe(Re,_e,!0)}return}const me=F4(K),ce=fx(K),ue=hx(K);if(ue&&(z(ue),_.current=ue),me&&ce){const Re=(ue||_.current)+me,{row:_e,col:rt}=ve(ce.file,ce.rank);H(Re,_e,rt,!0),N(null)}},[S,ve,H,xe]),se=d.useRef(ie);d.useEffect(()=>{se.current=ie},[ie]);const V=d.useCallback(async()=>{if(h)return;if(await sb(),!await rb()){console.warn("[Reconstruction] Microphone permission not granted"),await Cp()==="prompt-with-rationale"&&alert("Voice control requires microphone access. Please enable it in your device Settings > Apps > Blindfold Chess > Permissions.");return}await ht.start({mode:"placement",onTranscript:me=>{se.current(me)},onListeningChange:me=>{b(me)}})&&console.log("[Reconstruction] Voice started via voiceMaster")},[h]),X=d.useCallback(()=>{ht.stop(),b(!1),N(null)},[]);d.useEffect(()=>(Q.current=!0,()=>{Q.current=!1,ht.stop(),Zi.clearProtectedLane()}),[]),d.useEffect(()=>{if(a==="ready"){const B=setInterval(()=>{R(K=>!K)},800);return()=>clearInterval(B)}},[a]);const ee=d.useRef(!1);d.useEffect(()=>{if(a==="ready"){ee.current=!1;return}if(a==="playing"&&!h&&!ee.current){ee.current=!0;const B=setTimeout(()=>{V()},500);return()=>clearTimeout(B)}},[a,h,V]);const O=d.useCallback((B,K)=>{h||(f?H(f,B,K,!1):c[B][K]&&xe(B,K,!1))},[f,c,h,H,xe]),re=d.useCallback((B,K)=>{h||(B.dataTransfer.setData("piece",K),B.dataTransfer.effectAllowed="copy",D(K))},[h]),de=d.useCallback(()=>{D(null)},[]),ye=d.useCallback(B=>{B.preventDefault(),B.dataTransfer.dropEffect="copy"},[]),Le=d.useCallback((B,K,me)=>{if(B.preventDefault(),h)return;const ce=B.dataTransfer.getData("piece");ce&&H(ce,K,me,!1),D(null)},[h,H]),ke=d.useCallback((B,K)=>{h||m(K)},[h]),ae=()=>{u(Array(8).fill(null).map(()=>Array(8).fill(null))),m(null),G.current=0,T.current=0},Se=d.useCallback(()=>{const B=B4(c,U);g(B);const K=G.current+T.current,me=K>0?Math.round(G.current/K*100):0;x(me),y(!0),X(),n(B,me,G.current,T.current)},[c,U,X,n]);d.useEffect(()=>{$.current=Se},[Se]);const Te=t==="white"?["a","b","c","d","e","f","g","h"]:["h","g","f","e","d","c","b","a"],De=t==="white"?["8","7","6","5","4","3","2","1"]:["1","2","3","4","5","6","7","8"],Ie=(S==null?void 0:S.type)==="color"?"animate-pulse ring-4 ring-amber-400":"";return a==="ready"?o.jsxs(Ze,{className:"w-full max-w-md mx-auto",children:[o.jsx(xt,{className:"pb-2",children:o.jsxs(yt,{className:"text-lg flex items-center justify-between",children:[o.jsx("span",{children:"Board Reconstruction"}),o.jsx(Y,{variant:"ghost",size:"sm",onClick:s,"data-testid":"button-skip-reconstruction-ready",children:"Skip"})]})}),o.jsxs(it,{className:"flex flex-col items-center justify-center py-12 gap-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Ft,{className:`h-16 w-16 text-blue-500 transition-transform duration-300 ${C?"scale-110":"scale-100"}`}),o.jsx("div",{className:`absolute -top-1 -right-1 h-4 w-4 rounded-full ${C?"bg-green-500":"bg-green-400"} transition-colors duration-300`})]}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Ready to Reconstruct?"}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"Rebuild the position from memory using voice commands"}),o.jsx("p",{className:"text-muted-foreground text-xs",children:'Say pieces like "White Knight F3" or "Black Queen D8"'})]}),o.jsxs(Y,{size:"lg",onClick:()=>{Zi.register("reconstruction"),l("playing")},className:"mt-4","data-testid":"button-start-reconstruction",children:[o.jsx(Ft,{className:"h-5 w-5 mr-2"}),"Start"]})]})]}):o.jsxs(Ze,{className:"w-full max-w-md mx-auto",children:[o.jsx(xt,{className:"pb-2",children:o.jsxs(yt,{className:"text-lg flex items-center justify-between",children:[o.jsx("span",{children:"Reconstruct the Board"}),o.jsxs("div",{className:"flex items-center gap-2",children:[p!==null&&o.jsxs(ct,{variant:p>=80?"default":p>=50?"secondary":"destructive",children:[p,"%"]}),h&&w>0&&o.jsxs(ct,{variant:"outline",className:"text-amber-600 border-amber-400",children:["Voice: ",w,"%"]})]})]})}),o.jsxs(it,{className:"space-y-3",children:[!h&&o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"flex-1",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:S?`Say "White" or "Black" for ${S.pieceType==="K"?"King":S.pieceType==="Q"?"Queen":S.pieceType==="R"?"Rook":S.pieceType==="B"?"Bishop":S.pieceType==="N"?"Knight":"Pawn"} on ${S.square.file}${S.square.rank}`:v?`"${j||"Knight f3"}"`:"Drag pieces or use voice commands"})}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>z(B=>B==="w"?"b":"w"),className:`w-7 h-7 rounded flex items-center justify-center transition-all border-2 ${A==="w"?"bg-white border-stone-400":"bg-stone-800 border-stone-600"}`,title:`Placing ${A==="w"?"White":"Black"} pieces - tap to switch`,"data-testid":"button-sticky-color",children:o.jsx("span",{className:`text-xs font-bold ${A==="w"?"text-stone-800":"text-white"}`,children:A==="w"?"W":"B"})}),o.jsx(Y,{size:"icon",variant:v?"destructive":"outline",onClick:v?X:V,className:v?"animate-pulse":"","data-testid":"button-reconstruction-mic",children:v?o.jsx(Ft,{className:"h-4 w-4"}):o.jsx(er,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-1 justify-center p-2 bg-muted rounded-md",style:{touchAction:"none"},children:[A4.map(B=>o.jsx("div",{draggable:!h,onDragStart:K=>re(K,B),onDragEnd:de,onTouchStart:K=>ke(K,B),onClick:()=>!h&&m(f===B?null:B),className:`w-8 h-8 rounded transition-all cursor-grab active:cursor-grabbing ${f===B?"ring-2 ring-amber-400 bg-amber-100":P===B?"opacity-50":"hover:bg-muted-foreground/20"} ${h?"opacity-50 cursor-not-allowed":""}`,"data-testid":`piece-palette-${B}`,children:o.jsx("img",{src:vf[B],alt:B,className:"w-full h-full pointer-events-none",draggable:!1})},B)),o.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center bg-red-100 hover:bg-red-200 cursor-pointer",onClick:()=>m(null),"data-testid":"piece-palette-eraser",children:o.jsx(bw,{className:"h-4 w-4 text-red-600"})})]}),o.jsx("div",{className:`aspect-square w-full max-w-xs mx-auto rounded ${Ie}`,children:o.jsx("div",{className:"grid grid-cols-8 grid-rows-8 w-full h-full border border-stone-400",style:{touchAction:"none"},children:Array.from({length:64}).map((B,K)=>{const me=Math.floor(K/8),ce=K%8,ue=t==="white"?me:7-me,Fe=t==="white"?ce:7-ce,Re=(me+ce)%2===0,_e=c[ue][Fe],rt=U[ue][Fe],Mt=`${ue}-${Fe}`,et=F.has(Mt);let Wt=Re?"bg-amber-100":"bg-amber-700";const Jt=_e===rt,En=!_e&&rt;return h&&(Jt?_e!==null&&(Wt=Re?"bg-green-200":"bg-green-600"):Wt=Re?"bg-red-200":"bg-red-500"),o.jsxs("div",{onClick:()=>O(ue,Fe),onDragOver:ye,onDrop:Pn=>Le(Pn,ue,Fe),className:`relative flex items-center justify-center cursor-pointer ${Wt} ${!h&&(f||P)?"hover:ring-2 hover:ring-amber-400 hover:ring-inset":""}`,style:{touchAction:"none"},"data-testid":`reconstruction-square-${Te[ce]}${De[me]}`,children:[h&&rt&&!Jt&&o.jsx("img",{src:vf[rt],alt:`actual-${rt}`,className:"absolute w-[85%] h-[85%] opacity-30 pointer-events-none",draggable:!1}),_e&&o.jsx("img",{src:vf[_e],alt:_e,className:`w-[85%] h-[85%] pointer-events-none z-10 transition-transform ${et?"animate-[voicePop_0.2s_ease-out]":""} ${h&&!Jt?"animate-[shake_0.5s_ease-in-out]":""}`,draggable:!1}),h&&En&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center animate-[fadeSlideIn_0.6s_ease-out_forwards]",style:{animationDelay:`${(ue*8+Fe)*30}ms`},children:o.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"})}),ce===0&&o.jsx("span",{className:"absolute top-0.5 left-0.5 text-[8px] font-semibold select-none opacity-70",children:De[me]}),me===7&&o.jsx("span",{className:"absolute bottom-0.5 right-0.5 text-[8px] font-semibold select-none opacity-70",children:Te[ce]})]},K)})})}),o.jsx("div",{className:"flex gap-2",children:h?o.jsxs("div",{className:"flex gap-2 w-full",children:[i&&o.jsxs(Y,{variant:"outline",size:"sm",onClick:i,className:"flex-1","data-testid":"button-reconstruction-view-report",children:[o.jsx(uw,{className:"mr-1 h-4 w-4"}),"View Report"]}),o.jsx(Y,{size:"sm",onClick:r||s,className:"flex-1 bg-amber-400 hover:bg-amber-500 text-stone-900","data-testid":"button-reconstruction-continue",children:"Main Menu"})]}):o.jsxs(o.Fragment,{children:[o.jsxs(Y,{variant:"outline",size:"sm",onClick:ae,className:"flex-1","data-testid":"button-reconstruction-reset",children:[o.jsx(xw,{className:"mr-1 h-4 w-4"}),"Reset"]}),o.jsx(Y,{variant:"outline",size:"sm",onClick:()=>{X(),s()},className:"flex-1","data-testid":"button-reconstruction-skip",children:"Skip"}),o.jsxs(Y,{size:"sm",onClick:Se,className:"flex-1 bg-amber-400 hover:bg-amber-500 text-stone-900","data-testid":"button-reconstruction-submit",children:[o.jsx(C2,{className:"mr-1 h-4 w-4"}),"Check"]})]})}),h&&o.jsx("div",{className:"text-center text-sm",children:p!==null&&p>=80?o.jsxs("p",{className:"text-green-600 flex items-center justify-center gap-1",children:[o.jsx(Al,{className:"h-4 w-4"})," Excellent memory!"]}):p!==null&&p>=50?o.jsx("p",{className:"text-amber-600",children:"Good effort! Keep practicing."}):o.jsxs("p",{className:"text-red-600 flex items-center justify-center gap-1",children:[o.jsx(Do,{className:"h-4 w-4"})," Keep training your visualization!"]})})]})]})}function V4({responseTimes:e,onJumpToMove:t}){if(e.length<3)return o.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"Not enough moves to display stamina graph"});const n=Math.max(...e,1),s=e.length,i=Math.max(100,s*(4+2)),a=(y,p)=>{const g=y/p;return g<.15?"bg-green-500":g<.6?"bg-amber-400":"bg-red-400"},l=Math.floor(s*.15),c=Math.floor(s*.6),u={opening:e.slice(0,l),middlegame:e.slice(l,c),endgame:e.slice(c)},f=u.opening.length>0?u.opening.reduce((y,p)=>y+p,0)/u.opening.length:0,m=u.endgame.length>0?u.endgame.reduce((y,p)=>y+p,0)/u.endgame.length:0,h=f>0?Math.round((m-f)/f*100):0;return o.jsxs("div",{className:"space-y-3","data-testid":"mental-stamina-graph",children:[o.jsx("div",{className:"w-full overflow-x-auto pb-1",children:o.jsxs("div",{className:"h-24 flex items-end bg-muted/30 rounded-md p-2 relative",style:{width:`${i}px`,minWidth:"100%"},children:[e.map((y,p)=>{const g=Math.max(4,y/n*100),w=a(p,s);return o.jsx("div",{className:`${w} rounded-t-sm flex-1 cursor-pointer hover:opacity-80 active:opacity-60`,style:{height:`${g}%`,minWidth:"4px",marginLeft:"1px",marginRight:"1px"},onClick:()=>t==null?void 0:t(p),title:`Move ${p+1}: ${Ni(y)}`,"data-testid":`stamina-bar-${p}`},p)}),o.jsx("div",{className:"absolute bottom-0 w-full h-[1px] bg-muted-foreground/20"})]})}),o.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded"}),o.jsx("span",{children:"Opening"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded"}),o.jsx("span",{children:"Middlegame"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-red-400 rounded"}),o.jsx("span",{children:"Endgame"})]})]}),h!==0&&o.jsx("div",{className:"flex items-center justify-center gap-2 text-sm",children:h>0?o.jsxs(o.Fragment,{children:[o.jsx(Sw,{className:"h-4 w-4 text-red-500"}),o.jsxs("span",{className:"text-red-500",children:[h,"% slower in endgame"]})]}):o.jsxs(o.Fragment,{children:[o.jsx(Nw,{className:"h-4 w-4 text-green-500"}),o.jsxs("span",{className:"text-green-500",children:[Math.abs(h),"% faster in endgame"]})]})})]})}function q4({squareInquiries:e}){const t=["a","b","c","d","e","f","g","h"],n=["8","7","6","5","4","3","2","1"],s={};for(const a of e){const l=a.toLowerCase();s[l]=(s[l]||0)+1}const r=Math.max(...Object.values(s),1),i=a=>{const l=s[a]||0;if(l===0)return"bg-muted/30";const c=l/r*100;return c<25?"bg-amber-200 dark:bg-amber-900/40":c<50?"bg-amber-400 dark:bg-amber-700/60":c<75?"bg-red-400 dark:bg-red-700/70":"bg-red-600 dark:bg-red-600/80"};return e.length===0?o.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"No square inquiries this game"}):o.jsxs("div",{className:"space-y-2","data-testid":"spatial-blur-heatmap",children:[o.jsx("div",{className:"grid grid-cols-8 gap-0.5 aspect-square max-w-[180px] mx-auto",children:n.map(a=>t.map(l=>{const c=`${l}${a}`,u=s[c]||0;return o.jsx("div",{className:`${i(c)} rounded-sm flex items-center justify-center text-[8px] font-mono`,title:`${c.toUpperCase()}: ${u} inquiries`,"data-testid":`heatmap-square-${c}`,children:u>0&&o.jsx("span",{className:"text-foreground/70",children:u})},c)}))}),o.jsxs("p",{className:"text-xs text-muted-foreground text-center","data-testid":"text-total-inquiries",children:[e.length," total inquiries"]})]})}function K4({open:e,gameResult:t,playerColor:n,clarityScore:s,responseTimes:r,squareInquiries:i,reconstructionScore:a,reconstructionVoicePurity:l,reconstructionEnabled:c,onRematch:u,onMainMenu:f,onAnalyze:m}){const h=t==="white_win"&&n==="white"||t==="black_win"&&n==="black",y=t==="draw"?"Game Drawn":h?"Victory":"Defeat",p=t==="draw"?"text-amber-500":h?"text-green-500":"text-red-500",g=r.length>0?r.reduce((w,x)=>w+x,0)/r.length:0;return o.jsx(Yi,{open:e,children:o.jsxs(zo,{className:"max-w-md max-h-[90vh] overflow-y-auto [&>button.absolute]:hidden",onPointerDownOutside:w=>w.preventDefault(),onInteractOutside:w=>w.preventDefault(),onEscapeKeyDown:w=>w.preventDefault(),children:[o.jsxs(Y,{variant:"ghost",size:"icon",className:"absolute right-4 top-4 h-6 w-6 rounded-sm opacity-70 hover:opacity-100",onClick:f,"data-testid":"button-postmortem-close",children:[o.jsx(Do,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]}),o.jsx(Vo,{children:o.jsxs(qo,{className:"flex items-center gap-3",children:[o.jsx(wn,{className:`h-6 w-6 ${p}`}),o.jsx("span",{className:p,children:y})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx(Ze,{className:"bg-muted/30 border-0",children:o.jsxs(it,{className:"p-3 text-center",children:[o.jsx(vl,{className:"h-5 w-5 mx-auto mb-1 text-amber-500"}),o.jsxs("p",{className:"text-2xl font-bold text-amber-500",children:[s,"%"]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Reconstruction Score"})]})}),o.jsx(Ze,{className:"bg-muted/30 border-0",children:o.jsxs(it,{className:"p-3 text-center",children:[o.jsx(Ro,{className:"h-5 w-5 mx-auto mb-1 text-blue-500"}),o.jsx("p",{className:"text-2xl font-bold",children:Ni(g)}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Response"})]})})]}),o.jsx(Xs,{}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(l2,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium",children:"Mental Stamina"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Response time changes throughout the game"}),o.jsx(V4,{responseTimes:r})]}),o.jsx(Xs,{}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(mw,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium",children:"Spatial Blurs"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Squares you needed to inquire about"}),o.jsx(q4,{squareInquiries:i})]}),c&&a!==null&&o.jsxs(o.Fragment,{children:[o.jsx(Xs,{}),o.jsxs("div",{className:"space-y-2","data-testid":"reconstruction-stats",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(k2,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium",children:"Board Reconstruction"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx(Ze,{className:"bg-muted/30 border-0",children:o.jsxs(it,{className:"p-3 text-center",children:[o.jsxs("p",{className:`text-xl font-bold ${a>=80?"text-green-500":a>=50?"text-amber-500":"text-red-500"}`,children:[a,"%"]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Accuracy"})]})}),l!==null&&o.jsx(Ze,{className:"bg-muted/30 border-0",children:o.jsxs(it,{className:"p-3 text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-1 mb-0.5",children:[o.jsx(Ft,{className:"h-3 w-3 text-purple-500"}),o.jsxs("p",{className:`text-xl font-bold ${l>=80?"text-purple-500":l>=50?"text-amber-500":"text-muted-foreground"}`,children:[l,"%"]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Voice Purity"})]})})]})]})]}),o.jsx(Xs,{}),m&&o.jsxs(Y,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:m,"data-testid":"button-postmortem-analyze",children:[o.jsx(yw,{className:"mr-2 h-4 w-4"}),"Analyze Game"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Y,{className:"flex-1 bg-black hover:bg-stone-800 text-white",onClick:u,"data-testid":"button-postmortem-rematch",children:[o.jsx(xw,{className:"mr-2 h-4 w-4"}),"Rematch"]}),o.jsxs(Y,{variant:"outline",className:"flex-1 bg-amber-400 hover:bg-amber-500 text-black border-black",onClick:f,"data-testid":"button-postmortem-menu",children:[o.jsx(b2,{className:"mr-2 h-4 w-4"}),"Menu"]})]})]})]})})}const mx=10;function px(e){return Math.max(-mx,Math.min(mx,e))}class W4{constructor(){this.worker=null,this.isReady=!1,this.isSearching=!1,this.messageHandlers=[],this.initPromise=null,this.requestQueue=Promise.resolve()}async init(){if(!this.isReady)return this.initPromise?this.initPromise:(this.initPromise=new Promise((t,n)=>{try{typeof WebAssembly=="object"&&WebAssembly.validate(Uint8Array.of(0,97,115,109,1,0,0,0))||console.warn("[ClientStockfish] WebAssembly not supported, using slower JS fallback");const r="/stockfish/stockfish-17.1-lite-single-03e3232.js";this.worker=new Worker(r),this.worker.onmessage=l=>{const c=typeof l.data=="string"?l.data:"";for(const u of this.messageHandlers)u(c)},this.worker.onerror=l=>{console.error("[ClientStockfish] Worker error:",l),n(l)},this.sendCommand("uci");let i=!1;const a=l=>{l==="uciok"&&(i=!0,this.sendCommand("setoption name Hash value 16"),console.log("[ClientStockfish] Set Hash table to 16MB for mobile optimization"),this.sendCommand("isready")),l==="readyok"&&i&&(this.removeHandler(a),this.isReady=!0,console.log("[ClientStockfish] Engine ready"),t())};this.addHandler(a),setTimeout(()=>{this.isReady||n(new Error("Stockfish initialization timeout"))},3e4)}catch(s){n(s)}}),this.initPromise)}addHandler(t){this.messageHandlers.push(t)}removeHandler(t){const n=this.messageHandlers.indexOf(t);n>-1&&this.messageHandlers.splice(n,1)}sendCommand(t){this.worker&&this.worker.postMessage(t)}async getBestMove(t,n={}){const s=()=>new Promise(async(i,a)=>{const l=setTimeout(()=>{a(new Error("getBestMove timeout"))},3e4);try{this.isReady||await this.init(),n.skillLevel!==void 0&&this.sendCommand(`setoption name Skill Level value ${n.skillLevel}`),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`);let c="go";n.depth?c+=` depth ${n.depth}`:n.nodes?c+=` nodes ${n.nodes}`:n.moveTime?c+=` movetime ${n.moveTime}`:c+=" depth 15",this.isSearching=!0,this.sendCommand(c);let u,f;const m=h=>{if(h.startsWith("info depth")){const y=h.match(/depth (\d+)/),p=h.match(/score cp (-?\d+)/),g=h.match(/score mate (-?\d+)/);y&&(f=parseInt(y[1])),p&&(u=parseInt(p[1])/100),g&&(u=parseInt(g[1])>0?100:-100)}if(h.startsWith("bestmove")){clearTimeout(l),this.removeHandler(m),this.isSearching=!1;const y=h.match(/bestmove (\S+)/);y?i({bestMove:y[1],evaluation:u,depth:f}):a(new Error("Failed to parse bestmove"))}};this.addHandler(m)}catch(c){clearTimeout(l),this.isSearching=!1,a(c)}}),r=this.requestQueue.then(s,s);return this.requestQueue=r.catch(()=>{}),r}async analyzePosition(t,n=1e6){const s=()=>new Promise(async(i,a)=>{const l=setTimeout(()=>{a(new Error("analyzePosition timeout"))},6e4);try{this.isReady||await this.init(),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`),this.isSearching=!0,this.sendCommand(`go nodes ${n}`);let c=0,u=0,f="",m=[],h=!1,y;const p=g=>{if(g.startsWith("info depth")&&g.includes(" pv ")){const w=g.match(/depth (\d+)/),x=g.match(/score cp (-?\d+)/),v=g.match(/score mate (-?\d+)/),b=g.match(/ pv (.+)/);if(w&&(u=parseInt(w[1])),x&&(c=parseInt(x[1])/100,h=!1,y=void 0),v){const S=parseInt(v[1]);c=S>0?999:-999,h=!0,y=Math.abs(S)}b&&(m=b[1].trim().split(" "))}if(g.startsWith("bestmove")){clearTimeout(l),this.removeHandler(p),this.isSearching=!1;const w=g.match(/bestmove (\S+)/);w?(f=w[1],i({evaluation:px(c),bestMove:f,bestMoveEval:px(c),principalVariation:m,depth:u,isMate:h,mateIn:y})):a(new Error("Failed to parse bestmove"))}};this.addHandler(p)}catch(c){clearTimeout(l),this.isSearching=!1,a(c)}}),r=this.requestQueue.then(s,s);return this.requestQueue=r.catch(()=>{}),r}async getTopMoves(t,n=3,s=1e6,r){const i=r===void 0||r==="w"?1:-1,a=()=>new Promise(async(c,u)=>{const f=setTimeout(()=>{this.sendCommand("setoption name MultiPV value 1"),c([])},3e4);try{this.isReady||await this.init(),this.sendCommand("stop"),this.sendCommand("ucinewgame"),this.sendCommand(`setoption name MultiPV value ${n}`),this.sendCommand(`position fen ${t}`),this.isSearching=!0,this.sendCommand(`go nodes ${s}`);const m=new Map,h=y=>{if(y.startsWith("info depth")&&y.includes(" pv ")){const p=y.match(/multipv (\d+)/),g=y.match(/score cp (-?\d+)/),w=y.match(/score mate (-?\d+)/),x=y.match(/ pv (.+)/),v=p?parseInt(p[1]):1;if(x){const b=x[1].trim().split(" "),S=b[0];let N=0,j=!1,k;if(g&&(N=parseInt(g[1])/100*i),w){const C=parseInt(w[1]);N=(C>0?999:-999)*i,j=!0,k=Math.abs(C)}m.set(v,{move:S,evaluation:N,isMate:j,mateIn:k,principalVariation:b})}}if(y.startsWith("bestmove")){clearTimeout(f),this.removeHandler(h),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1");const p=[];for(let g=1;g<=n;g++){const w=m.get(g);w&&p.push(w)}c(p)}};this.addHandler(h)}catch(m){clearTimeout(f),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1"),u(m)}}),l=this.requestQueue.then(a,a);return this.requestQueue=l.catch(()=>{}),l}async getBotMove(t,n){const s=u=>u<=400?0:u<=600?2:u<=800?4:u<=1e3?6:u<=1200?8:u<=1400?11:u<=1600?14:u<=1800?17:u<=2e3?18:u<=2200?19:20,r=u=>u<=600?5:u<=1e3?4:u<=1400?3:u<=1800?2:1,i=u=>u<=400?500:u<=600?1e3:u<=800?2e3:u<=1e3?5e3:u<=1200?1e4:u<=1400?2e4:u<=1600?5e4:u<=1800?1e5:u<=2e3?25e4:u<=2200?5e5:u<=2400?1e6:15e5,a=u=>u<=400||u<=600?1:u<=800?2:u<=1e3?3:u<=1200?4:u<=1400?5:u<=1600?6:0,l=()=>new Promise(async(u,f)=>{const m=setTimeout(()=>{f(new Error("getBotMove timeout"))},3e4);try{this.isReady||await this.init();const h=s(n),y=r(n),p=i(n),g=a(n);this.sendCommand(`setoption name Skill Level value ${h}`),this.sendCommand("setoption name UCI_LimitStrength value true"),this.sendCommand(`setoption name UCI_Elo value ${Math.min(Math.max(n,400),3200)}`),this.sendCommand(`setoption name MultiPV value ${y}`),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`),this.isSearching=!0,g>0?this.sendCommand(`go depth ${g} nodes ${p}`):this.sendCommand(`go nodes ${p}`);const w=new Map,x=v=>{var b;if(v.startsWith("info depth")&&v.includes(" pv ")){const S=v.match(/multipv (\d+)/),N=v.match(/ pv (\S+)/),j=v.match(/score cp (-?\d+)/),k=S?parseInt(S[1]):1,C=N?N[1]:null,R=j?parseInt(j[1])/100:void 0;C&&w.set(k,{move:C,eval:R})}if(v.startsWith("bestmove")){clearTimeout(m),this.removeHandler(x),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1"),this.sendCommand("setoption name UCI_LimitStrength value false"),this.sendCommand("setoption name Skill Level value 20");let S;const N=Array.from(w.values()).slice(0,y);if(N.length===0){const j=v.match(/bestmove (\S+)/);S=j?j[1]:void 0}else if(N.length===1)S=N[0].move;else{const j=Math.random()*100;n<=600?j<40?S=N[0].move:j<70&&N[1]?S=N[1].move:j<90&&N[2]?S=N[2].move:S=N[Math.min(Math.floor(j/25),N.length-1)].move:n<=1e3?j<55?S=N[0].move:j<80&&N[1]?S=N[1].move:j<95&&N[2]?S=N[2].move:S=N[Math.min(Math.floor(j/25),N.length-1)].move:n<=1400?j<70?S=N[0].move:j<90&&N[1]?S=N[1].move:N[2]?S=N[2].move:S=N[0].move:n<=1800?j<85?S=N[0].move:j<97&&N[1]?S=N[1].move:N[2]?S=N[2].move:S=N[0].move:j<95?S=N[0].move:N[1]?S=N[1].move:S=N[0].move}S?u({bestMove:S,evaluation:(b=w.get(1))==null?void 0:b.eval,isFreeCapture:!1}):f(new Error("Failed to get bot move"))}};this.addHandler(x)}catch(h){clearTimeout(m),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1"),this.sendCommand("setoption name UCI_LimitStrength value false"),this.sendCommand("setoption name Skill Level value 20"),f(h)}}),c=this.requestQueue.then(l,l);return this.requestQueue=c.catch(()=>{}),c}async getDepthLimitedMove(t,n){const s=()=>new Promise(async(i,a)=>{const l=setTimeout(()=>{a(new Error("getDepthLimitedMove timeout"))},3e4);try{this.isReady||await this.init(),this.sendCommand("setoption name UCI_LimitStrength value false"),this.sendCommand("setoption name Skill Level value 20"),this.sendCommand("setoption name MultiPV value 1"),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`),this.isSearching=!0,this.sendCommand(`go depth ${n}`);let c,u;const f=m=>{if(m.startsWith("info depth")&&m.includes(" pv ")){const h=m.match(/ pv (\S+)/),y=m.match(/score cp (-?\d+)/),p=m.match(/score mate (-?\d+)/);h&&(c=h[1]),y?u=parseInt(y[1])/100:p&&(u=parseInt(p[1])>0?100:-100)}if(m.startsWith("bestmove")){clearTimeout(l),this.removeHandler(f),this.isSearching=!1;const h=m.match(/bestmove (\S+)/);h&&(c=h[1]),c?i({bestMove:c,evaluation:u,isFreeCapture:!1}):a(new Error("Failed to get depth-limited move"))}};this.addHandler(f)}catch(c){clearTimeout(l),this.isSearching=!1,a(c)}}),r=this.requestQueue.then(s,s);return this.requestQueue=r.catch(()=>{}),r}stopAnalysis(){this.worker&&this.isSearching&&(this.sendCommand("stop"),this.isSearching=!1,console.debug("[ClientStockfish] Analysis halted safely."))}shutdown(){this.worker&&(this.sendCommand("quit"),this.worker.terminate(),this.worker=null,this.isReady=!1,this.initPromise=null)}isInitialized(){return this.isReady}}const Bi=new W4;function U4({evaluation:e,isLoading:t,isMate:n,mateIn:s,playerColor:r}){const i=e!==null?r==="black"?-e:e:null,l=e!==null?(y=>n?y>0?100:0:50+Math.max(-10,Math.min(10,y))/10*50)(e):50,c=y=>y===null?"...":n&&s!==void 0?y>0?`M${s}`:`-M${s}`:`${y>=0?"+":""}${y.toFixed(1)}`,u=r==="black",f=u?"bg-white":"bg-stone-900",m=u?"bg-stone-900":"bg-white",h=u?l:100-l;return o.jsxs("div",{className:"flex flex-col items-center w-full h-full","data-testid":"evaluation-bar",children:[o.jsx("div",{className:"text-xs font-mono font-bold mb-1 flex-shrink-0","data-testid":"evaluation-value",children:c(i)}),o.jsxs("div",{className:`relative w-full rounded overflow-hidden border border-border ${m} flex-1 min-h-0`,children:[o.jsx("div",{className:`absolute top-0 left-0 right-0 ${f} transition-all duration-300`,style:{height:`${h}%`}}),o.jsx("div",{className:"absolute left-0 right-0 h-[2px] bg-amber-500",style:{top:"50%",transform:"translateY(-50%)"}}),t&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:o.jsx(pw,{className:"h-3 w-3 animate-spin text-white"})})]})]})}function H4({position:e,flipped:t,lastMove:n,bestMoveSquares:s}){const r=new Dn(e),i=["a","b","c","d","e","f","g","h"],a=["8","7","6","5","4","3","2","1"],l=t?[...i].reverse():i,c=t?[...a].reverse():a,u={K:"",Q:"",R:"",B:"",N:"",P:"",k:"",q:"",r:"",b:"",n:"",p:""};return o.jsx("div",{className:"aspect-square w-full","data-testid":"analysis-board",children:o.jsx("div",{className:"grid grid-cols-8 grid-rows-8 w-full h-full border border-stone-400",children:c.map(f=>l.map(m=>{const h=`${m}${f}`,y=r.get(h),p=(i.indexOf(m)+a.indexOf(f))%2===0,g=n&&(n.from===h||n.to===h),w=s&&(s.from===h||s.to===h);return o.jsx("div",{className:`aspect-square flex items-center justify-center text-2xl sm:text-3xl
                  ${p?"bg-amber-100 dark:bg-amber-200":"bg-amber-600 dark:bg-amber-700"}
                  ${g?"ring-2 ring-inset ring-amber-400":""}
                  ${w?"ring-2 ring-inset ring-emerald-500":""}
                `,"data-testid":`analysis-square-${h}`,children:y&&o.jsx("span",{className:y.color==="w"?"text-white drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)]":"text-black",children:u[y.color==="w"?y.type.toUpperCase():y.type]})},h)}))})})}function gx({moveHistory:e,playerColor:t,onClose:n,gameResult:s,botElo:r}){var ee;const{toast:i}=Rl(),[a,l]=d.useState(0),[c,u]=d.useState(!0),[f,m]=d.useState(!1),[h,y]=d.useState(!0),[p,g]=d.useState(0),[w,x]=d.useState(new Map),v=d.useRef(!1);d.useEffect(()=>{const O=document.getElementById(`move-${a}`);O&&O.scrollIntoView({behavior:"smooth",block:"nearest"})},[a]);const b=d.useMemo(()=>{const O=new Dn,re=s==="white_win"?"1-0":s==="black_win"?"0-1":s==="draw"?"1/2-1/2":"*",de=new Date,ye=`${de.getFullYear()}.${String(de.getMonth()+1).padStart(2,"0")}.${String(de.getDate()).padStart(2,"0")}`;return O.header("Event","Blindfold Chess Challenge","Site","Mobile App","Date",ye,"Round","?","White",t==="white"?"User":`Stockfish (Elo ${r||"?"})`,"Black",t==="black"?"User":`Stockfish (Elo ${r||"?"})`,"Result",re),e.forEach(Le=>{try{O.move(Le)}catch{console.warn("[PGN] Could not add move:",Le)}}),O.pgn()},[e,t,s,r]),S=async()=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(b);else{const O=document.createElement("textarea");O.value=b,O.style.position="fixed",O.style.left="-9999px",document.body.appendChild(O),O.focus(),O.select(),document.execCommand("copy"),document.body.removeChild(O)}m(!0),i({title:"PGN Copied",description:"Game notation copied to clipboard",duration:2e3}),setTimeout(()=>m(!1),2e3)}catch(O){console.error("[PGN] Copy failed:",O),i({title:"Copy Failed",description:"Could not copy to clipboard",variant:"destructive",duration:2e3})}},N=()=>{const O=new Date,de=`blindfold-game-${`${O.getFullYear()}${String(O.getMonth()+1).padStart(2,"0")}${String(O.getDate()).padStart(2,"0")}-${String(O.getHours()).padStart(2,"0")}${String(O.getMinutes()).padStart(2,"0")}`}.pgn.txt`,ye=document.createElement("a"),Le=new Blob([b],{type:"text/plain"});ye.href=URL.createObjectURL(Le),ye.download=de,document.body.appendChild(ye),ye.click(),document.body.removeChild(ye),URL.revokeObjectURL(ye.href),i({title:"PGN Downloaded",description:de,duration:2e3})},j=d.useMemo(()=>{const O=[],re=new Dn;O.push({fen:re.fen(),lastMove:null});for(let de=0;de<e.length;de++)try{const ye=re.move(e[de]);ye?O.push({fen:re.fen(),lastMove:{from:ye.from,to:ye.to}}):console.warn(`[Analysis] Move returned null at index ${de}: ${e[de]}`)}catch(ye){console.warn(`[Analysis] Skipping invalid move at index ${de}: ${e[de]}`,ye)}return console.log(`[Analysis] Built ${O.length} positions from ${e.length} moves`),O},[e]);d.useEffect(()=>((async()=>{y(!0),g(0),v.current=!1;const re=new Map,de=j.length;for(let ye=0;ye<de&&!v.current;ye++){const{fen:Le}=j[ye];try{const ke=await Bi.analyzePosition(Le,5e5);if(v.current)break;const Se=Le.split(" ")[1]==="b",Te=Se?-ke.evaluation:ke.evaluation,De=ke.mateIn!==void 0&&Se?-ke.mateIn:ke.mateIn;re.set(ye,{eval:Te,isMate:ke.isMate,mateIn:De!==void 0?Math.abs(De):void 0,bestMove:ke.bestMove})}catch(ke){if(v.current)break;console.error(`[Analysis] Error evaluating position ${ye}:`,ke)}v.current||(g(Math.round((ye+1)/de*100)),x(new Map(re))),await new Promise(ke=>setTimeout(ke,10))}v.current||y(!1)})(),()=>{v.current=!0}),[j]);const k=j[a]||j[0],C=k.fen,R=k.lastMove,P=w.get(a),D=(P==null?void 0:P.eval)??null,A=(P==null?void 0:P.isMate)??!1,z=P==null?void 0:P.mateIn,_=a>0?a-1:0,F=w.get(_),q=((ee=j[_])==null?void 0:ee.fen)||C,G=a>0?(F==null?void 0:F.bestMove)??null:(P==null?void 0:P.bestMove)??null,T=()=>l(0),$=()=>l(Math.max(0,a-1)),Q=()=>l(Math.min(j.length-1,a+1)),U=()=>l(j.length-1),ve=O=>l(Math.min(O,j.length-1)),xe=(()=>{const O=[];for(let re=0;re<e.length;re+=2)O.push({moveNumber:Math.floor(re/2)+1,white:e[re],black:e[re+1],whiteIndex:re+1,blackIndex:e[re+1]?re+2:void 0});return O})(),ie=O=>!O||O.length<4?null:{from:O.slice(0,2),to:O.slice(2,4)},se=O=>{if(!O)return null;try{const re=a>0?q:C,ye=new Dn(re).move({from:O.slice(0,2),to:O.slice(2,4),promotion:O.length>4?O[4]:void 0});return ye?ye.san:O}catch{return O}},V=c?ie(G):null,X=se(G);return h&&p<100?o.jsxs("div",{className:"fixed inset-0 z-50 bg-background flex flex-col","data-testid":"analysis-view",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Game Analysis"}),o.jsx(Y,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-analysis-close",children:o.jsx(Do,{className:"h-5 w-5"})})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 gap-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(pw,{className:"h-6 w-6 animate-spin text-amber-500"}),o.jsx("span",{className:"text-lg font-medium",children:"Analyzing game..."})]}),o.jsxs("div",{className:"w-full max-w-xs space-y-2",children:[o.jsx(Jr,{value:p,className:"h-3"}),o.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:[p,"% complete (",Math.round(p/100*j.length)," / ",j.length," positions)"]})]}),o.jsx("p",{className:"text-sm text-muted-foreground text-center max-w-sm",children:"This will take a few seconds. Once complete, you can navigate through moves instantly."})]})]}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-background flex flex-col","data-testid":"analysis-view",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Game Analysis"}),o.jsx(Y,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-analysis-close",children:o.jsx(Do,{className:"h-5 w-5"})})]}),o.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[o.jsxs("div",{className:"flex flex-col gap-3 items-center",children:[o.jsxs("div",{className:"grid grid-cols-[24px_1fr] gap-2 w-full max-w-[352px]",children:[o.jsx(U4,{evaluation:D,isLoading:!1,isMate:A,mateIn:z,playerColor:t}),o.jsx(H4,{position:C,flipped:t==="black",lastMove:R,bestMoveSquares:V})]}),o.jsxs("div",{className:"flex justify-center gap-1",children:[o.jsx(Y,{variant:"outline",size:"icon",onClick:T,disabled:a===0,"data-testid":"button-analysis-start",children:o.jsx(f2,{className:"h-4 w-4"})}),o.jsx(Y,{variant:"outline",size:"icon",onClick:$,disabled:a===0,"data-testid":"button-analysis-back",children:o.jsx(Xm,{className:"h-4 w-4"})}),o.jsx(Y,{variant:"outline",size:"icon",onClick:Q,disabled:a===j.length-1,"data-testid":"button-analysis-forward",children:o.jsx(Zu,{className:"h-4 w-4"})}),o.jsx(Y,{variant:"outline",size:"icon",onClick:U,disabled:a===j.length-1,"data-testid":"button-analysis-end",children:o.jsx(h2,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm","data-testid":"best-move-display",children:[o.jsx(Y,{variant:c?"default":"outline",size:"sm",onClick:()=>u(!c),className:"h-7 px-2","data-testid":"button-toggle-best-move",children:c?"Hide Best":"Show Best"}),c&&X&&o.jsxs("span",{className:"font-mono bg-emerald-500/20 text-emerald-600 dark:text-emerald-400 px-2 py-1 rounded","data-testid":"text-best-move",children:[a>0?"Engine:":"Best:"," ",X]})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-4 mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Move List"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs(Y,{variant:"outline",size:"sm",onClick:S,className:"h-7 px-2","data-testid":"button-copy-pgn",children:[f?o.jsx(Al,{className:"h-3 w-3 mr-1"}):o.jsx(fw,{className:"h-3 w-3 mr-1"}),f?"Copied":"Copy"]}),o.jsxs(Y,{variant:"outline",size:"sm",onClick:N,className:"h-7 px-2","data-testid":"button-download-pgn",children:[o.jsx(v2,{className:"h-3 w-3 mr-1"}),"Download"]})]})]}),o.jsx(Ze,{className:"p-3 max-h-40 overflow-y-auto scroll-smooth","data-testid":"analysis-move-list",children:o.jsx("div",{className:"grid grid-cols-[auto_1fr_1fr] gap-x-3 gap-y-1 text-sm font-mono",children:xe.map(O=>o.jsxs(d.Fragment,{children:[o.jsxs("span",{className:"text-muted-foreground",children:[O.moveNumber,"."]}),o.jsx("button",{id:`move-${O.whiteIndex}`,onClick:()=>ve(O.whiteIndex),className:`text-left px-1 rounded hover:bg-muted transition-colors ${a===O.whiteIndex?"bg-amber-400 text-black font-bold":""}`,"data-testid":`move-white-${O.moveNumber}`,children:O.white}),O.black?o.jsx("button",{id:`move-${O.blackIndex}`,onClick:()=>ve(O.blackIndex),className:`text-left px-1 rounded hover:bg-muted transition-colors ${a===O.blackIndex?"bg-amber-400 text-black font-bold":""}`,"data-testid":`move-black-${O.moveNumber}`,children:O.black}):o.jsx("span",{})]},O.moveNumber))})})]})]})}const xf=lo("KeepAwake",{web:()=>da(()=>import("./web-DTu_fKuL.js"),[]).then(e=>new e.KeepAwakeWeb)});var Qe;(function(e){e.Heavy="HEAVY",e.Medium="MEDIUM",e.Light="LIGHT"})(Qe||(Qe={}));var sa;(function(e){e.Success="SUCCESS",e.Warning="WARNING",e.Error="ERROR"})(sa||(sa={}));const He=lo("Haptics",{web:()=>da(()=>import("./web-CLEBfk7z.js"),[]).then(e=>new e.HapticsWeb)}),CN=Object.freeze(Object.defineProperty({__proto__:null,Haptics:He,get ImpactStyle(){return Qe},get NotificationType(){return sa}},Symbol.toStringTag,{value:"Module"}));new BigUint64Array(768);new BigUint64Array(4);new BigUint64Array(8);const hr=[];function G4(){if(hr.length>0)return;let e=new Array(781);e[0]=1n;for(let t=1;t<781;t++)e[t]=e[t-1]*6364136223846793005n+1442695040888963407n&0xFFFFFFFFFFFFFFFFn;for(let t=0;t<781;t++)hr[t]=e[t]}const Q4={p:0,P:1,n:2,N:3,b:4,B:5,r:6,R:7,q:8,Q:9,k:10,K:11};function Y4(e,t,n){const s=[],r=e.split("/");for(let l=0;l<8;l++){const c=r[l],u=[];for(const f of c)if(f>="1"&&f<="8")for(let m=0;m<parseInt(f);m++)u.push("");else u.push(f);s.push(u)}const i=t==="w"?"P":"p",a=t==="w"?3:4;return n>0&&s[a][n-1]===i||n<7&&s[a][n+1]===i}function X4(e){G4();const t=e.split(" "),n=t[0],s=t[1]||"w",r=t[2]||"-",i=t[3]||"-";let a=0n,l=56;for(const c of n)if(c==="/")l-=16;else if(c>="1"&&c<="8")l+=parseInt(c);else{const u=Q4[c];if(u!==void 0){const f=64*u+l;f<768&&(a^=hr[f])}l++}if(r.includes("K")&&(a^=hr[768]),r.includes("Q")&&(a^=hr[769]),r.includes("k")&&(a^=hr[770]),r.includes("q")&&(a^=hr[771]),i!=="-"){const c=i.charCodeAt(0)-97;c>=0&&c<8&&Y4(n,s,c)&&(a^=hr[772+c])}return s==="w"&&(a^=hr[780]),a}function Z4(e){const t=e&7,n=e>>3&7,s=e>>6&7,r=e>>9&7,i=e>>12&7,a="abcdefgh",l=a[s]+(r+1),c=a[t]+(n+1);let u;return i>0&&(u=["","n","b","r","q"][i]),{from:l,to:c,promotion:u}}let yf=null,Es=[],wf=!1,wc=null;async function J4(){if(!wf)return wc||(wc=(async()=>{try{const e=await fetch("/openings.bin");if(!e.ok)throw new Error(`Failed to load opening book: ${e.status}`);yf=await e.arrayBuffer();const t=new DataView(yf),n=yf.byteLength/16;Es=[];for(let s=0;s<n;s++){const r=s*16,i=t.getUint32(r,!1),a=t.getUint32(r+4,!1),l=BigInt(i)<<32n|BigInt(a),c=t.getUint16(r+8,!1),u=t.getUint16(r+10,!1);Es.push({key:l,move:c,weight:u})}Es.sort((s,r)=>s.key<r.key?-1:s.key>r.key?1:0),wf=!0,console.log(`[OpeningBook] Loaded ${n} entries from Polyglot book`)}catch(e){console.error("[OpeningBook] Failed to load opening book:",e),Es=[],wf=!0}})(),wc)}function eA(e){const t=[];let n=0,s=Es.length-1,r=-1;for(;n<=s;){const i=Math.floor((n+s)/2);Es[i].key===e?(r=i,s=i-1):Es[i].key<e?n=i+1:s=i-1}if(r===-1)return t;for(let i=r;i<Es.length&&Es[i].key===e;i++)t.push({move:Es[i].move,weight:Es[i].weight});return t}async function tA(e){await J4();const t=X4(e),s=eA(t).map(r=>{const i=Z4(r.move);return{from:i.from,to:i.to,promotion:i.promotion,weight:r.weight}});return s.sort((r,i)=>i.weight-r.weight),{moves:s}}function nA(e){return e<30}function sA(e,t){const n=e.split(" ")[0];let s=0;if(t==="white")for(const r of n)r>="A"&&r<="Z"&&s++;else for(const r of n)r>="a"&&r<="z"&&s++;return s}function rA(e,t){if(!e||!e.captured)return!1;try{const s=new Dn(t).moves({verbose:!0}),r=e.to;return s.some(i=>i.to===r&&i.captured)}catch{return!1}}function oA(e,t){try{const n=new Dn(e),s=t.slice(0,2),r=t.slice(2,4),i=n.move({from:s,to:r,promotion:t.length>4?t[4]:void 0});return!i||!i.captured?!1:!n.moves({verbose:!0}).some(l=>l.to===r&&l.captured)}catch{return!1}}function iA(e,t,n,s,r){let i=500+Math.random()*1e3;return rA(r,n)?Math.min(i,800):(e<=10&&(i*=.7),sA(n,s)>=10&&e>10&&e<30&&(i*=1.3),t<60?i*=.5:t<180&&(i*=.7),Math.max(300,Math.min(3e3,i)))}function aA(e){const t=e.split(" ")[0];let n=0;for(const s of t)/[pnbrqkPNBRQK]/.test(s)&&n++;return n}function lA(e,t,n,s="blitz"){if(n<30)return 500;if(n<60)return 1e3;const i=s==="classical"?2:s==="rapid"?1.5:1,a=(c,u)=>(Math.random()*(u-c)+c)*1e3;let l;return e<=6?l=a(1,2):e<=10?l=a(2,3):e<=15?l=a(3,8):e<=20||t>=26?l=a(4,8):t>=20?l=a(4,7):t>=14?l=a(3,6):t>=9?l=a(2,4):l=a(1,2),l*i}function cA(e){try{const n=new Dn(e).moves({verbose:!0});if(n.length===0)return null;const s=n[Math.floor(Math.random()*n.length)];return s.from+s.to+(s.promotion||"")}catch{return null}}async function uA(e,t,n,s){try{const r=Nu(t);if(r.randomPercent>0&&Math.random()*100<r.randomPercent){const l=cA(e);if(l)return console.log(`[BotEngine] Elo ${t}: Playing random move (${r.randomPercent}% chance)`),{move:l,isBookMove:!1}}if(nA((n==null?void 0:n.length)||0)){const l=await tA(e);if(l.moves.length>0){const c=l.moves,u=c.reduce((h,y)=>h+y.weight,0);let f=Math.random()*u;for(const h of c)if(f-=h.weight,f<=0)return{move:h.from+h.to+(h.promotion||""),isBookMove:!0};const m=c[0];return{move:m.from+m.to+(m.promotion||""),isBookMove:!0}}}let i;r.depth>0?(i=await Bi.getBestMove(e,{depth:r.depth,skillLevel:r.skillLevel}),console.log(`[BotEngine] Elo ${t}: Depth ${r.depth}, Skill ${r.skillLevel}`)):(i=await Bi.getBestMove(e,{nodes:r.nodes||5e5,skillLevel:r.skillLevel}),console.log(`[BotEngine] Elo ${t}: Unleashed nodes ${r.nodes}, Skill ${r.skillLevel}`));const a=oA(e,i.bestMove);return{move:i.bestMove,evaluation:i.evaluation,isFreeCapture:a}}catch(r){return console.error("[BotEngine] Error getting bot move:",r),null}}const bf="blindfold_chess";let La=null,$n=null,Wo=!1,Hh=!1,bc=null;async function ga(){return Hh?!0:bc||(bc=dA(),bc)}async function dA(){try{if(Wo=jn.isNativePlatform(),!Wo)return console.log("[GameHistory] Web platform - using localStorage fallback"),!0;La=new vb(xb);const e=await La.checkConnectionsConsistency(),t=(await La.isConnection(bf,!1)).result;return e.result&&t?$n=await La.retrieveConnection(bf,!1):$n=await La.createConnection(bf,!1,"no-encryption",1,!1),await $n.open(),await $n.execute(`
      CREATE TABLE IF NOT EXISTS games (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        date TEXT NOT NULL,
        result TEXT NOT NULL,
        playerColor TEXT NOT NULL,
        botName TEXT NOT NULL,
        botElo INTEGER NOT NULL,
        moveCount INTEGER NOT NULL,
        pgn TEXT NOT NULL,
        clarityScore REAL NOT NULL,
        isFavorite INTEGER DEFAULT 0,
        timeControl TEXT NOT NULL
      );
    `),console.log("[GameHistory] Database initialized successfully"),Hh=!0,!0}catch(e){return console.error("[GameHistory] Failed to initialize database:",e),Hh=!0,!1}}function Bl(){try{const e=localStorage.getItem("blindfold_game_history");return e?JSON.parse(e):[]}catch{return[]}}function zp(e){localStorage.setItem("blindfold_game_history",JSON.stringify(e))}async function vx(e){var t,n;await ga();try{if(!Wo){const i=Bl(),a=i.length>0?Math.max(...i.map(c=>c.id))+1:1,l={...e,id:a};return i.unshift(l),zp(i),console.log("[GameHistory] Game saved to localStorage:",a),a}if(!$n)return console.error("[GameHistory] Database not initialized"),null;const r=await $n.run(`
      INSERT INTO games (date, result, playerColor, botName, botElo, moveCount, pgn, clarityScore, isFavorite, timeControl)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
    `,[e.date,e.result,e.playerColor,e.botName,e.botElo,e.moveCount,e.pgn,e.clarityScore,e.isFavorite?1:0,e.timeControl]);return console.log("[GameHistory] Game saved:",(t=r.changes)==null?void 0:t.lastId),((n=r.changes)==null?void 0:n.lastId)??null}catch(s){return console.error("[GameHistory] Failed to save game:",s),null}}async function fA(){await ga();try{if(!Wo)return Bl();if(!$n)return console.error("[GameHistory] Database not initialized"),[];const e=await $n.query("SELECT * FROM games ORDER BY date DESC;");return e.values?e.values.map(t=>({id:t.id,date:t.date,result:t.result,playerColor:t.playerColor,botName:t.botName,botElo:t.botElo,moveCount:t.moveCount,pgn:t.pgn,clarityScore:t.clarityScore,isFavorite:t.isFavorite===1,timeControl:t.timeControl})):[]}catch(e){return console.error("[GameHistory] Failed to get games:",e),[]}}async function hA(){await ga();try{if(!Wo)return Bl().filter(t=>t.isFavorite);if(!$n)return console.error("[GameHistory] Database not initialized"),[];const e=await $n.query("SELECT * FROM games WHERE isFavorite = 1 ORDER BY date DESC;");return e.values?e.values.map(t=>({id:t.id,date:t.date,result:t.result,playerColor:t.playerColor,botName:t.botName,botElo:t.botElo,moveCount:t.moveCount,pgn:t.pgn,clarityScore:t.clarityScore,isFavorite:t.isFavorite===1,timeControl:t.timeControl})):[]}catch(e){return console.error("[GameHistory] Failed to get favorite games:",e),[]}}async function EN(e){await ga();try{if(!Wo){const s=Bl(),r=s.find(i=>i.id===e);return r?(r.isFavorite=!r.isFavorite,zp(s),r.isFavorite):!1}if(!$n)return console.error("[GameHistory] Database not initialized"),!1;const t=await $n.query("SELECT isFavorite FROM games WHERE id = ?;",[e]);if(!t.values||t.values.length===0)return!1;const n=t.values[0].isFavorite===1?0:1;return await $n.run("UPDATE games SET isFavorite = ? WHERE id = ?;",[n,e]),console.log("[GameHistory] Toggled favorite for game:",e),n===1}catch(t){return console.error("[GameHistory] Failed to toggle favorite:",t),!1}}async function mA(e){await ga();try{if(!Wo){const n=Bl().filter(s=>s.id!==e);return zp(n),console.log("[GameHistory] Game deleted from localStorage:",e),!0}return $n?(await $n.run("DELETE FROM games WHERE id = ?;",[e]),console.log("[GameHistory] Game deleted:",e),!0):(console.error("[GameHistory] Database not initialized"),!1)}catch(t){return console.error("[GameHistory] Failed to delete game:",t),!1}}function pA({game:e,onView:t,onToggleFavorite:n,onDelete:s}){const r=e.result==="win"?o.jsx(wn,{className:"h-5 w-5 text-amber-500"}):e.result==="loss"?o.jsx(Ll,{className:"h-5 w-5 text-stone-400"}):o.jsx(gw,{className:"h-5 w-5 text-stone-500"}),i=e.result==="win"?"Victory":e.result==="loss"?"Defeat":"Draw",a=e.result==="win"?"text-green-600 dark:text-green-400":e.result==="loss"?"text-red-600 dark:text-red-400":"text-muted-foreground",l=new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),c=new Date(e.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),u=async m=>{m.stopPropagation(),jn.isNativePlatform()&&await He.impact({style:Qe.Light}),n()},f=m=>{m.stopPropagation(),s()};return o.jsx(Ze,{className:"cursor-pointer hover-elevate active-elevate-2 transition-all",onClick:t,"data-testid":`card-game-${e.id}`,children:o.jsx(it,{className:"p-3",children:o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[o.jsx("div",{className:"flex-shrink-0",children:r}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`font-semibold ${a}`,children:i}),o.jsx("span",{className:"text-muted-foreground",children:"vs"}),o.jsx("span",{className:"font-medium truncate",children:e.botName}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",e.botElo,")"]})]}),o.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mt-1",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(cw,{className:"h-3 w-3"}),l]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Ro,{className:"h-3 w-3"}),c]}),o.jsxs("span",{children:[e.moveCount," moves"]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:u,"data-testid":`button-favorite-${e.id}`,children:o.jsx(ww,{className:`h-5 w-5 ${e.isFavorite?"fill-amber-400 text-amber-400":"text-muted-foreground"}`})}),o.jsx(Y,{variant:"ghost",size:"icon",onClick:f,"data-testid":`button-delete-${e.id}`,children:o.jsx(bw,{className:"h-5 w-5 text-muted-foreground hover:text-destructive"})})]})]})})})}function gA({onBack:e,onViewGame:t}){const[n,s]=d.useState([]),[r,i]=d.useState([]),[a,l]=d.useState(!0),[c,u]=d.useState(null),[f,m]=d.useState("all"),h=async()=>{l(!0);const[w,x]=await Promise.all([fA(),hA()]);s(w.filter(v=>v.moveCount>0)),i(x.filter(v=>v.moveCount>0)),l(!1)};d.useEffect(()=>{h()},[]);const y=async w=>{const x=await EN(w.id);s(v=>v.map(b=>b.id===w.id?{...b,isFavorite:x}:b)),i(x?v=>[{...w,isFavorite:!0},...v.filter(b=>b.id!==w.id)]:v=>v.filter(b=>b.id!==w.id))},p=async()=>{if(!c)return;await mA(c.id)&&(s(x=>x.filter(v=>v.id!==c.id)),i(x=>x.filter(v=>v.id!==c.id))),u(null)},g=f==="favorites"?r:n;return o.jsxs("div",{className:"min-h-screen bg-background flex flex-col","data-testid":"game-history-page",children:[o.jsxs("header",{className:"flex items-center gap-2 p-3 border-b border-border",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-history-back",children:o.jsx(Xm,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-lg font-semibold",children:"Game History"})]}),o.jsxs(ha,{value:f,onValueChange:m,className:"flex-1 flex flex-col",children:[o.jsx("div",{className:"px-3 pt-3",children:o.jsxs(Xo,{className:"grid w-full grid-cols-2",children:[o.jsxs(In,{value:"all","data-testid":"tab-all-games",children:["All Games (",n.length,")"]}),o.jsxs(In,{value:"favorites","data-testid":"tab-favorites",children:["Favorites (",r.length,")"]})]})}),o.jsx(ki,{value:f,className:"flex-1 mt-0 px-3 pb-3",children:o.jsx(Fp,{className:"h-[calc(100vh-140px)]",children:a?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"animate-pulse text-muted-foreground",children:"Loading games..."})}):g.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[o.jsx("div",{className:"text-muted-foreground mb-2",children:f==="favorites"?"No favorite games yet":"No games played yet"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:f==="favorites"?"Star a game to add it to your favorites":"Complete a game to see it here"})]}):o.jsx("div",{className:"space-y-2 py-2",children:g.map(w=>o.jsx(pA,{game:w,onView:()=>t(w),onToggleFavorite:()=>y(w),onDelete:()=>u(w)},w.id))})})})]}),o.jsx(sr,{open:c!==null,onOpenChange:()=>u(null),children:o.jsxs(Ls,{children:[o.jsxs(Is,{children:[o.jsx(Os,{children:"Delete this game from history?"}),o.jsx(Ds,{children:"This action cannot be undone. The game record will be permanently removed."})]}),o.jsxs($s,{children:[o.jsx(Fs,{"data-testid":"button-delete-cancel",children:"Cancel"}),o.jsx(Bs,{onClick:p,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90","data-testid":"button-delete-confirm",children:"Delete"})]})]})})]})}async function vA(e,t){const n=t||`blindfold-chess-${Date.now()}.pgn`;if(typeof navigator<"u"&&navigator.share)try{const s=new Blob([e],{type:"application/vnd.chess-pgn"}),r=new File([s],n,{type:"application/vnd.chess-pgn"});return navigator.canShare&&navigator.canShare({files:[r]})?(await navigator.share({files:[r],title:"Blindfold Chess Game"}),!0):(await navigator.share({text:e,title:"Blindfold Chess Game"}),!0)}catch(s){if(s.name==="AbortError")return!1;console.warn("Share API failed, falling back to clipboard:",s)}return PN(e)}async function PN(e){try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(e),!0;const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-9999px",document.body.appendChild(t),t.select();const n=document.execCommand("copy");return document.body.removeChild(t),n}catch(t){return console.error("Failed to copy PGN to clipboard:",t),!1}}function xA(e){const t=[],n=/\d+\.\s*(\S+)(?:\s+(\S+))?/g;let s;const r=["1-0","0-1","1/2-1/2","*"];for(;(s=n.exec(e))!==null;)s[1]&&!r.includes(s[1])&&t.push(s[1]),s[2]&&!r.includes(s[2])&&t.push(s[2]);return t}function yA({game:e,open:t,onClose:n,onAnalyze:s}){const[r,i]=d.useState((e==null?void 0:e.isFavorite)??!1),[a,l]=d.useState(!1),{toast:c}=Rl();if(d.useEffect(()=>{e&&i(e.isFavorite)},[e]),!e||!t)return null;const u=async()=>{jn.isNativePlatform()&&await He.impact({style:Qe.Light});const v=await vA(e.pgn,`blindfold-vs-${e.botElo}.pgn`);c(v?{title:"PGN shared",description:"Game exported successfully"}:{title:"Share failed",description:"Could not share the game",variant:"destructive"})},f=async()=>{jn.isNativePlatform()&&await He.impact({style:Qe.Light}),await PN(e.pgn)?(l(!0),c({title:"Copied",description:"PGN copied to clipboard"}),setTimeout(()=>l(!1),2e3)):c({title:"Copy failed",description:"Could not copy PGN",variant:"destructive"})},m=e.result==="win"?o.jsx(wn,{className:"h-10 w-10 text-amber-500"}):e.result==="loss"?o.jsx(Ll,{className:"h-10 w-10 text-stone-400"}):o.jsx(gw,{className:"h-10 w-10 text-stone-500"}),h=e.result==="win"?"Victory":e.result==="loss"?"Defeat":"Draw",y=e.result==="win"?"text-green-600 dark:text-green-400":e.result==="loss"?"text-red-600 dark:text-red-400":"text-muted-foreground",p=new Date(e.date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),g=new Date(e.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),w=()=>{const v=xA(e.pgn);s(v)},x=async()=>{jn.isNativePlatform()&&await He.impact({style:Qe.Light});const v=await EN(e.id);i(v)};return o.jsxs("div",{className:"min-h-screen bg-background flex flex-col","data-testid":"history-game-report",children:[o.jsxs("header",{className:"flex items-center justify-between p-3 border-b border-border",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-history-report-back",children:o.jsx(Xm,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-lg font-semibold",children:"Game Details"}),o.jsx(Y,{variant:"ghost",size:"icon",onClick:x,"data-testid":"button-history-report-favorite",children:o.jsx(ww,{className:`h-5 w-5 ${r?"fill-amber-400 text-amber-400":""}`})})]}),o.jsx("div",{className:"flex-1 p-4 overflow-auto",children:o.jsx(Ze,{children:o.jsxs(it,{className:"pt-6 space-y-4",children:[o.jsxs("div",{className:"flex flex-col items-center gap-3 py-4",children:[m,o.jsx("h2",{className:`text-3xl font-bold ${y}`,children:h}),o.jsxs("p",{className:"text-lg",children:["vs ",o.jsx("span",{className:"font-semibold",children:e.botName}),o.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",e.botElo,")"]})]})]}),o.jsx(Xs,{}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(cw,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{children:p})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ro,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{children:g})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Played as"}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("div",{className:`w-4 h-4 rounded-full ${e.playerColor==="white"?"bg-white border border-stone-400":"bg-black"}`}),o.jsx("span",{className:"font-medium capitalize",children:e.playerColor})]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Moves"}),o.jsx("p",{className:"font-medium mt-1",children:e.moveCount})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Time Control"}),o.jsx("p",{className:"font-medium mt-1",children:e.timeControl})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Reconstruction Score"}),o.jsxs("p",{className:"font-medium mt-1",children:[Math.round(e.clarityScore),"%"]})]})]}),o.jsx(Xs,{}),o.jsxs(Y,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:w,"data-testid":"button-history-analyze",children:[o.jsx(yw,{className:"mr-2 h-4 w-4"}),"Analyze Game"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Y,{variant:"outline",className:"flex-1",onClick:u,"data-testid":"button-history-share-pgn",children:[o.jsx(P2,{className:"mr-2 h-4 w-4"}),"Share PGN"]}),o.jsxs(Y,{variant:"outline",className:"flex-1",onClick:f,"data-testid":"button-history-copy-pgn",children:[a?o.jsx(Al,{className:"mr-2 h-4 w-4"}):o.jsx(fw,{className:"mr-2 h-4 w-4"}),a?"Copied":"Copy PGN"]})]})]})})})]})}function Vp(){const[e,t]=d.useState(null),[n,s]=d.useState(!0),[r,i]=d.useState(null),[a,l]=d.useState([]),c=d.useRef(null);if(d.useEffect(()=>{const f=mR(t),m=async()=>{try{const h=await oe.getStatus();i(h);const y=await oe.getLogs();if(y&&y.logs){const p=y.logs;l(p.slice(-10))}}catch{}};return m(),c.current=window.setInterval(m,2e3),()=>{f(),c.current&&clearInterval(c.current)}},[]),!e)return null;const u=({ok:f})=>f?o.jsx(Al,{className:"w-3 h-3 text-green-400"}):o.jsx(Do,{className:"w-3 h-3 text-red-400"});return o.jsxs("div",{className:"fixed bottom-4 left-4 z-50 bg-black/90 text-white text-xs rounded-lg shadow-lg max-w-[280px]",onClick:()=>s(!n),"data-testid":"voice-debug-overlay",children:[o.jsxs("div",{className:"flex items-center gap-2 p-2 border-b border-white/20",children:[e.micListening?o.jsx(Ft,{className:"w-4 h-4 text-green-400 animate-pulse"}):o.jsx(er,{className:"w-4 h-4 text-red-400"}),o.jsx("span",{className:"font-bold",children:"Voice Debug"}),o.jsx("span",{className:"text-white/50 ml-auto",children:n?"":""})]}),n&&o.jsxs("div",{className:"p-2 space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(u,{ok:e.permissionStatus==="granted"}),o.jsxs("span",{children:["Permission: ",e.permissionStatus]})]}),o.jsx("div",{className:"text-white/50 text-[10px] mt-1 mb-1",children:"--- Native Status (polled) ---"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(u,{ok:(r==null?void 0:r.serviceBound)??!1}),o.jsxs("span",{children:["Service Bound: ",r!=null&&r.serviceBound?"Yes":"No"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(u,{ok:(r==null?void 0:r.modelReady)??!1}),o.jsxs("span",{children:["Model Ready: ",r!=null&&r.modelReady?"Yes":"No"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(u,{ok:(r==null?void 0:r.sessionActive)??!1}),o.jsxs("span",{children:["Session Active: ",r!=null&&r.sessionActive?"Yes":"No"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(u,{ok:e.micListening}),o.jsxs("span",{children:["Mic Listening: ",e.micListening?"Yes":"No"]})]}),e.lastResult&&o.jsx("div",{className:"mt-2 p-1 bg-green-900/50 rounded",children:o.jsxs("span",{className:"text-green-300",children:['Last: "',e.lastResult,'"']})}),e.lastError&&o.jsxs("div",{className:"mt-2 p-1 bg-red-900/50 rounded flex items-start gap-1",children:[o.jsx(m2,{className:"w-3 h-3 text-red-400 mt-0.5 shrink-0"}),o.jsx("span",{className:"text-red-300 break-all",children:e.lastError})]}),a.length>0&&o.jsxs("div",{className:"mt-2 p-1 bg-blue-900/50 rounded",children:[o.jsx("div",{className:"text-blue-300 text-[10px]",children:"Native Logs:"}),a.map((f,m)=>o.jsx("div",{className:"text-blue-200 text-[9px] truncate",children:f},m))]}),o.jsxs("div",{className:"text-white/30 mt-1",children:["Updated: ",new Date(e.timestamp).toLocaleTimeString()]})]})]})}const wA={p:100,n:320,b:330,r:500,q:900,k:2e4},qp="blindfold-saved-game";function bA(e){try{localStorage.setItem(qp,JSON.stringify(e))}catch(t){console.warn("Failed to save game state:",t)}}function SA(){try{const e=localStorage.getItem(qp);if(e)return JSON.parse(e)}catch(e){console.warn("Failed to load saved game:",e)}return null}function Sc(){try{localStorage.removeItem(qp)}catch(e){console.warn("Failed to clear saved game:",e)}}function NA(e){if(e)return{from:e.from,to:e.to,captured:e.captured,capturedValue:e.captured?wA[e.captured]:void 0}}function kA(e){return new Promise(t=>setTimeout(t,e))}const jA={easy:{maxPeeks:Number.POSITIVE_INFINITY},medium:{maxPeeks:20},hard:{maxPeeks:10},expert:{maxPeeks:5},master:{maxPeeks:2},grandmaster:{maxPeeks:0}};function CA({historyTrigger:e,onStateChange:t,returnToTitleRef:n,onTrainNowClick:s}){const{toast:r}=Rl(),[i,a]=d.useState(!0),[l,c]=d.useState(null),[u,f]=d.useState(!1),[m,h]=d.useState("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"),[y,p]=d.useState([]),[g,w]=d.useState(null),[x,v]=d.useState([]),[b,S]=d.useState(null),[N,j]=d.useState("white"),[k,C]=d.useState(null),[R,P]=d.useState(300),[D,A]=d.useState(300),[z,_]=d.useState(()=>localStorage.getItem("blindfold-settings-time")||"blitz"),[F,q]=d.useState(!1),[G,T]=d.useState("medium"),[$,Q]=d.useState("empty_board"),[U,ve]=d.useState(!0),[H,xe]=d.useState(Number.POSITIVE_INFINITY),[ie,se]=d.useState(!1),V=d.useRef(null),X=d.useRef(0),[ee,O]=d.useState(0),[re,de]=d.useState(0),ye=d.useRef(!1),Le=d.useRef(null),ke=d.useRef([]),ae=d.useRef(0),Se=d.useRef(0),Te=d.useRef(0),De=d.useRef(0),Ie=d.useRef(0),B=d.useRef(0),K=d.useRef(0),me=d.useRef([]),ce=d.useRef(!1),ue=d.useRef(null),Fe=d.useRef(1200),[Re,_e]=d.useState(()=>Ah()),[rt,Mt]=d.useState(()=>Za());d.useEffect(()=>{ga();const W=SA();W&&(Er(W),ar(!0))},[]),d.useEffect(()=>{const W=he=>{const we=he;we.detail&&_e(we.detail)};return window.addEventListener("blindfoldSettingsChanged",W),()=>{window.removeEventListener("blindfoldSettingsChanged",W)}},[]);const[et,Wt]=d.useState(null),[Jt,En]=d.useState(!1),[Pn,Qt]=d.useState(!1),[St,zn]=d.useState(()=>{const W=localStorage.getItem("blindfold-settings-elo");return W?Number(W):1200}),[en,ys]=d.useState(()=>localStorage.getItem("blindfold-settings-color")||"white"),[ir,Xn]=d.useState(!1),[cn,Cr]=d.useState(!1),[Ve,Zo]=d.useState(!1),[va,fo]=d.useState(!1),[M,qe]=d.useState(null),[lt,un]=d.useState(null),Z=d.useRef(null),[qs,_t]=d.useState(0),Pt=d.useRef(""),[ws,tn]=d.useState(null),[Ks,Tn]=d.useState(!1),[Ee,ar]=d.useState(!1),[bs,Er]=d.useState(null),[Ws,Us]=d.useState(!1),[ho,lr]=d.useState(null),Rn=d.useRef(null),[Ss,cr]=d.useState(null),Zn=d.useRef(null),[Jo,us]=d.useState(!1),[Pr,ei]=d.useState([]),[ti,mo]=d.useState([]),[ni,Ot]=d.useState(null),[E,I]=d.useState(null),[L,Ne]=d.useState(!1),[Me,J]=d.useState([]),[dt,We]=d.useState(!1),[Ut,Fl]=d.useState(null),Ae=d.useRef(null),po=d.useRef(300),go=d.useRef(300),Dt=d.useRef([]),pn=d.useRef(null),gd=d.useRef(!1),vo=d.useRef(!1),si=d.useRef(null),[Kp,Wp]=d.useState(!1),zl=jn.isNativePlatform();d.useEffect(()=>()=>{Bi.stopAnalysis(),pn.current&&clearInterval(pn.current),Zn.current&&clearTimeout(Zn.current),vo.current&&(oe.stopSession().catch(()=>{}),vo.current=!1),si.current&&(si.current.remove().catch(()=>{}),si.current=null)},[]),d.useEffect(()=>{localStorage.setItem("blindfold-settings-elo",String(St))},[St]),d.useEffect(()=>{localStorage.setItem("blindfold-settings-color",en)},[en]),d.useEffect(()=>{localStorage.setItem("blindfold-settings-time",z)},[z]),d.useEffect(()=>{e&&e>0&&We(!0)},[e]),d.useEffect(()=>{Ae.current=l,po.current=R,go.current=D,Dt.current=y},[l,R,D,y]),d.useEffect(()=>{if(!u||k||!l||!et)return;const W={pgn:l.pgn(),playerColor:N,whiteTime:R,blackTime:D,timeControl:z,botElo:et.elo,isBlindfold:F,blindfoldDifficulty:G,remainingPeeks:H,savedAt:Date.now()};bA(W)},[u,k,l,et,y,N,R,D,z,F,G,H]);const Vl=d.useCallback(()=>{Sc(),pn.current&&(clearInterval(pn.current),pn.current=null),Z.current&&(clearTimeout(Z.current),Z.current=null),c(null),f(!1),C(null),h("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"),p([]),w(null),v([]),S(null),Wt(null),En(!1),se(!1),un(null),sn.stop(),X.current=0,O(0),de(0),ye.current=!1,Le.current=null,ke.current=[],ae.current=0,Se.current=0,Te.current=0,De.current=0,Ie.current=0,B.current=0,K.current=0,me.current=[],ce.current=!1,ue.current&&(clearTimeout(ue.current),ue.current=null),Us(!1),lr(null),Rn.current=null,Ot(null),I(null),cr(null),Zn.current&&(clearTimeout(Zn.current),Zn.current=null)},[]);d.useEffect(()=>{t&&t(Ws?"reconstruction":L?"analysis":u&&!k?"in_game":i?"idle":"setup")},[Ws,L,u,k,i,t]);const xa=d.useCallback(()=>{if(u&&Ae.current&&Dt.current.length>0&&!k&&et){pn.current&&(clearInterval(pn.current),pn.current=null);const W=Ae.current.pgn()||"",he={date:new Date().toISOString(),result:"loss",playerColor:N,botName:String(et.elo),botElo:et.elo,moveCount:Dt.current.length,pgn:W,clarityScore:0,isFavorite:!1,timeControl:z};vx(he).then(we=>{we&&console.log("[Game] Saved resigned game to history:",we)})}sn.stop(),Us(!1),Ne(!1),us(!1),We(!1),Fl(null),Vl(),a(!0)},[u,k,et,N,z,Vl]);d.useEffect(()=>(n&&(n.current=xa),()=>{n&&(n.current=null)}),[xa,n]);const ri=d.useCallback((W,he,we)=>{var ut;const Ge=W==="draw"?"draw":W==="white_win"&&N==="white"||W==="black_win"&&N==="black"?"win":"loss",$e=X.current===0;ei([...ke.current]),mo([...me.current]),J([...Dt.current]);const st=Dt.current.length,fe=$R(Ge,X.current,re,ke.current,he,we,{botElo:Fe.current,wasPeekFree:$e,totalMoves:st,voiceCorrections:Se.current,voiceCommands:Te.current,reconstructionVoiceInputs:De.current,reconstructionTouchInputs:Ie.current,gameVoiceMoves:B.current,gameTouchMoves:K.current,squareInquiries:me.current,isBlindfold:F,wasAssisted:ce.current});if(Mt(fe),window.dispatchEvent(new CustomEvent("statsUpdated")),Re.boardReconstructionEnabled||us(!0),et&&st>0){const Mn=((ut=Ae.current)==null?void 0:ut.pgn())||"",_n={date:new Date().toISOString(),result:Ge,playerColor:N,botName:String(et.elo),botElo:et.elo,moveCount:st,pgn:Mn,clarityScore:he??0,isFavorite:!1,timeControl:z};vx(_n).then(Jn=>{Jn&&console.log("[Game] Saved game to history:",Jn)})}else et&&st===0&&console.log("[Game] Zero-move game detected. Not saving to history.")},[N,re,F,et,z]),zt=d.useCallback(W=>{Sc(),pn.current&&(clearInterval(pn.current),pn.current=null),C(W),sn.stop(),Ve&&At(W==="draw"?"Game drawn":W==="white_win"&&N==="white"||W==="black_win"&&N==="black"?"You win!":"You lose"),Re.boardReconstructionEnabled&&Ae.current?(Rn.current={result:W,fen:Ae.current.fen()},lr(Ae.current.fen()),cr(3)):ri(W)},[N,Ve,Re.boardReconstructionEnabled,ri]);d.useEffect(()=>{if(Ss!==null)return Ss>0?Zn.current=setTimeout(()=>{cr(W=>W!==null?W-1:null)},1e3):(Us(!0),cr(null)),()=>{Zn.current&&clearTimeout(Zn.current)}},[Ss]);const TN=d.useCallback((W,he,we,Oe)=>{De.current=we,Ie.current=Oe,Ot(W),I(he),Rn.current&&(ri(Rn.current.result,W,he),Rn.current=null)},[ri]),RN=d.useCallback(()=>{Us(!1),lr(null),Rn.current=null,xa()},[xa]),MN=d.useCallback(()=>{Ot(null),I(null),Rn.current&&ri(Rn.current.result),Us(!1),lr(null),Rn.current=null,us(!0)},[ri]),ya=d.useCallback(async(W,he,we,Oe)=>{if(!he)return null;En(!0);try{const Ge=N==="white"?go.current:po.current,$e=(we==null?void 0:we.length)||0,st=await uA(W,he,we,Oe);if(!st)throw new Error("Bot failed to generate move");st.isBookMove&&ae.current++;let fe;if(st.isFreeCapture)fe=2e3;else if(Re.botThinkingTimeEnabled){const ut=Math.ceil(($e+2)/2),Mn=aA(W);fe=lA(ut,Mn,Ge,z)}else{const ut=Math.ceil(($e+2)/2);fe=iA(ut,Ge,W,N==="white"?"black":"white",Oe)}return fe>2e3&&Qt(!0),await kA(fe),Qt(!1),st}catch(Ge){return console.error("Error getting bot move:",Ge),r({title:"Error",description:"Bot failed to respond",variant:"destructive"}),null}finally{En(!1),Qt(!1)}},[r,N,Re.botThinkingTimeEnabled,z]),Up=async(W,he)=>{X.current=0,Fe.current=W.elo;const we=new Dn;c(we),Ae.current=we,h(we.fen()),p([]),Dt.current=[],w(null),v([]),C(null),Wt(W);const Oe=he==="random"?Math.random()<.5?"white":"black":he;j(Oe);const Ge=z==="practice"?99999999:z==="blitz"?300:z==="rapid"?900:1800;if(P(Ge),A(Ge),po.current=Ge,go.current=Ge,xe(F?jA[G].maxPeeks:Number.POSITIVE_INFINITY),f(!0),Xn(!1),Oe==="black"){const $e=await ya(we.fen(),W.elo);if($e&&Ae.current){const st=Ae.current.move($e.move);st&&S({from:st.from,to:st.to}),h(Ae.current.fen());const fe=[$e.move];p(fe),Dt.current=fe,Le.current=Date.now();try{He.impact({style:Qe.Medium}).catch(()=>{}),setTimeout(()=>{He.impact({style:Qe.Medium}).catch(()=>{})},100)}catch{}if(Ve){const ut=ui($e.move,$e.move.includes("x"),Ae.current.isCheck(),!1);Pt.current=ut,At(ut)}}}},_N=d.useCallback(async W=>{const he=new Dn;he.loadPgn(W.pgn);const we=Nu(W.botElo),Oe={id:`elo_${W.botElo}`,elo:W.botElo,difficulty:`elo_${Math.round(W.botElo/200)*200}`,depth:we.depth,randomPercent:we.randomPercent};X.current=0,Fe.current=Oe.elo,O(0),de(0),ye.current=!1,Le.current=null,ke.current=[],ae.current=0,Se.current=0,Te.current=0,De.current=0,Ie.current=0,B.current=0,K.current=0,me.current=[],c(he),Ae.current=he,h(he.fen());const Ge=he.history();p(Ge),Dt.current=Ge,w(null),v([]),C(null),Wt(Oe),j(W.playerColor),P(W.whiteTime),A(W.blackTime),po.current=W.whiteTime,go.current=W.blackTime,_(W.timeControl),q(W.isBlindfold),T(W.blindfoldDifficulty),xe(W.remainingPeeks);const $e=he.history({verbose:!0});if($e.length>0){const ut=$e[$e.length-1];S({from:ut.from,to:ut.to})}a(!1),f(!0),Xn(!1),Sc();const st=he.turn(),fe=W.playerColor==="white"?"b":"w";if(st===fe){const ut=await ya(he.fen(),Oe.elo,Ge);if(ut&&Ae.current){const Mn=Ae.current.move(ut.move);Mn&&S({from:Mn.from,to:Mn.to}),h(Ae.current.fen());const _n=[...Dt.current,ut.move];p(_n),Dt.current=_n,Le.current=Date.now();try{He.impact({style:Qe.Medium}).catch(()=>{})}catch{}if(Ve){const Jn=ui(ut.move,ut.move.includes("x"),Ae.current.isCheck(),!1);Pt.current=Jn,At(Jn)}}}},[r,ya,Ve]);d.useEffect(()=>{if(k!==null){pn.current&&(clearInterval(pn.current),pn.current=null);return}if(u&&l&&z!=="practice"){const W=setInterval(()=>{l.turn()==="w"?P(we=>{const Oe=Math.max(0,we-1);return po.current=Oe,Oe===0&&we>0&&zt("black_win"),Oe}):A(we=>{const Oe=Math.max(0,we-1);return go.current=Oe,Oe===0&&we>0&&zt("white_win"),Oe})},1e3);return pn.current=W,()=>{clearInterval(W),pn.current=null}}},[u,l,zt,z,k]),d.useEffect(()=>((async()=>{try{u&&F&&Re.keepAwakeEnabled?(await xf.keepAwake(),console.log("[KeepAwake] Screen wake lock enabled for blindfold game")):(await xf.allowSleep(),console.log("[KeepAwake] Screen wake lock released"))}catch(he){console.log("[KeepAwake] Plugin not available (web mode):",he)}})(),()=>{xf.allowSleep().catch(()=>{})}),[u,F,Re.keepAwakeEnabled]),d.useEffect(()=>{if(!zl||!cn||!u||!Ae.current||k!==null)return;let W=!1;return(async()=>{try{if(!await Yo()||W){console.warn("[NativeVoice] Voice not ready or cancelled");return}if(console.log("[NativeVoice] Starting voice session..."),si.current&&await si.current.remove(),W||(console.log("[NativeVoice] Setting up onSpeechResult listener..."),si.current=await oe.addListener("onSpeechResult",Oe=>{console.log("[NativeVoice] *** RECEIVED onSpeechResult:",Oe.text);const Ge=Oe.text,$e=Ae.current;if(!$e){console.log("[NativeVoice] No game ref, ignoring");return}const st=Ge.trim();if(st.length<2){console.log("[NativeVoice] Too short, ignoring:",st);return}Te.current++,qe(Ge),console.log("[NativeVoice] Processing transcript:",Ge);const fe=Ge.toLowerCase();if(fe.includes("repeat")||fe.includes("say again")||fe==="again"||fe.includes("what was that")){Pt.current&&Ve?oe.speakAndListen({text:Pt.current}).catch(()=>{}):oe.startListening().catch(()=>{});return}if(Ks){if(fe.includes("yes")||fe.includes("confirm")||fe.includes("i confirm")){He.impact({style:Qe.Medium}).catch(()=>{}),Tn(!1),zt(N==="white"?"black_win":"white_win"),qe(null);return}if(fe.includes("no")||fe.includes("cancel")||fe.includes("never mind")){He.impact({style:Qe.Light}).catch(()=>{}),Tn(!1),qe(null),oe.startListening().catch(()=>{});return}oe.startListening().catch(()=>{});return}if(lt){Z.current&&(clearTimeout(Z.current),Z.current=null);const ge=Hv(Ge);let ne=null;if(lt.isPawnCapture&&lt.pawnFiles&&ge.file?ne=Xv(lt.candidates,ge.file):(ge.file||ge.rank)&&(ne=Gv(lt.candidates,ge)),ne){un(null);try{const pe=$e.move(ne);if(pe){B.current++,S({from:pe.from,to:pe.to}),h($e.fen());const je=[...Dt.current,ne];if(p(je),Dt.current=je,He.impact({style:Qe.Light}).catch(()=>{}),Ve){const Xe=ui(ne,ne.includes("x"),!1,!1);Pt.current=Xe,oe.speakAndListen({text:Xe}).catch(()=>{})}else oe.startListening().catch(()=>{});$e.isCheckmate()?zt($e.turn()==="w"?"black_win":"white_win"):$e.isDraw()&&zt("draw"),qe(null)}}catch(pe){console.error("[NativeVoice] Disambiguation move error:",pe),oe.startListening().catch(()=>{})}return}Se.current++;const le=lt.isPawnCapture?"I didn't catch that. Which file?":"I didn't catch that. Which piece?";Ve?oe.speakAndListen({text:le}).catch(()=>{}):oe.startListening().catch(()=>{});return}const ut=fe.match(/what(?:'?s| is)?\s+(?:on\s+)?([a-h])[\s-]?([1-8])/);if(ut){const ge=`${ut[1]}${ut[2]}`;F&&me.current.push(ge);const ne=$e.get(ge);let le="";ne?le=`${ne.color==="w"?"White":"Black"} ${{p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[ne.type]} on ${ge}`:le=`${ge.toUpperCase()} is empty`,He.impact({style:Qe.Light}).catch(()=>{}),Ve?oe.speakAndListen({text:le}).catch(()=>{}):oe.startListening().catch(()=>{}),qe(null);return}const Mn=fe.match(/where\s+(?:is|are)\s+(?:my\s+)?(\w+)/);if(Mn){const ge=Mn[1].toLowerCase(),le={king:"k",queen:"q",rook:"r",bishop:"b",knight:"n",pawn:"p",kings:"k",queens:"q",rooks:"r",bishops:"b",knights:"n",pawns:"p",horse:"n",horses:"n",castle:"r",castles:"r"}[ge];if(le){const pe=N==="white"?"w":"b",je=[],Xe=["a","b","c","d","e","f","g","h"],ot=["1","2","3","4","5","6","7","8"];for(const ft of Xe)for(const wt of ot){const gn=`${ft}${wt}`,nn=$e.get(gn);nn&&nn.type===le&&nn.color===pe&&je.push(gn.toUpperCase())}const tt={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"};let gt="";je.length===0?gt=`You have no ${tt[le]}`:je.length===1?gt=`Your ${tt[le]} is on ${je[0]}`:gt=`Your ${tt[le]}s are on ${je.join(" and ")}`,He.impact({style:Qe.Light}).catch(()=>{}),Ve?oe.speakAndListen({text:gt}).catch(()=>{}):oe.startListening().catch(()=>{}),qe(null);return}}if(fe.includes("last move")||fe.includes("previous move")||fe.includes("opponent's move")){He.impact({style:Qe.Light}).catch(()=>{});const ge=$e.history({verbose:!0});let ne="";if(ge.length===0)ne="No moves have been made yet";else{const le=ge[ge.length-1],je={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[le.piece]||le.piece,Xe=le.captured?" takes":"",ot=le.to.toUpperCase();le.piece==="p"?ne=`${le.from.toUpperCase()}${Xe} ${ot}`:ne=`${je}${Xe} ${ot}`}Ve?oe.speakAndListen({text:ne}).catch(()=>{}):oe.startListening().catch(()=>{}),qe(null);return}const _n=fe.match(/legal\s+moves?\s+(?:for\s+)?(?:my\s+)?(\w+)/);if(_n){const ge=_n[1].toLowerCase(),le={king:"k",queen:"q",rook:"r",bishop:"b",knight:"n",pawn:"p",kings:"k",queens:"q",rooks:"r",bishops:"b",knights:"n",pawns:"p",horse:"n",horses:"n",castle:"r",castles:"r"}[ge];if(le){He.impact({style:Qe.Light}).catch(()=>{});const je={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"}[le],ot=$e.moves({verbose:!0}).filter(ft=>ft.piece===le),tt=Array.from(new Set(ot.map(ft=>ft.to.toUpperCase())));let gt="";if(tt.length===0)gt=`Your ${je} has no legal moves`;else if(tt.length<=4)gt=`Your ${je} can move to ${tt.join(", ")}`;else{const ft=tt.slice(0,3);gt=`Your ${je} has ${tt.length} legal moves, including ${ft.join(", ")}`}Ve?oe.speakAndListen({text:gt}).catch(()=>{}):oe.startListening().catch(()=>{}),qe(null);return}}if(fe.includes("resign")||fe.includes("quit")||fe.includes("give up")||fe.includes("i resign")){He.impact({style:Qe.Medium}).catch(()=>{}),Tn(!0),qe(null),Ve?oe.speakAndListen({text:"Resign? Say yes or no."}).catch(()=>{}):oe.startListening().catch(()=>{});return}if(fe==="peek"||fe==="peak"){if(H<=0||$==="no_board"||G==="grandmaster"){Ve?oe.speakAndListen({text:"Peeking is not allowed"}).catch(()=>{}):oe.startListening().catch(()=>{}),qe(null);return}He.impact({style:Qe.Light}).catch(()=>{}),ce.current=!0,se(!0),xe(ge=>ge-1),ue.current&&clearTimeout(ue.current),ue.current=setTimeout(()=>{se(!1),ue.current=null},5e3),Ve?oe.speakAndListen({text:"Board visible for 5 seconds"}).catch(()=>{}):oe.startListening().catch(()=>{}),qe(null);return}if(fe.includes("clock")||fe.includes("how much time")||fe.includes("time left")||fe.includes("remaining")){He.impact({style:Qe.Light}).catch(()=>{});const ge=N==="white"?R:D,ne=Math.floor(ge/60),le=ge%60;let pe="";ne>0?pe=`${ne} minute${ne!==1?"s":""} and ${le} second${le!==1?"s":""} remaining`:pe=`${le} second${le!==1?"s":""} remaining`,Ve?oe.speakAndListen({text:pe}).catch(()=>{}):oe.startListening().catch(()=>{}),qe(null);return}if(fe.includes("material")){He.impact({style:Qe.Light}).catch(()=>{});const ge={p:1,n:3,b:3,r:5,q:9,k:0};let ne=0,le=0;const pe=$e.board();for(const ot of pe)for(const tt of ot)if(tt){const gt=ge[tt.type]||0;tt.color==="w"?ne+=gt:le+=gt}const je=ne-le;let Xe="";je>0?Xe=`White is up ${je} point${je!==1?"s":""}`:je<0?Xe=`Black is up ${Math.abs(je)} point${Math.abs(je)!==1?"s":""}`:Xe="Material is equal",Ve?oe.speakAndListen({text:Xe}).catch(()=>{}):oe.startListening().catch(()=>{}),qe(null);return}if(fe.includes("eval")||fe.includes("evaluation")){He.impact({style:Qe.Light}).catch(()=>{}),ce.current=!0,Ve&&oe.speakAndListen({text:"Evaluating position"}).catch(()=>{}),Bi.analyzePosition($e.fen(),5e5).then(ge=>{let ne="";if(ge.isMate&&ge.mateIn!==void 0)ne=ge.mateIn>0?`Mate in ${ge.mateIn} for white`:`Mate in ${Math.abs(ge.mateIn)} for black`;else{const le=Math.abs(ge.evaluation);le<.3?ne="Position is equal":ge.evaluation>0?ne=`White is better by ${le.toFixed(1)}`:ne=`Black is better by ${le.toFixed(1)}`}Ve?oe.speakAndListen({text:ne}).catch(()=>{}):oe.startListening().catch(()=>{})}).catch(()=>{Ve?oe.speakAndListen({text:"Unable to evaluate position"}).catch(()=>{}):oe.startListening().catch(()=>{})}),qe(null);return}const Jn=$e.moves({verbose:!0}).map(ge=>ge.san),Nt=Uv(Ge,Jn);if(Nt.move&&!Nt.isAmbiguous)try{const ge=$e.move(Nt.move);if(ge){B.current++,S({from:ge.from,to:ge.to});const ne=$e.fen();h(ne);const le=[...Dt.current,Nt.move];p(le),Dt.current=le,He.impact({style:Qe.Light}).catch(()=>{}),$e.isCheckmate()?zt($e.turn()==="w"?"black_win":"white_win"):$e.isDraw()&&zt("draw"),qe(null),oe.startListening().catch(()=>{})}}catch(ge){console.error("[NativeVoice] Move error:",ge),oe.startListening().catch(()=>{})}else if(Nt.isAmbiguous&&Nt.candidates.length>1){const ge=Zv(Nt.candidates),ne=ge?Yv(Nt.candidates):[];let le;if(ge&&ne.length===2){const pe=ne[0].toUpperCase(),je=ne[1].toUpperCase();le=`Did you mean ${pe} takes ${Nt.targetSquare} or ${je} takes ${Nt.targetSquare}?`}else{const pe=Qv(Nt.candidates),je=Nt.piece==="R"?"rook":Nt.piece==="N"?"knight":Nt.piece==="B"?"bishop":Nt.piece==="Q"?"queen":"piece";le=pe.length===2?`Two ${je}s can move to ${Nt.targetSquare}. The one on ${pe[0]} or ${pe[1]}?`:`Multiple ${je}s can move to ${Nt.targetSquare}. Which one?`}un({candidates:Nt.candidates,piece:Nt.piece,targetSquare:Nt.targetSquare,isPawnCapture:ge,pawnFiles:ne}),qe(`Clarify: ${Nt.candidates.join(" or ")}`),Ve?oe.speakAndListen({text:le}).catch(()=>{}):oe.startListening().catch(()=>{}),Z.current=setTimeout(()=>{un(null),qe(null),Ve?oe.speakAndListen({text:"Move cancelled"}).catch(()=>{}):oe.startListening().catch(()=>{})},1e4)}else qe(null),oe.startListening().catch(()=>{})}),W))return;console.log("[NativeVoice] Calling startSession..."),await oe.startSession(),vo.current=!0,fo(!0),Wp(!1),console.log("[NativeVoice] Session started - listener active, waiting for speech")}catch(we){console.error("[NativeVoice] Setup failed, falling back to web voice:",we),Wp(!0),vo.current=!1}})(),()=>{W=!0,vo.current&&(oe.stopSession().catch(()=>{}),vo.current=!1,fo(!1))}},[zl,cn,u,k,Ve,zt]),d.useEffect(()=>{if(zl&&!Kp)return;if(!cn){sn.stop();return}if(!u||!Ae.current||k!==null){sn.stop();return}Zi.register("game"),sn.setOnResult(async(Oe,Ge)=>{const $e=Ae.current;if(!$e)return;if(Ge.trim().length<2){console.log("[Game] Ignoring empty/short transcript:",Ge);return}Te.current++,qe(Ge);const fe=Ge.toLowerCase();if(Ks){if(fe.includes("yes")||fe.includes("confirm")||fe.includes("i confirm")){try{He.impact({style:Qe.Medium}).catch(()=>{})}catch{}Tn(!1),zt(N==="white"?"black_win":"white_win"),qe(null);return}if(fe.includes("no")||fe.includes("cancel")||fe.includes("never mind")){try{He.impact({style:Qe.Light}).catch(()=>{})}catch{}Tn(!1),qe(null);return}return}if(fe.includes("repeat")||fe.includes("say again")||fe.includes("what was that")||fe.includes("again")){Pt.current&&Ve&&At(Pt.current).catch(ne=>console.warn("[Voice] Echo failed:",ne));return}const ut=fe.match(/what(?:'?s| is)?\s+(?:on\s+)?([a-h])[\s-]?([1-8])/);if(ut){const ne=`${ut[1]}${ut[2]}`;F&&me.current.push(ne);const le=$e.get(ne);let pe="";if(le){const je=le.color==="w"?"White":"Black",ot={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[le.type]||le.type;pe=`${je} ${ot} on ${ne}`}else pe=`${ne.toUpperCase()} is empty`;Ve&&At(pe).catch(je=>console.warn("[Voice] Echo failed:",je)),qe(null);return}if(fe.includes("last move")||fe.includes("previous move")||fe.includes("opponent's move")){try{He.impact({style:Qe.Light}).catch(()=>{})}catch{}const ne=$e.history({verbose:!0});let le="";if(ne.length===0)le="No moves have been made yet";else{const pe=ne[ne.length-1],Xe={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[pe.piece]||pe.piece,ot=pe.captured?" takes":"",tt=pe.from.toUpperCase(),gt=pe.to.toUpperCase();pe.piece==="p"?le=`${tt}${ot} ${gt}`:le=`${Xe}${ot} ${gt}`}Ve&&At(le).catch(pe=>console.warn("[Voice] Echo failed:",pe)),qe(null);return}if(/\b(how much time|what('?s| is) the time|time left|clock|my time)\b/.test(fe)){try{He.impact({style:Qe.Light}).catch(()=>{})}catch{}const ne=N==="white"?po.current:go.current,le=N==="white"?go.current:po.current,pe=Xe=>{const ot=Math.floor(Xe/60),tt=Xe%60;return ot>0&&tt>0?`${ot} minute${ot!==1?"s":""} ${tt} second${tt!==1?"s":""}`:ot>0?`${ot} minute${ot!==1?"s":""}`:`${tt} second${tt!==1?"s":""}`},je=`You have ${pe(ne)}. Opponent has ${pe(le)}.`;Ve&&At(je).catch(Xe=>console.warn("[Voice] Echo failed:",Xe)),qe(null);return}const _n=fe.match(/where(?:'?s| is| are)?\s+(?:my\s+)?(\w+)/);if(_n){const ne=_n[1].toLowerCase(),pe={king:"k",kings:"k",queen:"q",queens:"q",rook:"r",rooks:"r",castle:"r",castles:"r",bishop:"b",bishops:"b",knight:"n",knights:"n",horse:"n",horses:"n",pawn:"p",pawns:"p"}[ne];if(pe){try{He.impact({style:Qe.Light}).catch(()=>{})}catch{}const je=N==="white"?"w":"b",ot={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"}[pe],tt=[],gt=["a","b","c","d","e","f","g","h"];for(const wt of gt)for(let gn=1;gn<=8;gn++){const nn=`${wt}${gn}`,xo=$e.get(nn);xo&&xo.type===pe&&xo.color===je&&tt.push(nn.toUpperCase())}let ft="";tt.length===0?ft=`You have no ${ot}s`:tt.length===1?ft=`Your ${ot} is on ${tt[0]}`:ft=`You have ${ot}s on ${tt.slice(0,-1).join(", ")} and ${tt[tt.length-1]}`,Ve&&At(ft).catch(wt=>console.warn("[Voice] Echo failed:",wt)),qe(null);return}}if(fe.includes("material")){try{He.impact({style:Qe.Light}).catch(()=>{})}catch{}const ne={p:1,n:3,b:3,r:5,q:9},le={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen"},pe={p:0,n:0,b:0,r:0,q:0},je={p:0,n:0,b:0,r:0,q:0},Xe=["a","b","c","d","e","f","g","h"];for(const ft of Xe)for(let wt=1;wt<=8;wt++){const gn=`${ft}${wt}`,nn=$e.get(gn);nn&&nn.type!=="k"&&(nn.color==="w"?pe[nn.type]++:je[nn.type]++)}const ot={};let tt=0;for(const ft of["q","r","b","n","p"]){const wt=pe[ft]-je[ft];wt!==0&&(ot[ft]=wt,tt+=wt*ne[ft])}let gt="";if(tt===0)gt="Material is equal";else{const ft=tt>0?"White":"Black",wt=Math.abs(tt),gn=[];for(const nn of["q","r","b","n","p"]){const xo=tt>0?ot[nn]:-(ot[nn]||0);if(xo&&xo>0){const Qp=xo,Yp=le[nn];gn.push(Qp===1?`a ${Yp}`:`${Qp} ${Yp}s`)}}if(gn.length>0){const nn=gn.length===1?gn[0]:`${gn.slice(0,-1).join(", ")} and ${gn[gn.length-1]}`;gt=`${ft} is up ${nn}`}else gt=`${ft} is up by ${wt} point${wt!==1?"s":""}`}Ve&&At(gt).catch(ft=>console.warn("[Voice] Echo failed:",ft)),qe(null);return}const Jn=fe.match(/legal\s+moves?\s+(?:for\s+)?(?:my\s+)?(\w+)/);if(Jn){const ne=Jn[1].toLowerCase(),pe={king:"k",queen:"q",rook:"r",bishop:"b",knight:"n",pawn:"p",kings:"k",queens:"q",rooks:"r",bishops:"b",knights:"n",pawns:"p",horse:"n",horses:"n",castle:"r",castles:"r"}[ne];if(pe){try{He.impact({style:Qe.Light}).catch(()=>{})}catch{}const Xe={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"}[pe],tt=$e.moves({verbose:!0}).filter(wt=>wt.piece===pe),gt=Array.from(new Set(tt.map(wt=>wt.to.toUpperCase())));let ft="";if(gt.length===0)ft=`Your ${Xe} has no legal moves`;else if(gt.length<=4)ft=`Your ${Xe} can move to ${gt.join(", ")}`;else{const wt=gt.slice(0,3);ft=`Your ${Xe} has ${gt.length} legal moves, including ${wt.join(", ")}`}Ve&&At(ft).catch(wt=>console.warn("[Voice] Echo failed:",wt)),qe(null);return}}if(fe.includes("resign")||fe.includes("quit")||fe.includes("give up")||fe.includes("i resign")){try{He.impact({style:Qe.Medium}).catch(()=>{})}catch{}Tn(!0),qe(null);return}if(fe==="peek"||fe==="peak"){if($==="no_board"||G==="grandmaster"){Ve&&At("Peeking is not allowed in this mode").catch(ne=>console.warn("[Voice] Echo failed:",ne)),qe(null);return}try{He.impact({style:Qe.Light}).catch(()=>{})}catch{}ce.current=!0,se(!0),ue.current&&clearTimeout(ue.current),ue.current=setTimeout(()=>{se(!1),ue.current=null},5e3),Ve&&At("Board visible for 5 seconds").catch(ne=>console.warn("[Voice] Echo failed:",ne)),qe(null);return}if(fe.includes("eval")||fe.includes("evaluation")){try{He.impact({style:Qe.Light}).catch(()=>{})}catch{}ce.current=!0,Ve&&(async()=>{try{const ne=await Bi.getBestMove($e.fen(),{depth:12});let le="";if(ne.evaluation!==void 0){const pe=ne.evaluation,je=pe>=0?"plus":"minus",Xe=Math.abs(pe).toFixed(1);Math.abs(pe)>=100?le=pe>0?"White has checkmate":"Black has checkmate":Math.abs(pe)<.3?le="Position is equal":le=`Evaluation is ${je} ${Xe}`}else le="Unable to evaluate position";await At(le)}catch(ne){console.warn("[Voice] Eval failed:",ne),At("Unable to evaluate position").catch(()=>{})}})(),qe(null);return}if(lt){Z.current&&(clearTimeout(Z.current),Z.current=null);const ne=Hv(Ge);let le=null;if(lt.isPawnCapture&&lt.pawnFiles&&ne.file?le=Xv(lt.candidates,ne.file):(ne.file||ne.rank)&&(le=Gv(lt.candidates,ne)),le){if(un(null),Ve){const Xe=ui(le,le.includes("x"),!1,!1);Pt.current=Xe,At(Xe).catch(ot=>console.warn("[Voice] Echo failed:",ot))}if(!Ae.current)return;const je=Ae.current.move(le);if(je){B.current++,h(Ae.current.fen()),S({from:je.from,to:je.to});const Xe=[...Dt.current,je.san];if(p(Xe),Dt.current=Xe,w(null),v([]),qe(null),Ae.current.isCheckmate()){const ot=Ae.current.turn()==="w"?"black_win":"white_win";zt(ot)}else(Ae.current.isDraw()||Ae.current.isStalemate()||Ae.current.isThreefoldRepetition()||Ae.current.isInsufficientMaterial())&&zt("draw")}return}Se.current++;const pe=lt.isPawnCapture?"I didn't catch that. Which file?":"I didn't catch that. Which piece?";Ve&&At(pe).catch(je=>console.warn("[Voice] Echo failed:",je)),Z.current=setTimeout(async()=>{un(null),qe(null),Ve&&At("Move cancelled").catch(je=>console.warn("[Voice] Echo failed:",je))},1e4);return}const Nt=$e.moves(),ge=Uv(Ge,Nt);if(ge.move){if(Ve){const le=ui(ge.move,ge.move.includes("x"),!1,!1);Pt.current=le,At(le).catch(pe=>console.warn("[Voice] Echo failed:",pe))}if(!Ae.current)return;const ne=Ae.current.move(ge.move);if(ne){if(Le.current!==null){const pe=Date.now()-Le.current;ke.current.push(pe),Le.current=null}if(F){if(!ye.current){const pe=ee+1;O(pe),pe>re&&de(pe)}ye.current=!1}B.current++;try{He.impact({style:Qe.Light}).catch(()=>{})}catch{}h(Ae.current.fen()),S({from:ne.from,to:ne.to});const le=[...Dt.current,ne.san];if(p(le),Dt.current=le,w(null),v([]),qe(null),Ae.current.isCheckmate()){const pe=Ae.current.turn()==="w"?"black_win":"white_win";zt(pe)}else(Ae.current.isDraw()||Ae.current.isStalemate()||Ae.current.isThreefoldRepetition()||Ae.current.isInsufficientMaterial())&&zt("draw")}}else if(ge.isAmbiguous&&ge.candidates.length>1){const ne=Zv(ge.candidates),le=ne?Yv(ge.candidates):[];let pe;if(ne&&le.length===2){const je=le[0].toUpperCase(),Xe=le[1].toUpperCase();pe=`Did you mean ${je} takes ${ge.targetSquare} or ${Xe} takes ${ge.targetSquare}?`}else{const je=Qv(ge.candidates),Xe=ge.piece==="R"?"rook":ge.piece==="N"?"knight":ge.piece==="B"?"bishop":ge.piece==="Q"?"queen":"piece";pe=je.length===2?`Two ${Xe}s can move to ${ge.targetSquare}. The one on ${je[0]} or ${je[1]}?`:`Multiple ${Xe}s can move to ${ge.targetSquare}. Which one?`}un({candidates:ge.candidates,piece:ge.piece,targetSquare:ge.targetSquare,isPawnCapture:ne,pawnFiles:le}),qe(`Clarify: ${ge.candidates.join(" or ")}`),Ve&&At(pe).catch(je=>console.warn("[Voice] Echo failed:",je)),Z.current=setTimeout(async()=>{un(null),qe(null),Ve&&At("Move cancelled").catch(je=>console.warn("[Voice] Echo failed:",je))},1e4)}else Se.current++,r({title:"Didn't understand",description:`Heard: "${Ge}". Try again.`,variant:"destructive"}),_t(ne=>ne+1)}),sn.setOnListeningChange(fo);const W=Ae.current,he=W.turn();if((he==="w"&&N==="white"||he==="b"&&N==="black")&&!Jt&&!ws&&k===null&&!gd.current){const Oe=W.moves();sn.setLegalMoves(Oe),sn.start(),sn.getMuted()&&sn.resumeLoop()}else k!==null&&sn.stop();return()=>{sn.reset(),Zi.clearProtectedLane(),Z.current&&(clearTimeout(Z.current),Z.current=null)}},[cn,u,m,N,Jt,ws,k,Ve,r,zt,lt,qs,Ks,Kp]),d.useEffect(()=>{if(!et||!Ae.current||k!==null)return;const W=Ae.current,he=W.turn();if((he==="w"&&N==="black"||he==="b"&&N==="white")&&u&&!Jt){const Oe=W.history(),Ge=W.fen(),$e=b?NA({from:b.from,to:b.to}):void 0;ya(Ge,et.elo,Oe,$e).then(async st=>{if(st&&Ae.current){const fe=Ae.current.move(st.move);fe&&S({from:fe.from,to:fe.to});const ut=Ae.current.fen();h(ut);const Mn=[...Dt.current,st.move];p(Mn),Dt.current=Mn,Le.current=Date.now();try{He.impact({style:Qe.Medium}).catch(()=>{}),setTimeout(()=>{He.impact({style:Qe.Medium}).catch(()=>{})},100)}catch{}if(Ve){const _n=Ae.current.isCheck(),Jn=Ae.current.isCheckmate(),Nt=st.move.includes("x"),ge=ui(st.move,Nt,_n,Jn);if(Pt.current=ge,zl&&vo.current&&cn)try{await oe.speakAndListen({text:ge})}catch(ne){console.error("[NativeVoice] TTS error:",ne)}else{gd.current=!0;try{await At(ge)}catch(ne){console.error("[Voice] TTS error:",ne)}finally{gd.current=!1}}}if(Ae.current.isCheckmate()){const _n=Ae.current.turn()==="w"?"black_win":"white_win";zt(_n)}else(Ae.current.isDraw()||Ae.current.isStalemate()||Ae.current.isThreefoldRepetition()||Ae.current.isInsufficientMaterial())&&zt("draw")}})}},[m,et,N,u,Jt,k,Ve,cn,ya,zt,b]);const ql=W=>{if(W>=99999)return"";const he=Math.floor(W/60),we=W%60;return`${he}:${we.toString().padStart(2,"0")}`},AN=(W,he)=>{if(!l)return!1;const we=l.get(W);if(!we||we.type!=="p")return!1;const Oe=he[1];return we.color==="w"&&Oe==="8"||we.color==="b"&&Oe==="1"},Hp=async(W,he,we="q")=>{if(l)try{const Oe=l.move({from:W,to:he,promotion:we});if(Oe){if(K.current++,Le.current!==null){const st=Date.now()-Le.current;ke.current.push(st),Le.current=null}if(F){if(!ye.current){const st=ee+1;O(st),st>re&&de(st)}ye.current=!1}const Ge=l.fen();h(Ge),S({from:Oe.from,to:Oe.to});const $e=[...Dt.current,Oe.san];p($e),Dt.current=$e,w(null),v([]),l.isCheckmate()?zt(l.turn()==="w"?"black_win":"white_win"):(l.isDraw()||l.isStalemate()||l.isThreefoldRepetition()||l.isInsufficientMaterial())&&zt("draw")}}catch(Oe){console.error("Invalid move:",Oe)}},LN=d.useCallback(W=>{if(!(!l||k||!(l.turn()==="w"&&N==="white"||l.turn()==="b"&&N==="black")))if(g)if(x.includes(W))AN(g,W)?tn({from:g,to:W}):Hp(g,W);else{const we=l.get(W);if(we&&(we.color==="w"&&N==="white"||we.color==="b"&&N==="black")){w(W);const Oe=l.moves({square:W,verbose:!0});v(Oe.map(Ge=>Ge.to))}else w(null),v([])}else{const we=l.get(W);if(we&&(we.color==="w"&&N==="white"||we.color==="b"&&N==="black")){w(W);const Oe=l.moves({square:W,verbose:!0});v(Oe.map(Ge=>Ge.to))}}},[l,k,N,g,x]),Gp=()=>{H<=0||(se(!0),V.current=Date.now(),ye.current=!0,O(0))},Kl=()=>{if(ie&&H>0&&(xe(W=>W-1),V.current)){const W=Date.now()-V.current;X.current+=W}se(!1),V.current=null};if(Ut)return o.jsx(yA,{game:Ut,open:!0,onClose:()=>{Fl(null),We(!0)},onAnalyze:W=>{J(W),Fl(null),We(!1),Ne(!0)}});if(dt)return o.jsx(gA,{onBack:()=>We(!1),onViewGame:W=>{Fl(W)}});if(L&&Me.length>0)return o.jsx(gx,{moveHistory:Me,playerColor:N,gameResult:k,botElo:St,onClose:()=>{Ne(!1),a(!0)}});if(i)return o.jsxs("div",{className:"h-full w-full flex flex-col items-center relative overflow-hidden bg-white","data-testid":"screen-title",children:[o.jsx("img",{src:_4,alt:"Blindfold Chess",className:"absolute inset-0 w-full h-full object-contain object-center z-0"}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-1 p-4 pt-2 w-full",children:[o.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-black text-center tracking-tight","data-testid":"text-title",children:"Blindfold Chess"}),o.jsx("p",{className:"text-black/70 text-center text-sm md:text-base",children:"Train your visualization and memory"})]}),o.jsx("div",{className:"flex-1"}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 p-4 pb-4 w-full max-w-sm",children:[o.jsxs(Y,{size:"lg",variant:"ghost",className:"w-full text-base py-4 bg-amber-400 hover:bg-amber-500 text-stone-900 border border-amber-500 dark:bg-black dark:hover:bg-black/90 dark:text-white dark:border-black",onClick:()=>s==null?void 0:s(),"data-testid":"button-train-now",children:[o.jsx(hw,{className:"mr-2 h-5 w-5"}),"Train Now"]}),o.jsxs(Y,{size:"lg",variant:"ghost",className:"w-full text-base py-4 bg-amber-400 hover:bg-amber-500 text-stone-900 border border-amber-500 dark:bg-black dark:hover:bg-black/90 dark:text-white dark:border-black",onClick:()=>a(!1),"data-testid":"button-start-now",children:[o.jsx(pv,{className:"mr-2 h-5 w-5"}),"Play Now"]})]})]});if(!u){const W=async()=>{const he=Nu(St),we={id:`elo_${St}`,elo:St,difficulty:`elo_${Math.round(St/200)*200}`,depth:he.depth,randomPercent:he.randomPercent};try{await He.impact({style:Qe.Heavy})}catch{}Xn(!0),setTimeout(()=>{Up(we,en)},200)};return o.jsxs("div",{className:`h-full flex flex-col max-w-lg mx-auto px-4 py-2 transition-opacity duration-200 ${ir?"opacity-0":"opacity-100"}`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>a(!0),"data-testid":"button-setup-back",children:o.jsx(kn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Game Set-up"})]}),o.jsxs(Ze,{className:"flex flex-col",children:[o.jsxs(it,{className:"overflow-y-auto pt-4 pb-2 space-y-3",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Vt,{htmlFor:"blindfold-toggle",children:"Blindfold Challenge"}),o.jsx(Sn,{id:"blindfold-toggle",checked:F,onCheckedChange:q,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-blindfold"})]}),F&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Vt,{children:"Blindfold Difficulty"}),o.jsxs(Sl,{value:G,onValueChange:he=>T(he),children:[o.jsx(ea,{"data-testid":"select-blindfold-difficulty",children:o.jsx(Nl,{})}),o.jsxs(ta,{children:[o.jsx(ts,{value:"easy",children:"Easy (Unlimited Peeks)"}),o.jsx(ts,{value:"medium",children:"Medium (20 Peeks)"}),o.jsx(ts,{value:"hard",children:"Hard (10 Peeks)"}),o.jsx(ts,{value:"expert",children:"Expert (5 Peeks)"}),o.jsx(ts,{value:"master",children:"Master (2 Peeks)"}),o.jsx(ts,{value:"grandmaster",children:"Grandmaster (No Peeks)"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Vt,{children:"Display Mode"}),o.jsxs(Sl,{value:$,onValueChange:he=>{const we=he;Q(we),we==="no_board"&&(ve(!1),Cr(!0),Zo(!0))},children:[o.jsx(ea,{"data-testid":"select-blindfold-display",children:o.jsx(Nl,{})}),o.jsxs(ta,{children:[o.jsx(ts,{value:"empty_board",children:"Empty Board"}),o.jsx(ts,{value:"black_overlay",children:"Black Overlay"}),o.jsx(ts,{value:"no_board",children:"No Board"})]})]})]}),$!=="no_board"&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Vt,{htmlFor:"coordinates-toggle",children:"Show Coordinates (1-8, a-h)"}),o.jsx(Sn,{id:"coordinates-toggle",checked:U,onCheckedChange:ve,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-coordinates"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Vt,{htmlFor:"reconstruction-toggle",className:"text-sm",children:"Board Reconstruction Challenge"}),o.jsx(Sn,{id:"reconstruction-toggle",checked:Re.boardReconstructionEnabled,onCheckedChange:he=>{const we={...Re,boardReconstructionEnabled:he};_e(we),Lh(we)},className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-board-reconstruction"})]}),Re.boardReconstructionEnabled&&o.jsx("p",{className:"text-xs text-muted-foreground",children:"After each game, reconstruct the final position to test your memory."}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ft,{className:"h-4 w-4"}),o.jsx(Vt,{htmlFor:"voice-input",children:"Voice Input"})]}),o.jsx(Sn,{id:"voice-input",checked:cn,onCheckedChange:Cr,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-voice-input"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ed,{className:"h-4 w-4"}),o.jsx(Vt,{htmlFor:"voice-output",children:"Voice Output"})]}),o.jsx(Sn,{id:"voice-output",checked:Ve,onCheckedChange:Zo,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-voice-output"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex flex-col gap-0.5",children:[o.jsx(Vt,{htmlFor:"bot-thinking-toggle",className:"text-sm",children:"Bot Thinking Time"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Human-like delays"})]}),o.jsx(Sn,{id:"bot-thinking-toggle",checked:Re.botThinkingTimeEnabled,onCheckedChange:he=>{const we={...Re,botThinkingTimeEnabled:he};_e(we),Lh(we)},className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-bot-thinking-time"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Vt,{children:"Time Control"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs(Y,{variant:"outline",size:"sm",className:z==="blitz"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>_("blitz"),"data-testid":"button-time-blitz",children:[o.jsx(Ro,{className:"mr-1 h-3 w-3"}),"5 min"]}),o.jsxs(Y,{variant:"outline",size:"sm",className:z==="rapid"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>_("rapid"),"data-testid":"button-time-rapid",children:[o.jsx(Ro,{className:"mr-1 h-3 w-3"}),"15 min"]}),o.jsxs(Y,{variant:"outline",size:"sm",className:z==="classical"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>_("classical"),"data-testid":"button-time-classical",children:[o.jsx(Ro,{className:"mr-1 h-3 w-3"}),"30 min"]}),o.jsxs(Y,{variant:"outline",size:"sm",className:z==="practice"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>_("practice"),"data-testid":"button-time-practice",children:[o.jsx(S2,{className:"mr-1 h-3 w-3"}),"Practice"]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Vt,{children:"Bot Rating"}),o.jsxs("span",{className:"text-sm font-medium text-amber-600 dark:text-amber-400",children:[St," - ",PR(St)]})]}),o.jsx(dN,{value:[St],onValueChange:he=>zn(he[0]),min:400,max:2600,step:50,className:"w-full","data-testid":"slider-bot-elo"}),o.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[o.jsx("span",{children:"400"}),o.jsx("span",{children:"1000"}),o.jsx("span",{children:"1600"}),o.jsx("span",{children:"2200"}),o.jsx("span",{children:"2600"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Vt,{children:"Your Color"}),o.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[o.jsxs(Y,{variant:"outline",size:"sm",className:en==="white"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>ys("white"),"data-testid":"button-color-white",children:[o.jsx("div",{className:"w-4 h-4 rounded-full bg-white border border-gray-400 mr-1"}),"White"]}),o.jsxs(Y,{variant:"outline",size:"sm",className:en==="black"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>ys("black"),"data-testid":"button-color-black",children:[o.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-900 mr-1"}),"Black"]}),o.jsxs(Y,{variant:"outline",size:"sm",className:en==="random"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>ys("random"),"data-testid":"button-color-random",children:[o.jsx(T2,{className:"w-4 h-4 mr-1"}),"Random"]})]})]})]}),o.jsx("div",{className:"p-4 pt-2 border-t",children:o.jsxs(Y,{size:"lg",className:"w-full bg-amber-400 hover:bg-amber-500 text-stone-900 border border-black",onClick:W,"data-testid":"button-start-game",children:[o.jsx(pv,{className:"mr-2 h-5 w-5"}),"Start Game"]})})]})]})}return o.jsxs("div",{className:"h-[100dvh] w-full flex flex-col overflow-hidden animate-in fade-in duration-300",children:[o.jsx(Vp,{}),Ws&&ho&&o.jsx("div",{className:"mb-3",children:o.jsx(z4,{actualFen:ho,playerColor:N,onComplete:TN,onSkip:MN,onContinue:RN,onViewReport:()=>us(!0)})}),o.jsx(K4,{open:Jo&&!L,gameResult:k,playerColor:N,clarityScore:rt.lastClarityScore,responseTimes:Pr,squareInquiries:ti,reconstructionScore:ni,reconstructionVoicePurity:E,reconstructionEnabled:Re.boardReconstructionEnabled,onRematch:()=>{if(et){const W=N==="white"?"black":"white";us(!1),Ne(!1),Vl(),setTimeout(()=>Up(et,W),100)}},onMainMenu:()=>{us(!1),Ne(!1),Vl(),xa()},onAnalyze:()=>{Ne(!0)}}),L&&Me.length>0&&o.jsx(gx,{moveHistory:Me,playerColor:N,gameResult:k,botElo:St,onClose:()=>Ne(!1)}),!Ws&&o.jsxs("main",{className:"absolute inset-0 flex flex-col p-2 md:p-4 max-w-4xl mx-auto w-full overflow-hidden",children:[o.jsx(Ze,{className:`flex-none lg:hidden ${l&&(N==="white"&&l.turn()==="b"||N==="black"&&l.turn()==="w")?"ring-2 ring-amber-400":""}`,children:o.jsx(it,{className:"py-2 px-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${N==="white"?"bg-black":"bg-white border border-gray-400"}`}),o.jsx(hv,{className:"h-4 w-4 text-amber-500"}),o.jsx("span",{className:"font-medium text-sm",children:et?`${et.elo} Elo Bot`:"Bot"}),Jt&&o.jsx("span",{className:`text-xs animate-pulse ${Pn?"text-amber-500 font-medium":"text-primary"}`,children:Pn?"Thinking...":"thinking..."})]}),o.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(N==="white"&&l.turn()==="b"||N==="black"&&l.turn()==="w")?"text-foreground":"text-muted-foreground"}`,children:ql(N==="white"?D:R)})]})})}),o.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-2 min-h-0 overflow-hidden",children:[o.jsxs("div",{className:"flex-1 flex flex-col gap-2 min-h-0 overflow-hidden",children:[o.jsx(Ze,{className:`hidden lg:block flex-none ${l&&(N==="white"&&l.turn()==="b"||N==="black"&&l.turn()==="w")?"ring-2 ring-amber-400":""}`,children:o.jsx(it,{className:"py-2 px-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${N==="white"?"bg-black":"bg-white border border-gray-400"}`}),o.jsx(hv,{className:"h-4 w-4 text-amber-500"}),o.jsx("span",{className:"font-medium text-sm","data-testid":"text-opponent-name",children:et?`${et.elo} Elo Bot`:"Bot"}),Jt&&o.jsx("span",{className:`text-xs animate-pulse ${Pn?"text-amber-500 font-medium":"text-primary"}`,"data-testid":"text-bot-thinking",children:Pn?"Thinking...":"thinking..."})]}),o.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(N==="white"&&l.turn()==="b"||N==="black"&&l.turn()==="w")?"text-foreground":"text-muted-foreground"}`,"data-testid":"text-opponent-time",children:ql(N==="white"?D:R)})]})})}),o.jsx("div",{className:"flex-1 flex items-center justify-center min-h-0 overflow-hidden",children:o.jsx(Ze,{className:`aspect-square max-h-full max-w-full md:max-w-[600px] p-1 md:p-2 ${F&&$==="no_board"&&!ie?"invisible":""}`,children:o.jsxs("div",{className:"relative w-full h-full",children:[o.jsx(f_,{fen:m,orientation:N,showCoordinates:F&&U,highlightedSquares:x,lastMove:b||void 0,onSquareClick:LN,noCard:!0}),Ss!==null&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 z-50","data-testid":"overlay-reconstruction-countdown","aria-live":"polite",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-8xl md:text-9xl font-bold text-amber-400 animate-pulse","data-testid":"text-countdown-number",children:Ss}),o.jsx("div",{className:"text-lg md:text-xl text-white mt-4 font-medium",children:"Memorize the position..."})]})}),F&&!ie&&$==="empty_board"&&o.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-visible",children:o.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((W,he)=>{const we=Math.floor(he/8),Oe=he%8,Ge=(we+Oe)%2===0,$e=N==="white"?["a","b","c","d","e","f","g","h"]:["h","g","f","e","d","c","b","a"],st=N==="white"?["8","7","6","5","4","3","2","1"]:["1","2","3","4","5","6","7","8"],fe=Oe===0,ut=we===7;return o.jsxs("div",{className:`relative ${Ge?"bg-amber-100":"bg-amber-700"}`,children:[U&&fe&&o.jsx("span",{className:`absolute bottom-0.5 left-1 text-xs font-semibold select-none ${Ge?"text-amber-800/70":"text-amber-100/70"}`,children:st[we]}),U&&ut&&o.jsx("span",{className:`absolute bottom-0.5 right-1 text-xs font-semibold select-none ${Ge?"text-amber-800/70":"text-amber-100/70"}`,children:$e[Oe]})]},he)})})}),F&&!ie&&$==="black_overlay"&&o.jsxs("div",{className:"absolute inset-0 bg-black pointer-events-none overflow-visible",children:[o.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 8 8",preserveAspectRatio:"none",children:[Array.from({length:9}).map((W,he)=>o.jsx("line",{x1:"0",y1:he,x2:"8",y2:he,stroke:"white",strokeWidth:"0.02"},`h-${he}`)),Array.from({length:9}).map((W,he)=>o.jsx("line",{x1:he,y1:"0",x2:he,y2:"8",stroke:"white",strokeWidth:"0.02"},`v-${he}`))]}),U&&o.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((W,he)=>{const we=Math.floor(he/8),Oe=he%8,Ge=N==="white"?["a","b","c","d","e","f","g","h"]:["h","g","f","e","d","c","b","a"],$e=N==="white"?["8","7","6","5","4","3","2","1"]:["1","2","3","4","5","6","7","8"],st=Oe===0,fe=we===7;return o.jsxs("div",{className:"relative",children:[st&&o.jsx("span",{className:"absolute bottom-0.5 left-1 text-xs font-semibold select-none text-white/70",children:$e[we]}),fe&&o.jsx("span",{className:"absolute bottom-0.5 right-1 text-xs font-semibold select-none text-white/70",children:Ge[Oe]})]},he)})})]})]})})}),o.jsx(Ze,{className:`flex-none hidden lg:flex ${l&&(N==="white"&&l.turn()==="w"||N==="black"&&l.turn()==="b")?"ring-2 ring-amber-400":""}`,children:o.jsx(it,{className:"py-2 px-4 w-full",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${N==="white"?"bg-white border border-gray-400":"bg-black"}`}),o.jsx("span",{className:"font-medium text-sm","data-testid":"text-player-name",children:"You"})]}),o.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(N==="white"&&l.turn()==="w"||N==="black"&&l.turn()==="b")?"text-foreground":"text-muted-foreground"}`,"data-testid":"text-player-time",children:ql(N==="white"?R:D)})]})})})]}),o.jsxs("div",{className:"flex flex-col gap-2 lg:w-48 flex-none",children:[F&&G!=="grandmaster"&&o.jsxs(Y,{variant:ie?"default":"outline",className:`w-full ${ie?"bg-amber-400 hover:bg-amber-500 text-black":""}`,onMouseDown:Gp,onMouseUp:Kl,onMouseLeave:Kl,onTouchStart:Gp,onTouchEnd:Kl,onTouchCancel:Kl,disabled:H<=0,"data-testid":"button-peek",children:[o.jsx(Ju,{className:"mr-2 h-4 w-4"}),ie?"Peeking...":"Hold to Peek"]}),F&&o.jsx("div",{className:"text-center text-sm text-muted-foreground","data-testid":"text-peeks-remaining",children:isFinite(H)?`${H} peeks left`:"Unlimited peeks"}),F&&o.jsxs("div",{className:"text-center text-sm","data-testid":"text-peek-free-streak",children:[o.jsx("span",{className:"text-muted-foreground",children:"Streak: "}),o.jsx("span",{className:"font-semibold text-amber-500",children:ee}),re>0&&o.jsxs("span",{className:"text-muted-foreground/70 text-xs ml-1",children:["(best: ",re,")"]})]}),cn&&o.jsx("div",{className:"flex items-center justify-center gap-2 text-sm",children:lt?o.jsxs(o.Fragment,{children:[o.jsx(Ft,{className:"h-4 w-4 text-amber-500 animate-pulse"}),o.jsx("span",{className:"text-amber-500",children:"Which piece?"})]}):va?o.jsxs(o.Fragment,{children:[o.jsx(Ft,{className:"h-4 w-4 text-primary animate-pulse"}),o.jsx("span",{className:"text-primary",children:"Listening..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(er,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{className:"text-muted-foreground",children:"Voice paused"})]})}),M&&o.jsx("div",{className:`text-xs text-center ${lt?"text-amber-500 font-medium":"text-muted-foreground"}`,children:lt?M:`Heard: "${M}"`}),o.jsx(Ze,{className:`lg:hidden ${l&&(N==="white"&&l.turn()==="w"||N==="black"&&l.turn()==="b")?"ring-2 ring-amber-400":""}`,children:o.jsx(it,{className:"py-2 px-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${N==="white"?"bg-white border border-gray-400":"bg-black"}`}),o.jsx("span",{className:"font-medium text-sm",children:"You"})]}),o.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(N==="white"&&l.turn()==="w"||N==="black"&&l.turn()==="b")?"text-foreground":"text-muted-foreground"}`,children:ql(N==="white"?R:D)})]})})}),o.jsx(Ze,{className:"flex-none",children:o.jsx(it,{className:"p-2",children:o.jsx(Fp,{className:"h-16 lg:h-48",children:o.jsx("div",{className:"text-xs font-mono space-y-1",children:y.map((W,he)=>o.jsxs("span",{className:he%2===0?"font-semibold":"",children:[he%2===0&&o.jsxs("span",{className:"text-muted-foreground",children:[Math.floor(he/2)+1,". "]}),W," "]},he))})})})}),!k&&o.jsxs(Y,{variant:"outline",size:"sm",className:"w-full text-red-600 border-red-300 hover:bg-red-50",onClick:()=>Tn(!0),"data-testid":"button-resign",children:[o.jsx(Qo,{className:"mr-2 h-4 w-4"}),"Resign"]})]})]})]}),o.jsx(m_,{open:!!ws,color:N,onSelect:W=>{ws&&(Hp(ws.from,ws.to,W),tn(null))}}),o.jsx(sr,{open:Ks,onOpenChange:Tn,children:o.jsxs(Ls,{children:[o.jsxs(Is,{children:[o.jsx(Os,{children:"Resign Game?"}),o.jsx(Ds,{children:"Are you sure you want to resign? This will count as a loss."})]}),o.jsxs($s,{children:[o.jsx(Fs,{"data-testid":"button-resign-cancel",children:"Cancel"}),o.jsx(Bs,{className:"bg-red-600 hover:bg-red-700",onClick:()=>{zt(N==="white"?"black_win":"white_win"),Tn(!1)},"data-testid":"button-resign-confirm",children:"Resign"})]})]})}),o.jsx(sr,{open:Ee,onOpenChange:ar,children:o.jsxs(Ls,{children:[o.jsxs(Is,{children:[o.jsx(Os,{children:"Resume Game?"}),o.jsxs(Ds,{children:["You have an unfinished game",bs?` (${bs.playerColor==="white"?"White":"Black"} vs ${bs.botElo} Elo)`:"",". Would you like to continue?"]})]}),o.jsxs($s,{children:[o.jsx(Fs,{"data-testid":"button-resume-cancel",onClick:()=>{Sc(),Er(null),ar(!1)},children:"New Game"}),o.jsx(Bs,{onClick:()=>{bs&&(_N(bs),Er(null)),ar(!1)},"data-testid":"button-resume-confirm",children:"Resume"})]})]})})]})}const EA=["a","b","c","d","e","f","g","h"],PA=["1","2","3","4","5","6","7","8"];function Mu(e){const t=e.charCodeAt(0)-97;return(parseInt(e[1])-1)*8+t}function Gh(e){const t=EA[e%8],n=PA[Math.floor(e/8)];return`${t}${n}`}const TA=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];function RA(e,t){const n=Mu(e),s=Mu(t),r=[{index:n,path:[n]}],i=new Set([n]);for(;r.length>0;){const{index:a,path:l}=r.shift();if(a===s)return l.map(Gh);const c=Math.floor(a/8),u=a%8;for(const[f,m]of TA){const h=c+f,y=u+m;if(h>=0&&h<8&&y>=0&&y<8){const p=h*8+y;i.has(p)||(i.add(p),r.push({index:p,path:[...l,p]}))}}}return null}function Sf(e=3,t=4){let n="",s="",r=null;for(;!r||r.length-1<e||r.length-1>t;){const i=Math.floor(Math.random()*64),a=Math.floor(Math.random()*64);n=Gh(i),s=Gh(a),n!==s&&(r=RA(n,s))}return{start:n,end:s,minPath:r}}function MA(e,t){if(!e||!t)return!1;const n=Mu(e),s=Mu(t),r=Math.floor(n/8),i=n%8,a=Math.floor(s/8),l=s%8,c=Math.abs(r-a),u=Math.abs(i-l);return c===2&&u===1||c===1&&u===2}const _A=["a","b","c","d","e","f","g","h"],AA=["1","2","3","4","5","6","7","8"];function Ia(){return _A[Math.floor(Math.random()*8)]+AA[Math.floor(Math.random()*8)]}function LA(e,t){const n=e.charCodeAt(0),s=parseInt(e[1]),r=t.charCodeAt(0),i=parseInt(t[1]);return Math.abs(n-r)<=1&&Math.abs(s-i)<=1}function IA(e){const t=new Dn;let n=!1,s=0;for(;!n&&s<100;){t.clear(),s++;const i=Ia();let a=Ia();for(;i===a;)a=Ia();if(LA(i,a))continue;t.put({type:"k",color:"w"},i),t.put({type:"k",color:"b"},a);const l=[i,a],c=m=>{let h=Ia();for(;l.includes(h);)h=Ia();t.put({type:m,color:"w"},h),l.push(h)};e==="KQ_vs_K"?c("q"):e==="KR_vs_K"&&c("r");const u=t.fen(),f=new Dn(u);f.isCheckmate()||f.isStalemate()||f.isDraw()||f.inCheck()||(n=!0)}const r={KQ_vs_K:"King & Queen vs King",KR_vs_K:"King & Rook vs King"};return{fen:t.fen(),type:e,description:r[e]}}function $A(){return[{value:"KQ_vs_K",label:"King & Queen vs King"},{value:"KR_vs_K",label:"King & Rook vs King"}]}function OA(e){return e.length}const xx=[{id:"scholars_mate",white:"Training",black:"Puzzle",description:"Scholar's Mate Defense",pgnMoves:["e4","e5","Bc4","Nc6","Qh5","g6","Qf3","Nf6","Qb3","Nd4"],solution:"Qxf7#"},{id:"legal_trap",white:"Training",black:"Puzzle",description:"Legal's Mate Trap",pgnMoves:["e4","e5","Nf3","d6","Bc4","Bg4","Nc3","g6","Nxe5","Bxd1","Bxf7+","Ke7"],solution:"Nd5#"},{id:"blackburne_shilling",white:"Training",black:"Puzzle",description:"Blackburne Shilling Gambit",pgnMoves:["e4","e5","Nf3","Nc6","Bc4","Nd4","Nxe5","Qg5","Nxf7","Qxg2","Rf1","Qxe4+","Be2","Nf3+"],solution:"Kf1"},{id:"fried_liver",white:"Training",black:"Puzzle",description:"Fried Liver Attack",pgnMoves:["e4","e5","Nf3","Nc6","Bc4","Nf6","Ng5","d5","exd5","Nxd5","Nxf7","Kxf7","Qf3+","Ke6","Nc3","Nb4"],solution:"Qe4+"},{id:"opera_game",white:"Paul Morphy",black:"Duke of Brunswick",description:"The Opera Game - A brilliant attack",pgnMoves:["e4","e5","Nf3","d6","d4","Bg4","dxe5","Bxf3","Qxf3","dxe5","Bc4","Nf6","Qb3","Qe7","Nc3","c6","Bg5","b5","Nxb5","cxb5","Bxb5+","Nbd7","O-O-O","Rd8","Rxd7","Rxd7","Rd1","Qe6","Bxd7+","Nxd7"],solution:"Qb8+"},{id:"short_trap",white:"Training",black:"Puzzle",description:"A quick opening trap",pgnMoves:["e4","e5","Nf3","Nc6","Bc4","Bc5","c3","Nf6","d4","exd4","cxd4","Bb4+","Nc3","Nxe4","O-O","Nxc3","bxc3","Bxc3","Ba3","Bxa1","Re1+","Ne7"],solution:"Rxe7+"},{id:"immortal_game",white:"Adolf Anderssen",black:"Lionel Kieseritzky",description:"The Immortal Game",pgnMoves:["e4","e5","f4","exf4","Bc4","Qh4+","Kf1","b5","Bxb5","Nf6","Nf3","Qh6","d3","Nh5","Nh4","Qg5","Nf5","c6","g4","Nf6","Rg1","cxb5","h4","Qg6","h5","Qg5","Qf3","Ng8","Bxf4","Qf6","Nc3","Bc5","Nd5","Qxb2","Bd6","Bxg1","e5","Qxa1+","Ke2","Na6","Nxg7+","Kd8","Qf6+","Nxf6","Be7+"],solution:"Kc7"},{id:"evergreen_game",white:"Adolf Anderssen",black:"Jean Dufresne",description:"The Evergreen Game",pgnMoves:["e4","e5","Nf3","Nc6","Bc4","Bc5","b4","Bxb4","c3","Ba5","d4","exd4","O-O","d3","Qb3","Qf6","e5","Qg6","Re1","Nge7","Ba3","b5","Qxb5","Rb8","Qa4","Bb6","Nbd2","Bb7","Ne4","Qf5","Bxd3","Qh5","Nf6+","gxf6","exf6","Rg8","Rad1","Qxf3","Rxe7+","Nxe7","Qxd7+","Kxd7","Bf5+","Ke8","Bd7+","Kf8"],solution:"Bxe7#"},{id:"game_of_century",white:"Donald Byrne",black:"Bobby Fischer",description:"The Game of the Century",pgnMoves:["Nf3","Nf6","c4","g6","Nc3","Bg7","d4","O-O","Bf4","d5","Qb3","dxc4","Qxc4","c6","e4","Nbd7","Rd1","Nb6","Qc5","Bg4","Bg5","Na4","Qa3","Nxc3","bxc3","Nxe4","Bxe7","Qb6","Bc4","Nxc3","Bc5","Rfe8+","Kf1","Be6","Bxb6","Bxc4+","Kg1","Ne2+","Kf1","Nxd4+","Kg1","Ne2+","Kf1","Nc3+","Kg1","axb6","Qb4","Ra4","Qxb6","Nxd1","h3","Rxa2","Kh2","Nxf2","Re1","Rxe1","Qd8+","Bf8","Nxe1","Bd5","Nf3","Ne4","Qb8","b5","h4","h5","Ne5","Kg7"],solution:"Kg1"},{id:"kasparov_topalov",white:"Garry Kasparov",black:"Veselin Topalov",description:"Kasparov's Immortal",pgnMoves:["e4","d6","d4","Nf6","Nc3","g6","Be3","Bg7","Qd2","c6","f3","b5","Nge2","Nbd7","Bh6","Bxh6","Qxh6","Bb7","a3","e5","O-O-O","Qe7","Kb1","a6","Nc1","O-O-O","Nb3","exd4","Rxd4","c5","Rd1","Nb6","g3","Kb8","Na5","Ba8","Bh3","d5","Qf4+","Ka7","Rhe1","d4","Nd5","Nbxd5","exd5","Qd6","Rxd4","cxd4","Re7+","Kb6","Qxd4+","Kxa5","b4+","Ka4","Qc3","Qxd5","Ra7","Bb7","Rxb7","Qc4","Qxf6","Kxa3","Qxa6+","Kxb4","c3+","Kxc3","Qa1+","Kd2","Qb2+","Kd1","Bf1","Rd2","Rd7","Rxd7","Bxc4","bxc4","Qxh8","Rd3"],solution:"Qa8"},{id:"deep_blue_game6",white:"Deep Blue",black:"Garry Kasparov",description:"Deep Blue vs Kasparov Game 6",pgnMoves:["e4","c6","d4","d5","Nc3","dxe4","Nxe4","Nd7","Ng5","Ngf6","Bd3","e6","N1f3","h6","Nxe6","Qe7","O-O","fxe6","Bg6+","Kd8","Bf4","b5","a4","Bb7","Re1","Nd5","Bg3","Kc8","axb5","cxb5","Qd3","Bc6","Bf5","exf5","Rxe7","Bxe7"],solution:"c4"},{id:"tal_larsen",white:"Mikhail Tal",black:"Bent Larsen",description:"Tal's Brilliant Exchange Sacrifice",pgnMoves:["e4","c5","Nf3","Nc6","d4","cxd4","Nxd4","e6","Nc3","d6","Be3","Nf6","f4","Be7","Qf3","O-O","O-O-O","Qc7","Nb3","a6","g4","b5","g5","Nd7","Bd3","Nb6","Qh3","b4","Na4","Nxa4","f5","e5","f6","gxf6","gxf6","Bxf6","Bxh7+","Kxh7","Qh5+","Kg7","Rdg1+","Kf8","Bh6+","Bg7","Rxg7","Qb6","Nd4","Qxd4","Rxf7+","Kxf7","Qh7+","Ke8","Re1","Qf6","Qxc2","Ra7","Qg6+","Rf7","Qg8+","Rf8","Bg7","Qf1","Rxf1","Rxg8"],solution:"Qe6+"}];function yx(){return[{value:"10-20",label:"10-20 moves",minMoves:10,maxMoves:20},{value:"20-30",label:"20-30 moves",minMoves:20,maxMoves:30},{value:"30-40",label:"30-40 moves",minMoves:30,maxMoves:40},{value:"40-50",label:"40-50 moves",minMoves:40,maxMoves:50},{value:"50-60",label:"50-60 moves",minMoves:50,maxMoves:60},{value:"60-70",label:"60-70 moves",minMoves:60,maxMoves:70}]}function DA(e,t){const n=xx.filter(i=>{const a=OA(i.pgnMoves);return a>=e&&a<t});if(n.length>0)return n[Math.floor(Math.random()*n.length)];const r=[...xx].sort((i,a)=>a.pgnMoves.length-i.pgnMoves.length)[0];return{...r,description:`${r.description} (Best available for ${e}-${t} moves)`}}const Un=jn.isNativePlatform();async function mt(e){if(Un)try{await oe.speakAndListen({text:e})}catch(t){console.error("[Training] speakAndListen error:",t)}else await At(e)}const ms=["a","b","c","d","e","f","g","h"],ra=["1","2","3","4","5","6","7","8"];function Qh(e,t){return`${e==="a"?"ay":e} ${t}`}function kl(e,t){return(e+t)%2===0}function Eo(){const e=Math.floor(Math.random()*8),t=Math.floor(Math.random()*8);return{file:ms[e],rank:ra[t],fileIndex:e,rankIndex:t}}function Nn(e){const t=Math.floor(e/1e3),n=Math.floor(e%1e3/100);return`${t}.${n}s`}function BA({onBack:e,onStateChange:t,returnToMenuRef:n}){const[s,r]=d.useState("menu"),[i,a]=d.useState(null),[l,c]=d.useState("ready");d.useEffect(()=>{ju().then(a)},[s]),d.useEffect(()=>{s==="menu"?t==null||t("menu"):t==null||t(l)},[s,l,t]),d.useEffect(()=>(n&&(n.current=()=>{r("menu"),c("ready")}),()=>{n&&(n.current=null)}),[n]);const u=async(f,m,h=0,y)=>{await UR(f,m,h,y),a(await ju()),window.dispatchEvent(new CustomEvent("trainingStatsUpdated"))};return s==="color_blitz"?o.jsx(FA,{onBack:()=>r("menu"),onComplete:(f,m)=>u("color_blitz",f,m),stats:i,onGameStateChange:c}):s==="coordinate_sniper"?o.jsx(zA,{onBack:()=>r("menu"),onComplete:(f,m)=>u("coordinate_sniper",f,m),stats:i,onGameStateChange:c}):s==="voice_move_master"?o.jsx(VA,{onBack:()=>r("menu"),onComplete:(f,m)=>u("voice_move_master",f,m),stats:i,onGameStateChange:c}):s==="knights_path"?o.jsx(XA,{onBack:()=>r("menu"),onComplete:(f,m)=>u("knights_path",f,0,m),stats:i,onGameStateChange:c}):s==="endgame_drills"?o.jsx(ZA,{onBack:()=>r("menu"),onComplete:(f,m)=>u("endgame_drills",f,0,m),stats:i,onGameStateChange:c}):s==="blindfold_marathon"?o.jsx(JA,{onBack:()=>r("menu"),onComplete:(f,m,h)=>u("blindfold_marathon",f,m,h),stats:i,onGameStateChange:c}):o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-training-back",children:o.jsx(kn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Training Gym"})]}),o.jsxs("div",{className:"flex flex-col gap-2 flex-1",children:[o.jsx(Ze,{className:"hover-elevate cursor-pointer flex-1",onClick:()=>r("voice_move_master"),"data-testid":"card-voice-move-master",children:o.jsx(xt,{className:"h-full py-2 px-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-purple-500/20",children:o.jsx(ed,{className:"h-5 w-5 text-purple-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(yt,{className:"text-base",children:"Voice Move Master"}),i!==null&&i.voiceMoveMasterBest!==null&&o.jsx(ct,{variant:"secondary",className:"text-xs",children:i.voiceMoveMasterBest})]}),o.jsx(Ct,{className:"text-xs mt-0.5",children:"Announce chess moves by voice in 60 seconds"})]})]})})}),o.jsx(Ze,{className:"hover-elevate cursor-pointer flex-1",onClick:()=>r("color_blitz"),"data-testid":"card-color-blitz",children:o.jsx(xt,{className:"h-full py-2 px-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:o.jsx(Zm,{className:"h-5 w-5 text-amber-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(yt,{className:"text-base",children:"Color Blitz"}),i!==null&&i.colorBlitzBest!==null&&o.jsx(ct,{variant:"secondary",className:"text-xs",children:i.colorBlitzBest})]}),o.jsx(Ct,{className:"text-xs mt-0.5",children:"Name square colors as fast as you can"})]})]})})}),o.jsx(Ze,{className:"hover-elevate cursor-pointer flex-1",onClick:()=>r("coordinate_sniper"),"data-testid":"card-coordinate-sniper",children:o.jsx(xt,{className:"h-full py-2 px-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:o.jsx(Co,{className:"h-5 w-5 text-blue-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(yt,{className:"text-base",children:"Coordinate Sniper"}),i!==null&&i.coordinateSniperBest!==null&&o.jsx(ct,{variant:"secondary",className:"text-xs",children:Nn(i.coordinateSniperBest)})]}),o.jsx(Ct,{className:"text-xs mt-0.5",children:"Find 10 squares as fast as possible"})]})]})})}),o.jsx(Ze,{className:"hover-elevate cursor-pointer flex-1",onClick:()=>r("knights_path"),"data-testid":"card-knights-path",children:o.jsx(xt,{className:"h-full py-2 px-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-green-500/20",children:o.jsx(Zu,{className:"h-5 w-5 text-green-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(yt,{className:"text-base",children:"Knight's Path"}),i!==null&&i.knightsPathBest!==null&&o.jsx(ct,{variant:"secondary",className:"text-xs",children:Nn(i.knightsPathBest)})]}),o.jsx(Ct,{className:"text-xs mt-0.5",children:"Navigate the knight to the target square"})]})]})})}),o.jsx(Ze,{className:"hover-elevate cursor-pointer flex-1",onClick:()=>r("endgame_drills"),"data-testid":"card-endgame-drills",children:o.jsx(xt,{className:"h-full py-2 px-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-orange-500/20",children:o.jsx(Ll,{className:"h-5 w-5 text-orange-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(yt,{className:"text-base",children:"Endgame Drills"}),i!==null&&i.endgameDrillsBest!==null&&o.jsx(ct,{variant:"secondary",className:"text-xs",children:Nn(i.endgameDrillsBest)})]}),o.jsx(Ct,{className:"text-xs mt-0.5",children:"Checkmate with K+Q or K+R vs King blindfolded"})]})]})})}),o.jsx(Ze,{className:"hover-elevate cursor-pointer flex-1",onClick:()=>r("blindfold_marathon"),"data-testid":"card-blindfold-marathon",children:o.jsx(xt,{className:"h-full py-2 px-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-red-500/20",children:o.jsx(vl,{className:"h-5 w-5 text-red-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(yt,{className:"text-base",children:"Blindfold Marathon"}),i!==null&&i.blindfoldMarathonBest!==null&&o.jsx(ct,{variant:"secondary",className:"text-xs",children:Nn(i.blindfoldMarathonBest)})]}),o.jsx(Ct,{className:"text-xs mt-0.5",children:"Visualize famous games and find the winning move"})]})]})})})]})]})}function FA({onBack:e,onComplete:t,stats:n,onGameStateChange:s}){const[r,i]=d.useState("ready"),[a,l]=d.useState(()=>Eo()),[c,u]=d.useState(0),[f,m]=d.useState(0),[h,y]=d.useState(0),[p,g]=d.useState(60),[w,x]=d.useState(!1),[v,b]=d.useState(!1),[S,N]=d.useState(!1),[j,k]=d.useState(!1),[C,R]=d.useState("challenge"),P=d.useRef(null),D=n!==null&&n.colorBlitzBest!==null&&c>n.colorBlitzBest,A=d.useRef(null),z=d.useRef(!1),_=d.useRef(null),F=d.useRef(!1),q=async()=>{if(F.current){try{await oe.stopSession()}catch{}F.current=!1}if(_.current){try{await _.current.remove()}catch{}_.current=null}N(!1)},G=()=>{P.current&&clearInterval(P.current),q(),e()},T=async(U=!1)=>{k(U),i("playing"),u(0),m(0),y(0),g(60),z.current=!1;const ve=Eo();l(ve),setTimeout(async()=>{w&&(await mt(Qh(ve.file,ve.rank)),z.current=!0)},300)},$=()=>{P.current&&clearInterval(P.current),q(),e()};d.useEffect(()=>{if(!Un||!w||r!=="playing")return;let U=!1;return(async()=>{try{if(!await Yo()||U){console.warn("[ColorBlitz] Voice not ready or cancelled");return}if(console.log("[ColorBlitz] Starting voice session..."),_.current&&await _.current.remove(),U||(_.current=await oe.addListener("onSpeechResult",xe=>{var X,ee;const ie=xe.text.toLowerCase();console.log("[ColorBlitz] Voice:",ie),eb(ie);const se=["light","white","lie","lye","lite","lied","liked","right","bright","lyte","lit","like","life"],V=["dark","black","bark","duck","dock","doc","dork","dog","dart"];se.some(O=>ie.includes(O))?(X=A.current)==null||X.call(A,"light"):V.some(O=>ie.includes(O))&&((ee=A.current)==null||ee.call(A,"dark")),oe.startListening().catch(()=>{})}),U))return;await oe.startSession(),Z1(!0),await oe.startListening(),J1(!0),F.current=!0,N(!0),console.log("[ColorBlitz] Native voice session started")}catch(H){console.error("[ColorBlitz] Native voice setup failed:",H),bu(String(H))}})(),()=>{U=!0,q()}},[w,r]),d.useEffect(()=>(r==="playing"&&!j&&(P.current=setInterval(()=>{g(U=>U<=1?(i("finished"),0):U-1)},1e3)),()=>{P.current&&clearInterval(P.current)}),[r,j]),d.useEffect(()=>{r==="finished"&&!j&&t(c,h)},[r,c,h,t,j]),d.useEffect(()=>{s==null||s(r)},[r,s]);const Q=d.useCallback(U=>{if(r!=="playing")return;if((U==="white"||U==="light"?"light":"dark")==="dark"===kl(a.fileIndex,a.rankIndex)){u(ie=>ie+1),m(ie=>{const se=ie+1;return y(V=>Math.max(V,se)),He.notification({type:sa.Success}).catch(()=>{}),se});const xe=Eo();l(xe),w&&setTimeout(async()=>{await mt(Qh(xe.file,xe.rank))},300)}else m(0),He.impact({style:Qe.Heavy}).catch(()=>{}),setTimeout(()=>{He.impact({style:Qe.Heavy}).catch(()=>{})},100),w&&setTimeout(async()=>{await mt("Wrong")},300)},[r,a,w]);return d.useEffect(()=>{A.current=Q},[Q]),r==="ready"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:G,"data-testid":"button-colorblitz-back",children:o.jsx(kn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Color Blitz"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(Zm,{className:"h-12 w-12 text-amber-500 mx-auto"}),o.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"})]}),o.jsx(ha,{value:C,onValueChange:U=>R(U),className:"w-full max-w-xs",children:o.jsxs(Xo,{className:"grid w-full grid-cols-2",children:[o.jsx(In,{value:"challenge","data-testid":"tab-colorblitz-challenge",children:"1 Minute Challenge"}),o.jsx(In,{value:"practice","data-testid":"tab-colorblitz-practice",children:"Practice"})]})}),o.jsx("p",{className:"text-muted-foreground text-center",children:C==="challenge"?"Name as many square colors as you can in 60 seconds!":"Practice at your own pace with unlimited time."}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Sn,{id:"voice-mode",checked:w,onCheckedChange:x,"data-testid":"switch-voice-mode"}),o.jsxs(Vt,{htmlFor:"voice-mode",className:"flex items-center gap-2",children:[w?o.jsx(Ft,{className:"h-4 w-4"}):o.jsx(er,{className:"h-4 w-4"}),"Voice Mode"]})]}),C==="challenge"&&n!==null&&n.colorBlitzBest!==null&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",o.jsx("span",{className:"font-semibold text-amber-500",children:n.colorBlitzBest})," correct"]}),o.jsx(Y,{size:"lg",onClick:()=>T(C==="practice"),"data-testid":"button-start-colorblitz",children:"Start"})]})]}):r==="finished"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:G,"data-testid":"button-colorblitz-back-finished",children:o.jsx(kn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Color Blitz"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsx(wn,{className:`h-16 w-16 ${D?"text-amber-500":"text-muted-foreground"}`}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h2",{className:"text-4xl font-bold",children:c}),o.jsx("p",{className:"text-lg text-muted-foreground",children:"squares correct"}),D&&o.jsx(ct,{className:"bg-amber-500 text-white",children:"New Personal Best!"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Y,{variant:"outline",onClick:G,"data-testid":"button-colorblitz-menu",children:"Menu"}),o.jsx(Y,{onClick:()=>T(!1),"data-testid":"button-colorblitz-retry",children:"Play Again"})]})]})]}):o.jsxs(o.Fragment,{children:[Un&&o.jsx(Vp,{}),o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[j?o.jsx(ct,{variant:"outline",children:"Practice"}):o.jsxs("span",{className:"text-2xl font-bold tabular-nums",children:[p,"s"]}),w&&S&&o.jsx(Ft,{className:"h-4 w-4 text-red-500 animate-pulse"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-lg font-semibold",children:c}),f>=5&&o.jsxs(ct,{variant:"outline",className:"text-amber-500 border-amber-500",children:[f," streak"]})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[o.jsx("div",{className:"text-center",children:o.jsxs("p",{className:"text-6xl font-bold font-mono tracking-wider",children:[a.file,a.rank]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full",children:[o.jsx(Y,{size:"lg",className:"h-20 text-xl bg-amber-100 hover:bg-amber-200 text-amber-900 dark:bg-amber-100 dark:hover:bg-amber-200",onClick:()=>Q("light"),"data-testid":"button-answer-light",children:"Light"}),o.jsx(Y,{size:"lg",className:"h-20 text-xl bg-amber-900 hover:bg-amber-800 text-amber-100",onClick:()=>Q("dark"),"data-testid":"button-answer-dark",children:"Dark"})]}),o.jsxs(Y,{variant:"outline",onClick:()=>b(!0),className:"mt-4","data-testid":"button-colorblitz-resign",children:[o.jsx(Qo,{className:"h-4 w-4 mr-2"}),"Resign"]})]})]}),o.jsx(sr,{open:v,onOpenChange:b,children:o.jsxs(Ls,{children:[o.jsxs(Is,{children:[o.jsx(Os,{children:"Quit Game?"}),o.jsxs(Ds,{children:["Your current score of ",c," will not be saved."]})]}),o.jsxs($s,{children:[o.jsx(Fs,{"data-testid":"button-colorblitz-resign-cancel",children:"Continue"}),o.jsx(Bs,{onClick:$,"data-testid":"button-colorblitz-resign-confirm",children:"Quit"})]})]})})]})}function zA({onBack:e,onComplete:t,stats:n,onGameStateChange:s}){const[r,i]=d.useState("ready"),[a,l]=d.useState(()=>Eo()),[c,u]=d.useState(0),[f,m]=d.useState(0),[h,y]=d.useState(0),[p,g]=d.useState(0),[w,x]=d.useState(0),[v,b]=d.useState(null),[S,N]=d.useState(null),[j,k]=d.useState(!1),[C,R]=d.useState(!1),[P,D]=d.useState("challenge"),[A,z]=d.useState(!1),_=10,F=n!==null&&n.coordinateSniperBest!==null&&w<n.coordinateSniperBest&&w>0,q=()=>{e()},G=($=!1)=>{R($),i("playing"),u(0),m(0),y(0),g(Date.now()),x(0),b(null),N(null);const Q=Eo();l(Q);const U=Q.file==="a"?"ay":Q.file;mt(`Find ${U} ${Q.rank}`)};d.useEffect(()=>{let $=null;return r==="playing"&&($=setInterval(()=>{x(Date.now()-p)},100)),()=>{$&&clearInterval($)}},[r,p]),d.useEffect(()=>{s==null||s(r)},[r,s]);const T=d.useCallback(($,Q)=>{if(r!=="playing")return;const U=`${a.file}${a.rank}`,ve=`${$}${Q}`;if(ve===U){He.impact({style:Qe.Light}).catch(()=>{}),b({square:ve,correct:!0});const H=c+1;u(H);const xe=f+1;m(xe);const ie=Math.max(h,xe);if(y(ie),H>=_&&!C){const se=Date.now()-p;x(se),i("finished"),t(se,ie),mt("Complete!")}else if(H>=_&&C){u(0),m(0),y(0),setTimeout(()=>{b(null);const se=Eo();l(se);const V=se.file==="a"?"ay":se.file;mt(`Great! Find ${V} ${se.rank}`)},200);return}else setTimeout(()=>{b(null);const se=Eo();l(se);const V=se.file==="a"?"ay":se.file;mt(`Find ${V} ${se.rank}`)},200)}else He.impact({style:Qe.Heavy}).catch(()=>{}),He.impact({style:Qe.Heavy}).catch(()=>{}),b({square:ve,correct:!1}),N(U),m(0),mt(`No, that's ${Qh($,Q)}`),setTimeout(()=>{b(null),N(null)},1e3)},[r,a,c,f,h,p,t]);return r==="ready"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-sniper-back",children:o.jsx(kn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Coordinate Sniper"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(Co,{className:"h-12 w-12 text-blue-500 mx-auto"}),o.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"})]}),o.jsx(ha,{value:P,onValueChange:$=>D($),className:"w-full max-w-xs",children:o.jsxs(Xo,{className:"grid w-full grid-cols-2",children:[o.jsx(In,{value:"challenge","data-testid":"tab-sniper-challenge",children:"10 Square Race"}),o.jsx(In,{value:"practice","data-testid":"tab-sniper-practice",children:"Practice"})]})}),o.jsx("p",{className:"text-muted-foreground text-center",children:P==="challenge"?"Find 10 squares as fast as you can!":"Practice finding squares with no time pressure."}),o.jsxs("div",{className:"flex items-center gap-3 justify-center",children:[o.jsx(Vt,{htmlFor:"board-flip",className:"text-sm text-muted-foreground",children:"Play as Black"}),o.jsx(Sn,{id:"board-flip",checked:A,onCheckedChange:z,"data-testid":"switch-board-flip"})]}),P==="challenge"&&n!==null&&n.coordinateSniperBest!==null&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",o.jsx("span",{className:"font-semibold text-blue-500",children:Nn(n.coordinateSniperBest)})]}),o.jsx(Y,{size:"lg",onClick:()=>G(P==="practice"),"data-testid":"button-start-sniper",children:"Start"})]})]}):r==="finished"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-sniper-back-finished",children:o.jsx(kn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Coordinate Sniper"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsx(wn,{className:`h-16 w-16 ${F?"text-blue-500":"text-muted-foreground"}`}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h2",{className:"text-4xl font-bold",children:Nn(w)}),o.jsx("p",{className:"text-lg text-muted-foreground",children:"to find 10 squares"}),F&&o.jsx(ct,{className:"bg-blue-500 text-white",children:"New Personal Best!"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Y,{variant:"outline",onClick:e,"data-testid":"button-sniper-menu",children:"Menu"}),o.jsx(Y,{onClick:()=>G(!1),"data-testid":"button-sniper-retry",children:"Play Again"})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("p",{className:"text-lg font-semibold",children:["Find: ",o.jsxs("span",{className:"text-2xl font-mono",children:[a.file,a.rank]})]}),o.jsx("div",{className:"flex items-center gap-2",children:C?o.jsx(ct,{variant:"outline",children:"Practice"}):o.jsx("span",{className:"text-lg font-mono tabular-nums",children:Nn(w)})})]}),!C&&o.jsx(Jr,{value:c/_*100,className:"mb-2"}),o.jsx("p",{className:"text-sm text-muted-foreground text-center mb-2",children:C?`${c} found`:`${c}/${_} found`}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[o.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:(A?["1","2","3","4","5","6","7","8"]:["8","7","6","5","4","3","2","1"]).map(($,Q)=>(A?[...ms].reverse():ms).map((U,ve)=>{const H=`${U}${$}`,xe=ms.indexOf(U),ie=ra.indexOf($),se=kl(xe,ie),V=(v==null?void 0:v.square)===H,X=S===H;let ee=se?"bg-amber-700":"bg-amber-100";return V?ee=v.correct?"bg-green-500":"bg-red-500":X&&(ee="bg-green-500"),o.jsx("button",{className:`aspect-square ${ee} transition-colors duration-100`,onClick:()=>T(U,$),"data-testid":`square-${H}`},H)}))}),o.jsxs(Y,{variant:"outline",onClick:()=>k(!0),className:"mt-4","data-testid":"button-sniper-resign",children:[o.jsx(Qo,{className:"h-4 w-4 mr-2"}),"Resign"]})]})]}),o.jsx(sr,{open:j,onOpenChange:k,children:o.jsxs(Ls,{children:[o.jsxs(Is,{children:[o.jsx(Os,{children:"Quit Game?"}),o.jsxs(Ds,{children:["Your progress (",c,"/",_," found) will not be saved."]})]}),o.jsxs($s,{children:[o.jsx(Fs,{"data-testid":"button-sniper-resign-cancel",children:"Continue"}),o.jsx(Bs,{onClick:q,"data-testid":"button-sniper-resign-confirm",children:"Quit"})]})]})})]})}const Kc={p:"pawn",n:"knight",b:"bishop",r:"rook",q:"queen",k:"king"};function Yh(){const e=new Dn,t=5+Math.floor(Math.random()*11);for(let r=0;r<t;r++){const i=e.moves({verbose:!0});if(i.length===0)break;const a=i[Math.floor(Math.random()*i.length)];e.move(a)}const n=e.moves({verbose:!0});if(n.length===0)return Yh();const s=n[Math.floor(Math.random()*n.length)];return{chess:e,move:{from:s.from,to:s.to,san:s.san,piece:s.piece,captured:s.captured}}}function VA({onBack:e,onComplete:t,stats:n,onGameStateChange:s}){const[r,i]=d.useState("ready"),[a,l]=d.useState(null),[c,u]=d.useState(0),[f,m]=d.useState(0),[h,y]=d.useState(0),[p,g]=d.useState(60),[w,x]=d.useState(!1),[v,b]=d.useState(!1),[S,N]=d.useState(!1),[j,k]=d.useState(null),[C,R]=d.useState(""),[P,D]=d.useState(!1),[A,z]=d.useState("challenge"),_=d.useRef(null),F=d.useRef(null),q=n!==null&&n.voiceMoveMasterBest!==null&&c>n.voiceMoveMasterBest,G=d.useRef(null),T=d.useRef(!1),$=d.useRef(null),Q=async()=>{if(T.current){try{await oe.stopSession()}catch{}T.current=!1}if(G.current){try{await G.current.remove()}catch{}G.current=null}x(!1)},U=()=>{_.current&&clearInterval(_.current),F.current&&clearTimeout(F.current),Q(),e()},ve=async(X=!1)=>{D(X),i("playing"),u(0),m(0),y(0),g(60),k(null);const ee=Yh();l(ee),setTimeout(async()=>{await mt("Say the move.")},300)},H=()=>{_.current&&clearInterval(_.current),F.current&&clearTimeout(F.current),Q(),e()},xe=d.useCallback(X=>{var ye,Le;if(!a||r!=="playing")return;const ee=X.toLowerCase().trim();if(console.log("[VoiceMoveMaster] Processing:",ee),ee.includes("resign")||ee.includes("quit")){N(!0),mt("Are you sure you want to resign? Say yes or no.");return}if(S){if(ee.includes("yes")){b(!0),N(!1);return}else if(ee.includes("no")){N(!1),mt("Okay, continue playing.");return}}if(ee.includes("repeat")||ee.includes("again")||ee.includes("say again")){mt("Look at the highlighted squares on the board.");return}if(ee.includes("time")||ee.includes("clock")){mt(`${p} seconds remaining`);return}if(ee.includes("material")){const ke=qA(a.chess);mt(ke);return}const O=ee.match(/what'?s?\s+on\s+([a-h])\s*([1-8])/i);if(O){const ke=`${O[1]}${O[2]}`,ae=a.chess.get(ke);if(ae){const Se=ae.color==="w"?"White":"Black",Te=Kc[ae.type];mt(`${Se} ${Te}`)}else mt("Empty");return}const re=ee.match(/where\s+is\s+my\s+(\w+)/i);if(re){const ke=re[1].toLowerCase(),ae=(ye=Object.entries(Kc).find(([,Se])=>Se===ke))==null?void 0:ye[0];if(ae){const Se=a.chess.turn(),Te=a.chess.board(),De=[];for(let Ie=0;Ie<8;Ie++)for(let B=0;B<8;B++){const K=Te[Ie][B];K&&K.type===ae&&K.color===Se&&De.push(`${ms[B]}${ra[7-Ie]}`)}De.length>0?mt(`Your ${ke} is on ${De.slice(0,3).join(", ")}`):mt(`You don't have a ${ke}`)}return}if(ee.includes("eval")||ee.includes("evaluate")){const ke=KA(a.chess);ke>0?mt(`White is up ${ke} points`):ke<0?mt(`Black is up ${Math.abs(ke)} points`):mt("Position is equal");return}const de=ee.match(/legal\s+moves?\s+for\s+(\w+)/i);if(de){const ke=de[1].toLowerCase(),ae=(Le=Object.entries(Kc).find(([,Se])=>Se===ke))==null?void 0:Le[0];if(ae){const Se=a.chess.moves({verbose:!0}).filter(Te=>Te.piece===ae).slice(0,4).map(Te=>Te.san);Se.length>0?mt(`${ke} can play ${Se.join(", ")}`):mt(`No legal moves for ${ke}`)}return}if(YA(ee,a.move)){F.current&&(clearTimeout(F.current),F.current=null),He.notification({type:sa.Success}).catch(()=>{}),k({text:"Correct!",correct:!0});const ke=c+1,ae=f+1;u(ke),m(ae);const Se=Math.max(h,ae);y(Se),mt("Correct!"),setTimeout(()=>{k(null);const Te=Yh();l(Te)},500)}else m(0),F.current&&clearTimeout(F.current),F.current=setTimeout(()=>{He.notification({type:sa.Error}).catch(()=>{}),k({text:"Try again",correct:!1}),setTimeout(()=>k(null),1e3)},1e3)},[a,r,c,f,h,p,S]);if(d.useEffect(()=>{$.current=xe},[xe]),d.useEffect(()=>{if(!Un||r!=="playing")return;let X=!1;return(async()=>{try{if(!await Yo()||X){console.warn("[VoiceMoveMaster] Voice not ready or cancelled");return}if(console.log("[VoiceMoveMaster] Starting voice session..."),G.current&&await G.current.remove(),X||(G.current=await oe.addListener("onSpeechResult",re=>{var ye;const de=re.text;eb(de),de.length>=2&&((ye=$.current)==null||ye.call($,de)),oe.startListening().catch(()=>{})}),X))return;await oe.startSession(),Z1(!0),await oe.startListening(),J1(!0),T.current=!0,x(!0),console.log("[VoiceMoveMaster] Native voice session started")}catch(O){console.error("[VoiceMoveMaster] Native voice setup failed:",O),bu(String(O))}})(),()=>{X=!0,Q()}},[r]),d.useEffect(()=>(r==="playing"&&!P&&(_.current=setInterval(()=>{g(X=>X<=1?(i("finished"),0):X-1)},1e3)),()=>{_.current&&clearInterval(_.current)}),[r,P]),d.useEffect(()=>{r==="finished"&&!P&&t(c,h)},[r,c,h,t,P]),d.useEffect(()=>{s==null||s(r)},[r,s]),r==="ready")return o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:U,"data-testid":"button-voicemaster-back",children:o.jsx(kn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Voice Move Master"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(ed,{className:"h-12 w-12 text-purple-500 mx-auto"}),o.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"})]}),o.jsx(ha,{value:A,onValueChange:X=>z(X),className:"w-full max-w-xs",children:o.jsxs(Xo,{className:"grid w-full grid-cols-2",children:[o.jsx(In,{value:"challenge","data-testid":"tab-voicemaster-challenge",children:"1 Minute Challenge"}),o.jsx(In,{value:"practice","data-testid":"tab-voicemaster-practice",children:"Practice"})]})}),o.jsx("p",{className:"text-muted-foreground text-center",children:A==="challenge"?"Say the highlighted move within 60 seconds!":"Practice announcing moves at your own pace."}),A==="challenge"&&n!==null&&n.voiceMoveMasterBest!==null&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",o.jsxs("span",{className:"font-semibold text-purple-500",children:[n.voiceMoveMasterBest," moves"]})]}),o.jsx(Y,{size:"lg",onClick:()=>ve(A==="practice"),"data-testid":"button-start-voicemaster",children:"Start"})]})]});if(r==="finished")return o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:U,"data-testid":"button-voicemaster-back-finished",children:o.jsx(kn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Voice Move Master"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsx(wn,{className:`h-16 w-16 ${q?"text-purple-500":"text-muted-foreground"}`}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h2",{className:"text-4xl font-bold",children:c}),o.jsx("p",{className:"text-lg text-muted-foreground",children:"moves announced correctly"}),h>1&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Best streak: ",h]}),q&&o.jsx(ct,{className:"bg-purple-500 text-white",children:"New Personal Best!"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Y,{variant:"outline",onClick:U,"data-testid":"button-voicemaster-menu",children:"Menu"}),o.jsx(Y,{onClick:()=>ve(!1),"data-testid":"button-voicemaster-retry",children:"Play Again"})]})]})]});const ie=(a==null?void 0:a.chess.board())||[],se=(a==null?void 0:a.move.from)||"",V=(a==null?void 0:a.move.to)||"";return o.jsxs(o.Fragment,{children:[Un&&o.jsx(Vp,{}),o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[P?o.jsx(ct,{variant:"outline",children:"Practice"}):o.jsx("span",{className:"text-2xl font-mono font-bold tabular-nums",children:p}),w&&o.jsx(Ft,{className:"h-5 w-5 text-red-500 animate-pulse"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-lg font-semibold",children:c}),f>=3&&o.jsxs(ct,{variant:"outline",className:"text-purple-500 border-purple-500",children:[f," streak"]})]})]}),j&&o.jsx("div",{className:`text-center py-2 mb-2 rounded ${j.correct?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:o.jsx("span",{className:"font-semibold",children:j.text})}),o.jsx("div",{className:"flex items-center justify-center mb-4",children:o.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:["8","7","6","5","4","3","2","1"].map((X,ee)=>ms.map((O,re)=>{var De;const de=`${O}${X}`,ye=(re+ee)%2===1,Le=(De=ie[ee])==null?void 0:De[re],ke=de===se,ae=de===V;let Se=ye?"bg-amber-700":"bg-amber-100";ke?Se="bg-yellow-400":ae&&(Se="bg-red-500");const Te={wk:"",wq:"",wr:"",wb:"",wn:"",wp:"",bk:"",bq:"",br:"",bb:"",bn:"",bp:""};return o.jsx("div",{className:`aspect-square ${Se} flex items-center justify-center text-2xl`,children:Le&&Te[`${Le.color}${Le.type}`]},de)}))})}),o.jsx("div",{className:"text-center mb-4",children:o.jsxs("p",{className:"text-lg",children:[Un?"Say: ":"Type: ",o.jsx("span",{className:"font-bold text-purple-500",children:a==null?void 0:a.move.san})]})}),!Un&&o.jsxs("form",{className:"flex gap-2 mb-4",onSubmit:X=>{X.preventDefault(),C.trim()&&(xe(C),R(""))},children:[o.jsx("input",{type:"text",value:C,onChange:X=>R(X.target.value),placeholder:"Type move here...",className:"flex-1 px-3 py-2 border rounded-md bg-background",autoFocus:!0,"data-testid":"input-voicemaster-text"}),o.jsx(Y,{type:"submit","data-testid":"button-voicemaster-submit",children:"Submit"})]}),o.jsxs(Y,{variant:"outline",onClick:()=>b(!0),className:"mx-auto mb-4","data-testid":"button-voicemaster-resign",children:[o.jsx(Qo,{className:"h-4 w-4 mr-2"}),"Resign"]}),o.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(g2,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium",children:"Chess Notation"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs text-muted-foreground",children:[o.jsxs("span",{children:[o.jsx("strong",{children:"e4"})," = pawn to e4"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"R"})," = Rook"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"N"})," = Knight"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"B"})," = Bishop"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"Q"})," = Queen"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"K"})," = King"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"Bb2"})," = Bishop to b2"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"Nxc5"})," = Knight takes c5"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"0-0"})," = Kingside castle"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"0-0-0"})," = Queenside castle"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"+"})," = Check"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"#"})," = Checkmate"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"=Q"})," = Promote to Queen"]}),o.jsxs("span",{children:[o.jsx("strong",{children:"e.p."})," = En passant"]}),o.jsxs("span",{className:"col-span-2",children:[o.jsx("strong",{children:"Rac1"})," = When 2 rooks can go to c1, specify which (a-file)"]})]})]})]}),o.jsx(sr,{open:v,onOpenChange:b,children:o.jsxs(Ls,{children:[o.jsxs(Is,{children:[o.jsx(Os,{children:"Quit Game?"}),o.jsxs(Ds,{children:["Your current score of ",c," will not be saved."]})]}),o.jsxs($s,{children:[o.jsx(Fs,{"data-testid":"button-voicemaster-resign-cancel",children:"Continue"}),o.jsx(Bs,{onClick:H,"data-testid":"button-voicemaster-resign-confirm",children:"Quit"})]})]})})]})}function qA(e){const t=e.board();let n=0,s=0;const r={p:1,n:3,b:3,r:5,q:9,k:0};for(const a of t)for(const l of a)if(l){const c=r[l.type];l.color==="w"?n+=c:s+=c}const i=n-s;return i>0?`White is up ${i} point${i!==1?"s":""}`:i<0?`Black is up ${Math.abs(i)} point${Math.abs(i)!==1?"s":""}`:"Material is equal"}function KA(e){const t=e.board();let n=0;const s={p:1,n:3,b:3,r:5,q:9,k:0};for(const r of t)for(const i of r)if(i){const a=s[i.type];n+=i.color==="w"?a:-a}return n}const WA=["to","takes","captures","moves","x","move"],UA={one:"1",won:"1",first:"1",two:"2",too:"2",second:"2",three:"3",free:"3",tree:"3",third:"3",four:"4",fore:"4",forth:"4",fourth:"4",five:"5",fifth:"5",six:"6",sixth:"6",sicks:"6",seven:"7",seventh:"7",eight:"8",ate:"8",eighth:"8"},HA={night:"knight",nite:"knight",horse:"knight",rock:"rook",castle:"rook",brook:"rook",bish:"bishop",bishup:"bishop",pond:"pawn"},GA={ay:"a",aye:"a",eh:"a",alpha:"a",alfa:"a",apple:"a",able:"a",bee:"b",be:"b",bravo:"b",boy:"b",baker:"b",cee:"c",see:"c",sea:"c",charlie:"c",cat:"c",dee:"d",delta:"d",dog:"d",david:"d",eee:"e",ee:"e",echo:"e",easy:"e",edward:"e",ef:"f",eff:"f",foxtrot:"f",fox:"f",frank:"f",if:"f",of:"f",gee:"g",jee:"g",golf:"g",george:"g",aitch:"h",ach:"h",hotel:"h",henry:"h"};function QA(e){let t=e.toLowerCase();t=t.replace(/\bbefore\b/g,"b 4"),t=t.replace(/\bsci\s*fi\b/g,"c 5"),t=t.replace(/\bscifi\b/g,"c 5"),t=t.replace(/\bquincy\b/g,"queen c");for(const[n,s]of Object.entries(GA))t=t.replace(new RegExp(`\\b${n}\\b`,"g"),s);t=t.replace(/\bhe\s+([1-8])\b/g,"e $1"),t=t.replace(/\bhe\s+(one|two|three|four|five|six|seven|eight|won|too|free|fore|for|fifth|sixth|seventh|eighth)\b/gi,"e $1"),t=t.replace(/\bthe\s+([1-8])\b/g,"d $1"),t=t.replace(/\bthe\s+(one|two|three|four|five|six|seven|eight)\b/gi,"d $1"),t=t.replace(/\b([a-h])\s+for\b/g,"$1 4");for(const[n,s]of Object.entries(UA))t=t.replace(new RegExp(`\\b${n}\\b`,"g"),s);for(const[n,s]of Object.entries(HA))t=t.replace(new RegExp(`\\b${n}\\b`,"g"),s);return t}function YA(e,t){const n=QA(e);console.log("[matchesMove] Input:",e," Normalized:",n," Target:",t.san);let s=n.replace(/[^a-z0-9\s]/g,"");const i=s.split(/\s+/).filter(w=>!WA.includes(w)),a=i.join(" "),l=s.replace(/\s+/g,"").match(/^([a-h])([1-8])$/);if(l&&t.piece==="p"){const w=l[1]+l[2];if(t.to===w)return!0}const c=a.replace(/\s+/g,"").match(/^([a-h])([1-8])$/);if(c&&t.piece==="p"){const w=c[1]+c[2];if(t.to===w)return!0}const u=t.san.toLowerCase().replace(/[+#x]/g,"");if(a.replace(/\s+/g,"").includes(u))return!0;const f=["knight","night","bishop","rook","queen","king","pawn"],m=Kc[t.piece],h=i.some(w=>m==="pawn"&&!f.some(x=>x!=="pawn"&&a.includes(x))||a.includes(m)||m==="knight"&&a.includes("night")),y=t.to[0],p=t.to[1],g=a.includes(t.to)||a.includes(y)&&a.includes(p);return!!(h&&g)}function XA({onBack:e,onComplete:t,stats:n,onGameStateChange:s}){const[r,i]=d.useState("ready"),[a,l]=d.useState(()=>Sf(3,4)),[c,u]=d.useState(""),[f,m]=d.useState([]),[h,y]=d.useState(0),[p,g]=d.useState(0),[w,x]=d.useState(0),[v,b]=d.useState(!1),[S,N]=d.useState(!1),[j,k]=d.useState("challenge"),[C,R]=d.useState(null),[P,D]=d.useState(!1),[A,z]=d.useState(!1),[_,F]=d.useState(!1),q=d.useRef(null),G=d.useRef(null),T=d.useRef(!1),$=5,Q=(n==null?void 0:n.knightsPathBest)!==null&&p>0&&p<((n==null?void 0:n.knightsPathBest)||1/0);d.useEffect(()=>{s==null||s(r)},[r,s]),d.useEffect(()=>{let ie=null;return r==="playing"&&(ie=setInterval(()=>{g(Date.now()-h)},100)),()=>{ie&&clearInterval(ie)}},[r,h]);const U=d.useCallback(async()=>{T.current=!1;try{await oe.stopSession()}catch{}if(q.current){try{await q.current.remove()}catch{}q.current=null}F(!1)},[]);d.useEffect(()=>()=>{U()},[U]);const ve=d.useCallback(ie=>{const se=ie.toLowerCase().replace(/[^a-z0-9]/g,""),V={alpha:"a",alfa:"a",bravo:"b",charlie:"c",delta:"d",echo:"e",foxtrot:"f",golf:"g",hotel:"h",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8"};let X=ie.toLowerCase();for(const[O,re]of Object.entries(V))X=X.replace(new RegExp(O,"g"),re);X=X.replace(/[^a-h1-8]/g,"");const ee=X.match(/([a-h])([1-8])/);if(ee)return`${ee[1]}${ee[2]}`;if(se.length>=2){const O=se.match(/[a-h]/),re=se.match(/[1-8]/);if(O&&re)return`${O[0]}${re[0]}`}return null},[]);d.useEffect(()=>{if(!Un||!A||r!=="playing"){Un&&(r!=="playing"||!A)&&U();return}let ie=!1;return(async()=>{try{if(await Yo(),ie)return;q.current=await oe.addListener("onSpeechResult",V=>{var ee,O;if(!T.current)return;const X=((ee=V.text)==null?void 0:ee.toLowerCase().trim())||"";if(X){const re=ve(X);if(re&&re.length===2){const de=re[0],ye=re[1];(O=G.current)==null||O.call(G,de,ye)}T.current&&oe.startListening().catch(()=>{})}}),T.current=!0,await oe.startSession(),await oe.startListening(),F(!0)}catch(V){console.error("[KnightsPath] Voice setup failed:",V)}})(),()=>{ie=!0,U()}},[r,A,U,ve]);const H=(ie=!1)=>{N(ie);const se=Sf(3,4);l(se),u(se.start),m([se.start]),x(0),y(Date.now()),g(0),i("playing");const V=se.start[0]==="a"?"ay":se.start[0],X=se.end[0]==="a"?"ay":se.end[0];mt(`Knight on ${V} ${se.start[1]}. Get to ${X} ${se.end[1]}`)},xe=d.useCallback((ie,se)=>{if(r!=="playing")return;const V=`${ie}${se}`;if(!MA(c,V)){He.impact({style:Qe.Heavy}).catch(()=>{}),R({square:V,correct:!1}),mt("Invalid knight move"),setTimeout(()=>R(null),500);return}if(He.impact({style:Qe.Light}).catch(()=>{}),R({square:V,correct:!0}),u(V),m(X=>[...X,V]),V===a.end){const X=w+1;if(x(X),X>=$&&!S){const ee=Date.now()-h;g(ee),i("finished"),t(ee,A?"audio":void 0),mt("Complete!")}else{const ee=Sf(3,4);setTimeout(()=>{l(ee),u(ee.start),m([ee.start]),R(null);const O=ee.start[0]==="a"?"ay":ee.start[0],re=ee.end[0]==="a"?"ay":ee.end[0];mt(`Good! Knight on ${O} ${ee.start[1]}. Get to ${re} ${ee.end[1]}`)},300)}}else setTimeout(()=>R(null),200)},[r,c,a,w,S,h,t]);return d.useEffect(()=>{G.current=xe},[xe]),r==="ready"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-knights-path-back",children:o.jsx(kn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Knight's Path"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(Zu,{className:"h-12 w-12 text-green-500 mx-auto"}),o.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"})]}),o.jsx(ha,{value:j,onValueChange:ie=>k(ie),className:"w-full max-w-xs",children:o.jsxs(Xo,{className:"grid w-full grid-cols-2",children:[o.jsx(In,{value:"challenge","data-testid":"tab-knights-challenge",children:"5 Path Race"}),o.jsx(In,{value:"practice","data-testid":"tab-knights-practice",children:"Practice"})]})}),o.jsx("p",{className:"text-muted-foreground text-center",children:j==="challenge"?"Complete 5 knight paths as fast as you can!":"Practice knight movement with no time pressure."}),o.jsxs("div",{className:"flex items-center gap-3 w-full max-w-xs",children:[o.jsx(Sn,{id:"hide-knight",checked:P,onCheckedChange:D,"data-testid":"switch-hide-knight"}),o.jsxs(Vt,{htmlFor:"hide-knight",className:"flex items-center gap-2",children:[P?o.jsx(x2,{className:"h-4 w-4"}):o.jsx(Ju,{className:"h-4 w-4"}),"Hide knight (blindfold mode)"]})]}),o.jsxs("div",{className:"flex items-center gap-3 w-full max-w-xs",children:[o.jsx(Sn,{id:"audio-input",checked:A,onCheckedChange:z,"data-testid":"switch-audio-input-knights"}),o.jsxs(Vt,{htmlFor:"audio-input",className:"flex items-center gap-2",children:[A?o.jsx(Ft,{className:"h-4 w-4"}):o.jsx(er,{className:"h-4 w-4"}),"Voice input (say coordinates)"]})]}),j==="challenge"&&n&&n.knightsPathBest!==null&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",o.jsx("span",{className:"font-semibold text-green-500",children:Nn(n.knightsPathBest)})]}),o.jsx(Y,{size:"lg",onClick:()=>H(j==="practice"),"data-testid":"button-start-knights",children:"Start"})]})]}):r==="finished"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-knights-back-finished",children:o.jsx(kn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Knight's Path"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsx(wn,{className:`h-16 w-16 ${Q?"text-green-500":"text-muted-foreground"}`}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h2",{className:"text-4xl font-bold",children:Nn(p)}),o.jsx("p",{className:"text-lg text-muted-foreground",children:"to complete 5 knight paths"}),Q&&o.jsx(ct,{className:"bg-green-500 text-white",children:"New Personal Best!"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Y,{variant:"outline",onClick:e,"data-testid":"button-knights-menu",children:"Menu"}),o.jsx(Y,{onClick:()=>H(!1),"data-testid":"button-knights-retry",children:"Play Again"})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("p",{className:"text-lg font-semibold",children:["Get to: ",o.jsx("span",{className:"text-2xl font-mono",children:a.end})]}),o.jsx("div",{className:"flex items-center gap-2",children:S?o.jsx(ct,{variant:"outline",children:"Practice"}):o.jsx("span",{className:"text-lg font-mono tabular-nums",children:Nn(p)})})]}),!S&&o.jsx(Jr,{value:w/$*100,className:"mb-2"}),o.jsx("p",{className:"text-sm text-muted-foreground text-center mb-2",children:S?`${w} paths completed`:`${w}/${$} paths`}),A&&_&&o.jsxs("div",{className:"flex items-center gap-2 text-green-500 mb-2",children:[o.jsx(Ft,{className:"h-4 w-4 animate-pulse"}),o.jsx("span",{className:"text-sm",children:"Listening..."})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[o.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:["8","7","6","5","4","3","2","1"].map(ie=>ms.map(se=>{const V=`${se}${ie}`,X=ms.indexOf(se),ee=ra.indexOf(ie),O=kl(X,ee),re=V===c,de=V===a.end,ye=(C==null?void 0:C.square)===V,Le=f.includes(V),ke=V===a.start;let ae=O?"bg-amber-700":"bg-amber-100";return ye?ae=C.correct?"bg-green-500":"bg-red-500":de?ae="bg-blue-400":ke?ae="bg-yellow-400":Le&&!re&&(ae=O?"bg-green-700":"bg-green-300"),o.jsx("button",{className:`aspect-square ${ae} transition-colors duration-100 flex items-center justify-center`,onClick:()=>xe(se,ie),"data-testid":`square-${V}`,children:re&&!P&&o.jsx("img",{src:"/pieces/bN.svg",alt:"Knight",className:"w-4/5 h-4/5"})},V)}))}),o.jsxs(Y,{variant:"outline",onClick:()=>b(!0),className:"mt-4","data-testid":"button-knights-resign",children:[o.jsx(Qo,{className:"h-4 w-4 mr-2"}),"Resign"]})]})]}),o.jsx(sr,{open:v,onOpenChange:b,children:o.jsxs(Ls,{children:[o.jsxs(Is,{children:[o.jsx(Os,{children:"Quit Game?"}),o.jsxs(Ds,{children:["Your progress (",w,"/",$," paths) will not be saved."]})]}),o.jsxs($s,{children:[o.jsx(Fs,{"data-testid":"button-knights-resign-cancel",children:"Continue"}),o.jsx(Bs,{onClick:e,"data-testid":"button-knights-resign-confirm",children:"Quit"})]})]})})]})}const Nf={easy:{maxPeeks:Number.POSITIVE_INFINITY,label:"Easy (Unlimited Peeks)"},medium:{maxPeeks:20,label:"Medium (20 Peeks)"},hard:{maxPeeks:10,label:"Hard (10 Peeks)"},expert:{maxPeeks:5,label:"Expert (5 Peeks)"},master:{maxPeeks:2,label:"Master (2 Peeks)"},grandmaster:{maxPeeks:0,label:"Grandmaster (No Peeks)"}};function ZA({onBack:e,onComplete:t,stats:n,onGameStateChange:s}){const[r,i]=d.useState("ready"),[a,l]=d.useState("KQ_vs_K"),[c,u]=d.useState("easy"),[f,m]=d.useState(Number.POSITIVE_INFINITY),[h,y]=d.useState(!1),[p,g]=d.useState(null),[w,x]=d.useState(0),[v,b]=d.useState(0),[S,N]=d.useState(0),[j,k]=d.useState(!1),[C,R]=d.useState(null),[P,D]=d.useState([]),[A,z]=d.useState(!0),[_,F]=d.useState(!0),[q,G]=d.useState(!1),[T,$]=d.useState(!1),[Q,U]=d.useState([]),ve=d.useRef(null),H=d.useRef(null),xe=d.useRef(!1),ie=d.useRef(null),se=d.useRef(null),V=(n==null?void 0:n.endgameDrillsBest)!==null&&v>0&&v<((n==null?void 0:n.endgameDrillsBest)||1/0),X=()=>{f<=0||y(!0)},ee=()=>{h&&f>0&&m(ae=>ae-1),y(!1)};d.useEffect(()=>{r==="memorizing"||r==="playing"?s==null||s("playing"):s==null||s(r)},[r,s]),d.useEffect(()=>{let ae=null;return r==="playing"&&(ae=setInterval(()=>{b(Date.now()-w)},100)),()=>{ae&&clearInterval(ae)}},[r,w]);const O=d.useCallback(async()=>{xe.current=!1;try{await oe.stopSession()}catch{}if(ve.current){try{await ve.current.remove()}catch{}ve.current=null}$(!1)},[]);d.useEffect(()=>()=>{O()},[O]);const re=d.useCallback(ae=>{const Se=ae.toLowerCase(),Te={alpha:"a",alfa:"a",bravo:"b",charlie:"c",delta:"d",echo:"e",foxtrot:"f",golf:"g",hotel:"h",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8"};let De=Se;for(const[B,K]of Object.entries(Te))De=De.replace(new RegExp(B,"g"),K);De=De.replace(/[^a-h1-8]/g,"");const Ie=De.match(/([a-h])([1-8])/g);return Ie&&Ie.length>=2?{from:Ie[0],to:Ie[1]}:Ie&&Ie.length===1?{from:"",to:Ie[0]}:null},[]);d.useEffect(()=>{if(!Un||!q||r!=="playing"){Un&&(r!=="playing"||!q)&&O();return}let ae=!1;return(async()=>{try{if(await Yo(),ae)return;ve.current=await oe.addListener("onSpeechResult",Te=>{var Ie,B,K,me;if(!xe.current)return;const De=((Ie=Te.text)==null?void 0:Ie.toLowerCase().trim())||"";if(De){const ce=re(De);if(ce&&ce.to)if(ce.from&&ce.from.length===2)(B=H.current)==null||B.call(H,ce.from[0],ce.from[1]),setTimeout(()=>{var ue;(ue=H.current)==null||ue.call(H,ce.to[0],ce.to[1])},100);else if(ie.current)(K=H.current)==null||K.call(H,ce.to[0],ce.to[1]);else{const ue=se.current;if(ue){const Fe=ue.board().flat().filter(Re=>Re&&Re.color==="w");for(const Re of Fe){if(!Re)continue;if(ue.moves({square:Re.square,verbose:!0}).find(Mt=>Mt.to===ce.to)){(me=H.current)==null||me.call(H,Re.square[0],Re.square[1]),setTimeout(()=>{var Mt;(Mt=H.current)==null||Mt.call(H,ce.to[0],ce.to[1])},100);break}}}}xe.current&&oe.startListening().catch(()=>{})}}),xe.current=!0,await oe.startSession(),await oe.startListening(),$(!0)}catch(Te){console.error("[EndgameDrills] Voice setup failed:",Te)}})(),()=>{ae=!0,O()}},[r,q,O,re]);const de=()=>{const ae=IA(a),Se=new Dn(ae.fen);g(Se),N(0),b(0),R(null),D([]),z(!0),y(!1),m(Nf[c].maxPeeks),U([]),i("memorizing")},ye=()=>{z(!1),x(Date.now()),i("playing")},Le=d.useCallback((ae,Se)=>{if(r!=="playing"||!p)return;const Te=`${ae}${Se}`;if(C){const De=p.moves({square:C,verbose:!0}).find(Ie=>Ie.to===Te);if(De){if(p.move(De),N(Ie=>Ie+1),U(Ie=>[...Ie,De.san]),He.impact({style:Qe.Light}).catch(()=>{}),p.isCheckmate()){const Ie=Date.now()-w;b(Ie),i("finished"),t(Ie,a==="KQ_vs_K"?"kq_vs_k":a==="KR_vs_K"?"kr_vs_k":void 0)}else if(!p.isGameOver()){const Ie=p.moves({verbose:!0});if(Ie.length>0){const B=Ie[Math.floor(Math.random()*Ie.length)];setTimeout(async()=>{p.move(B),U(K=>[...K,B.san]),_&&(q&&Un?(await mt(B.san),await new Promise(K=>setTimeout(K,100))):await At(B.san).catch(()=>{})),g(new Dn(p.fen()))},300)}}R(null),D([]),g(new Dn(p.fen()))}else{const Ie=p.get(Te);if(Ie&&Ie.color==="w"){R(Te);const B=p.moves({square:Te,verbose:!0});D(B.map(K=>K.to))}else R(null),D([])}}else{const De=p.get(Te);if(De&&De.color==="w"){R(Te);const Ie=p.moves({square:Te,verbose:!0});D(Ie.map(B=>B.to))}}},[r,p,C,w,t,_,q]);d.useEffect(()=>{H.current=Le},[Le]),d.useEffect(()=>{ie.current=C},[C]),d.useEffect(()=>{se.current=p},[p]);const ke=ae=>{if(!ae)return null;const Se={k:"K",q:"Q",r:"R",b:"B",n:"N",p:"P"},Te=`${ae.color}${Se[ae.type]}`;return o.jsx("img",{src:`/pieces/${Te}.svg`,alt:Te,className:"w-4/5 h-4/5"})};return r==="ready"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-endgame-back",children:o.jsx(kn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Endgame Drills"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(Ll,{className:"h-12 w-12 text-orange-500 mx-auto"}),o.jsx("h2",{className:"text-2xl font-bold",children:"Select Endgame"})]}),o.jsxs(Sl,{value:a,onValueChange:ae=>l(ae),children:[o.jsx(ea,{className:"w-full max-w-xs","data-testid":"select-endgame-type",children:o.jsx(Nl,{})}),o.jsx(ta,{children:$A().map(ae=>o.jsx(ts,{value:ae.value,children:ae.label},ae.value))})]}),o.jsxs(Sl,{value:c,onValueChange:ae=>u(ae),children:[o.jsx(ea,{className:"w-full max-w-xs","data-testid":"select-peek-difficulty",children:o.jsx(Nl,{})}),o.jsx(ta,{children:Object.keys(Nf).map(ae=>o.jsx(ts,{value:ae,children:Nf[ae].label},ae))})]}),o.jsxs("div",{className:"flex items-center gap-3 w-full max-w-xs",children:[o.jsx(Sn,{id:"audio-enabled",checked:_,onCheckedChange:F,"data-testid":"switch-audio-enabled"}),o.jsxs(Vt,{htmlFor:"audio-enabled",className:"flex items-center gap-2",children:[_?o.jsx(ed,{className:"h-4 w-4"}):o.jsx(er,{className:"h-4 w-4"}),"Announce opponent moves"]})]}),o.jsxs("div",{className:"flex items-center gap-3 w-full max-w-xs",children:[o.jsx(Sn,{id:"audio-input-endgame",checked:q,onCheckedChange:G,"data-testid":"switch-audio-input-endgame"}),o.jsxs(Vt,{htmlFor:"audio-input-endgame",className:"flex items-center gap-2",children:[q?o.jsx(Ft,{className:"h-4 w-4"}):o.jsx(er,{className:"h-4 w-4"}),"Voice input (say moves)"]})]}),o.jsx("p",{className:"text-muted-foreground text-center",children:"Checkmate the lone king as fast as possible!"}),n&&n.endgameDrillsBest!==null&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",o.jsx("span",{className:"font-semibold text-orange-500",children:Nn(n.endgameDrillsBest)})]}),o.jsx(Y,{size:"lg",onClick:de,"data-testid":"button-start-endgame",children:"Start"})]})]}):r==="memorizing"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-endgame-back-memorizing",children:o.jsx(kn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Memorize the Position"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[o.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:["8","7","6","5","4","3","2","1"].map(ae=>ms.map(Se=>{const Te=`${Se}${ae}`,De=ms.indexOf(Se),Ie=ra.indexOf(ae),B=kl(De,Ie),K=p==null?void 0:p.get(Te),me=B?"bg-amber-700":"bg-amber-100";return o.jsx("div",{className:`aspect-square ${me} flex items-center justify-center`,"data-testid":`square-${Te}`,children:ke(K||null)},Te)}))}),o.jsx("p",{className:"text-muted-foreground text-center mt-4 mb-2",children:"Study the position, then tap Start to play blindfolded"}),o.jsx(Y,{size:"lg",onClick:ye,className:"mt-2","data-testid":"button-start-playing",children:"Start Playing"})]})]}):r==="finished"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-endgame-back-finished",children:o.jsx(kn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Endgame Drills"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsx(wn,{className:`h-16 w-16 ${V?"text-orange-500":"text-muted-foreground"}`}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h2",{className:"text-4xl font-bold",children:Nn(v)}),o.jsxs("p",{className:"text-lg text-muted-foreground",children:["Checkmate in ",S," moves"]}),V&&o.jsx(ct,{className:"bg-orange-500 text-white",children:"New Personal Best!"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Y,{variant:"outline",onClick:e,"data-testid":"button-endgame-menu",children:"Menu"}),o.jsx(Y,{onClick:de,"data-testid":"button-endgame-retry",children:"Play Again"})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("p",{className:"text-lg font-semibold",children:["Moves: ",o.jsx("span",{className:"text-2xl font-mono",children:S})]}),o.jsx("span",{className:"text-lg font-mono tabular-nums",children:Nn(v)})]}),o.jsx("p",{className:"text-sm text-muted-foreground text-center mb-2",children:h?"Peeking at the board...":"Playing blindfolded - pieces are hidden"}),Q.length>0&&o.jsxs("div",{className:"mb-2 p-2 bg-muted/50 rounded-md w-full max-w-sm mx-auto",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Move history:"}),o.jsx("div",{className:"text-sm font-mono flex flex-wrap gap-1",children:Q.map((ae,Se)=>o.jsxs("span",{className:Se%2===0?"text-foreground":"text-muted-foreground",children:[Se%2===0?`${Math.floor(Se/2)+1}. `:"",ae]},Se))})]}),q&&T&&o.jsxs("div",{className:"flex items-center gap-2 text-green-500 mb-2",children:[o.jsx(Ft,{className:"h-4 w-4 animate-pulse"}),o.jsx("span",{className:"text-sm",children:"Listening..."})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[o.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:["8","7","6","5","4","3","2","1"].map(ae=>ms.map(Se=>{const Te=`${Se}${ae}`,De=ms.indexOf(Se),Ie=ra.indexOf(ae),B=kl(De,Ie),K=p==null?void 0:p.get(Te),me=Te===C,ce=P.includes(Te);let ue=B?"bg-amber-700":"bg-amber-100";return me?ue="bg-yellow-400":ce&&(ue=B?"bg-green-600":"bg-green-300"),o.jsx("button",{className:`aspect-square ${ue} transition-colors duration-100 flex items-center justify-center`,onClick:()=>Le(Se,ae),"data-testid":`square-${Te}`,children:A||h?ke(K||null):null},Te)}))}),c!=="grandmaster"&&o.jsxs("div",{className:"mt-4 space-y-2 w-full max-w-xs",children:[o.jsxs(Y,{variant:h?"default":"outline",className:`w-full ${h?"bg-amber-400 hover:bg-amber-500 text-black":""}`,onMouseDown:X,onMouseUp:ee,onMouseLeave:ee,onTouchStart:X,onTouchEnd:ee,onTouchCancel:ee,disabled:f<=0,"data-testid":"button-endgame-peek",children:[o.jsx(Ju,{className:"h-4 w-4 mr-2"}),h?"Peeking...":"Hold to Peek"]}),o.jsx("p",{className:"text-center text-sm text-muted-foreground","data-testid":"text-peeks-remaining",children:isFinite(f)?`${f} peeks left`:"Unlimited peeks"})]}),o.jsxs(Y,{variant:"outline",onClick:()=>k(!0),className:"mt-4","data-testid":"button-endgame-resign",children:[o.jsx(Qo,{className:"h-4 w-4 mr-2"}),"Resign"]})]})]}),o.jsx(sr,{open:j,onOpenChange:k,children:o.jsxs(Ls,{children:[o.jsxs(Is,{children:[o.jsx(Os,{children:"Quit Game?"}),o.jsx(Ds,{children:"Your progress will not be saved."})]}),o.jsxs($s,{children:[o.jsx(Fs,{"data-testid":"button-endgame-resign-cancel",children:"Continue"}),o.jsx(Bs,{onClick:e,"data-testid":"button-endgame-resign-confirm",children:"Quit"})]})]})})]})}function JA({onBack:e,onComplete:t,stats:n,onGameStateChange:s}){const[r,i]=d.useState("ready"),[a,l]=d.useState("10-20"),[c,u]=d.useState(null),[f,m]=d.useState(0),[h,y]=d.useState(!0),[p,g]=d.useState(!1),[w,x]=d.useState(0),[v,b]=d.useState(0),[S,N]=d.useState(""),[j,k]=d.useState(null),[C,R]=d.useState(!1),[P,D]=d.useState(!1),[A,z]=d.useState(0),_=d.useRef(null),F=(n==null?void 0:n.blindfoldMarathonBest)!==null&&v>0&&v<((n==null?void 0:n.blindfoldMarathonBest)||1/0);d.useEffect(()=>{s==null||s(r)},[r,s]);const q=d.useCallback(async()=>{try{await oe.stopSession()}catch{}if(_.current){try{await _.current.remove()}catch{}_.current=null}D(!1)},[]);d.useEffect(()=>()=>{q()},[q]),d.useEffect(()=>{if(!Un||!p){Un&&!p&&q();return}let H=!1;return(async()=>{try{if(await Yo(),H)return;_.current=await oe.addListener("onSpeechResult",ie=>{var V;const se=((V=ie.text)==null?void 0:V.toLowerCase().trim())||"";se&&(N(se),oe.startListening().catch(()=>{}))}),await oe.startSession(),await oe.startListening(),D(!0)}catch(ie){console.error("[Marathon] Voice setup failed:",ie)}})(),()=>{H=!0,q()}},[p,q]),d.useEffect(()=>{let H=null;return r==="playing"&&p&&(H=setInterval(()=>{b(Date.now()-w)},100)),()=>{H&&clearInterval(H)}},[r,w,p]);const G=()=>{const H=yx().find(ie=>ie.value===a),xe=DA(H.minMoves,H.maxMoves);u(xe),m(0),y(!0),g(!1),N(""),k(null),i("playing")},T=()=>{f>0&&m(H=>H-1)},$=()=>{c&&(f<c.pgnMoves.length-1?m(H=>H+1):(y(!1),g(!0),x(Date.now())))},Q=H=>H==="10-20"?"easy":H==="20-30"?"medium":"hard",U=()=>{if(!c)return;const H=S.toLowerCase().replace(/[^a-z0-9]/g,""),xe=c.solution.toLowerCase().replace(/[^a-z0-9]/g,""),ie=H.includes(xe)||xe.includes(H);if(k(ie),ie){const se=A+1;z(se);const V=Date.now()-w;b(V),i("finished");const X=Q(a);t(V,se,X)}else z(0),setTimeout(()=>{i("finished"),b(0)},1e3)},ve=()=>{e()};return r==="ready"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-marathon-back",children:o.jsx(kn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Blindfold Marathon"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx(vl,{className:"h-12 w-12 text-red-500 mx-auto"}),o.jsx("h2",{className:"text-2xl font-bold",children:"Select Difficulty"})]}),o.jsxs(Sl,{value:a,onValueChange:H=>l(H),children:[o.jsx(ea,{className:"w-full max-w-xs","data-testid":"select-marathon-difficulty",children:o.jsx(Nl,{})}),o.jsx(ta,{children:yx().map(H=>o.jsx(ts,{value:H.value,children:H.label},H.value))})]}),o.jsx("p",{className:"text-muted-foreground text-center text-sm",children:"Step through moves at your own pace, then find the winning move!"}),n&&n.blindfoldMarathonBest!==null&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",o.jsx("span",{className:"font-semibold text-red-500",children:Nn(n.blindfoldMarathonBest)})]}),o.jsx(Y,{size:"lg",onClick:G,"data-testid":"button-start-marathon",children:"Start"})]})]}):r==="finished"?o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-marathon-back-finished",children:o.jsx(kn,{className:"h-5 w-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:"Blindfold Marathon"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[o.jsx(wn,{className:`h-16 w-16 ${j&&F?"text-red-500":j?"text-green-500":"text-muted-foreground"}`}),o.jsx("div",{className:"text-center space-y-2",children:j?o.jsxs(o.Fragment,{children:[o.jsx("h2",{className:"text-4xl font-bold",children:Nn(v)}),o.jsx("p",{className:"text-lg text-muted-foreground",children:"to find the winning move"}),F&&o.jsx(ct,{className:"bg-red-500 text-white",children:"New Personal Best!"})]}):o.jsxs(o.Fragment,{children:[o.jsx("h2",{className:"text-2xl font-bold text-red-500",children:"Incorrect"}),o.jsxs("p",{className:"text-lg text-muted-foreground",children:["The answer was: ",o.jsx("span",{className:"font-mono font-bold",children:c==null?void 0:c.solution})]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Y,{variant:"outline",onClick:e,"data-testid":"button-marathon-menu",children:"Menu"}),o.jsx(Y,{onClick:G,"data-testid":"button-marathon-retry",children:"Try Again"})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col h-full p-3 max-w-md mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h1",{className:"text-xl font-bold",children:c==null?void 0:c.description}),p&&o.jsx("span",{className:"text-lg font-mono tabular-nums",children:Nn(v)})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[h?o.jsxs("div",{className:"text-center space-y-4 w-full max-w-xs",children:[o.jsxs("p",{className:"text-sm text-muted-foreground",children:[c==null?void 0:c.white," vs ",c==null?void 0:c.black]}),o.jsxs("div",{className:"text-5xl font-mono font-bold min-h-[4rem] flex items-center justify-center",children:[f%2===0?`${Math.floor(f/2)+1}. `:"",c==null?void 0:c.pgnMoves[f]]}),o.jsxs("p",{className:"text-muted-foreground",children:["Move ",f+1," of ",(c==null?void 0:c.pgnMoves.length)||0]}),o.jsx(Jr,{value:(f+1)/((c==null?void 0:c.pgnMoves.length)||1)*100,className:"w-full"}),o.jsxs("div",{className:"flex gap-4 justify-center mt-4",children:[o.jsxs(Y,{size:"lg",variant:"outline",onClick:T,disabled:f===0,"data-testid":"button-marathon-back-move",children:[o.jsx(kn,{className:"h-5 w-5 mr-1"}),"Back"]}),o.jsxs(Y,{size:"lg",onClick:$,"data-testid":"button-marathon-next-move",children:[f===((c==null?void 0:c.pgnMoves.length)||0)-1?"Done":"Next",f!==((c==null?void 0:c.pgnMoves.length)||0)-1&&o.jsx(Zu,{className:"h-5 w-5 ml-1"})]})]})]}):p?o.jsxs("div",{className:"text-center space-y-4 w-full max-w-xs",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Find the Best Move!"}),o.jsxs("p",{className:"text-muted-foreground",children:[c==null?void 0:c.white," to move"]}),P&&o.jsxs("div",{className:"flex items-center justify-center gap-2 text-red-500",children:[o.jsx(Ft,{className:"h-5 w-5 animate-pulse"}),o.jsx("span",{className:"text-sm",children:"Listening..."})]}),o.jsx("input",{type:"text",value:S,onChange:H=>N(H.target.value),placeholder:P?"Speak or type your move":"Enter your move (e.g., Qb8+)",className:"w-full px-4 py-2 border rounded-md text-center text-lg font-mono text-black bg-white",autoFocus:!0,"data-testid":"input-marathon-answer"}),o.jsx(Y,{size:"lg",onClick:U,disabled:!S.trim(),"data-testid":"button-marathon-submit",children:"Submit Answer"})]}):null,o.jsxs(Y,{variant:"outline",onClick:()=>R(!0),className:"mt-4","data-testid":"button-marathon-resign",children:[o.jsx(Qo,{className:"h-4 w-4 mr-2"}),"Quit"]})]})]}),o.jsx(sr,{open:C,onOpenChange:R,children:o.jsxs(Ls,{children:[o.jsxs(Is,{children:[o.jsx(Os,{children:"Quit Game?"}),o.jsx(Ds,{children:"Your progress will not be saved."})]}),o.jsxs($s,{children:[o.jsx(Fs,{"data-testid":"button-marathon-resign-cancel",children:"Continue"}),o.jsx(Bs,{onClick:ve,"data-testid":"button-marathon-resign-confirm",children:"Quit"})]})]})})]})}function e3(){const[e,t]=d.useState(!1),[n,s]=d.useState(!1),[r,i]=d.useState(Za()),[a,l]=d.useState(0),[c,u]=d.useState("idle"),[f,m]=d.useState(!1),h=d.useRef(null),[y,p]=d.useState(!1),[g,w]=d.useState("menu"),x=d.useRef(null);d.useEffect(()=>{const j=()=>{i(Za())};return window.addEventListener("statsUpdated",j),()=>window.removeEventListener("statsUpdated",j)},[]),d.useEffect(()=>{if(!jn.isNativePlatform()){pc(!0);return}(async()=>{try{console.log("[App] Requesting mic permission on startup..."),qv("requesting...");const k=await oe.requestPermissions();if(console.log("[App] Mic permission result:",k.mic),qv(k.mic),k.mic!=="granted"){console.warn("[App] Mic permission denied"),bu("Mic permission denied"),pc(!1);return}console.log("[App] Permission granted, waiting for Vosk service..."),await oe.waitUntilReady(),console.log("[App] Vosk service ready"),pR(!0),pc(!0)}catch(k){console.error("[App] Failed to initialize voice:",k),bu(String(k)),pc(!1)}})()},[]);const v=()=>{l(j=>j+1)},b=()=>{if(y){if(g==="menu"||g==="ready"||g==="finished"){p(!1);return}m(!0);return}if(c==="idle"){s(!1),t(!1),window.dispatchEvent(new CustomEvent("closeAllDialogs"));return}if(c==="setup"){h.current&&h.current();return}m(!0)},S=()=>{if(m(!1),y){x.current&&x.current(),p(!1);return}h.current&&h.current()},N=()=>{if(y&&g==="playing")return"Quit this training game and return to title?";switch(c){case"in_game":return"Resign this game and return to title?";case"reconstruction":return"Leave this challenge and return to title?";case"analysis":return"Skip analysis and return to title?";default:return"Return to title?"}};return o.jsx(qP,{defaultTheme:"dark",children:o.jsxs(FP,{children:[o.jsxs("div",{className:"fixed inset-0 w-full h-full bg-background overflow-hidden",children:[o.jsxs("header",{className:"absolute top-0 left-0 right-0 z-50 grid grid-cols-3 items-center px-3 border-b border-border bg-background",style:{paddingTop:"var(--safe-area-top)",minHeight:"calc(56px + var(--safe-area-top, 0px))"},children:[o.jsx("div",{className:"flex justify-start",children:o.jsxs(Yi,{open:n,onOpenChange:s,children:[o.jsx(wu,{asChild:!0,children:o.jsx(Y,{variant:"ghost",size:"icon","data-testid":"button-voice-help",children:o.jsx(Ft,{className:"h-5 w-5"})})}),o.jsxs(zo,{children:[o.jsx(Vo,{children:o.jsx(qo,{children:"Voice Commands"})}),o.jsxs("div",{className:"space-y-4 text-sm max-h-[60vh] overflow-y-auto",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:"Basic Moves"}),o.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"e4"'})," - Move pawn to e4"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"knight f3"'})," - Move knight to f3"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"bishop takes c6"'})," - Capture on c6"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"castle kingside"'})," - Castle short (O-O)"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"castle queenside"'})," - Castle long (O-O-O)"]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:"When Two Pieces Can Move"}),o.jsx("p",{className:"text-muted-foreground",children:"If you have two pieces that can reach the same square, specify which one:"}),o.jsx("p",{className:"font-mono text-foreground",children:'"Rook F to D1"'})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:"Query Commands"}),o.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"say again"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"repeat"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"again"'})," - Hear the last move"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"last move"'})," - Hear opponent's last move"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:`"what's on e4"`})," - Check what piece is on a square"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"where is my queen"'})," - Find your piece locations"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"how much time"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"clock"'})," - Hear remaining time"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"resign"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"quit"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"give up"'})," - Resign the game"]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:"Resign Confirmation"}),o.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"yes"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"confirm"'})," - Confirm resignation"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"no"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"cancel"'})," - Cancel resignation"]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:"Pro Commands"}),o.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"material"'})," - Hear material balance"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"legal moves for knight"'})," - List piece's legal moves"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"peek"'})," - Show board for 5 seconds"]}),o.jsxs("li",{children:[o.jsx("span",{className:"font-mono text-foreground",children:'"evaluate"'})," / ",o.jsx("span",{className:"font-mono text-foreground",children:'"eval"'})," - Hear engine evaluation"]})]}),o.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:'Note: "peek" and "evaluate" mark the game as assisted'})]})]})]})]})}),o.jsx("button",{onClick:b,className:`text-lg font-bold text-center whitespace-nowrap cursor-pointer transition-colors bg-transparent border-none p-0 m-0 font-inherit text-inherit outline-none select-none ${c==="idle"?"cursor-default text-foreground":"text-foreground hover:text-primary"}`,style:{WebkitTapHighlightColor:"transparent",WebkitTouchCallout:"none"},"data-testid":"button-title-home",children:"Blindfold Chess"}),o.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[o.jsx(Y,{variant:"ghost",size:"icon",onClick:v,"data-testid":"button-game-history",children:o.jsx(w2,{className:"h-5 w-5"})}),o.jsxs(Yi,{open:e,onOpenChange:t,children:[o.jsx(wu,{asChild:!0,children:o.jsx(Y,{variant:"ghost",size:"icon","data-testid":"button-stats",children:o.jsx(uw,{className:"h-5 w-5"})})}),o.jsxs(zo,{className:"max-w-lg max-h-[85vh] overflow-hidden",children:[o.jsx(Vo,{children:o.jsx(qo,{children:"Training Metrics"})}),o.jsx(BM,{stats:r}),o.jsxs(Y,{variant:"outline",size:"sm",className:"w-full text-muted-foreground mt-4",onClick:()=>{VR(),i(Za())},"data-testid":"button-reset-stats",children:[o.jsx(j2,{className:"mr-2 h-3 w-3"}),"Reset All Statistics"]})]})]})]})]}),o.jsx("main",{className:"absolute left-0 right-0 z-0 overflow-hidden",style:{top:"calc(56px + var(--safe-area-top, 0px))",bottom:"calc(56px + var(--safe-area-bottom, 0px))"},children:y?o.jsx(BA,{onBack:()=>p(!1),onStateChange:w,returnToMenuRef:x}):o.jsx(CA,{historyTrigger:a,onStateChange:u,returnToTitleRef:h,onTrainNowClick:()=>p(!0)})}),o.jsxs("footer",{className:"absolute bottom-0 left-0 right-0 z-50 grid grid-cols-3 items-center px-2 border-t border-border bg-background",style:{paddingBottom:"var(--safe-area-bottom)",minHeight:"calc(56px + var(--safe-area-bottom, 0px))"},children:[o.jsx("div",{className:"flex justify-start",children:o.jsx(QR,{})}),o.jsx("div",{className:"flex justify-center",children:o.jsx(WP,{})}),o.jsx("div",{className:"flex justify-end",children:o.jsx(YR,{})})]})]}),o.jsx(sr,{open:f,onOpenChange:m,children:o.jsxs(Ls,{children:[o.jsxs(Is,{children:[o.jsx(Os,{children:"Return to Title"}),o.jsx(Ds,{children:N()})]}),o.jsxs($s,{children:[o.jsx(Fs,{"data-testid":"button-cancel-return",children:"Cancel"}),o.jsx(Bs,{onClick:S,"data-testid":"button-confirm-return",children:"Confirm"})]})]})}),o.jsx(mE,{})]})})}Ly(document.getElementById("root")).render(o.jsx(e3,{}));export{Qe as I,sa as N,jp as W};
