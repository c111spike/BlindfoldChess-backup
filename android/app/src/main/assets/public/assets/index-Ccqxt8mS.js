var vS=Object.defineProperty;var xS=(e,t,n)=>t in e?vS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var it=(e,t,n)=>xS(e,typeof t!="symbol"?t+"":t,n);function yS(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function pv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gv={exports:{}},Uc={},vv={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var za=Symbol.for("react.element"),wS=Symbol.for("react.portal"),bS=Symbol.for("react.fragment"),SS=Symbol.for("react.strict_mode"),kS=Symbol.for("react.profiler"),NS=Symbol.for("react.provider"),CS=Symbol.for("react.context"),jS=Symbol.for("react.forward_ref"),ES=Symbol.for("react.suspense"),TS=Symbol.for("react.memo"),PS=Symbol.for("react.lazy"),sp=Symbol.iterator;function RS(e){return e===null||typeof e!="object"?null:(e=sp&&e[sp]||e["@@iterator"],typeof e=="function"?e:null)}var xv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yv=Object.assign,wv={};function Ri(e,t,n){this.props=e,this.context=t,this.refs=wv,this.updater=n||xv}Ri.prototype.isReactComponent={};Ri.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ri.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bv(){}bv.prototype=Ri.prototype;function ch(e,t,n){this.props=e,this.context=t,this.refs=wv,this.updater=n||xv}var uh=ch.prototype=new bv;uh.constructor=ch;yv(uh,Ri.prototype);uh.isPureReactComponent=!0;var op=Array.isArray,Sv=Object.prototype.hasOwnProperty,dh={current:null},kv={key:!0,ref:!0,__self:!0,__source:!0};function Nv(e,t,n){var r,s={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)Sv.call(t,r)&&!kv.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:za,type:e,key:o,ref:a,props:s,_owner:dh.current}}function _S(e,t){return{$$typeof:za,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fh(e){return typeof e=="object"&&e!==null&&e.$$typeof===za}function MS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ip=/\/+/g;function Ou(e,t){return typeof e=="object"&&e!==null&&e.key!=null?MS(""+e.key):t.toString(36)}function Il(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case za:case wS:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Ou(a,0):r,op(s)?(n="",e!=null&&(n=e.replace(ip,"$&/")+"/"),Il(s,t,n,"",function(u){return u})):s!=null&&(fh(s)&&(s=_S(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(ip,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",op(e))for(var l=0;l<e.length;l++){o=e[l];var c=r+Ou(o,l);a+=Il(o,t,n,c,s)}else if(c=RS(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=r+Ou(o,l++),a+=Il(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function sl(e,t,n){if(e==null)return e;var r=[],s=0;return Il(e,r,"","",function(o){return t.call(n,o,s++)}),r}function AS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var vn={current:null},Ol={transition:null},LS={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:Ol,ReactCurrentOwner:dh};function Cv(){throw Error("act(...) is not supported in production builds of React.")}Oe.Children={map:sl,forEach:function(e,t,n){sl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return sl(e,function(){t++}),t},toArray:function(e){return sl(e,function(t){return t})||[]},only:function(e){if(!fh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Oe.Component=Ri;Oe.Fragment=bS;Oe.Profiler=kS;Oe.PureComponent=ch;Oe.StrictMode=SS;Oe.Suspense=ES;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LS;Oe.act=Cv;Oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=yv({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=dh.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Sv.call(t,c)&&!kv.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:za,type:e.type,key:s,ref:o,props:r,_owner:a}};Oe.createContext=function(e){return e={$$typeof:CS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:NS,_context:e},e.Consumer=e};Oe.createElement=Nv;Oe.createFactory=function(e){var t=Nv.bind(null,e);return t.type=e,t};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(e){return{$$typeof:jS,render:e}};Oe.isValidElement=fh;Oe.lazy=function(e){return{$$typeof:PS,_payload:{_status:-1,_result:e},_init:AS}};Oe.memo=function(e,t){return{$$typeof:TS,type:e,compare:t===void 0?null:t}};Oe.startTransition=function(e){var t=Ol.transition;Ol.transition={};try{e()}finally{Ol.transition=t}};Oe.unstable_act=Cv;Oe.useCallback=function(e,t){return vn.current.useCallback(e,t)};Oe.useContext=function(e){return vn.current.useContext(e)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(e){return vn.current.useDeferredValue(e)};Oe.useEffect=function(e,t){return vn.current.useEffect(e,t)};Oe.useId=function(){return vn.current.useId()};Oe.useImperativeHandle=function(e,t,n){return vn.current.useImperativeHandle(e,t,n)};Oe.useInsertionEffect=function(e,t){return vn.current.useInsertionEffect(e,t)};Oe.useLayoutEffect=function(e,t){return vn.current.useLayoutEffect(e,t)};Oe.useMemo=function(e,t){return vn.current.useMemo(e,t)};Oe.useReducer=function(e,t,n){return vn.current.useReducer(e,t,n)};Oe.useRef=function(e){return vn.current.useRef(e)};Oe.useState=function(e){return vn.current.useState(e)};Oe.useSyncExternalStore=function(e,t,n){return vn.current.useSyncExternalStore(e,t,n)};Oe.useTransition=function(){return vn.current.useTransition()};Oe.version="18.3.1";vv.exports=Oe;var d=vv.exports;const as=pv(d),IS=yS({__proto__:null,default:as},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OS=d,$S=Symbol.for("react.element"),DS=Symbol.for("react.fragment"),FS=Object.prototype.hasOwnProperty,BS=OS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zS={key:!0,ref:!0,__self:!0,__source:!0};function jv(e,t,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)FS.call(t,r)&&!zS.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:$S,type:e,key:o,ref:a,props:s,_owner:BS.current}}Uc.Fragment=DS;Uc.jsx=jv;Uc.jsxs=jv;gv.exports=Uc;var i=gv.exports,Ev={exports:{}},Bn={},Tv={exports:{}},Pv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,$){var W=T.length;T.push($);e:for(;0<W;){var Y=W-1>>>1,be=T[Y];if(0<s(be,$))T[Y]=$,T[W]=be,W=Y;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var $=T[0],W=T.pop();if(W!==$){T[0]=W;e:for(var Y=0,be=T.length,Pe=be>>>1;Y<Pe;){var _e=2*(Y+1)-1,fe=T[_e],L=_e+1,z=T[L];if(0>s(fe,W))L<be&&0>s(z,fe)?(T[Y]=z,T[L]=W,Y=L):(T[Y]=fe,T[_e]=W,Y=_e);else if(L<be&&0>s(z,W))T[Y]=z,T[L]=W,Y=L;else break e}}return $}function s(T,$){var W=T.sortIndex-$.sortIndex;return W!==0?W:T.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],f=1,m=null,h=3,y=!1,v=!1,p=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(T){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=T)r(u),$.sortIndex=$.expirationTime,t(c,$);else break;$=n(u)}}function k(T){if(p=!1,w(T),!v)if(n(c)!==null)v=!0,q(S);else{var $=n(u);$!==null&&Q(k,$.startTime-T)}}function S(T,$){v=!1,p&&(p=!1,x(j),j=-1),y=!0;var W=h;try{for(w($),m=n(c);m!==null&&(!(m.expirationTime>$)||T&&!B());){var Y=m.callback;if(typeof Y=="function"){m.callback=null,h=m.priorityLevel;var be=Y(m.expirationTime<=$);$=e.unstable_now(),typeof be=="function"?m.callback=be:m===n(c)&&r(c),w($)}else r(c);m=n(c)}if(m!==null)var Pe=!0;else{var _e=n(u);_e!==null&&Q(k,_e.startTime-$),Pe=!1}return Pe}finally{m=null,h=W,y=!1}}var C=!1,N=null,j=-1,R=5,_=-1;function B(){return!(e.unstable_now()-_<R)}function D(){if(N!==null){var T=e.unstable_now();_=T;var $=!0;try{$=N(!0,T)}finally{$?I():(C=!1,N=null)}}else C=!1}var I;if(typeof g=="function")I=function(){g(D)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,F=O.port2;O.port1.onmessage=D,I=function(){F.postMessage(null)}}else I=function(){b(D,0)};function q(T){N=T,C||(C=!0,I())}function Q(T,$){j=b(function(){T(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,q(S))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var W=h;h=$;try{return T()}finally{h=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,$){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var W=h;h=T;try{return $()}finally{h=W}},e.unstable_scheduleCallback=function(T,$,W){var Y=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Y+W:Y):W=Y,T){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=W+be,T={id:f++,callback:$,priorityLevel:T,startTime:W,expirationTime:be,sortIndex:-1},W>Y?(T.sortIndex=W,t(u,T),n(c)===null&&T===n(u)&&(p?(x(j),j=-1):p=!0,Q(k,W-Y))):(T.sortIndex=be,t(c,T),v||y||(v=!0,q(S))),T},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(T){var $=h;return function(){var W=h;h=$;try{return T.apply(this,arguments)}finally{h=W}}}})(Pv);Tv.exports=Pv;var VS=Tv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qS=d,Fn=VS;function U(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rv=new Set,wa={};function go(e,t){mi(e,t),mi(e+"Capture",t)}function mi(e,t){for(wa[e]=t,e=0;e<t.length;e++)Rv.add(t[e])}var Ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qd=Object.prototype.hasOwnProperty,US=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ap={},lp={};function WS(e){return qd.call(lp,e)?!0:qd.call(ap,e)?!1:US.test(e)?lp[e]=!0:(ap[e]=!0,!1)}function HS(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function GS(e,t,n,r){if(t===null||typeof t>"u"||HS(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function xn(e,t,n,r,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Gt[e]=new xn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Gt[t]=new xn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Gt[e]=new xn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Gt[e]=new xn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Gt[e]=new xn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Gt[e]=new xn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Gt[e]=new xn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Gt[e]=new xn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Gt[e]=new xn(e,5,!1,e.toLowerCase(),null,!1,!1)});var hh=/[\-:]([a-z])/g;function mh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(hh,mh);Gt[t]=new xn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(hh,mh);Gt[t]=new xn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(hh,mh);Gt[t]=new xn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Gt[e]=new xn(e,1,!1,e.toLowerCase(),null,!1,!1)});Gt.xlinkHref=new xn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Gt[e]=new xn(e,1,!1,e.toLowerCase(),null,!0,!0)});function ph(e,t,n,r){var s=Gt.hasOwnProperty(t)?Gt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(GS(t,n,s,r)&&(n=null),r||s===null?WS(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Yr=qS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ol=Symbol.for("react.element"),Do=Symbol.for("react.portal"),Fo=Symbol.for("react.fragment"),gh=Symbol.for("react.strict_mode"),Ud=Symbol.for("react.profiler"),_v=Symbol.for("react.provider"),Mv=Symbol.for("react.context"),vh=Symbol.for("react.forward_ref"),Wd=Symbol.for("react.suspense"),Hd=Symbol.for("react.suspense_list"),xh=Symbol.for("react.memo"),cs=Symbol.for("react.lazy"),Av=Symbol.for("react.offscreen"),cp=Symbol.iterator;function Vi(e){return e===null||typeof e!="object"?null:(e=cp&&e[cp]||e["@@iterator"],typeof e=="function"?e:null)}var ht=Object.assign,$u;function na(e){if($u===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$u=t&&t[1]||""}return`
`+$u+e}var Du=!1;function Fu(e,t){if(!e||Du)return"";Du=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Du=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?na(e):""}function KS(e){switch(e.tag){case 5:return na(e.type);case 16:return na("Lazy");case 13:return na("Suspense");case 19:return na("SuspenseList");case 0:case 2:case 15:return e=Fu(e.type,!1),e;case 11:return e=Fu(e.type.render,!1),e;case 1:return e=Fu(e.type,!0),e;default:return""}}function Gd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fo:return"Fragment";case Do:return"Portal";case Ud:return"Profiler";case gh:return"StrictMode";case Wd:return"Suspense";case Hd:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Mv:return(e.displayName||"Context")+".Consumer";case _v:return(e._context.displayName||"Context")+".Provider";case vh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xh:return t=e.displayName||null,t!==null?t:Gd(e.type)||"Memo";case cs:t=e._payload,e=e._init;try{return Gd(e(t))}catch{}}return null}function QS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gd(t);case 8:return t===gh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function js(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function YS(e){var t=Lv(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function il(e){e._valueTracker||(e._valueTracker=YS(e))}function Iv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Lv(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function oc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Kd(e,t){var n=t.checked;return ht({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function up(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=js(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ov(e,t){t=t.checked,t!=null&&ph(e,"checked",t,!1)}function Qd(e,t){Ov(e,t);var n=js(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Yd(e,t.type,n):t.hasOwnProperty("defaultValue")&&Yd(e,t.type,js(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function dp(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Yd(e,t,n){(t!=="number"||oc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ra=Array.isArray;function ei(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+js(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Xd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(U(91));return ht({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fp(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(U(92));if(ra(n)){if(1<n.length)throw Error(U(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:js(n)}}function $v(e,t){var n=js(t.value),r=js(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function hp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Dv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Dv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var al,Fv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(al=al||document.createElement("div"),al.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=al.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ba(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var la={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XS=["Webkit","ms","Moz","O"];Object.keys(la).forEach(function(e){XS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),la[t]=la[e]})});function Bv(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||la.hasOwnProperty(e)&&la[e]?(""+t).trim():t+"px"}function zv(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Bv(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var ZS=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jd(e,t){if(t){if(ZS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(U(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(U(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(U(61))}if(t.style!=null&&typeof t.style!="object")throw Error(U(62))}}function ef(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tf=null;function yh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var nf=null,ti=null,ni=null;function mp(e){if(e=Ua(e)){if(typeof nf!="function")throw Error(U(280));var t=e.stateNode;t&&(t=Qc(t),nf(e.stateNode,e.type,t))}}function Vv(e){ti?ni?ni.push(e):ni=[e]:ti=e}function qv(){if(ti){var e=ti,t=ni;if(ni=ti=null,mp(e),t)for(e=0;e<t.length;e++)mp(t[e])}}function Uv(e,t){return e(t)}function Wv(){}var Bu=!1;function Hv(e,t,n){if(Bu)return e(t,n);Bu=!0;try{return Uv(e,t,n)}finally{Bu=!1,(ti!==null||ni!==null)&&(Wv(),qv())}}function Sa(e,t){var n=e.stateNode;if(n===null)return null;var r=Qc(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(U(231,t,typeof n));return n}var rf=!1;if(Ur)try{var qi={};Object.defineProperty(qi,"passive",{get:function(){rf=!0}}),window.addEventListener("test",qi,qi),window.removeEventListener("test",qi,qi)}catch{rf=!1}function JS(e,t,n,r,s,o,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var ca=!1,ic=null,ac=!1,sf=null,ek={onError:function(e){ca=!0,ic=e}};function tk(e,t,n,r,s,o,a,l,c){ca=!1,ic=null,JS.apply(ek,arguments)}function nk(e,t,n,r,s,o,a,l,c){if(tk.apply(this,arguments),ca){if(ca){var u=ic;ca=!1,ic=null}else throw Error(U(198));ac||(ac=!0,sf=u)}}function vo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Gv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pp(e){if(vo(e)!==e)throw Error(U(188))}function rk(e){var t=e.alternate;if(!t){if(t=vo(e),t===null)throw Error(U(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return pp(s),e;if(o===r)return pp(s),t;o=o.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=o;break}if(l===r){a=!0,r=s,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=s;break}if(l===r){a=!0,r=o,n=s;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?e:t}function Kv(e){return e=rk(e),e!==null?Qv(e):null}function Qv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Qv(e);if(t!==null)return t;e=e.sibling}return null}var Yv=Fn.unstable_scheduleCallback,gp=Fn.unstable_cancelCallback,sk=Fn.unstable_shouldYield,ok=Fn.unstable_requestPaint,wt=Fn.unstable_now,ik=Fn.unstable_getCurrentPriorityLevel,wh=Fn.unstable_ImmediatePriority,Xv=Fn.unstable_UserBlockingPriority,lc=Fn.unstable_NormalPriority,ak=Fn.unstable_LowPriority,Zv=Fn.unstable_IdlePriority,Wc=null,jr=null;function lk(e){if(jr&&typeof jr.onCommitFiberRoot=="function")try{jr.onCommitFiberRoot(Wc,e,void 0,(e.current.flags&128)===128)}catch{}}var ur=Math.clz32?Math.clz32:dk,ck=Math.log,uk=Math.LN2;function dk(e){return e>>>=0,e===0?32:31-(ck(e)/uk|0)|0}var ll=64,cl=4194304;function sa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function cc(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=sa(l):(o&=a,o!==0&&(r=sa(o)))}else a=n&~s,a!==0?r=sa(a):o!==0&&(r=sa(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ur(t),s=1<<n,r|=e[n],t&=~s;return r}function fk(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hk(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-ur(o),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=fk(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function of(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Jv(){var e=ll;return ll<<=1,!(ll&4194240)&&(ll=64),e}function zu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Va(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ur(t),e[t]=n}function mk(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ur(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function bh(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ur(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ge=0;function e0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var t0,Sh,n0,r0,s0,af=!1,ul=[],vs=null,xs=null,ys=null,ka=new Map,Na=new Map,fs=[],pk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vp(e,t){switch(e){case"focusin":case"focusout":vs=null;break;case"dragenter":case"dragleave":xs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":ka.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Na.delete(t.pointerId)}}function Ui(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Ua(t),t!==null&&Sh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function gk(e,t,n,r,s){switch(t){case"focusin":return vs=Ui(vs,e,t,n,r,s),!0;case"dragenter":return xs=Ui(xs,e,t,n,r,s),!0;case"mouseover":return ys=Ui(ys,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return ka.set(o,Ui(ka.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Na.set(o,Ui(Na.get(o)||null,e,t,n,r,s)),!0}return!1}function o0(e){var t=Gs(e.target);if(t!==null){var n=vo(t);if(n!==null){if(t=n.tag,t===13){if(t=Gv(n),t!==null){e.blockedOn=t,s0(e.priority,function(){n0(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $l(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=lf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);tf=r,n.target.dispatchEvent(r),tf=null}else return t=Ua(n),t!==null&&Sh(t),e.blockedOn=n,!1;t.shift()}return!0}function xp(e,t,n){$l(e)&&n.delete(t)}function vk(){af=!1,vs!==null&&$l(vs)&&(vs=null),xs!==null&&$l(xs)&&(xs=null),ys!==null&&$l(ys)&&(ys=null),ka.forEach(xp),Na.forEach(xp)}function Wi(e,t){e.blockedOn===t&&(e.blockedOn=null,af||(af=!0,Fn.unstable_scheduleCallback(Fn.unstable_NormalPriority,vk)))}function Ca(e){function t(s){return Wi(s,e)}if(0<ul.length){Wi(ul[0],e);for(var n=1;n<ul.length;n++){var r=ul[n];r.blockedOn===e&&(r.blockedOn=null)}}for(vs!==null&&Wi(vs,e),xs!==null&&Wi(xs,e),ys!==null&&Wi(ys,e),ka.forEach(t),Na.forEach(t),n=0;n<fs.length;n++)r=fs[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<fs.length&&(n=fs[0],n.blockedOn===null);)o0(n),n.blockedOn===null&&fs.shift()}var ri=Yr.ReactCurrentBatchConfig,uc=!0;function xk(e,t,n,r){var s=Ge,o=ri.transition;ri.transition=null;try{Ge=1,kh(e,t,n,r)}finally{Ge=s,ri.transition=o}}function yk(e,t,n,r){var s=Ge,o=ri.transition;ri.transition=null;try{Ge=4,kh(e,t,n,r)}finally{Ge=s,ri.transition=o}}function kh(e,t,n,r){if(uc){var s=lf(e,t,n,r);if(s===null)Xu(e,t,r,dc,n),vp(e,r);else if(gk(s,e,t,n,r))r.stopPropagation();else if(vp(e,r),t&4&&-1<pk.indexOf(e)){for(;s!==null;){var o=Ua(s);if(o!==null&&t0(o),o=lf(e,t,n,r),o===null&&Xu(e,t,r,dc,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Xu(e,t,r,null,n)}}var dc=null;function lf(e,t,n,r){if(dc=null,e=yh(r),e=Gs(e),e!==null)if(t=vo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Gv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return dc=e,null}function i0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ik()){case wh:return 1;case Xv:return 4;case lc:case ak:return 16;case Zv:return 536870912;default:return 16}default:return 16}}var ms=null,Nh=null,Dl=null;function a0(){if(Dl)return Dl;var e,t=Nh,n=t.length,r,s="value"in ms?ms.value:ms.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[o-r];r++);return Dl=s.slice(e,1<r?1-r:void 0)}function Fl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function dl(){return!0}function yp(){return!1}function zn(e){function t(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?dl:yp,this.isPropagationStopped=yp,this}return ht(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dl)},persist:function(){},isPersistent:dl}),t}var _i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ch=zn(_i),qa=ht({},_i,{view:0,detail:0}),wk=zn(qa),Vu,qu,Hi,Hc=ht({},qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hi&&(Hi&&e.type==="mousemove"?(Vu=e.screenX-Hi.screenX,qu=e.screenY-Hi.screenY):qu=Vu=0,Hi=e),Vu)},movementY:function(e){return"movementY"in e?e.movementY:qu}}),wp=zn(Hc),bk=ht({},Hc,{dataTransfer:0}),Sk=zn(bk),kk=ht({},qa,{relatedTarget:0}),Uu=zn(kk),Nk=ht({},_i,{animationName:0,elapsedTime:0,pseudoElement:0}),Ck=zn(Nk),jk=ht({},_i,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ek=zn(jk),Tk=ht({},_i,{data:0}),bp=zn(Tk),Pk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_k={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_k[e])?!!t[e]:!1}function jh(){return Mk}var Ak=ht({},qa,{key:function(e){if(e.key){var t=Pk[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Fl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Rk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jh,charCode:function(e){return e.type==="keypress"?Fl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Lk=zn(Ak),Ik=ht({},Hc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sp=zn(Ik),Ok=ht({},qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jh}),$k=zn(Ok),Dk=ht({},_i,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fk=zn(Dk),Bk=ht({},Hc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zk=zn(Bk),Vk=[9,13,27,32],Eh=Ur&&"CompositionEvent"in window,ua=null;Ur&&"documentMode"in document&&(ua=document.documentMode);var qk=Ur&&"TextEvent"in window&&!ua,l0=Ur&&(!Eh||ua&&8<ua&&11>=ua),kp=" ",Np=!1;function c0(e,t){switch(e){case"keyup":return Vk.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function u0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bo=!1;function Uk(e,t){switch(e){case"compositionend":return u0(t);case"keypress":return t.which!==32?null:(Np=!0,kp);case"textInput":return e=t.data,e===kp&&Np?null:e;default:return null}}function Wk(e,t){if(Bo)return e==="compositionend"||!Eh&&c0(e,t)?(e=a0(),Dl=Nh=ms=null,Bo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return l0&&t.locale!=="ko"?null:t.data;default:return null}}var Hk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Hk[e.type]:t==="textarea"}function d0(e,t,n,r){Vv(r),t=fc(t,"onChange"),0<t.length&&(n=new Ch("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var da=null,ja=null;function Gk(e){S0(e,0)}function Gc(e){var t=qo(e);if(Iv(t))return e}function Kk(e,t){if(e==="change")return t}var f0=!1;if(Ur){var Wu;if(Ur){var Hu="oninput"in document;if(!Hu){var jp=document.createElement("div");jp.setAttribute("oninput","return;"),Hu=typeof jp.oninput=="function"}Wu=Hu}else Wu=!1;f0=Wu&&(!document.documentMode||9<document.documentMode)}function Ep(){da&&(da.detachEvent("onpropertychange",h0),ja=da=null)}function h0(e){if(e.propertyName==="value"&&Gc(ja)){var t=[];d0(t,ja,e,yh(e)),Hv(Gk,t)}}function Qk(e,t,n){e==="focusin"?(Ep(),da=t,ja=n,da.attachEvent("onpropertychange",h0)):e==="focusout"&&Ep()}function Yk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Gc(ja)}function Xk(e,t){if(e==="click")return Gc(t)}function Zk(e,t){if(e==="input"||e==="change")return Gc(t)}function Jk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fr=typeof Object.is=="function"?Object.is:Jk;function Ea(e,t){if(fr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!qd.call(t,s)||!fr(e[s],t[s]))return!1}return!0}function Tp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pp(e,t){var n=Tp(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Tp(n)}}function m0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?m0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function p0(){for(var e=window,t=oc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=oc(e.document)}return t}function Th(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function eN(e){var t=p0(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&m0(n.ownerDocument.documentElement,n)){if(r!==null&&Th(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=Pp(n,o);var a=Pp(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tN=Ur&&"documentMode"in document&&11>=document.documentMode,zo=null,cf=null,fa=null,uf=!1;function Rp(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uf||zo==null||zo!==oc(r)||(r=zo,"selectionStart"in r&&Th(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fa&&Ea(fa,r)||(fa=r,r=fc(cf,"onSelect"),0<r.length&&(t=new Ch("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=zo)))}function fl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Vo={animationend:fl("Animation","AnimationEnd"),animationiteration:fl("Animation","AnimationIteration"),animationstart:fl("Animation","AnimationStart"),transitionend:fl("Transition","TransitionEnd")},Gu={},g0={};Ur&&(g0=document.createElement("div").style,"AnimationEvent"in window||(delete Vo.animationend.animation,delete Vo.animationiteration.animation,delete Vo.animationstart.animation),"TransitionEvent"in window||delete Vo.transitionend.transition);function Kc(e){if(Gu[e])return Gu[e];if(!Vo[e])return e;var t=Vo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in g0)return Gu[e]=t[n];return e}var v0=Kc("animationend"),x0=Kc("animationiteration"),y0=Kc("animationstart"),w0=Kc("transitionend"),b0=new Map,_p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ms(e,t){b0.set(e,t),go(t,[e])}for(var Ku=0;Ku<_p.length;Ku++){var Qu=_p[Ku],nN=Qu.toLowerCase(),rN=Qu[0].toUpperCase()+Qu.slice(1);Ms(nN,"on"+rN)}Ms(v0,"onAnimationEnd");Ms(x0,"onAnimationIteration");Ms(y0,"onAnimationStart");Ms("dblclick","onDoubleClick");Ms("focusin","onFocus");Ms("focusout","onBlur");Ms(w0,"onTransitionEnd");mi("onMouseEnter",["mouseout","mouseover"]);mi("onMouseLeave",["mouseout","mouseover"]);mi("onPointerEnter",["pointerout","pointerover"]);mi("onPointerLeave",["pointerout","pointerover"]);go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));go("onBeforeInput",["compositionend","keypress","textInput","paste"]);go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sN=new Set("cancel close invalid load scroll toggle".split(" ").concat(oa));function Mp(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,nk(r,t,void 0,e),e.currentTarget=null}function S0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;Mp(s,l,u),o=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;Mp(s,l,u),o=c}}}if(ac)throw e=sf,ac=!1,sf=null,e}function nt(e,t){var n=t[pf];n===void 0&&(n=t[pf]=new Set);var r=e+"__bubble";n.has(r)||(k0(t,e,2,!1),n.add(r))}function Yu(e,t,n){var r=0;t&&(r|=4),k0(n,e,r,t)}var hl="_reactListening"+Math.random().toString(36).slice(2);function Ta(e){if(!e[hl]){e[hl]=!0,Rv.forEach(function(n){n!=="selectionchange"&&(sN.has(n)||Yu(n,!1,e),Yu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hl]||(t[hl]=!0,Yu("selectionchange",!1,t))}}function k0(e,t,n,r){switch(i0(t)){case 1:var s=xk;break;case 4:s=yk;break;default:s=kh}n=s.bind(null,t,n,e),s=void 0,!rf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Xu(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Gs(l),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}l=l.parentNode}}r=r.return}Hv(function(){var u=o,f=yh(n),m=[];e:{var h=b0.get(e);if(h!==void 0){var y=Ch,v=e;switch(e){case"keypress":if(Fl(n)===0)break e;case"keydown":case"keyup":y=Lk;break;case"focusin":v="focus",y=Uu;break;case"focusout":v="blur",y=Uu;break;case"beforeblur":case"afterblur":y=Uu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=wp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Sk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=$k;break;case v0:case x0:case y0:y=Ck;break;case w0:y=Fk;break;case"scroll":y=wk;break;case"wheel":y=zk;break;case"copy":case"cut":case"paste":y=Ek;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Sp}var p=(t&4)!==0,b=!p&&e==="scroll",x=p?h!==null?h+"Capture":null:h;p=[];for(var g=u,w;g!==null;){w=g;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,x!==null&&(k=Sa(g,x),k!=null&&p.push(Pa(g,k,w)))),b)break;g=g.return}0<p.length&&(h=new y(h,v,null,n,f),m.push({event:h,listeners:p}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",h&&n!==tf&&(v=n.relatedTarget||n.fromElement)&&(Gs(v)||v[Wr]))break e;if((y||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=u,v=v?Gs(v):null,v!==null&&(b=vo(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(p=wp,k="onMouseLeave",x="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(p=Sp,k="onPointerLeave",x="onPointerEnter",g="pointer"),b=y==null?h:qo(y),w=v==null?h:qo(v),h=new p(k,g+"leave",y,n,f),h.target=b,h.relatedTarget=w,k=null,Gs(f)===u&&(p=new p(x,g+"enter",v,n,f),p.target=w,p.relatedTarget=b,k=p),b=k,y&&v)t:{for(p=y,x=v,g=0,w=p;w;w=Lo(w))g++;for(w=0,k=x;k;k=Lo(k))w++;for(;0<g-w;)p=Lo(p),g--;for(;0<w-g;)x=Lo(x),w--;for(;g--;){if(p===x||x!==null&&p===x.alternate)break t;p=Lo(p),x=Lo(x)}p=null}else p=null;y!==null&&Ap(m,h,y,p,!1),v!==null&&b!==null&&Ap(m,b,v,p,!0)}}e:{if(h=u?qo(u):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var S=Kk;else if(Cp(h))if(f0)S=Zk;else{S=Yk;var C=Qk}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=Xk);if(S&&(S=S(e,u))){d0(m,S,n,f);break e}C&&C(e,h,u),e==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&Yd(h,"number",h.value)}switch(C=u?qo(u):window,e){case"focusin":(Cp(C)||C.contentEditable==="true")&&(zo=C,cf=u,fa=null);break;case"focusout":fa=cf=zo=null;break;case"mousedown":uf=!0;break;case"contextmenu":case"mouseup":case"dragend":uf=!1,Rp(m,n,f);break;case"selectionchange":if(tN)break;case"keydown":case"keyup":Rp(m,n,f)}var N;if(Eh)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Bo?c0(e,n)&&(j="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(l0&&n.locale!=="ko"&&(Bo||j!=="onCompositionStart"?j==="onCompositionEnd"&&Bo&&(N=a0()):(ms=f,Nh="value"in ms?ms.value:ms.textContent,Bo=!0)),C=fc(u,j),0<C.length&&(j=new bp(j,e,null,n,f),m.push({event:j,listeners:C}),N?j.data=N:(N=u0(n),N!==null&&(j.data=N)))),(N=qk?Uk(e,n):Wk(e,n))&&(u=fc(u,"onBeforeInput"),0<u.length&&(f=new bp("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:u}),f.data=N))}S0(m,t)})}function Pa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function fc(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Sa(e,n),o!=null&&r.unshift(Pa(e,o,s)),o=Sa(e,t),o!=null&&r.push(Pa(e,o,s))),e=e.return}return r}function Lo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ap(e,t,n,r,s){for(var o=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Sa(n,o),c!=null&&a.unshift(Pa(n,c,l))):s||(c=Sa(n,o),c!=null&&a.push(Pa(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var oN=/\r\n?/g,iN=/\u0000|\uFFFD/g;function Lp(e){return(typeof e=="string"?e:""+e).replace(oN,`
`).replace(iN,"")}function ml(e,t,n){if(t=Lp(t),Lp(e)!==t&&n)throw Error(U(425))}function hc(){}var df=null,ff=null;function hf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var mf=typeof setTimeout=="function"?setTimeout:void 0,aN=typeof clearTimeout=="function"?clearTimeout:void 0,Ip=typeof Promise=="function"?Promise:void 0,lN=typeof queueMicrotask=="function"?queueMicrotask:typeof Ip<"u"?function(e){return Ip.resolve(null).then(e).catch(cN)}:mf;function cN(e){setTimeout(function(){throw e})}function Zu(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ca(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ca(t)}function ws(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Op(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Mi=Math.random().toString(36).slice(2),kr="__reactFiber$"+Mi,Ra="__reactProps$"+Mi,Wr="__reactContainer$"+Mi,pf="__reactEvents$"+Mi,uN="__reactListeners$"+Mi,dN="__reactHandles$"+Mi;function Gs(e){var t=e[kr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Wr]||n[kr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Op(e);e!==null;){if(n=e[kr])return n;e=Op(e)}return t}e=n,n=e.parentNode}return null}function Ua(e){return e=e[kr]||e[Wr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(U(33))}function Qc(e){return e[Ra]||null}var gf=[],Uo=-1;function As(e){return{current:e}}function rt(e){0>Uo||(e.current=gf[Uo],gf[Uo]=null,Uo--)}function Ze(e,t){Uo++,gf[Uo]=e.current,e.current=t}var Es={},an=As(Es),kn=As(!1),no=Es;function pi(e,t){var n=e.type.contextTypes;if(!n)return Es;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Nn(e){return e=e.childContextTypes,e!=null}function mc(){rt(kn),rt(an)}function $p(e,t,n){if(an.current!==Es)throw Error(U(168));Ze(an,t),Ze(kn,n)}function N0(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(U(108,QS(e)||"Unknown",s));return ht({},n,r)}function pc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Es,no=an.current,Ze(an,e),Ze(kn,kn.current),!0}function Dp(e,t,n){var r=e.stateNode;if(!r)throw Error(U(169));n?(e=N0(e,t,no),r.__reactInternalMemoizedMergedChildContext=e,rt(kn),rt(an),Ze(an,e)):rt(kn),Ze(kn,n)}var Fr=null,Yc=!1,Ju=!1;function C0(e){Fr===null?Fr=[e]:Fr.push(e)}function fN(e){Yc=!0,C0(e)}function Ls(){if(!Ju&&Fr!==null){Ju=!0;var e=0,t=Ge;try{var n=Fr;for(Ge=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Fr=null,Yc=!1}catch(s){throw Fr!==null&&(Fr=Fr.slice(e+1)),Yv(wh,Ls),s}finally{Ge=t,Ju=!1}}return null}var Wo=[],Ho=0,gc=null,vc=0,Un=[],Wn=0,ro=null,Br=1,zr="";function Ws(e,t){Wo[Ho++]=vc,Wo[Ho++]=gc,gc=e,vc=t}function j0(e,t,n){Un[Wn++]=Br,Un[Wn++]=zr,Un[Wn++]=ro,ro=e;var r=Br;e=zr;var s=32-ur(r)-1;r&=~(1<<s),n+=1;var o=32-ur(t)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Br=1<<32-ur(t)+s|n<<s|r,zr=o+e}else Br=1<<o|n<<s|r,zr=e}function Ph(e){e.return!==null&&(Ws(e,1),j0(e,1,0))}function Rh(e){for(;e===gc;)gc=Wo[--Ho],Wo[Ho]=null,vc=Wo[--Ho],Wo[Ho]=null;for(;e===ro;)ro=Un[--Wn],Un[Wn]=null,zr=Un[--Wn],Un[Wn]=null,Br=Un[--Wn],Un[Wn]=null}var $n=null,In=null,at=!1,lr=null;function E0(e,t){var n=Hn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Fp(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,$n=e,In=ws(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,$n=e,In=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ro!==null?{id:Br,overflow:zr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Hn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,$n=e,In=null,!0):!1;default:return!1}}function vf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function xf(e){if(at){var t=In;if(t){var n=t;if(!Fp(e,t)){if(vf(e))throw Error(U(418));t=ws(n.nextSibling);var r=$n;t&&Fp(e,t)?E0(r,n):(e.flags=e.flags&-4097|2,at=!1,$n=e)}}else{if(vf(e))throw Error(U(418));e.flags=e.flags&-4097|2,at=!1,$n=e}}}function Bp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$n=e}function pl(e){if(e!==$n)return!1;if(!at)return Bp(e),at=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!hf(e.type,e.memoizedProps)),t&&(t=In)){if(vf(e))throw T0(),Error(U(418));for(;t;)E0(e,t),t=ws(t.nextSibling)}if(Bp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){In=ws(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}In=null}}else In=$n?ws(e.stateNode.nextSibling):null;return!0}function T0(){for(var e=In;e;)e=ws(e.nextSibling)}function gi(){In=$n=null,at=!1}function _h(e){lr===null?lr=[e]:lr.push(e)}var hN=Yr.ReactCurrentBatchConfig;function Gi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,e))}return e}function gl(e,t){throw e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zp(e){var t=e._init;return t(e._payload)}function P0(e){function t(x,g){if(e){var w=x.deletions;w===null?(x.deletions=[g],x.flags|=16):w.push(g)}}function n(x,g){if(!e)return null;for(;g!==null;)t(x,g),g=g.sibling;return null}function r(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function s(x,g){return x=Ns(x,g),x.index=0,x.sibling=null,x}function o(x,g,w){return x.index=w,e?(w=x.alternate,w!==null?(w=w.index,w<g?(x.flags|=2,g):w):(x.flags|=2,g)):(x.flags|=1048576,g)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,g,w,k){return g===null||g.tag!==6?(g=id(w,x.mode,k),g.return=x,g):(g=s(g,w),g.return=x,g)}function c(x,g,w,k){var S=w.type;return S===Fo?f(x,g,w.props.children,k,w.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===cs&&zp(S)===g.type)?(k=s(g,w.props),k.ref=Gi(x,g,w),k.return=x,k):(k=Hl(w.type,w.key,w.props,null,x.mode,k),k.ref=Gi(x,g,w),k.return=x,k)}function u(x,g,w,k){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=ad(w,x.mode,k),g.return=x,g):(g=s(g,w.children||[]),g.return=x,g)}function f(x,g,w,k,S){return g===null||g.tag!==7?(g=Zs(w,x.mode,k,S),g.return=x,g):(g=s(g,w),g.return=x,g)}function m(x,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=id(""+g,x.mode,w),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ol:return w=Hl(g.type,g.key,g.props,null,x.mode,w),w.ref=Gi(x,null,g),w.return=x,w;case Do:return g=ad(g,x.mode,w),g.return=x,g;case cs:var k=g._init;return m(x,k(g._payload),w)}if(ra(g)||Vi(g))return g=Zs(g,x.mode,w,null),g.return=x,g;gl(x,g)}return null}function h(x,g,w,k){var S=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:l(x,g,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ol:return w.key===S?c(x,g,w,k):null;case Do:return w.key===S?u(x,g,w,k):null;case cs:return S=w._init,h(x,g,S(w._payload),k)}if(ra(w)||Vi(w))return S!==null?null:f(x,g,w,k,null);gl(x,w)}return null}function y(x,g,w,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return x=x.get(w)||null,l(g,x,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ol:return x=x.get(k.key===null?w:k.key)||null,c(g,x,k,S);case Do:return x=x.get(k.key===null?w:k.key)||null,u(g,x,k,S);case cs:var C=k._init;return y(x,g,w,C(k._payload),S)}if(ra(k)||Vi(k))return x=x.get(w)||null,f(g,x,k,S,null);gl(g,k)}return null}function v(x,g,w,k){for(var S=null,C=null,N=g,j=g=0,R=null;N!==null&&j<w.length;j++){N.index>j?(R=N,N=null):R=N.sibling;var _=h(x,N,w[j],k);if(_===null){N===null&&(N=R);break}e&&N&&_.alternate===null&&t(x,N),g=o(_,g,j),C===null?S=_:C.sibling=_,C=_,N=R}if(j===w.length)return n(x,N),at&&Ws(x,j),S;if(N===null){for(;j<w.length;j++)N=m(x,w[j],k),N!==null&&(g=o(N,g,j),C===null?S=N:C.sibling=N,C=N);return at&&Ws(x,j),S}for(N=r(x,N);j<w.length;j++)R=y(N,x,j,w[j],k),R!==null&&(e&&R.alternate!==null&&N.delete(R.key===null?j:R.key),g=o(R,g,j),C===null?S=R:C.sibling=R,C=R);return e&&N.forEach(function(B){return t(x,B)}),at&&Ws(x,j),S}function p(x,g,w,k){var S=Vi(w);if(typeof S!="function")throw Error(U(150));if(w=S.call(w),w==null)throw Error(U(151));for(var C=S=null,N=g,j=g=0,R=null,_=w.next();N!==null&&!_.done;j++,_=w.next()){N.index>j?(R=N,N=null):R=N.sibling;var B=h(x,N,_.value,k);if(B===null){N===null&&(N=R);break}e&&N&&B.alternate===null&&t(x,N),g=o(B,g,j),C===null?S=B:C.sibling=B,C=B,N=R}if(_.done)return n(x,N),at&&Ws(x,j),S;if(N===null){for(;!_.done;j++,_=w.next())_=m(x,_.value,k),_!==null&&(g=o(_,g,j),C===null?S=_:C.sibling=_,C=_);return at&&Ws(x,j),S}for(N=r(x,N);!_.done;j++,_=w.next())_=y(N,x,j,_.value,k),_!==null&&(e&&_.alternate!==null&&N.delete(_.key===null?j:_.key),g=o(_,g,j),C===null?S=_:C.sibling=_,C=_);return e&&N.forEach(function(D){return t(x,D)}),at&&Ws(x,j),S}function b(x,g,w,k){if(typeof w=="object"&&w!==null&&w.type===Fo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ol:e:{for(var S=w.key,C=g;C!==null;){if(C.key===S){if(S=w.type,S===Fo){if(C.tag===7){n(x,C.sibling),g=s(C,w.props.children),g.return=x,x=g;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===cs&&zp(S)===C.type){n(x,C.sibling),g=s(C,w.props),g.ref=Gi(x,C,w),g.return=x,x=g;break e}n(x,C);break}else t(x,C);C=C.sibling}w.type===Fo?(g=Zs(w.props.children,x.mode,k,w.key),g.return=x,x=g):(k=Hl(w.type,w.key,w.props,null,x.mode,k),k.ref=Gi(x,g,w),k.return=x,x=k)}return a(x);case Do:e:{for(C=w.key;g!==null;){if(g.key===C)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(x,g.sibling),g=s(g,w.children||[]),g.return=x,x=g;break e}else{n(x,g);break}else t(x,g);g=g.sibling}g=ad(w,x.mode,k),g.return=x,x=g}return a(x);case cs:return C=w._init,b(x,g,C(w._payload),k)}if(ra(w))return v(x,g,w,k);if(Vi(w))return p(x,g,w,k);gl(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(x,g.sibling),g=s(g,w),g.return=x,x=g):(n(x,g),g=id(w,x.mode,k),g.return=x,x=g),a(x)):n(x,g)}return b}var vi=P0(!0),R0=P0(!1),xc=As(null),yc=null,Go=null,Mh=null;function Ah(){Mh=Go=yc=null}function Lh(e){var t=xc.current;rt(xc),e._currentValue=t}function yf(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function si(e,t){yc=e,Mh=Go=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Sn=!0),e.firstContext=null)}function Qn(e){var t=e._currentValue;if(Mh!==e)if(e={context:e,memoizedValue:t,next:null},Go===null){if(yc===null)throw Error(U(308));Go=e,yc.dependencies={lanes:0,firstContext:e}}else Go=Go.next=e;return t}var Ks=null;function Ih(e){Ks===null?Ks=[e]:Ks.push(e)}function _0(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Ih(t)):(n.next=s.next,s.next=n),t.interleaved=n,Hr(e,r)}function Hr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var us=!1;function Oh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bs(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,qe&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Hr(e,n)}return s=r.interleaved,s===null?(t.next=t,Ih(r)):(t.next=s.next,s.next=t),r.interleaved=t,Hr(e,n)}function Bl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,bh(e,n)}}function Vp(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function wc(e,t,n,r){var s=e.updateQueue;us=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(o!==null){var m=s.baseState;a=0,f=u=c=null,l=o;do{var h=l.lane,y=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,p=l;switch(h=t,y=n,p.tag){case 1:if(v=p.payload,typeof v=="function"){m=v.call(y,m,h);break e}m=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=p.payload,h=typeof v=="function"?v.call(y,m,h):v,h==null)break e;m=ht({},m,h);break e;case 2:us=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else y={eventTime:y,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=y,c=m):f=f.next=y,a|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(f===null&&(c=m),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);oo|=a,e.lanes=a,e.memoizedState=m}}function qp(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var Wa={},Er=As(Wa),_a=As(Wa),Ma=As(Wa);function Qs(e){if(e===Wa)throw Error(U(174));return e}function $h(e,t){switch(Ze(Ma,t),Ze(_a,e),Ze(Er,Wa),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Zd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Zd(t,e)}rt(Er),Ze(Er,t)}function xi(){rt(Er),rt(_a),rt(Ma)}function A0(e){Qs(Ma.current);var t=Qs(Er.current),n=Zd(t,e.type);t!==n&&(Ze(_a,e),Ze(Er,n))}function Dh(e){_a.current===e&&(rt(Er),rt(_a))}var dt=As(0);function bc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ed=[];function Fh(){for(var e=0;e<ed.length;e++)ed[e]._workInProgressVersionPrimary=null;ed.length=0}var zl=Yr.ReactCurrentDispatcher,td=Yr.ReactCurrentBatchConfig,so=0,ft=null,Lt=null,Bt=null,Sc=!1,ha=!1,Aa=0,mN=0;function en(){throw Error(U(321))}function Bh(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!fr(e[n],t[n]))return!1;return!0}function zh(e,t,n,r,s,o){if(so=o,ft=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,zl.current=e===null||e.memoizedState===null?xN:yN,e=n(r,s),ha){o=0;do{if(ha=!1,Aa=0,25<=o)throw Error(U(301));o+=1,Bt=Lt=null,t.updateQueue=null,zl.current=wN,e=n(r,s)}while(ha)}if(zl.current=kc,t=Lt!==null&&Lt.next!==null,so=0,Bt=Lt=ft=null,Sc=!1,t)throw Error(U(300));return e}function Vh(){var e=Aa!==0;return Aa=0,e}function Sr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?ft.memoizedState=Bt=e:Bt=Bt.next=e,Bt}function Yn(){if(Lt===null){var e=ft.alternate;e=e!==null?e.memoizedState:null}else e=Lt.next;var t=Bt===null?ft.memoizedState:Bt.next;if(t!==null)Bt=t,Lt=e;else{if(e===null)throw Error(U(310));Lt=e,e={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},Bt===null?ft.memoizedState=Bt=e:Bt=Bt.next=e}return Bt}function La(e,t){return typeof t=="function"?t(e):t}function nd(e){var t=Yn(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var r=Lt,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var l=a=null,c=null,u=o;do{var f=u.lane;if((so&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var m={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=m,a=r):c=c.next=m,ft.lanes|=f,oo|=f}u=u.next}while(u!==null&&u!==o);c===null?a=r:c.next=l,fr(r,t.memoizedState)||(Sn=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,ft.lanes|=o,oo|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function rd(e){var t=Yn(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);fr(o,t.memoizedState)||(Sn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function L0(){}function I0(e,t){var n=ft,r=Yn(),s=t(),o=!fr(r.memoizedState,s);if(o&&(r.memoizedState=s,Sn=!0),r=r.queue,qh(D0.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,Ia(9,$0.bind(null,n,r,s,t),void 0,null),zt===null)throw Error(U(349));so&30||O0(n,t,s)}return s}function O0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ft.updateQueue,t===null?(t={lastEffect:null,stores:null},ft.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function $0(e,t,n,r){t.value=n,t.getSnapshot=r,F0(t)&&B0(e)}function D0(e,t,n){return n(function(){F0(t)&&B0(e)})}function F0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!fr(e,n)}catch{return!0}}function B0(e){var t=Hr(e,1);t!==null&&dr(t,e,1,-1)}function Up(e){var t=Sr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:e},t.queue=e,e=e.dispatch=vN.bind(null,ft,e),[t.memoizedState,e]}function Ia(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ft.updateQueue,t===null?(t={lastEffect:null,stores:null},ft.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function z0(){return Yn().memoizedState}function Vl(e,t,n,r){var s=Sr();ft.flags|=e,s.memoizedState=Ia(1|t,n,void 0,r===void 0?null:r)}function Xc(e,t,n,r){var s=Yn();r=r===void 0?null:r;var o=void 0;if(Lt!==null){var a=Lt.memoizedState;if(o=a.destroy,r!==null&&Bh(r,a.deps)){s.memoizedState=Ia(t,n,o,r);return}}ft.flags|=e,s.memoizedState=Ia(1|t,n,o,r)}function Wp(e,t){return Vl(8390656,8,e,t)}function qh(e,t){return Xc(2048,8,e,t)}function V0(e,t){return Xc(4,2,e,t)}function q0(e,t){return Xc(4,4,e,t)}function U0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function W0(e,t,n){return n=n!=null?n.concat([e]):null,Xc(4,4,U0.bind(null,t,e),n)}function Uh(){}function H0(e,t){var n=Yn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Bh(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function G0(e,t){var n=Yn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Bh(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function K0(e,t,n){return so&21?(fr(n,t)||(n=Jv(),ft.lanes|=n,oo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Sn=!0),e.memoizedState=n)}function pN(e,t){var n=Ge;Ge=n!==0&&4>n?n:4,e(!0);var r=td.transition;td.transition={};try{e(!1),t()}finally{Ge=n,td.transition=r}}function Q0(){return Yn().memoizedState}function gN(e,t,n){var r=ks(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Y0(e))X0(t,n);else if(n=_0(e,t,n,r),n!==null){var s=gn();dr(n,e,r,s),Z0(n,t,r)}}function vN(e,t,n){var r=ks(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Y0(e))X0(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,l=o(a,n);if(s.hasEagerState=!0,s.eagerState=l,fr(l,a)){var c=t.interleaved;c===null?(s.next=s,Ih(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=_0(e,t,s,r),n!==null&&(s=gn(),dr(n,e,r,s),Z0(n,t,r))}}function Y0(e){var t=e.alternate;return e===ft||t!==null&&t===ft}function X0(e,t){ha=Sc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Z0(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,bh(e,n)}}var kc={readContext:Qn,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},xN={readContext:Qn,useCallback:function(e,t){return Sr().memoizedState=[e,t===void 0?null:t],e},useContext:Qn,useEffect:Wp,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Vl(4194308,4,U0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vl(4,2,e,t)},useMemo:function(e,t){var n=Sr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Sr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=gN.bind(null,ft,e),[r.memoizedState,e]},useRef:function(e){var t=Sr();return e={current:e},t.memoizedState=e},useState:Up,useDebugValue:Uh,useDeferredValue:function(e){return Sr().memoizedState=e},useTransition:function(){var e=Up(!1),t=e[0];return e=pN.bind(null,e[1]),Sr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ft,s=Sr();if(at){if(n===void 0)throw Error(U(407));n=n()}else{if(n=t(),zt===null)throw Error(U(349));so&30||O0(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Wp(D0.bind(null,r,o,e),[e]),r.flags|=2048,Ia(9,$0.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Sr(),t=zt.identifierPrefix;if(at){var n=zr,r=Br;n=(r&~(1<<32-ur(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Aa++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=mN++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yN={readContext:Qn,useCallback:H0,useContext:Qn,useEffect:qh,useImperativeHandle:W0,useInsertionEffect:V0,useLayoutEffect:q0,useMemo:G0,useReducer:nd,useRef:z0,useState:function(){return nd(La)},useDebugValue:Uh,useDeferredValue:function(e){var t=Yn();return K0(t,Lt.memoizedState,e)},useTransition:function(){var e=nd(La)[0],t=Yn().memoizedState;return[e,t]},useMutableSource:L0,useSyncExternalStore:I0,useId:Q0,unstable_isNewReconciler:!1},wN={readContext:Qn,useCallback:H0,useContext:Qn,useEffect:qh,useImperativeHandle:W0,useInsertionEffect:V0,useLayoutEffect:q0,useMemo:G0,useReducer:rd,useRef:z0,useState:function(){return rd(La)},useDebugValue:Uh,useDeferredValue:function(e){var t=Yn();return Lt===null?t.memoizedState=e:K0(t,Lt.memoizedState,e)},useTransition:function(){var e=rd(La)[0],t=Yn().memoizedState;return[e,t]},useMutableSource:L0,useSyncExternalStore:I0,useId:Q0,unstable_isNewReconciler:!1};function or(e,t){if(e&&e.defaultProps){t=ht({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function wf(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ht({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Zc={isMounted:function(e){return(e=e._reactInternals)?vo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=gn(),s=ks(e),o=Vr(r,s);o.payload=t,n!=null&&(o.callback=n),t=bs(e,o,s),t!==null&&(dr(t,e,s,r),Bl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=gn(),s=ks(e),o=Vr(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=bs(e,o,s),t!==null&&(dr(t,e,s,r),Bl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=gn(),r=ks(e),s=Vr(n,r);s.tag=2,t!=null&&(s.callback=t),t=bs(e,s,r),t!==null&&(dr(t,e,r,n),Bl(t,e,r))}};function Hp(e,t,n,r,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!Ea(n,r)||!Ea(s,o):!0}function J0(e,t,n){var r=!1,s=Es,o=t.contextType;return typeof o=="object"&&o!==null?o=Qn(o):(s=Nn(t)?no:an.current,r=t.contextTypes,o=(r=r!=null)?pi(e,s):Es),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Zc,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Gp(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Zc.enqueueReplaceState(t,t.state,null)}function bf(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Oh(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Qn(o):(o=Nn(t)?no:an.current,s.context=pi(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(wf(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Zc.enqueueReplaceState(s,s.state,null),wc(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function yi(e,t){try{var n="",r=t;do n+=KS(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function sd(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Sf(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var bN=typeof WeakMap=="function"?WeakMap:Map;function ex(e,t,n){n=Vr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Cc||(Cc=!0,Mf=r),Sf(e,t)},n}function tx(e,t,n){n=Vr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Sf(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Sf(e,t),typeof r!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Kp(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new bN;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=IN.bind(null,e,t,n),t.then(e,e))}function Qp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Yp(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Vr(-1,1),t.tag=2,bs(n,t,1))),n.lanes|=1),e)}var SN=Yr.ReactCurrentOwner,Sn=!1;function hn(e,t,n,r){t.child=e===null?R0(t,null,n,r):vi(t,e.child,n,r)}function Xp(e,t,n,r,s){n=n.render;var o=t.ref;return si(t,s),r=zh(e,t,n,r,o,s),n=Vh(),e!==null&&!Sn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Gr(e,t,s)):(at&&n&&Ph(t),t.flags|=1,hn(e,t,r,s),t.child)}function Zp(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!Zh(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,nx(e,t,o,r,s)):(e=Hl(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ea,n(a,r)&&e.ref===t.ref)return Gr(e,t,s)}return t.flags|=1,e=Ns(o,r),e.ref=t.ref,e.return=t,t.child=e}function nx(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Ea(o,r)&&e.ref===t.ref)if(Sn=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(Sn=!0);else return t.lanes=e.lanes,Gr(e,t,s)}return kf(e,t,n,r,s)}function rx(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(Qo,Mn),Mn|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ze(Qo,Mn),Mn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ze(Qo,Mn),Mn|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ze(Qo,Mn),Mn|=r;return hn(e,t,s,n),t.child}function sx(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function kf(e,t,n,r,s){var o=Nn(n)?no:an.current;return o=pi(t,o),si(t,s),n=zh(e,t,n,r,o,s),r=Vh(),e!==null&&!Sn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Gr(e,t,s)):(at&&r&&Ph(t),t.flags|=1,hn(e,t,n,s),t.child)}function Jp(e,t,n,r,s){if(Nn(n)){var o=!0;pc(t)}else o=!1;if(si(t,s),t.stateNode===null)ql(e,t),J0(t,n,r),bf(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Qn(u):(u=Nn(n)?no:an.current,u=pi(t,u));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Gp(t,a,r,u),us=!1;var h=t.memoizedState;a.state=h,wc(t,r,a,s),c=t.memoizedState,l!==r||h!==c||kn.current||us?(typeof f=="function"&&(wf(t,n,f,r),c=t.memoizedState),(l=us||Hp(t,n,l,r,h,c,u))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,M0(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:or(t.type,l),a.props=u,m=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Qn(c):(c=Nn(n)?no:an.current,c=pi(t,c));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||h!==c)&&Gp(t,a,r,c),us=!1,h=t.memoizedState,a.state=h,wc(t,r,a,s);var v=t.memoizedState;l!==m||h!==v||kn.current||us?(typeof y=="function"&&(wf(t,n,y,r),v=t.memoizedState),(u=us||Hp(t,n,u,r,h,v,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),a.props=r,a.state=v,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nf(e,t,n,r,o,s)}function Nf(e,t,n,r,s,o){sx(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Dp(t,n,!1),Gr(e,t,o);r=t.stateNode,SN.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=vi(t,e.child,null,o),t.child=vi(t,null,l,o)):hn(e,t,l,o),t.memoizedState=r.state,s&&Dp(t,n,!0),t.child}function ox(e){var t=e.stateNode;t.pendingContext?$p(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$p(e,t.context,!1),$h(e,t.containerInfo)}function eg(e,t,n,r,s){return gi(),_h(s),t.flags|=256,hn(e,t,n,r),t.child}var Cf={dehydrated:null,treeContext:null,retryLane:0};function jf(e){return{baseLanes:e,cachePool:null,transitions:null}}function ix(e,t,n){var r=t.pendingProps,s=dt.current,o=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ze(dt,s&1),e===null)return xf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=tu(a,r,0,null),e=Zs(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=jf(n),t.memoizedState=Cf,e):Wh(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return kN(e,t,a,r,l,s,n);if(o){o=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ns(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=Ns(l,o):(o=Zs(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?jf(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Cf,r}return o=e.child,e=o.sibling,r=Ns(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Wh(e,t){return t=tu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function vl(e,t,n,r){return r!==null&&_h(r),vi(t,e.child,null,n),e=Wh(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kN(e,t,n,r,s,o,a){if(n)return t.flags&256?(t.flags&=-257,r=sd(Error(U(422))),vl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=tu({mode:"visible",children:r.children},s,0,null),o=Zs(o,s,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&vi(t,e.child,null,a),t.child.memoizedState=jf(a),t.memoizedState=Cf,o);if(!(t.mode&1))return vl(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(U(419)),r=sd(o,r,void 0),vl(e,t,a,r)}if(l=(a&e.childLanes)!==0,Sn||l){if(r=zt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Hr(e,s),dr(r,e,s,-1))}return Xh(),r=sd(Error(U(421))),vl(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=ON.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,In=ws(s.nextSibling),$n=t,at=!0,lr=null,e!==null&&(Un[Wn++]=Br,Un[Wn++]=zr,Un[Wn++]=ro,Br=e.id,zr=e.overflow,ro=t),t=Wh(t,r.children),t.flags|=4096,t)}function tg(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),yf(e.return,t,n)}function od(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function ax(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(hn(e,t,r.children,n),r=dt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tg(e,n,t);else if(e.tag===19)tg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ze(dt,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&bc(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),od(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&bc(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}od(t,!0,n,null,o);break;case"together":od(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ql(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),oo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,n=Ns(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ns(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function NN(e,t,n){switch(t.tag){case 3:ox(t),gi();break;case 5:A0(t);break;case 1:Nn(t.type)&&pc(t);break;case 4:$h(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ze(xc,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ze(dt,dt.current&1),t.flags|=128,null):n&t.child.childLanes?ix(e,t,n):(Ze(dt,dt.current&1),e=Gr(e,t,n),e!==null?e.sibling:null);Ze(dt,dt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return ax(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ze(dt,dt.current),r)break;return null;case 22:case 23:return t.lanes=0,rx(e,t,n)}return Gr(e,t,n)}var lx,Ef,cx,ux;lx=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ef=function(){};cx=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Qs(Er.current);var o=null;switch(n){case"input":s=Kd(e,s),r=Kd(e,r),o=[];break;case"select":s=ht({},s,{value:void 0}),r=ht({},r,{value:void 0}),o=[];break;case"textarea":s=Xd(e,s),r=Xd(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=hc)}Jd(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(wa.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(wa.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&nt("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};ux=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ki(e,t){if(!at)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function CN(e,t,n){var r=t.pendingProps;switch(Rh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(t),null;case 1:return Nn(t.type)&&mc(),tn(t),null;case 3:return r=t.stateNode,xi(),rt(kn),rt(an),Fh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(pl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,lr!==null&&(If(lr),lr=null))),Ef(e,t),tn(t),null;case 5:Dh(t);var s=Qs(Ma.current);if(n=t.type,e!==null&&t.stateNode!=null)cx(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(U(166));return tn(t),null}if(e=Qs(Er.current),pl(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[kr]=t,r[Ra]=o,e=(t.mode&1)!==0,n){case"dialog":nt("cancel",r),nt("close",r);break;case"iframe":case"object":case"embed":nt("load",r);break;case"video":case"audio":for(s=0;s<oa.length;s++)nt(oa[s],r);break;case"source":nt("error",r);break;case"img":case"image":case"link":nt("error",r),nt("load",r);break;case"details":nt("toggle",r);break;case"input":up(r,o),nt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},nt("invalid",r);break;case"textarea":fp(r,o),nt("invalid",r)}Jd(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&ml(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&ml(r.textContent,l,e),s=["children",""+l]):wa.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&nt("scroll",r)}switch(n){case"input":il(r),dp(r,o,!0);break;case"textarea":il(r),hp(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=hc)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Dv(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[kr]=t,e[Ra]=r,lx(e,t,!1,!1),t.stateNode=e;e:{switch(a=ef(n,r),n){case"dialog":nt("cancel",e),nt("close",e),s=r;break;case"iframe":case"object":case"embed":nt("load",e),s=r;break;case"video":case"audio":for(s=0;s<oa.length;s++)nt(oa[s],e);s=r;break;case"source":nt("error",e),s=r;break;case"img":case"image":case"link":nt("error",e),nt("load",e),s=r;break;case"details":nt("toggle",e),s=r;break;case"input":up(e,r),s=Kd(e,r),nt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ht({},r,{value:void 0}),nt("invalid",e);break;case"textarea":fp(e,r),s=Xd(e,r),nt("invalid",e);break;default:s=r}Jd(n,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?zv(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Fv(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ba(e,c):typeof c=="number"&&ba(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(wa.hasOwnProperty(o)?c!=null&&o==="onScroll"&&nt("scroll",e):c!=null&&ph(e,o,c,a))}switch(n){case"input":il(e),dp(e,r,!1);break;case"textarea":il(e),hp(e);break;case"option":r.value!=null&&e.setAttribute("value",""+js(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?ei(e,!!r.multiple,o,!1):r.defaultValue!=null&&ei(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=hc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tn(t),null;case 6:if(e&&t.stateNode!=null)ux(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(U(166));if(n=Qs(Ma.current),Qs(Er.current),pl(t)){if(r=t.stateNode,n=t.memoizedProps,r[kr]=t,(o=r.nodeValue!==n)&&(e=$n,e!==null))switch(e.tag){case 3:ml(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ml(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[kr]=t,t.stateNode=r}return tn(t),null;case 13:if(rt(dt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(at&&In!==null&&t.mode&1&&!(t.flags&128))T0(),gi(),t.flags|=98560,o=!1;else if(o=pl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(U(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(U(317));o[kr]=t}else gi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tn(t),o=!1}else lr!==null&&(If(lr),lr=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||dt.current&1?It===0&&(It=3):Xh())),t.updateQueue!==null&&(t.flags|=4),tn(t),null);case 4:return xi(),Ef(e,t),e===null&&Ta(t.stateNode.containerInfo),tn(t),null;case 10:return Lh(t.type._context),tn(t),null;case 17:return Nn(t.type)&&mc(),tn(t),null;case 19:if(rt(dt),o=t.memoizedState,o===null)return tn(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)Ki(o,!1);else{if(It!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=bc(e),a!==null){for(t.flags|=128,Ki(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ze(dt,dt.current&1|2),t.child}e=e.sibling}o.tail!==null&&wt()>wi&&(t.flags|=128,r=!0,Ki(o,!1),t.lanes=4194304)}else{if(!r)if(e=bc(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ki(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!at)return tn(t),null}else 2*wt()-o.renderingStartTime>wi&&n!==1073741824&&(t.flags|=128,r=!0,Ki(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=wt(),t.sibling=null,n=dt.current,Ze(dt,r?n&1|2:n&1),t):(tn(t),null);case 22:case 23:return Yh(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Mn&1073741824&&(tn(t),t.subtreeFlags&6&&(t.flags|=8192)):tn(t),null;case 24:return null;case 25:return null}throw Error(U(156,t.tag))}function jN(e,t){switch(Rh(t),t.tag){case 1:return Nn(t.type)&&mc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xi(),rt(kn),rt(an),Fh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Dh(t),null;case 13:if(rt(dt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));gi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return rt(dt),null;case 4:return xi(),null;case 10:return Lh(t.type._context),null;case 22:case 23:return Yh(),null;case 24:return null;default:return null}}var xl=!1,sn=!1,EN=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Ko(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pt(e,t,r)}else n.current=null}function Tf(e,t,n){try{n()}catch(r){pt(e,t,r)}}var ng=!1;function TN(e,t){if(df=uc,e=p0(),Th(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,f=0,m=e,h=null;t:for(;;){for(var y;m!==n||s!==0&&m.nodeType!==3||(l=a+s),m!==o||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(y=m.firstChild)!==null;)h=m,m=y;for(;;){if(m===e)break t;if(h===n&&++u===s&&(l=a),h===o&&++f===r&&(c=a),(y=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ff={focusedElem:e,selectionRange:n},uc=!1,ee=t;ee!==null;)if(t=ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ee=e;else for(;ee!==null;){t=ee;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var p=v.memoizedProps,b=v.memoizedState,x=t.stateNode,g=x.getSnapshotBeforeUpdate(t.elementType===t.type?p:or(t.type,p),b);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(k){pt(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,ee=e;break}ee=t.return}return v=ng,ng=!1,v}function ma(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Tf(t,n,o)}s=s.next}while(s!==r)}}function Jc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Pf(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function dx(e){var t=e.alternate;t!==null&&(e.alternate=null,dx(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[kr],delete t[Ra],delete t[pf],delete t[uN],delete t[dN])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fx(e){return e.tag===5||e.tag===3||e.tag===4}function rg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=hc));else if(r!==4&&(e=e.child,e!==null))for(Rf(e,t,n),e=e.sibling;e!==null;)Rf(e,t,n),e=e.sibling}function _f(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(_f(e,t,n),e=e.sibling;e!==null;)_f(e,t,n),e=e.sibling}var Ut=null,ir=!1;function ts(e,t,n){for(n=n.child;n!==null;)hx(e,t,n),n=n.sibling}function hx(e,t,n){if(jr&&typeof jr.onCommitFiberUnmount=="function")try{jr.onCommitFiberUnmount(Wc,n)}catch{}switch(n.tag){case 5:sn||Ko(n,t);case 6:var r=Ut,s=ir;Ut=null,ts(e,t,n),Ut=r,ir=s,Ut!==null&&(ir?(e=Ut,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ut.removeChild(n.stateNode));break;case 18:Ut!==null&&(ir?(e=Ut,n=n.stateNode,e.nodeType===8?Zu(e.parentNode,n):e.nodeType===1&&Zu(e,n),Ca(e)):Zu(Ut,n.stateNode));break;case 4:r=Ut,s=ir,Ut=n.stateNode.containerInfo,ir=!0,ts(e,t,n),Ut=r,ir=s;break;case 0:case 11:case 14:case 15:if(!sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Tf(n,t,a),s=s.next}while(s!==r)}ts(e,t,n);break;case 1:if(!sn&&(Ko(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){pt(n,t,l)}ts(e,t,n);break;case 21:ts(e,t,n);break;case 22:n.mode&1?(sn=(r=sn)||n.memoizedState!==null,ts(e,t,n),sn=r):ts(e,t,n);break;default:ts(e,t,n)}}function sg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new EN),t.forEach(function(r){var s=$N.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function nr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ut=l.stateNode,ir=!1;break e;case 3:Ut=l.stateNode.containerInfo,ir=!0;break e;case 4:Ut=l.stateNode.containerInfo,ir=!0;break e}l=l.return}if(Ut===null)throw Error(U(160));hx(o,a,s),Ut=null,ir=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){pt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)mx(t,e),t=t.sibling}function mx(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nr(t,e),br(e),r&4){try{ma(3,e,e.return),Jc(3,e)}catch(p){pt(e,e.return,p)}try{ma(5,e,e.return)}catch(p){pt(e,e.return,p)}}break;case 1:nr(t,e),br(e),r&512&&n!==null&&Ko(n,n.return);break;case 5:if(nr(t,e),br(e),r&512&&n!==null&&Ko(n,n.return),e.flags&32){var s=e.stateNode;try{ba(s,"")}catch(p){pt(e,e.return,p)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Ov(s,o),ef(l,a);var u=ef(l,o);for(a=0;a<c.length;a+=2){var f=c[a],m=c[a+1];f==="style"?zv(s,m):f==="dangerouslySetInnerHTML"?Fv(s,m):f==="children"?ba(s,m):ph(s,f,m,u)}switch(l){case"input":Qd(s,o);break;case"textarea":$v(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?ei(s,!!o.multiple,y,!1):h!==!!o.multiple&&(o.defaultValue!=null?ei(s,!!o.multiple,o.defaultValue,!0):ei(s,!!o.multiple,o.multiple?[]:"",!1))}s[Ra]=o}catch(p){pt(e,e.return,p)}}break;case 6:if(nr(t,e),br(e),r&4){if(e.stateNode===null)throw Error(U(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(p){pt(e,e.return,p)}}break;case 3:if(nr(t,e),br(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ca(t.containerInfo)}catch(p){pt(e,e.return,p)}break;case 4:nr(t,e),br(e);break;case 13:nr(t,e),br(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Kh=wt())),r&4&&sg(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(sn=(u=sn)||f,nr(t,e),sn=u):nr(t,e),br(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(ee=e,f=e.child;f!==null;){for(m=ee=f;ee!==null;){switch(h=ee,y=h.child,h.tag){case 0:case 11:case 14:case 15:ma(4,h,h.return);break;case 1:Ko(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(p){pt(r,n,p)}}break;case 5:Ko(h,h.return);break;case 22:if(h.memoizedState!==null){ig(m);continue}}y!==null?(y.return=h,ee=y):ig(m)}f=f.sibling}e:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Bv("display",a))}catch(p){pt(e,e.return,p)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(p){pt(e,e.return,p)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:nr(t,e),br(e),r&4&&sg(e);break;case 21:break;default:nr(t,e),br(e)}}function br(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(fx(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ba(s,""),r.flags&=-33);var o=rg(e);_f(e,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=rg(e);Rf(e,l,a);break;default:throw Error(U(161))}}catch(c){pt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function PN(e,t,n){ee=e,px(e)}function px(e,t,n){for(var r=(e.mode&1)!==0;ee!==null;){var s=ee,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||xl;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||sn;l=xl;var u=sn;if(xl=a,(sn=c)&&!u)for(ee=s;ee!==null;)a=ee,c=a.child,a.tag===22&&a.memoizedState!==null?ag(s):c!==null?(c.return=a,ee=c):ag(s);for(;o!==null;)ee=o,px(o),o=o.sibling;ee=s,xl=l,sn=u}og(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ee=o):og(e)}}function og(e){for(;ee!==null;){var t=ee;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:sn||Jc(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!sn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:or(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&qp(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}qp(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ca(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}sn||t.flags&512&&Pf(t)}catch(h){pt(t,t.return,h)}}if(t===e){ee=null;break}if(n=t.sibling,n!==null){n.return=t.return,ee=n;break}ee=t.return}}function ig(e){for(;ee!==null;){var t=ee;if(t===e){ee=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ee=n;break}ee=t.return}}function ag(e){for(;ee!==null;){var t=ee;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Jc(4,t)}catch(c){pt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){pt(t,s,c)}}var o=t.return;try{Pf(t)}catch(c){pt(t,o,c)}break;case 5:var a=t.return;try{Pf(t)}catch(c){pt(t,a,c)}}}catch(c){pt(t,t.return,c)}if(t===e){ee=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ee=l;break}ee=t.return}}var RN=Math.ceil,Nc=Yr.ReactCurrentDispatcher,Hh=Yr.ReactCurrentOwner,Gn=Yr.ReactCurrentBatchConfig,qe=0,zt=null,Tt=null,Ht=0,Mn=0,Qo=As(0),It=0,Oa=null,oo=0,eu=0,Gh=0,pa=null,bn=null,Kh=0,wi=1/0,Or=null,Cc=!1,Mf=null,Ss=null,yl=!1,ps=null,jc=0,ga=0,Af=null,Ul=-1,Wl=0;function gn(){return qe&6?wt():Ul!==-1?Ul:Ul=wt()}function ks(e){return e.mode&1?qe&2&&Ht!==0?Ht&-Ht:hN.transition!==null?(Wl===0&&(Wl=Jv()),Wl):(e=Ge,e!==0||(e=window.event,e=e===void 0?16:i0(e.type)),e):1}function dr(e,t,n,r){if(50<ga)throw ga=0,Af=null,Error(U(185));Va(e,n,r),(!(qe&2)||e!==zt)&&(e===zt&&(!(qe&2)&&(eu|=n),It===4&&hs(e,Ht)),Cn(e,r),n===1&&qe===0&&!(t.mode&1)&&(wi=wt()+500,Yc&&Ls()))}function Cn(e,t){var n=e.callbackNode;hk(e,t);var r=cc(e,e===zt?Ht:0);if(r===0)n!==null&&gp(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&gp(n),t===1)e.tag===0?fN(lg.bind(null,e)):C0(lg.bind(null,e)),lN(function(){!(qe&6)&&Ls()}),n=null;else{switch(e0(r)){case 1:n=wh;break;case 4:n=Xv;break;case 16:n=lc;break;case 536870912:n=Zv;break;default:n=lc}n=kx(n,gx.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function gx(e,t){if(Ul=-1,Wl=0,qe&6)throw Error(U(327));var n=e.callbackNode;if(oi()&&e.callbackNode!==n)return null;var r=cc(e,e===zt?Ht:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ec(e,r);else{t=r;var s=qe;qe|=2;var o=xx();(zt!==e||Ht!==t)&&(Or=null,wi=wt()+500,Xs(e,t));do try{AN();break}catch(l){vx(e,l)}while(!0);Ah(),Nc.current=o,qe=s,Tt!==null?t=0:(zt=null,Ht=0,t=It)}if(t!==0){if(t===2&&(s=of(e),s!==0&&(r=s,t=Lf(e,s))),t===1)throw n=Oa,Xs(e,0),hs(e,r),Cn(e,wt()),n;if(t===6)hs(e,r);else{if(s=e.current.alternate,!(r&30)&&!_N(s)&&(t=Ec(e,r),t===2&&(o=of(e),o!==0&&(r=o,t=Lf(e,o))),t===1))throw n=Oa,Xs(e,0),hs(e,r),Cn(e,wt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(U(345));case 2:Hs(e,bn,Or);break;case 3:if(hs(e,r),(r&130023424)===r&&(t=Kh+500-wt(),10<t)){if(cc(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){gn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=mf(Hs.bind(null,e,bn,Or),t);break}Hs(e,bn,Or);break;case 4:if(hs(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-ur(r);o=1<<a,a=t[a],a>s&&(s=a),r&=~o}if(r=s,r=wt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RN(r/1960))-r,10<r){e.timeoutHandle=mf(Hs.bind(null,e,bn,Or),r);break}Hs(e,bn,Or);break;case 5:Hs(e,bn,Or);break;default:throw Error(U(329))}}}return Cn(e,wt()),e.callbackNode===n?gx.bind(null,e):null}function Lf(e,t){var n=pa;return e.current.memoizedState.isDehydrated&&(Xs(e,t).flags|=256),e=Ec(e,t),e!==2&&(t=bn,bn=n,t!==null&&If(t)),e}function If(e){bn===null?bn=e:bn.push.apply(bn,e)}function _N(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!fr(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hs(e,t){for(t&=~Gh,t&=~eu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ur(t),r=1<<n;e[n]=-1,t&=~r}}function lg(e){if(qe&6)throw Error(U(327));oi();var t=cc(e,0);if(!(t&1))return Cn(e,wt()),null;var n=Ec(e,t);if(e.tag!==0&&n===2){var r=of(e);r!==0&&(t=r,n=Lf(e,r))}if(n===1)throw n=Oa,Xs(e,0),hs(e,t),Cn(e,wt()),n;if(n===6)throw Error(U(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hs(e,bn,Or),Cn(e,wt()),null}function Qh(e,t){var n=qe;qe|=1;try{return e(t)}finally{qe=n,qe===0&&(wi=wt()+500,Yc&&Ls())}}function io(e){ps!==null&&ps.tag===0&&!(qe&6)&&oi();var t=qe;qe|=1;var n=Gn.transition,r=Ge;try{if(Gn.transition=null,Ge=1,e)return e()}finally{Ge=r,Gn.transition=n,qe=t,!(qe&6)&&Ls()}}function Yh(){Mn=Qo.current,rt(Qo)}function Xs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,aN(n)),Tt!==null)for(n=Tt.return;n!==null;){var r=n;switch(Rh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&mc();break;case 3:xi(),rt(kn),rt(an),Fh();break;case 5:Dh(r);break;case 4:xi();break;case 13:rt(dt);break;case 19:rt(dt);break;case 10:Lh(r.type._context);break;case 22:case 23:Yh()}n=n.return}if(zt=e,Tt=e=Ns(e.current,null),Ht=Mn=t,It=0,Oa=null,Gh=eu=oo=0,bn=pa=null,Ks!==null){for(t=0;t<Ks.length;t++)if(n=Ks[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}Ks=null}return e}function vx(e,t){do{var n=Tt;try{if(Ah(),zl.current=kc,Sc){for(var r=ft.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Sc=!1}if(so=0,Bt=Lt=ft=null,ha=!1,Aa=0,Hh.current=null,n===null||n.return===null){It=1,Oa=t,Tt=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Ht,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=Qp(a);if(y!==null){y.flags&=-257,Yp(y,a,l,o,t),y.mode&1&&Kp(o,u,t),t=y,c=u;var v=t.updateQueue;if(v===null){var p=new Set;p.add(c),t.updateQueue=p}else v.add(c);break e}else{if(!(t&1)){Kp(o,u,t),Xh();break e}c=Error(U(426))}}else if(at&&l.mode&1){var b=Qp(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Yp(b,a,l,o,t),_h(yi(c,l));break e}}o=c=yi(c,l),It!==4&&(It=2),pa===null?pa=[o]:pa.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var x=ex(o,c,t);Vp(o,x);break e;case 1:l=c;var g=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ss===null||!Ss.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var k=tx(o,l,t);Vp(o,k);break e}}o=o.return}while(o!==null)}wx(n)}catch(S){t=S,Tt===n&&n!==null&&(Tt=n=n.return);continue}break}while(!0)}function xx(){var e=Nc.current;return Nc.current=kc,e===null?kc:e}function Xh(){(It===0||It===3||It===2)&&(It=4),zt===null||!(oo&268435455)&&!(eu&268435455)||hs(zt,Ht)}function Ec(e,t){var n=qe;qe|=2;var r=xx();(zt!==e||Ht!==t)&&(Or=null,Xs(e,t));do try{MN();break}catch(s){vx(e,s)}while(!0);if(Ah(),qe=n,Nc.current=r,Tt!==null)throw Error(U(261));return zt=null,Ht=0,It}function MN(){for(;Tt!==null;)yx(Tt)}function AN(){for(;Tt!==null&&!sk();)yx(Tt)}function yx(e){var t=Sx(e.alternate,e,Mn);e.memoizedProps=e.pendingProps,t===null?wx(e):Tt=t,Hh.current=null}function wx(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=jN(n,t),n!==null){n.flags&=32767,Tt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{It=6,Tt=null;return}}else if(n=CN(n,t,Mn),n!==null){Tt=n;return}if(t=t.sibling,t!==null){Tt=t;return}Tt=t=e}while(t!==null);It===0&&(It=5)}function Hs(e,t,n){var r=Ge,s=Gn.transition;try{Gn.transition=null,Ge=1,LN(e,t,n,r)}finally{Gn.transition=s,Ge=r}return null}function LN(e,t,n,r){do oi();while(ps!==null);if(qe&6)throw Error(U(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(U(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(mk(e,o),e===zt&&(Tt=zt=null,Ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yl||(yl=!0,kx(lc,function(){return oi(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Gn.transition,Gn.transition=null;var a=Ge;Ge=1;var l=qe;qe|=4,Hh.current=null,TN(e,n),mx(n,e),eN(ff),uc=!!df,ff=df=null,e.current=n,PN(n),ok(),qe=l,Ge=a,Gn.transition=o}else e.current=n;if(yl&&(yl=!1,ps=e,jc=s),o=e.pendingLanes,o===0&&(Ss=null),lk(n.stateNode),Cn(e,wt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Cc)throw Cc=!1,e=Mf,Mf=null,e;return jc&1&&e.tag!==0&&oi(),o=e.pendingLanes,o&1?e===Af?ga++:(ga=0,Af=e):ga=0,Ls(),null}function oi(){if(ps!==null){var e=e0(jc),t=Gn.transition,n=Ge;try{if(Gn.transition=null,Ge=16>e?16:e,ps===null)var r=!1;else{if(e=ps,ps=null,jc=0,qe&6)throw Error(U(331));var s=qe;for(qe|=4,ee=e.current;ee!==null;){var o=ee,a=o.child;if(ee.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ee=u;ee!==null;){var f=ee;switch(f.tag){case 0:case 11:case 15:ma(8,f,o)}var m=f.child;if(m!==null)m.return=f,ee=m;else for(;ee!==null;){f=ee;var h=f.sibling,y=f.return;if(dx(f),f===u){ee=null;break}if(h!==null){h.return=y,ee=h;break}ee=y}}}var v=o.alternate;if(v!==null){var p=v.child;if(p!==null){v.child=null;do{var b=p.sibling;p.sibling=null,p=b}while(p!==null)}}ee=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ee=a;else e:for(;ee!==null;){if(o=ee,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ma(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,ee=x;break e}ee=o.return}}var g=e.current;for(ee=g;ee!==null;){a=ee;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,ee=w;else e:for(a=g;ee!==null;){if(l=ee,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Jc(9,l)}}catch(S){pt(l,l.return,S)}if(l===a){ee=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,ee=k;break e}ee=l.return}}if(qe=s,Ls(),jr&&typeof jr.onPostCommitFiberRoot=="function")try{jr.onPostCommitFiberRoot(Wc,e)}catch{}r=!0}return r}finally{Ge=n,Gn.transition=t}}return!1}function cg(e,t,n){t=yi(n,t),t=ex(e,t,1),e=bs(e,t,1),t=gn(),e!==null&&(Va(e,1,t),Cn(e,t))}function pt(e,t,n){if(e.tag===3)cg(e,e,n);else for(;t!==null;){if(t.tag===3){cg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ss===null||!Ss.has(r))){e=yi(n,e),e=tx(t,e,1),t=bs(t,e,1),e=gn(),t!==null&&(Va(t,1,e),Cn(t,e));break}}t=t.return}}function IN(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=gn(),e.pingedLanes|=e.suspendedLanes&n,zt===e&&(Ht&n)===n&&(It===4||It===3&&(Ht&130023424)===Ht&&500>wt()-Kh?Xs(e,0):Gh|=n),Cn(e,t)}function bx(e,t){t===0&&(e.mode&1?(t=cl,cl<<=1,!(cl&130023424)&&(cl=4194304)):t=1);var n=gn();e=Hr(e,t),e!==null&&(Va(e,t,n),Cn(e,n))}function ON(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),bx(e,n)}function $N(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(t),bx(e,n)}var Sx;Sx=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||kn.current)Sn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Sn=!1,NN(e,t,n);Sn=!!(e.flags&131072)}else Sn=!1,at&&t.flags&1048576&&j0(t,vc,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ql(e,t),e=t.pendingProps;var s=pi(t,an.current);si(t,n),s=zh(null,t,r,e,s,n);var o=Vh();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nn(r)?(o=!0,pc(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Oh(t),s.updater=Zc,t.stateNode=s,s._reactInternals=t,bf(t,r,e,n),t=Nf(null,t,r,!0,o,n)):(t.tag=0,at&&o&&Ph(t),hn(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ql(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=FN(r),e=or(r,e),s){case 0:t=kf(null,t,r,e,n);break e;case 1:t=Jp(null,t,r,e,n);break e;case 11:t=Xp(null,t,r,e,n);break e;case 14:t=Zp(null,t,r,or(r.type,e),n);break e}throw Error(U(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:or(r,s),kf(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:or(r,s),Jp(e,t,r,s,n);case 3:e:{if(ox(t),e===null)throw Error(U(387));r=t.pendingProps,o=t.memoizedState,s=o.element,M0(e,t),wc(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=yi(Error(U(423)),t),t=eg(e,t,r,n,s);break e}else if(r!==s){s=yi(Error(U(424)),t),t=eg(e,t,r,n,s);break e}else for(In=ws(t.stateNode.containerInfo.firstChild),$n=t,at=!0,lr=null,n=R0(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gi(),r===s){t=Gr(e,t,n);break e}hn(e,t,r,n)}t=t.child}return t;case 5:return A0(t),e===null&&xf(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,hf(r,s)?a=null:o!==null&&hf(r,o)&&(t.flags|=32),sx(e,t),hn(e,t,a,n),t.child;case 6:return e===null&&xf(t),null;case 13:return ix(e,t,n);case 4:return $h(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=vi(t,null,r,n):hn(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:or(r,s),Xp(e,t,r,s,n);case 7:return hn(e,t,t.pendingProps,n),t.child;case 8:return hn(e,t,t.pendingProps.children,n),t.child;case 12:return hn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,Ze(xc,r._currentValue),r._currentValue=a,o!==null)if(fr(o.value,a)){if(o.children===s.children&&!kn.current){t=Gr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Vr(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),yf(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(U(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),yf(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}hn(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,si(t,n),s=Qn(s),r=r(s),t.flags|=1,hn(e,t,r,n),t.child;case 14:return r=t.type,s=or(r,t.pendingProps),s=or(r.type,s),Zp(e,t,r,s,n);case 15:return nx(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:or(r,s),ql(e,t),t.tag=1,Nn(r)?(e=!0,pc(t)):e=!1,si(t,n),J0(t,r,s),bf(t,r,s,n),Nf(null,t,r,!0,e,n);case 19:return ax(e,t,n);case 22:return rx(e,t,n)}throw Error(U(156,t.tag))};function kx(e,t){return Yv(e,t)}function DN(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(e,t,n,r){return new DN(e,t,n,r)}function Zh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function FN(e){if(typeof e=="function")return Zh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===vh)return 11;if(e===xh)return 14}return 2}function Ns(e,t){var n=e.alternate;return n===null?(n=Hn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hl(e,t,n,r,s,o){var a=2;if(r=e,typeof e=="function")Zh(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Fo:return Zs(n.children,s,o,t);case gh:a=8,s|=8;break;case Ud:return e=Hn(12,n,t,s|2),e.elementType=Ud,e.lanes=o,e;case Wd:return e=Hn(13,n,t,s),e.elementType=Wd,e.lanes=o,e;case Hd:return e=Hn(19,n,t,s),e.elementType=Hd,e.lanes=o,e;case Av:return tu(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _v:a=10;break e;case Mv:a=9;break e;case vh:a=11;break e;case xh:a=14;break e;case cs:a=16,r=null;break e}throw Error(U(130,e==null?e:typeof e,""))}return t=Hn(a,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function Zs(e,t,n,r){return e=Hn(7,e,r,t),e.lanes=n,e}function tu(e,t,n,r){return e=Hn(22,e,r,t),e.elementType=Av,e.lanes=n,e.stateNode={isHidden:!1},e}function id(e,t,n){return e=Hn(6,e,null,t),e.lanes=n,e}function ad(e,t,n){return t=Hn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function BN(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zu(0),this.expirationTimes=zu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Jh(e,t,n,r,s,o,a,l,c){return e=new BN(e,t,n,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Hn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oh(o),e}function zN(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Do,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Nx(e){if(!e)return Es;e=e._reactInternals;e:{if(vo(e)!==e||e.tag!==1)throw Error(U(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(U(171))}if(e.tag===1){var n=e.type;if(Nn(n))return N0(e,n,t)}return t}function Cx(e,t,n,r,s,o,a,l,c){return e=Jh(n,r,!0,e,s,o,a,l,c),e.context=Nx(null),n=e.current,r=gn(),s=ks(n),o=Vr(r,s),o.callback=t??null,bs(n,o,s),e.current.lanes=s,Va(e,s,r),Cn(e,r),e}function nu(e,t,n,r){var s=t.current,o=gn(),a=ks(s);return n=Nx(n),t.context===null?t.context=n:t.pendingContext=n,t=Vr(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=bs(s,t,a),e!==null&&(dr(e,s,a,o),Bl(e,s,a)),a}function Tc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ug(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function em(e,t){ug(e,t),(e=e.alternate)&&ug(e,t)}function VN(){return null}var jx=typeof reportError=="function"?reportError:function(e){console.error(e)};function tm(e){this._internalRoot=e}ru.prototype.render=tm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));nu(e,t,null,null)};ru.prototype.unmount=tm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;io(function(){nu(null,e,null,null)}),t[Wr]=null}};function ru(e){this._internalRoot=e}ru.prototype.unstable_scheduleHydration=function(e){if(e){var t=r0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<fs.length&&t!==0&&t<fs[n].priority;n++);fs.splice(n,0,e),n===0&&o0(e)}};function nm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function su(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function dg(){}function qN(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var u=Tc(a);o.call(u)}}var a=Cx(t,r,e,0,null,!1,!1,"",dg);return e._reactRootContainer=a,e[Wr]=a.current,Ta(e.nodeType===8?e.parentNode:e),io(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Tc(c);l.call(u)}}var c=Jh(e,0,!1,null,null,!1,!1,"",dg);return e._reactRootContainer=c,e[Wr]=c.current,Ta(e.nodeType===8?e.parentNode:e),io(function(){nu(t,c,n,r)}),c}function ou(e,t,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var c=Tc(a);l.call(c)}}nu(t,a,e,s)}else a=qN(n,t,e,s,r);return Tc(a)}t0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=sa(t.pendingLanes);n!==0&&(bh(t,n|1),Cn(t,wt()),!(qe&6)&&(wi=wt()+500,Ls()))}break;case 13:io(function(){var r=Hr(e,1);if(r!==null){var s=gn();dr(r,e,1,s)}}),em(e,1)}};Sh=function(e){if(e.tag===13){var t=Hr(e,134217728);if(t!==null){var n=gn();dr(t,e,134217728,n)}em(e,134217728)}};n0=function(e){if(e.tag===13){var t=ks(e),n=Hr(e,t);if(n!==null){var r=gn();dr(n,e,t,r)}em(e,t)}};r0=function(){return Ge};s0=function(e,t){var n=Ge;try{return Ge=e,t()}finally{Ge=n}};nf=function(e,t,n){switch(t){case"input":if(Qd(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Qc(r);if(!s)throw Error(U(90));Iv(r),Qd(r,s)}}}break;case"textarea":$v(e,n);break;case"select":t=n.value,t!=null&&ei(e,!!n.multiple,t,!1)}};Uv=Qh;Wv=io;var UN={usingClientEntryPoint:!1,Events:[Ua,qo,Qc,Vv,qv,Qh]},Qi={findFiberByHostInstance:Gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WN={bundleType:Qi.bundleType,version:Qi.version,rendererPackageName:Qi.rendererPackageName,rendererConfig:Qi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Kv(e),e===null?null:e.stateNode},findFiberByHostInstance:Qi.findFiberByHostInstance||VN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{Wc=wl.inject(WN),jr=wl}catch{}}Bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UN;Bn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nm(t))throw Error(U(200));return zN(e,t,null,n)};Bn.createRoot=function(e,t){if(!nm(e))throw Error(U(299));var n=!1,r="",s=jx;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Jh(e,1,!1,null,null,n,!1,r,s),e[Wr]=t.current,Ta(e.nodeType===8?e.parentNode:e),new tm(t)};Bn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=Kv(t),e=e===null?null:e.stateNode,e};Bn.flushSync=function(e){return io(e)};Bn.hydrate=function(e,t,n){if(!su(t))throw Error(U(200));return ou(null,e,t,!0,n)};Bn.hydrateRoot=function(e,t,n){if(!nm(e))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=jx;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Cx(t,null,e,1,n??null,s,!1,o,a),e[Wr]=t.current,Ta(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new ru(t)};Bn.render=function(e,t,n){if(!su(t))throw Error(U(200));return ou(null,e,t,!1,n)};Bn.unmountComponentAtNode=function(e){if(!su(e))throw Error(U(40));return e._reactRootContainer?(io(function(){ou(null,null,e,!1,function(){e._reactRootContainer=null,e[Wr]=null})}),!0):!1};Bn.unstable_batchedUpdates=Qh;Bn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!su(n))throw Error(U(200));if(e==null||e._reactInternals===void 0)throw Error(U(38));return ou(e,t,n,!1,r)};Bn.version="18.3.1-next-f1338f8080-20240426";function Ex(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ex)}catch(e){console.error(e)}}Ex(),Ev.exports=Bn;var xo=Ev.exports;const HN=pv(xo);var Tx,fg=xo;Tx=fg.createRoot,fg.hydrateRoot;const GN=1,KN=1e6,rm="simulchess_toasts_enabled";function QN(){if(typeof window>"u")return!0;const e=localStorage.getItem(rm);return e===null?!0:e==="true"}function YN(e){typeof window>"u"||localStorage.setItem(rm,String(e))}let ld=0;function XN(){return ld=(ld+1)%Number.MAX_SAFE_INTEGER,ld.toString()}const cd=new Map,hg=e=>{if(cd.has(e))return;const t=setTimeout(()=>{cd.delete(e),va({type:"REMOVE_TOAST",toastId:e})},KN);cd.set(e,t)},ZN=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,GN)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?hg(n):e.toasts.forEach(r=>{hg(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Gl=[];let Kl={toasts:[]};function va(e){Kl=ZN(Kl,e),Gl.forEach(t=>{t(Kl)})}function JN({...e}){if(!(typeof window<"u"?localStorage.getItem(rm)!=="false":!0))return{id:"",dismiss:()=>{},update:()=>{}};const n=XN(),r=o=>va({type:"UPDATE_TOAST",toast:{...o,id:n}}),s=()=>va({type:"DISMISS_TOAST",toastId:n});return va({type:"ADD_TOAST",toast:{...e,id:n,open:!0,onOpenChange:o=>{o||s()}}}),{id:n,dismiss:s,update:r}}function iu(){const[e,t]=d.useState(Kl);return d.useEffect(()=>(Gl.push(t),()=>{const n=Gl.indexOf(t);n>-1&&Gl.splice(n,1)}),[e]),{...e,toast:JN,dismiss:n=>va({type:"DISMISS_TOAST",toastId:n})}}function de(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function mg(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Px(...e){return t=>{let n=!1;const r=e.map(s=>{const o=mg(s,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():mg(e[s],null)}}}}function Fe(...e){return d.useCallback(Px(...e),e)}function eC(e,t){const n=d.createContext(t),r=o=>{const{children:a,...l}=o,c=d.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:a})};r.displayName=e+"Provider";function s(o){const a=d.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[r,s]}function Xn(e,t=[]){let n=[];function r(o,a){const l=d.createContext(a),c=n.length;n=[...n,a];const u=m=>{var x;const{scope:h,children:y,...v}=m,p=((x=h==null?void 0:h[e])==null?void 0:x[c])||l,b=d.useMemo(()=>v,Object.values(v));return i.jsx(p.Provider,{value:b,children:y})};u.displayName=o+"Provider";function f(m,h){var p;const y=((p=h==null?void 0:h[e])==null?void 0:p[c])||l,v=d.useContext(y);if(v)return v;if(a!==void 0)return a;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[u,f]}const s=()=>{const o=n.map(a=>d.createContext(a));return function(l){const c=(l==null?void 0:l[e])||o;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,tC(s,...t)]}function tC(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const m=c(o)[`__scope${u}`];return{...l,...m}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function bi(e){const t=rC(e),n=d.forwardRef((r,s)=>{const{children:o,...a}=r,l=d.Children.toArray(o),c=l.find(sC);if(c){const u=c.props.children,f=l.map(m=>m===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:m);return i.jsx(t,{...a,ref:s,children:d.isValidElement(u)?d.cloneElement(u,void 0,f):null})}return i.jsx(t,{...a,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}var nC=bi("Slot");function rC(e){const t=d.forwardRef((n,r)=>{const{children:s,...o}=n;if(d.isValidElement(s)){const a=iC(s),l=oC(o,s.props);return s.type!==d.Fragment&&(l.ref=r?Px(r,a):a),d.cloneElement(s,l)}return d.Children.count(s)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Rx=Symbol("radix.slottable");function _x(e){const t=({children:n})=>i.jsx(i.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Rx,t}function sC(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Rx}function oC(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...l)=>{o(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function iC(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function sm(e){const t=e+"CollectionProvider",[n,r]=Xn(t),[s,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=p=>{const{scope:b,children:x}=p,g=as.useRef(null),w=as.useRef(new Map).current;return i.jsx(s,{scope:b,itemMap:w,collectionRef:g,children:x})};a.displayName=t;const l=e+"CollectionSlot",c=bi(l),u=as.forwardRef((p,b)=>{const{scope:x,children:g}=p,w=o(l,x),k=Fe(b,w.collectionRef);return i.jsx(c,{ref:k,children:g})});u.displayName=l;const f=e+"CollectionItemSlot",m="data-radix-collection-item",h=bi(f),y=as.forwardRef((p,b)=>{const{scope:x,children:g,...w}=p,k=as.useRef(null),S=Fe(b,k),C=o(f,x);return as.useEffect(()=>(C.itemMap.set(k,{ref:k,...w}),()=>void C.itemMap.delete(k))),i.jsx(h,{[m]:"",ref:S,children:g})});y.displayName=f;function v(p){const b=o(e+"CollectionConsumer",p);return as.useCallback(()=>{const g=b.collectionRef.current;if(!g)return[];const w=Array.from(g.querySelectorAll(`[${m}]`));return Array.from(b.itemMap.values()).sort((C,N)=>w.indexOf(C.ref.current)-w.indexOf(N.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:u,ItemSlot:y},v,r]}var aC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],we=aC.reduce((e,t)=>{const n=bi(`Primitive.${t}`),r=d.forwardRef((s,o)=>{const{asChild:a,...l}=s,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Mx(e,t){e&&xo.flushSync(()=>e.dispatchEvent(t))}function bt(e){const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function lC(e,t=globalThis==null?void 0:globalThis.document){const n=bt(e);d.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var cC="DismissableLayer",Of="dismissableLayer.update",uC="dismissableLayer.pointerDownOutside",dC="dismissableLayer.focusOutside",pg,Ax=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ha=d.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=e,u=d.useContext(Ax),[f,m]=d.useState(null),h=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=d.useState({}),v=Fe(t,N=>m(N)),p=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=p.indexOf(b),g=f?p.indexOf(f):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,k=g>=x,S=hC(N=>{const j=N.target,R=[...u.branches].some(_=>_.contains(j));!k||R||(s==null||s(N),a==null||a(N),N.defaultPrevented||l==null||l())},h),C=mC(N=>{const j=N.target;[...u.branches].some(_=>_.contains(j))||(o==null||o(N),a==null||a(N),N.defaultPrevented||l==null||l())},h);return lC(N=>{g===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},h),d.useEffect(()=>{if(f)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(pg=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),gg(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=pg)}},[f,h,n,u]),d.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),gg())},[f,u]),d.useEffect(()=>{const N=()=>y({});return document.addEventListener(Of,N),()=>document.removeEventListener(Of,N)},[]),i.jsx(we.div,{...c,ref:v,style:{pointerEvents:w?k?"auto":"none":void 0,...e.style},onFocusCapture:de(e.onFocusCapture,C.onFocusCapture),onBlurCapture:de(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:de(e.onPointerDownCapture,S.onPointerDownCapture)})});Ha.displayName=cC;var fC="DismissableLayerBranch",Lx=d.forwardRef((e,t)=>{const n=d.useContext(Ax),r=d.useRef(null),s=Fe(t,r);return d.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),i.jsx(we.div,{...e,ref:s})});Lx.displayName=fC;function hC(e,t=globalThis==null?void 0:globalThis.document){const n=bt(e),r=d.useRef(!1),s=d.useRef(()=>{});return d.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let c=function(){Ix(uC,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function mC(e,t=globalThis==null?void 0:globalThis.document){const n=bt(e),r=d.useRef(!1);return d.useEffect(()=>{const s=o=>{o.target&&!r.current&&Ix(dC,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function gg(){const e=new CustomEvent(Of);document.dispatchEvent(e)}function Ix(e,t,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Mx(s,o):s.dispatchEvent(o)}var pC=Ha,gC=Lx,Kt=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{},vC="Portal",au=d.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[s,o]=d.useState(!1);Kt(()=>o(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?HN.createPortal(i.jsx(we.div,{...r,ref:t}),a):null});au.displayName=vC;function xC(e,t){return d.useReducer((n,r)=>t[n][r]??n,e)}var pr=e=>{const{present:t,children:n}=e,r=yC(t),s=typeof n=="function"?n({present:r.isPresent}):d.Children.only(n),o=Fe(r.ref,wC(s));return typeof n=="function"||r.isPresent?d.cloneElement(s,{ref:o}):null};pr.displayName="Presence";function yC(e){const[t,n]=d.useState(),r=d.useRef({}),s=d.useRef(e),o=d.useRef("none"),a=e?"mounted":"unmounted",[l,c]=xC(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const u=bl(r.current);o.current=l==="mounted"?u:"none"},[l]),Kt(()=>{const u=r.current,f=s.current;if(f!==e){const h=o.current,y=bl(u);e?c("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&h!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Kt(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,m=y=>{const p=bl(r.current).includes(y.animationName);if(y.target===t&&p&&(c("ANIMATION_END"),!s.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},h=y=>{y.target===t&&(o.current=bl(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:d.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function bl(e){return(e==null?void 0:e.animationName)||"none"}function wC(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function ao({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,s]=bC({defaultProp:t,onChange:n}),o=e!==void 0,a=o?e:r,l=bt(n),c=d.useCallback(u=>{if(o){const m=typeof u=="function"?u(e):u;m!==e&&l(m)}else s(u)},[o,e,s,l]);return[a,c]}function bC({defaultProp:e,onChange:t}){const n=d.useState(e),[r]=n,s=d.useRef(r),o=bt(t);return d.useEffect(()=>{s.current!==r&&(o(r),s.current=r)},[r,s,o]),n}var SC="VisuallyHidden",Ga=d.forwardRef((e,t)=>i.jsx(we.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Ga.displayName=SC;var kC=Ga,om="ToastProvider",[im,NC,CC]=sm("Toast"),[Ox,WM]=Xn("Toast",[CC]),[jC,lu]=Ox(om),$x=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:a}=e,[l,c]=d.useState(null),[u,f]=d.useState(0),m=d.useRef(!1),h=d.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${om}\`. Expected non-empty \`string\`.`),i.jsx(im.Provider,{scope:t,children:i.jsx(jC,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:d.useCallback(()=>f(y=>y+1),[]),onToastRemove:d.useCallback(()=>f(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:h,children:a})})};$x.displayName=om;var Dx="ToastViewport",EC=["F8"],$f="toast.viewportPause",Df="toast.viewportResume",Fx=d.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=EC,label:s="Notifications ({hotkey})",...o}=e,a=lu(Dx,n),l=NC(n),c=d.useRef(null),u=d.useRef(null),f=d.useRef(null),m=d.useRef(null),h=Fe(t,m,a.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=a.toastCount>0;d.useEffect(()=>{const b=x=>{var w;r.length!==0&&r.every(k=>x[k]||x.code===k)&&((w=m.current)==null||w.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),d.useEffect(()=>{const b=c.current,x=m.current;if(v&&b&&x){const g=()=>{if(!a.isClosePausedRef.current){const C=new CustomEvent($f);x.dispatchEvent(C),a.isClosePausedRef.current=!0}},w=()=>{if(a.isClosePausedRef.current){const C=new CustomEvent(Df);x.dispatchEvent(C),a.isClosePausedRef.current=!1}},k=C=>{!b.contains(C.relatedTarget)&&w()},S=()=>{b.contains(document.activeElement)||w()};return b.addEventListener("focusin",g),b.addEventListener("focusout",k),b.addEventListener("pointermove",g),b.addEventListener("pointerleave",S),window.addEventListener("blur",g),window.addEventListener("focus",w),()=>{b.removeEventListener("focusin",g),b.removeEventListener("focusout",k),b.removeEventListener("pointermove",g),b.removeEventListener("pointerleave",S),window.removeEventListener("blur",g),window.removeEventListener("focus",w)}}},[v,a.isClosePausedRef]);const p=d.useCallback(({tabbingDirection:b})=>{const g=l().map(w=>{const k=w.ref.current,S=[k,...BC(k)];return b==="forwards"?S:S.reverse()});return(b==="forwards"?g.reverse():g).flat()},[l]);return d.useEffect(()=>{const b=m.current;if(b){const x=g=>{var S,C,N;const w=g.altKey||g.ctrlKey||g.metaKey;if(g.key==="Tab"&&!w){const j=document.activeElement,R=g.shiftKey;if(g.target===b&&R){(S=u.current)==null||S.focus();return}const D=p({tabbingDirection:R?"backwards":"forwards"}),I=D.findIndex(O=>O===j);ud(D.slice(I+1))?g.preventDefault():R?(C=u.current)==null||C.focus():(N=f.current)==null||N.focus()}};return b.addEventListener("keydown",x),()=>b.removeEventListener("keydown",x)}},[l,p]),i.jsxs(gC,{ref:c,role:"region","aria-label":s.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&i.jsx(Ff,{ref:u,onFocusFromOutsideViewport:()=>{const b=p({tabbingDirection:"forwards"});ud(b)}}),i.jsx(im.Slot,{scope:n,children:i.jsx(we.ol,{tabIndex:-1,...o,ref:h})}),v&&i.jsx(Ff,{ref:f,onFocusFromOutsideViewport:()=>{const b=p({tabbingDirection:"backwards"});ud(b)}})]})});Fx.displayName=Dx;var Bx="ToastFocusProxy",Ff=d.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,o=lu(Bx,n);return i.jsx(Ga,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=o.viewport)!=null&&u.contains(l))&&r()}})});Ff.displayName=Bx;var cu="Toast",TC="toast.swipeStart",PC="toast.swipeMove",RC="toast.swipeCancel",_C="toast.swipeEnd",zx=d.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:o,...a}=e,[l=!0,c]=ao({prop:r,defaultProp:s,onChange:o});return i.jsx(pr,{present:n||l,children:i.jsx(LC,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:bt(e.onPause),onResume:bt(e.onResume),onSwipeStart:de(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:de(e.onSwipeMove,u=>{const{x:f,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:de(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:de(e.onSwipeEnd,u=>{const{x:f,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});zx.displayName=cu;var[MC,AC]=Ox(cu,{onClose(){}}),LC=d.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:o,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:f,onSwipeMove:m,onSwipeCancel:h,onSwipeEnd:y,...v}=e,p=lu(cu,n),[b,x]=d.useState(null),g=Fe(t,O=>x(O)),w=d.useRef(null),k=d.useRef(null),S=s||p.duration,C=d.useRef(0),N=d.useRef(S),j=d.useRef(0),{onToastAdd:R,onToastRemove:_}=p,B=bt(()=>{var F;(b==null?void 0:b.contains(document.activeElement))&&((F=p.viewport)==null||F.focus()),a()}),D=d.useCallback(O=>{!O||O===1/0||(window.clearTimeout(j.current),C.current=new Date().getTime(),j.current=window.setTimeout(B,O))},[B]);d.useEffect(()=>{const O=p.viewport;if(O){const F=()=>{D(N.current),u==null||u()},q=()=>{const Q=new Date().getTime()-C.current;N.current=N.current-Q,window.clearTimeout(j.current),c==null||c()};return O.addEventListener($f,q),O.addEventListener(Df,F),()=>{O.removeEventListener($f,q),O.removeEventListener(Df,F)}}},[p.viewport,S,c,u,D]),d.useEffect(()=>{o&&!p.isClosePausedRef.current&&D(S)},[o,S,p.isClosePausedRef,D]),d.useEffect(()=>(R(),()=>_()),[R,_]);const I=d.useMemo(()=>b?Kx(b):null,[b]);return p.viewport?i.jsxs(i.Fragment,{children:[I&&i.jsx(IC,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:I}),i.jsx(MC,{scope:n,onClose:B,children:xo.createPortal(i.jsx(im.ItemSlot,{scope:n,children:i.jsx(pC,{asChild:!0,onEscapeKeyDown:de(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||B(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(we.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":p.swipeDirection,...v,ref:g,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:de(e.onKeyDown,O=>{O.key==="Escape"&&(l==null||l(O.nativeEvent),O.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,B()))}),onPointerDown:de(e.onPointerDown,O=>{O.button===0&&(w.current={x:O.clientX,y:O.clientY})}),onPointerMove:de(e.onPointerMove,O=>{if(!w.current)return;const F=O.clientX-w.current.x,q=O.clientY-w.current.y,Q=!!k.current,T=["left","right"].includes(p.swipeDirection),$=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,W=T?$(0,F):0,Y=T?0:$(0,q),be=O.pointerType==="touch"?10:2,Pe={x:W,y:Y},_e={originalEvent:O,delta:Pe};Q?(k.current=Pe,Sl(PC,m,_e,{discrete:!1})):vg(Pe,p.swipeDirection,be)?(k.current=Pe,Sl(TC,f,_e,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(F)>be||Math.abs(q)>be)&&(w.current=null)}),onPointerUp:de(e.onPointerUp,O=>{const F=k.current,q=O.target;if(q.hasPointerCapture(O.pointerId)&&q.releasePointerCapture(O.pointerId),k.current=null,w.current=null,F){const Q=O.currentTarget,T={originalEvent:O,delta:F};vg(F,p.swipeDirection,p.swipeThreshold)?Sl(_C,y,T,{discrete:!0}):Sl(RC,h,T,{discrete:!0}),Q.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),IC=e=>{const{__scopeToast:t,children:n,...r}=e,s=lu(cu,t),[o,a]=d.useState(!1),[l,c]=d.useState(!1);return DC(()=>a(!0)),d.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(au,{asChild:!0,children:i.jsx(Ga,{...r,children:o&&i.jsxs(i.Fragment,{children:[s.label," ",n]})})})},OC="ToastTitle",Vx=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(we.div,{...r,ref:t})});Vx.displayName=OC;var $C="ToastDescription",qx=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(we.div,{...r,ref:t})});qx.displayName=$C;var Ux="ToastAction",Wx=d.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?i.jsx(Gx,{altText:n,asChild:!0,children:i.jsx(am,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Ux}\`. Expected non-empty \`string\`.`),null)});Wx.displayName=Ux;var Hx="ToastClose",am=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=AC(Hx,n);return i.jsx(Gx,{asChild:!0,children:i.jsx(we.button,{type:"button",...r,ref:t,onClick:de(e.onClick,s.onClose)})})});am.displayName=Hx;var Gx=d.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return i.jsx(we.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function Kx(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),FC(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const a=r.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...Kx(r))}}),t}function Sl(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Mx(s,o):s.dispatchEvent(o)}var vg=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),o=r>s;return t==="left"||t==="right"?o&&r>n:!o&&s>n};function DC(e=()=>{}){const t=bt(e);Kt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function FC(e){return e.nodeType===e.ELEMENT_NODE}function BC(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function ud(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var zC=$x,Qx=Fx,Yx=zx,Xx=Vx,Zx=qx,Jx=Wx,ey=am;function ty(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=ty(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ny(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=ty(e))&&(r&&(r+=" "),r+=t);return r}const xg=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,yg=ny,uu=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return yg(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:o}=t,a=Object.keys(s).map(u=>{const f=n==null?void 0:n[u],m=o==null?void 0:o[u];if(f===null)return null;const h=xg(f)||xg(m);return s[u][h]}),l=n&&Object.entries(n).reduce((u,f)=>{let[m,h]=f;return h===void 0||(u[m]=h),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,f)=>{let{class:m,className:h,...y}=f;return Object.entries(y).every(v=>{let[p,b]=v;return Array.isArray(b)?b.includes({...o,...l}[p]):{...o,...l}[p]===b})?[...u,m,h]:u},[]);return yg(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ry=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=d.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:a,...l},c)=>d.createElement("svg",{ref:c,...qC,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:ry("lucide",s),...l},[...a.map(([u,f])=>d.createElement(u,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=(e,t)=>{const n=d.forwardRef(({className:r,...s},o)=>d.createElement(UC,{ref:o,iconNode:t,className:ry(`lucide-${VC(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=he("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=he("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=he("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=he("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=he("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=he("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=he("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=he("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=he("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=he("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=he("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=he("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=he("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=he("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=he("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=he("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=he("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=he("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=he("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=he("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=he("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=he("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=he("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=he("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=he("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=he("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=he("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=he("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=he("Infinity",[["path",{d:"M12 12c-2-2.67-4-4-6-4a4 4 0 1 0 0 8c2 0 4-1.33 6-4Zm0 0c2 2.67 4 4 6 4a4 4 0 0 0 0-8c-2 0-4 1.33-6 4Z",key:"1z0uae"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=he("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=he("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=he("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=he("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=he("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=he("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=he("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=he("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=he("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=he("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=he("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=he("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=he("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=he("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=he("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=he("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=he("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=he("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=he("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=he("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=he("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=he("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=he("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),fm="-",p2=e=>{const t=v2(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const l=a.split(fm);return l[0]===""&&l.length!==1&&l.shift(),by(l,t)||g2(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},by=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?by(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const o=e.join(fm);return(a=t.validators.find(({validator:l})=>l(o)))==null?void 0:a.classGroupId},kg=/^\[(.+)\]$/,g2=e=>{if(kg.test(e)){const t=kg.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},v2=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return y2(Object.entries(e.classGroups),n).forEach(([o,a])=>{zf(a,r,o,t)}),r},zf=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const o=s===""?t:Ng(t,s);o.classGroupId=n;return}if(typeof s=="function"){if(x2(s)){zf(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,a])=>{zf(a,Ng(t,o),n,r)})})},Ng=(e,t)=>{let n=e;return t.split(fm).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},x2=e=>e.isThemeGetter,y2=(e,t)=>t?e.map(([n,r])=>{const s=r.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,l])=>[t+a,l])):o);return[n,s]}):e,w2=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(o,a)=>{n.set(o,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(o){let a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return s(o,a),a},set(o,a){n.has(o)?n.set(o,a):s(o,a)}}},Sy="!",b2=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],o=t.length,a=l=>{const c=[];let u=0,f=0,m;for(let b=0;b<l.length;b++){let x=l[b];if(u===0){if(x===s&&(r||l.slice(b,b+o)===t)){c.push(l.slice(f,b)),f=b+o;continue}if(x==="/"){m=b;continue}}x==="["?u++:x==="]"&&u--}const h=c.length===0?l:l.substring(f),y=h.startsWith(Sy),v=y?h.substring(1):h,p=m&&m>f?m-f:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:p}};return n?l=>n({className:l,parseClassName:a}):a},S2=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},k2=e=>({cache:w2(e.cacheSize),parseClassName:b2(e),...p2(e)}),N2=/\s+/,C2=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,o=[],a=e.trim().split(N2);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:f,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:y}=n(u);let v=!!y,p=r(v?h.substring(0,y):h);if(!p){if(!v){l=u+(l.length>0?" "+l:l);continue}if(p=r(h),!p){l=u+(l.length>0?" "+l:l);continue}v=!1}const b=S2(f).join(":"),x=m?b+Sy:b,g=x+p;if(o.includes(g))continue;o.push(g);const w=s(p,v);for(let k=0;k<w.length;++k){const S=w[k];o.push(x+S)}l=u+(l.length>0?" "+l:l)}return l};function j2(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=ky(t))&&(r&&(r+=" "),r+=n);return r}const ky=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=ky(e[r]))&&(n&&(n+=" "),n+=t);return n};function E2(e,...t){let n,r,s,o=a;function a(c){const u=t.reduce((f,m)=>m(f),e());return n=k2(u),r=n.cache.get,s=n.cache.set,o=l,l(c)}function l(c){const u=r(c);if(u)return u;const f=C2(c,n);return s(c,f),f}return function(){return o(j2.apply(null,arguments))}}const tt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Ny=/^\[(?:([a-z-]+):)?(.+)\]$/i,T2=/^\d+\/\d+$/,P2=new Set(["px","full","screen"]),R2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,M2=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,A2=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,L2=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ir=e=>ai(e)||P2.has(e)||T2.test(e),ns=e=>Ai(e,"length",V2),ai=e=>!!e&&!Number.isNaN(Number(e)),fd=e=>Ai(e,"number",ai),Yi=e=>!!e&&Number.isInteger(Number(e)),I2=e=>e.endsWith("%")&&ai(e.slice(0,-1)),Le=e=>Ny.test(e),rs=e=>R2.test(e),O2=new Set(["length","size","percentage"]),$2=e=>Ai(e,O2,Cy),D2=e=>Ai(e,"position",Cy),F2=new Set(["image","url"]),B2=e=>Ai(e,F2,U2),z2=e=>Ai(e,"",q2),Xi=()=>!0,Ai=(e,t,n)=>{const r=Ny.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},V2=e=>_2.test(e)&&!M2.test(e),Cy=()=>!1,q2=e=>A2.test(e),U2=e=>L2.test(e),W2=()=>{const e=tt("colors"),t=tt("spacing"),n=tt("blur"),r=tt("brightness"),s=tt("borderColor"),o=tt("borderRadius"),a=tt("borderSpacing"),l=tt("borderWidth"),c=tt("contrast"),u=tt("grayscale"),f=tt("hueRotate"),m=tt("invert"),h=tt("gap"),y=tt("gradientColorStops"),v=tt("gradientColorStopPositions"),p=tt("inset"),b=tt("margin"),x=tt("opacity"),g=tt("padding"),w=tt("saturate"),k=tt("scale"),S=tt("sepia"),C=tt("skew"),N=tt("space"),j=tt("translate"),R=()=>["auto","contain","none"],_=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto",Le,t],D=()=>[Le,t],I=()=>["",Ir,ns],O=()=>["auto",ai,Le],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],q=()=>["solid","dashed","dotted","double","none"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Le],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Y=()=>[ai,Le];return{cacheSize:500,separator:":",theme:{colors:[Xi],spacing:[Ir,ns],blur:["none","",rs,Le],brightness:Y(),borderColor:[e],borderRadius:["none","","full",rs,Le],borderSpacing:D(),borderWidth:I(),contrast:Y(),grayscale:$(),hueRotate:Y(),invert:$(),gap:D(),gradientColorStops:[e],gradientColorStopPositions:[I2,ns],inset:B(),margin:B(),opacity:Y(),padding:D(),saturate:Y(),scale:Y(),sepia:$(),skew:Y(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",Le]}],container:["container"],columns:[{columns:[rs]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),Le]}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Yi,Le]}],basis:[{basis:B()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Le]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",Yi,Le]}],"grid-cols":[{"grid-cols":[Xi]}],"col-start-end":[{col:["auto",{span:["full",Yi,Le]},Le]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[Xi]}],"row-start-end":[{row:["auto",{span:[Yi,Le]},Le]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Le]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Le]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Le,t]}],"min-w":[{"min-w":[Le,t,"min","max","fit"]}],"max-w":[{"max-w":[Le,t,"none","full","min","max","fit","prose",{screen:[rs]},rs]}],h:[{h:[Le,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Le,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Le,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Le,t,"auto","min","max","fit"]}],"font-size":[{text:["base",rs,ns]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",fd]}],"font-family":[{font:[Xi]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Le]}],"line-clamp":[{"line-clamp":["none",ai,fd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ir,Le]}],"list-image":[{"list-image":["none",Le]}],"list-style-type":[{list:["none","disc","decimal",Le]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ir,ns]}],"underline-offset":[{"underline-offset":["auto",Ir,Le]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),D2]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",$2]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},B2]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...q(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:q()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...q()]}],"outline-offset":[{"outline-offset":[Ir,Le]}],"outline-w":[{outline:[Ir,ns]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Ir,ns]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",rs,z2]}],"shadow-color":[{shadow:[Xi]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...Q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",rs,Le]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[m]}],saturate:[{saturate:[w]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Le]}],duration:[{duration:Y()}],ease:[{ease:["linear","in","out","in-out",Le]}],delay:[{delay:Y()}],animate:[{animate:["none","spin","ping","pulse","bounce",Le]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Yi,Le]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Le]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ir,ns,fd]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},H2=E2(W2);function je(...e){return H2(ny(e))}const G2=zC,jy=d.forwardRef(({className:e,...t},n)=>i.jsx(Qx,{ref:n,className:je("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:right-0 sm:flex-col md:max-w-[420px]",e),...t}));jy.displayName=Qx.displayName;const K2=uu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ey=d.forwardRef(({className:e,variant:t,...n},r)=>i.jsx(Yx,{ref:r,className:je(K2({variant:t}),e),...n}));Ey.displayName=Yx.displayName;const Q2=d.forwardRef(({className:e,...t},n)=>i.jsx(Jx,{ref:n,className:je("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Q2.displayName=Jx.displayName;const Ty=d.forwardRef(({className:e,...t},n)=>i.jsx(ey,{ref:n,className:je("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(Si,{className:"h-4 w-4"})}));Ty.displayName=ey.displayName;const Py=d.forwardRef(({className:e,...t},n)=>i.jsx(Xx,{ref:n,className:je("text-sm font-semibold",e),...t}));Py.displayName=Xx.displayName;const Ry=d.forwardRef(({className:e,...t},n)=>i.jsx(Zx,{ref:n,className:je("text-sm opacity-90",e),...t}));Ry.displayName=Zx.displayName;function Y2(){const{toasts:e}=iu();return i.jsxs(G2,{children:[e.map(function({id:t,title:n,description:r,action:s,...o}){return i.jsxs(Ey,{...o,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(Py,{children:n}),r&&i.jsx(Ry,{children:r})]}),s,i.jsx(Ty,{})]},t)}),i.jsx(jy,{})]})}var X2=IS[" useId ".trim().toString()]||(()=>{}),Z2=0;function Cs(e){const[t,n]=d.useState(X2());return Kt(()=>{e||n(r=>r??String(Z2++))},[e]),e||(t?`radix-${t}`:"")}const J2=["top","right","bottom","left"],Ps=Math.min,An=Math.max,Pc=Math.round,kl=Math.floor,Tr=e=>({x:e,y:e}),ej={left:"right",right:"left",bottom:"top",top:"bottom"},tj={start:"end",end:"start"};function Vf(e,t,n){return An(e,Ps(t,n))}function Kr(e,t){return typeof e=="function"?e(t):e}function Qr(e){return e.split("-")[0]}function Li(e){return e.split("-")[1]}function hm(e){return e==="x"?"y":"x"}function mm(e){return e==="y"?"height":"width"}function Rs(e){return["top","bottom"].includes(Qr(e))?"y":"x"}function pm(e){return hm(Rs(e))}function nj(e,t,n){n===void 0&&(n=!1);const r=Li(e),s=pm(e),o=mm(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=Rc(a)),[a,Rc(a)]}function rj(e){const t=Rc(e);return[qf(e),t,qf(t)]}function qf(e){return e.replace(/start|end/g,t=>tj[t])}function sj(e,t,n){const r=["left","right"],s=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?o:a;default:return[]}}function oj(e,t,n,r){const s=Li(e);let o=sj(Qr(e),n==="start",r);return s&&(o=o.map(a=>a+"-"+s),t&&(o=o.concat(o.map(qf)))),o}function Rc(e){return e.replace(/left|right|bottom|top/g,t=>ej[t])}function ij(e){return{top:0,right:0,bottom:0,left:0,...e}}function _y(e){return typeof e!="number"?ij(e):{top:e,right:e,bottom:e,left:e}}function _c(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function Cg(e,t,n){let{reference:r,floating:s}=e;const o=Rs(t),a=pm(t),l=mm(a),c=Qr(t),u=o==="y",f=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,h=r[l]/2-s[l]/2;let y;switch(c){case"top":y={x:f,y:r.y-s.height};break;case"bottom":y={x:f,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:m};break;case"left":y={x:r.x-s.width,y:m};break;default:y={x:r.x,y:r.y}}switch(Li(t)){case"start":y[a]-=h*(n&&u?-1:1);break;case"end":y[a]+=h*(n&&u?-1:1);break}return y}const aj=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:a}=n,l=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:m}=Cg(u,r,c),h=r,y={},v=0;for(let p=0;p<l.length;p++){const{name:b,fn:x}=l[p],{x:g,y:w,data:k,reset:S}=await x({x:f,y:m,initialPlacement:r,placement:h,strategy:s,middlewareData:y,rects:u,platform:a,elements:{reference:e,floating:t}});f=g??f,m=w??m,y={...y,[b]:{...y[b],...k}},S&&v<=50&&(v++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(u=S.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:f,y:m}=Cg(u,h,c)),p=-1)}return{x:f,y:m,placement:h,strategy:s,middlewareData:y}};async function $a(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:h=!1,padding:y=0}=Kr(t,e),v=_y(y),b=l[h?m==="floating"?"reference":"floating":m],x=_c(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(b)))==null||n?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),g=m==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),k=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},S=_c(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:g,offsetParent:w,strategy:c}):g);return{top:(x.top-S.top+v.top)/k.y,bottom:(S.bottom-x.bottom+v.bottom)/k.y,left:(x.left-S.left+v.left)/k.x,right:(S.right-x.right+v.right)/k.x}}const lj=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:f=0}=Kr(e,t)||{};if(u==null)return{};const m=_y(f),h={x:n,y:r},y=pm(s),v=mm(y),p=await a.getDimensions(u),b=y==="y",x=b?"top":"left",g=b?"bottom":"right",w=b?"clientHeight":"clientWidth",k=o.reference[v]+o.reference[y]-h[y]-o.floating[v],S=h[y]-o.reference[y],C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let N=C?C[w]:0;(!N||!await(a.isElement==null?void 0:a.isElement(C)))&&(N=l.floating[w]||o.floating[v]);const j=k/2-S/2,R=N/2-p[v]/2-1,_=Ps(m[x],R),B=Ps(m[g],R),D=_,I=N-p[v]-B,O=N/2-p[v]/2+j,F=Vf(D,O,I),q=!c.arrow&&Li(s)!=null&&O!==F&&o.reference[v]/2-(O<D?_:B)-p[v]/2<0,Q=q?O<D?O-D:O-I:0;return{[y]:h[y]+Q,data:{[y]:F,centerOffset:O-F-Q,...q&&{alignmentOffset:Q}},reset:q}}}),cj=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:p=!0,...b}=Kr(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const x=Qr(s),g=Rs(l),w=Qr(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=h||(w||!p?[Rc(l)]:rj(l)),C=v!=="none";!h&&C&&S.push(...oj(l,p,v,k));const N=[l,...S],j=await $a(t,b),R=[];let _=((r=o.flip)==null?void 0:r.overflows)||[];if(f&&R.push(j[x]),m){const O=nj(s,a,k);R.push(j[O[0]],j[O[1]])}if(_=[..._,{placement:s,overflows:R}],!R.every(O=>O<=0)){var B,D;const O=(((B=o.flip)==null?void 0:B.index)||0)+1,F=N[O];if(F)return{data:{index:O,overflows:_},reset:{placement:F}};let q=(D=_.filter(Q=>Q.overflows[0]<=0).sort((Q,T)=>Q.overflows[1]-T.overflows[1])[0])==null?void 0:D.placement;if(!q)switch(y){case"bestFit":{var I;const Q=(I=_.filter(T=>{if(C){const $=Rs(T.placement);return $===g||$==="y"}return!0}).map(T=>[T.placement,T.overflows.filter($=>$>0).reduce(($,W)=>$+W,0)]).sort((T,$)=>T[1]-$[1])[0])==null?void 0:I[0];Q&&(q=Q);break}case"initialPlacement":q=l;break}if(s!==q)return{reset:{placement:q}}}return{}}}};function jg(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Eg(e){return J2.some(t=>e[t]>=0)}const uj=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Kr(e,t);switch(r){case"referenceHidden":{const o=await $a(t,{...s,elementContext:"reference"}),a=jg(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Eg(a)}}}case"escaped":{const o=await $a(t,{...s,altBoundary:!0}),a=jg(o,n.floating);return{data:{escapedOffsets:a,escaped:Eg(a)}}}default:return{}}}}};async function dj(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Qr(n),l=Li(n),c=Rs(n)==="y",u=["left","top"].includes(a)?-1:1,f=o&&c?-1:1,m=Kr(t,e);let{mainAxis:h,crossAxis:y,alignmentAxis:v}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof v=="number"&&(y=l==="end"?v*-1:v),c?{x:y*f,y:h*u}:{x:h*u,y:y*f}}const fj=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:a,middlewareData:l}=t,c=await dj(t,e);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:a}}}}},hj=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:b=>{let{x,y:g}=b;return{x,y:g}}},...c}=Kr(e,t),u={x:n,y:r},f=await $a(t,c),m=Rs(Qr(s)),h=hm(m);let y=u[h],v=u[m];if(o){const b=h==="y"?"top":"left",x=h==="y"?"bottom":"right",g=y+f[b],w=y-f[x];y=Vf(g,y,w)}if(a){const b=m==="y"?"top":"left",x=m==="y"?"bottom":"right",g=v+f[b],w=v-f[x];v=Vf(g,v,w)}const p=l.fn({...t,[h]:y,[m]:v});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[h]:o,[m]:a}}}}}},mj=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Kr(e,t),f={x:n,y:r},m=Rs(s),h=hm(m);let y=f[h],v=f[m];const p=Kr(l,t),b=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const w=h==="y"?"height":"width",k=o.reference[h]-o.floating[w]+b.mainAxis,S=o.reference[h]+o.reference[w]-b.mainAxis;y<k?y=k:y>S&&(y=S)}if(u){var x,g;const w=h==="y"?"width":"height",k=["top","left"].includes(Qr(s)),S=o.reference[m]-o.floating[w]+(k&&((x=a.offset)==null?void 0:x[m])||0)+(k?0:b.crossAxis),C=o.reference[m]+o.reference[w]+(k?0:((g=a.offset)==null?void 0:g[m])||0)-(k?b.crossAxis:0);v<S?v=S:v>C&&(v=C)}return{[h]:y,[m]:v}}}},pj=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:a,elements:l}=t,{apply:c=()=>{},...u}=Kr(e,t),f=await $a(t,u),m=Qr(s),h=Li(s),y=Rs(s)==="y",{width:v,height:p}=o.floating;let b,x;m==="top"||m==="bottom"?(b=m,x=h===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(x=m,b=h==="end"?"top":"bottom");const g=p-f.top-f.bottom,w=v-f.left-f.right,k=Ps(p-f[b],g),S=Ps(v-f[x],w),C=!t.middlewareData.shift;let N=k,j=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(j=w),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(N=g),C&&!h){const _=An(f.left,0),B=An(f.right,0),D=An(f.top,0),I=An(f.bottom,0);y?j=v-2*(_!==0||B!==0?_+B:An(f.left,f.right)):N=p-2*(D!==0||I!==0?D+I:An(f.top,f.bottom))}await c({...t,availableWidth:j,availableHeight:N});const R=await a.getDimensions(l.floating);return v!==R.width||p!==R.height?{reset:{rects:!0}}:{}}}};function fu(){return typeof window<"u"}function Ii(e){return My(e)?(e.nodeName||"").toLowerCase():"#document"}function Dn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Rr(e){var t;return(t=(My(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function My(e){return fu()?e instanceof Node||e instanceof Dn(e).Node:!1}function hr(e){return fu()?e instanceof Element||e instanceof Dn(e).Element:!1}function Pr(e){return fu()?e instanceof HTMLElement||e instanceof Dn(e).HTMLElement:!1}function Tg(e){return!fu()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Dn(e).ShadowRoot}function Ka(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=mr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function gj(e){return["table","td","th"].includes(Ii(e))}function hu(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function gm(e){const t=vm(),n=hr(e)?mr(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function vj(e){let t=_s(e);for(;Pr(t)&&!ki(t);){if(gm(t))return t;if(hu(t))return null;t=_s(t)}return null}function vm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ki(e){return["html","body","#document"].includes(Ii(e))}function mr(e){return Dn(e).getComputedStyle(e)}function mu(e){return hr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function _s(e){if(Ii(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Tg(e)&&e.host||Rr(e);return Tg(t)?t.host:t}function Ay(e){const t=_s(e);return ki(t)?e.ownerDocument?e.ownerDocument.body:e.body:Pr(t)&&Ka(t)?t:Ay(t)}function Da(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=Ay(e),o=s===((r=e.ownerDocument)==null?void 0:r.body),a=Dn(s);if(o){const l=Uf(a);return t.concat(a,a.visualViewport||[],Ka(s)?s:[],l&&n?Da(l):[])}return t.concat(s,Da(s,[],n))}function Uf(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ly(e){const t=mr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Pr(e),o=s?e.offsetWidth:n,a=s?e.offsetHeight:r,l=Pc(n)!==o||Pc(r)!==a;return l&&(n=o,r=a),{width:n,height:r,$:l}}function xm(e){return hr(e)?e:e.contextElement}function li(e){const t=xm(e);if(!Pr(t))return Tr(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=Ly(t);let a=(o?Pc(n.width):n.width)/r,l=(o?Pc(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const xj=Tr(0);function Iy(e){const t=Dn(e);return!vm()||!t.visualViewport?xj:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function yj(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Dn(e)?!1:t}function lo(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=xm(e);let a=Tr(1);t&&(r?hr(r)&&(a=li(r)):a=li(e));const l=yj(o,n,r)?Iy(o):Tr(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,f=s.width/a.x,m=s.height/a.y;if(o){const h=Dn(o),y=r&&hr(r)?Dn(r):r;let v=h,p=Uf(v);for(;p&&r&&y!==v;){const b=li(p),x=p.getBoundingClientRect(),g=mr(p),w=x.left+(p.clientLeft+parseFloat(g.paddingLeft))*b.x,k=x.top+(p.clientTop+parseFloat(g.paddingTop))*b.y;c*=b.x,u*=b.y,f*=b.x,m*=b.y,c+=w,u+=k,v=Dn(p),p=Uf(v)}}return _c({width:f,height:m,x:c,y:u})}function ym(e,t){const n=mu(e).scrollLeft;return t?t.left+n:lo(Rr(e)).left+n}function Oy(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:ym(e,r)),o=r.top+t.scrollTop;return{x:s,y:o}}function wj(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o=s==="fixed",a=Rr(r),l=t?hu(t.floating):!1;if(r===a||l&&o)return n;let c={scrollLeft:0,scrollTop:0},u=Tr(1);const f=Tr(0),m=Pr(r);if((m||!m&&!o)&&((Ii(r)!=="body"||Ka(a))&&(c=mu(r)),Pr(r))){const y=lo(r);u=li(r),f.x=y.x+r.clientLeft,f.y=y.y+r.clientTop}const h=a&&!m&&!o?Oy(a,c,!0):Tr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x+h.x,y:n.y*u.y-c.scrollTop*u.y+f.y+h.y}}function bj(e){return Array.from(e.getClientRects())}function Sj(e){const t=Rr(e),n=mu(e),r=e.ownerDocument.body,s=An(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=An(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+ym(e);const l=-n.scrollTop;return mr(r).direction==="rtl"&&(a+=An(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:a,y:l}}function kj(e,t){const n=Dn(e),r=Rr(e),s=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){o=s.width,a=s.height;const u=vm();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:o,height:a,x:l,y:c}}function Nj(e,t){const n=lo(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=Pr(e)?li(e):Tr(1),a=e.clientWidth*o.x,l=e.clientHeight*o.y,c=s*o.x,u=r*o.y;return{width:a,height:l,x:c,y:u}}function Pg(e,t,n){let r;if(t==="viewport")r=kj(e,n);else if(t==="document")r=Sj(Rr(e));else if(hr(t))r=Nj(t,n);else{const s=Iy(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return _c(r)}function $y(e,t){const n=_s(e);return n===t||!hr(n)||ki(n)?!1:mr(n).position==="fixed"||$y(n,t)}function Cj(e,t){const n=t.get(e);if(n)return n;let r=Da(e,[],!1).filter(l=>hr(l)&&Ii(l)!=="body"),s=null;const o=mr(e).position==="fixed";let a=o?_s(e):e;for(;hr(a)&&!ki(a);){const l=mr(a),c=gm(a);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Ka(a)&&!c&&$y(e,a))?r=r.filter(f=>f!==a):s=l,a=_s(a)}return t.set(e,r),r}function jj(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const a=[...n==="clippingAncestors"?hu(t)?[]:Cj(t,this._c):[].concat(n),r],l=a[0],c=a.reduce((u,f)=>{const m=Pg(t,f,s);return u.top=An(m.top,u.top),u.right=Ps(m.right,u.right),u.bottom=Ps(m.bottom,u.bottom),u.left=An(m.left,u.left),u},Pg(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Ej(e){const{width:t,height:n}=Ly(e);return{width:t,height:n}}function Tj(e,t,n){const r=Pr(t),s=Rr(t),o=n==="fixed",a=lo(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=Tr(0);if(r||!r&&!o)if((Ii(t)!=="body"||Ka(s))&&(l=mu(t)),r){const h=lo(t,!0,o,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else s&&(c.x=ym(s));const u=s&&!r&&!o?Oy(s,l):Tr(0),f=a.left+l.scrollLeft-c.x-u.x,m=a.top+l.scrollTop-c.y-u.y;return{x:f,y:m,width:a.width,height:a.height}}function hd(e){return mr(e).position==="static"}function Rg(e,t){if(!Pr(e)||mr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Rr(e)===n&&(n=n.ownerDocument.body),n}function Dy(e,t){const n=Dn(e);if(hu(e))return n;if(!Pr(e)){let s=_s(e);for(;s&&!ki(s);){if(hr(s)&&!hd(s))return s;s=_s(s)}return n}let r=Rg(e,t);for(;r&&gj(r)&&hd(r);)r=Rg(r,t);return r&&ki(r)&&hd(r)&&!gm(r)?n:r||vj(e)||n}const Pj=async function(e){const t=this.getOffsetParent||Dy,n=this.getDimensions,r=await n(e.floating);return{reference:Tj(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Rj(e){return mr(e).direction==="rtl"}const _j={convertOffsetParentRelativeRectToViewportRelativeRect:wj,getDocumentElement:Rr,getClippingRect:jj,getOffsetParent:Dy,getElementRects:Pj,getClientRects:bj,getDimensions:Ej,getScale:li,isElement:hr,isRTL:Rj};function Fy(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Mj(e,t){let n=null,r;const s=Rr(e);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=e.getBoundingClientRect(),{left:f,top:m,width:h,height:y}=u;if(l||t(),!h||!y)return;const v=kl(m),p=kl(s.clientWidth-(f+h)),b=kl(s.clientHeight-(m+y)),x=kl(f),w={rootMargin:-v+"px "+-p+"px "+-b+"px "+-x+"px",threshold:An(0,Ps(1,c))||1};let k=!0;function S(C){const N=C[0].intersectionRatio;if(N!==c){if(!k)return a();N?a(!1,N):r=setTimeout(()=>{a(!1,1e-7)},1e3)}N===1&&!Fy(u,e.getBoundingClientRect())&&a(),k=!1}try{n=new IntersectionObserver(S,{...w,root:s.ownerDocument})}catch{n=new IntersectionObserver(S,w)}n.observe(e)}return a(!0),o}function Aj(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=xm(e),f=s||o?[...u?Da(u):[],...Da(t)]:[];f.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),o&&x.addEventListener("resize",n)});const m=u&&l?Mj(u,n):null;let h=-1,y=null;a&&(y=new ResizeObserver(x=>{let[g]=x;g&&g.target===u&&y&&(y.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=y)==null||w.observe(t)})),n()}),u&&!c&&y.observe(u),y.observe(t));let v,p=c?lo(e):null;c&&b();function b(){const x=lo(e);p&&!Fy(p,x)&&n(),p=x,v=requestAnimationFrame(b)}return n(),()=>{var x;f.forEach(g=>{s&&g.removeEventListener("scroll",n),o&&g.removeEventListener("resize",n)}),m==null||m(),(x=y)==null||x.disconnect(),y=null,c&&cancelAnimationFrame(v)}}const Lj=fj,Ij=hj,Oj=cj,$j=pj,Dj=uj,_g=lj,Fj=mj,Bj=(e,t,n)=>{const r=new Map,s={platform:_j,...n},o={...s.platform,_c:r};return aj(e,t,{...s,platform:o})};var Ql=typeof document<"u"?d.useLayoutEffect:d.useEffect;function Mc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Mc(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!Mc(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function By(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Mg(e,t){const n=By(e);return Math.round(t*n)/n}function md(e){const t=d.useRef(e);return Ql(()=>{t.current=e}),t}function zj(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[f,m]=d.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,y]=d.useState(r);Mc(h,r)||y(r);const[v,p]=d.useState(null),[b,x]=d.useState(null),g=d.useCallback(T=>{T!==C.current&&(C.current=T,p(T))},[]),w=d.useCallback(T=>{T!==N.current&&(N.current=T,x(T))},[]),k=o||v,S=a||b,C=d.useRef(null),N=d.useRef(null),j=d.useRef(f),R=c!=null,_=md(c),B=md(s),D=md(u),I=d.useCallback(()=>{if(!C.current||!N.current)return;const T={placement:t,strategy:n,middleware:h};B.current&&(T.platform=B.current),Bj(C.current,N.current,T).then($=>{const W={...$,isPositioned:D.current!==!1};O.current&&!Mc(j.current,W)&&(j.current=W,xo.flushSync(()=>{m(W)}))})},[h,t,n,B,D]);Ql(()=>{u===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,m(T=>({...T,isPositioned:!1})))},[u]);const O=d.useRef(!1);Ql(()=>(O.current=!0,()=>{O.current=!1}),[]),Ql(()=>{if(k&&(C.current=k),S&&(N.current=S),k&&S){if(_.current)return _.current(k,S,I);I()}},[k,S,I,_,R]);const F=d.useMemo(()=>({reference:C,floating:N,setReference:g,setFloating:w}),[g,w]),q=d.useMemo(()=>({reference:k,floating:S}),[k,S]),Q=d.useMemo(()=>{const T={position:n,left:0,top:0};if(!q.floating)return T;const $=Mg(q.floating,f.x),W=Mg(q.floating,f.y);return l?{...T,transform:"translate("+$+"px, "+W+"px)",...By(q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:W}},[n,l,q.floating,f.x,f.y]);return d.useMemo(()=>({...f,update:I,refs:F,elements:q,floatingStyles:Q}),[f,I,F,q,Q])}const Vj=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?_g({element:r.current,padding:s}).fn(n):{}:r?_g({element:r,padding:s}).fn(n):{}}}},qj=(e,t)=>({...Lj(e),options:[e,t]}),Uj=(e,t)=>({...Ij(e),options:[e,t]}),Wj=(e,t)=>({...Fj(e),options:[e,t]}),Hj=(e,t)=>({...Oj(e),options:[e,t]}),Gj=(e,t)=>({...$j(e),options:[e,t]}),Kj=(e,t)=>({...Dj(e),options:[e,t]}),Qj=(e,t)=>({...Vj(e),options:[e,t]});var Yj="Arrow",zy=d.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...o}=e;return i.jsx(we.svg,{...o,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});zy.displayName=Yj;var Xj=zy;function Vy(e){const[t,n]=d.useState(void 0);return Kt(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;n({width:a,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var wm="Popper",[qy,pu]=Xn(wm),[Zj,Uy]=qy(wm),Wy=e=>{const{__scopePopper:t,children:n}=e,[r,s]=d.useState(null);return i.jsx(Zj,{scope:t,anchor:r,onAnchorChange:s,children:n})};Wy.displayName=wm;var Hy="PopperAnchor",Gy=d.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,o=Uy(Hy,n),a=d.useRef(null),l=Fe(t,a);return d.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:i.jsx(we.div,{...s,ref:l})});Gy.displayName=Hy;var bm="PopperContent",[Jj,eE]=qy(bm),Ky=d.forwardRef((e,t)=>{var z,J,ie,ge,te,ne;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:h=!1,updatePositionStrategy:y="optimized",onPlaced:v,...p}=e,b=Uy(bm,n),[x,g]=d.useState(null),w=Fe(t,Ne=>g(Ne)),[k,S]=d.useState(null),C=Vy(k),N=(C==null?void 0:C.width)??0,j=(C==null?void 0:C.height)??0,R=r+(o!=="center"?"-"+o:""),_=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},B=Array.isArray(u)?u:[u],D=B.length>0,I={padding:_,boundary:B.filter(nE),altBoundary:D},{refs:O,floatingStyles:F,placement:q,isPositioned:Q,middlewareData:T}=zj({strategy:"fixed",placement:R,whileElementsMounted:(...Ne)=>Aj(...Ne,{animationFrame:y==="always"}),elements:{reference:b.anchor},middleware:[qj({mainAxis:s+j,alignmentAxis:a}),c&&Uj({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Wj():void 0,...I}),c&&Hj({...I}),Gj({...I,apply:({elements:Ne,rects:ae,availableWidth:$e,availableHeight:Me})=>{const{width:Ae,height:Ot}=ae.reference,St=Ne.floating.style;St.setProperty("--radix-popper-available-width",`${$e}px`),St.setProperty("--radix-popper-available-height",`${Me}px`),St.setProperty("--radix-popper-anchor-width",`${Ae}px`),St.setProperty("--radix-popper-anchor-height",`${Ot}px`)}}),k&&Qj({element:k,padding:l}),rE({arrowWidth:N,arrowHeight:j}),h&&Kj({strategy:"referenceHidden",...I})]}),[$,W]=Xy(q),Y=bt(v);Kt(()=>{Q&&(Y==null||Y())},[Q,Y]);const be=(z=T.arrow)==null?void 0:z.x,Pe=(J=T.arrow)==null?void 0:J.y,_e=((ie=T.arrow)==null?void 0:ie.centerOffset)!==0,[fe,L]=d.useState();return Kt(()=>{x&&L(window.getComputedStyle(x).zIndex)},[x]),i.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:Q?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:fe,"--radix-popper-transform-origin":[(ge=T.transformOrigin)==null?void 0:ge.x,(te=T.transformOrigin)==null?void 0:te.y].join(" "),...((ne=T.hide)==null?void 0:ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(Jj,{scope:n,placedSide:$,onArrowChange:S,arrowX:be,arrowY:Pe,shouldHideArrow:_e,children:i.jsx(we.div,{"data-side":$,"data-align":W,...p,ref:w,style:{...p.style,animation:Q?void 0:"none"}})})})});Ky.displayName=bm;var Qy="PopperArrow",tE={top:"bottom",right:"left",bottom:"top",left:"right"},Yy=d.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,o=eE(Qy,r),a=tE[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(Xj,{...s,ref:n,style:{...s.style,display:"block"}})})});Yy.displayName=Qy;function nE(e){return e!==null}var rE=e=>({name:"transformOrigin",options:e,fn(t){var b,x,g;const{placement:n,rects:r,middlewareData:s}=t,a=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,f]=Xy(n),m={start:"0%",center:"50%",end:"100%"}[f],h=(((x=s.arrow)==null?void 0:x.x)??0)+l/2,y=(((g=s.arrow)==null?void 0:g.y)??0)+c/2;let v="",p="";return u==="bottom"?(v=a?m:`${h}px`,p=`${-c}px`):u==="top"?(v=a?m:`${h}px`,p=`${r.floating.height+c}px`):u==="right"?(v=`${-c}px`,p=a?m:`${y}px`):u==="left"&&(v=`${r.floating.width+c}px`,p=a?m:`${y}px`),{data:{x:v,y:p}}}});function Xy(e){const[t,n="center"]=e.split("-");return[t,n]}var sE=Wy,Zy=Gy,Jy=Ky,ew=Yy,[gu,HM]=Xn("Tooltip",[pu]),Sm=pu(),tw="TooltipProvider",oE=700,Ag="tooltip.open",[iE,nw]=gu(tw),rw=e=>{const{__scopeTooltip:t,delayDuration:n=oE,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=e,a=d.useRef(!0),l=d.useRef(!1),c=d.useRef(0);return d.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(iE,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:d.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:d.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:d.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:o})};rw.displayName=tw;var sw="Tooltip",[GM,vu]=gu(sw),Wf="TooltipTrigger",aE=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=vu(Wf,n),o=nw(Wf,n),a=Sm(n),l=d.useRef(null),c=Fe(t,l,s.onTriggerChange),u=d.useRef(!1),f=d.useRef(!1),m=d.useCallback(()=>u.current=!1,[]);return d.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),i.jsx(Zy,{asChild:!0,...a,children:i.jsx(we.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:de(e.onPointerMove,h=>{h.pointerType!=="touch"&&!f.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:de(e.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:de(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:de(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:de(e.onBlur,s.onClose),onClick:de(e.onClick,s.onClose)})})});aE.displayName=Wf;var lE="TooltipPortal",[KM,cE]=gu(lE,{forceMount:void 0}),Ni="TooltipContent",ow=d.forwardRef((e,t)=>{const n=cE(Ni,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=e,a=vu(Ni,e.__scopeTooltip);return i.jsx(pr,{present:r||a.open,children:a.disableHoverableContent?i.jsx(iw,{side:s,...o,ref:t}):i.jsx(uE,{side:s,...o,ref:t})})}),uE=d.forwardRef((e,t)=>{const n=vu(Ni,e.__scopeTooltip),r=nw(Ni,e.__scopeTooltip),s=d.useRef(null),o=Fe(t,s),[a,l]=d.useState(null),{trigger:c,onClose:u}=n,f=s.current,{onPointerInTransitChange:m}=r,h=d.useCallback(()=>{l(null),m(!1)},[m]),y=d.useCallback((v,p)=>{const b=v.currentTarget,x={x:v.clientX,y:v.clientY},g=pE(x,b.getBoundingClientRect()),w=gE(x,g),k=vE(p.getBoundingClientRect()),S=yE([...w,...k]);l(S),m(!0)},[m]);return d.useEffect(()=>()=>h(),[h]),d.useEffect(()=>{if(c&&f){const v=b=>y(b,f),p=b=>y(b,c);return c.addEventListener("pointerleave",v),f.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",v),f.removeEventListener("pointerleave",p)}}},[c,f,y,h]),d.useEffect(()=>{if(a){const v=p=>{const b=p.target,x={x:p.clientX,y:p.clientY},g=(c==null?void 0:c.contains(b))||(f==null?void 0:f.contains(b)),w=!xE(x,a);g?h():w&&(h(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,f,a,u,h]),i.jsx(iw,{...e,ref:o})}),[dE,fE]=gu(sw,{isInside:!1}),hE=_x("TooltipContent"),iw=d.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:a,...l}=e,c=vu(Ni,n),u=Sm(n),{onClose:f}=c;return d.useEffect(()=>(document.addEventListener(Ag,f),()=>document.removeEventListener(Ag,f)),[f]),d.useEffect(()=>{if(c.trigger){const m=h=>{const y=h.target;y!=null&&y.contains(c.trigger)&&f()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,f]),i.jsx(Ha,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:m=>m.preventDefault(),onDismiss:f,children:i.jsxs(Jy,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(hE,{children:r}),i.jsx(dE,{scope:n,isInside:!0,children:i.jsx(kC,{id:c.contentId,role:"tooltip",children:s||r})})]})})});ow.displayName=Ni;var aw="TooltipArrow",mE=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Sm(n);return fE(aw,n).isInside?null:i.jsx(ew,{...s,...r,ref:t})});mE.displayName=aw;function pE(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function gE(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function vE(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function xE(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const l=t[o].x,c=t[o].y,u=t[a].x,f=t[a].y;c>r!=f>r&&n<(u-l)*(r-c)/(f-c)+l&&(s=!s)}return s}function yE(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),wE(t)}function wE(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const o=t[t.length-1],a=t[t.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const o=n[n.length-1],a=n[n.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var bE=rw,lw=ow;const SE=bE,kE=d.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(lw,{ref:r,sideOffset:t,className:je("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));kE.displayName=lw.displayName;const NE={theme:"dark",setTheme:()=>null},cw=d.createContext(NE);function CE({children:e,defaultTheme:t="dark",storageKey:n="simul-chess-theme",...r}){const[s,o]=d.useState(()=>typeof window>"u"?t:localStorage.getItem(n)||t);d.useEffect(()=>{const l=window.document.documentElement;l.classList.remove("light","dark"),l.classList.add(s)},[s]);const a={theme:s,setTheme:l=>{localStorage.setItem(n,l),o(l)}};return i.jsx(cw.Provider,{...r,value:a,children:e})}const jE=()=>{const e=d.useContext(cw);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},km=uu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),X=d.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},o)=>{const a=r?nC:"button";return i.jsx(a,{className:je(km({variant:t,size:n,className:e})),ref:o,...s})});X.displayName="Button";function EE(){const{theme:e,setTheme:t}=jE();return i.jsxs(X,{variant:"ghost",size:"icon",onClick:()=>t(e==="light"?"dark":"light"),"data-testid":"button-theme-toggle",children:[i.jsx(h2,{className:"h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),i.jsx(my,{className:"absolute h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),i.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function uw(e){const t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Nm="Switch",[TE,QM]=Xn(Nm),[PE,RE]=TE(Nm),dw=d.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:o,required:a,disabled:l,value:c="on",onCheckedChange:u,form:f,...m}=e,[h,y]=d.useState(null),v=Fe(t,w=>y(w)),p=d.useRef(!1),b=h?f||!!h.closest("form"):!0,[x=!1,g]=ao({prop:s,defaultProp:o,onChange:u});return i.jsxs(PE,{scope:n,checked:x,disabled:l,children:[i.jsx(we.button,{type:"button",role:"switch","aria-checked":x,"aria-required":a,"data-state":mw(x),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:v,onClick:de(e.onClick,w=>{g(k=>!k),b&&(p.current=w.isPropagationStopped(),p.current||w.stopPropagation())})}),b&&i.jsx(_E,{control:h,bubbles:!p.current,name:r,value:c,checked:x,required:a,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});dw.displayName=Nm;var fw="SwitchThumb",hw=d.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=RE(fw,n);return i.jsx(we.span,{"data-state":mw(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});hw.displayName=fw;var _E=e=>{const{control:t,checked:n,bubbles:r=!0,...s}=e,o=d.useRef(null),a=uw(n),l=Vy(t);return d.useEffect(()=>{const c=o.current,u=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==n&&m){const h=new Event("click",{bubbles:r});m.call(c,n),c.dispatchEvent(h)}},[a,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:o,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function mw(e){return e?"checked":"unchecked"}var pw=dw,ME=hw;const cr=d.forwardRef(({className:e,...t},n)=>i.jsx(pw,{className:je("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:i.jsx(ME,{className:je("pointer-events-none block h-5 w-5 rounded-full bg-stone-300 dark:bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));cr.displayName=pw.displayName;var AE="Label",gw=d.forwardRef((e,t)=>i.jsx(we.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));gw.displayName=AE;var vw=gw;const LE=uu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),rn=d.forwardRef(({className:e,...t},n)=>i.jsx(vw,{ref:n,className:je(LE(),e),...t}));rn.displayName=vw.displayName;var pd="focusScope.autoFocusOnMount",gd="focusScope.autoFocusOnUnmount",Lg={bubbles:!1,cancelable:!0},IE="FocusScope",Cm=d.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=e,[l,c]=d.useState(null),u=bt(s),f=bt(o),m=d.useRef(null),h=Fe(t,p=>c(p)),y=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(r){let p=function(w){if(y.paused||!l)return;const k=w.target;l.contains(k)?m.current=k:ls(m.current,{select:!0})},b=function(w){if(y.paused||!l)return;const k=w.relatedTarget;k!==null&&(l.contains(k)||ls(m.current,{select:!0}))},x=function(w){if(document.activeElement===document.body)for(const S of w)S.removedNodes.length>0&&ls(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",b);const g=new MutationObserver(x);return l&&g.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",b),g.disconnect()}}},[r,l,y.paused]),d.useEffect(()=>{if(l){Og.add(y);const p=document.activeElement;if(!l.contains(p)){const x=new CustomEvent(pd,Lg);l.addEventListener(pd,u),l.dispatchEvent(x),x.defaultPrevented||(OE(zE(xw(l)),{select:!0}),document.activeElement===p&&ls(l))}return()=>{l.removeEventListener(pd,u),setTimeout(()=>{const x=new CustomEvent(gd,Lg);l.addEventListener(gd,f),l.dispatchEvent(x),x.defaultPrevented||ls(p??document.body,{select:!0}),l.removeEventListener(gd,f),Og.remove(y)},0)}}},[l,u,f,y]);const v=d.useCallback(p=>{if(!n&&!r||y.paused)return;const b=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,x=document.activeElement;if(b&&x){const g=p.currentTarget,[w,k]=$E(g);w&&k?!p.shiftKey&&x===k?(p.preventDefault(),n&&ls(w,{select:!0})):p.shiftKey&&x===w&&(p.preventDefault(),n&&ls(k,{select:!0})):x===g&&p.preventDefault()}},[n,r,y.paused]);return i.jsx(we.div,{tabIndex:-1,...a,ref:h,onKeyDown:v})});Cm.displayName=IE;function OE(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ls(r,{select:t}),document.activeElement!==n)return}function $E(e){const t=xw(e),n=Ig(t,e),r=Ig(t.reverse(),e);return[n,r]}function xw(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Ig(e,t){for(const n of e)if(!DE(n,{upTo:t}))return n}function DE(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function FE(e){return e instanceof HTMLInputElement&&"select"in e}function ls(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&FE(e)&&t&&e.select()}}var Og=BE();function BE(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=$g(e,t),e.unshift(t)},remove(t){var n;e=$g(e,t),(n=e[0])==null||n.resume()}}}function $g(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function zE(e){return e.filter(t=>t.tagName!=="A")}var vd=0;function yw(){d.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Dg()),document.body.insertAdjacentElement("beforeend",e[1]??Dg()),vd++,()=>{vd===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),vd--}},[])}function Dg(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Nr=function(){return Nr=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Nr.apply(this,arguments)};function ww(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function VE(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var Yl="right-scroll-bar-position",Xl="width-before-scroll-bar",qE="with-scroll-bars-hidden",UE="--removed-body-scroll-bar-size";function xd(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function WE(e,t){var n=d.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var HE=typeof window<"u"?d.useLayoutEffect:d.useEffect,Fg=new WeakMap;function GE(e,t){var n=WE(null,function(r){return e.forEach(function(s){return xd(s,r)})});return HE(function(){var r=Fg.get(n);if(r){var s=new Set(r),o=new Set(e),a=n.current;s.forEach(function(l){o.has(l)||xd(l,null)}),o.forEach(function(l){s.has(l)||xd(l,a)})}Fg.set(n,e)},[e]),n}function KE(e){return e}function QE(e,t){t===void 0&&(t=KE);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var a=t(o,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(o){for(r=!0;n.length;){var a=n;n=[],a.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(o),a=n}var c=function(){var f=a;a=[],f.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(f){a.push(f),u()},filter:function(f){return a=a.filter(f),n}}}};return s}function YE(e){e===void 0&&(e={});var t=QE(null);return t.options=Nr({async:!0,ssr:!1},e),t}var bw=function(e){var t=e.sideCar,n=ww(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return d.createElement(r,Nr({},n))};bw.isSideCarExport=!0;function XE(e,t){return e.useMedium(t),bw}var Sw=YE(),yd=function(){},xu=d.forwardRef(function(e,t){var n=d.useRef(null),r=d.useState({onScrollCapture:yd,onWheelCapture:yd,onTouchMoveCapture:yd}),s=r[0],o=r[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,m=e.shards,h=e.sideCar,y=e.noIsolation,v=e.inert,p=e.allowPinchZoom,b=e.as,x=b===void 0?"div":b,g=e.gapMode,w=ww(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=h,S=GE([n,t]),C=Nr(Nr({},w),s);return d.createElement(d.Fragment,null,f&&d.createElement(k,{sideCar:Sw,removeScrollBar:u,shards:m,noIsolation:y,inert:v,setCallbacks:o,allowPinchZoom:!!p,lockRef:n,gapMode:g}),a?d.cloneElement(d.Children.only(l),Nr(Nr({},C),{ref:S})):d.createElement(x,Nr({},C,{className:c,ref:S}),l))});xu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};xu.classNames={fullWidth:Xl,zeroRight:Yl};var ZE=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function JE(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=ZE();return t&&e.setAttribute("nonce",t),e}function eT(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function tT(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var nT=function(){var e=0,t=null;return{add:function(n){e==0&&(t=JE())&&(eT(t,n),tT(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},rT=function(){var e=nT();return function(t,n){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},kw=function(){var e=rT(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},sT={left:0,top:0,right:0,gap:0},wd=function(e){return parseInt(e||"",10)||0},oT=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[wd(n),wd(r),wd(s)]},iT=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return sT;var t=oT(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},aT=kw(),ci="data-scroll-locked",lT=function(e,t,n,r){var s=e.left,o=e.top,a=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(qE,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(ci,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Yl,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Xl,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Yl," .").concat(Yl,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Xl," .").concat(Xl,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ci,`] {
    `).concat(UE,": ").concat(l,`px;
  }
`)},Bg=function(){var e=parseInt(document.body.getAttribute(ci)||"0",10);return isFinite(e)?e:0},cT=function(){d.useEffect(function(){return document.body.setAttribute(ci,(Bg()+1).toString()),function(){var e=Bg()-1;e<=0?document.body.removeAttribute(ci):document.body.setAttribute(ci,e.toString())}},[])},uT=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;cT();var o=d.useMemo(function(){return iT(s)},[s]);return d.createElement(aT,{styles:lT(o,!t,s,n?"":"!important")})},Hf=!1;if(typeof window<"u")try{var Nl=Object.defineProperty({},"passive",{get:function(){return Hf=!0,!0}});window.addEventListener("test",Nl,Nl),window.removeEventListener("test",Nl,Nl)}catch{Hf=!1}var Io=Hf?{passive:!1}:!1,dT=function(e){return e.tagName==="TEXTAREA"},Nw=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!dT(e)&&n[t]==="visible")},fT=function(e){return Nw(e,"overflowY")},hT=function(e){return Nw(e,"overflowX")},zg=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Cw(e,r);if(s){var o=jw(e,r),a=o[1],l=o[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},mT=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},pT=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Cw=function(e,t){return e==="v"?fT(t):hT(t)},jw=function(e,t){return e==="v"?mT(t):pT(t)},gT=function(e,t){return e==="h"&&t==="rtl"?-1:1},vT=function(e,t,n,r,s){var o=gT(e,window.getComputedStyle(t).direction),a=o*r,l=n.target,c=t.contains(l),u=!1,f=a>0,m=0,h=0;do{var y=jw(e,l),v=y[0],p=y[1],b=y[2],x=p-b-o*v;(v||x)&&Cw(e,l)&&(m+=x,h+=v),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(Math.abs(m)<1||!s)||!f&&(Math.abs(h)<1||!s))&&(u=!0),u},Cl=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Vg=function(e){return[e.deltaX,e.deltaY]},qg=function(e){return e&&"current"in e?e.current:e},xT=function(e,t){return e[0]===t[0]&&e[1]===t[1]},yT=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},wT=0,Oo=[];function bT(e){var t=d.useRef([]),n=d.useRef([0,0]),r=d.useRef(),s=d.useState(wT++)[0],o=d.useState(kw)[0],a=d.useRef(e);d.useEffect(function(){a.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var p=VE([e.lockRef.current],(e.shards||[]).map(qg),!0).filter(Boolean);return p.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=d.useCallback(function(p,b){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!a.current.allowPinchZoom;var x=Cl(p),g=n.current,w="deltaX"in p?p.deltaX:g[0]-x[0],k="deltaY"in p?p.deltaY:g[1]-x[1],S,C=p.target,N=Math.abs(w)>Math.abs(k)?"h":"v";if("touches"in p&&N==="h"&&C.type==="range")return!1;var j=zg(N,C);if(!j)return!0;if(j?S=N:(S=N==="v"?"h":"v",j=zg(N,C)),!j)return!1;if(!r.current&&"changedTouches"in p&&(w||k)&&(r.current=S),!S)return!0;var R=r.current||S;return vT(R,b,p,R==="h"?w:k,!0)},[]),c=d.useCallback(function(p){var b=p;if(!(!Oo.length||Oo[Oo.length-1]!==o)){var x="deltaY"in b?Vg(b):Cl(b),g=t.current.filter(function(S){return S.name===b.type&&(S.target===b.target||b.target===S.shadowParent)&&xT(S.delta,x)})[0];if(g&&g.should){b.cancelable&&b.preventDefault();return}if(!g){var w=(a.current.shards||[]).map(qg).filter(Boolean).filter(function(S){return S.contains(b.target)}),k=w.length>0?l(b,w[0]):!a.current.noIsolation;k&&b.cancelable&&b.preventDefault()}}},[]),u=d.useCallback(function(p,b,x,g){var w={name:p,delta:b,target:x,should:g,shadowParent:ST(x)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(k){return k!==w})},1)},[]),f=d.useCallback(function(p){n.current=Cl(p),r.current=void 0},[]),m=d.useCallback(function(p){u(p.type,Vg(p),p.target,l(p,e.lockRef.current))},[]),h=d.useCallback(function(p){u(p.type,Cl(p),p.target,l(p,e.lockRef.current))},[]);d.useEffect(function(){return Oo.push(o),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Io),document.addEventListener("touchmove",c,Io),document.addEventListener("touchstart",f,Io),function(){Oo=Oo.filter(function(p){return p!==o}),document.removeEventListener("wheel",c,Io),document.removeEventListener("touchmove",c,Io),document.removeEventListener("touchstart",f,Io)}},[]);var y=e.removeScrollBar,v=e.inert;return d.createElement(d.Fragment,null,v?d.createElement(o,{styles:yT(s)}):null,y?d.createElement(uT,{gapMode:e.gapMode}):null)}function ST(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const kT=XE(Sw,bT);var jm=d.forwardRef(function(e,t){return d.createElement(xu,Nr({},e,{ref:t,sideCar:kT}))});jm.classNames=xu.classNames;var NT=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},$o=new WeakMap,jl=new WeakMap,El={},bd=0,Ew=function(e){return e&&(e.host||Ew(e.parentNode))},CT=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Ew(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},jT=function(e,t,n,r){var s=CT(t,Array.isArray(e)?e:[e]);El[n]||(El[n]=new WeakMap);var o=El[n],a=[],l=new Set,c=new Set(s),u=function(m){!m||l.has(m)||(l.add(m),u(m.parentNode))};s.forEach(u);var f=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(h){if(l.has(h))f(h);else try{var y=h.getAttribute(r),v=y!==null&&y!=="false",p=($o.get(h)||0)+1,b=(o.get(h)||0)+1;$o.set(h,p),o.set(h,b),a.push(h),p===1&&v&&jl.set(h,!0),b===1&&h.setAttribute(n,"true"),v||h.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return f(t),l.clear(),bd++,function(){a.forEach(function(m){var h=$o.get(m)-1,y=o.get(m)-1;$o.set(m,h),o.set(m,y),h||(jl.has(m)||m.removeAttribute(r),jl.delete(m)),y||m.removeAttribute(n)}),bd--,bd||($o=new WeakMap,$o=new WeakMap,jl=new WeakMap,El={})}},Tw=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=NT(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),jT(r,s,n,"aria-hidden")):function(){return null}},Em="Dialog",[Pw,Rw]=Xn(Em),[ET,gr]=Pw(Em),_w=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:a=!0}=e,l=d.useRef(null),c=d.useRef(null),[u=!1,f]=ao({prop:r,defaultProp:s,onChange:o});return i.jsx(ET,{scope:t,triggerRef:l,contentRef:c,contentId:Cs(),titleId:Cs(),descriptionId:Cs(),open:u,onOpenChange:f,onOpenToggle:d.useCallback(()=>f(m=>!m),[f]),modal:a,children:n})};_w.displayName=Em;var Mw="DialogTrigger",Aw=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=gr(Mw,n),o=Fe(t,s.triggerRef);return i.jsx(we.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Rm(s.open),...r,ref:o,onClick:de(e.onClick,s.onOpenToggle)})});Aw.displayName=Mw;var Tm="DialogPortal",[TT,Lw]=Pw(Tm,{forceMount:void 0}),Iw=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,o=gr(Tm,t);return i.jsx(TT,{scope:t,forceMount:n,children:d.Children.map(r,a=>i.jsx(pr,{present:n||o.open,children:i.jsx(au,{asChild:!0,container:s,children:a})}))})};Iw.displayName=Tm;var Ac="DialogOverlay",Ow=d.forwardRef((e,t)=>{const n=Lw(Ac,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=gr(Ac,e.__scopeDialog);return o.modal?i.jsx(pr,{present:r||o.open,children:i.jsx(RT,{...s,ref:t})}):null});Ow.displayName=Ac;var PT=bi("DialogOverlay.RemoveScroll"),RT=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=gr(Ac,n);return i.jsx(jm,{as:PT,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(we.div,{"data-state":Rm(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),co="DialogContent",$w=d.forwardRef((e,t)=>{const n=Lw(co,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=gr(co,e.__scopeDialog);return i.jsx(pr,{present:r||o.open,children:o.modal?i.jsx(_T,{...s,ref:t}):i.jsx(MT,{...s,ref:t})})});$w.displayName=co;var _T=d.forwardRef((e,t)=>{const n=gr(co,e.__scopeDialog),r=d.useRef(null),s=Fe(t,n.contentRef,r);return d.useEffect(()=>{const o=r.current;if(o)return Tw(o)},[]),i.jsx(Dw,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:de(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:de(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&o.preventDefault()}),onFocusOutside:de(e.onFocusOutside,o=>o.preventDefault())})}),MT=d.forwardRef((e,t)=>{const n=gr(co,e.__scopeDialog),r=d.useRef(!1),s=d.useRef(!1);return i.jsx(Dw,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,o),o.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),Dw=d.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=e,l=gr(co,n),c=d.useRef(null),u=Fe(t,c);return yw(),i.jsxs(i.Fragment,{children:[i.jsx(Cm,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(Ha,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Rm(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(LT,{titleId:l.titleId}),i.jsx(OT,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Pm="DialogTitle",Fw=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=gr(Pm,n);return i.jsx(we.h2,{id:s.titleId,...r,ref:t})});Fw.displayName=Pm;var Bw="DialogDescription",zw=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=gr(Bw,n);return i.jsx(we.p,{id:s.descriptionId,...r,ref:t})});zw.displayName=Bw;var Vw="DialogClose",qw=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=gr(Vw,n);return i.jsx(we.button,{type:"button",...r,ref:t,onClick:de(e.onClick,()=>s.onOpenChange(!1))})});qw.displayName=Vw;function Rm(e){return e?"open":"closed"}var Uw="DialogTitleWarning",[AT,Ww]=eC(Uw,{contentName:co,titleName:Pm,docsSlug:"dialog"}),LT=({titleId:e})=>{const t=Ww(Uw),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},IT="DialogDescriptionWarning",OT=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ww(IT).contentName}}.`;return d.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},Hw=_w,Gw=Aw,Kw=Iw,_m=Ow,Mm=$w,Am=Fw,Lm=zw,Im=qw;const Ci=Hw,Lc=Gw,$T=Kw,Qw=d.forwardRef(({className:e,...t},n)=>i.jsx(_m,{ref:n,className:je("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Qw.displayName=_m.displayName;const uo=d.forwardRef(({className:e,children:t,...n},r)=>i.jsxs($T,{children:[i.jsx(Qw,{}),i.jsxs(Mm,{ref:r,className:je("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,i.jsxs(Im,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(Si,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));uo.displayName=Mm.displayName;const fo=({className:e,...t})=>i.jsx("div",{className:je("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});fo.displayName="DialogHeader";const ho=d.forwardRef(({className:e,...t},n)=>i.jsx(Am,{ref:n,className:je("text-lg font-semibold leading-none tracking-tight",e),...t}));ho.displayName=Am.displayName;const Yw=d.forwardRef(({className:e,...t},n)=>i.jsx(Lm,{ref:n,className:je("text-sm text-muted-foreground",e),...t}));Yw.displayName=Lm.displayName;/*! Capacitor: https://capacitorjs.com/ - MIT License */var ji;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(ji||(ji={}));class Sd extends Error{constructor(t,n,r){super(t),this.message=t,this.code=n,this.data=r}}const DT=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},FT=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>t!==null?t.name:DT(e),o=()=>s()!=="web",a=m=>{const h=u.get(m);return!!(h!=null&&h.platforms.has(s())||l(m))},l=m=>{var h;return(h=n.PluginHeaders)===null||h===void 0?void 0:h.find(y=>y.name===m)},c=m=>e.console.error(m),u=new Map,f=(m,h={})=>{const y=u.get(m);if(y)return console.warn(`Capacitor plugin "${m}" already registered. Cannot register plugins twice.`),y.proxy;const v=s(),p=l(m);let b;const x=async()=>(!b&&v in h?b=typeof h[v]=="function"?b=await h[v]():b=h[v]:t!==null&&!b&&"web"in h&&(b=typeof h.web=="function"?b=await h.web():b=h.web),b),g=(j,R)=>{var _,B;if(p){const D=p==null?void 0:p.methods.find(I=>R===I.name);if(D)return D.rtype==="promise"?I=>n.nativePromise(m,R.toString(),I):(I,O)=>n.nativeCallback(m,R.toString(),I,O);if(j)return(_=j[R])===null||_===void 0?void 0:_.bind(j)}else{if(j)return(B=j[R])===null||B===void 0?void 0:B.bind(j);throw new Sd(`"${m}" plugin is not implemented on ${v}`,ji.Unimplemented)}},w=j=>{let R;const _=(...B)=>{const D=x().then(I=>{const O=g(I,j);if(O){const F=O(...B);return R=F==null?void 0:F.remove,F}else throw new Sd(`"${m}.${j}()" is not implemented on ${v}`,ji.Unimplemented)});return j==="addListener"&&(D.remove=async()=>R()),D};return _.toString=()=>`${j.toString()}() { [capacitor code] }`,Object.defineProperty(_,"name",{value:j,writable:!1,configurable:!1}),_},k=w("addListener"),S=w("removeListener"),C=(j,R)=>{const _=k({eventName:j},R),B=async()=>{const I=await _;S({eventName:j,callbackId:I},R)},D=new Promise(I=>_.then(()=>I({remove:B})));return D.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await B()},D},N=new Proxy({},{get(j,R){switch(R){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return p?C:k;case"removeListener":return S;default:return w(R)}}});return r[m]=N,u.set(m,{name:m,proxy:N,platforms:new Set([...Object.keys(h),...p?[v]:[]])}),N};return n.convertFileSrc||(n.convertFileSrc=m=>m),n.getPlatform=s,n.handleError=c,n.isNativePlatform=o,n.isPluginAvailable=a,n.registerPlugin=f,n.Exception=Sd,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},BT=e=>e.Capacitor=FT(e),jn=BT(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Is=jn.registerPlugin;class Om{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(n);const o=this.windowListeners[t];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(t);const a=async()=>this.removeListener(t,n);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,r){const s=this.listeners[t];if(!s){if(r){let o=this.retainedEventArguments[t];o||(o=[]),o.push(n),this.retainedEventArguments[t]=o}return}s.forEach(o=>o(n))}hasListeners(t){var n;return!!(!((n=this.listeners[t])===null||n===void 0)&&n.length)}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(t="not implemented"){return new jn.Exception(t,ji.Unimplemented)}unavailable(t="not available"){return new jn.Exception(t,ji.Unavailable)}async removeListener(t,n){const r=this.listeners[t];if(!r)return;const s=r.indexOf(n);this.listeners[t].splice(s,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(r=>{this.notifyListeners(t,r)}))}}const Ug=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Wg=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class zT extends Om{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[s,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=Wg(s).trim(),o=Wg(o).trim(),n[s]=o}),n}async setCookie(t){try{const n=Ug(t.key),r=Ug(t.value),s=`; expires=${(t.expires||"").replace("expires=","")}`,o=(t.path||"/").replace("path=",""),a=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${o}; ${a};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}Is("CapacitorCookies",{web:()=>new zT});const VT=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;t(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(e)}),qT=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(s=>s.toLocaleLowerCase()).reduce((s,o,a)=>(s[o]=e[t[a]],s),{})},UT=(e,t=!0)=>e?Object.entries(e).reduce((r,s)=>{const[o,a]=s;let l,c;return Array.isArray(a)?(c="",a.forEach(u=>{l=t?encodeURIComponent(u):u,c+=`${o}=${l}&`}),c.slice(0,-1)):(l=t?encodeURIComponent(a):a,c=`${o}=${l}`),`${r}&${c}`},"").substr(1):null,WT=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),s=qT(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(s.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[a,l]of Object.entries(e.data||{}))o.set(a,l);n.body=o.toString()}else if(s.includes("multipart/form-data")||e.data instanceof FormData){const o=new FormData;if(e.data instanceof FormData)e.data.forEach((l,c)=>{o.append(c,l)});else for(const l of Object.keys(e.data))o.append(l,e.data[l]);n.body=o;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(s.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class HT extends Om{async request(t){const n=WT(t,t.webFetchExtra),r=UT(t.params,t.shouldEncodeUrlParams),s=r?`${t.url}?${r}`:t.url,o=await fetch(s,n),a=o.headers.get("content-type")||"";let{responseType:l="text"}=o.ok?t:{};a.includes("application/json")&&(l="json");let c,u;switch(l){case"arraybuffer":case"blob":u=await o.blob(),c=await VT(u);break;case"json":c=await o.json();break;case"document":case"text":default:c=await o.text()}const f={};return o.headers.forEach((m,h)=>{f[h]=m}),{data:c,headers:f,status:o.status,url:o.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}Is("CapacitorHttp",{web:()=>new HT});var Hg;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(Hg||(Hg={}));var Gg;(function(e){e.StatusBar="StatusBar",e.NavigationBar="NavigationBar"})(Gg||(Gg={}));class GT extends Om{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}Is("SystemBars",{web:()=>new GT});const KT="modulepreload",QT=function(e){return"/"+e},Kg={},Xr=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=QT(c),c in Kg)return;Kg[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":KT,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((h,y)=>{m.addEventListener("load",h),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},At=Is("SpeechRecognition",{web:()=>Xr(()=>import("./web-D99mRjAd.js"),[]).then(e=>new e.SpeechRecognitionWeb)}),Xw=Object.freeze(Object.defineProperty({__proto__:null,SpeechRecognition:At},Symbol.toStringTag,{value:"Module"})),Zw=Is("SpeechSynthesis",{web:()=>Xr(()=>import("./web-44nvrgF3.js"),[]).then(e=>new e.SpeechSynthesisWeb)});let kd=null;async function Jw(){if(jn.isNativePlatform())try{kd||(kd=await Xr(()=>Promise.resolve().then(()=>cS),void 0));const{Haptics:e,ImpactStyle:t}=kd;await e.impact({style:t.Light})}catch{}}class YT{constructor(){this.sessions=new Map,this.isSpeaking=!1,this.micState="LISTENING",this.pendingRestarts=[],this.settlingTimeout=null,this.resumeDelayMs=350}register(t){this.sessions.set(t.id,t),console.log(`[VoiceController] Registered session: ${t.id}`)}unregister(t){this.sessions.delete(t),console.log(`[VoiceController] Unregistered session: ${t}`)}clearPendingForSession(t){const n=this.pendingRestarts.length;this.pendingRestarts=this.pendingRestarts.filter(r=>r!==t),n!==this.pendingRestarts.length&&console.log(`[VoiceController] Cleared pending restart for: ${t}`)}setActive(t,n){const r=this.sessions.get(t);r&&(r.shouldBeActive=n)}onTTSStart(){this.settlingTimeout&&(clearTimeout(this.settlingTimeout),this.settlingTimeout=null),this.isSpeaking=!0,this.micState="SPEAKING",console.log("[VoiceController] TTS starting, state -> SPEAKING, pausing all voice sessions"),Array.from(this.sessions.values()).forEach(t=>{t.shouldBeActive&&t.pause()})}onTTSEnd(){this.isSpeaking=!1,this.micState="SETTLING";const t=this.sessions.size,n=Array.from(this.sessions.keys()).join(", ");console.log(`[VoiceController] TTS ended, state -> SETTLING, waiting ${this.resumeDelayMs}ms, sessions: [${n}] (${t})`),this.settlingTimeout=setTimeout(()=>{if(this.isSpeaking)console.log("[VoiceController] Skipping resume - TTS started again during settling");else{this.micState="LISTENING",console.log("[VoiceController] Settling complete, state -> LISTENING"),Array.from(this.sessions.entries()).forEach(([a,l])=>{console.log(`[VoiceController] Session '${a}' shouldBeActive=${l.shouldBeActive}`)});const r=new Set,s=this.pendingRestarts.length>0;s&&(console.log(`[VoiceController] Processing ${this.pendingRestarts.length} pending restarts: ${this.pendingRestarts.join(", ")}`),this.playMicLiveClick(),this.pendingRestarts.forEach(a=>{const l=this.sessions.get(a);l&&l.shouldBeActive?(console.log(`[VoiceController] Executing pending restart for: ${a}`),l.resume(),r.add(a)):console.log(`[VoiceController] Skipping pending restart for '${a}' - session=${!!l}, shouldBeActive=${l==null?void 0:l.shouldBeActive}`)}),this.pendingRestarts=[]);const o=Array.from(this.sessions.values()).filter(a=>a.shouldBeActive&&!r.has(a.id));console.log(`[VoiceController] Sessions to resume: ${o.length}`),o.length>0?(s||this.playMicLiveClick(),o.forEach(a=>{console.log(`[VoiceController] Resuming session: ${a.id}`),a.resume()})):console.log("[VoiceController] No sessions to resume")}},this.resumeDelayMs)}queueRestart(t){if(this.micState==="LISTENING"){const n=this.sessions.get(t);n&&n.shouldBeActive&&(console.log(`[VoiceController] Instant restart for session: ${t}`),this.playMicLiveClick(),n.resume())}else this.pendingRestarts.includes(t)||(this.pendingRestarts.push(t),console.log(`[VoiceController] Queued restart for session: ${t} (state: ${this.micState})`))}getMicState(){return this.micState}canStartMic(){return this.micState==="LISTENING"}async playMicLiveClick(){try{if(jn.isNativePlatform()){const{Haptics:t,ImpactStyle:n}=await Xr(async()=>{const{Haptics:r,ImpactStyle:s}=await Promise.resolve().then(()=>cS);return{Haptics:r,ImpactStyle:s}},void 0);await t.impact({style:n.Light})}console.log("[VoiceController] Mic live click")}catch{}}getIsSpeaking(){return this.isSpeaking}}const $r=new YT,ya=class ya{constructor(){this.protectedSessionId=null,this.disposableSessionId=null,this.isPurging=!1}register(t){ya.PROTECTED_SESSIONS.includes(t)?(this.protectedSessionId==="game"&&t==="reconstruction"&&console.log("[VoiceRegistry] HANDOVER: game  reconstruction (mic stays warm)"),this.protectedSessionId=t,console.log(`[VoiceRegistry] Protected lane: ${t}`)):(this.disposableSessionId=t,console.log(`[VoiceRegistry] Disposable lane: ${t}`))}unregister(t){const n=ya.PROTECTED_SESSIONS.includes(t);n&&this.protectedSessionId===t?(this.protectedSessionId=null,console.log(`[VoiceRegistry] Unregistered protected: ${t}`)):!n&&this.disposableSessionId===t&&(this.disposableSessionId=null,console.log(`[VoiceRegistry] Unregistered disposable: ${t}`))}async purge(){if(this.isPurging){console.log("[VoiceRegistry] Already purging, skipping");return}this.isPurging=!0;const t=!!this.protectedSessionId;console.log(`[VoiceRegistry] PURGE: Killing disposable lane${t?" (game protected)":""}`);try{Ln.stop()}catch(n){console.log("[VoiceRegistry] trainingVoice.stop error:",n)}try{He.stop()}catch(n){console.log("[VoiceRegistry] voiceMaster.stop error:",n)}if(!t)try{Et.stop()}catch(n){console.log("[VoiceRegistry] voiceRecognition.stop error:",n)}if(mn&&!t)try{await At.stop(),await At.removeAllListeners(),console.log("[VoiceRegistry] Removed native listeners")}catch(n){console.log("[VoiceRegistry] removeAllListeners error:",n)}try{He.resetMicBusy()}catch(n){console.log("[VoiceRegistry] resetMicBusy error:",n)}try{Et.resetStartedFlag()}catch(n){console.log("[VoiceRegistry] resetStartedFlag error:",n)}this.disposableSessionId=null,await new Promise(n=>setTimeout(n,500)),this.isPurging=!1,console.log("[VoiceRegistry] PURGE complete - disposable lane cleared, flags reset")}async purgeAll(){if(this.isPurging){console.log("[VoiceRegistry] Already purging, skipping");return}this.isPurging=!0,console.log("[VoiceRegistry] NUCLEAR PURGE: Killing ALL sessions");try{Et.stop()}catch{}try{Ln.stop()}catch{}try{He.stop()}catch{}if(mn)try{await At.stop(),await At.removeAllListeners()}catch{}try{He.resetMicBusy()}catch{}try{Et.resetStartedFlag()}catch{}this.protectedSessionId=null,this.disposableSessionId=null,await new Promise(t=>setTimeout(t,500)),this.isPurging=!1,console.log("[VoiceRegistry] NUCLEAR PURGE complete")}clearProtectedLane(){this.protectedSessionId&&(console.log(`[VoiceRegistry] Clearing protected lane: ${this.protectedSessionId}`),this.protectedSessionId=null)}getProtectedSession(){return this.protectedSessionId}getDisposableSession(){return this.disposableSessionId}getActiveSession(){return this.protectedSessionId||this.disposableSessionId}};ya.PROTECTED_SESSIONS=["game","reconstruction"];let Gf=ya;const Kn=new Gf,Qg={K:"King",Q:"Queen",R:"Rook",B:"Bishop",N:"Knight",P:"Pawn",k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"},gs={king:"K",queen:"Q",rook:"R",bishop:"B",bish:"B",bishup:"B",bishep:"B",bashop:"B",knight:"N",night:"N",horse:"N",pawn:"",castle:"R"},XT=["um","uh","the","a","an","like","so","well","just","actually","basically"];function ZT(e){return e.toLowerCase().split(/\s+/).filter(r=>!XT.includes(r)).join(" ")}const ui={a:"a",alpha:"a",able:"a",apple:"a",ay:"a",b:"b",bravo:"b",boy:"b",baker:"b",bee:"b",c:"c",charlie:"c",cat:"c",see:"c",sea:"c",d:"d",delta:"d",dog:"d",dee:"d",e:"e",echo:"e",easy:"e",edward:"e",f:"f",foxtrot:"f",fox:"f",frank:"f",eff:"f",g:"g",golf:"g",george:"g",gee:"g",h:"h",hotel:"h",henry:"h",aitch:"h"},Ic={1:"1",one:"1",won:"1",first:"1",2:"2",two:"2",to:"2",too:"2",second:"2",3:"3",three:"3",free:"3",third:"3",4:"4",four:"4",for:"4",forth:"4",fourth:"4",5:"5",five:"5",fifth:"5",6:"6",six:"6",sixth:"6",sicks:"6",7:"7",seven:"7",seventh:"7",8:"8",eight:"8",ate:"8",eighth:"8"};function Tl(e,t=!1,n=!1,r=!1){if(!e)return"";if(e==="O-O"||e==="0-0")return r?"Castles kingside, checkmate!":n?"Castles kingside, check":"Castles kingside";if(e==="O-O-O"||e==="0-0-0")return r?"Castles queenside, checkmate!":n?"Castles queenside, check":"Castles queenside";let s="",o=e.replace(/[+#=].*$/,"");const a=o.match(/^([KQRBN])/);a?(s=Qg[a[1]]+" ",o=o.substring(1)):s="";const l=o.includes("x");o=o.replace("x","");const c=o.match(/([a-h])([1-8])/g);if(c&&c.length>0){const u=c[c.length-1],f=u[0],m=u[1];if(l||t){if(c.length>1||!a){const h=o[0];h&&h.match(/[a-h]/)&&(s+=h+" ")}s+="takes "+f+m}else s+=f+m}if(e.includes("=")){const u=e.match(/=([QRBN])/);u&&(s+=", promotes to "+Qg[u[1]])}return r||e.includes("#")?s+=", checkmate!":(n||e.includes("+"))&&(s+=", check"),s.trim()}let ss=[],Zi=!1,qs=null,Nd=!1;const mn=jn.isNativePlatform();async function $m(){if(!mn){try{if(navigator.permissions){const e=await navigator.permissions.query({name:"microphone"});return e.state==="granted"?"granted":e.state==="denied"?"denied":"prompt"}}catch{}return"prompt"}try{return(await At.checkPermissions()).speechRecognition}catch(e){return console.error("[Voice] Error checking permissions:",e),"unknown"}}async function e1(){if(!mn)try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(t=>t.stop()),!0}catch{return console.warn("[Voice] Web microphone permission denied"),!1}try{const e=await At.checkPermissions();return e.speechRecognition==="granted"?!0:e.speechRecognition==="denied"||e.speechRecognition==="prompt"?(await At.requestPermissions()).speechRecognition==="granted":(e.speechRecognition==="prompt-with-rationale",!1)}catch(e){return console.error("[Voice] Permission handling error:",e),!1}}async function JT(){const e=await e1(),t=await $m();return{granted:e,status:t}}function eP(){return mn?Promise.resolve([]):Zi&&ss.length>0?Promise.resolve(ss):qs||(qs=new Promise(e=>{const t=window.speechSynthesis.getVoices();if(t.length>0){ss=t,Zi=!0,qs=null,e(t);return}const n=()=>{ss=window.speechSynthesis.getVoices(),Zi=!0,qs=null,window.speechSynthesis.removeEventListener("voiceschanged",n),e(ss)};window.speechSynthesis.addEventListener("voiceschanged",n),setTimeout(()=>{Zi||(ss=window.speechSynthesis.getVoices(),Zi=ss.length>0,qs=null,window.speechSynthesis.removeEventListener("voiceschanged",n),e(ss))},1e3)}),qs)}let Kf=null;function tP(){Kf&&Kf.abort()}async function nP(){if(!mn)return;const e=3e4,t=200,n=Date.now();for(;Date.now()-n<e;){try{if(!(await Zw.isSpeaking()).isSpeaking)return}catch{return}await new Promise(r=>setTimeout(r,t))}}const rP={a:"Ay",b:"Bee",c:"See",d:"Dee",e:"e",f:"f",g:"Gee",h:"h"},sP={N:"Knight",B:"Bishop",R:"Rook",Q:"Queen",K:"King"},oP=new Set(["correct","wrong","next","say","the","move","look","okay","continue","seconds","remaining","are","you","sure","want","resign","yes","no","can","play","legal","moves","for","material","is","equal","white","black","up","point","points","at","highlighted","squares","on","board"]);function iP(e){const t=e.toLowerCase().replace(/[^a-z\s]/g,"").split(/\s+/).filter(o=>o.length>0);if(t.length>0&&t.every(o=>oP.has(o))||!/[a-h]\s*[1-8]|[NBRQK][a-h]|O-O/.test(e))return e;let s=e.replace(/O-O-O/gi,"queenside castle").replace(/O-O/gi,"kingside castle").replace(/x/g," takes ").replace(/\+/g," check").replace(/#/g," checkmate");for(const[o,a]of Object.entries(sP))s=s.replace(new RegExp(`\\b${o}([a-h])([1-8])`,"g"),`${a} $1$2`),s=s.replace(new RegExp(`\\b${o}\\s*takes\\s*([a-h])([1-8])`,"gi"),`${a} takes $1$2`),s=s.replace(new RegExp(`\\b${o}([a-h1-8])([a-h])([1-8])`,"g"),`${a} $1$2$3`);for(const[o,a]of Object.entries(rP))s=s.replace(new RegExp(`\\b${o}\\s*([1-8])`,"gi"),`${a} $1`);return s=s.replace(/\ba\s+([1-8])\b/gi,"Ay $1"),s=s.replace(/\s+/g," ").trim(),s}async function vt(e,t=.9){$r.onTTSStart(),Nd=!0,tP(),console.log("[Voice] Mic muted: Bot is speaking");const n=iP(e);try{if(mn)await Zw.speak({text:n,language:"en-US",rate:t,pitch:1,volume:1}),await nP();else{if(console.log("[Voice] speechSynthesis in window:","speechSynthesis"in window),console.log("[Voice] window.speechSynthesis:",typeof window.speechSynthesis),!("speechSynthesis"in window)||!window.speechSynthesis){console.warn("Speech synthesis not supported");return}try{window.speechSynthesis.cancel()}catch(s){console.warn("[Voice] Failed to cancel previous speech:",s)}await new Promise(s=>setTimeout(s,50));const r=await eP();console.log("[Voice] Loaded voices:",r.length),await new Promise(s=>{const o=new SpeechSynthesisUtterance(n);o.rate=t,o.pitch=1,o.volume=1;const a=r.find(l=>l.lang.startsWith("en-"));a?(o.voice=a,o.lang=a.lang):o.lang="en-US",o.onend=()=>{console.log("[Voice] Speech ended successfully"),s()},o.onerror=l=>{console.error("[Voice] Speech error:",l),s()},console.log("[Voice] Speaking:",n),window.speechSynthesis.speak(o)})}}finally{Nd=!1,$r.onTTSEnd(),setTimeout(()=>{Nd||console.log("[Voice] Mic active: Listening for your move")},100)}}function t1(e){let t=e;return t=t.replace(/\brookie\b/gi,"rook e"),t=t.replace(/\brookies\b/gi,"rook e"),t=t.replace(/\brook\s+he\b/gi,"rook e"),t=t.replace(/\brock\s+([a-h])\b/gi,"rook $1"),t}function Yg(e,t){const n=ZT(e),r=t1(n.toLowerCase().trim()),s=r.replace(/\s+/g,"").match(/^([a-h])([1-8])$/);if(s){const p=s[1]+s[2],b=t.find(x=>!/^[KQRBN]/i.test(x)&&x.includes(p));if(b)return b}if(r.includes("castle")||r.includes("castles"))if(r.includes("queen")||r.includes("long")){if(t.includes("O-O-O"))return"O-O-O"}else if(r.includes("king")||r.includes("short")){if(t.includes("O-O"))return"O-O"}else{if(t.includes("O-O"))return"O-O";if(t.includes("O-O-O"))return"O-O-O"}let o="",a="",l="",c="",u="",f=!1,m="";const h=r.split(/\s+/);for(const p of h){const b=p.toLowerCase();gs[b]!==void 0&&(o=gs[b]),(b==="takes"||b==="captures"||b==="x")&&(f=!0),!(b==="promotes"||b==="promotion")&&(ui[b]&&(a?c||(c=a,a=ui[b]):a=ui[b]),Ic[b]&&(l&&!u&&(u=l),l=Ic[b]),["queen","rook","bishop","knight"].includes(b)&&(r.includes("promote")||r.includes("equals"))&&(m=gs[b]||"Q"))}for(const p of h){const b=p.match(/^([a-h])([1-8])$/i);b&&(a&&!c&&(c=a),l&&!u&&(u=l),a=b[1].toLowerCase(),l=b[2])}if(!m&&(l==="1"||l==="8")){const p=h[h.length-1].toLowerCase();["queen","rook","bishop","knight"].includes(p)&&(m=gs[p]||"Q")}if(!a||!l)return null;const y=a+l,v=t.filter(p=>{const b=p.replace(/[+#]/g,"");if(!b.includes(y))return!1;if(o){if(!b.startsWith(o))return!1}else if(b.match(/^[KQRBN]/))return!1;if(c){const x=b.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(x&&x[1]&&x[1]!==c)return!1}if(u){const x=b.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(x&&x[2]&&x[2]!==u)return!1}return!0});if(v.length===1){let p=v[0];return m&&p.includes("=")&&(p=p.replace(/=[QRBN]/,"="+m)),p}if(v.length>1){const p=v.filter(x=>x.includes("x")),b=v.filter(x=>!x.includes("x"));return f&&p.length===1?p[0]:!f&&b.length===1?b[0]:v[0]}return null}function aP(e,t){const n=t1(e.toLowerCase().trim());if(n.includes("castle")||n.includes("castles"))if(n.includes("queen")||n.includes("long")){if(t.includes("O-O-O"))return{move:"O-O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""}}else if(n.includes("king")||n.includes("short")){if(t.includes("O-O"))return{move:"O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""}}else{if(t.includes("O-O"))return{move:"O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""};if(t.includes("O-O-O"))return{move:"O-O-O",isAmbiguous:!1,candidates:[],piece:"",targetSquare:""}}let r="",s="",o="",a="",l="",c=!1,u="";const f=n.split(/\s+/);for(const y of f){const v=y.toLowerCase();gs[v]!==void 0&&(r=gs[v]),(v==="takes"||v==="captures"||v==="x")&&(c=!0),!(v==="promotes"||v==="promotion")&&(ui[v]&&(s?a||(a=s,s=ui[v]):s=ui[v]),Ic[v]&&(o&&!l&&(l=o),o=Ic[v]),["queen","rook","bishop","knight"].includes(v)&&(n.includes("promote")||n.includes("equals"))&&(u=gs[v]||"Q"))}for(const y of f){const v=y.match(/^([a-h])([1-8])$/i);v&&(s&&!a&&(a=s),o&&!l&&(l=o),s=v[1].toLowerCase(),o=v[2])}if(!u&&(o==="1"||o==="8")){const y=f[f.length-1].toLowerCase();["queen","rook","bishop","knight"].includes(y)&&(u=gs[y]||"Q")}if(!s||!o)return{move:null,isAmbiguous:!1,candidates:[],piece:"",targetSquare:""};const m=s+o,h=t.filter(y=>{const v=y.replace(/[+#]/g,"");if(!v.includes(m))return!1;if(r){if(!v.startsWith(r))return!1}else if(v.match(/^[KQRBN]/))return!1;if(a){const p=v.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(p&&p[1]&&p[1]!==a)return!1}if(l){const p=v.match(/^[KQRBN]?([a-h])?([1-8])?x?[a-h][1-8]/);if(p&&p[2]&&p[2]!==l)return!1}return!0});if(h.length===1){let y=h[0];return u&&y.includes("=")&&(y=y.replace(/=[QRBN]/,"="+u)),{move:y,isAmbiguous:!1,candidates:[],piece:r,targetSquare:m}}if(h.length>1){const y=h.filter(p=>p.includes("x")),v=h.filter(p=>!p.includes("x"));return c&&y.length===1?{move:y[0],isAmbiguous:!1,candidates:[],piece:r,targetSquare:m}:!c&&v.length===1?{move:v[0],isAmbiguous:!1,candidates:[],piece:r,targetSquare:m}:{move:null,isAmbiguous:!0,candidates:h,piece:r,targetSquare:m}}return{move:null,isAmbiguous:!1,candidates:[],piece:r,targetSquare:m}}const Cd={one:"1",won:"1",want:"1",two:"2",too:"2",to:"2",three:"3",tree:"3",free:"3",four:"4",for:"4",fore:"4",five:"5",fife:"5",six:"6",sick:"6",sicks:"6",seven:"7",eight:"8",ate:"8",ait:"8",a:"a",alpha:"a",ay:"a",b:"b",bee:"b",be:"b",bravo:"b",c:"c",see:"c",sea:"c",charlie:"c",d:"d",dee:"d",delta:"d",the:"d",tea:"d",e:"e",echo:"e",ee:"e",f:"f",if:"f",eff:"f",foxtrot:"f",off:"f",g:"g",gee:"g",golf:"g",h:"h",aitch:"h",hotel:"h"};function lP(e){const t=e.toLowerCase().trim(),n=t.split(/\s+/);let r=null,s=null;for(const o of n){const a=Cd[o];a?/^[a-h]$/.test(a)?r||(r=a):/^[1-8]$/.test(a)&&(s||(s=a)):o.length===1&&(/^[a-h]$/i.test(o)?r||(r=o.toLowerCase()):/^[1-8]$/.test(o)&&(s||(s=o)))}if(Cd[t]){const o=Cd[t];/^[a-h]$/.test(o)?r=o:/^[1-8]$/.test(o)&&(s=o)}return t.length===1&&(/^[a-h]$/i.test(t)?r=t.toLowerCase():/^[1-8]$/.test(t)&&(s=t)),{file:r,rank:s}}function cP(e,t){for(const n of e){const s=n.replace(/[+#]/g,"").match(/^[KQRBN]([a-h])?([1-8])?x?[a-h][1-8]/);if(s){const o=s[1]||null,a=s[2]||null;if(t.file&&t.rank){if(o===t.file&&a===t.rank)return n}else if(t.file){if(o===t.file)return n}else if(t.rank&&a===t.rank)return n}}return null}function uP(e){const t=[];for(const n of e){const s=n.replace(/[+#]/g,"").match(/^[KQRBN]([a-h])?([1-8])?x?[a-h][1-8]/);if(s){const o=s[1]||"",a=s[2]||"";(o||a)&&t.push(o+a)}}return t}class dP{constructor(){this.onResult=null,this.onListeningChange=null,this.legalMoves=[],this.isStarted=!1,this.isMuted=!1,this.unmuteTimeout=null}async pauseLoop(){console.log("[VoiceRecognition] pauseLoop"),await He.pauseLoop(),this.isMuted=!0}resumeLoop(){console.log("[VoiceRecognition] resumeLoop"),this.isMuted=!1,He.resumeLoop()}setMute(t,n=400){this.unmuteTimeout&&(clearTimeout(this.unmuteTimeout),this.unmuteTimeout=null),t?(this.isMuted=!0,console.log("[VoiceRecognition] Software MUTE: transcripts will be ignored")):this.unmuteTimeout=setTimeout(()=>{this.isMuted=!1,this.unmuteTimeout=null,console.log("[VoiceRecognition] Software UNMUTE: mic LIVE")},n)}getMuted(){return this.isMuted}setLegalMoves(t){this.legalMoves=t,this.isStarted&&He.setLegalMoves(t)}setOnResult(t){this.onResult=t}setOnListeningChange(t){this.onListeningChange=t}async start(){if(this.isStarted){console.log("[VoiceRecognition] Already started, skipping duplicate start");return}await this.startInternal()}async startInternal(){try{const t=await He.start({mode:"move",legalMoves:this.legalMoves,onTranscript:(n,r)=>{if(this.isMuted){console.log("[VoiceRecognition] Ignored while muted:",n);return}this.onResult&&this.onResult(r||null,n)},onListeningChange:n=>{this.onListeningChange&&this.onListeningChange(n)}});this.isStarted=t,console.log("[VoiceRecognition] startInternal result:",t)}catch(t){console.log("[VoiceRecognition] startInternal failed:",t),this.isStarted=!1}}async forceRestart(){console.log("[VoiceRecognition] Force restart - bypassing guard"),await this.startInternal()}stop(){this.isStarted&&(this.isStarted=!1,He.stop())}async stopAndWait(){this.isStarted&&(this.isStarted=!1,await He.stopAndWait())}resetStartedFlag(){this.isStarted=!1}abort(){this.stop()}async reset(){await this.stopAndWait(),this.onResult=null,this.onListeningChange=null,this.legalMoves=[]}isSupported(){return!0}getIsListening(){return He.getIsListening()&&He.getMode()==="move"}async waitForInitialization(){await He.checkAvailability()}}const Et=new dP;Kf=Et;const Jo=class Jo{constructor(){this.isListening=!1,this.shouldBeListening=!1,this.config=null,this.listenerHandle=null,this.stateListenerHandle=null,this.webRecognition=null,this.restartTimeout=null,this.availabilityChecked=!1,this.isAvailable=!1,this.lastErrorTime=0,this.consecutiveFailures=0,this.micBusy=!1,this.onMicBusyChange=null,this.onRetryNeeded=null,this.sessionId="master",this.isRegistered=!1,this.isPaused=!1,this.captureDebounceTimeout=null,this.pendingCaptureTranscript="",this.shouldRestart=!0,this.restartPromise=null,this.isMuted=!1,this.muteTimeout=null}async checkAvailability(){if(this.availabilityChecked)return this.isAvailable;if(mn)try{const{available:t}=await At.available();if(!t)return console.log("[VoiceMaster] Speech recognition not available"),this.isAvailable=!1,this.availabilityChecked=!0,!1;const{speechRecognition:n}=await At.checkPermissions();return n!=="granted"&&(await At.requestPermissions()).speechRecognition!=="granted"?(console.log("[VoiceMaster] Permission denied"),this.isAvailable=!1,this.availabilityChecked=!0,!1):(this.isAvailable=!0,this.availabilityChecked=!0,!0)}catch(t){return console.error("[VoiceMaster] Error checking availability:",t),this.isAvailable=!1,this.availabilityChecked=!0,!1}else{const t=typeof window<"u"?window.SpeechRecognition||window.webkitSpeechRecognition:null;return this.isAvailable=!!t,this.availabilityChecked=!0,this.isAvailable}}setOnMicBusyChange(t){this.onMicBusyChange=t}setOnRetryNeeded(t){this.onRetryNeeded=t}isMicBusy(){return this.micBusy}resetMicBusy(){this.micBusy=!1,this.consecutiveFailures=0,this.lastErrorTime=0,this.onMicBusyChange&&this.onMicBusyChange(!1)}mute(t=400){this.isMuted=!0,this.muteTimeout&&clearTimeout(this.muteTimeout),this.muteTimeout=setTimeout(()=>{this.isMuted=!1,this.muteTimeout=null,console.log("[VoiceMaster] Mute window ended, listening again")},t),console.log(`[VoiceMaster] Mute window started: ${t}ms`)}setMute(t,n=400){this.muteTimeout&&(clearTimeout(this.muteTimeout),this.muteTimeout=null),t?(this.isMuted=!0,console.log("[VoiceMaster] Software MUTE: transcripts will be ignored")):this.muteTimeout=setTimeout(()=>{this.isMuted=!1,this.muteTimeout=null,console.log("[VoiceMaster] Software UNMUTE: mic LIVE")},n)}getIsMuted(){return this.isMuted}triggerRestart(){if(this.restartPromise){console.log("[VoiceMaster] Restart already in progress, skipping duplicate.");return}this.restartPromise=(async()=>{try{console.log("[VoiceMaster] Serialized restart sequence initiating...");try{await At.stop(),console.log("[VoiceMaster] triggerRestart: hardware stopped")}catch(t){console.log("[VoiceMaster] triggerRestart stop error (expected):",t)}if(await new Promise(t=>setTimeout(t,50)),this.shouldRestart&&!this.micBusy){console.log("[VoiceMaster] triggerRestart: starting fresh session");try{await this.startNative()}catch(t){console.warn("[VoiceMaster] triggerRestart start failed, scheduling retry:",t),setTimeout(()=>{this.shouldRestart&&!this.micBusy&&!this.restartPromise&&this.triggerRestart()},200)}}else console.log("[VoiceMaster] triggerRestart: shouldRestart=false or micBusy, skipping start")}catch(t){console.warn("[VoiceMaster] Restart sequence failed:",t),setTimeout(()=>{this.shouldRestart&&!this.micBusy&&!this.restartPromise&&this.triggerRestart()},200)}finally{this.restartPromise=null}})()}async pauseLoop(){if(console.log("[VoiceMaster] Pausing Loop for TTS"),this.shouldRestart=!1,mn)try{await At.stop(),console.log("[VoiceMaster] pauseLoop: hardware stopped")}catch(t){console.log("[VoiceMaster] pauseLoop stop error:",t)}}resumeLoop(){if(console.log("[VoiceMaster] Resuming Loop after TTS"),this.shouldRestart=!0,!this.config){console.log("[VoiceMaster] resumeLoop: no config, skipping");return}this.triggerRestart()}getShouldRestartLoop(){return this.shouldRestart}async start(t){return this.micBusy=!1,this.isListening=!1,this.consecutiveFailures=0,this.isPaused=!1,this.shouldRestart=!0,this.isMuted=!1,console.log("[VoiceMaster] Atomic reset: state cleared for fresh start, loop enabled"),(this.listenerHandle||this.webRecognition||this.shouldBeListening)&&(console.log("[VoiceMaster] Clean handoff: stopping previous session"),await this.stop(),await new Promise(r=>setTimeout(r,100))),this.config=t,await this.checkAvailability()?(this.isRegistered||($r.register({id:this.sessionId,pause:()=>this.pauseInternal(),resume:()=>this.resumeInternal(),shouldBeActive:!0}),this.isRegistered=!0),$r.setActive(this.sessionId,!0),Kn.register(this.sessionId),this.shouldBeListening=!0,console.log(`[VoiceMaster] Starting in '${t.mode}' mode`),$r.canStartMic()?mn?this.startNative():this.startWeb():(console.log("[VoiceMaster] TTS active or settling, queueing start for after TTS"),$r.queueRestart(this.sessionId),t.onListeningChange&&t.onListeningChange(!0),!0)):(console.log("[VoiceMaster] Not available, cannot start"),!1)}setLegalMoves(t){this.config&&(this.config.legalMoves=t)}processTranscript(t){if(!this.config||!this.shouldBeListening)return;if(this.isMuted){console.log("[VoiceMaster] Ignoring transcript during mute window:",t);return}const n=this.config.mode;switch(console.log(`[VoiceMaster] Processing in '${n}' mode:`,t),n){case"raw":this.config.onTranscript(t);break;case"move":this.processMoveMode(t);break;case"placement":this.processPlacementMode(t);break}}processMoveMode(t){if(!this.config)return;const n=t.toLowerCase(),r=n.includes("takes")||n.includes("captures"),s=/\b(knight|bishop|rook|queen|king|horse|castle)\b/.test(n),o=/[a-h]\s*[1-8]/.test(n);if((s||r)&&!o){console.log("[VoiceMaster] Piece/capture detected, waiting for target square..."),this.pendingCaptureTranscript=t,this.captureDebounceTimeout&&clearTimeout(this.captureDebounceTimeout),this.captureDebounceTimeout=setTimeout(()=>{var c,u;console.log("[VoiceMaster] Debounce timeout, processing:",this.pendingCaptureTranscript);const l=Yg(this.pendingCaptureTranscript,((c=this.config)==null?void 0:c.legalMoves)||[]);(u=this.config)==null||u.onTranscript(this.pendingCaptureTranscript,l),this.pendingCaptureTranscript=""},Jo.CAPTURE_DEBOUNCE_MS);return}this.pendingCaptureTranscript&&o&&(this.captureDebounceTimeout&&(clearTimeout(this.captureDebounceTimeout),this.captureDebounceTimeout=null),this.pendingCaptureTranscript="");const a=Yg(t,this.config.legalMoves||[]);this.config.onTranscript(t,a)}processPlacementMode(t){this.config&&this.config.onTranscript(t)}pauseInternal(){var t;if(console.log(`[VoiceMaster] pauseInternal called - isListening=${this.isListening}, shouldBeListening=${this.shouldBeListening}`),!this.isListening){console.log("[VoiceMaster] Not pausing - already not listening");return}if(this.isPaused=!0,console.log("[VoiceMaster] Pausing for TTS"),mn)At.stop().then(()=>console.log("[VoiceMaster] Native stop succeeded during pause")).catch(n=>console.log("[VoiceMaster] Pause stop error:",n));else if(this.webRecognition)try{this.webRecognition.stop()}catch(n){console.log("[VoiceMaster] Web pause error:",n)}this.isListening=!1,(t=this.config)!=null&&t.onListeningChange&&this.config.onListeningChange(!1),console.log("[VoiceMaster] pauseInternal complete - isListening now false")}async resumeInternal(){if(console.log(`[VoiceMaster] resumeInternal called - shouldBeListening=${this.shouldBeListening}, isListening=${this.isListening}, isPaused=${this.isPaused}`),!this.shouldBeListening){console.log("[VoiceMaster] Not resuming - shouldBeListening is false");return}if(this.isListening){console.log("[VoiceMaster] Already listening, skipping resume");return}if(this.isPaused=!1,console.log("[VoiceMaster] Resuming after TTS"),mn){const t=await this.startNative();console.log(`[VoiceMaster] Resume startNative result: ${t}`)}else this.startWeb()}async startNative(){var n;if(this.micBusy)return console.log("[VoiceMaster] Mic is busy, not starting"),!1;const t=Date.now()-this.lastErrorTime;if(t<3e3&&this.lastErrorTime>0)return console.log(`[VoiceMaster] Lockout: ${3e3-t}ms remaining, queueing restart`),this.restartTimeout||this.scheduleRestart(),!0;try{return this.listenerHandle&&(await this.listenerHandle.remove(),this.listenerHandle=null),this.listenerHandle=await At.addListener("partialResults",r=>{if(!this.shouldRestart){console.log("[VoiceMaster] Loop paused, ignoring partial result");return}if(r.matches&&r.matches.length>0&&this.shouldBeListening){const s=r.matches[0];this.consecutiveFailures=0,this.processTranscript(s),this.shouldRestart&&this.triggerRestart()}}),this.stateListenerHandle&&(await this.stateListenerHandle.remove(),this.stateListenerHandle=null),this.stateListenerHandle=await At.addListener("listeningState",r=>{var s,o;console.log("[VoiceMaster] State changed:",r.status,"shouldRestart:",this.shouldRestart,"isListening:",this.isListening),r.status==="stopped"?(this.isListening=!1,(s=this.config)!=null&&s.onListeningChange&&this.config.onListeningChange(!1),this.shouldBeListening&&this.shouldRestart&&!this.micBusy&&(console.log("[VoiceMaster] Restart via listeningState handler"),this.triggerRestart())):r.status==="started"&&(this.isListening=!0,(o=this.config)!=null&&o.onListeningChange&&this.config.onListeningChange(!0))}),console.log("[VoiceMaster] Calling CapacitorSpeechRecognition.start()..."),await At.start({language:"en-US",partialResults:!0,popup:!1}),this.isListening=!0,this.consecutiveFailures=0,console.log("[VoiceMaster] Started native - isListening=true, shouldBeListening="+this.shouldBeListening),(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!0),await Jw(),!0}catch(r){return console.error("[VoiceMaster] Failed to start native:",r),this.lastErrorTime=Date.now(),this.consecutiveFailures++,this.consecutiveFailures>=Jo.MAX_CONSECUTIVE_FAILURES?(console.log("[VoiceMaster] Too many failures, mic is busy"),this.micBusy=!0,this.isListening=!1,this.onMicBusyChange&&this.onMicBusyChange(!0),this.onRetryNeeded&&this.onRetryNeeded(),!1):(this.shouldBeListening&&this.scheduleRestart(),!1)}}startWeb(){try{const t=window.SpeechRecognition||window.webkitSpeechRecognition;return t?(this.webRecognition=new t,this.webRecognition.continuous=!0,this.webRecognition.interimResults=!1,this.webRecognition.lang="en-US",this.webRecognition.onresult=n=>{const r=n.results[n.results.length-1];if(r.isFinal&&this.shouldBeListening){const s=r[0].transcript;this.processTranscript(s)}},this.webRecognition.onerror=n=>{console.log("[VoiceMaster] Web error:",n.error),n.error!=="aborted"&&n.error!=="not-allowed"&&this.shouldBeListening&&this.scheduleRestart()},this.webRecognition.onend=()=>{var n;this.isListening=!1,(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!1),this.shouldBeListening&&this.scheduleRestart()},this.webRecognition.onstart=()=>{var n;this.isListening=!0,(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!0)},this.webRecognition.start(),console.log("[VoiceMaster] Started web"),!0):!1}catch(t){return console.error("[VoiceMaster] Failed to start web:",t),!1}}scheduleRestart(){const t=Date.now()-this.lastErrorTime;if(t<3e3&&this.lastErrorTime>0){this.restartTimeout&&clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>{this.scheduleRestart()},3e3-t+100);return}if(this.micBusy){console.log("[VoiceMaster] Mic busy, not scheduling restart");return}this.restartTimeout&&clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(async()=>{this.shouldBeListening&&!this.micBusy&&(console.log("[VoiceMaster] Restarting after delay"),mn?await this.startNative():this.startWeb())},500)}async stop(){var t;if(console.log("[VoiceMaster] stop() called - beginning full cleanup"),this.shouldBeListening=!1,this.isPaused=!1,this.micBusy=!1,this.consecutiveFailures=0,this.lastErrorTime=0,this.captureDebounceTimeout&&(clearTimeout(this.captureDebounceTimeout),this.captureDebounceTimeout=null),this.pendingCaptureTranscript="",$r.setActive(this.sessionId,!1),$r.clearPendingForSession(this.sessionId),this.isRegistered&&($r.unregister(this.sessionId),Kn.unregister(this.sessionId),this.isRegistered=!1),this.restartTimeout&&(clearTimeout(this.restartTimeout),this.restartTimeout=null),mn)try{await At.stop(),this.listenerHandle&&(await this.listenerHandle.remove(),this.listenerHandle=null),this.stateListenerHandle&&(await this.stateListenerHandle.remove(),this.stateListenerHandle=null)}catch(n){console.log("[VoiceMaster] Stop error:",n)}else if(this.webRecognition){try{this.webRecognition.stop()}catch(n){console.log("[VoiceMaster] Web stop error:",n)}this.webRecognition=null}this.isListening=!1,(t=this.config)!=null&&t.onListeningChange&&this.config.onListeningChange(!1),this.config=null,console.log("[VoiceMaster] Stopped - all state reset, session fully cleaned")}async stopAndWait(){var n;if(this.shouldBeListening=!1,!this.listenerHandle&&!this.webRecognition){console.log("[VoiceMaster] stopAndWait: nothing to stop, fast path"),this.micBusy=!1,this.isListening=!1,this.consecutiveFailures=0,this.isPaused=!1,this.config=null;return}console.log("[VoiceMaster] stopAndWait: active session, stopping...");const t=async()=>{let r=!1;const s=this.stop().then(()=>{r=!0});if(await Promise.race([s,new Promise(o=>setTimeout(o,500))]),!r){if(console.warn("[VoiceMaster] Normal stop timed out, forcing native stop"),mn)try{await At.stop()}catch{}if(this.listenerHandle){try{await this.listenerHandle.remove()}catch{}this.listenerHandle=null}if(this.stateListenerHandle){try{await this.stateListenerHandle.remove()}catch{}this.stateListenerHandle=null}if(this.webRecognition){try{this.webRecognition.stop()}catch{}this.webRecognition=null}}};await Promise.race([t(),new Promise(r=>setTimeout(()=>{console.warn("[VoiceMaster] 800ms hard timeout - forcing cleanup"),r()},800))]),this.micBusy=!1,this.isListening=!1,this.consecutiveFailures=0,this.isPaused=!1,this.listenerHandle=null,this.stateListenerHandle=null,this.webRecognition=null,(n=this.config)!=null&&n.onListeningChange&&this.config.onListeningChange(!1),this.config=null,console.log("[VoiceMaster] stopAndWait complete - state reset")}getIsListening(){return this.isListening}getMode(){var t;return((t=this.config)==null?void 0:t.mode)||null}};Jo.CAPTURE_DEBOUNCE_MS=2e3,Jo.MAX_CONSECUTIVE_FAILURES=3;let Qf=Jo;const He=new Qf,Ln={async start(e,t){return He.start({mode:"raw",onTranscript:e,onListeningChange:t})},async stop(){return He.stop()},async stopAndWait(){return He.stopAndWait()},async checkAvailability(){return He.checkAvailability()},getIsListening(){return He.getIsListening()},setOnMicBusyChange(e){He.setOnMicBusyChange(e)},setOnRetryNeeded(e){He.setOnRetryNeeded(e)},isMicBusy(){return He.isMicBusy()},resetMicBusy(){He.resetMicBusy()},mute(e=400){He.mute(e)},setMute(e,t=400){He.setMute(e,t)},getIsMuted(){return He.getIsMuted()},async pauseLoop(){return He.pauseLoop()},resumeLoop(){He.resumeLoop()}},n1={400:{elo:400,depth:1,randomPercent:50,description:"Blind coin-flipper. Hangs pieces constantly."},600:{elo:600,depth:1,randomPercent:25,description:"Still blind to threats, but picks better squares."},800:{elo:800,depth:2,randomPercent:25,description:"Sees captures, misses 2-move tactics."},1e3:{elo:1e3,depth:3,randomPercent:15,description:"Sees forks and pins, occasionally forgets to defend."},1200:{elo:1200,depth:4,randomPercent:10,description:"Club player. Solid but misses deep tactics."},1400:{elo:1400,depth:5,randomPercent:5,description:"Few unforced blunders. Needs real strategy to beat."},1600:{elo:1600,depth:6,randomPercent:0,description:"Pure tactical vision. Sharp human equivalent."},1800:{elo:1800,depth:0,randomPercent:0,description:"Unleashed: Full node-based search."},2e3:{elo:2e3,depth:0,randomPercent:0,description:"Unleashed: Full node-based search."},2200:{elo:2200,depth:0,randomPercent:0,description:"Unleashed: Full node-based search."},2400:{elo:2400,depth:0,randomPercent:0,description:"Unleashed: Full node-based search."},2600:{elo:2600,depth:0,randomPercent:0,description:"Unleashed: Full node-based search.",nodes:15e5}},r1={elo_400:400,elo_600:600,elo_800:800,elo_1000:1e3,elo_1200:1200,elo_1400:1400,elo_1600:1600,elo_1800:1800,elo_2000:2e3,elo_2200:2200,elo_2400:2400,elo_2600:2600},fP=["elo_400","elo_600","elo_800","elo_1000","elo_1200","elo_1400","elo_1600","elo_1800","elo_2000","elo_2200","elo_2400","elo_2600"],s1=[400,600,800,1e3,1200,1400,1600,1800,2e3,2200,2400,2600],hP=fP.map(e=>{const t=r1[e],n=n1[t];return{id:e,elo:t,difficulty:e,depth:n.depth,randomPercent:n.randomPercent}});function mP(e){return hP.find(t=>t.elo===e)}const Dm=s1,pP={kingsideCornerWhite:["f1","g1","h1","f2","g2","h2"],queensideCornerWhite:["a1","b1","c1","a2","b2","c2"],kingsideCornerBlack:["f8","g8","h8","f7","g7","h7"],queensideCornerBlack:["a8","b8","c8","a7","b7","c7"],center:["d4","e4","d5","e5"],extendedCenter:["c3","d3","e3","f3","c4","f4","c5","f5","c6","d6","e6","f6"],kingside:["f1","g1","h1","f2","g2","h2","f3","g3","h3","f4","g4","h4","f5","g5","h5","f6","g6","h6","f7","g7","h7","f8","g8","h8"],queenside:["a1","b1","c1","a2","b2","c2","a3","b3","c3","a4","b4","c4","a5","b5","c5","a6","b6","c6","a7","b7","c7","a8","b8","c8"],corners:["a1","h1","a8","h8"]},o1="blindfold-chess-stats-v2",i1="blindfold-chess-settings",gP="blindfold-chess-stats",a1={moves10:{total:0,count:0},moves20:{total:0,count:0},moves30:{total:0,count:0},moves40:{total:0,count:0},moves50plus:{total:0,count:0}},l1={opening:{total:0,count:0},middlegame:{total:0,count:0},endgame:{total:0,count:0}},Fm={wins:0,draws:0,losses:0,lastGamePeekTime:0,totalPeekTime:0,gamesWithPeeks:0,bestPeekFreeStreak:0,lastGamePeekFreeStreak:0,lastGameAvgResponseTime:0,totalResponseTime:0,totalResponseMoves:0,bestClarityScore:0,lastClarityScore:0,lastVoicePurity:0,bestVoicePurity:0,tierStats:{},visualizationCeiling:0,visualizationCeilingElo:null,clarityByMoveCount:{...a1},totalPeekFreeGames:0,totalGamesPlayed:0,reconstructionVoiceInputs:0,reconstructionTouchInputs:0,gameVoiceMoves:0,gameTouchMoves:0,responseTimeByPhase:{...l1},lastGameEndgameDrift:0,voiceCorrections:0,voiceCommandsTotal:0,lastGameVoiceCorrections:0,mentalBlurCount:0,squareInquiryHeatmap:{},totalSquareInquiries:0,stockfishThresholdElo:null,longestGame:0,fastestWin:0,currentWinStreak:0,bestWinStreak:0,currentPeekFreeStreak:0,bestPeekFreeGameStreak:0,blindfoldGamesPlayed:0,assistedGamesCount:0,lastGameWasAssisted:!1},Xg={boardReconstructionEnabled:!1,botThinkingTimeEnabled:!1,keepAwakeEnabled:!0};function Zg(e){const t={...Fm,...e};return t.clarityByMoveCount={...a1,...e.clarityByMoveCount||{}},t.responseTimeByPhase={...l1,...e.responseTimeByPhase||{}},t.tierStats=e.tierStats||{},t.squareInquiryHeatmap=e.squareInquiryHeatmap||{},t}function xa(){try{const e=localStorage.getItem(o1);if(e){const n=JSON.parse(e);return Zg(n)}const t=localStorage.getItem(gP);if(t){const n=JSON.parse(t),r=Zg(n);return Bm(r),r}}catch(e){console.error("Failed to load stats:",e)}return{...Fm}}function Bm(e){try{localStorage.setItem(o1,JSON.stringify(e))}catch(t){console.error("Failed to save stats:",t)}}function Yf(){try{const e=localStorage.getItem(i1);if(e){const t=JSON.parse(e);return{...Xg,...t}}}catch(e){console.error("Failed to load settings:",e)}return{...Xg}}function Xf(e){try{localStorage.setItem(i1,JSON.stringify(e))}catch(t){console.error("Failed to save settings:",t)}}function vP(e){return e<=10?"moves10":e<=20?"moves20":e<=30?"moves30":e<=40?"moves40":"moves50plus"}function c1(e){return{opening:e.slice(0,10),middlegame:e.slice(10,30),endgame:e.slice(30)}}function xP(e){const t=c1(e);if(t.opening.length===0||t.endgame.length===0)return 0;const n=t.opening.reduce((o,a)=>o+a,0)/t.opening.length,r=t.endgame.reduce((o,a)=>o+a,0)/t.endgame.length;if(n===0)return 0;const s=(r-n)/n*100;return Math.max(0,Math.round(s))}function yP(e){if(e.length<3)return 0;const n=e.reduce((r,s)=>r+s,0)/e.length*2;return e.filter(r=>r>n).length}function wP(e){for(const t of Dm){const n=e[t];if(!n||n.totalGames<3)continue;if(n.wins/n.totalGames<.5)return t}return null}function bP(e){let t=0;for(const n of Dm){const r=e[n];r&&r.peekFreeWins>0&&n>t&&(t=n)}return{elo:t}}function SP(e,t,n=0,r=[],s,o,a){const l=xa(),c=(a==null?void 0:a.botElo)||1200,u=(a==null?void 0:a.wasPeekFree)??t===0,f=(a==null?void 0:a.totalMoves)||r.length,m=(a==null?void 0:a.voiceCorrections)||0,h=(a==null?void 0:a.voiceCommands)||0,y=(a==null?void 0:a.reconstructionVoiceInputs)||0,v=(a==null?void 0:a.reconstructionTouchInputs)||0,p=(a==null?void 0:a.gameVoiceMoves)||0,b=(a==null?void 0:a.gameTouchMoves)||0,x=(a==null?void 0:a.squareInquiries)||[],g=(a==null?void 0:a.isBlindfold)??!1,w=(a==null?void 0:a.wasAssisted)??!1;e==="win"?l.wins++:e==="loss"?l.losses++:l.draws++,l.totalGamesPlayed++,g?(l.blindfoldGamesPlayed++,l.lastGamePeekTime=t,t>0&&(l.totalPeekTime+=t,l.gamesWithPeeks++),u?(l.totalPeekFreeGames++,l.currentPeekFreeStreak++,l.currentPeekFreeStreak>l.bestPeekFreeGameStreak&&(l.bestPeekFreeGameStreak=l.currentPeekFreeStreak)):l.currentPeekFreeStreak=0,l.lastGamePeekFreeStreak=n,n>l.bestPeekFreeStreak&&(l.bestPeekFreeStreak=n)):(l.lastGamePeekTime=0,l.lastGamePeekFreeStreak=0,l.currentPeekFreeStreak=0),l.tierStats[c]||(l.tierStats[c]={wins:0,losses:0,draws:0,peekFreeWins:0,totalPeeks:0,totalGames:0});const k=l.tierStats[c];k.totalGames++,e==="win"?(k.wins++,g&&u&&k.peekFreeWins++,l.currentWinStreak++,l.currentWinStreak>l.bestWinStreak&&(l.bestWinStreak=l.currentWinStreak),(l.fastestWin===0||f<l.fastestWin)&&(l.fastestWin=f)):e==="loss"?(k.losses++,l.currentWinStreak=0):k.draws++,g&&!u&&k.totalPeeks++,f>l.longestGame&&(l.longestGame=f);const S=bP(l.tierStats);if(l.visualizationCeiling=S.elo,l.visualizationCeilingElo=S.elo||null,l.stockfishThresholdElo=wP(l.tierStats),r.length>0){const C=r.reduce((j,R)=>j+R,0)/r.length;l.lastGameAvgResponseTime=C,l.totalResponseTime+=r.reduce((j,R)=>j+R,0),l.totalResponseMoves+=r.length;const N=c1(r);N.opening.length>0&&(l.responseTimeByPhase.opening.total+=N.opening.reduce((j,R)=>j+R,0),l.responseTimeByPhase.opening.count+=N.opening.length),N.middlegame.length>0&&(l.responseTimeByPhase.middlegame.total+=N.middlegame.reduce((j,R)=>j+R,0),l.responseTimeByPhase.middlegame.count+=N.middlegame.length),N.endgame.length>0&&(l.responseTimeByPhase.endgame.total+=N.endgame.reduce((j,R)=>j+R,0),l.responseTimeByPhase.endgame.count+=N.endgame.length),l.lastGameEndgameDrift=xP(r),l.mentalBlurCount+=yP(r)}else l.lastGameAvgResponseTime=0,l.lastGameEndgameDrift=0;if(l.lastGameWasAssisted=w,w&&l.assistedGamesCount++,s!==void 0){const C=w?Math.min(s,50):s;l.lastClarityScore=C,C>l.bestClarityScore&&(l.bestClarityScore=C);const N=vP(f);l.clarityByMoveCount[N].total+=C,l.clarityByMoveCount[N].count++}if(o!==void 0&&(l.lastVoicePurity=o,o>l.bestVoicePurity&&(l.bestVoicePurity=o)),l.voiceCorrections+=m,l.voiceCommandsTotal+=h,l.lastGameVoiceCorrections=m,l.reconstructionVoiceInputs+=y,l.reconstructionTouchInputs+=v,l.gameVoiceMoves+=p,l.gameTouchMoves+=b,x.length>0){l.totalSquareInquiries+=x.length;for(const C of x){const N=C.toLowerCase();l.squareInquiryHeatmap[N]=(l.squareInquiryHeatmap[N]||0)+1}}return Bm(l),l}function kP(e){return e.totalResponseMoves===0?0:e.totalResponseTime/e.totalResponseMoves}function u1(e){const t=e.blindfoldGamesPlayed||0;return t===0?0:Math.round(e.totalPeekFreeGames/t*100)}function NP(e){const t=e.gameVoiceMoves+e.gameTouchMoves;return t===0?{voice:0,touch:0}:{voice:Math.round(e.gameVoiceMoves/t*100),touch:Math.round(e.gameTouchMoves/t*100)}}function d1(e){const t=e.responseTimeByPhase.opening,n=e.responseTimeByPhase.middlegame,r=e.responseTimeByPhase.endgame;return{opening:t.count>0?Math.round(t.total/t.count):0,middlegame:n.count>0?Math.round(n.total/n.count):0,endgame:r.count>0?Math.round(r.total/r.count):0}}function f1(e){const t=e.clarityByMoveCount;return{moves10:t.moves10.count>0?Math.round(t.moves10.total/t.moves10.count):0,moves20:t.moves20.count>0?Math.round(t.moves20.total/t.moves20.count):0,moves30:t.moves30.count>0?Math.round(t.moves30.total/t.moves30.count):0,moves40:t.moves40.count>0?Math.round(t.moves40.total/t.moves40.count):0,moves50plus:t.moves50plus.count>0?Math.round(t.moves50plus.total/t.moves50plus.count):0}}function h1(e){return e.voiceCommandsTotal===0?0:Math.round(e.voiceCorrections/e.voiceCommandsTotal*100)}function CP(e){const t={kingsideCornerWhite:0,queensideCornerWhite:0,kingsideCornerBlack:0,queensideCornerBlack:0,center:0,extendedCenter:0,kingside:0,queenside:0,corners:0};for(const[n,r]of Object.entries(e.squareInquiryHeatmap))for(const[s,o]of Object.entries(pP))o.includes(n)&&(t[s]+=r||0);return t}function m1(e,t=5){return Object.entries(e.squareInquiryHeatmap).map(([n,r])=>({square:n,count:r||0})).sort((n,r)=>r.count-n.count).slice(0,t)}function jP(e,t){if(e.totalSquareInquiries===0)return 0;const n=e.squareInquiryHeatmap[t.toLowerCase()]||0,r=Math.max(...Object.values(e.squareInquiryHeatmap).map(s=>s||0),1);return Math.round(n/r*100)}function EP(e,t){const n=e.tierStats[t];return!n||n.totalGames===0?0:Math.round(n.wins/n.totalGames*100)}function Yo(e){return e===0?"-":e<1e3?`${Math.round(e)}ms`:`${(e/1e3).toFixed(1)}s`}function TP(){Bm({...Fm})}function PP(e){const t=[],n=f1(e);n.moves20>0&&n.moves40>0&&n.moves20-n.moves40>20&&t.push({type:"warning",category:"visualization",title:"Clarity Degradation",message:`Your accuracy drops from ${n.moves20}% at 20 moves to ${n.moves40}% at 40 moves. Focus on endgame visualization training.`}),e.visualizationCeiling>0&&t.push({type:"success",category:"visualization",title:"Visualization Ceiling",message:`You've beaten a ${e.visualizationCeiling} Elo bot without peeking! Keep pushing higher.`});const r=u1(e);r>50&&t.push({type:"success",category:"visualization",title:"Peek-Free Progress",message:`${r}% of your games are peek-free. Your visualization is improving!`});const s=d1(e);if(s.endgame>0&&s.opening>0){const f=(s.endgame-s.opening)/s.opening*100;f>50&&t.push({type:"warning",category:"cognitive",title:"Endgame Drift Detected",message:`Your endgame response time is ${Math.round(f)}% slower than opening. The open board may be causing "mental blur."`})}const o=h1(e);o>20&&t.push({type:"tip",category:"cognitive",title:"Voice Accuracy",message:`You correct ${o}% of voice commands. Try speaking more slowly or using full square names.`}),e.stockfishThresholdElo&&t.push({type:"info",category:"tactical",title:"Stockfish Threshold",message:`Your win rate drops below 50% at ${e.stockfishThresholdElo} Elo. Focus training at this level.`});const a=CP(e),l=m1(e,3);if(l.length>0&&l[0].count>=3){const f=l.map(m=>m.square.toUpperCase()).join(", ");t.push({type:"warning",category:"tactical",title:"Board Blind Spots",message:`You frequently lose track of: ${f}. Focus on visualizing these squares.`})}const c=a.kingside,u=a.queenside;return c>u*2&&c>=5?t.push({type:"tip",category:"tactical",title:"Kingside Visualization",message:"Your mental image of the kingside is weaker. Practice visualizing the f, g, and h files."}):u>c*2&&u>=5&&t.push({type:"tip",category:"tactical",title:"Queenside Visualization",message:"Your mental image of the queenside is weaker. Practice visualizing the a, b, and c files."}),a.corners>=4&&t.push({type:"tip",category:"visualization",title:"Corner Awareness",message:"Your mental board is blurry in the corners (a1, h1, a8, h8). These squares need more focus."}),t}class p1{constructor(t){this.sqlite=t,this._connectionDict=new Map}async initWebStore(){try{return await this.sqlite.initWebStore(),Promise.resolve()}catch(t){return Promise.reject(t)}}async saveToStore(t){try{return await this.sqlite.saveToStore({database:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async saveToLocalDisk(t){try{return await this.sqlite.saveToLocalDisk({database:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async getFromLocalDiskToStore(t){const n=t??!0;try{return await this.sqlite.getFromLocalDiskToStore({overwrite:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async echo(t){try{const n=await this.sqlite.echo({value:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isSecretStored(){try{const t=await this.sqlite.isSecretStored();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async setEncryptionSecret(t){try{return await this.sqlite.setEncryptionSecret({passphrase:t}),Promise.resolve()}catch(n){return Promise.reject(n)}}async changeEncryptionSecret(t,n){try{return await this.sqlite.changeEncryptionSecret({passphrase:t,oldpassphrase:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async clearEncryptionSecret(){try{return await this.sqlite.clearEncryptionSecret(),Promise.resolve()}catch(t){return Promise.reject(t)}}async checkEncryptionSecret(t){try{const n=await this.sqlite.checkEncryptionSecret({passphrase:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async addUpgradeStatement(t,n){try{return t.endsWith(".db")&&(t=t.slice(0,-3)),await this.sqlite.addUpgradeStatement({database:t,upgrade:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async createConnection(t,n,r,s,o){try{t.endsWith(".db")&&(t=t.slice(0,-3)),await this.sqlite.createConnection({database:t,encrypted:n,mode:r,version:s,readonly:o});const a=new Jg(t,o,this.sqlite),l=o?`RO_${t}`:`RW_${t}`;return this._connectionDict.set(l,a),Promise.resolve(a)}catch(a){return Promise.reject(a)}}async closeConnection(t,n){try{t.endsWith(".db")&&(t=t.slice(0,-3)),await this.sqlite.closeConnection({database:t,readonly:n});const r=n?`RO_${t}`:`RW_${t}`;return this._connectionDict.delete(r),Promise.resolve()}catch(r){return Promise.reject(r)}}async isConnection(t,n){const r={};t.endsWith(".db")&&(t=t.slice(0,-3));const s=n?`RO_${t}`:`RW_${t}`;return r.result=this._connectionDict.has(s),Promise.resolve(r)}async retrieveConnection(t,n){t.endsWith(".db")&&(t=t.slice(0,-3));const r=n?`RO_${t}`:`RW_${t}`;if(this._connectionDict.has(r)){const s=this._connectionDict.get(r);return typeof s<"u"?Promise.resolve(s):Promise.reject(`Connection ${t} is undefined`)}else return Promise.reject(`Connection ${t} does not exist`)}async getNCDatabasePath(t,n){try{const r=await this.sqlite.getNCDatabasePath({path:t,database:n});return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async createNCConnection(t,n){try{await this.sqlite.createNCConnection({databasePath:t,version:n});const r=new Jg(t,!0,this.sqlite),s=`RO_${t})`;return this._connectionDict.set(s,r),Promise.resolve(r)}catch(r){return Promise.reject(r)}}async closeNCConnection(t){try{await this.sqlite.closeNCConnection({databasePath:t});const n=`RO_${t})`;return this._connectionDict.delete(n),Promise.resolve()}catch(n){return Promise.reject(n)}}async isNCConnection(t){const n={},r=`RO_${t})`;return n.result=this._connectionDict.has(r),Promise.resolve(n)}async retrieveNCConnection(t){if(this._connectionDict.has(t)){const n=`RO_${t})`,r=this._connectionDict.get(n);return typeof r<"u"?Promise.resolve(r):Promise.reject(`Connection ${t} is undefined`)}else return Promise.reject(`Connection ${t} does not exist`)}async isNCDatabase(t){try{const n=await this.sqlite.isNCDatabase({databasePath:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async retrieveAllConnections(){return this._connectionDict}async closeAllConnections(){const t=new Map;try{for(const n of this._connectionDict.keys()){const r=n.substring(3),s=n.substring(0,3)==="RO_";await this.sqlite.closeConnection({database:r,readonly:s}),t.set(n,null)}for(const n of t.keys())this._connectionDict.delete(n);return Promise.resolve()}catch(n){return Promise.reject(n)}}async checkConnectionsConsistency(){try{const t=[...this._connectionDict.keys()],n=[],r=[];for(const o of t)n.push(o.substring(0,2)),r.push(o.substring(3));const s=await this.sqlite.checkConnectionsConsistency({dbNames:r,openModes:n});return s.result||(this._connectionDict=new Map),Promise.resolve(s)}catch(t){return this._connectionDict=new Map,Promise.reject(t)}}async importFromJson(t){try{const n=await this.sqlite.importFromJson({jsonstring:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isJsonValid(t){try{const n=await this.sqlite.isJsonValid({jsonstring:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async copyFromAssets(t){const n=t??!0;try{return await this.sqlite.copyFromAssets({overwrite:n}),Promise.resolve()}catch(r){return Promise.reject(r)}}async getFromHTTPRequest(t,n){const r=n??!0;try{return await this.sqlite.getFromHTTPRequest({url:t,overwrite:r}),Promise.resolve()}catch(s){return Promise.reject(s)}}async isDatabaseEncrypted(t){t.endsWith(".db")&&(t=t.slice(0,-3));try{const n=await this.sqlite.isDatabaseEncrypted({database:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isInConfigEncryption(){try{const t=await this.sqlite.isInConfigEncryption();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isInConfigBiometricAuth(){try{const t=await this.sqlite.isInConfigBiometricAuth();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isDatabase(t){t.endsWith(".db")&&(t=t.slice(0,-3));try{const n=await this.sqlite.isDatabase({database:t});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async getDatabaseList(){try{const n=(await this.sqlite.getDatabaseList()).values;n.sort();const r={values:n};return Promise.resolve(r)}catch(t){return Promise.reject(t)}}async getMigratableDbList(t){const n=t||"default";try{const r=await this.sqlite.getMigratableDbList({folderPath:n});return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async addSQLiteSuffix(t,n){const r=t||"default",s=n||[];try{const o=await this.sqlite.addSQLiteSuffix({folderPath:r,dbNameList:s});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async deleteOldDatabases(t,n){const r=t||"default",s=n||[];try{const o=await this.sqlite.deleteOldDatabases({folderPath:r,dbNameList:s});return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async moveDatabasesAndAddSuffix(t,n){const r=t||"default",s=n||[];return this.sqlite.moveDatabasesAndAddSuffix({folderPath:r,dbNameList:s})}}class Jg{constructor(t,n,r){this.dbName=t,this.readonly=n,this.sqlite=r}getConnectionDBName(){return this.dbName}getConnectionReadOnly(){return this.readonly}async open(){try{return await this.sqlite.open({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async close(){try{return await this.sqlite.close({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async beginTransaction(){try{const t=await this.sqlite.beginTransaction({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async commitTransaction(){try{const t=await this.sqlite.commitTransaction({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async rollbackTransaction(){try{const t=await this.sqlite.rollbackTransaction({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isTransactionActive(){try{const t=await this.sqlite.isTransactionActive({database:this.dbName});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async loadExtension(t){try{return await this.sqlite.loadExtension({database:this.dbName,path:t,readonly:this.readonly}),Promise.resolve()}catch(n){return Promise.reject(n)}}async enableLoadExtension(t){try{return await this.sqlite.enableLoadExtension({database:this.dbName,toggle:t,readonly:this.readonly}),Promise.resolve()}catch(n){return Promise.reject(n)}}async getUrl(){try{const t=await this.sqlite.getUrl({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getVersion(){try{const t=await this.sqlite.getVersion({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getTableList(){try{const t=await this.sqlite.getTableList({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async execute(t,n=!0,r=!0){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const s=await this.sqlite.execute({database:this.dbName,statements:t,transaction:n,readonly:!1,isSQL92:r});return Promise.resolve(s)}}catch(s){return Promise.reject(s)}}async query(t,n,r=!0){let s;try{return n&&n.length>0?s=await this.sqlite.query({database:this.dbName,statement:t,values:n,readonly:this.readonly,isSQL92:!0}):s=await this.sqlite.query({database:this.dbName,statement:t,values:[],readonly:this.readonly,isSQL92:r}),s=await this.reorderRows(s),Promise.resolve(s)}catch(o){return Promise.reject(o)}}async run(t,n,r=!0,s="no",o=!0){let a;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(n&&n.length>0?a=await this.sqlite.run({database:this.dbName,statement:t,values:n,transaction:r,readonly:!1,returnMode:s,isSQL92:!0}):a=await this.sqlite.run({database:this.dbName,statement:t,values:[],transaction:r,readonly:!1,returnMode:s,isSQL92:o}),a.changes=await this.reorderRows(a.changes),Promise.resolve(a))}catch(l){return Promise.reject(l)}}async executeSet(t,n=!0,r="no",s=!0){let o;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(o=await this.sqlite.executeSet({database:this.dbName,set:t,transaction:n,readonly:!1,returnMode:r,isSQL92:s}),o.changes=await this.reorderRows(o.changes),Promise.resolve(o))}catch(a){return Promise.reject(a)}}async isExists(){try{const t=await this.sqlite.isDBExists({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isTable(t){try{const n=await this.sqlite.isTableExists({database:this.dbName,table:t,readonly:this.readonly});return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async isDBOpen(){try{const t=await this.sqlite.isDBOpen({database:this.dbName,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async delete(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteDatabase({database:this.dbName,readonly:!1}),Promise.resolve())}catch(t){return Promise.reject(t)}}async createSyncTable(){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const t=await this.sqlite.createSyncTable({database:this.dbName,readonly:!1});return Promise.resolve(t)}}catch(t){return Promise.reject(t)}}async setSyncDate(t){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.setSyncDate({database:this.dbName,syncdate:t,readonly:!1}),Promise.resolve())}catch(n){return Promise.reject(n)}}async getSyncDate(){try{const t=await this.sqlite.getSyncDate({database:this.dbName,readonly:this.readonly});let n="";return t.syncDate>0&&(n=new Date(t.syncDate*1e3).toISOString()),Promise.resolve(n)}catch(t){return Promise.reject(t)}}async exportToJson(t,n=!1){try{const r=await this.sqlite.exportToJson({database:this.dbName,jsonexportmode:t,readonly:this.readonly,encrypted:n});return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async deleteExportedRows(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteExportedRows({database:this.dbName,readonly:!1}),Promise.resolve())}catch(t){return Promise.reject(t)}}async executeTransaction(t,n=!0){let r=0,s=!1;if(this.readonly)return Promise.reject("not allowed in read-only mode");if(await this.sqlite.beginTransaction({database:this.dbName}),s=await this.sqlite.isTransactionActive({database:this.dbName}),!s)return Promise.reject("After Begin Transaction, no transaction active");try{for(const l of t){if(typeof l!="object"||!("statement"in l))throw new Error("Error a task.statement must be provided");if("values"in l&&l.values&&l.values.length>0){const c=l.statement.toUpperCase().includes("RETURNING")?"all":"no",u=await this.sqlite.run({database:this.dbName,statement:l.statement,values:l.values,transaction:!1,readonly:!1,returnMode:c,isSQL92:n});if(u.changes.changes<0)throw new Error("Error in transaction method run ");r+=u.changes.changes}else{const c=await this.sqlite.execute({database:this.dbName,statements:l.statement,transaction:!1,readonly:!1});if(c.changes.changes<0)throw new Error("Error in transaction method execute ");r+=c.changes.changes}}const o=await this.sqlite.commitTransaction({database:this.dbName});r+=o.changes.changes;const a={changes:{changes:r}};return Promise.resolve(a)}catch(o){const a=o.message?o.message:o;return await this.sqlite.rollbackTransaction({database:this.dbName}),Promise.reject(a)}}async reorderRows(t){const n=t;if(t!=null&&t.values&&typeof t.values[0]=="object"&&Object.keys(t.values[0]).includes("ios_columns")){const r=t.values[0].ios_columns,s=[];for(let o=1;o<t.values.length;o++){const a=t.values[o],l={};for(const c of r)l[c]=a[c];s.push(l)}n.values=s}return Promise.resolve(n)}}const g1=Is("CapacitorSQLite",{web:()=>Xr(()=>import("./web-DFKb0Seg.js"),[]).then(e=>new e.CapacitorSQLiteWeb),electron:()=>window.CapacitorCustomPlatform.plugins.CapacitorSQLite}),jd="blindfold_chess";let Ji=null,Wt=null,Oc=!1,Zl=!1,Pl=null;async function v1(){return Zl?!0:Pl||(Pl=RP(),Pl)}async function RP(){var e;try{if(Oc=jn.isNativePlatform(),!Oc)return console.log("[TrainingStats] Web platform - using localStorage fallback"),Zl=!0,!0;Ji=new p1(g1);const t=await Ji.checkConnectionsConsistency(),n=(await Ji.isConnection(jd,!1)).result;t.result&&n?Wt=await Ji.retrieveConnection(jd,!1):Wt=await Ji.createConnection(jd,!1,"no-encryption",1,!1),await Wt.open(),await Wt.execute(`
      CREATE TABLE IF NOT EXISTS training_stats (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        mode TEXT NOT NULL,
        score REAL NOT NULL,
        streak INTEGER NOT NULL DEFAULT 0,
        achieved_at TEXT NOT NULL
      );
    `);try{((e=(await Wt.query("PRAGMA table_info(training_stats);")).values)==null?void 0:e.some(a=>a.name==="streak"))||(await Wt.execute("ALTER TABLE training_stats ADD COLUMN streak INTEGER NOT NULL DEFAULT 0;"),console.log("[TrainingStats] Migrated: Added streak column"))}catch(s){console.warn("[TrainingStats] Migration check failed:",s)}return console.log("[TrainingStats] Database initialized successfully"),Zl=!0,!0}catch(t){return console.error("[TrainingStats] Failed to initialize database:",t),Zl=!0,!1}}function x1(){try{const e=localStorage.getItem("blindfold_training_stats");return e?JSON.parse(e):[]}catch{return[]}}function _P(e){localStorage.setItem("blindfold_training_stats",JSON.stringify(e))}async function MP(e,t,n=0){var s,o;await v1();const r=new Date().toISOString();try{if(!Oc){const c=x1(),u=c.length>0?Math.max(...c.map(m=>m.id))+1:1,f={id:u,mode:e,score:t,streak:n,achievedAt:r};return c.unshift(f),_P(c),console.log("[TrainingStats] Session saved to localStorage:",u),u}if(!Wt)return console.error("[TrainingStats] Database not initialized"),null;const l=await Wt.run(`
      INSERT INTO training_stats (mode, score, streak, achieved_at)
      VALUES (?, ?, ?, ?);
    `,[e,t,n,r]);return console.log("[TrainingStats] Session saved:",(s=l.changes)==null?void 0:s.lastId),((o=l.changes)==null?void 0:o.lastId)||null}catch(a){return console.error("[TrainingStats] Failed to save session:",a instanceof Error?a.message:String(a)),null}}async function $c(){var t,n,r,s,o,a,l,c,u,f,m,h,y,v,p,b,x,g,w,k;await v1();const e={colorBlitzBest:null,colorBlitzBestDate:null,colorBlitzBestStreak:null,coordinateSniperBest:null,coordinateSniperBestDate:null,coordinateSniperBestStreak:null,voiceMoveMasterBest:null,voiceMoveMasterBestDate:null,voiceMoveMasterBestStreak:null,totalSessions:0,recentSessions:[]};try{if(!Oc){const Y=x1(),be=Y.filter(ae=>ae.mode==="color_blitz"),Pe=Y.filter(ae=>ae.mode==="coordinate_sniper"),_e=Y.filter(ae=>ae.mode==="voice_move_master");let fe=null,L=null,z=null;if(be.length>0){const ae=be.reduce((Me,Ae)=>Ae.score>Me.score?Ae:Me);fe=ae.score,L=ae.achievedAt,z=be.reduce((Me,Ae)=>(Ae.streak||0)>(Me.streak||0)?Ae:Me).streak||null}let J=null,ie=null,ge=null;if(Pe.length>0){const ae=Pe.reduce((Me,Ae)=>Ae.score<Me.score?Ae:Me);J=ae.score,ie=ae.achievedAt,ge=Pe.reduce((Me,Ae)=>(Ae.streak||0)>(Me.streak||0)?Ae:Me).streak||null}let te=null,ne=null,Ne=null;if(_e.length>0){const ae=_e.reduce((Me,Ae)=>Ae.score>Me.score?Ae:Me);te=ae.score,ne=ae.achievedAt,Ne=_e.reduce((Me,Ae)=>(Ae.streak||0)>(Me.streak||0)?Ae:Me).streak||null}return{colorBlitzBest:fe,colorBlitzBestDate:L,colorBlitzBestStreak:z,coordinateSniperBest:J,coordinateSniperBestDate:ie,coordinateSniperBestStreak:ge,voiceMoveMasterBest:te,voiceMoveMasterBestDate:ne,voiceMoveMasterBestStreak:Ne,totalSessions:Y.length,recentSessions:Y.slice(0,10)}}if(!Wt)return e;const S=`
      SELECT score as best_score, achieved_at
      FROM training_stats
      WHERE mode = 'color_blitz'
      ORDER BY score DESC
      LIMIT 1;
    `,C=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'color_blitz';
    `,N=`
      SELECT score as best_time, achieved_at
      FROM training_stats
      WHERE mode = 'coordinate_sniper'
      ORDER BY score ASC
      LIMIT 1;
    `,j=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'coordinate_sniper';
    `,R=`
      SELECT score as best_score, achieved_at
      FROM training_stats
      WHERE mode = 'voice_move_master'
      ORDER BY score DESC
      LIMIT 1;
    `,_=`
      SELECT MAX(streak) as best_streak
      FROM training_stats
      WHERE mode = 'voice_move_master';
    `,B="SELECT COUNT(*) as total FROM training_stats;",D=`
      SELECT id, mode, score, streak, achieved_at as achievedAt
      FROM training_stats
      ORDER BY achieved_at DESC
      LIMIT 10;
    `,I=await Wt.query(S),O=await Wt.query(C),F=await Wt.query(N),q=await Wt.query(j),Q=await Wt.query(R),T=await Wt.query(_),$=await Wt.query(B),W=await Wt.query(D);return{colorBlitzBest:((n=(t=I.values)==null?void 0:t[0])==null?void 0:n.best_score)||null,colorBlitzBestDate:((s=(r=I.values)==null?void 0:r[0])==null?void 0:s.achieved_at)||null,colorBlitzBestStreak:((a=(o=O.values)==null?void 0:o[0])==null?void 0:a.best_streak)||null,coordinateSniperBest:((c=(l=F.values)==null?void 0:l[0])==null?void 0:c.best_time)||null,coordinateSniperBestDate:((f=(u=F.values)==null?void 0:u[0])==null?void 0:f.achieved_at)||null,coordinateSniperBestStreak:((h=(m=q.values)==null?void 0:m[0])==null?void 0:h.best_streak)||null,voiceMoveMasterBest:((v=(y=Q.values)==null?void 0:y[0])==null?void 0:v.best_score)||null,voiceMoveMasterBestDate:((b=(p=Q.values)==null?void 0:p[0])==null?void 0:b.achieved_at)||null,voiceMoveMasterBestStreak:((g=(x=T.values)==null?void 0:x[0])==null?void 0:g.best_streak)||null,totalSessions:((k=(w=$.values)==null?void 0:w[0])==null?void 0:k.total)||0,recentSessions:W.values||[]}}catch(S){return console.error("[TrainingStats] Failed to get stats:",S),e}}function AP(){return localStorage.getItem("blindfold_daily_goals")!=="false"}function LP(e){localStorage.setItem("blindfold_daily_goals",e?"true":"false")}function IP(){const[e,t]=d.useState(!1),[n,r]=d.useState("unknown"),[s,o]=d.useState(!1),[a,l]=d.useState(QN()),[c,u]=d.useState(Yf),[f,m]=d.useState(AP()),{toast:h}=iu();d.useEffect(()=>{e&&($m().then(r),u(Yf()))},[e]),d.useEffect(()=>{const w=()=>t(!1);return window.addEventListener("closeAllDialogs",w),()=>window.removeEventListener("closeAllDialogs",w)},[]);const y=async()=>{o(!0);try{const w=await JT();r(w.status)}finally{o(!1)}},v=w=>{l(w),YN(w)},p=()=>{jn.isNativePlatform()&&alert("To enable microphone access, please go to your device Settings > Apps > Blindfold Chess > Permissions > Microphone and select 'Allow'.")},x=(()=>{switch(n){case"granted":return{icon:on,text:"Enabled",color:"text-green-500"};case"denied":case"prompt":return{icon:eo,text:"Not enabled",color:"text-muted-foreground"};case"prompt-with-rationale":return{icon:eo,text:"Blocked",color:"text-destructive"};default:return{icon:eo,text:"Unknown",color:"text-muted-foreground"}}})(),g=x.icon;return i.jsxs(Ci,{open:e,onOpenChange:t,children:[i.jsx(Lc,{asChild:!0,children:i.jsxs(X,{variant:"ghost",size:"icon","data-testid":"button-settings",children:[i.jsx(u2,{className:"h-5 w-5"}),i.jsx("span",{className:"sr-only",children:"Settings"})]})}),i.jsxs(uo,{className:"sm:max-w-md",children:[i.jsxs(fo,{children:[i.jsx(ho,{children:"Settings"}),i.jsx(Yw,{children:"Configure app preferences"})]}),i.jsxs("div",{className:"space-y-6 pt-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"font-semibold",children:"Notifications"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[a?i.jsx(GC,{className:"h-4 w-4 text-muted-foreground"}):i.jsx(HC,{className:"h-4 w-4 text-muted-foreground"}),i.jsx(rn,{htmlFor:"toast-toggle",className:"text-sm",children:"Toast notifications"})]}),i.jsx(cr,{id:"toast-toggle",checked:a,onCheckedChange:v,"data-testid":"switch-toast-notifications",className:"data-[state=checked]:bg-amber-400"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Show brief pop-up messages for game events"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"font-semibold",children:"Display"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(f2,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx(rn,{htmlFor:"keep-awake-toggle",className:"text-sm",children:"Keep Screen Awake"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"Prevents auto-sleep during games"})]})]}),i.jsx(cr,{id:"keep-awake-toggle",checked:c.keepAwakeEnabled,onCheckedChange:w=>{const k={...c,keepAwakeEnabled:w};u(k),Xf(k),window.dispatchEvent(new CustomEvent("blindfoldSettingsChanged",{detail:k})),h({title:w?"Screen will stay active":"Screen may auto-sleep",description:w?"Screen will stay active during matches":"Normal screen timeout restored"})},"data-testid":"switch-keep-awake",className:"data-[state=checked]:bg-amber-400"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"font-semibold",children:"Training"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ii,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx(rn,{htmlFor:"daily-goals-toggle",className:"text-sm",children:"Daily Goals"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"Show daily training reminders"})]})]}),i.jsx(cr,{id:"daily-goals-toggle",checked:f,onCheckedChange:w=>{m(w),LP(w),h({title:w?"Daily goals enabled":"Daily goals disabled",description:w?"You'll see training reminders":"Training reminders hidden"})},"data-testid":"switch-daily-goals",className:"data-[state=checked]:bg-amber-400"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"font-semibold",children:"Voice Control"}),i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(g,{className:`h-4 w-4 ${x.color}`}),i.jsxs("span",{className:"text-sm",children:["Microphone: ",i.jsx("span",{className:x.color,children:x.text})]})]})}),n==="granted"?i.jsx("p",{className:"text-xs text-muted-foreground",children:"Voice commands are ready to use"}):n==="prompt-with-rationale"?i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Microphone access was blocked. Voice control requires microphone permission for blindfold training."}),i.jsxs(X,{variant:"outline",size:"sm",onClick:p,className:"w-full","data-testid":"button-open-settings",children:[i.jsx(Bf,{className:"h-3 w-3 mr-2"}),"Open Device Settings"]})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable microphone access for voice-controlled chess moves"}),i.jsxs(X,{variant:"outline",size:"sm",onClick:y,disabled:s,className:"w-full","data-testid":"button-request-mic",children:[i.jsx(on,{className:"h-3 w-3 mr-2"}),s?"Requesting...":"Enable Microphone"]})]})]})]})]})]})}function OP(){const[e,t]=d.useState(!1);return d.useEffect(()=>{const n=()=>t(!1);return window.addEventListener("closeAllDialogs",n),()=>window.removeEventListener("closeAllDialogs",n)},[]),i.jsxs(Ci,{open:e,onOpenChange:t,children:[i.jsx(Lc,{asChild:!0,children:i.jsxs(X,{variant:"ghost",size:"icon","data-testid":"button-about",children:[i.jsx(i2,{className:"h-5 w-5"}),i.jsx("span",{className:"sr-only",children:"About"})]})}),i.jsxs(uo,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[i.jsx(fo,{children:i.jsx(ho,{children:"About Blindfold Chess"})}),i.jsxs("div",{className:"space-y-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Privacy Policy"}),i.jsxs("p",{className:"text-muted-foreground",children:[i.jsx("strong",{children:"100% Offline & Private"}),"  This app is designed to be completely offline. We do not collect, store, or transmit any personal data, chess games, or voice recordings to external servers. All game history and settings are stored locally on your device."]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Open Source & Licenses"}),i.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Stockfish Chess Engine:"})," Licensed under the GNU GPL v3.",i.jsxs("a",{href:"https://stockfishchess.org",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 hover:underline ml-1 inline-flex items-center gap-1",children:["stockfishchess.org ",i.jsx(Bf,{className:"h-3 w-3"})]})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"2D Chess Imagery:"}),' "Cburnett" piece set by Colin M.L. Burnett (CC BY-SA 3.0).']}),i.jsxs("li",{children:[i.jsx("strong",{children:"Capacitor Runtime:"})," Licensed under the MIT License."]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Project Links"}),i.jsx("div",{className:"flex flex-col gap-2",children:i.jsxs("a",{href:"https://github.com/official-stockfish/Stockfish",target:"_blank",rel:"noopener noreferrer",className:"text-amber-600 hover:underline inline-flex items-center gap-1",children:[i.jsx(Bf,{className:"h-3 w-3"})," Stockfish Source Code"]})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Technical Info"}),i.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Engine:"})," Stockfish 17.1 (WASM)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Version:"})," 1.0.0"]}),i.jsxs("li",{className:"flex items-center gap-1",children:[i.jsx(my,{className:"h-3 w-3"}),i.jsx("strong",{children:"Auto-Sleep:"})," Disabled during active games"]})]})]})]})]})]})}var y1="AlertDialog",[$P,YM]=Xn(y1,[Rw]),Zr=Rw(),w1=e=>{const{__scopeAlertDialog:t,...n}=e,r=Zr(t);return i.jsx(Hw,{...r,...n,modal:!0})};w1.displayName=y1;var DP="AlertDialogTrigger",FP=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Zr(n);return i.jsx(Gw,{...s,...r,ref:t})});FP.displayName=DP;var BP="AlertDialogPortal",b1=e=>{const{__scopeAlertDialog:t,...n}=e,r=Zr(t);return i.jsx(Kw,{...r,...n})};b1.displayName=BP;var zP="AlertDialogOverlay",S1=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Zr(n);return i.jsx(_m,{...s,...r,ref:t})});S1.displayName=zP;var di="AlertDialogContent",[VP,qP]=$P(di),UP=_x("AlertDialogContent"),k1=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...s}=e,o=Zr(n),a=d.useRef(null),l=Fe(t,a),c=d.useRef(null);return i.jsx(AT,{contentName:di,titleName:N1,docsSlug:"alert-dialog",children:i.jsx(VP,{scope:n,cancelRef:c,children:i.jsxs(Mm,{role:"alertdialog",...o,...s,ref:l,onOpenAutoFocus:de(s.onOpenAutoFocus,u=>{var f;u.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(UP,{children:r}),i.jsx(HP,{contentRef:a})]})})})});k1.displayName=di;var N1="AlertDialogTitle",C1=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Zr(n);return i.jsx(Am,{...s,...r,ref:t})});C1.displayName=N1;var j1="AlertDialogDescription",E1=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Zr(n);return i.jsx(Lm,{...s,...r,ref:t})});E1.displayName=j1;var WP="AlertDialogAction",T1=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Zr(n);return i.jsx(Im,{...s,...r,ref:t})});T1.displayName=WP;var P1="AlertDialogCancel",R1=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:s}=qP(P1,n),o=Zr(n),a=Fe(t,s);return i.jsx(Im,{...o,...r,ref:a})});R1.displayName=P1;var HP=({contentRef:e})=>{const t=`\`${di}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${di}\` by passing a \`${j1}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${di}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},GP=w1,KP=b1,_1=S1,M1=k1,A1=T1,L1=R1,I1=C1,O1=E1;const Oi=GP,QP=KP,$1=d.forwardRef(({className:e,...t},n)=>i.jsx(_1,{className:je("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));$1.displayName=_1.displayName;const yo=d.forwardRef(({className:e,...t},n)=>i.jsxs(QP,{children:[i.jsx($1,{}),i.jsx(M1,{ref:n,className:je("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));yo.displayName=M1.displayName;const wo=({className:e,...t})=>i.jsx("div",{className:je("flex flex-col space-y-2 text-center sm:text-left",e),...t});wo.displayName="AlertDialogHeader";const bo=({className:e,...t})=>i.jsx("div",{className:je("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});bo.displayName="AlertDialogFooter";const So=d.forwardRef(({className:e,...t},n)=>i.jsx(I1,{ref:n,className:je("text-lg font-semibold",e),...t}));So.displayName=I1.displayName;const ko=d.forwardRef(({className:e,...t},n)=>i.jsx(O1,{ref:n,className:je("text-sm text-muted-foreground",e),...t}));ko.displayName=O1.displayName;const No=d.forwardRef(({className:e,...t},n)=>i.jsx(A1,{ref:n,className:je(km(),e),...t}));No.displayName=A1.displayName;const Co=d.forwardRef(({className:e,...t},n)=>i.jsx(L1,{ref:n,className:je(km({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Co.displayName=L1.displayName;var YP=d.createContext(void 0);function yu(e){const t=d.useContext(YP);return e||t||"ltr"}var Ed="rovingFocusGroup.onEntryFocus",XP={bubbles:!1,cancelable:!0},wu="RovingFocusGroup",[Zf,D1,ZP]=sm(wu),[JP,F1]=Xn(wu,[ZP]),[eR,tR]=JP(wu),B1=d.forwardRef((e,t)=>i.jsx(Zf.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(Zf.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(nR,{...e,ref:t})})}));B1.displayName=wu;var nR=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...m}=e,h=d.useRef(null),y=Fe(t,h),v=yu(o),[p=null,b]=ao({prop:a,defaultProp:l,onChange:c}),[x,g]=d.useState(!1),w=bt(u),k=D1(n),S=d.useRef(!1),[C,N]=d.useState(0);return d.useEffect(()=>{const j=h.current;if(j)return j.addEventListener(Ed,w),()=>j.removeEventListener(Ed,w)},[w]),i.jsx(eR,{scope:n,orientation:r,dir:v,loop:s,currentTabStopId:p,onItemFocus:d.useCallback(j=>b(j),[b]),onItemShiftTab:d.useCallback(()=>g(!0),[]),onFocusableItemAdd:d.useCallback(()=>N(j=>j+1),[]),onFocusableItemRemove:d.useCallback(()=>N(j=>j-1),[]),children:i.jsx(we.div,{tabIndex:x||C===0?-1:0,"data-orientation":r,...m,ref:y,style:{outline:"none",...e.style},onMouseDown:de(e.onMouseDown,()=>{S.current=!0}),onFocus:de(e.onFocus,j=>{const R=!S.current;if(j.target===j.currentTarget&&R&&!x){const _=new CustomEvent(Ed,XP);if(j.currentTarget.dispatchEvent(_),!_.defaultPrevented){const B=k().filter(q=>q.focusable),D=B.find(q=>q.active),I=B.find(q=>q.id===p),F=[D,I,...B].filter(Boolean).map(q=>q.ref.current);q1(F,f)}}S.current=!1}),onBlur:de(e.onBlur,()=>g(!1))})})}),z1="RovingFocusGroupItem",V1=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,...a}=e,l=Cs(),c=o||l,u=tR(z1,n),f=u.currentTabStopId===c,m=D1(n),{onFocusableItemAdd:h,onFocusableItemRemove:y}=u;return d.useEffect(()=>{if(r)return h(),()=>y()},[r,h,y]),i.jsx(Zf.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:i.jsx(we.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:de(e.onMouseDown,v=>{r?u.onItemFocus(c):v.preventDefault()}),onFocus:de(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:de(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const p=oR(v,u.orientation,u.dir);if(p!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let x=m().filter(g=>g.focusable).map(g=>g.ref.current);if(p==="last")x.reverse();else if(p==="prev"||p==="next"){p==="prev"&&x.reverse();const g=x.indexOf(v.currentTarget);x=u.loop?iR(x,g+1):x.slice(g+1)}setTimeout(()=>q1(x))}})})})});V1.displayName=z1;var rR={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function sR(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function oR(e,t,n){const r=sR(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return rR[r]}function q1(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function iR(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var aR=B1,lR=V1,zm="Tabs",[cR,XM]=Xn(zm,[F1]),U1=F1(),[uR,Vm]=cR(zm),W1=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:o,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=e,f=yu(l),[m,h]=ao({prop:r,onChange:s,defaultProp:o});return i.jsx(uR,{scope:n,baseId:Cs(),value:m,onValueChange:h,orientation:a,dir:f,activationMode:c,children:i.jsx(we.div,{dir:f,"data-orientation":a,...u,ref:t})})});W1.displayName=zm;var H1="TabsList",G1=d.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,o=Vm(H1,n),a=U1(n);return i.jsx(aR,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:r,children:i.jsx(we.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:t})})});G1.displayName=H1;var K1="TabsTrigger",Q1=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...o}=e,a=Vm(K1,n),l=U1(n),c=Z1(a.baseId,r),u=J1(a.baseId,r),f=r===a.value;return i.jsx(lR,{asChild:!0,...l,focusable:!s,active:f,children:i.jsx(we.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...o,ref:t,onMouseDown:de(e.onMouseDown,m=>{!s&&m.button===0&&m.ctrlKey===!1?a.onValueChange(r):m.preventDefault()}),onKeyDown:de(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&a.onValueChange(r)}),onFocus:de(e.onFocus,()=>{const m=a.activationMode!=="manual";!f&&!s&&m&&a.onValueChange(r)})})})});Q1.displayName=K1;var Y1="TabsContent",X1=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:o,...a}=e,l=Vm(Y1,n),c=Z1(l.baseId,r),u=J1(l.baseId,r),f=r===l.value,m=d.useRef(f);return d.useEffect(()=>{const h=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(h)},[]),i.jsx(pr,{present:s||f,children:({present:h})=>i.jsx(we.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:h&&o})})});X1.displayName=Y1;function Z1(e,t){return`${e}-trigger-${t}`}function J1(e,t){return`${e}-content-${t}`}var dR=W1,eb=G1,tb=Q1,nb=X1;const rb=dR,qm=d.forwardRef(({className:e,...t},n)=>i.jsx(eb,{ref:n,className:je("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));qm.displayName=eb.displayName;const Ys=d.forwardRef(({className:e,...t},n)=>i.jsx(tb,{ref:n,className:je("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));Ys.displayName=tb.displayName;const Xo=d.forwardRef(({className:e,...t},n)=>i.jsx(nb,{ref:n,className:je("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Xo.displayName=nb.displayName;const De=d.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:je("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",e),...t}));De.displayName="Card";const xt=d.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:je("flex flex-col space-y-1.5 p-6",e),...t}));xt.displayName="CardHeader";const yt=d.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:je("text-2xl font-semibold leading-none tracking-tight",e),...t}));yt.displayName="CardTitle";const _t=d.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:je("text-sm text-muted-foreground",e),...t}));_t.displayName="CardDescription";const Ve=d.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:je("p-6 pt-0",e),...t}));Ve.displayName="CardContent";const fR=d.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:je("flex items-center p-6 pt-0",e),...t}));fR.displayName="CardFooter";const hR=uu("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function Mt({className:e,variant:t,...n}){return i.jsx("div",{className:je(hR({variant:t}),e),...n})}var Um="Progress",Wm=100,[mR,ZM]=Xn(Um),[pR,gR]=mR(Um),sb=d.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:o=vR,...a}=e;(s||s===0)&&!ev(s)&&console.error(xR(`${s}`,"Progress"));const l=ev(s)?s:Wm;r!==null&&!tv(r,l)&&console.error(yR(`${r}`,"Progress"));const c=tv(r,l)?r:null,u=Dc(c)?o(c,l):void 0;return i.jsx(pR,{scope:n,value:c,max:l,children:i.jsx(we.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Dc(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":ab(c,l),"data-value":c??void 0,"data-max":l,...a,ref:t})})});sb.displayName=Um;var ob="ProgressIndicator",ib=d.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=gR(ob,n);return i.jsx(we.div,{"data-state":ab(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});ib.displayName=ob;function vR(e,t){return`${Math.round(e/t*100)}%`}function ab(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Dc(e){return typeof e=="number"}function ev(e){return Dc(e)&&!isNaN(e)&&e>0}function tv(e,t){return Dc(e)&&!isNaN(e)&&e<=t&&e>=0}function xR(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Wm}\`.`}function yR(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Wm} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var lb=sb,wR=ib;const fi=d.forwardRef(({className:e,value:t,...n},r)=>i.jsx(lb,{ref:r,className:je("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...n,children:i.jsx(wR,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));fi.displayName=lb.displayName;var bR="Separator",nv="horizontal",SR=["horizontal","vertical"],cb=d.forwardRef((e,t)=>{const{decorative:n,orientation:r=nv,...s}=e,o=kR(r)?r:nv,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return i.jsx(we.div,{"data-orientation":o,...l,...s,ref:t})});cb.displayName=bR;function kR(e){return SR.includes(e)}var ub=cb;const Cr=d.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>i.jsx(ub,{ref:s,decorative:n,orientation:t,className:je("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Cr.displayName=ub.displayName;function Td({insight:e}){const t={info:i.jsx(bg,{className:"h-4 w-4"}),warning:i.jsx(m2,{className:"h-4 w-4"}),success:i.jsx(ZC,{className:"h-4 w-4"}),tip:i.jsx(bg,{className:"h-4 w-4"})},n={info:"text-blue-500",warning:"text-amber-500",success:"text-green-500",tip:"text-purple-500"};return i.jsxs("div",{className:"flex gap-3 p-3 rounded-md bg-muted/50",children:[i.jsx("div",{className:n[e.type],children:t[e.type]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-sm font-medium",children:e.title}),i.jsx("p",{className:"text-xs text-muted-foreground",children:e.message})]})]})}function wn({label:e,value:t,subValue:n}){return i.jsxs("div",{className:"flex items-center justify-between py-2",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:e}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"font-medium",children:t}),n&&i.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:n})]})]})}function NR({stats:e}){const t=["a","b","c","d","e","f","g","h"],n=["8","7","6","5","4","3","2","1"],r=s=>s===0?"bg-muted/30":s<25?"bg-amber-200 dark:bg-amber-900/40":s<50?"bg-amber-400 dark:bg-amber-700/60":s<75?"bg-red-400 dark:bg-red-700/70":"bg-red-600 dark:bg-red-600/80";return i.jsx("div",{className:"grid grid-cols-8 gap-0.5 aspect-square max-w-[200px] mx-auto",children:n.map(s=>t.map(o=>{const a=`${o}${s}`,l=jP(e,a);return i.jsx("div",{className:`aspect-square ${r(l)} rounded-sm flex items-center justify-center`,title:`${a.toUpperCase()}: ${e.squareInquiryHeatmap[a]||0} inquiries`,children:l>50&&i.jsx("span",{className:"text-[6px] text-white font-bold",children:a})},a)}))})}function CR(e){const t=Math.floor(e/1e3),n=Math.floor(e%1e3/100);return`${t}.${n}s`}function jR({stats:e}){const t=d.useMemo(()=>PP(e),[e]),n=u1(e),r=NP(e),s=d1(e),o=f1(e),a=h1(e),l=kP(e),c=m1(e,5),[u,f]=d.useState(null);d.useEffect(()=>{$c().then(f);const v=()=>{$c().then(f)};return window.addEventListener("trainingStatsUpdated",v),()=>{window.removeEventListener("trainingStatsUpdated",v)}},[]);const m=t.filter(v=>v.category==="visualization"),h=t.filter(v=>v.category==="cognitive"),y=t.filter(v=>v.category==="tactical");return i.jsxs(rb,{defaultValue:"tactical",className:"w-full",children:[i.jsxs(qm,{className:"grid w-full grid-cols-4 mb-4",children:[i.jsxs(Ys,{value:"tactical",className:"flex items-center gap-1 text-xs",children:[i.jsx(ii,{className:"h-3 w-3"}),i.jsx("span",{className:"hidden sm:inline",children:"Tactics"})]}),i.jsxs(Ys,{value:"cognitive",className:"flex items-center gap-1 text-xs",children:[i.jsx(sy,{className:"h-3 w-3"}),i.jsx("span",{className:"hidden sm:inline",children:"Mind"})]}),i.jsxs(Ys,{value:"visualization",className:"flex items-center gap-1 text-xs",children:[i.jsx(uy,{className:"h-3 w-3"}),i.jsx("span",{className:"hidden sm:inline",children:"Vision"})]}),i.jsxs(Ys,{value:"training",className:"flex items-center gap-1 text-xs",children:[i.jsx(cy,{className:"h-3 w-3"}),i.jsx("span",{className:"hidden sm:inline",children:"Training"})]})]}),i.jsxs(Xo,{value:"visualization",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[i.jsxs(De,{children:[i.jsxs(xt,{className:"pb-2",children:[i.jsxs(yt,{className:"text-sm flex items-center gap-2",children:[i.jsx(On,{className:"h-4 w-4 text-amber-500"}),"Visualization Ceiling"]}),i.jsx(_t,{className:"text-xs",children:"The strongest opponent you've beaten without peeking at the board"})]}),i.jsx(Ve,{children:e.visualizationCeiling>0?i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-3xl font-bold text-amber-500",children:e.visualizationCeiling}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Highest Elo beaten without peeking"}),e.visualizationCeilingElo&&i.jsxs(Mt,{variant:"outline",className:"mt-2",children:[e.visualizationCeilingElo," Elo"]})]}):i.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Beat a bot without peeking to set your ceiling!"})})]}),i.jsxs(De,{children:[i.jsxs(xt,{className:"pb-2",children:[i.jsx(yt,{className:"text-sm",children:"Peek-Free Progress"}),i.jsx(_t,{className:"text-xs",children:"How often you complete games without looking at the board"})]}),i.jsxs(Ve,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-2xl font-bold",children:[n,"%"]}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.totalPeekFreeGames," of ",e.blindfoldGamesPlayed||0," blindfold games"]})]}),i.jsx(fi,{value:n,className:"h-2"}),i.jsx(Cr,{}),i.jsx(wn,{label:"Best Peek-Free Streak",value:`${e.bestPeekFreeGameStreak} games`}),i.jsx(wn,{label:"Best Peek-Free Moves",value:e.bestPeekFreeStreak,subValue:"in a single game"})]})]}),i.jsxs(De,{children:[i.jsxs(xt,{className:"pb-2",children:[i.jsx(yt,{className:"text-sm",children:"Reconstruction by Game Length"}),i.jsx(_t,{className:"text-xs",children:"How well you remember the board position as games get longer"})]}),i.jsx(Ve,{className:"space-y-2",children:i.jsx("div",{className:"space-y-2",children:[{label:"10 moves",value:o.moves10},{label:"11-20 moves",value:o.moves20},{label:"21-30 moves",value:o.moves30},{label:"31-40 moves",value:o.moves40},{label:"40+ moves",value:o.moves50plus}].map(({label:v,value:p})=>i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-xs text-muted-foreground w-20",children:v}),i.jsx(fi,{value:p,className:"flex-1 h-2"}),i.jsx("span",{className:"text-xs font-medium w-10 text-right",children:p>0?`${p}%`:"-"})]},v))})})]}),i.jsxs(De,{children:[i.jsxs(xt,{className:"pb-2",children:[i.jsxs(yt,{className:"text-sm flex items-center gap-2",children:[i.jsx(dy,{className:"h-4 w-4"}),"Confusion Heatmap"]}),i.jsx(_t,{className:"text-xs",children:'Squares you inquire about most often - your mental "blind spots"'})]}),i.jsx(Ve,{children:e.totalSquareInquiries>0?i.jsxs(i.Fragment,{children:[i.jsx(NR,{stats:e}),i.jsx("p",{className:"text-xs text-muted-foreground text-center mt-3",children:"Red = frequently forgotten, Gray = clear"}),c.length>0&&i.jsxs("div",{className:"mt-4 space-y-1",children:[i.jsx("p",{className:"text-xs font-medium",children:"Top Blind Spots:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:c.map(({square:v,count:p})=>i.jsxs(Mt,{variant:"secondary",className:"text-xs",children:[v.toUpperCase()," (",p,")"]},v))})]})]}):i.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Ask about squares during games to see which ones you forget!"})})]}),m.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-sm font-medium",children:"Insights"}),m.map((v,p)=>i.jsx(Td,{insight:v},p))]})]}),i.jsxs(Xo,{value:"cognitive",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[i.jsxs(De,{children:[i.jsxs(xt,{className:"pb-2",children:[i.jsxs(yt,{className:"text-sm flex items-center gap-2",children:["Endgame Drift",e.lastGameEndgameDrift>30?i.jsx(yy,{className:"h-4 w-4 text-red-500"}):i.jsx(wy,{className:"h-4 w-4 text-green-500"})]}),i.jsx(_t,{className:"text-xs",children:'Slowing down late-game may indicate "mental blur" from fewer pieces'})]}),i.jsxs(Ve,{children:[i.jsx("div",{className:"text-center",children:i.jsx("p",{className:`text-3xl font-bold ${e.lastGameEndgameDrift>30?"text-red-500":"text-green-500"}`,children:e.lastGameEndgameDrift>0?`+${e.lastGameEndgameDrift}%`:"0%"})}),e.lastGameEndgameDrift>50&&i.jsx("p",{className:"text-xs text-amber-500 text-center mt-3",children:'High drift may indicate "mental blur" - difficulty tracking fewer pieces'})]})]}),i.jsxs(De,{children:[i.jsxs(xt,{className:"pb-2",children:[i.jsx(yt,{className:"text-sm",children:"Voice Accuracy"}),i.jsx(_t,{className:"text-xs",children:"How often your voice commands are understood correctly"})]}),i.jsxs(Ve,{children:[i.jsx(wn,{label:"Total Voice Commands",value:e.voiceCommandsTotal}),i.jsx(wn,{label:"Corrections Needed",value:e.voiceCorrections}),i.jsx(wn,{label:"Correction Rate",value:`${a}%`}),i.jsx(wn,{label:"Last Game Corrections",value:e.lastGameVoiceCorrections})]})]}),i.jsxs(De,{children:[i.jsxs(xt,{className:"pb-2",children:[i.jsx(yt,{className:"text-sm",children:"Mental Clarity"}),i.jsx(_t,{className:"text-xs",children:"Moments when you took much longer than usual - may indicate confusion"})]}),i.jsx(Ve,{children:i.jsx(wn,{label:"Mental Blur Events",value:e.mentalBlurCount})})]}),i.jsxs(De,{children:[i.jsxs(xt,{className:"pb-2",children:[i.jsx(yt,{className:"text-sm",children:"Voice vs Touch"}),i.jsx(_t,{className:"text-xs",children:"How you input your moves during games"})]}),i.jsx(Ve,{children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(on,{className:"h-4 w-4 text-blue-500"}),i.jsxs("span",{className:"font-medium",children:[r.voice,"%"]})]}),i.jsx("div",{className:"flex-1 h-2 bg-muted rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-blue-500",style:{width:`${r.voice}%`}})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"font-medium",children:[r.touch,"%"]}),i.jsx(n2,{className:"h-4 w-4 text-orange-500"})]})]})})]}),h.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-sm font-medium",children:"Insights"}),h.map((v,p)=>i.jsx(Td,{insight:v},p))]})]}),i.jsxs(Xo,{value:"tactical",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[i.jsxs(De,{children:[i.jsxs(xt,{className:"pb-2",children:[i.jsx(yt,{className:"text-sm",children:"Overall Record"}),i.jsx(_t,{className:"text-xs",children:"Your wins, draws, and losses across all games"})]}),i.jsxs(Ve,{children:[i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.wins}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Wins"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-2xl font-bold text-gray-500",children:e.draws}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Draws"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-2xl font-bold text-red-600",children:e.losses}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Losses"})]})]}),i.jsxs("p",{className:"text-xs text-muted-foreground text-center mt-3",children:[e.blindfoldGamesPlayed||0," of ",e.totalGamesPlayed," games were blindfold"]}),i.jsx(Cr,{className:"my-4"}),i.jsx(wn,{label:"Current Win Streak",value:e.currentWinStreak}),i.jsx(wn,{label:"Best Win Streak",value:e.bestWinStreak}),i.jsx(wn,{label:"Fastest Win",value:e.fastestWin>0?`${e.fastestWin} moves`:"-"}),i.jsx(wn,{label:"Longest Game",value:e.longestGame>0?`${e.longestGame} moves`:"-"})]})]}),e.stockfishThresholdElo&&i.jsxs(De,{children:[i.jsxs(xt,{className:"pb-2",children:[i.jsxs(yt,{className:"text-sm flex items-center gap-2",children:[i.jsx(ii,{className:"h-4 w-4 text-amber-500"}),"Stockfish Threshold"]}),i.jsx(_t,{className:"text-xs",children:"The difficulty level where your win rate starts dropping"})]}),i.jsx(Ve,{children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-3xl font-bold text-amber-500",children:e.stockfishThresholdElo}),i.jsxs(Mt,{variant:"outline",className:"mt-2",children:[e.stockfishThresholdElo," Elo"]})]})})]}),i.jsxs(De,{children:[i.jsxs(xt,{className:"pb-2",children:[i.jsxs(yt,{className:"text-sm flex items-center gap-2",children:[i.jsx(Js,{className:"h-4 w-4"}),"Mean Response Time"]}),i.jsx(_t,{className:"text-xs",children:"How quickly you find moves - faster often means clearer visualization"})]}),i.jsxs(Ve,{children:[i.jsx("div",{className:"text-center mb-4",children:i.jsx("p",{className:"text-3xl font-bold",children:Yo(l)})}),i.jsx(Cr,{className:"my-4"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"By Game Phase"}),i.jsx(wn,{label:"Opening (moves 1-10)",value:Yo(s.opening)}),i.jsx(wn,{label:"Middlegame (moves 11-30)",value:Yo(s.middlegame)}),i.jsx(wn,{label:"Endgame (moves 31+)",value:Yo(s.endgame)})]})]})]}),i.jsxs(De,{children:[i.jsxs(xt,{className:"pb-2",children:[i.jsx(yt,{className:"text-sm",children:"Win Rate by Rating"}),i.jsx(_t,{className:"text-xs",children:"Your success rate at each Elo level"})]}),i.jsx(Ve,{children:i.jsx("div",{className:"space-y-2",children:Dm.map(v=>{const p=e.tierStats[v],b=EP(e,v),x=(p==null?void 0:p.totalGames)||0;return x===0?null:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-xs text-muted-foreground w-24 truncate",children:[v," Elo"]}),i.jsx(fi,{value:b,className:"flex-1 h-2"}),i.jsxs("span",{className:"text-xs font-medium w-16 text-right",children:[b,"% (",x,"g)"]})]},v)})})})]}),y.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-sm font-medium",children:"Insights"}),y.map((v,p)=>i.jsx(Td,{insight:v},p))]})]}),i.jsxs(Xo,{value:"training",className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[i.jsxs(De,{children:[i.jsxs(xt,{className:"pb-2",children:[i.jsxs(yt,{className:"text-sm flex items-center gap-2",children:[i.jsx(on,{className:"h-4 w-4 text-purple-500"}),"Voice Move Master"]}),i.jsx(_t,{className:"text-xs",children:"Announce chess moves by voice"})]}),i.jsx(Ve,{children:u&&u.voiceMoveMasterBest!==null?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Personal Best"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(On,{className:"h-4 w-4 text-purple-500"}),i.jsx("span",{className:"text-2xl font-bold text-purple-500",children:u.voiceMoveMasterBest}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"moves"})]})]}),u.voiceMoveMasterBestStreak!==null&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Streak"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(dd,{className:"h-4 w-4 text-orange-500"}),i.jsx("span",{className:"text-lg font-bold text-orange-500",children:u.voiceMoveMasterBestStreak}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"in a row"})]})]}),u.voiceMoveMasterBestDate&&i.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:["Achieved ",new Date(u.voiceMoveMasterBestDate).toLocaleDateString()]}),u.voiceMoveMasterBest>=15?i.jsx(Mt,{className:"bg-purple-500 text-white",children:"Gold Tier"}):u.voiceMoveMasterBest>=8?i.jsx(Mt,{variant:"secondary",children:"Silver Tier"}):i.jsx(Mt,{variant:"outline",children:"Bronze Tier"})]}):i.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete a Voice Move Master session to set your first record!"})})]}),i.jsxs(De,{children:[i.jsxs(xt,{className:"pb-2",children:[i.jsxs(yt,{className:"text-sm flex items-center gap-2",children:[i.jsx(dm,{className:"h-4 w-4 text-amber-500"}),"Color Blitz"]}),i.jsx(_t,{className:"text-xs",children:"Name square colors in 60 seconds"})]}),i.jsx(Ve,{children:u&&u.colorBlitzBest!==null?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Personal Best"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(On,{className:"h-4 w-4 text-amber-500"}),i.jsx("span",{className:"text-2xl font-bold text-amber-500",children:u.colorBlitzBest}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"correct"})]})]}),u.colorBlitzBestStreak!==null&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Streak"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(dd,{className:"h-4 w-4 text-orange-500"}),i.jsx("span",{className:"text-lg font-bold text-orange-500",children:u.colorBlitzBestStreak}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"in a row"})]})]}),u.colorBlitzBestDate&&i.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:["Achieved ",new Date(u.colorBlitzBestDate).toLocaleDateString()]}),u.colorBlitzBest>=40?i.jsx(Mt,{className:"bg-amber-500 text-white",children:"Gold Tier"}):u.colorBlitzBest>=20?i.jsx(Mt,{variant:"secondary",children:"Silver Tier"}):i.jsx(Mt,{variant:"outline",children:"Bronze Tier"})]}):i.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete a Color Blitz session to set your first record!"})})]}),i.jsxs(De,{children:[i.jsxs(xt,{className:"pb-2",children:[i.jsxs(yt,{className:"text-sm flex items-center gap-2",children:[i.jsx(ii,{className:"h-4 w-4 text-blue-500"}),"Coordinate Sniper"]}),i.jsx(_t,{className:"text-xs",children:"Find 10 squares as fast as possible"})]}),i.jsx(Ve,{children:u&&u.coordinateSniperBest!==null?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Personal Best"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(On,{className:"h-4 w-4 text-blue-500"}),i.jsx("span",{className:"text-2xl font-bold text-blue-500",children:CR(u.coordinateSniperBest)})]})]}),u.coordinateSniperBestStreak!==null&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Best Streak"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(dd,{className:"h-4 w-4 text-orange-500"}),i.jsx("span",{className:"text-lg font-bold text-orange-500",children:u.coordinateSniperBestStreak}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"in a row"})]})]}),u.coordinateSniperBestDate&&i.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:["Achieved ",new Date(u.coordinateSniperBestDate).toLocaleDateString()]}),u.coordinateSniperBest<=1e4?i.jsx(Mt,{className:"bg-blue-500 text-white",children:"Gold Tier"}):u.coordinateSniperBest<=2e4?i.jsx(Mt,{variant:"secondary",children:"Silver Tier"}):i.jsx(Mt,{variant:"outline",children:"Bronze Tier"})]}):i.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Complete a Coordinate Sniper session to set your first record!"})})]})]})]})}function ER(e){return e!==null?{comment:e,variations:[]}:{variations:[]}}function TR(e,t,n,r,s){const o={move:e,variations:s};return t&&(o.suffix=t),n&&(o.nag=n),r!==null&&(o.comment=r),o}function PR(...e){const[t,...n]=e;let r=t;for(const s of n)s!==null&&(r.variations=[s,...s.variations],s.variations=[],r=s);return t}function RR(e,t){if(t.marker&&t.marker.comment){let n=t.root;for(;;){const r=n.variations[0];if(!r){n.comment=t.marker.comment;break}n=r}}return{headers:e,root:t.root,result:(t.marker&&t.marker.result)??void 0}}function _R(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function Ei(e,t,n,r){var s=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(s,Ei.prototype),s.expected=t,s.found=n,s.location=r,s.name="SyntaxError",s}_R(Ei,Error);function Pd(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,n+=n.repeat(t),e+n.slice(0,t))}Ei.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n=null,r;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){n=e[r].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,a=this.location.source+":"+o.line+":"+o.column;if(n){var l=this.location.end,c=Pd("",o.line.toString().length," "),u=n[s.line-1],f=s.line===l.line?l.column:u.length+1,m=f-s.column||1;t+=`
 --> `+a+`
`+c+` |
`+o.line+" | "+u+`
`+c+" | "+Pd("",s.column-1," ")+Pd("",m,"^")}else t+=`
 at `+a}return t};Ei.buildMessage=function(e,t){var n={literal:function(u){return'"'+s(u.text)+'"'},class:function(u){var f=u.parts.map(function(m){return Array.isArray(m)?o(m[0])+"-"+o(m[1]):o(m)});return"["+(u.inverted?"^":"")+f.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(u){return u.description}};function r(u){return u.charCodeAt(0).toString(16).toUpperCase()}function s(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(f){return"\\x0"+r(f)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(f){return"\\x"+r(f)})}function o(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(f){return"\\x0"+r(f)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(f){return"\\x"+r(f)})}function a(u){return n[u.type](u)}function l(u){var f=u.map(a),m,h;if(f.sort(),f.length>0){for(m=1,h=1;m<f.length;m++)f[m-1]!==f[m]&&(f[h]=f[m],h++);f.length=h}switch(f.length){case 1:return f[0];case 2:return f[0]+" or "+f[1];default:return f.slice(0,-1).join(", ")+", or "+f[f.length-1]}}function c(u){return u?'"'+s(u)+'"':"end of input"}return"Expected "+l(e)+" but "+c(t)+" found."};function MR(e,t){t=t!==void 0?t:{};var n={},r=t.grammarSource,s={pgn:Fi},o=Fi,a="[",l='"',c="]",u=".",f="O-O-O",m="O-O",h="0-0-0",y="0-0",v="$",p="{",b="}",x=";",g="(",w=")",k="1-0",S="0-1",C="1/2-1/2",N="*",j=/^[a-zA-Z]/,R=/^[^"]/,_=/^[0-9]/,B=/^[.]/,D=/^[a-zA-Z1-8\-=]/,I=/^[+#]/,O=/^[!?]/,F=/^[^}]/,q=/^[^\r\n]/,Q=/^[ \t\r\n]/,T=cn("tag pair"),$=kt("[",!1),W=kt('"',!1),Y=kt("]",!1),be=cn("tag name"),Pe=Vt([["a","z"],["A","Z"]],!1,!1),_e=cn("tag value"),fe=Vt(['"'],!0,!1),L=cn("move number"),z=Vt([["0","9"]],!1,!1),J=kt(".",!1),ie=Vt(["."],!1,!1),ge=cn("standard algebraic notation"),te=kt("O-O-O",!1),ne=kt("O-O",!1),Ne=kt("0-0-0",!1),ae=kt("0-0",!1),$e=Vt([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Me=Vt(["+","#"],!1,!1),Ae=cn("suffix annotation"),Ot=Vt(["!","?"],!1,!1),St=cn("NAG"),vr=kt("$",!1),V=cn("brace comment"),H=kt("{",!1),se=Vt(["}"],!0,!1),le=kt("}",!1),re=cn("rest of line comment"),Te=kt(";",!1),Se=Vt(["\r",`
`],!0,!1),xe=cn("variation"),We=kt("(",!1),Qt=kt(")",!1),Ue=cn("game termination marker"),Yt=kt("1-0",!1),Xt=kt("0-1",!1),Vn=kt("1/2-1/2",!1),En=kt("*",!1),Zt=cn("whitespace"),$t=Vt([" ","	","\r",`
`],!1,!1),Jn=function(E,M){return RR(E,M)},ln=function(E){return Object.fromEntries(E)},Jr=function(E,M){return[E,M]},jo=function(E,M){return{root:E,marker:M}},Mr=function(E,M){return PR(ER(E),...M.flat())},Tn=function(E,M,A,ue,me){return TR(E,M,A,ue,me)},Eo=function(E){return E},Je=function(E){return E.replace(/[\r\n]+/g," ")},Xa=function(E){return E.trim()},Eu=function(E){return E},Tu=function(E,M){return{result:E,comment:M}},P=t.peg$currPos|0,et=[{line:1,column:1}],Dt=P,xr=t.peg$maxFailExpected||[],G=t.peg$silentFails|0,Ds;if(t.startRule){if(!(t.startRule in s))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');o=s[t.startRule]}function kt(E,M){return{type:"literal",text:E,ignoreCase:M}}function Vt(E,M,A){return{type:"class",parts:E,inverted:M,ignoreCase:A}}function es(){return{type:"end"}}function cn(E){return{type:"other",description:E}}function To(E){var M=et[E],A;if(M)return M;if(E>=et.length)A=et.length-1;else for(A=E;!et[--A];);for(M=et[A],M={line:M.line,column:M.column};A<E;)e.charCodeAt(A)===10?(M.line++,M.column=1):M.column++,A++;return et[E]=M,M}function Ar(E,M,A){var ue=To(E),me=To(M),Be={source:r,start:{offset:E,line:ue.line,column:ue.column},end:{offset:M,line:me.line,column:me.column}};return Be}function ce(E){P<Dt||(P>Dt&&(Dt=P,xr=[]),xr.push(E))}function Fs(E,M,A){return new Ei(Ei.buildMessage(E,M),E,M,A)}function Fi(){var E,M,A;return E=P,M=Po(),A=yr(),E=Jn(M,A),E}function Po(){var E,M,A;for(E=P,M=[],A=qn();A!==n;)M.push(A),A=qn();return A=lt(),E=ln(M),E}function qn(){var E,M,A,ue,me,Be,pe;return G++,E=P,lt(),e.charCodeAt(P)===91?(M=a,P++):(M=n,G===0&&ce($)),M!==n?(lt(),A=Bs(),A!==n?(lt(),e.charCodeAt(P)===34?(ue=l,P++):(ue=n,G===0&&ce(W)),ue!==n?(me=Ro(),e.charCodeAt(P)===34?(Be=l,P++):(Be=n,G===0&&ce(W)),Be!==n?(lt(),e.charCodeAt(P)===93?(pe=c,P++):(pe=n,G===0&&ce(Y)),pe!==n?E=Jr(A,me):(P=E,E=n)):(P=E,E=n)):(P=E,E=n)):(P=E,E=n)):(P=E,E=n),G--,E===n&&G===0&&ce(T),E}function Bs(){var E,M,A;if(G++,E=P,M=[],A=e.charAt(P),j.test(A)?P++:(A=n,G===0&&ce(Pe)),A!==n)for(;A!==n;)M.push(A),A=e.charAt(P),j.test(A)?P++:(A=n,G===0&&ce(Pe));else M=n;return M!==n?E=e.substring(E,P):E=M,G--,E===n&&(M=n,G===0&&ce(be)),E}function Ro(){var E,M,A;for(G++,E=P,M=[],A=e.charAt(P),R.test(A)?P++:(A=n,G===0&&ce(fe));A!==n;)M.push(A),A=e.charAt(P),R.test(A)?P++:(A=n,G===0&&ce(fe));return E=e.substring(E,P),G--,M=n,G===0&&ce(_e),E}function yr(){var E,M,A;return E=P,M=Za(),lt(),A=zs(),A===n&&(A=null),lt(),E=jo(M,A),E}function Za(){var E,M,A,ue;for(E=P,M=Bi(),M===n&&(M=null),A=[],ue=Lr();ue!==n;)A.push(ue),ue=Lr();return E=Mr(M,A),E}function Lr(){var E,M,A,ue,me,Be,pe,er;if(E=P,lt(),Pu(),lt(),M=Ru(),M!==n){for(A=_u(),A===n&&(A=null),ue=[],me=Ja();me!==n;)ue.push(me),me=Ja();for(me=lt(),Be=Bi(),Be===n&&(Be=null),pe=[],er=_o();er!==n;)pe.push(er),er=_o();E=Tn(M,A,ue,Be,pe)}else P=E,E=n;return E}function Pu(){var E,M,A,ue,me,Be;for(G++,E=P,M=[],A=e.charAt(P),_.test(A)?P++:(A=n,G===0&&ce(z));A!==n;)M.push(A),A=e.charAt(P),_.test(A)?P++:(A=n,G===0&&ce(z));if(e.charCodeAt(P)===46?(A=u,P++):(A=n,G===0&&ce(J)),A!==n){for(ue=lt(),me=[],Be=e.charAt(P),B.test(Be)?P++:(Be=n,G===0&&ce(ie));Be!==n;)me.push(Be),Be=e.charAt(P),B.test(Be)?P++:(Be=n,G===0&&ce(ie));M=[M,A,ue,me],E=M}else P=E,E=n;return G--,E===n&&(M=n,G===0&&ce(L)),E}function Ru(){var E,M,A,ue,me,Be;if(G++,E=P,M=P,e.substr(P,5)===f?(A=f,P+=5):(A=n,G===0&&ce(te)),A===n&&(e.substr(P,3)===m?(A=m,P+=3):(A=n,G===0&&ce(ne)),A===n&&(e.substr(P,5)===h?(A=h,P+=5):(A=n,G===0&&ce(Ne)),A===n&&(e.substr(P,3)===y?(A=y,P+=3):(A=n,G===0&&ce(ae)),A===n))))if(A=P,ue=e.charAt(P),j.test(ue)?P++:(ue=n,G===0&&ce(Pe)),ue!==n){if(me=[],Be=e.charAt(P),D.test(Be)?P++:(Be=n,G===0&&ce($e)),Be!==n)for(;Be!==n;)me.push(Be),Be=e.charAt(P),D.test(Be)?P++:(Be=n,G===0&&ce($e));else me=n;me!==n?(ue=[ue,me],A=ue):(P=A,A=n)}else P=A,A=n;return A!==n?(ue=e.charAt(P),I.test(ue)?P++:(ue=n,G===0&&ce(Me)),ue===n&&(ue=null),A=[A,ue],M=A):(P=M,M=n),M!==n?E=e.substring(E,P):E=M,G--,E===n&&(M=n,G===0&&ce(ge)),E}function _u(){var E,M,A;for(G++,E=P,M=[],A=e.charAt(P),O.test(A)?P++:(A=n,G===0&&ce(Ot));A!==n;)M.push(A),M.length>=2?A=n:(A=e.charAt(P),O.test(A)?P++:(A=n,G===0&&ce(Ot)));return M.length<1?(P=E,E=n):E=M,G--,E===n&&(M=n,G===0&&ce(Ae)),E}function Ja(){var E,M,A,ue,me;if(G++,E=P,lt(),e.charCodeAt(P)===36?(M=v,P++):(M=n,G===0&&ce(vr)),M!==n){if(A=P,ue=[],me=e.charAt(P),_.test(me)?P++:(me=n,G===0&&ce(z)),me!==n)for(;me!==n;)ue.push(me),me=e.charAt(P),_.test(me)?P++:(me=n,G===0&&ce(z));else ue=n;ue!==n?A=e.substring(A,P):A=ue,A!==n?E=Eo(A):(P=E,E=n)}else P=E,E=n;return G--,E===n&&G===0&&ce(St),E}function Bi(){var E;return E=zi(),E===n&&(E=Mu()),E}function zi(){var E,M,A,ue,me;if(G++,E=P,e.charCodeAt(P)===123?(M=p,P++):(M=n,G===0&&ce(H)),M!==n){for(A=P,ue=[],me=e.charAt(P),F.test(me)?P++:(me=n,G===0&&ce(se));me!==n;)ue.push(me),me=e.charAt(P),F.test(me)?P++:(me=n,G===0&&ce(se));A=e.substring(A,P),e.charCodeAt(P)===125?(ue=b,P++):(ue=n,G===0&&ce(le)),ue!==n?E=Je(A):(P=E,E=n)}else P=E,E=n;return G--,E===n&&(M=n,G===0&&ce(V)),E}function Mu(){var E,M,A,ue,me;if(G++,E=P,e.charCodeAt(P)===59?(M=x,P++):(M=n,G===0&&ce(Te)),M!==n){for(A=P,ue=[],me=e.charAt(P),q.test(me)?P++:(me=n,G===0&&ce(Se));me!==n;)ue.push(me),me=e.charAt(P),q.test(me)?P++:(me=n,G===0&&ce(Se));A=e.substring(A,P),E=Xa(A)}else P=E,E=n;return G--,E===n&&(M=n,G===0&&ce(re)),E}function _o(){var E,M,A,ue;return G++,E=P,lt(),e.charCodeAt(P)===40?(M=g,P++):(M=n,G===0&&ce(We)),M!==n?(A=Za(),A!==n?(lt(),e.charCodeAt(P)===41?(ue=w,P++):(ue=n,G===0&&ce(Qt)),ue!==n?E=Eu(A):(P=E,E=n)):(P=E,E=n)):(P=E,E=n),G--,E===n&&G===0&&ce(xe),E}function zs(){var E,M,A;return G++,E=P,e.substr(P,3)===k?(M=k,P+=3):(M=n,G===0&&ce(Yt)),M===n&&(e.substr(P,3)===S?(M=S,P+=3):(M=n,G===0&&ce(Xt)),M===n&&(e.substr(P,7)===C?(M=C,P+=7):(M=n,G===0&&ce(Vn)),M===n&&(e.charCodeAt(P)===42?(M=N,P++):(M=n,G===0&&ce(En))))),M!==n?(lt(),A=Bi(),A===n&&(A=null),E=Tu(M,A)):(P=E,E=n),G--,E===n&&(M=n,G===0&&ce(Ue)),E}function lt(){var E,M;for(G++,E=[],M=e.charAt(P),Q.test(M)?P++:(M=n,G===0&&ce($t));M!==n;)E.push(M),M=e.charAt(P),Q.test(M)?P++:(M=n,G===0&&ce($t));return G--,M=n,G===0&&ce(Zt),E}if(Ds=o(),t.peg$library)return{peg$result:Ds,peg$currPos:P,peg$FAILED:n,peg$maxFailExpected:xr,peg$maxFailPos:Dt};if(Ds!==n&&P===e.length)return Ds;throw Ds!==n&&P<e.length&&ce(es()),Fs(xr,Dt<e.length?e.charAt(Dt):null,Dt<e.length?Ar(Dt,Dt+1):Ar(Dt,Dt))}/**
 * @license
 * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const Jl=0xffffffffffffffffn;function Rd(e,t){return(e<<t|e>>64n-t)&0xffffffffffffffffn}function rv(e,t){return e*t&Jl}function AR(e){return function(){let t=BigInt(e&Jl),n=BigInt(e>>64n&Jl);const r=rv(Rd(rv(t,5n),7n),9n);return n^=t,t=(Rd(t,24n)^n^n<<16n)&Jl,n=Rd(n,37n),e=n<<64n|t,r}}const bu=AR(0xa187eb39cdcaed8f31c4b365b102e01en),LR=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>bu()))),IR=Array.from({length:8},()=>bu()),OR=Array.from({length:16},()=>bu()),_d=bu(),nn="w",_n="b",jt="p",Jf="n",ec="b",ia="r",ds="q",Rt="k",Md="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Rl{constructor(t,n){it(this,"color");it(this,"from");it(this,"to");it(this,"piece");it(this,"captured");it(this,"promotion");it(this,"flags");it(this,"san");it(this,"lan");it(this,"before");it(this,"after");const{color:r,piece:s,from:o,to:a,flags:l,captured:c,promotion:u}=n,f=Ft(o),m=Ft(a);this.color=r,this.piece=s,this.from=f,this.to=m,this.san=t._moveToSan(n,t._moves({legal:!0})),this.lan=f+m,this.before=t.fen(),t._makeMove(n),this.after=t.fen(),t._undoMove(),this.flags="";for(const h in Ce)Ce[h]&l&&(this.flags+=Us[h]);c&&(this.captured=c),u&&(this.promotion=u,this.lan+=u)}isCapture(){return this.flags.indexOf(Us.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(Us.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(Us.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(Us.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(Us.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(Us.BIG_PAWN)>-1}}const qt=-1,Us={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},Ce={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},eh={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},$R={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},DR={...eh,...$R},ke={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Ad={b:[16,32,17,15],w:[-16,-32,-17,-15]},sv={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},FR=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],BR=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],zR={p:1,n:2,b:4,r:8,q:16,k:32},VR="pnbrqkPNBRQK",ov=[Jf,ec,ia,ds],qR=7,UR=6,WR=1,HR=0,_l={[Rt]:Ce.KSIDE_CASTLE,[ds]:Ce.QSIDE_CASTLE},os={w:[{square:ke.a1,flag:Ce.QSIDE_CASTLE},{square:ke.h1,flag:Ce.KSIDE_CASTLE}],b:[{square:ke.a8,flag:Ce.QSIDE_CASTLE},{square:ke.h8,flag:Ce.KSIDE_CASTLE}]},GR={b:WR,w:UR},Ld="--";function to(e){return e>>4}function Fa(e){return e&15}function db(e){return"0123456789".indexOf(e)!==-1}function Ft(e){const t=Fa(e),n=to(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function ea(e){return e===nn?_n:nn}function KR(e){const t=e.split(/\s+/);if(t.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(t[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(t[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const s=t[0].split("/");if(s.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let a=0;a<s.length;a++){let l=0,c=!1;for(let u=0;u<s[a].length;u++)if(db(s[a][u])){if(c)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};l+=parseInt(s[a][u],10),c=!0}else{if(!/^[prnbqkPRNBQK]$/.test(s[a][u]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};l+=1,c=!1}if(l!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(t[3][1]=="3"&&t[1]=="w"||t[3][1]=="6"&&t[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const o=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:a,regex:l}of o){if(!l.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${a} king`};if((t[0].match(l)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${a} kings`}}return Array.from(s[0]+s[7]).some(a=>a.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function QR(e,t){const n=e.from,r=e.to,s=e.piece;let o=0,a=0,l=0;for(let c=0,u=t.length;c<u;c++){const f=t[c].from,m=t[c].to,h=t[c].piece;s===h&&n!==f&&r===m&&(o++,to(n)===to(f)&&a++,Fa(n)===Fa(f)&&l++)}return o>0?a>0&&l>0?Ft(n):l>0?Ft(n).charAt(1):Ft(n).charAt(0):""}function is(e,t,n,r,s,o=void 0,a=Ce.NORMAL){const l=to(r);if(s===jt&&(l===qR||l===HR))for(let c=0;c<ov.length;c++){const u=ov[c];e.push({color:t,from:n,to:r,piece:s,captured:o,promotion:u,flags:a|Ce.PROMOTION})}else e.push({color:t,from:n,to:r,piece:s,captured:o,flags:a})}function iv(e){let t=e.charAt(0);return t>="a"&&t<="h"?e.match(/[a-h]\d.*[a-h]\d/)?void 0:jt:(t=t.toLowerCase(),t==="o"?Rt:t)}function Id(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class qr{constructor(t=Md,{skipValidation:n=!1}={}){it(this,"_board",new Array(128));it(this,"_turn",nn);it(this,"_header",{});it(this,"_kings",{w:qt,b:qt});it(this,"_epSquare",-1);it(this,"_halfMoves",0);it(this,"_moveNumber",0);it(this,"_history",[]);it(this,"_comments",{});it(this,"_castling",{w:0,b:0});it(this,"_hash",0n);it(this,"_positionCount",new Map);this.load(t,{skipValidation:n})}clear({preserveHeaders:t=!1}={}){this._board=new Array(128),this._kings={w:qt,b:qt},this._turn=nn,this._castling={w:0,b:0},this._epSquare=qt,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=t?this._header:{...DR},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(t,{skipValidation:n=!1,preserveHeaders:r=!1}={}){let s=t.split(/\s+/);if(s.length>=2&&s.length<6){const l=["-","-","0","1"];t=s.concat(l.slice(-(6-s.length))).join(" ")}if(s=t.split(/\s+/),!n){const{ok:l,error:c}=KR(t);if(!l)throw new Error(c)}const o=s[0];let a=0;this.clear({preserveHeaders:r});for(let l=0;l<o.length;l++){const c=o.charAt(l);if(c==="/")a+=8;else if(db(c))a+=parseInt(c,10);else{const u=c<"a"?nn:_n;this._put({type:c.toLowerCase(),color:u},Ft(a)),a++}}this._turn=s[1],s[2].indexOf("K")>-1&&(this._castling.w|=Ce.KSIDE_CASTLE),s[2].indexOf("Q")>-1&&(this._castling.w|=Ce.QSIDE_CASTLE),s[2].indexOf("k")>-1&&(this._castling.b|=Ce.KSIDE_CASTLE),s[2].indexOf("q")>-1&&(this._castling.b|=Ce.QSIDE_CASTLE),this._epSquare=s[3]==="-"?qt:ke[s[3]],this._halfMoves=parseInt(s[4],10),this._moveNumber=parseInt(s[5],10),this._hash=this._computeHash(),this._updateSetup(t),this._incPositionCount()}fen({forceEnpassantSquare:t=!1}={}){var a,l;let n=0,r="";for(let c=ke.a8;c<=ke.h1;c++){if(this._board[c]){n>0&&(r+=n,n=0);const{color:u,type:f}=this._board[c];r+=u===nn?f.toUpperCase():f.toLowerCase()}else n++;c+1&136&&(n>0&&(r+=n),c!==ke.h1&&(r+="/"),n=0,c+=8)}let s="";this._castling[nn]&Ce.KSIDE_CASTLE&&(s+="K"),this._castling[nn]&Ce.QSIDE_CASTLE&&(s+="Q"),this._castling[_n]&Ce.KSIDE_CASTLE&&(s+="k"),this._castling[_n]&Ce.QSIDE_CASTLE&&(s+="q"),s=s||"-";let o="-";if(this._epSquare!==qt)if(t)o=Ft(this._epSquare);else{const c=this._epSquare+(this._turn===nn?16:-16),u=[c+1,c-1];for(const f of u){if(f&136)continue;const m=this._turn;if(((a=this._board[f])==null?void 0:a.color)===m&&((l=this._board[f])==null?void 0:l.type)===jt){this._makeMove({color:m,from:f,to:this._epSquare,piece:jt,captured:jt,flags:Ce.EP_CAPTURE});const h=!this._isKingAttacked(m);if(this._undoMove(),h){o=Ft(this._epSquare);break}}}}return[r,this._turn,s,o,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(t){if(!this._board[t])return 0n;const{color:n,type:r}=this._board[t],s={w:0,b:1}[n],o={p:0,n:1,b:2,r:3,q:4,k:5}[r];return LR[s][o][t]}_epKey(){return this._epSquare===qt?0n:IR[this._epSquare&7]}_castlingKey(){const t=this._castling.w>>5|this._castling.b>>3;return OR[t]}_computeHash(){let t=0n;for(let n=ke.a8;n<=ke.h1;n++){if(n&136){n+=7;continue}this._board[n]&&(t^=this._pieceKey(n))}return t^=this._epKey(),t^=this._castlingKey(),this._turn==="b"&&(t^=_d),t}_updateSetup(t){this._history.length>0||(t!==Md?(this._header.SetUp="1",this._header.FEN=t):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(Md)}get(t){return this._board[ke[t]]}findPiece(t){var r;const n=[];for(let s=ke.a8;s<=ke.h1;s++){if(s&136){s+=7;continue}!this._board[s]||((r=this._board[s])==null?void 0:r.color)!==t.color||this._board[s].color===t.color&&this._board[s].type===t.type&&n.push(Ft(s))}return n}put({type:t,color:n},r){return this._put({type:t,color:n},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(t,n){this._hash^=this._pieceKey(t),this._board[t]=n,this._hash^=this._pieceKey(t)}_put({type:t,color:n},r){if(VR.indexOf(t.toLowerCase())===-1||!(r in ke))return!1;const s=ke[r];if(t==Rt&&!(this._kings[n]==qt||this._kings[n]==s))return!1;const o=this._board[s];return o&&o.type===Rt&&(this._kings[o.color]=qt),this._set(s,{type:t,color:n}),t===Rt&&(this._kings[n]=s),!0}_clear(t){this._hash^=this._pieceKey(t),delete this._board[t]}remove(t){const n=this.get(t);return this._clear(ke[t]),n&&n.type===Rt&&(this._kings[n.color]=qt),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){var r,s,o,a,l,c,u,f,m,h,y,v;this._hash^=this._castlingKey();const t=((r=this._board[ke.e1])==null?void 0:r.type)===Rt&&((s=this._board[ke.e1])==null?void 0:s.color)===nn,n=((o=this._board[ke.e8])==null?void 0:o.type)===Rt&&((a=this._board[ke.e8])==null?void 0:a.color)===_n;(!t||((l=this._board[ke.a1])==null?void 0:l.type)!==ia||((c=this._board[ke.a1])==null?void 0:c.color)!==nn)&&(this._castling.w&=-65),(!t||((u=this._board[ke.h1])==null?void 0:u.type)!==ia||((f=this._board[ke.h1])==null?void 0:f.color)!==nn)&&(this._castling.w&=-33),(!n||((m=this._board[ke.a8])==null?void 0:m.type)!==ia||((h=this._board[ke.a8])==null?void 0:h.color)!==_n)&&(this._castling.b&=-65),(!n||((y=this._board[ke.h8])==null?void 0:y.type)!==ia||((v=this._board[ke.h8])==null?void 0:v.color)!==_n)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){var o,a;if(this._epSquare===qt)return;const t=this._epSquare+(this._turn===nn?-16:16),n=this._epSquare+(this._turn===nn?16:-16),r=[n+1,n-1];if(this._board[t]!==null||this._board[this._epSquare]!==null||((o=this._board[n])==null?void 0:o.color)!==ea(this._turn)||((a=this._board[n])==null?void 0:a.type)!==jt){this._hash^=this._epKey(),this._epSquare=qt;return}const s=l=>{var c,u;return!(l&136)&&((c=this._board[l])==null?void 0:c.color)===this._turn&&((u=this._board[l])==null?void 0:u.type)===jt};r.some(s)||(this._hash^=this._epKey(),this._epSquare=qt)}_attacked(t,n,r){const s=[];for(let o=ke.a8;o<=ke.h1;o++){if(o&136){o+=7;continue}if(this._board[o]===void 0||this._board[o].color!==t)continue;const a=this._board[o],l=o-n;if(l===0)continue;const c=l+119;if(FR[c]&zR[a.type]){if(a.type===jt){if(l>0&&a.color===nn||l<=0&&a.color===_n)if(r)s.push(Ft(o));else return!0;continue}if(a.type==="n"||a.type==="k")if(r){s.push(Ft(o));continue}else return!0;const u=BR[c];let f=o+u,m=!1;for(;f!==n;){if(this._board[f]!=null){m=!0;break}f+=u}if(!m)if(r){s.push(Ft(o));continue}else return!0}}return r?s:!1}attackers(t,n){return n?this._attacked(n,ke[t],!0):this._attacked(this._turn,ke[t],!0)}_isKingAttacked(t){const n=this._kings[t];return n===-1?!1:this._attacked(ea(t),n)}hash(){return this._hash.toString(16)}isAttacked(t,n){return this._attacked(n,ke[t])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const t={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let r=0,s=0;for(let o=ke.a8;o<=ke.h1;o++){if(s=(s+1)%2,o&136){o+=7;continue}const a=this._board[o];a&&(t[a.type]=a.type in t?t[a.type]+1:1,a.type===ec&&n.push(s),r++)}if(r===2)return!0;if(r===3&&(t[ec]===1||t[Jf]===1))return!0;if(r===t[ec]+2){let o=0;const a=n.length;for(let l=0;l<a;l++)o+=n[l];if(o===0||o===a)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:t=!1,square:n=void 0,piece:r=void 0}={}){const s=this._moves({square:n,piece:r});return t?s.map(o=>new Rl(this,o)):s.map(o=>this._moveToSan(o,s))}_moves({legal:t=!0,piece:n=void 0,square:r=void 0}={}){var y;const s=r?r.toLowerCase():void 0,o=n==null?void 0:n.toLowerCase(),a=[],l=this._turn,c=ea(l);let u=ke.a8,f=ke.h1,m=!1;if(s)if(s in ke)u=f=ke[s],m=!0;else return[];for(let v=u;v<=f;v++){if(v&136){v+=7;continue}if(!this._board[v]||this._board[v].color===c)continue;const{type:p}=this._board[v];let b;if(p===jt){if(o&&o!==p)continue;b=v+Ad[l][0],this._board[b]||(is(a,l,v,b,jt),b=v+Ad[l][1],GR[l]===to(v)&&!this._board[b]&&is(a,l,v,b,jt,void 0,Ce.BIG_PAWN));for(let x=2;x<4;x++)b=v+Ad[l][x],!(b&136)&&(((y=this._board[b])==null?void 0:y.color)===c?is(a,l,v,b,jt,this._board[b].type,Ce.CAPTURE):b===this._epSquare&&is(a,l,v,b,jt,jt,Ce.EP_CAPTURE))}else{if(o&&o!==p)continue;for(let x=0,g=sv[p].length;x<g;x++){const w=sv[p][x];for(b=v;b+=w,!(b&136);){if(!this._board[b])is(a,l,v,b,p);else{if(this._board[b].color===l)break;is(a,l,v,b,p,this._board[b].type,Ce.CAPTURE);break}if(p===Jf||p===Rt)break}}}}if((o===void 0||o===Rt)&&(!m||f===this._kings[l])){if(this._castling[l]&Ce.KSIDE_CASTLE){const v=this._kings[l],p=v+2;!this._board[v+1]&&!this._board[p]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,v+1)&&!this._attacked(c,p)&&is(a,l,this._kings[l],p,Rt,void 0,Ce.KSIDE_CASTLE)}if(this._castling[l]&Ce.QSIDE_CASTLE){const v=this._kings[l],p=v-2;!this._board[v-1]&&!this._board[v-2]&&!this._board[v-3]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,v-1)&&!this._attacked(c,p)&&is(a,l,this._kings[l],p,Rt,void 0,Ce.QSIDE_CASTLE)}}if(!t||this._kings[l]===-1)return a;const h=[];for(let v=0,p=a.length;v<p;v++)this._makeMove(a[v]),this._isKingAttacked(l)||h.push(a[v]),this._undoMove();return h}move(t,{strict:n=!1}={}){let r=null;if(typeof t=="string")r=this._moveFromSan(t,n);else if(t===null)r=this._moveFromSan(Ld,n);else if(typeof t=="object"){const o=this._moves();for(let a=0,l=o.length;a<l;a++)if(t.from===Ft(o[a].from)&&t.to===Ft(o[a].to)&&(!("promotion"in o[a])||t.promotion===o[a].promotion)){r=o[a];break}}if(!r)throw typeof t=="string"?new Error(`Invalid move: ${t}`):new Error(`Invalid move: ${JSON.stringify(t)}`);if(this.isCheck()&&r.flags&Ce.NULL_MOVE)throw new Error("Null move not allowed when in check");const s=new Rl(this,r);return this._makeMove(r),this._incPositionCount(),s}_push(t){this._history.push({move:t,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(t,n){this._hash^=this._pieceKey(t),this._board[n]=this._board[t],delete this._board[t],this._hash^=this._pieceKey(n)}_makeMove(t){var s,o,a,l;const n=this._turn,r=ea(n);if(this._push(t),t.flags&Ce.NULL_MOVE){n===_n&&this._moveNumber++,this._halfMoves++,this._turn=r,this._epSquare=qt;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),t.captured&&(this._hash^=this._pieceKey(t.to)),this._movePiece(t.from,t.to),t.flags&Ce.EP_CAPTURE&&(this._turn===_n?this._clear(t.to-16):this._clear(t.to+16)),t.promotion&&(this._clear(t.to),this._set(t.to,{type:t.promotion,color:n})),this._board[t.to].type===Rt){if(this._kings[n]=t.to,t.flags&Ce.KSIDE_CASTLE){const c=t.to-1,u=t.to+1;this._movePiece(u,c)}else if(t.flags&Ce.QSIDE_CASTLE){const c=t.to+1,u=t.to-2;this._movePiece(u,c)}this._castling[n]=0}if(this._castling[n]){for(let c=0,u=os[n].length;c<u;c++)if(t.from===os[n][c].square&&this._castling[n]&os[n][c].flag){this._castling[n]^=os[n][c].flag;break}}if(this._castling[r]){for(let c=0,u=os[r].length;c<u;c++)if(t.to===os[r][c].square&&this._castling[r]&os[r][c].flag){this._castling[r]^=os[r][c].flag;break}}if(this._hash^=this._castlingKey(),t.flags&Ce.BIG_PAWN){let c;n===_n?c=t.to-16:c=t.to+16,!(t.to-1&136)&&((s=this._board[t.to-1])==null?void 0:s.type)===jt&&((o=this._board[t.to-1])==null?void 0:o.color)===r||!(t.to+1&136)&&((a=this._board[t.to+1])==null?void 0:a.type)===jt&&((l=this._board[t.to+1])==null?void 0:l.color)===r?(this._epSquare=c,this._hash^=this._epKey()):this._epSquare=qt}else this._epSquare=qt;t.piece===jt?this._halfMoves=0:t.flags&(Ce.CAPTURE|Ce.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===_n&&this._moveNumber++,this._turn=r,this._hash^=_d}undo(){const t=this._hash,n=this._undoMove();if(n){const r=new Rl(this,n);return this._decPositionCount(t),r}return null}_undoMove(){const t=this._history.pop();if(t===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const n=t.move;this._kings=t.kings,this._turn=t.turn,this._castling=t.castling,this._epSquare=t.epSquare,this._halfMoves=t.halfMoves,this._moveNumber=t.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=_d;const r=this._turn,s=ea(r);if(n.flags&Ce.NULL_MOVE)return n;if(this._movePiece(n.to,n.from),n.piece&&(this._clear(n.from),this._set(n.from,{type:n.piece,color:r})),n.captured)if(n.flags&Ce.EP_CAPTURE){let o;r===_n?o=n.to-16:o=n.to+16,this._set(o,{type:jt,color:s})}else this._set(n.to,{type:n.captured,color:s});if(n.flags&(Ce.KSIDE_CASTLE|Ce.QSIDE_CASTLE)){let o,a;n.flags&Ce.KSIDE_CASTLE?(o=n.to+1,a=n.to-1):(o=n.to-2,a=n.to+1),this._movePiece(a,o)}return n}pgn({newline:t=`
`,maxWidth:n=0}={}){const r=[];let s=!1;for(const h in this._header)this._header[h]&&r.push(`[${h} "${this._header[h]}"]`+t),s=!0;s&&this._history.length&&r.push(t);const o=h=>{const y=this._comments[this.fen()];if(typeof y<"u"){const v=h.length>0?" ":"";h=`${h}${v}{${y}}`}return h},a=[];for(;this._history.length>0;)a.push(this._undoMove());const l=[];let c="";for(a.length===0&&l.push(o(""));a.length>0;){c=o(c);const h=a.pop();if(!h)break;if(!this._history.length&&h.color==="b"){const y=`${this._moveNumber}. ...`;c=c?`${c} ${y}`:y}else h.color==="w"&&(c.length&&l.push(c),c=this._moveNumber+".");c=c+" "+this._moveToSan(h,this._moves({legal:!0})),this._makeMove(h)}if(c.length&&l.push(o(c)),l.push(this._header.Result||"*"),n===0)return r.join("")+l.join(" ");const u=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},f=function(h,y){for(const v of y.split(" "))if(v){if(h+v.length>n){for(;u();)h--;r.push(t),h=0}r.push(v),h+=v.length,r.push(" "),h++}return u()&&h--,h};let m=0;for(let h=0;h<l.length;h++){if(m+l[h].length>n&&l[h].includes("{")){m=f(m,l[h]);continue}m+l[h].length>n&&h!==0?(r[r.length-1]===" "&&r.pop(),r.push(t),m=0):h!==0&&(r.push(" "),m++),r.push(l[h]),m+=l[h].length}return r.join("")}header(...t){for(let n=0;n<t.length;n+=2)typeof t[n]=="string"&&typeof t[n+1]=="string"&&(this._header[t[n]]=t[n+1]);return this._header}setHeader(t,n){return this._header[t]=n??eh[t]??null,this.getHeaders()}removeHeader(t){return t in this._header?(this._header[t]=eh[t]||null,!0):!1}getHeaders(){const t={};for(const[n,r]of Object.entries(this._header))r!==null&&(t[n]=r);return t}loadPgn(t,{strict:n=!1,newlineChar:r=`\r?
`}={}){r!==`\r?
`&&(t=t.replace(new RegExp(r,"g"),`
`));const s=MR(t);this.reset();const o=s.headers;let a="";for(const u in o)u.toLowerCase()==="fen"&&(a=o[u]),this.header(u,o[u]);if(!n)a&&this.load(a,{preserveHeaders:!0});else if(o.SetUp==="1"){if(!("FEN"in o))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(o.FEN,{preserveHeaders:!0})}let l=s.root;for(;l;){if(l.move){const u=this._moveFromSan(l.move,n);if(u==null)throw new Error(`Invalid move in PGN: ${l.move}`);this._makeMove(u),this._incPositionCount()}l.comment!==void 0&&(this._comments[this.fen()]=l.comment),l=l.variations[0]}const c=s.result;c&&Object.keys(this._header).length&&this._header.Result!==c&&this.setHeader("Result",c)}_moveToSan(t,n){let r="";if(t.flags&Ce.KSIDE_CASTLE)r="O-O";else if(t.flags&Ce.QSIDE_CASTLE)r="O-O-O";else{if(t.flags&Ce.NULL_MOVE)return Ld;if(t.piece!==jt){const s=QR(t,n);r+=t.piece.toUpperCase()+s}t.flags&(Ce.CAPTURE|Ce.EP_CAPTURE)&&(t.piece===jt&&(r+=Ft(t.from)[0]),r+="x"),r+=Ft(t.to),t.promotion&&(r+="="+t.promotion.toUpperCase())}return this._makeMove(t),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(t,n=!1){let r=Id(t);if(n||(r==="0-0"?r="O-O":r==="0-0-0"&&(r="O-O-O")),r==Ld)return{color:this._turn,from:0,to:0,piece:"k",flags:Ce.NULL_MOVE};let s=iv(r),o=this._moves({legal:!0,piece:s});for(let h=0,y=o.length;h<y;h++)if(r===Id(this._moveToSan(o[h],o)))return o[h];if(n)return null;let a,l,c,u,f,m=!1;if(l=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),l?(a=l[1],c=l[2],u=l[3],f=l[4],c.length==1&&(m=!0)):(l=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),l&&(a=l[1],c=l[2],u=l[3],f=l[4],c.length==1&&(m=!0))),s=iv(r),o=this._moves({legal:!0,piece:a||s}),!u)return null;for(let h=0,y=o.length;h<y;h++)if(c){if((!a||a.toLowerCase()==o[h].piece)&&ke[c]==o[h].from&&ke[u]==o[h].to&&(!f||f.toLowerCase()==o[h].promotion))return o[h];if(m){const v=Ft(o[h].from);if((!a||a.toLowerCase()==o[h].piece)&&ke[u]==o[h].to&&(c==v[0]||c==v[1])&&(!f||f.toLowerCase()==o[h].promotion))return o[h]}}else if(r===Id(this._moveToSan(o[h],o)).replace("x",""))return o[h];return null}ascii(){let t=`   +------------------------+
`;for(let n=ke.a8;n<=ke.h1;n++){if(Fa(n)===0&&(t+=" "+"87654321"[to(n)]+" |"),this._board[n]){const r=this._board[n].type,o=this._board[n].color===nn?r.toUpperCase():r.toLowerCase();t+=" "+o+" "}else t+=" . ";n+1&136&&(t+=`|
`,n+=8)}return t+=`   +------------------------+
`,t+="     a  b  c  d  e  f  g  h",t}perft(t){const n=this._moves({legal:!1});let r=0;const s=this._turn;for(let o=0,a=n.length;o<a;o++)this._makeMove(n[o]),this._isKingAttacked(s)||(t-1>0?r+=this.perft(t-1):r++),this._undoMove();return r}setTurn(t){return this._turn==t?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const t=[];let n=[];for(let r=ke.a8;r<=ke.h1;r++)this._board[r]==null?n.push(null):n.push({square:Ft(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(t.push(n),n=[],r+=8);return t}squareColor(t){if(t in ke){const n=ke[t];return(to(n)+Fa(n))%2===0?"light":"dark"}return null}history({verbose:t=!1}={}){const n=[],r=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const s=n.pop();if(!s)break;t?r.push(new Rl(this,s)):r.push(this._moveToSan(s,this._moves())),this._makeMove(s)}return r}_getPositionCount(t){return this._positionCount.get(t)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(t){const n=this._positionCount.get(t)??0;n===1?this._positionCount.delete(t):this._positionCount.set(t,n-1)}_pruneComments(){const t=[],n={},r=s=>{s in this._comments&&(n[s]=this._comments[s])};for(;this._history.length>0;)t.push(this._undoMove());for(r(this.fen());;){const s=t.pop();if(!s)break;this._makeMove(s),r(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(t){this._comments[this.fen()]=t.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const t=this._comments[this.fen()];return delete this._comments[this.fen()],t}getComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>({fen:t,comment:this._comments[t]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>{const n=this._comments[t];return delete this._comments[t],{fen:t,comment:n}})}setCastlingRights(t,n){for(const s of[Rt,ds])n[s]!==void 0&&(n[s]?this._castling[t]|=_l[s]:this._castling[t]&=~_l[s]);this._updateCastlingRights();const r=this.getCastlingRights(t);return(n[Rt]===void 0||n[Rt]===r[Rt])&&(n[ds]===void 0||n[ds]===r[ds])}getCastlingRights(t){return{[Rt]:(this._castling[t]&_l[Rt])!==0,[ds]:(this._castling[t]&_l[ds])!==0}}moveNumber(){return this._moveNumber}}const Zo=["a","b","c","d","e","f","g","h"],Ml=["8","7","6","5","4","3","2","1"],Fc=e=>({file:Zo.indexOf(e[0]),rank:parseInt(e[1])-1}),av=(e,t)=>`${Zo[e]}${t+1}`,YR=(e,t)=>{const n=Fc(e),r=Fc(t),s=Math.abs(r.file-n.file),o=Math.abs(r.rank-n.rank);return s===2&&o===1||s===1&&o===2},XR=(e,t)=>{const n=Fc(e),r=Fc(t),s=r.file-n.file;return Math.abs(s)===2?av(r.file,n.rank):av(n.file,r.rank)},ZR={K:"/pieces/wK.svg",Q:"/pieces/wQ.svg",R:"/pieces/wR.svg",B:"/pieces/wB.svg",N:"/pieces/wN.svg",P:"/pieces/wP.svg",k:"/pieces/bK.svg",q:"/pieces/bQ.svg",r:"/pieces/bR.svg",b:"/pieces/bB.svg",n:"/pieces/bN.svg",p:"/pieces/bP.svg"};function JR({fen:e="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",orientation:t="white",showCoordinates:n=!0,highlightedSquares:r=[],legalMoveSquares:s=[],lastMoveSquares:o=[],lastMove:a,selectedSquare:l=null,lockedPiece:c=null,onSquareClick:u,onMove:f,interactionMode:m="free",className:h="",noCard:y=!1,enableArrows:v=!0,enablePremoves:p=!1,isPlayerTurn:b=!0,premove:x=null,onPremove:g,arrowDrawMode:w=!1,highlightColor:k="yellow",customHighlightColors:S,hideSelectionHighlight:C=!1}){const N=(S==null?void 0:S.selectedPiece)||(k==="red"?"#ef4444":"#facc15"),j=(S==null?void 0:S.lastMove)||"#f97316",R=(S==null?void 0:S.availableMoves)||"#fbbf24",[_,B]=d.useState(null),D=l!==null?l:_,[I,O]=d.useState([]),[F,q]=d.useState(null),[Q,T]=d.useState(!1),[$,W]=d.useState(null),Y=d.useRef(null),be=a?[a.from,a.to]:o;d.useEffect(()=>{B(null)},[e]),d.useEffect(()=>{w||W(null)},[w]);const _e=(V=>{const H=V.split(" ")[0].split("/"),se=[];for(const le of H){const re=[];for(const Te of le)if(isNaN(parseInt(Te)))re.push(Te);else for(let Se=0;Se<parseInt(Te);Se++)re.push(null);se.push(re)}return se})(e),fe=t==="white"?Ml:[...Ml].reverse(),L=t==="white"?Zo:[...Zo].reverse(),z=d.useCallback((V,H)=>{if(!Y.current)return null;const se=Y.current.getBoundingClientRect(),le=V-se.left,re=H-se.top,Te=se.width/8,Se=se.height/8,xe=Math.floor(le/Te),We=Math.floor(re/Se);if(xe<0||xe>7||We<0||We>7)return null;const Qt=L[xe],Ue=fe[We];return`${Qt}${Ue}`},[L,fe]),J=(V,H,se)=>{const le=`${V}${H}`;if(m==="viewOnly")return;if(w){if($===null)W(le);else if($===le)W(null);else{const xe={from:$,to:le},We=I.findIndex(Qt=>Qt.from===xe.from&&Qt.to===xe.to);We>=0?O(I.filter((Qt,Ue)=>Ue!==We)):O([...I,xe]),W(null)}return}se&&O([]);const re=xe=>xe===xe.toUpperCase(),Se=(()=>{var Yt;if(!D)return null;const xe=D[0],We=D[1],Qt=Ml.indexOf(We),Ue=Zo.indexOf(xe);return((Yt=_e[Qt])==null?void 0:Yt[Ue])||null})();if(se&&Se&&D!==le){const xe=re(Se),We=re(se);if(xe===We){if(c){u==null||u(le);return}B(le),u==null||u(le);return}}if(f&&D&&D!==le){if(f(D,le)){B(null);return}if(se&&l===null&&!c){B(le),u==null||u(le);return}}se?l===null&&!c&&B(le):D&&!c&&B(null),u==null||u(le)},ie=d.useCallback(V=>{V.preventDefault()},[]),ge=d.useCallback(V=>{if(!(!v||m==="viewOnly")&&(V.button===2||w)){V.preventDefault(),T(!0);const H=z(V.clientX,V.clientY);H&&q({from:H,currentSquare:H})}},[v,w,z]),te=d.useCallback(V=>{if(!F||!Q)return;const H=z(V.clientX,V.clientY);H&&H!==F.currentSquare&&q({...F,currentSquare:H})},[F,Q,z]),ne=d.useCallback(V=>{if(v&&(V.button===2||w)&&F&&Q){const H=z(V.clientX,V.clientY);if(H&&H!==F.from){const se={from:F.from,to:H},le=I.findIndex(re=>re.from===se.from&&re.to===se.to);le>=0?O(I.filter((re,Te)=>Te!==le)):O([...I,se])}q(null),T(!1)}},[v,w,F,Q,I,z]),Ne=d.useCallback(V=>{},[]),ae=d.useCallback(V=>{},[]),$e=d.useCallback(V=>{},[]),Me=d.useCallback(V=>{const H=V[0],se=V[1],le=L.indexOf(H),re=fe.indexOf(se);return{x:(le+.5)*12.5,y:(re+.5)*12.5}},[L,fe]),Ae=(V,H)=>(V+H)%2===0?"bg-board-light":"bg-board-dark",Ot=V=>x&&(x.from===V||x.to===V),St=(V,H,se=!1)=>{const le=Me(V.from),re=Me(V.to),Te=se?"rgba(255, 170, 0, 0.7)":"rgba(255, 170, 0, 0.8)";if(YR(V.from,V.to)){const En=XR(V.from,V.to),Zt=Me(En),$t=re.x-Zt.x,Jn=re.y-Zt.y,ln=Math.sqrt($t*$t+Jn*Jn),Mr=(ln-3*.7)/ln,Tn=Zt.x+$t*Mr,Eo=Zt.y+Jn*Mr;return i.jsxs("g",{children:[i.jsx("line",{x1:le.x,y1:le.y,x2:Zt.x,y2:Zt.y,stroke:Te,strokeWidth:"2.5",strokeLinecap:"round"}),i.jsx("line",{x1:Zt.x,y1:Zt.y,x2:Tn,y2:Eo,stroke:Te,strokeWidth:"2.5",strokeLinecap:"round"}),i.jsx("polygon",{points:"0,-2 4,0 0,2",fill:Te,transform:`translate(${re.x},${re.y}) rotate(${Math.atan2(Jn,$t)*180/Math.PI})`})]},`arrow-${H}`)}const Se=re.x-le.x,xe=re.y-le.y,We=Math.sqrt(Se*Se+xe*xe),Yt=(We-3*.7)/We,Xt=le.x+Se*Yt,Vn=le.y+xe*Yt;return i.jsxs("g",{children:[i.jsx("line",{x1:le.x,y1:le.y,x2:Xt,y2:Vn,stroke:Te,strokeWidth:"2.5",strokeLinecap:"round"}),i.jsx("polygon",{points:"0,-2 4,0 0,2",fill:Te,transform:`translate(${re.x},${re.y}) rotate(${Math.atan2(xe,Se)*180/Math.PI})`})]},`arrow-${H}`)},vr=i.jsxs("div",{ref:Y,className:"relative w-full h-full select-none",onContextMenu:ie,onMouseDown:ge,onMouseMove:te,onMouseUp:ne,onMouseLeave:()=>{Q&&(q(null),T(!1))},onTouchStart:Ne,onTouchMove:ae,onTouchEnd:$e,children:[i.jsx("div",{className:"grid grid-cols-8 grid-rows-8 gap-0 w-full h-full",children:fe.map((V,H)=>L.map((se,le)=>{var Jn;const re=`${se}${V}`,Te=Ml.indexOf(V),Se=Zo.indexOf(se),xe=(Jn=_e[Te])==null?void 0:Jn[Se],We=r.includes(re),Qt=D===re,Ue=c===re,Yt=be.includes(re),Xt=Ot(re),Vn=s.includes(re),En=Vn&&xe!==null,Zt=$===re,$t=(ln,Jr)=>{const jo=parseInt(ln.slice(1,3),16),Mr=parseInt(ln.slice(3,5),16),Tn=parseInt(ln.slice(5,7),16);return`rgba(${jo}, ${Mr}, ${Tn}, ${Jr})`};return i.jsxs("div",{"data-testid":`square-${re}`,"data-square":re,onClick:()=>J(se,V,xe),className:`
                    relative flex items-center justify-center cursor-pointer
                    ${Ae(le,H)}
                    ${We?"ring-2 ring-primary ring-inset":""}
                    ${Xt?"bg-opacity-80 after:absolute after:inset-0 after:bg-blue-500/40":""}
                    ${Zt?"ring-4 ring-orange-400 ring-inset":""}
                    hover-elevate
                  `,style:{...!C&&Qt&&!Ue?{boxShadow:`inset 0 0 0 4px ${N}`}:{},...!C&&Ue?{boxShadow:`inset 0 0 0 4px ${N}`}:{}},children:[Yt&&i.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{backgroundColor:$t(j,.3)}}),xe&&i.jsx("img",{src:ZR[xe],alt:xe,className:"w-[75%] h-[75%] select-none relative z-10 pointer-events-none",draggable:!1}),Vn&&!En&&i.jsx("div",{className:"absolute w-3 h-3 sm:w-4 sm:h-4 rounded-full pointer-events-none z-10",style:{backgroundColor:$t(R,.4)}}),En&&i.jsx("div",{className:"absolute inset-0 rounded-full pointer-events-none z-10",style:{border:`3px solid ${$t(R,.5)}`}}),n&&le===0&&i.jsx("span",{className:"absolute bottom-0.5 left-1 text-xs font-semibold select-none opacity-70",children:V}),n&&H===7&&i.jsx("span",{className:"absolute bottom-0.5 right-1 text-xs font-semibold select-none opacity-70",children:se})]},re)}))}),(I.length>0||F)&&i.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[I.map((V,H)=>St(V,H)),F&&F.from!==F.currentSquare&&St({from:F.from,to:F.currentSquare},-1,!0)]})]});return y?i.jsx("div",{className:`aspect-square w-full ${h}`,children:vr}):i.jsx(De,{className:`aspect-square w-full max-w-full md:max-w-[600px] p-1 md:p-2 ${h}`,children:vr})}const e_=[{key:"q",name:"Queen",white:"/pieces/wQ.svg",black:"/pieces/bQ.svg"},{key:"r",name:"Rook",white:"/pieces/wR.svg",black:"/pieces/bR.svg"},{key:"b",name:"Bishop",white:"/pieces/wB.svg",black:"/pieces/bB.svg"},{key:"n",name:"Knight",white:"/pieces/wN.svg",black:"/pieces/bN.svg"}];function t_({open:e,color:t,onSelect:n}){return i.jsx(Ci,{open:e,onOpenChange:()=>{},children:i.jsxs(uo,{className:"sm:max-w-md",onPointerDownOutside:r=>r.preventDefault(),children:[i.jsx(fo,{children:i.jsx(ho,{className:"text-center",children:"Promote Pawn"})}),i.jsx("div",{className:"grid grid-cols-4 gap-2",children:e_.map(r=>i.jsx(X,{variant:"outline",className:"h-20 hover-elevate",onClick:()=>n(r.key),"data-testid":`button-promote-${r.key}`,children:i.jsx("img",{src:t==="white"?r.white:r.black,alt:r.name,className:"w-12 h-12",draggable:!1})},r.key))}),i.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"Select a piece to promote your pawn"})]})})}function th(e,[t,n]){return Math.min(n,Math.max(t,e))}var n_=[" ","Enter","ArrowUp","ArrowDown"],r_=[" ","Enter"],Qa="Select",[Su,ku,s_]=sm(Qa),[$i,JM]=Xn(Qa,[s_,pu]),Nu=pu(),[o_,Os]=$i(Qa),[i_,a_]=$i(Qa),fb=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:o,value:a,defaultValue:l,onValueChange:c,dir:u,name:f,autoComplete:m,disabled:h,required:y,form:v}=e,p=Nu(t),[b,x]=d.useState(null),[g,w]=d.useState(null),[k,S]=d.useState(!1),C=yu(u),[N=!1,j]=ao({prop:r,defaultProp:s,onChange:o}),[R,_]=ao({prop:a,defaultProp:l,onChange:c}),B=d.useRef(null),D=b?v||!!b.closest("form"):!0,[I,O]=d.useState(new Set),F=Array.from(I).map(q=>q.props.value).join(";");return i.jsx(sE,{...p,children:i.jsxs(o_,{required:y,scope:t,trigger:b,onTriggerChange:x,valueNode:g,onValueNodeChange:w,valueNodeHasChildren:k,onValueNodeHasChildrenChange:S,contentId:Cs(),value:R,onValueChange:_,open:N,onOpenChange:j,dir:C,triggerPointerDownPosRef:B,disabled:h,children:[i.jsx(Su.Provider,{scope:t,children:i.jsx(i_,{scope:e.__scopeSelect,onNativeOptionAdd:d.useCallback(q=>{O(Q=>new Set(Q).add(q))},[]),onNativeOptionRemove:d.useCallback(q=>{O(Q=>{const T=new Set(Q);return T.delete(q),T})},[]),children:n})}),D?i.jsxs($b,{"aria-hidden":!0,required:y,tabIndex:-1,name:f,autoComplete:m,value:R,onChange:q=>_(q.target.value),disabled:h,form:v,children:[R===void 0?i.jsx("option",{value:""}):null,Array.from(I)]},F):null]})})};fb.displayName=Qa;var hb="SelectTrigger",mb=d.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,o=Nu(n),a=Os(hb,n),l=a.disabled||r,c=Fe(t,a.onTriggerChange),u=ku(n),f=d.useRef("touch"),[m,h,y]=Db(p=>{const b=u().filter(w=>!w.disabled),x=b.find(w=>w.value===a.value),g=Fb(b,p,x);g!==void 0&&a.onValueChange(g.value)}),v=p=>{l||(a.onOpenChange(!0),y()),p&&(a.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return i.jsx(Zy,{asChild:!0,...o,children:i.jsx(we.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Ob(a.value)?"":void 0,...s,ref:c,onClick:de(s.onClick,p=>{p.currentTarget.focus(),f.current!=="mouse"&&v(p)}),onPointerDown:de(s.onPointerDown,p=>{f.current=p.pointerType;const b=p.target;b.hasPointerCapture(p.pointerId)&&b.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(v(p),p.preventDefault())}),onKeyDown:de(s.onKeyDown,p=>{const b=m.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&h(p.key),!(b&&p.key===" ")&&n_.includes(p.key)&&(v(),p.preventDefault())})})})});mb.displayName=hb;var pb="SelectValue",gb=d.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:o,placeholder:a="",...l}=e,c=Os(pb,n),{onValueNodeHasChildrenChange:u}=c,f=o!==void 0,m=Fe(t,c.onValueNodeChange);return Kt(()=>{u(f)},[u,f]),i.jsx(we.span,{...l,ref:m,style:{pointerEvents:"none"},children:Ob(c.value)?i.jsx(i.Fragment,{children:a}):o})});gb.displayName=pb;var l_="SelectIcon",vb=d.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return i.jsx(we.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});vb.displayName=l_;var c_="SelectPortal",xb=e=>i.jsx(au,{asChild:!0,...e});xb.displayName=c_;var mo="SelectContent",yb=d.forwardRef((e,t)=>{const n=Os(mo,e.__scopeSelect),[r,s]=d.useState();if(Kt(()=>{s(new DocumentFragment)},[]),!n.open){const o=r;return o?xo.createPortal(i.jsx(wb,{scope:e.__scopeSelect,children:i.jsx(Su.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),o):null}return i.jsx(bb,{...e,ref:t})});yb.displayName=mo;var sr=10,[wb,$s]=$i(mo),u_="SelectContentImpl",d_=bi("SelectContent.RemoveScroll"),bb=d.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:m,collisionBoundary:h,collisionPadding:y,sticky:v,hideWhenDetached:p,avoidCollisions:b,...x}=e,g=Os(mo,n),[w,k]=d.useState(null),[S,C]=d.useState(null),N=Fe(t,z=>k(z)),[j,R]=d.useState(null),[_,B]=d.useState(null),D=ku(n),[I,O]=d.useState(!1),F=d.useRef(!1);d.useEffect(()=>{if(w)return Tw(w)},[w]),yw();const q=d.useCallback(z=>{const[J,...ie]=D().map(ne=>ne.ref.current),[ge]=ie.slice(-1),te=document.activeElement;for(const ne of z)if(ne===te||(ne==null||ne.scrollIntoView({block:"nearest"}),ne===J&&S&&(S.scrollTop=0),ne===ge&&S&&(S.scrollTop=S.scrollHeight),ne==null||ne.focus(),document.activeElement!==te))return},[D,S]),Q=d.useCallback(()=>q([j,w]),[q,j,w]);d.useEffect(()=>{I&&Q()},[I,Q]);const{onOpenChange:T,triggerPointerDownPosRef:$}=g;d.useEffect(()=>{if(w){let z={x:0,y:0};const J=ge=>{var te,ne;z={x:Math.abs(Math.round(ge.pageX)-(((te=$.current)==null?void 0:te.x)??0)),y:Math.abs(Math.round(ge.pageY)-(((ne=$.current)==null?void 0:ne.y)??0))}},ie=ge=>{z.x<=10&&z.y<=10?ge.preventDefault():w.contains(ge.target)||T(!1),document.removeEventListener("pointermove",J),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",J),document.addEventListener("pointerup",ie,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",J),document.removeEventListener("pointerup",ie,{capture:!0})}}},[w,T,$]),d.useEffect(()=>{const z=()=>T(!1);return window.addEventListener("blur",z),window.addEventListener("resize",z),()=>{window.removeEventListener("blur",z),window.removeEventListener("resize",z)}},[T]);const[W,Y]=Db(z=>{const J=D().filter(te=>!te.disabled),ie=J.find(te=>te.ref.current===document.activeElement),ge=Fb(J,z,ie);ge&&setTimeout(()=>ge.ref.current.focus())}),be=d.useCallback((z,J,ie)=>{const ge=!F.current&&!ie;(g.value!==void 0&&g.value===J||ge)&&(R(z),ge&&(F.current=!0))},[g.value]),Pe=d.useCallback(()=>w==null?void 0:w.focus(),[w]),_e=d.useCallback((z,J,ie)=>{const ge=!F.current&&!ie;(g.value!==void 0&&g.value===J||ge)&&B(z)},[g.value]),fe=r==="popper"?nh:Sb,L=fe===nh?{side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:m,collisionBoundary:h,collisionPadding:y,sticky:v,hideWhenDetached:p,avoidCollisions:b}:{};return i.jsx(wb,{scope:n,content:w,viewport:S,onViewportChange:C,itemRefCallback:be,selectedItem:j,onItemLeave:Pe,itemTextRefCallback:_e,focusSelectedItem:Q,selectedItemText:_,position:r,isPositioned:I,searchRef:W,children:i.jsx(jm,{as:d_,allowPinchZoom:!0,children:i.jsx(Cm,{asChild:!0,trapped:g.open,onMountAutoFocus:z=>{z.preventDefault()},onUnmountAutoFocus:de(s,z=>{var J;(J=g.trigger)==null||J.focus({preventScroll:!0}),z.preventDefault()}),children:i.jsx(Ha,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:z=>z.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:i.jsx(fe,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:z=>z.preventDefault(),...x,...L,onPlaced:()=>O(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:de(x.onKeyDown,z=>{const J=z.ctrlKey||z.altKey||z.metaKey;if(z.key==="Tab"&&z.preventDefault(),!J&&z.key.length===1&&Y(z.key),["ArrowUp","ArrowDown","Home","End"].includes(z.key)){let ge=D().filter(te=>!te.disabled).map(te=>te.ref.current);if(["ArrowUp","End"].includes(z.key)&&(ge=ge.slice().reverse()),["ArrowUp","ArrowDown"].includes(z.key)){const te=z.target,ne=ge.indexOf(te);ge=ge.slice(ne+1)}setTimeout(()=>q(ge)),z.preventDefault()}})})})})})})});bb.displayName=u_;var f_="SelectItemAlignedPosition",Sb=d.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,o=Os(mo,n),a=$s(mo,n),[l,c]=d.useState(null),[u,f]=d.useState(null),m=Fe(t,N=>f(N)),h=ku(n),y=d.useRef(!1),v=d.useRef(!0),{viewport:p,selectedItem:b,selectedItemText:x,focusSelectedItem:g}=a,w=d.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&p&&b&&x){const N=o.trigger.getBoundingClientRect(),j=u.getBoundingClientRect(),R=o.valueNode.getBoundingClientRect(),_=x.getBoundingClientRect();if(o.dir!=="rtl"){const te=_.left-j.left,ne=R.left-te,Ne=N.left-ne,ae=N.width+Ne,$e=Math.max(ae,j.width),Me=window.innerWidth-sr,Ae=th(ne,[sr,Math.max(sr,Me-$e)]);l.style.minWidth=ae+"px",l.style.left=Ae+"px"}else{const te=j.right-_.right,ne=window.innerWidth-R.right-te,Ne=window.innerWidth-N.right-ne,ae=N.width+Ne,$e=Math.max(ae,j.width),Me=window.innerWidth-sr,Ae=th(ne,[sr,Math.max(sr,Me-$e)]);l.style.minWidth=ae+"px",l.style.right=Ae+"px"}const B=h(),D=window.innerHeight-sr*2,I=p.scrollHeight,O=window.getComputedStyle(u),F=parseInt(O.borderTopWidth,10),q=parseInt(O.paddingTop,10),Q=parseInt(O.borderBottomWidth,10),T=parseInt(O.paddingBottom,10),$=F+q+I+T+Q,W=Math.min(b.offsetHeight*5,$),Y=window.getComputedStyle(p),be=parseInt(Y.paddingTop,10),Pe=parseInt(Y.paddingBottom,10),_e=N.top+N.height/2-sr,fe=D-_e,L=b.offsetHeight/2,z=b.offsetTop+L,J=F+q+z,ie=$-J;if(J<=_e){const te=B.length>0&&b===B[B.length-1].ref.current;l.style.bottom="0px";const ne=u.clientHeight-p.offsetTop-p.offsetHeight,Ne=Math.max(fe,L+(te?Pe:0)+ne+Q),ae=J+Ne;l.style.height=ae+"px"}else{const te=B.length>0&&b===B[0].ref.current;l.style.top="0px";const Ne=Math.max(_e,F+p.offsetTop+(te?be:0)+L)+ie;l.style.height=Ne+"px",p.scrollTop=J-_e+p.offsetTop}l.style.margin=`${sr}px 0`,l.style.minHeight=W+"px",l.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[h,o.trigger,o.valueNode,l,u,p,b,x,o.dir,r]);Kt(()=>w(),[w]);const[k,S]=d.useState();Kt(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const C=d.useCallback(N=>{N&&v.current===!0&&(w(),g==null||g(),v.current=!1)},[w,g]);return i.jsx(m_,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:C,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:i.jsx(we.div,{...s,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Sb.displayName=f_;var h_="SelectPopperPosition",nh=d.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=sr,...o}=e,a=Nu(n);return i.jsx(Jy,{...a,...o,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});nh.displayName=h_;var[m_,Hm]=$i(mo,{}),rh="SelectViewport",kb=d.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,o=$s(rh,n),a=Hm(rh,n),l=Fe(t,o.onViewportChange),c=d.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(Su.Slot,{scope:n,children:i.jsx(we.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:de(s.onScroll,u=>{const f=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&m){const y=Math.abs(c.current-f.scrollTop);if(y>0){const v=window.innerHeight-sr*2,p=parseFloat(m.style.minHeight),b=parseFloat(m.style.height),x=Math.max(p,b);if(x<v){const g=x+y,w=Math.min(v,g),k=g-w;m.style.height=w+"px",m.style.bottom==="0px"&&(f.scrollTop=k>0?k:0,m.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});kb.displayName=rh;var Nb="SelectGroup",[p_,g_]=$i(Nb),v_=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Cs();return i.jsx(p_,{scope:n,id:s,children:i.jsx(we.div,{role:"group","aria-labelledby":s,...r,ref:t})})});v_.displayName=Nb;var Cb="SelectLabel",jb=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=g_(Cb,n);return i.jsx(we.div,{id:s.id,...r,ref:t})});jb.displayName=Cb;var Bc="SelectItem",[x_,Eb]=$i(Bc),Tb=d.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:o,...a}=e,l=Os(Bc,n),c=$s(Bc,n),u=l.value===r,[f,m]=d.useState(o??""),[h,y]=d.useState(!1),v=Fe(t,g=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,g,r,s)}),p=Cs(),b=d.useRef("touch"),x=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(x_,{scope:n,value:r,disabled:s,textId:p,isSelected:u,onItemTextChange:d.useCallback(g=>{m(w=>w||((g==null?void 0:g.textContent)??"").trim())},[]),children:i.jsx(Su.ItemSlot,{scope:n,value:r,disabled:s,textValue:f,children:i.jsx(we.div,{role:"option","aria-labelledby":p,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:v,onFocus:de(a.onFocus,()=>y(!0)),onBlur:de(a.onBlur,()=>y(!1)),onClick:de(a.onClick,()=>{b.current!=="mouse"&&x()}),onPointerUp:de(a.onPointerUp,()=>{b.current==="mouse"&&x()}),onPointerDown:de(a.onPointerDown,g=>{b.current=g.pointerType}),onPointerMove:de(a.onPointerMove,g=>{var w;b.current=g.pointerType,s?(w=c.onItemLeave)==null||w.call(c):b.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:de(a.onPointerLeave,g=>{var w;g.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:de(a.onKeyDown,g=>{var k;((k=c.searchRef)==null?void 0:k.current)!==""&&g.key===" "||(r_.includes(g.key)&&x(),g.key===" "&&g.preventDefault())})})})})});Tb.displayName=Bc;var aa="SelectItemText",Pb=d.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...o}=e,a=Os(aa,n),l=$s(aa,n),c=Eb(aa,n),u=a_(aa,n),[f,m]=d.useState(null),h=Fe(t,x=>m(x),c.onItemTextChange,x=>{var g;return(g=l.itemTextRefCallback)==null?void 0:g.call(l,x,c.value,c.disabled)}),y=f==null?void 0:f.textContent,v=d.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:y},c.value),[c.disabled,c.value,y]),{onNativeOptionAdd:p,onNativeOptionRemove:b}=u;return Kt(()=>(p(v),()=>b(v)),[p,b,v]),i.jsxs(i.Fragment,{children:[i.jsx(we.span,{id:c.textId,...o,ref:h}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?xo.createPortal(o.children,a.valueNode):null]})});Pb.displayName=aa;var Rb="SelectItemIndicator",_b=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Eb(Rb,n).isSelected?i.jsx(we.span,{"aria-hidden":!0,...r,ref:t}):null});_b.displayName=Rb;var sh="SelectScrollUpButton",Mb=d.forwardRef((e,t)=>{const n=$s(sh,e.__scopeSelect),r=Hm(sh,e.__scopeSelect),[s,o]=d.useState(!1),a=Fe(t,r.onScrollButtonChange);return Kt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;o(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(Lb,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Mb.displayName=sh;var oh="SelectScrollDownButton",Ab=d.forwardRef((e,t)=>{const n=$s(oh,e.__scopeSelect),r=Hm(oh,e.__scopeSelect),[s,o]=d.useState(!1),a=Fe(t,r.onScrollButtonChange);return Kt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<u;o(f)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(Lb,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Ab.displayName=oh;var Lb=d.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,o=$s("SelectScrollButton",n),a=d.useRef(null),l=ku(n),c=d.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return d.useEffect(()=>()=>c(),[c]),Kt(()=>{var f;const u=l().find(m=>m.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),i.jsx(we.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:de(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:de(s.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:de(s.onPointerLeave,()=>{c()})})}),y_="SelectSeparator",Ib=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return i.jsx(we.div,{"aria-hidden":!0,...r,ref:t})});Ib.displayName=y_;var ih="SelectArrow",w_=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Nu(n),o=Os(ih,n),a=$s(ih,n);return o.open&&a.position==="popper"?i.jsx(ew,{...s,...r,ref:t}):null});w_.displayName=ih;function Ob(e){return e===""||e===void 0}var $b=d.forwardRef((e,t)=>{const{value:n,...r}=e,s=d.useRef(null),o=Fe(t,s),a=uw(n);return d.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&f){const m=new Event("change",{bubbles:!0});f.call(l,n),l.dispatchEvent(m)}},[a,n]),i.jsx(Ga,{asChild:!0,children:i.jsx("select",{...r,ref:o,defaultValue:n})})});$b.displayName="BubbleSelect";function Db(e){const t=bt(e),n=d.useRef(""),r=d.useRef(0),s=d.useCallback(a=>{const l=n.current+a;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=d.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,o]}function Fb(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=b_(e,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function b_(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var S_=fb,Bb=mb,k_=gb,N_=vb,C_=xb,zb=yb,j_=kb,Vb=jb,qb=Tb,E_=Pb,T_=_b,Ub=Mb,Wb=Ab,Hb=Ib;const Od=S_,$d=k_,tc=d.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(Bb,{ref:r,className:je("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,i.jsx(N_,{asChild:!0,children:i.jsx(ay,{className:"h-4 w-4 opacity-50"})})]}));tc.displayName=Bb.displayName;const Gb=d.forwardRef(({className:e,...t},n)=>i.jsx(Ub,{ref:n,className:je("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(QC,{className:"h-4 w-4"})}));Gb.displayName=Ub.displayName;const Kb=d.forwardRef(({className:e,...t},n)=>i.jsx(Wb,{ref:n,className:je("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(ay,{className:"h-4 w-4"})}));Kb.displayName=Wb.displayName;const nc=d.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>i.jsx(C_,{children:i.jsxs(zb,{ref:s,className:je("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[i.jsx(Gb,{}),i.jsx(j_,{className:je("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(Kb,{})]})}));nc.displayName=zb.displayName;const P_=d.forwardRef(({className:e,...t},n)=>i.jsx(Vb,{ref:n,className:je("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));P_.displayName=Vb.displayName;const rr=d.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(qb,{ref:r,className:je("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(T_,{children:i.jsx(lm,{className:"h-4 w-4"})})}),i.jsx(E_,{children:t})]}));rr.displayName=qb.displayName;const R_=d.forwardRef(({className:e,...t},n)=>i.jsx(Hb,{ref:n,className:je("-mx-1 my-1 h-px bg-muted",e),...t}));R_.displayName=Hb.displayName;function __(e,t){return d.useReducer((n,r)=>t[n][r]??n,e)}var Gm="ScrollArea",[Qb,e4]=Xn(Gm),[M_,Zn]=Qb(Gm),Yb=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:o=600,...a}=e,[l,c]=d.useState(null),[u,f]=d.useState(null),[m,h]=d.useState(null),[y,v]=d.useState(null),[p,b]=d.useState(null),[x,g]=d.useState(0),[w,k]=d.useState(0),[S,C]=d.useState(!1),[N,j]=d.useState(!1),R=Fe(t,B=>c(B)),_=yu(s);return i.jsx(M_,{scope:n,type:r,dir:_,scrollHideDelay:o,scrollArea:l,viewport:u,onViewportChange:f,content:m,onContentChange:h,scrollbarX:y,onScrollbarXChange:v,scrollbarXEnabled:S,onScrollbarXEnabledChange:C,scrollbarY:p,onScrollbarYChange:b,scrollbarYEnabled:N,onScrollbarYEnabledChange:j,onCornerWidthChange:g,onCornerHeightChange:k,children:i.jsx(we.div,{dir:_,...a,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});Yb.displayName=Gm;var Xb="ScrollAreaViewport",Zb=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...o}=e,a=Zn(Xb,n),l=d.useRef(null),c=Fe(t,l,a.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(we.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:i.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Zb.displayName=Xb;var _r="ScrollAreaScrollbar",Km=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Zn(_r,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:a}=s,l=e.orientation==="horizontal";return d.useEffect(()=>(l?o(!0):a(!0),()=>{l?o(!1):a(!1)}),[l,o,a]),s.type==="hover"?i.jsx(A_,{...r,ref:t,forceMount:n}):s.type==="scroll"?i.jsx(L_,{...r,ref:t,forceMount:n}):s.type==="auto"?i.jsx(Jb,{...r,ref:t,forceMount:n}):s.type==="always"?i.jsx(Qm,{...r,ref:t}):null});Km.displayName=_r;var A_=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Zn(_r,e.__scopeScrollArea),[o,a]=d.useState(!1);return d.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),a(!0)},f=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(pr,{present:n||o,children:i.jsx(Jb,{"data-state":o?"visible":"hidden",...r,ref:t})})}),L_=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Zn(_r,e.__scopeScrollArea),o=e.orientation==="horizontal",a=ju(()=>c("SCROLL_END"),100),[l,c]=__("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),d.useEffect(()=>{const u=s.viewport,f=o?"scrollLeft":"scrollTop";if(u){let m=u[f];const h=()=>{const y=u[f];m!==y&&(c("SCROLL"),a()),m=y};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[s.viewport,o,c,a]),i.jsx(pr,{present:n||l!=="hidden",children:i.jsx(Qm,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:de(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:de(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Jb=d.forwardRef((e,t)=>{const n=Zn(_r,e.__scopeScrollArea),{forceMount:r,...s}=e,[o,a]=d.useState(!1),l=e.orientation==="horizontal",c=ju(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?u:f)}},10);return Ti(n.viewport,c),Ti(n.content,c),i.jsx(pr,{present:r||o,children:i.jsx(Qm,{"data-state":o?"visible":"hidden",...s,ref:t})})}),Qm=d.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=Zn(_r,e.__scopeScrollArea),o=d.useRef(null),a=d.useRef(0),[l,c]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=sS(l.viewport,l.content),f={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>o.current=h,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:h=>a.current=h};function m(h,y){return B_(h,a.current,l,y)}return n==="horizontal"?i.jsx(I_,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,y=lv(h,l,s.dir);o.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=m(h,s.dir))}}):n==="vertical"?i.jsx(O_,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,y=lv(h,l);o.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=m(h))}}):null}),I_=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,o=Zn(_r,e.__scopeScrollArea),[a,l]=d.useState(),c=d.useRef(null),u=Fe(t,c,o.onScrollbarXChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(tS,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Cu(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,m)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),iS(h,m)&&f.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Vc(a.paddingLeft),paddingEnd:Vc(a.paddingRight)}})}})}),O_=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,o=Zn(_r,e.__scopeScrollArea),[a,l]=d.useState(),c=d.useRef(null),u=Fe(t,c,o.onScrollbarYChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(tS,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Cu(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,m)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),iS(h,m)&&f.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Vc(a.paddingTop),paddingEnd:Vc(a.paddingBottom)}})}})}),[$_,eS]=Qb(_r),tS=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:o,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:f,onResize:m,...h}=e,y=Zn(_r,n),[v,p]=d.useState(null),b=Fe(t,R=>p(R)),x=d.useRef(null),g=d.useRef(""),w=y.viewport,k=r.content-r.viewport,S=bt(f),C=bt(c),N=ju(m,10);function j(R){if(x.current){const _=R.clientX-x.current.left,B=R.clientY-x.current.top;u({x:_,y:B})}}return d.useEffect(()=>{const R=_=>{const B=_.target;(v==null?void 0:v.contains(B))&&S(_,k)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[w,v,k,S]),d.useEffect(C,[r,C]),Ti(v,N),Ti(y.content,N),i.jsx($_,{scope:n,scrollbar:v,hasThumb:s,onThumbChange:bt(o),onThumbPointerUp:bt(a),onThumbPositionChange:C,onThumbPointerDown:bt(l),children:i.jsx(we.div,{...h,ref:b,style:{position:"absolute",...h.style},onPointerDown:de(e.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),x.current=v.getBoundingClientRect(),g.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),j(R))}),onPointerMove:de(e.onPointerMove,j),onPointerUp:de(e.onPointerUp,R=>{const _=R.target;_.hasPointerCapture(R.pointerId)&&_.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=g.current,y.viewport&&(y.viewport.style.scrollBehavior=""),x.current=null})})})}),zc="ScrollAreaThumb",nS=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=eS(zc,e.__scopeScrollArea);return i.jsx(pr,{present:n||s.hasThumb,children:i.jsx(D_,{ref:t,...r})})}),D_=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,o=Zn(zc,n),a=eS(zc,n),{onThumbPositionChange:l}=a,c=Fe(t,m=>a.onThumbChange(m)),u=d.useRef(void 0),f=ju(()=>{u.current&&(u.current(),u.current=void 0)},100);return d.useEffect(()=>{const m=o.viewport;if(m){const h=()=>{if(f(),!u.current){const y=z_(m,l);u.current=y,l()}};return l(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[o.viewport,f,l]),i.jsx(we.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:de(e.onPointerDownCapture,m=>{const y=m.target.getBoundingClientRect(),v=m.clientX-y.left,p=m.clientY-y.top;a.onThumbPointerDown({x:v,y:p})}),onPointerUp:de(e.onPointerUp,a.onThumbPointerUp)})});nS.displayName=zc;var Ym="ScrollAreaCorner",rS=d.forwardRef((e,t)=>{const n=Zn(Ym,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(F_,{...e,ref:t}):null});rS.displayName=Ym;var F_=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=Zn(Ym,n),[o,a]=d.useState(0),[l,c]=d.useState(0),u=!!(o&&l);return Ti(s.scrollbarX,()=>{var m;const f=((m=s.scrollbarX)==null?void 0:m.offsetHeight)||0;s.onCornerHeightChange(f),c(f)}),Ti(s.scrollbarY,()=>{var m;const f=((m=s.scrollbarY)==null?void 0:m.offsetWidth)||0;s.onCornerWidthChange(f),a(f)}),u?i.jsx(we.div,{...r,ref:t,style:{width:o,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Vc(e){return e?parseInt(e,10):0}function sS(e,t){const n=e/t;return isNaN(n)?0:n}function Cu(e){const t=sS(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function B_(e,t,n,r="ltr"){const s=Cu(n),o=s/2,a=t||o,l=s-a,c=n.scrollbar.paddingStart+a,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,m=r==="ltr"?[0,f]:[f*-1,0];return oS([c,u],m)(e)}function lv(e,t,n="ltr"){const r=Cu(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-s,a=t.content-t.viewport,l=o-r,c=n==="ltr"?[0,a]:[a*-1,0],u=th(e,c);return oS([0,a],[0,l])(u)}function oS(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function iS(e,t){return e>0&&e<t}var z_=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const o={left:e.scrollLeft,top:e.scrollTop},a=n.left!==o.left,l=n.top!==o.top;(a||l)&&t(),n=o,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function ju(e,t){const n=bt(e),r=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(r.current),[]),d.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Ti(e,t){const n=bt(t);Kt(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var aS=Yb,V_=Zb,q_=rS;const Xm=d.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(aS,{ref:r,className:je("relative overflow-hidden",e),...n,children:[i.jsx(V_,{className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(lS,{}),i.jsx(q_,{})]}));Xm.displayName=aS.displayName;const lS=d.forwardRef(({className:e,orientation:t="vertical",...n},r)=>i.jsx(Km,{ref:r,orientation:t,className:je("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:i.jsx(nS,{className:"relative flex-1 rounded-full bg-border"})}));lS.displayName=Km.displayName;const U_="/assets/title_cropped-UndYsuHA.webp",Dd={wK:"/pieces/wK.svg",wQ:"/pieces/wQ.svg",wR:"/pieces/wR.svg",wB:"/pieces/wB.svg",wN:"/pieces/wN.svg",wP:"/pieces/wP.svg",bK:"/pieces/bK.svg",bQ:"/pieces/bQ.svg",bR:"/pieces/bR.svg",bB:"/pieces/bB.svg",bN:"/pieces/bN.svg",bP:"/pieces/bP.svg"},W_=["wK","wQ","wR","wB","wN","wP","bK","bQ","bR","bB","bN","bP"],H_={K:["king"],Q:["queen"],R:["rook","castle"],B:["bishop"],N:["knight","horse"],P:["pawn"]},G_={alpha:"a",alfa:"a",bravo:"b",charlie:"c",delta:"d",echo:"e",foxtrot:"f",fox:"f",golf:"g",hotel:"h"};function K_(e){const t=Array(8).fill(null).map(()=>Array(8).fill(null)),[n]=e.split(" "),r=n.split("/"),s={K:"wK",Q:"wQ",R:"wR",B:"wB",N:"wN",P:"wP",k:"bK",q:"bQ",r:"bR",b:"bB",n:"bN",p:"bP"};return r.forEach((o,a)=>{let l=0;for(const c of o)/\d/.test(c)?l+=parseInt(c):s[c]&&(t[a][l]=s[c],l++)}),t}function Q_(e,t){let n=0,r=0;for(let s=0;s<8;s++)for(let o=0;o<8;o++){const a=t[s][o],l=e[s][o];a!==null&&(r++,a===l&&n++)}return r===0?100:Math.round(n/r*100)}function cv(e){const t=e.toLowerCase().trim();for(const[r,s]of Object.entries(G_))if(t.includes(r)){const o=t.match(/[1-8]/);if(o)return{file:s,rank:o[0]}}const n=t.match(/([a-h])\s*([1-8])/);return n?{file:n[1],rank:n[2]}:null}function Y_(e){const t=e.toLowerCase();for(const[n,r]of Object.entries(H_))for(const s of r)if(t.includes(s))return n;return null}function uv(e){const t=e.toLowerCase();return t.includes("white")?"w":t.includes("black")?"b":null}function X_({actualFen:e,playerColor:t,onComplete:n,onSkip:r,onContinue:s,onViewReport:o}){const[a,l]=d.useState("ready"),[c,u]=d.useState(Array(8).fill(null).map(()=>Array(8).fill(null))),[f,m]=d.useState(null),[h,y]=d.useState(!1),[v,p]=d.useState(null),[b,x]=d.useState(100),[g,w]=d.useState(!1),[k,S]=d.useState(null),[C,N]=d.useState(""),[j,R]=d.useState(!0),[_,B]=d.useState(null),[D,I]=d.useState("w"),O=d.useRef("w"),[F,q]=d.useState(new Set),Q=d.useRef(0),T=d.useRef(0),$=d.useRef(null),W=d.useRef(!0),Y=K_(e);d.useEffect(()=>{O.current=D},[D]);const be=d.useCallback((V,H)=>{const se=V.charCodeAt(0)-97;return{row:8-parseInt(H),col:se}},[]),Pe=d.useCallback((V,H,se,le)=>{u(Te=>{const Se=Te.map(xe=>[...xe]);return Se[H][se]=V,Se});const re=V.charAt(0);if(I(re),O.current=re,le){Q.current++;const Te=`${H}-${se}`;q(Se=>new Set(Se).add(Te)),setTimeout(()=>{q(Se=>{const xe=new Set(Se);return xe.delete(Te),xe})},300)}else T.current++},[]),_e=d.useCallback((V,H,se)=>{u(le=>{const re=le.map(Te=>[...Te]);return re[V][H]&&(se?Q.current++:T.current++,re[V][H]=null),re})},[]),fe=d.useCallback(V=>{const H=V.toLowerCase().trim();if(N(V),H.includes("clear all")||H.includes("reset board")||H.includes("reset")){u(Array(8).fill(null).map(()=>Array(8).fill(null))),S(null);return}if(H.includes("done")||H.includes("submit")||H.includes("check position")){$.current&&$.current();return}if(H==="white"||H==="switch to white"||H==="white pieces"){I("w"),O.current="w";return}if(H==="black"||H==="switch to black"||H==="black pieces"){I("b"),O.current="b";return}if(k){const Te=uv(H);if(Te){const Se=Te+k.pieceType,{row:xe,col:We}=be(k.square.file,k.square.rank);Pe(Se,xe,We,!0),S(null);return}}if(H.includes("clear")||H.includes("remove")||H.includes("delete")){const Te=cv(H);if(Te){const{row:Se,col:xe}=be(Te.file,Te.rank);_e(Se,xe,!0)}return}const se=Y_(H),le=cv(H),re=uv(H);if(re&&(I(re),O.current=re),se&&le){const Se=(re||O.current)+se,{row:xe,col:We}=be(le.file,le.rank);Pe(Se,xe,We,!0),S(null)}},[k,be,Pe,_e]),L=d.useRef(fe);d.useEffect(()=>{L.current=fe},[fe]);const z=d.useCallback(async()=>{if(h)return;if(await Jw(),!await e1()){console.warn("[Reconstruction] Microphone permission not granted"),await $m()==="prompt-with-rationale"&&alert("Voice control requires microphone access. Please enable it in your device Settings > Apps > Blindfold Chess > Permissions.");return}await He.start({mode:"placement",onTranscript:se=>{L.current(se)},onListeningChange:se=>{w(se)}})&&console.log("[Reconstruction] Voice started via voiceMaster")},[h]),J=d.useCallback(()=>{He.stop(),w(!1),S(null)},[]);d.useEffect(()=>(W.current=!0,()=>{W.current=!1,He.stop(),Kn.clearProtectedLane()}),[]),d.useEffect(()=>{if(a==="ready"){const V=setInterval(()=>{R(H=>!H)},800);return()=>clearInterval(V)}},[a]);const ie=d.useRef(!1);d.useEffect(()=>{if(a==="ready"){ie.current=!1;return}if(a==="playing"&&!h&&!ie.current){ie.current=!0;const V=setTimeout(()=>{z()},500);return()=>clearTimeout(V)}},[a,h,z]);const ge=d.useCallback((V,H)=>{h||(f?Pe(f,V,H,!1):c[V][H]&&_e(V,H,!1))},[f,c,h,Pe,_e]),te=d.useCallback((V,H)=>{h||(V.dataTransfer.setData("piece",H),V.dataTransfer.effectAllowed="copy",B(H))},[h]),ne=d.useCallback(()=>{B(null)},[]),Ne=d.useCallback(V=>{V.preventDefault(),V.dataTransfer.dropEffect="copy"},[]),ae=d.useCallback((V,H,se)=>{if(V.preventDefault(),h)return;const le=V.dataTransfer.getData("piece");le&&Pe(le,H,se,!1),B(null)},[h,Pe]),$e=d.useCallback((V,H)=>{h||m(H)},[h]),Me=()=>{u(Array(8).fill(null).map(()=>Array(8).fill(null))),m(null),Q.current=0,T.current=0},Ae=d.useCallback(()=>{const V=Q_(c,Y);p(V);const H=Q.current+T.current,se=H>0?Math.round(Q.current/H*100):0;x(se),y(!0),J(),n(V,se,Q.current,T.current)},[c,Y,J,n]);d.useEffect(()=>{$.current=Ae},[Ae]);const Ot=t==="white"?["a","b","c","d","e","f","g","h"]:["h","g","f","e","d","c","b","a"],St=t==="white"?["8","7","6","5","4","3","2","1"]:["1","2","3","4","5","6","7","8"],vr=(k==null?void 0:k.type)==="color"?"animate-pulse ring-4 ring-amber-400":"";return a==="ready"?i.jsxs(De,{className:"w-full max-w-md mx-auto",children:[i.jsx(xt,{className:"pb-2",children:i.jsxs(yt,{className:"text-lg flex items-center justify-between",children:[i.jsx("span",{children:"Board Reconstruction"}),i.jsx(X,{variant:"ghost",size:"sm",onClick:r,"data-testid":"button-skip-reconstruction-ready",children:"Skip"})]})}),i.jsxs(Ve,{className:"flex flex-col items-center justify-center py-12 gap-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx(on,{className:`h-16 w-16 text-blue-500 transition-transform duration-300 ${j?"scale-110":"scale-100"}`}),i.jsx("div",{className:`absolute -top-1 -right-1 h-4 w-4 rounded-full ${j?"bg-green-500":"bg-green-400"} transition-colors duration-300`})]}),i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Ready to Reconstruct?"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Rebuild the position from memory using voice commands"}),i.jsx("p",{className:"text-muted-foreground text-xs",children:'Say pieces like "White Knight F3" or "Black Queen D8"'})]}),i.jsxs(X,{size:"lg",onClick:()=>{Kn.register("reconstruction"),l("playing")},className:"mt-4","data-testid":"button-start-reconstruction",children:[i.jsx(on,{className:"h-5 w-5 mr-2"}),"Start"]})]})]}):i.jsxs(De,{className:"w-full max-w-md mx-auto",children:[i.jsx(xt,{className:"pb-2",children:i.jsxs(yt,{className:"text-lg flex items-center justify-between",children:[i.jsx("span",{children:"Reconstruct the Board"}),i.jsxs("div",{className:"flex items-center gap-2",children:[v!==null&&i.jsxs(Mt,{variant:v>=80?"default":v>=50?"secondary":"destructive",children:[v,"%"]}),h&&b>0&&i.jsxs(Mt,{variant:"outline",className:"text-amber-600 border-amber-400",children:["Voice: ",b,"%"]})]})]})}),i.jsxs(Ve,{className:"space-y-3",children:[!h&&i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"flex-1",children:i.jsx("p",{className:"text-sm text-muted-foreground",children:k?`Say "White" or "Black" for ${k.pieceType==="K"?"King":k.pieceType==="Q"?"Queen":k.pieceType==="R"?"Rook":k.pieceType==="B"?"Bishop":k.pieceType==="N"?"Knight":"Pawn"} on ${k.square.file}${k.square.rank}`:g?`"${C||"Knight f3"}"`:"Drag pieces or use voice commands"})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>I(V=>V==="w"?"b":"w"),className:`w-7 h-7 rounded flex items-center justify-center transition-all border-2 ${D==="w"?"bg-white border-stone-400":"bg-stone-800 border-stone-600"}`,title:`Placing ${D==="w"?"White":"Black"} pieces - tap to switch`,"data-testid":"button-sticky-color",children:i.jsx("span",{className:`text-xs font-bold ${D==="w"?"text-stone-800":"text-white"}`,children:D==="w"?"W":"B"})}),i.jsx(X,{size:"icon",variant:g?"destructive":"outline",onClick:g?J:z,className:g?"animate-pulse":"","data-testid":"button-reconstruction-mic",children:g?i.jsx(on,{className:"h-4 w-4"}):i.jsx(eo,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-1 justify-center p-2 bg-muted rounded-md",style:{touchAction:"none"},children:[W_.map(V=>i.jsx("div",{draggable:!h,onDragStart:H=>te(H,V),onDragEnd:ne,onTouchStart:H=>$e(H,V),onClick:()=>!h&&m(f===V?null:V),className:`w-8 h-8 rounded transition-all cursor-grab active:cursor-grabbing ${f===V?"ring-2 ring-amber-400 bg-amber-100":_===V?"opacity-50":"hover:bg-muted-foreground/20"} ${h?"opacity-50 cursor-not-allowed":""}`,"data-testid":`piece-palette-${V}`,children:i.jsx("img",{src:Dd[V],alt:V,className:"w-full h-full pointer-events-none",draggable:!1})},V)),i.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center bg-red-100 hover:bg-red-200 cursor-pointer",onClick:()=>m(null),"data-testid":"piece-palette-eraser",children:i.jsx(xy,{className:"h-4 w-4 text-red-600"})})]}),i.jsx("div",{className:`aspect-square w-full max-w-xs mx-auto rounded ${vr}`,children:i.jsx("div",{className:"grid grid-cols-8 grid-rows-8 w-full h-full border border-stone-400",style:{touchAction:"none"},children:Array.from({length:64}).map((V,H)=>{const se=Math.floor(H/8),le=H%8,re=t==="white"?se:7-se,Te=t==="white"?le:7-le,Se=(se+le)%2===0,xe=c[re][Te],We=Y[re][Te],Qt=`${re}-${Te}`,Ue=F.has(Qt);let Yt=Se?"bg-amber-100":"bg-amber-700";const Xt=xe===We,Vn=!xe&&We;return h&&(Xt?xe!==null&&(Yt=Se?"bg-green-200":"bg-green-600"):Yt=Se?"bg-red-200":"bg-red-500"),i.jsxs("div",{onClick:()=>ge(re,Te),onDragOver:Ne,onDrop:En=>ae(En,re,Te),className:`relative flex items-center justify-center cursor-pointer ${Yt} ${!h&&(f||_)?"hover:ring-2 hover:ring-amber-400 hover:ring-inset":""}`,style:{touchAction:"none"},"data-testid":`reconstruction-square-${Ot[le]}${St[se]}`,children:[h&&We&&!Xt&&i.jsx("img",{src:Dd[We],alt:`actual-${We}`,className:"absolute w-[85%] h-[85%] opacity-30 pointer-events-none",draggable:!1}),xe&&i.jsx("img",{src:Dd[xe],alt:xe,className:`w-[85%] h-[85%] pointer-events-none z-10 transition-transform ${Ue?"animate-[voicePop_0.2s_ease-out]":""} ${h&&!Xt?"animate-[shake_0.5s_ease-in-out]":""}`,draggable:!1}),h&&Vn&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center animate-[fadeSlideIn_0.6s_ease-out_forwards]",style:{animationDelay:`${(re*8+Te)*30}ms`},children:i.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"})}),le===0&&i.jsx("span",{className:"absolute top-0.5 left-0.5 text-[8px] font-semibold select-none opacity-70",children:St[se]}),se===7&&i.jsx("span",{className:"absolute bottom-0.5 right-0.5 text-[8px] font-semibold select-none opacity-70",children:Ot[le]})]},H)})})}),i.jsx("div",{className:"flex gap-2",children:h?i.jsxs("div",{className:"flex gap-2 w-full",children:[o&&i.jsxs(X,{variant:"outline",size:"sm",onClick:o,className:"flex-1","data-testid":"button-reconstruction-view-report",children:[i.jsx(iy,{className:"mr-1 h-4 w-4"}),"View Report"]}),i.jsx(X,{size:"sm",onClick:s||r,className:"flex-1 bg-amber-400 hover:bg-amber-500 text-stone-900","data-testid":"button-reconstruction-continue",children:"Main Menu"})]}):i.jsxs(i.Fragment,{children:[i.jsxs(X,{variant:"outline",size:"sm",onClick:Me,className:"flex-1","data-testid":"button-reconstruction-reset",children:[i.jsx(py,{className:"mr-1 h-4 w-4"}),"Reset"]}),i.jsx(X,{variant:"outline",size:"sm",onClick:()=>{J(),r()},className:"flex-1","data-testid":"button-reconstruction-skip",children:"Skip"}),i.jsxs(X,{size:"sm",onClick:Ae,className:"flex-1 bg-amber-400 hover:bg-amber-500 text-stone-900","data-testid":"button-reconstruction-submit",children:[i.jsx(c2,{className:"mr-1 h-4 w-4"}),"Check"]})]})}),h&&i.jsx("div",{className:"text-center text-sm",children:v!==null&&v>=80?i.jsxs("p",{className:"text-green-600 flex items-center justify-center gap-1",children:[i.jsx(lm,{className:"h-4 w-4"})," Excellent memory!"]}):v!==null&&v>=50?i.jsx("p",{className:"text-amber-600",children:"Good effort! Keep practicing."}):i.jsxs("p",{className:"text-red-600 flex items-center justify-center gap-1",children:[i.jsx(Si,{className:"h-4 w-4"})," Keep training your visualization!"]})})]})]})}function Z_({responseTimes:e}){if(e.length<3)return i.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"Not enough moves to display stamina graph"});const t=Math.max(...e,1),n=e.slice(0,40);n.length;const r={opening:e.slice(0,10),middlegame:e.slice(10,30),endgame:e.slice(30)},s=r.opening.length>0?r.opening.reduce((l,c)=>l+c,0)/r.opening.length:0,o=r.endgame.length>0?r.endgame.reduce((l,c)=>l+c,0)/r.endgame.length:0,a=s>0?Math.round((o-s)/s*100):0;return i.jsxs("div",{className:"space-y-3","data-testid":"mental-stamina-graph",children:[i.jsx("div",{className:"h-24 flex items-end bg-muted/30 rounded-md p-2 overflow-hidden",children:n.map((l,c)=>{const u=Math.max(5,l/t*100);let f="bg-amber-400";return c<10?f="bg-green-500":c>=30&&(f="bg-red-400"),i.jsx("div",{className:`${f} rounded-t-sm transition-all flex-1 min-w-[3px] max-w-[8px]`,style:{height:`${u}%`,marginRight:"1px"},title:`Move ${c+1}: ${Yo(l)}`,"data-testid":`stamina-bar-${c}`},c)})}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded"}),i.jsx("span",{children:"Opening"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded"}),i.jsx("span",{children:"Middlegame"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-red-400 rounded"}),i.jsx("span",{children:"Endgame"})]})]}),a!==0&&i.jsx("div",{className:"flex items-center justify-center gap-2 text-sm",children:a>0?i.jsxs(i.Fragment,{children:[i.jsx(yy,{className:"h-4 w-4 text-red-500"}),i.jsxs("span",{className:"text-red-500",children:[a,"% slower in endgame"]})]}):i.jsxs(i.Fragment,{children:[i.jsx(wy,{className:"h-4 w-4 text-green-500"}),i.jsxs("span",{className:"text-green-500",children:[Math.abs(a),"% faster in endgame"]})]})})]})}function J_({squareInquiries:e}){const t=["a","b","c","d","e","f","g","h"],n=["8","7","6","5","4","3","2","1"],r={};for(const a of e){const l=a.toLowerCase();r[l]=(r[l]||0)+1}const s=Math.max(...Object.values(r),1),o=a=>{const l=r[a]||0;if(l===0)return"bg-muted/30";const c=l/s*100;return c<25?"bg-amber-200 dark:bg-amber-900/40":c<50?"bg-amber-400 dark:bg-amber-700/60":c<75?"bg-red-400 dark:bg-red-700/70":"bg-red-600 dark:bg-red-600/80"};return e.length===0?i.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"No square inquiries this game"}):i.jsxs("div",{className:"space-y-2","data-testid":"spatial-blur-heatmap",children:[i.jsx("div",{className:"grid grid-cols-8 gap-0.5 aspect-square max-w-[180px] mx-auto",children:n.map(a=>t.map(l=>{const c=`${l}${a}`,u=r[c]||0;return i.jsx("div",{className:`${o(c)} rounded-sm flex items-center justify-center text-[8px] font-mono`,title:`${c.toUpperCase()}: ${u} inquiries`,"data-testid":`heatmap-square-${c}`,children:u>0&&i.jsx("span",{className:"text-foreground/70",children:u})},c)}))}),i.jsxs("p",{className:"text-xs text-muted-foreground text-center","data-testid":"text-total-inquiries",children:[e.length," total inquiries"]})]})}function eM({open:e,gameResult:t,playerColor:n,clarityScore:r,responseTimes:s,squareInquiries:o,reconstructionScore:a,reconstructionVoicePurity:l,reconstructionEnabled:c,onRematch:u,onMainMenu:f,onAnalyze:m}){const h=t==="white_win"&&n==="white"||t==="black_win"&&n==="black",y=t==="draw"?"Game Drawn":h?"Victory":"Defeat",v=t==="draw"?"text-amber-500":h?"text-green-500":"text-red-500",p=s.length>0?s.reduce((b,x)=>b+x,0)/s.length:0;return i.jsx(Ci,{open:e,children:i.jsxs(uo,{className:"max-w-md max-h-[90vh] overflow-y-auto [&>button.absolute]:hidden",onPointerDownOutside:b=>b.preventDefault(),onInteractOutside:b=>b.preventDefault(),onEscapeKeyDown:b=>b.preventDefault(),children:[i.jsxs(X,{variant:"ghost",size:"icon",className:"absolute right-4 top-4 h-6 w-6 rounded-sm opacity-70 hover:opacity-100",onClick:f,"data-testid":"button-postmortem-close",children:[i.jsx(Si,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]}),i.jsx(fo,{children:i.jsxs(ho,{className:"flex items-center gap-3",children:[i.jsx(On,{className:`h-6 w-6 ${v}`}),i.jsx("span",{className:v,children:y})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(De,{className:"bg-muted/30 border-0",children:i.jsxs(Ve,{className:"p-3 text-center",children:[i.jsx(sy,{className:"h-5 w-5 mx-auto mb-1 text-amber-500"}),i.jsxs("p",{className:"text-2xl font-bold text-amber-500",children:[r,"%"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Reconstruction Score"})]})}),i.jsx(De,{className:"bg-muted/30 border-0",children:i.jsxs(Ve,{className:"p-3 text-center",children:[i.jsx(Js,{className:"h-5 w-5 mx-auto mb-1 text-blue-500"}),i.jsx("p",{className:"text-2xl font-bold",children:Yo(p)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Response"})]})})]}),i.jsx(Cr,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(WC,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm font-medium",children:"Mental Stamina"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Response time changes throughout the game"}),i.jsx(Z_,{responseTimes:s})]}),i.jsx(Cr,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(dy,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm font-medium",children:"Spatial Blurs"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Squares you needed to inquire about"}),i.jsx(J_,{squareInquiries:o})]}),c&&a!==null&&i.jsxs(i.Fragment,{children:[i.jsx(Cr,{}),i.jsxs("div",{className:"space-y-2","data-testid":"reconstruction-stats",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(a2,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm font-medium",children:"Board Reconstruction"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(De,{className:"bg-muted/30 border-0",children:i.jsxs(Ve,{className:"p-3 text-center",children:[i.jsxs("p",{className:`text-xl font-bold ${a>=80?"text-green-500":a>=50?"text-amber-500":"text-red-500"}`,children:[a,"%"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Accuracy"})]})}),l!==null&&i.jsx(De,{className:"bg-muted/30 border-0",children:i.jsxs(Ve,{className:"p-3 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-1 mb-0.5",children:[i.jsx(on,{className:"h-3 w-3 text-purple-500"}),i.jsxs("p",{className:`text-xl font-bold ${l>=80?"text-purple-500":l>=50?"text-amber-500":"text-muted-foreground"}`,children:[l,"%"]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Voice Purity"})]})})]})]})]}),i.jsx(Cr,{}),m&&i.jsxs(X,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:m,"data-testid":"button-postmortem-analyze",children:[i.jsx(gy,{className:"mr-2 h-4 w-4"}),"Analyze Game"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(X,{className:"flex-1 bg-black hover:bg-stone-800 text-white",onClick:u,"data-testid":"button-postmortem-rematch",children:[i.jsx(py,{className:"mr-2 h-4 w-4"}),"Rematch"]}),i.jsxs(X,{variant:"outline",className:"flex-1 bg-amber-400 hover:bg-amber-500 text-black border-black",onClick:f,"data-testid":"button-postmortem-menu",children:[i.jsx(s2,{className:"mr-2 h-4 w-4"}),"Menu"]})]})]})]})})}const dv=10;function fv(e){return Math.max(-dv,Math.min(dv,e))}class tM{constructor(){this.worker=null,this.isReady=!1,this.isSearching=!1,this.messageHandlers=[],this.initPromise=null,this.requestQueue=Promise.resolve()}async init(){if(!this.isReady)return this.initPromise?this.initPromise:(this.initPromise=new Promise((t,n)=>{try{typeof WebAssembly=="object"&&WebAssembly.validate(Uint8Array.of(0,97,115,109,1,0,0,0))||console.warn("[ClientStockfish] WebAssembly not supported, using slower JS fallback");const s="/stockfish/stockfish-17.1-lite-single-03e3232.js";this.worker=new Worker(s),this.worker.onmessage=l=>{const c=typeof l.data=="string"?l.data:"";for(const u of this.messageHandlers)u(c)},this.worker.onerror=l=>{console.error("[ClientStockfish] Worker error:",l),n(l)},this.sendCommand("uci");let o=!1;const a=l=>{l==="uciok"&&(o=!0,this.sendCommand("setoption name Hash value 16"),console.log("[ClientStockfish] Set Hash table to 16MB for mobile optimization"),this.sendCommand("isready")),l==="readyok"&&o&&(this.removeHandler(a),this.isReady=!0,console.log("[ClientStockfish] Engine ready"),t())};this.addHandler(a),setTimeout(()=>{this.isReady||n(new Error("Stockfish initialization timeout"))},3e4)}catch(r){n(r)}}),this.initPromise)}addHandler(t){this.messageHandlers.push(t)}removeHandler(t){const n=this.messageHandlers.indexOf(t);n>-1&&this.messageHandlers.splice(n,1)}sendCommand(t){this.worker&&this.worker.postMessage(t)}async getBestMove(t,n={}){const r=()=>new Promise(async(o,a)=>{const l=setTimeout(()=>{a(new Error("getBestMove timeout"))},3e4);try{this.isReady||await this.init(),n.skillLevel!==void 0&&this.sendCommand(`setoption name Skill Level value ${n.skillLevel}`),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`);let c="go";n.depth?c+=` depth ${n.depth}`:n.nodes?c+=` nodes ${n.nodes}`:n.moveTime?c+=` movetime ${n.moveTime}`:c+=" depth 15",this.isSearching=!0,this.sendCommand(c);let u,f;const m=h=>{if(h.startsWith("info depth")){const y=h.match(/depth (\d+)/),v=h.match(/score cp (-?\d+)/),p=h.match(/score mate (-?\d+)/);y&&(f=parseInt(y[1])),v&&(u=parseInt(v[1])/100),p&&(u=parseInt(p[1])>0?100:-100)}if(h.startsWith("bestmove")){clearTimeout(l),this.removeHandler(m),this.isSearching=!1;const y=h.match(/bestmove (\S+)/);y?o({bestMove:y[1],evaluation:u,depth:f}):a(new Error("Failed to parse bestmove"))}};this.addHandler(m)}catch(c){clearTimeout(l),this.isSearching=!1,a(c)}}),s=this.requestQueue.then(r,r);return this.requestQueue=s.catch(()=>{}),s}async analyzePosition(t,n=1e6){const r=()=>new Promise(async(o,a)=>{const l=setTimeout(()=>{a(new Error("analyzePosition timeout"))},6e4);try{this.isReady||await this.init(),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`),this.isSearching=!0,this.sendCommand(`go nodes ${n}`);let c=0,u=0,f="",m=[],h=!1,y;const v=p=>{if(p.startsWith("info depth")&&p.includes(" pv ")){const b=p.match(/depth (\d+)/),x=p.match(/score cp (-?\d+)/),g=p.match(/score mate (-?\d+)/),w=p.match(/ pv (.+)/);if(b&&(u=parseInt(b[1])),x&&(c=parseInt(x[1])/100,h=!1,y=void 0),g){const k=parseInt(g[1]);c=k>0?999:-999,h=!0,y=Math.abs(k)}w&&(m=w[1].trim().split(" "))}if(p.startsWith("bestmove")){clearTimeout(l),this.removeHandler(v),this.isSearching=!1;const b=p.match(/bestmove (\S+)/);b?(f=b[1],o({evaluation:fv(c),bestMove:f,bestMoveEval:fv(c),principalVariation:m,depth:u,isMate:h,mateIn:y})):a(new Error("Failed to parse bestmove"))}};this.addHandler(v)}catch(c){clearTimeout(l),this.isSearching=!1,a(c)}}),s=this.requestQueue.then(r,r);return this.requestQueue=s.catch(()=>{}),s}async getTopMoves(t,n=3,r=1e6,s){const o=s===void 0||s==="w"?1:-1,a=()=>new Promise(async(c,u)=>{const f=setTimeout(()=>{this.sendCommand("setoption name MultiPV value 1"),c([])},3e4);try{this.isReady||await this.init(),this.sendCommand("stop"),this.sendCommand("ucinewgame"),this.sendCommand(`setoption name MultiPV value ${n}`),this.sendCommand(`position fen ${t}`),this.isSearching=!0,this.sendCommand(`go nodes ${r}`);const m=new Map,h=y=>{if(y.startsWith("info depth")&&y.includes(" pv ")){const v=y.match(/multipv (\d+)/),p=y.match(/score cp (-?\d+)/),b=y.match(/score mate (-?\d+)/),x=y.match(/ pv (.+)/),g=v?parseInt(v[1]):1;if(x){const w=x[1].trim().split(" "),k=w[0];let S=0,C=!1,N;if(p&&(S=parseInt(p[1])/100*o),b){const j=parseInt(b[1]);S=(j>0?999:-999)*o,C=!0,N=Math.abs(j)}m.set(g,{move:k,evaluation:S,isMate:C,mateIn:N,principalVariation:w})}}if(y.startsWith("bestmove")){clearTimeout(f),this.removeHandler(h),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1");const v=[];for(let p=1;p<=n;p++){const b=m.get(p);b&&v.push(b)}c(v)}};this.addHandler(h)}catch(m){clearTimeout(f),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1"),u(m)}}),l=this.requestQueue.then(a,a);return this.requestQueue=l.catch(()=>{}),l}async getBotMove(t,n){const r=u=>u<=400?0:u<=600?2:u<=800?4:u<=1e3?6:u<=1200?8:u<=1400?11:u<=1600?14:u<=1800?17:u<=2e3?18:u<=2200?19:20,s=u=>u<=600?5:u<=1e3?4:u<=1400?3:u<=1800?2:1,o=u=>u<=400?500:u<=600?1e3:u<=800?2e3:u<=1e3?5e3:u<=1200?1e4:u<=1400?2e4:u<=1600?5e4:u<=1800?1e5:u<=2e3?25e4:u<=2200?5e5:u<=2400?1e6:15e5,a=u=>u<=400||u<=600?1:u<=800?2:u<=1e3?3:u<=1200?4:u<=1400?5:u<=1600?6:0,l=()=>new Promise(async(u,f)=>{const m=setTimeout(()=>{f(new Error("getBotMove timeout"))},3e4);try{this.isReady||await this.init();const h=r(n),y=s(n),v=o(n),p=a(n);this.sendCommand(`setoption name Skill Level value ${h}`),this.sendCommand("setoption name UCI_LimitStrength value true"),this.sendCommand(`setoption name UCI_Elo value ${Math.min(Math.max(n,400),3200)}`),this.sendCommand(`setoption name MultiPV value ${y}`),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`),this.isSearching=!0,p>0?this.sendCommand(`go depth ${p} nodes ${v}`):this.sendCommand(`go nodes ${v}`);const b=new Map,x=g=>{var w;if(g.startsWith("info depth")&&g.includes(" pv ")){const k=g.match(/multipv (\d+)/),S=g.match(/ pv (\S+)/),C=g.match(/score cp (-?\d+)/),N=k?parseInt(k[1]):1,j=S?S[1]:null,R=C?parseInt(C[1])/100:void 0;j&&b.set(N,{move:j,eval:R})}if(g.startsWith("bestmove")){clearTimeout(m),this.removeHandler(x),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1"),this.sendCommand("setoption name UCI_LimitStrength value false"),this.sendCommand("setoption name Skill Level value 20");let k;const S=Array.from(b.values()).slice(0,y);if(S.length===0){const C=g.match(/bestmove (\S+)/);k=C?C[1]:void 0}else if(S.length===1)k=S[0].move;else{const C=Math.random()*100;n<=600?C<40?k=S[0].move:C<70&&S[1]?k=S[1].move:C<90&&S[2]?k=S[2].move:k=S[Math.min(Math.floor(C/25),S.length-1)].move:n<=1e3?C<55?k=S[0].move:C<80&&S[1]?k=S[1].move:C<95&&S[2]?k=S[2].move:k=S[Math.min(Math.floor(C/25),S.length-1)].move:n<=1400?C<70?k=S[0].move:C<90&&S[1]?k=S[1].move:S[2]?k=S[2].move:k=S[0].move:n<=1800?C<85?k=S[0].move:C<97&&S[1]?k=S[1].move:S[2]?k=S[2].move:k=S[0].move:C<95?k=S[0].move:S[1]?k=S[1].move:k=S[0].move}k?u({bestMove:k,evaluation:(w=b.get(1))==null?void 0:w.eval,isFreeCapture:!1}):f(new Error("Failed to get bot move"))}};this.addHandler(x)}catch(h){clearTimeout(m),this.isSearching=!1,this.sendCommand("setoption name MultiPV value 1"),this.sendCommand("setoption name UCI_LimitStrength value false"),this.sendCommand("setoption name Skill Level value 20"),f(h)}}),c=this.requestQueue.then(l,l);return this.requestQueue=c.catch(()=>{}),c}async getDepthLimitedMove(t,n){const r=()=>new Promise(async(o,a)=>{const l=setTimeout(()=>{a(new Error("getDepthLimitedMove timeout"))},3e4);try{this.isReady||await this.init(),this.sendCommand("setoption name UCI_LimitStrength value false"),this.sendCommand("setoption name Skill Level value 20"),this.sendCommand("setoption name MultiPV value 1"),this.sendCommand("ucinewgame"),this.sendCommand(`position fen ${t}`),this.isSearching=!0,this.sendCommand(`go depth ${n}`);let c,u;const f=m=>{if(m.startsWith("info depth")&&m.includes(" pv ")){const h=m.match(/ pv (\S+)/),y=m.match(/score cp (-?\d+)/),v=m.match(/score mate (-?\d+)/);h&&(c=h[1]),y?u=parseInt(y[1])/100:v&&(u=parseInt(v[1])>0?100:-100)}if(m.startsWith("bestmove")){clearTimeout(l),this.removeHandler(f),this.isSearching=!1;const h=m.match(/bestmove (\S+)/);h&&(c=h[1]),c?o({bestMove:c,evaluation:u,isFreeCapture:!1}):a(new Error("Failed to get depth-limited move"))}};this.addHandler(f)}catch(c){clearTimeout(l),this.isSearching=!1,a(c)}}),s=this.requestQueue.then(r,r);return this.requestQueue=s.catch(()=>{}),s}stopAnalysis(){this.worker&&this.isSearching&&(this.sendCommand("stop"),this.isSearching=!1,console.debug("[ClientStockfish] Analysis halted safely."))}shutdown(){this.worker&&(this.sendCommand("quit"),this.worker.terminate(),this.worker=null,this.isReady=!1,this.initPromise=null)}isInitialized(){return this.isReady}}const Ba=new tM;function nM({evaluation:e,isLoading:t,isMate:n,mateIn:r,playerColor:s}){const o=e!==null?s==="black"?-e:e:null,l=e!==null?(y=>n?y>0?100:0:50+Math.max(-10,Math.min(10,y))/10*50)(e):50,c=y=>y===null?"...":n&&r!==void 0?y>0?`M${r}`:`-M${r}`:`${y>=0?"+":""}${y.toFixed(1)}`,u=s==="black",f=u?"bg-white":"bg-stone-900",m=u?"bg-stone-900":"bg-white",h=u?l:100-l;return i.jsxs("div",{className:"flex flex-col items-center w-full h-full","data-testid":"evaluation-bar",children:[i.jsx("div",{className:"text-xs font-mono font-bold mb-1 flex-shrink-0","data-testid":"evaluation-value",children:c(o)}),i.jsxs("div",{className:`relative w-full rounded overflow-hidden border border-border ${m} flex-1 min-h-0`,children:[i.jsx("div",{className:`absolute top-0 left-0 right-0 ${f} transition-all duration-300`,style:{height:`${h}%`}}),i.jsx("div",{className:"absolute left-0 right-0 h-[2px] bg-amber-500",style:{top:"50%",transform:"translateY(-50%)"}}),t&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:i.jsx(fy,{className:"h-3 w-3 animate-spin text-white"})})]})]})}function rM({position:e,flipped:t,lastMove:n,bestMoveSquares:r}){const s=new qr(e),o=["a","b","c","d","e","f","g","h"],a=["8","7","6","5","4","3","2","1"],l=t?[...o].reverse():o,c=t?[...a].reverse():a,u={K:"",Q:"",R:"",B:"",N:"",P:"",k:"",q:"",r:"",b:"",n:"",p:""};return i.jsx("div",{className:"aspect-square w-full","data-testid":"analysis-board",children:i.jsx("div",{className:"grid grid-cols-8 grid-rows-8 w-full h-full border border-stone-400",children:c.map(f=>l.map(m=>{const h=`${m}${f}`,y=s.get(h),v=(o.indexOf(m)+a.indexOf(f))%2===0,p=n&&(n.from===h||n.to===h),b=r&&(r.from===h||r.to===h);return i.jsx("div",{className:`aspect-square flex items-center justify-center text-2xl sm:text-3xl
                  ${v?"bg-amber-100 dark:bg-amber-200":"bg-amber-600 dark:bg-amber-700"}
                  ${p?"ring-2 ring-inset ring-amber-400":""}
                  ${b?"ring-2 ring-inset ring-emerald-500":""}
                `,"data-testid":`analysis-square-${h}`,children:y&&i.jsx("span",{className:y.color==="w"?"text-white drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)]":"text-black",children:u[y.color==="w"?y.type.toUpperCase():y.type]})},h)}))})})}function hv({moveHistory:e,playerColor:t,onClose:n,gameResult:r,botElo:s}){const{toast:o}=iu(),[a,l]=d.useState(0),[c,u]=d.useState(!0),[f,m]=d.useState(!1),[h,y]=d.useState(!0),[v,p]=d.useState(0),[b,x]=d.useState(new Map),g=d.useRef(!1);d.useEffect(()=>{const L=document.getElementById(`move-${a}`);L&&L.scrollIntoView({behavior:"smooth",block:"nearest"})},[a]);const w=d.useMemo(()=>{const L=new qr,z=r==="white_win"?"1-0":r==="black_win"?"0-1":r==="draw"?"1/2-1/2":"*",J=new Date,ie=`${J.getFullYear()}.${String(J.getMonth()+1).padStart(2,"0")}.${String(J.getDate()).padStart(2,"0")}`;return L.header("Event","Blindfold Chess Challenge","Site","Mobile App","Date",ie,"Round","?","White",t==="white"?"User":`Stockfish (Elo ${s||"?"})`,"Black",t==="black"?"User":`Stockfish (Elo ${s||"?"})`,"Result",z),e.forEach(ge=>{try{L.move(ge)}catch{console.warn("[PGN] Could not add move:",ge)}}),L.pgn()},[e,t,r,s]),k=async()=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(w);else{const L=document.createElement("textarea");L.value=w,L.style.position="fixed",L.style.left="-9999px",document.body.appendChild(L),L.focus(),L.select(),document.execCommand("copy"),document.body.removeChild(L)}m(!0),o({title:"PGN Copied",description:"Game notation copied to clipboard",duration:2e3}),setTimeout(()=>m(!1),2e3)}catch(L){console.error("[PGN] Copy failed:",L),o({title:"Copy Failed",description:"Could not copy to clipboard",variant:"destructive",duration:2e3})}},S=()=>{const L=new Date,J=`blindfold-game-${`${L.getFullYear()}${String(L.getMonth()+1).padStart(2,"0")}${String(L.getDate()).padStart(2,"0")}-${String(L.getHours()).padStart(2,"0")}${String(L.getMinutes()).padStart(2,"0")}`}.pgn.txt`,ie=document.createElement("a"),ge=new Blob([w],{type:"text/plain"});ie.href=URL.createObjectURL(ge),ie.download=J,document.body.appendChild(ie),ie.click(),document.body.removeChild(ie),URL.revokeObjectURL(ie.href),o({title:"PGN Downloaded",description:J,duration:2e3})},C=d.useMemo(()=>{const L=[],z=new qr;L.push({fen:z.fen(),lastMove:null});for(let J=0;J<e.length;J++)try{const ie=z.move(e[J]);ie?L.push({fen:z.fen(),lastMove:{from:ie.from,to:ie.to}}):console.warn(`[Analysis] Move returned null at index ${J}: ${e[J]}`)}catch(ie){console.warn(`[Analysis] Skipping invalid move at index ${J}: ${e[J]}`,ie)}return console.log(`[Analysis] Built ${L.length} positions from ${e.length} moves`),L},[e]);d.useEffect(()=>((async()=>{y(!0),p(0),g.current=!1;const z=new Map,J=C.length;for(let ie=0;ie<J&&!g.current;ie++){const{fen:ge}=C[ie];try{const te=await Ba.analyzePosition(ge,5e5);if(g.current)break;const Ne=ge.split(" ")[1]==="b",ae=Ne?-te.evaluation:te.evaluation,$e=te.mateIn!==void 0&&Ne?-te.mateIn:te.mateIn;z.set(ie,{eval:ae,isMate:te.isMate,mateIn:$e!==void 0?Math.abs($e):void 0,bestMove:te.bestMove})}catch(te){if(g.current)break;console.error(`[Analysis] Error evaluating position ${ie}:`,te)}g.current||(p(Math.round((ie+1)/J*100)),x(new Map(z))),await new Promise(te=>setTimeout(te,10))}g.current||y(!1)})(),()=>{g.current=!0}),[C]);const N=C[a]||C[0],j=N.fen,R=N.lastMove,_=b.get(a),B=(_==null?void 0:_.eval)??null,D=(_==null?void 0:_.isMate)??!1,I=_==null?void 0:_.mateIn,O=(_==null?void 0:_.bestMove)??null,F=()=>l(0),q=()=>l(Math.max(0,a-1)),Q=()=>l(Math.min(C.length-1,a+1)),T=()=>l(C.length-1),$=L=>l(Math.min(L,C.length-1)),Y=(()=>{const L=[];for(let z=0;z<e.length;z+=2)L.push({moveNumber:Math.floor(z/2)+1,white:e[z],black:e[z+1],whiteIndex:z+1,blackIndex:e[z+1]?z+2:void 0});return L})(),be=L=>!L||L.length<4?null:{from:L.slice(0,2),to:L.slice(2,4)},Pe=L=>{if(!L)return null;try{const J=new qr(j).move({from:L.slice(0,2),to:L.slice(2,4),promotion:L.length>4?L[4]:void 0});return J?J.san:L}catch{return L}},_e=c?be(O):null,fe=Pe(O);return h&&v<100?i.jsxs("div",{className:"fixed inset-0 z-50 bg-background flex flex-col","data-testid":"analysis-view",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Game Analysis"}),i.jsx(X,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-analysis-close",children:i.jsx(Si,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 gap-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(fy,{className:"h-6 w-6 animate-spin text-amber-500"}),i.jsx("span",{className:"text-lg font-medium",children:"Analyzing game..."})]}),i.jsxs("div",{className:"w-full max-w-xs space-y-2",children:[i.jsx(fi,{value:v,className:"h-3"}),i.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:[v,"% complete (",Math.round(v/100*C.length)," / ",C.length," positions)"]})]}),i.jsx("p",{className:"text-sm text-muted-foreground text-center max-w-sm",children:"This will take a few seconds. Once complete, you can navigate through moves instantly."})]})]}):i.jsxs("div",{className:"fixed inset-0 z-50 bg-background flex flex-col","data-testid":"analysis-view",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Game Analysis"}),i.jsx(X,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-analysis-close",children:i.jsx(Si,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[i.jsxs("div",{className:"flex flex-col gap-3 items-center",children:[i.jsxs("div",{className:"grid grid-cols-[24px_1fr] gap-2 w-full max-w-[352px]",children:[i.jsx(nM,{evaluation:B,isLoading:!1,isMate:D,mateIn:I,playerColor:t}),i.jsx(rM,{position:j,flipped:t==="black",lastMove:R,bestMoveSquares:_e})]}),i.jsxs("div",{className:"flex justify-center gap-1",children:[i.jsx(X,{variant:"outline",size:"icon",onClick:F,disabled:a===0,"data-testid":"button-analysis-start",children:i.jsx(YC,{className:"h-4 w-4"})}),i.jsx(X,{variant:"outline",size:"icon",onClick:q,disabled:a===0,"data-testid":"button-analysis-back",children:i.jsx(cm,{className:"h-4 w-4"})}),i.jsx(X,{variant:"outline",size:"icon",onClick:Q,disabled:a===C.length-1,"data-testid":"button-analysis-forward",children:i.jsx(KC,{className:"h-4 w-4"})}),i.jsx(X,{variant:"outline",size:"icon",onClick:T,disabled:a===C.length-1,"data-testid":"button-analysis-end",children:i.jsx(XC,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm","data-testid":"best-move-display",children:[i.jsx(X,{variant:c?"default":"outline",size:"sm",onClick:()=>u(!c),className:"h-7 px-2","data-testid":"button-toggle-best-move",children:c?"Hide Best":"Show Best"}),c&&fe&&i.jsxs("span",{className:"font-mono bg-emerald-500/20 text-emerald-600 dark:text-emerald-400 px-2 py-1 rounded","data-testid":"text-best-move",children:["Best: ",fe]})]})]}),i.jsxs("div",{className:"flex items-center justify-between mt-4 mb-2",children:[i.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Move List"}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs(X,{variant:"outline",size:"sm",onClick:k,className:"h-7 px-2","data-testid":"button-copy-pgn",children:[f?i.jsx(lm,{className:"h-3 w-3 mr-1"}):i.jsx(e2,{className:"h-3 w-3 mr-1"}),f?"Copied":"Copy"]}),i.jsxs(X,{variant:"outline",size:"sm",onClick:S,className:"h-7 px-2","data-testid":"button-download-pgn",children:[i.jsx(t2,{className:"h-3 w-3 mr-1"}),"Download"]})]})]}),i.jsx(De,{className:"p-3 max-h-40 overflow-y-auto scroll-smooth","data-testid":"analysis-move-list",children:i.jsx("div",{className:"grid grid-cols-[auto_1fr_1fr] gap-x-3 gap-y-1 text-sm font-mono",children:Y.map(L=>i.jsxs(d.Fragment,{children:[i.jsxs("span",{className:"text-muted-foreground",children:[L.moveNumber,"."]}),i.jsx("button",{id:`move-${L.whiteIndex}`,onClick:()=>$(L.whiteIndex),className:`text-left px-1 rounded hover:bg-muted transition-colors ${a===L.whiteIndex?"bg-amber-400 text-black font-bold":""}`,"data-testid":`move-white-${L.moveNumber}`,children:L.white}),L.black?i.jsx("button",{id:`move-${L.blackIndex}`,onClick:()=>$(L.blackIndex),className:`text-left px-1 rounded hover:bg-muted transition-colors ${a===L.blackIndex?"bg-amber-400 text-black font-bold":""}`,"data-testid":`move-black-${L.moveNumber}`,children:L.black}):i.jsx("span",{})]},L.moveNumber))})})]})]})}const Fd=Is("KeepAwake",{web:()=>Xr(()=>import("./web-BTqB2zM-.js"),[]).then(e=>new e.KeepAwakeWeb)});var Xe;(function(e){e.Heavy="HEAVY",e.Medium="MEDIUM",e.Light="LIGHT"})(Xe||(Xe={}));var Pi;(function(e){e.Success="SUCCESS",e.Warning="WARNING",e.Error="ERROR"})(Pi||(Pi={}));const Qe=Is("Haptics",{web:()=>Xr(()=>import("./web-DH0Kk7ux.js"),[]).then(e=>new e.HapticsWeb)}),cS=Object.freeze(Object.defineProperty({__proto__:null,Haptics:Qe,get ImpactStyle(){return Xe},get NotificationType(){return Pi}},Symbol.toStringTag,{value:"Module"}));new BigUint64Array(768);new BigUint64Array(4);new BigUint64Array(8);const Dr=[];function sM(){if(Dr.length>0)return;let e=new Array(781);e[0]=1n;for(let t=1;t<781;t++)e[t]=e[t-1]*6364136223846793005n+1442695040888963407n&0xFFFFFFFFFFFFFFFFn;for(let t=0;t<781;t++)Dr[t]=e[t]}const oM={p:0,P:1,n:2,N:3,b:4,B:5,r:6,R:7,q:8,Q:9,k:10,K:11};function iM(e,t,n){const r=[],s=e.split("/");for(let l=0;l<8;l++){const c=s[l],u=[];for(const f of c)if(f>="1"&&f<="8")for(let m=0;m<parseInt(f);m++)u.push("");else u.push(f);r.push(u)}const o=t==="w"?"P":"p",a=t==="w"?3:4;return n>0&&r[a][n-1]===o||n<7&&r[a][n+1]===o}function aM(e){sM();const t=e.split(" "),n=t[0],r=t[1]||"w",s=t[2]||"-",o=t[3]||"-";let a=0n,l=56;for(const c of n)if(c==="/")l-=16;else if(c>="1"&&c<="8")l+=parseInt(c);else{const u=oM[c];if(u!==void 0){const f=64*u+l;f<768&&(a^=Dr[f])}l++}if(s.includes("K")&&(a^=Dr[768]),s.includes("Q")&&(a^=Dr[769]),s.includes("k")&&(a^=Dr[770]),s.includes("q")&&(a^=Dr[771]),o!=="-"){const c=o.charCodeAt(0)-97;c>=0&&c<8&&iM(n,r,c)&&(a^=Dr[772+c])}return r==="w"&&(a^=Dr[780]),a}function lM(e){const t=e&7,n=e>>3&7,r=e>>6&7,s=e>>9&7,o=e>>12&7,a="abcdefgh",l=a[r]+(s+1),c=a[t]+(n+1);let u;return o>0&&(u=["","n","b","r","q"][o]),{from:l,to:c,promotion:u}}let Bd=null,ar=[],zd=!1,Al=null;async function cM(){if(!zd)return Al||(Al=(async()=>{try{const e=await fetch("/openings.bin");if(!e.ok)throw new Error(`Failed to load opening book: ${e.status}`);Bd=await e.arrayBuffer();const t=new DataView(Bd),n=Bd.byteLength/16;ar=[];for(let r=0;r<n;r++){const s=r*16,o=t.getUint32(s,!1),a=t.getUint32(s+4,!1),l=BigInt(o)<<32n|BigInt(a),c=t.getUint16(s+8,!1),u=t.getUint16(s+10,!1);ar.push({key:l,move:c,weight:u})}ar.sort((r,s)=>r.key<s.key?-1:r.key>s.key?1:0),zd=!0,console.log(`[OpeningBook] Loaded ${n} entries from Polyglot book`)}catch(e){console.error("[OpeningBook] Failed to load opening book:",e),ar=[],zd=!0}})(),Al)}function uM(e){const t=[];let n=0,r=ar.length-1,s=-1;for(;n<=r;){const o=Math.floor((n+r)/2);ar[o].key===e?(s=o,r=o-1):ar[o].key<e?n=o+1:r=o-1}if(s===-1)return t;for(let o=s;o<ar.length&&ar[o].key===e;o++)t.push({move:ar[o].move,weight:ar[o].weight});return t}async function dM(e){await cM();const t=aM(e),r=uM(t).map(s=>{const o=lM(s.move);return{from:o.from,to:o.to,promotion:o.promotion,weight:s.weight}});return r.sort((s,o)=>o.weight-s.weight),{moves:r}}function fM(e){return e<30}function hM(e,t){const n=e.split(" ")[0];let r=0;if(t==="white")for(const s of n)s>="A"&&s<="Z"&&r++;else for(const s of n)s>="a"&&s<="z"&&r++;return r}function mM(e,t){if(!e||!e.captured)return!1;try{const r=new qr(t).moves({verbose:!0}),s=e.to;return r.some(o=>o.to===s&&o.captured)}catch{return!1}}function pM(e,t){try{const n=new qr(e),r=t.slice(0,2),s=t.slice(2,4),o=n.move({from:r,to:s,promotion:t.length>4?t[4]:void 0});return!o||!o.captured?!1:!n.moves({verbose:!0}).some(l=>l.to===s&&l.captured)}catch{return!1}}function gM(e,t,n,r,s){let o=500+Math.random()*1e3;return mM(s,n)?Math.min(o,800):(e<=10&&(o*=.7),hM(n,r)>=10&&e>10&&e<30&&(o*=1.3),t<60?o*=.5:t<180&&(o*=.7),Math.max(300,Math.min(3e3,o)))}function vM(e){const t=e.split(" ")[0];let n=0;for(const r of t)/[pnbrqkPNBRQK]/.test(r)&&n++;return n}function xM(e,t,n,r="blitz"){if(n<30)return 500;if(n<60)return 1e3;const o=r==="classical"?2:r==="rapid"?1.5:1,a=(c,u)=>(Math.random()*(u-c)+c)*1e3;let l;return e<=6?l=a(1,2):e<=10?l=a(2,3):e<=15?l=a(3,8):e<=20||t>=26?l=a(4,8):t>=20?l=a(4,7):t>=14?l=a(3,6):t>=9?l=a(2,4):l=a(1,2),l*o}function yM(e){try{const n=new qr(e).moves({verbose:!0});if(n.length===0)return null;const r=n[Math.floor(Math.random()*n.length)];return r.from+r.to+(r.promotion||"")}catch{return null}}async function wM(e,t,n,r){try{const s=r1[t]||1200,o=n1[s]||{depth:4,randomPercent:10};if(o.randomPercent>0&&Math.random()*100<o.randomPercent){const c=yM(e);if(c)return console.log(`[BotEngine] Elo ${s}: Playing random move (${o.randomPercent}% chance)`),{move:c,isBookMove:!1}}if(fM((n==null?void 0:n.length)||0)){const c=await dM(e);if(c.moves.length>0){const u=c.moves,f=u.reduce((y,v)=>y+v.weight,0);let m=Math.random()*f;for(const y of u)if(m-=y.weight,m<=0)return{move:y.from+y.to+(y.promotion||""),isBookMove:!0};const h=u[0];return{move:h.from+h.to+(h.promotion||""),isBookMove:!0}}}let a;o.depth>0?(a=await Ba.getDepthLimitedMove(e,o.depth),console.log(`[BotEngine] Elo ${s}: Depth ${o.depth} search`)):(a=await Ba.getBotMove(e,s),console.log(`[BotEngine] Elo ${s}: Unleashed node-based search`));const l=pM(e,a.bestMove);return{move:a.bestMove,evaluation:a.evaluation,isFreeCapture:l}}catch(s){return console.error("[BotEngine] Error getting bot move:",s),null}}const Vd="blindfold_chess";let ta=null,pn=null,po=!1,ah=!1,Ll=null;async function Di(){return ah?!0:Ll||(Ll=bM(),Ll)}async function bM(){try{if(po=jn.isNativePlatform(),!po)return console.log("[GameHistory] Web platform - using localStorage fallback"),!0;ta=new p1(g1);const e=await ta.checkConnectionsConsistency(),t=(await ta.isConnection(Vd,!1)).result;return e.result&&t?pn=await ta.retrieveConnection(Vd,!1):pn=await ta.createConnection(Vd,!1,"no-encryption",1,!1),await pn.open(),await pn.execute(`
      CREATE TABLE IF NOT EXISTS games (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        date TEXT NOT NULL,
        result TEXT NOT NULL,
        playerColor TEXT NOT NULL,
        botName TEXT NOT NULL,
        botElo INTEGER NOT NULL,
        moveCount INTEGER NOT NULL,
        pgn TEXT NOT NULL,
        clarityScore REAL NOT NULL,
        isFavorite INTEGER DEFAULT 0,
        timeControl TEXT NOT NULL
      );
    `),console.log("[GameHistory] Database initialized successfully"),ah=!0,!0}catch(e){return console.error("[GameHistory] Failed to initialize database:",e),ah=!0,!1}}function Ya(){try{const e=localStorage.getItem("blindfold_game_history");return e?JSON.parse(e):[]}catch{return[]}}function Zm(e){localStorage.setItem("blindfold_game_history",JSON.stringify(e))}async function mv(e){var t,n;await Di();try{if(!po){const o=Ya(),a=o.length>0?Math.max(...o.map(c=>c.id))+1:1,l={...e,id:a};return o.unshift(l),Zm(o),console.log("[GameHistory] Game saved to localStorage:",a),a}if(!pn)return console.error("[GameHistory] Database not initialized"),null;const s=await pn.run(`
      INSERT INTO games (date, result, playerColor, botName, botElo, moveCount, pgn, clarityScore, isFavorite, timeControl)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
    `,[e.date,e.result,e.playerColor,e.botName,e.botElo,e.moveCount,e.pgn,e.clarityScore,e.isFavorite?1:0,e.timeControl]);return console.log("[GameHistory] Game saved:",(t=s.changes)==null?void 0:t.lastId),((n=s.changes)==null?void 0:n.lastId)??null}catch(r){return console.error("[GameHistory] Failed to save game:",r),null}}async function SM(){await Di();try{if(!po)return Ya();if(!pn)return console.error("[GameHistory] Database not initialized"),[];const e=await pn.query("SELECT * FROM games ORDER BY date DESC;");return e.values?e.values.map(t=>({id:t.id,date:t.date,result:t.result,playerColor:t.playerColor,botName:t.botName,botElo:t.botElo,moveCount:t.moveCount,pgn:t.pgn,clarityScore:t.clarityScore,isFavorite:t.isFavorite===1,timeControl:t.timeControl})):[]}catch(e){return console.error("[GameHistory] Failed to get games:",e),[]}}async function kM(){await Di();try{if(!po)return Ya().filter(t=>t.isFavorite);if(!pn)return console.error("[GameHistory] Database not initialized"),[];const e=await pn.query("SELECT * FROM games WHERE isFavorite = 1 ORDER BY date DESC;");return e.values?e.values.map(t=>({id:t.id,date:t.date,result:t.result,playerColor:t.playerColor,botName:t.botName,botElo:t.botElo,moveCount:t.moveCount,pgn:t.pgn,clarityScore:t.clarityScore,isFavorite:t.isFavorite===1,timeControl:t.timeControl})):[]}catch(e){return console.error("[GameHistory] Failed to get favorite games:",e),[]}}async function uS(e){await Di();try{if(!po){const r=Ya(),s=r.find(o=>o.id===e);return s?(s.isFavorite=!s.isFavorite,Zm(r),s.isFavorite):!1}if(!pn)return console.error("[GameHistory] Database not initialized"),!1;const t=await pn.query("SELECT isFavorite FROM games WHERE id = ?;",[e]);if(!t.values||t.values.length===0)return!1;const n=t.values[0].isFavorite===1?0:1;return await pn.run("UPDATE games SET isFavorite = ? WHERE id = ?;",[n,e]),console.log("[GameHistory] Toggled favorite for game:",e),n===1}catch(t){return console.error("[GameHistory] Failed to toggle favorite:",t),!1}}async function NM(e){await Di();try{if(!po){const n=Ya().filter(r=>r.id!==e);return Zm(n),console.log("[GameHistory] Game deleted from localStorage:",e),!0}return pn?(await pn.run("DELETE FROM games WHERE id = ?;",[e]),console.log("[GameHistory] Game deleted:",e),!0):(console.error("[GameHistory] Database not initialized"),!1)}catch(t){return console.error("[GameHistory] Failed to delete game:",t),!1}}function CM({game:e,onView:t,onToggleFavorite:n,onDelete:r}){const s=e.result==="win"?i.jsx(On,{className:"h-5 w-5 text-amber-500"}):e.result==="loss"?i.jsx(ly,{className:"h-5 w-5 text-stone-400"}):i.jsx(hy,{className:"h-5 w-5 text-stone-500"}),o=e.result==="win"?"Victory":e.result==="loss"?"Defeat":"Draw",a=e.result==="win"?"text-green-600 dark:text-green-400":e.result==="loss"?"text-red-600 dark:text-red-400":"text-muted-foreground",l=new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),c=new Date(e.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),u=async m=>{m.stopPropagation(),jn.isNativePlatform()&&await Qe.impact({style:Xe.Light}),n()},f=m=>{m.stopPropagation(),r()};return i.jsx(De,{className:"cursor-pointer hover-elevate active-elevate-2 transition-all",onClick:t,"data-testid":`card-game-${e.id}`,children:i.jsx(Ve,{className:"p-3",children:i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i.jsx("div",{className:"flex-shrink-0",children:s}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`font-semibold ${a}`,children:o}),i.jsx("span",{className:"text-muted-foreground",children:"vs"}),i.jsx("span",{className:"font-medium truncate",children:e.botName}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",e.botElo,")"]})]}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mt-1",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(oy,{className:"h-3 w-3"}),l]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Js,{className:"h-3 w-3"}),c]}),i.jsxs("span",{children:[e.moveCount," moves"]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[i.jsx(X,{variant:"ghost",size:"icon",onClick:u,"data-testid":`button-favorite-${e.id}`,children:i.jsx(vy,{className:`h-5 w-5 ${e.isFavorite?"fill-amber-400 text-amber-400":"text-muted-foreground"}`})}),i.jsx(X,{variant:"ghost",size:"icon",onClick:f,"data-testid":`button-delete-${e.id}`,children:i.jsx(xy,{className:"h-5 w-5 text-muted-foreground hover:text-destructive"})})]})]})})})}function jM({onBack:e,onViewGame:t}){const[n,r]=d.useState([]),[s,o]=d.useState([]),[a,l]=d.useState(!0),[c,u]=d.useState(null),[f,m]=d.useState("all"),h=async()=>{l(!0);const[b,x]=await Promise.all([SM(),kM()]);r(b.filter(g=>g.moveCount>0)),o(x.filter(g=>g.moveCount>0)),l(!1)};d.useEffect(()=>{h()},[]);const y=async b=>{const x=await uS(b.id);r(g=>g.map(w=>w.id===b.id?{...w,isFavorite:x}:w)),o(x?g=>[{...b,isFavorite:!0},...g.filter(w=>w.id!==b.id)]:g=>g.filter(w=>w.id!==b.id))},v=async()=>{if(!c)return;await NM(c.id)&&(r(x=>x.filter(g=>g.id!==c.id)),o(x=>x.filter(g=>g.id!==c.id))),u(null)},p=f==="favorites"?s:n;return i.jsxs("div",{className:"min-h-screen bg-background flex flex-col","data-testid":"game-history-page",children:[i.jsxs("header",{className:"flex items-center gap-2 p-3 border-b border-border",children:[i.jsx(X,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-history-back",children:i.jsx(cm,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-lg font-semibold",children:"Game History"})]}),i.jsxs(rb,{value:f,onValueChange:m,className:"flex-1 flex flex-col",children:[i.jsx("div",{className:"px-3 pt-3",children:i.jsxs(qm,{className:"grid w-full grid-cols-2",children:[i.jsxs(Ys,{value:"all","data-testid":"tab-all-games",children:["All Games (",n.length,")"]}),i.jsxs(Ys,{value:"favorites","data-testid":"tab-favorites",children:["Favorites (",s.length,")"]})]})}),i.jsx(Xo,{value:f,className:"flex-1 mt-0 px-3 pb-3",children:i.jsx(Xm,{className:"h-[calc(100vh-140px)]",children:a?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"animate-pulse text-muted-foreground",children:"Loading games..."})}):p.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx("div",{className:"text-muted-foreground mb-2",children:f==="favorites"?"No favorite games yet":"No games played yet"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:f==="favorites"?"Star a game to add it to your favorites":"Complete a game to see it here"})]}):i.jsx("div",{className:"space-y-2 py-2",children:p.map(b=>i.jsx(CM,{game:b,onView:()=>t(b),onToggleFavorite:()=>y(b),onDelete:()=>u(b)},b.id))})})})]}),i.jsx(Oi,{open:c!==null,onOpenChange:()=>u(null),children:i.jsxs(yo,{children:[i.jsxs(wo,{children:[i.jsx(So,{children:"Delete this game from history?"}),i.jsx(ko,{children:"This action cannot be undone. The game record will be permanently removed."})]}),i.jsxs(bo,{children:[i.jsx(Co,{"data-testid":"button-delete-cancel",children:"Cancel"}),i.jsx(No,{onClick:v,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90","data-testid":"button-delete-confirm",children:"Delete"})]})]})})]})}function EM(e){const t=[],n=/\d+\.\s*(\S+)(?:\s+(\S+))?/g;let r;const s=["1-0","0-1","1/2-1/2","*"];for(;(r=n.exec(e))!==null;)r[1]&&!s.includes(r[1])&&t.push(r[1]),r[2]&&!s.includes(r[2])&&t.push(r[2]);return t}function TM({game:e,open:t,onClose:n,onAnalyze:r}){const[s,o]=d.useState((e==null?void 0:e.isFavorite)??!1);if(d.useEffect(()=>{e&&o(e.isFavorite)},[e]),!e||!t)return null;const a=e.result==="win"?i.jsx(On,{className:"h-10 w-10 text-amber-500"}):e.result==="loss"?i.jsx(ly,{className:"h-10 w-10 text-stone-400"}):i.jsx(hy,{className:"h-10 w-10 text-stone-500"}),l=e.result==="win"?"Victory":e.result==="loss"?"Defeat":"Draw",c=e.result==="win"?"text-green-600 dark:text-green-400":e.result==="loss"?"text-red-600 dark:text-red-400":"text-muted-foreground",u=new Date(e.date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),f=new Date(e.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),m=()=>{const y=EM(e.pgn);r(y)},h=async()=>{jn.isNativePlatform()&&await Qe.impact({style:Xe.Light});const y=await uS(e.id);o(y)};return i.jsxs("div",{className:"min-h-screen bg-background flex flex-col","data-testid":"history-game-report",children:[i.jsxs("header",{className:"flex items-center justify-between p-3 border-b border-border",children:[i.jsx(X,{variant:"ghost",size:"icon",onClick:n,"data-testid":"button-history-report-back",children:i.jsx(cm,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-lg font-semibold",children:"Game Details"}),i.jsx(X,{variant:"ghost",size:"icon",onClick:h,"data-testid":"button-history-report-favorite",children:i.jsx(vy,{className:`h-5 w-5 ${s?"fill-amber-400 text-amber-400":""}`})})]}),i.jsx("div",{className:"flex-1 p-4 overflow-auto",children:i.jsx(De,{children:i.jsxs(Ve,{className:"pt-6 space-y-4",children:[i.jsxs("div",{className:"flex flex-col items-center gap-3 py-4",children:[a,i.jsx("h2",{className:`text-3xl font-bold ${c}`,children:l}),i.jsxs("p",{className:"text-lg",children:["vs ",i.jsx("span",{className:"font-semibold",children:e.botName}),i.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",e.botElo,")"]})]})]}),i.jsx(Cr,{}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oy,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:u})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Js,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:f})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Played as"}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("div",{className:`w-4 h-4 rounded-full ${e.playerColor==="white"?"bg-white border border-stone-400":"bg-black"}`}),i.jsx("span",{className:"font-medium capitalize",children:e.playerColor})]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Moves"}),i.jsx("p",{className:"font-medium mt-1",children:e.moveCount})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Time Control"}),i.jsx("p",{className:"font-medium mt-1",children:e.timeControl})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Reconstruction Score"}),i.jsxs("p",{className:"font-medium mt-1",children:[Math.round(e.clarityScore),"%"]})]})]}),i.jsx(Cr,{}),i.jsxs(X,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:m,"data-testid":"button-history-analyze",children:[i.jsx(gy,{className:"mr-2 h-4 w-4"}),"Analyze Game"]})]})})})]})}const PM={p:100,n:320,b:330,r:500,q:900,k:2e4};function RM(e){if(e)return{from:e.from,to:e.to,captured:e.captured,capturedValue:e.captured?PM[e.captured]:void 0}}function _M(e){return new Promise(t=>setTimeout(t,e))}const MM={easy:{maxPeeks:Number.POSITIVE_INFINITY},medium:{maxPeeks:20},hard:{maxPeeks:10},expert:{maxPeeks:5},master:{maxPeeks:2},grandmaster:{maxPeeks:0}};function AM({historyTrigger:e,onStateChange:t,returnToTitleRef:n,onTrainNowClick:r}){const{toast:s}=iu(),[o,a]=d.useState(!0),[l,c]=d.useState(null),[u,f]=d.useState(!1),[m,h]=d.useState("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"),[y,v]=d.useState([]),[p,b]=d.useState(null),[x,g]=d.useState([]),[w,k]=d.useState(null),[S,C]=d.useState("white"),[N,j]=d.useState(null),[R,_]=d.useState(300),[B,D]=d.useState(300),[I,O]=d.useState(()=>localStorage.getItem("blindfold-settings-time")||"blitz"),[F,q]=d.useState(!1),[Q,T]=d.useState("medium"),[$,W]=d.useState("empty_board"),[Y,be]=d.useState(!0),[Pe,_e]=d.useState(Number.POSITIVE_INFINITY),[fe,L]=d.useState(!1),z=d.useRef(null),J=d.useRef(0),[ie,ge]=d.useState(0),[te,ne]=d.useState(0),Ne=d.useRef(!1),ae=d.useRef(null),$e=d.useRef([]),Me=d.useRef(0),Ae=d.useRef(0),Ot=d.useRef(0),St=d.useRef(0),vr=d.useRef(0),V=d.useRef(0),H=d.useRef(0),se=d.useRef([]),le=d.useRef(!1),re=d.useRef(null),Te=d.useRef(1200),[Se,xe]=d.useState(()=>Yf()),[We,Qt]=d.useState(()=>xa());d.useEffect(()=>{Di()},[]),d.useEffect(()=>{const K=Z=>{const oe=Z;oe.detail&&xe(oe.detail)};return window.addEventListener("blindfoldSettingsChanged",K),()=>{window.removeEventListener("blindfoldSettingsChanged",K)}},[]);const[Ue,Yt]=d.useState(null),[Xt,Vn]=d.useState(!1),[En,Zt]=d.useState(!1),[$t,Jn]=d.useState(()=>{const K=localStorage.getItem("blindfold-settings-elo");return K?Number(K):1200}),[ln,Jr]=d.useState(()=>localStorage.getItem("blindfold-settings-color")||"white"),[jo,Mr]=d.useState(!1),[Tn,Eo]=d.useState(!1),[Je,Xa]=d.useState(!1),[Eu,Tu]=d.useState(!1),[P,et]=d.useState(null),[Dt,xr]=d.useState(null),G=d.useRef(null),[Ds,kt]=d.useState(0),Vt=d.useRef(""),[es,cn]=d.useState(null),[To,Ar]=d.useState(!1),[ce,Fs]=d.useState(!1),[Fi,Po]=d.useState(null),qn=d.useRef(null),[Bs,Ro]=d.useState(null),yr=d.useRef(null),[Za,Lr]=d.useState(!1),[Pu,Ru]=d.useState([]),[_u,Ja]=d.useState([]),[Bi,zi]=d.useState(null),[Mu,_o]=d.useState(null),[zs,lt]=d.useState(!1),[E,M]=d.useState([]),[A,ue]=d.useState(!1),[me,Be]=d.useState(null),pe=d.useRef(null),er=d.useRef(300),Mo=d.useRef(300),un=d.useRef([]),Jt=d.useRef(null),Au=d.useRef(!1);d.useEffect(()=>()=>{Ba.stopAnalysis(),Jt.current&&clearInterval(Jt.current),yr.current&&clearTimeout(yr.current)},[]),d.useEffect(()=>{localStorage.setItem("blindfold-settings-elo",String($t))},[$t]),d.useEffect(()=>{localStorage.setItem("blindfold-settings-color",ln)},[ln]),d.useEffect(()=>{localStorage.setItem("blindfold-settings-time",I)},[I]),d.useEffect(()=>{e&&e>0&&ue(!0)},[e]),d.useEffect(()=>{pe.current=l,er.current=R,Mo.current=B,un.current=y},[l,R,B,y]);const el=d.useCallback(()=>{Jt.current&&(clearInterval(Jt.current),Jt.current=null),G.current&&(clearTimeout(G.current),G.current=null),c(null),f(!1),j(null),h("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"),v([]),b(null),g([]),k(null),Yt(null),Vn(!1),L(!1),xr(null),Et.stop(),J.current=0,ge(0),ne(0),Ne.current=!1,ae.current=null,$e.current=[],Me.current=0,Ae.current=0,Ot.current=0,St.current=0,vr.current=0,V.current=0,H.current=0,se.current=[],le.current=!1,re.current&&(clearTimeout(re.current),re.current=null),Fs(!1),Po(null),qn.current=null,zi(null),_o(null),Ro(null),yr.current&&(clearTimeout(yr.current),yr.current=null)},[]);d.useEffect(()=>{t&&t(ce?"reconstruction":zs?"analysis":u&&!N?"in_game":o?"idle":"setup")},[ce,zs,u,N,o,t]);const tl=d.useCallback(()=>{if(u&&pe.current&&un.current.length>0&&!N&&Ue){Jt.current&&(clearInterval(Jt.current),Jt.current=null);const K=pe.current.pgn()||"",Z={date:new Date().toISOString(),result:"loss",playerColor:S,botName:String(Ue.elo),botElo:Ue.elo,moveCount:un.current.length,pgn:K,clarityScore:0,isFavorite:!1,timeControl:I};mv(Z).then(oe=>{oe&&console.log("[Game] Saved resigned game to history:",oe)})}Et.stop(),Fs(!1),lt(!1),Lr(!1),ue(!1),Be(null),el(),a(!0)},[u,N,Ue,S,I,el]);d.useEffect(()=>(n&&(n.current=tl),()=>{n&&(n.current=null)}),[tl,n]);const Ao=d.useCallback((K,Z,oe)=>{var Pt;const ze=K==="draw"?"draw":K==="white_win"&&S==="white"||K==="black_win"&&S==="black"?"win":"loss",Ye=J.current===0;Ru([...$e.current]),Ja([...se.current]),M([...un.current]);const Ke=un.current.length,Ee=SP(ze,J.current,te,$e.current,Z,oe,{botElo:Te.current,wasPeekFree:Ye,totalMoves:Ke,voiceCorrections:Ae.current,voiceCommands:Ot.current,reconstructionVoiceInputs:St.current,reconstructionTouchInputs:vr.current,gameVoiceMoves:V.current,gameTouchMoves:H.current,squareInquiries:se.current,isBlindfold:F,wasAssisted:le.current});if(Qt(Ee),window.dispatchEvent(new CustomEvent("statsUpdated")),Se.boardReconstructionEnabled||Lr(!0),Ue&&Ke>0){const tr=((Pt=pe.current)==null?void 0:Pt.pgn())||"",Pn={date:new Date().toISOString(),result:ze,playerColor:S,botName:String(Ue.elo),botElo:Ue.elo,moveCount:Ke,pgn:tr,clarityScore:Z??0,isFavorite:!1,timeControl:I};mv(Pn).then(wr=>{wr&&console.log("[Game] Saved game to history:",wr)})}else Ue&&Ke===0&&console.log("[Game] Zero-move game detected. Not saving to history.")},[S,te,F,Ue,I]),dn=d.useCallback(K=>{Jt.current&&(clearInterval(Jt.current),Jt.current=null),j(K),Et.stop(),Je&&vt(K==="draw"?"Game drawn":K==="white_win"&&S==="white"||K==="black_win"&&S==="black"?"You win!":"You lose"),Se.boardReconstructionEnabled&&pe.current?(qn.current={result:K,fen:pe.current.fen()},Po(pe.current.fen()),Ro(3)):Ao(K)},[S,Je,Se.boardReconstructionEnabled,Ao]);d.useEffect(()=>{if(Bs!==null)return Bs>0?yr.current=setTimeout(()=>{Ro(K=>K!==null?K-1:null)},1e3):(Fs(!0),Ro(null)),()=>{yr.current&&clearTimeout(yr.current)}},[Bs]);const fS=d.useCallback((K,Z,oe,Re)=>{St.current=oe,vr.current=Re,zi(K),_o(Z),qn.current&&(Ao(qn.current.result,K,Z),qn.current=null)},[Ao]),hS=d.useCallback(()=>{Fs(!1),Po(null),qn.current=null,tl()},[tl]),mS=d.useCallback(()=>{zi(null),_o(null),qn.current&&Ao(qn.current.result),Fs(!1),Po(null),qn.current=null,Lr(!0)},[Ao]),Lu=d.useCallback(async(K,Z,oe,Re)=>{if(!Z)return null;Vn(!0);try{const ze=Z.match(/elo_(\d+)/);if(!ze)throw new Error("Invalid bot ID format");const Ye=parseInt(ze[1],10),Ke=S==="white"?Mo.current:er.current,Ee=(oe==null?void 0:oe.length)||0,Pt=await wM(K,Z,oe,Re);if(!Pt)throw new Error("Bot failed to generate move");Pt.isBookMove&&Me.current++;let tr;if(Pt.isFreeCapture)tr=2e3;else if(Se.botThinkingTimeEnabled){const Pn=Math.ceil((Ee+2)/2),wr=vM(K);tr=xM(Pn,wr,Ke,I)}else{const Pn=Math.ceil((Ee+2)/2);tr=gM(Pn,Ke,K,S==="white"?"black":"white",Re)}return tr>2e3&&Zt(!0),await _M(tr),Zt(!1),Pt}catch(ze){return console.error("Error getting bot move:",ze),s({title:"Error",description:"Bot failed to respond",variant:"destructive"}),null}finally{Vn(!1),Zt(!1)}},[s,S,Se.botThinkingTimeEnabled,I]),Jm=async(K,Z)=>{J.current=0,Te.current=K.elo;const oe=new qr;c(oe),pe.current=oe,h(oe.fen()),v([]),un.current=[],b(null),g([]),j(null),Yt(K);const Re=Z==="random"?Math.random()<.5?"white":"black":Z;C(Re);const ze=I==="practice"?99999999:I==="blitz"?300:I==="rapid"?900:1800;if(_(ze),D(ze),er.current=ze,Mo.current=ze,_e(F?MM[Q].maxPeeks:Number.POSITIVE_INFINITY),f(!0),Mr(!1),Re==="black"){const Ye=await Lu(oe.fen(),K.id);if(Ye&&pe.current){const Ke=pe.current.move(Ye.move);Ke&&k({from:Ke.from,to:Ke.to}),h(pe.current.fen());const Ee=[Ye.move];v(Ee),un.current=Ee,ae.current=Date.now();try{Qe.impact({style:Xe.Medium}).catch(()=>{}),setTimeout(()=>{Qe.impact({style:Xe.Medium}).catch(()=>{})},100)}catch{}if(Je){const Pt=Tl(Ye.move,Ye.move.includes("x"),pe.current.isCheck(),!1);Vt.current=Pt,vt(Pt)}}}};d.useEffect(()=>{if(N!==null){Jt.current&&(clearInterval(Jt.current),Jt.current=null);return}if(u&&l&&I!=="practice"){const K=setInterval(()=>{l.turn()==="w"?_(oe=>{const Re=Math.max(0,oe-1);return er.current=Re,Re===0&&oe>0&&dn("black_win"),Re}):D(oe=>{const Re=Math.max(0,oe-1);return Mo.current=Re,Re===0&&oe>0&&dn("white_win"),Re})},1e3);return Jt.current=K,()=>{clearInterval(K),Jt.current=null}}},[u,l,dn,I,N]),d.useEffect(()=>((async()=>{try{u&&F&&Se.keepAwakeEnabled?(await Fd.keepAwake(),console.log("[KeepAwake] Screen wake lock enabled for blindfold game")):(await Fd.allowSleep(),console.log("[KeepAwake] Screen wake lock released"))}catch(Z){console.log("[KeepAwake] Plugin not available (web mode):",Z)}})(),()=>{Fd.allowSleep().catch(()=>{})}),[u,F,Se.keepAwakeEnabled]),d.useEffect(()=>{if(!Tn){Et.stop();return}if(!u||!pe.current||N!==null){Et.stop();return}Kn.register("game"),Et.setOnResult(async(Re,ze)=>{const Ye=pe.current;if(!Ye)return;if(ze.trim().length<2){console.log("[Game] Ignoring empty/short transcript:",ze);return}Ot.current++,et(ze);const Ee=ze.toLowerCase();if(To){if(Ee.includes("yes")||Ee.includes("confirm")||Ee.includes("i confirm")){try{Qe.impact({style:Xe.Medium}).catch(()=>{})}catch{}Ar(!1),dn(S==="white"?"black_win":"white_win"),et(null);return}if(Ee.includes("no")||Ee.includes("cancel")||Ee.includes("never mind")){try{Qe.impact({style:Xe.Light}).catch(()=>{})}catch{}Ar(!1),et(null);return}return}if(Ee.includes("repeat")||Ee.includes("say again")||Ee.includes("what was that")||Ee.includes("again")){Vt.current&&Je&&vt(Vt.current).catch(ye=>console.warn("[Voice] Echo failed:",ye));return}const Pt=Ee.match(/what(?:'?s| is)?\s+(?:on\s+)?([a-h])[\s-]?([1-8])/);if(Pt){const ye=`${Pt[1]}${Pt[2]}`;F&&se.current.push(ye);const Ie=Ye.get(ye);let ve="";if(Ie){const st=Ie.color==="w"?"White":"Black",Ct={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[Ie.type]||Ie.type;ve=`${st} ${Ct} on ${ye}`}else ve=`${ye.toUpperCase()} is empty`;Je&&vt(ve).catch(st=>console.warn("[Voice] Echo failed:",st)),et(null);return}if(Ee.includes("last move")||Ee.includes("previous move")||Ee.includes("opponent's move")){try{Qe.impact({style:Xe.Light}).catch(()=>{})}catch{}const ye=Ye.history({verbose:!0});let Ie="";if(ye.length===0)Ie="No moves have been made yet";else{const ve=ye[ye.length-1],gt={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen",k:"King"}[ve.piece]||ve.piece,Ct=ve.captured?" takes":"",ct=ve.from.toUpperCase(),fn=ve.to.toUpperCase();ve.piece==="p"?Ie=`${ct}${Ct} ${fn}`:Ie=`${gt}${Ct} ${fn}`}Je&&vt(Ie).catch(ve=>console.warn("[Voice] Echo failed:",ve)),et(null);return}if(/\b(how much time|what('?s| is) the time|time left|clock|my time)\b/.test(Ee)){try{Qe.impact({style:Xe.Light}).catch(()=>{})}catch{}const ye=S==="white"?er.current:Mo.current,Ie=S==="white"?Mo.current:er.current,ve=gt=>{const Ct=Math.floor(gt/60),ct=gt%60;return Ct>0&&ct>0?`${Ct} minute${Ct!==1?"s":""} ${ct} second${ct!==1?"s":""}`:Ct>0?`${Ct} minute${Ct!==1?"s":""}`:`${ct} second${ct!==1?"s":""}`},st=`You have ${ve(ye)}. Opponent has ${ve(Ie)}.`;Je&&vt(st).catch(gt=>console.warn("[Voice] Echo failed:",gt)),et(null);return}const Pn=Ee.match(/where(?:'?s| is| are)?\s+(?:my\s+)?(\w+)/);if(Pn){const ye=Pn[1].toLowerCase(),ve={king:"k",kings:"k",queen:"q",queens:"q",rook:"r",rooks:"r",castle:"r",castles:"r",bishop:"b",bishops:"b",knight:"n",knights:"n",horse:"n",horses:"n",pawn:"p",pawns:"p"}[ye];if(ve){try{Qe.impact({style:Xe.Light}).catch(()=>{})}catch{}const st=S==="white"?"w":"b",Ct={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"}[ve],ct=[],fn=["a","b","c","d","e","f","g","h"];for(const ot of fn)for(let Rn=1;Rn<=8;Rn++){const yn=`${ot}${Rn}`,Vs=Ye.get(yn);Vs&&Vs.type===ve&&Vs.color===st&&ct.push(yn.toUpperCase())}let mt="";ct.length===0?mt=`You have no ${Ct}s`:ct.length===1?mt=`Your ${Ct} is on ${ct[0]}`:mt=`You have ${Ct}s on ${ct.slice(0,-1).join(", ")} and ${ct[ct.length-1]}`,Je&&vt(mt).catch(ot=>console.warn("[Voice] Echo failed:",ot)),et(null);return}}if(Ee.includes("material")){try{Qe.impact({style:Xe.Light}).catch(()=>{})}catch{}const ye={p:1,n:3,b:3,r:5,q:9},Ie={p:"Pawn",n:"Knight",b:"Bishop",r:"Rook",q:"Queen"},ve={p:0,n:0,b:0,r:0,q:0},st={p:0,n:0,b:0,r:0,q:0},gt=["a","b","c","d","e","f","g","h"];for(const mt of gt)for(let ot=1;ot<=8;ot++){const Rn=`${mt}${ot}`,yn=Ye.get(Rn);yn&&yn.type!=="k"&&(yn.color==="w"?ve[yn.type]++:st[yn.type]++)}const Ct={};let ct=0;for(const mt of["q","r","b","n","p"]){const ot=ve[mt]-st[mt];ot!==0&&(Ct[mt]=ot,ct+=ot*ye[mt])}let fn="";if(ct===0)fn="Material is equal";else{const mt=ct>0?"White":"Black",ot=Math.abs(ct),Rn=[];for(const yn of["q","r","b","n","p"]){const Vs=ct>0?Ct[yn]:-(Ct[yn]||0);if(Vs&&Vs>0){const np=Vs,rp=Ie[yn];Rn.push(np===1?`a ${rp}`:`${np} ${rp}s`)}}if(Rn.length>0){const yn=Rn.length===1?Rn[0]:`${Rn.slice(0,-1).join(", ")} and ${Rn[Rn.length-1]}`;fn=`${mt} is up ${yn}`}else fn=`${mt} is up by ${ot} point${ot!==1?"s":""}`}Je&&vt(fn).catch(mt=>console.warn("[Voice] Echo failed:",mt)),et(null);return}const wr=Ee.match(/legal\s+moves?\s+(?:for\s+)?(?:my\s+)?(\w+)/);if(wr){const ye=wr[1].toLowerCase(),ve={king:"k",queen:"q",rook:"r",bishop:"b",knight:"n",pawn:"p",kings:"k",queens:"q",rooks:"r",bishops:"b",knights:"n",pawns:"p",horse:"n",horses:"n",castle:"r",castles:"r"}[ye];if(ve){try{Qe.impact({style:Xe.Light}).catch(()=>{})}catch{}const gt={k:"King",q:"Queen",r:"Rook",b:"Bishop",n:"Knight",p:"Pawn"}[ve],ct=Ye.moves({verbose:!0}).filter(ot=>ot.piece===ve),fn=Array.from(new Set(ct.map(ot=>ot.to.toUpperCase())));let mt="";if(fn.length===0)mt=`Your ${gt} has no legal moves`;else if(fn.length<=4)mt=`Your ${gt} can move to ${fn.join(", ")}`;else{const ot=fn.slice(0,3);mt=`Your ${gt} has ${fn.length} legal moves, including ${ot.join(", ")}`}Je&&vt(mt).catch(ot=>console.warn("[Voice] Echo failed:",ot)),et(null);return}}if(Ee.includes("resign")||Ee.includes("quit")||Ee.includes("give up")||Ee.includes("i resign")){try{Qe.impact({style:Xe.Medium}).catch(()=>{})}catch{}Ar(!0),et(null);return}if(Ee.includes("show")&&Ee.includes("board")||Ee==="peek"||Ee==="peak"||Ee==="show"){if($==="no_board"||Q==="grandmaster"){Je&&vt("Peeking is not allowed in this mode").catch(ye=>console.warn("[Voice] Echo failed:",ye)),et(null);return}try{Qe.impact({style:Xe.Light}).catch(()=>{})}catch{}le.current=!0,L(!0),re.current&&clearTimeout(re.current),re.current=setTimeout(()=>{L(!1),re.current=null},5e3),Je&&vt("Board visible for 5 seconds").catch(ye=>console.warn("[Voice] Echo failed:",ye)),et(null);return}if(Ee.includes("eval")||Ee.includes("evaluation")){try{Qe.impact({style:Xe.Light}).catch(()=>{})}catch{}le.current=!0,Je&&(async()=>{try{const ye=await Ba.getBestMove(Ye.fen(),{depth:12});let Ie="";if(ye.evaluation!==void 0){const ve=ye.evaluation,st=ve>=0?"plus":"minus",gt=Math.abs(ve).toFixed(1);Math.abs(ve)>=100?Ie=ve>0?"White has checkmate":"Black has checkmate":Math.abs(ve)<.3?Ie="Position is equal":Ie=`Evaluation is ${st} ${gt}`}else Ie="Unable to evaluate position";await vt(Ie)}catch(ye){console.warn("[Voice] Eval failed:",ye),vt("Unable to evaluate position").catch(()=>{})}})(),et(null);return}if(Dt){G.current&&(clearTimeout(G.current),G.current=null);const ye=lP(ze);if(ye.file||ye.rank){const Ie=cP(Dt.candidates,ye);if(Ie){if(xr(null),Je){const st=Tl(Ie,Ie.includes("x"),!1,!1);Vt.current=st,vt(st).catch(gt=>console.warn("[Voice] Echo failed:",gt))}if(!pe.current)return;const ve=pe.current.move(Ie);if(ve){V.current++,h(pe.current.fen()),k({from:ve.from,to:ve.to});const st=[...un.current,ve.san];if(v(st),un.current=st,b(null),g([]),et(null),pe.current.isCheckmate()){const gt=pe.current.turn()==="w"?"black_win":"white_win";dn(gt)}else(pe.current.isDraw()||pe.current.isStalemate()||pe.current.isThreefoldRepetition()||pe.current.isInsufficientMaterial())&&dn("draw")}return}}Ae.current++,Je&&vt("I didn't catch that. Which piece?").catch(Ie=>console.warn("[Voice] Echo failed:",Ie)),G.current=setTimeout(async()=>{xr(null),et(null),Je&&vt("Move cancelled").catch(Ie=>console.warn("[Voice] Echo failed:",Ie))},1e4);return}const Iu=Ye.moves(),Nt=aP(ze,Iu);if(Nt.move){if(Je){const Ie=Tl(Nt.move,Nt.move.includes("x"),!1,!1);Vt.current=Ie,vt(Ie).catch(ve=>console.warn("[Voice] Echo failed:",ve))}if(!pe.current)return;const ye=pe.current.move(Nt.move);if(ye){if(ae.current!==null){const ve=Date.now()-ae.current;$e.current.push(ve),ae.current=null}if(F){if(!Ne.current){const ve=ie+1;ge(ve),ve>te&&ne(ve)}Ne.current=!1}V.current++;try{Qe.impact({style:Xe.Light}).catch(()=>{})}catch{}h(pe.current.fen()),k({from:ye.from,to:ye.to});const Ie=[...un.current,ye.san];if(v(Ie),un.current=Ie,b(null),g([]),et(null),pe.current.isCheckmate()){const ve=pe.current.turn()==="w"?"black_win":"white_win";dn(ve)}else(pe.current.isDraw()||pe.current.isStalemate()||pe.current.isThreefoldRepetition()||pe.current.isInsufficientMaterial())&&dn("draw")}}else if(Nt.isAmbiguous&&Nt.candidates.length>1){const ye=uP(Nt.candidates),Ie=Nt.piece==="R"?"rook":Nt.piece==="N"?"knight":Nt.piece==="B"?"bishop":Nt.piece==="Q"?"queen":"piece",ve=ye.length===2?`Two ${Ie}s can move to ${Nt.targetSquare}. The one on ${ye[0]} or ${ye[1]}?`:`Multiple ${Ie}s can move to ${Nt.targetSquare}. Which one?`;xr({candidates:Nt.candidates,piece:Nt.piece,targetSquare:Nt.targetSquare}),et(`Clarify: ${Nt.candidates.join(" or ")}`),Je&&vt(ve).catch(st=>console.warn("[Voice] Echo failed:",st)),G.current=setTimeout(async()=>{xr(null),et(null),Je&&vt("Move cancelled").catch(st=>console.warn("[Voice] Echo failed:",st))},1e4)}else Ae.current++,s({title:"Didn't understand",description:`Heard: "${ze}". Try again.`,variant:"destructive"}),kt(ye=>ye+1)}),Et.setOnListeningChange(Tu);const K=pe.current,Z=K.turn();if((Z==="w"&&S==="white"||Z==="b"&&S==="black")&&!Xt&&!es&&N===null&&!Au.current){const Re=K.moves();Et.setLegalMoves(Re),Et.start(),Et.getMuted()&&Et.resumeLoop()}else N!==null&&Et.stop();return()=>{Et.reset(),Kn.clearProtectedLane(),G.current&&(clearTimeout(G.current),G.current=null)}},[Tn,u,m,S,Xt,es,N,Je,s,dn,Dt,Ds,To]),d.useEffect(()=>{if(!Ue||!pe.current||N!==null)return;const K=pe.current,Z=K.turn();if((Z==="w"&&S==="black"||Z==="b"&&S==="white")&&u&&!Xt){const Re=K.history(),ze=K.fen(),Ye=w?RM({from:w.from,to:w.to}):void 0;Lu(ze,Ue.id,Re,Ye).then(async Ke=>{if(Ke&&pe.current){const Ee=pe.current.move(Ke.move);Ee&&k({from:Ee.from,to:Ee.to});const Pt=pe.current.fen();h(Pt);const tr=[...un.current,Ke.move];v(tr),un.current=tr,ae.current=Date.now();try{Qe.impact({style:Xe.Medium}).catch(()=>{}),setTimeout(()=>{Qe.impact({style:Xe.Medium}).catch(()=>{})},100)}catch{}if(Je){Au.current=!0,Tn&&await Et.pauseLoop();const Pn=pe.current.isCheck(),wr=pe.current.isCheckmate(),Iu=Ke.move.includes("x"),Nt=Tl(Ke.move,Iu,Pn,wr);Vt.current=Nt;try{await vt(Nt)}catch(ye){console.error("[Voice] TTS error:",ye)}finally{Au.current=!1,Tn&&(await Et.resumeLoop(),console.log("[Voice] TTS complete - unmuting mic (400ms tail)"))}}if(pe.current.isCheckmate()){const Pn=pe.current.turn()==="w"?"black_win":"white_win";dn(Pn)}else(pe.current.isDraw()||pe.current.isStalemate()||pe.current.isThreefoldRepetition()||pe.current.isInsufficientMaterial())&&dn("draw")}})}},[m,Ue,S,u,Xt,N,Je,Tn,Lu,dn,w]);const nl=K=>{if(K>=99999)return"";const Z=Math.floor(K/60),oe=K%60;return`${Z}:${oe.toString().padStart(2,"0")}`},pS=(K,Z)=>{if(!l)return!1;const oe=l.get(K);if(!oe||oe.type!=="p")return!1;const Re=Z[1];return oe.color==="w"&&Re==="8"||oe.color==="b"&&Re==="1"},ep=async(K,Z,oe="q")=>{if(l)try{const Re=l.move({from:K,to:Z,promotion:oe});if(Re){if(H.current++,ae.current!==null){const Ke=Date.now()-ae.current;$e.current.push(Ke),ae.current=null}if(F){if(!Ne.current){const Ke=ie+1;ge(Ke),Ke>te&&ne(Ke)}Ne.current=!1}const ze=l.fen();h(ze),k({from:Re.from,to:Re.to});const Ye=[...un.current,Re.san];v(Ye),un.current=Ye,b(null),g([]),l.isCheckmate()?dn(l.turn()==="w"?"black_win":"white_win"):(l.isDraw()||l.isStalemate()||l.isThreefoldRepetition()||l.isInsufficientMaterial())&&dn("draw")}}catch(Re){console.error("Invalid move:",Re)}},gS=d.useCallback(K=>{if(!(!l||N||!(l.turn()==="w"&&S==="white"||l.turn()==="b"&&S==="black")))if(p)if(x.includes(K))pS(p,K)?cn({from:p,to:K}):ep(p,K);else{const oe=l.get(K);if(oe&&(oe.color==="w"&&S==="white"||oe.color==="b"&&S==="black")){b(K);const Re=l.moves({square:K,verbose:!0});g(Re.map(ze=>ze.to))}else b(null),g([])}else{const oe=l.get(K);if(oe&&(oe.color==="w"&&S==="white"||oe.color==="b"&&S==="black")){b(K);const Re=l.moves({square:K,verbose:!0});g(Re.map(ze=>ze.to))}}},[l,N,S,p,x]),tp=()=>{Pe<=0||(L(!0),z.current=Date.now(),Ne.current=!0,ge(0))},rl=()=>{if(fe&&Pe>0&&(_e(K=>K-1),z.current)){const K=Date.now()-z.current;J.current+=K}L(!1),z.current=null};if(me)return i.jsx(TM,{game:me,open:!0,onClose:()=>{Be(null),ue(!0)},onAnalyze:K=>{M(K),Be(null),ue(!1),lt(!0)}});if(A)return i.jsx(jM,{onBack:()=>ue(!1),onViewGame:K=>{Be(K)}});if(zs&&E.length>0)return i.jsx(hv,{moveHistory:E,playerColor:S,gameResult:N,botElo:$t,onClose:()=>{lt(!1),a(!0)}});if(o)return i.jsxs("div",{className:"h-screen w-full flex flex-col items-center relative overflow-hidden","data-testid":"screen-title",children:[i.jsx("img",{src:U_,alt:"Blindfold Chess",className:"absolute inset-0 w-full h-full object-cover object-center z-0"}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 p-6 pt-12 w-full",children:[i.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-black text-center tracking-tight","data-testid":"text-title",children:"Blindfold Chess"}),i.jsx("p",{className:"text-black/70 text-center text-base md:text-lg",children:"Train your visualization and memory"})]}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-3 p-6 pb-[120px] w-full max-w-sm",children:[i.jsxs(X,{size:"lg",variant:"ghost",className:"w-full text-lg py-6 bg-amber-400 hover:bg-amber-500 text-stone-900 border border-amber-500 dark:bg-black dark:hover:bg-black/90 dark:text-white dark:border-black",onClick:()=>r==null?void 0:r(),"data-testid":"button-train-now",children:[i.jsx(cy,{className:"mr-2 h-5 w-5"}),"Train Now"]}),i.jsxs(X,{size:"lg",variant:"ghost",className:"w-full text-lg py-6 bg-amber-400 hover:bg-amber-500 text-stone-900 border border-amber-500 dark:bg-black dark:hover:bg-black/90 dark:text-white dark:border-black",onClick:()=>a(!1),"data-testid":"button-start-now",children:[i.jsx(Sg,{className:"mr-2 h-5 w-5"}),"Play Now"]})]})]});if(!u){const K=async()=>{const Z=mP($t);if(Z){try{await Qe.impact({style:Xe.Heavy})}catch{}Mr(!0),setTimeout(()=>{Jm(Z,ln)},200)}};return i.jsxs("div",{className:`h-full flex flex-col max-w-lg mx-auto px-4 py-2 transition-opacity duration-200 ${jo?"opacity-0":"opacity-100"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(X,{variant:"ghost",size:"icon",onClick:()=>a(!0),"data-testid":"button-setup-back",children:i.jsx(Ts,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Game Set-up"})]}),i.jsxs(De,{className:"flex flex-col",children:[i.jsxs(Ve,{className:"overflow-y-auto pt-4 pb-2 space-y-3",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(rn,{htmlFor:"blindfold-toggle",children:"Blindfold Challenge"}),i.jsx(cr,{id:"blindfold-toggle",checked:F,onCheckedChange:q,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-blindfold"})]}),F&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(rn,{children:"Blindfold Difficulty"}),i.jsxs(Od,{value:Q,onValueChange:Z=>T(Z),children:[i.jsx(tc,{"data-testid":"select-blindfold-difficulty",children:i.jsx($d,{})}),i.jsxs(nc,{children:[i.jsx(rr,{value:"easy",children:"Easy (Unlimited Peeks)"}),i.jsx(rr,{value:"medium",children:"Medium (20 Peeks)"}),i.jsx(rr,{value:"hard",children:"Hard (10 Peeks)"}),i.jsx(rr,{value:"expert",children:"Expert (5 Peeks)"}),i.jsx(rr,{value:"master",children:"Master (2 Peeks)"}),i.jsx(rr,{value:"grandmaster",children:"Grandmaster (No Peeks)"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(rn,{children:"Display Mode"}),i.jsxs(Od,{value:$,onValueChange:Z=>{const oe=Z;W(oe),oe==="no_board"&&(be(!1),Eo(!0),Xa(!0))},children:[i.jsx(tc,{"data-testid":"select-blindfold-display",children:i.jsx($d,{})}),i.jsxs(nc,{children:[i.jsx(rr,{value:"empty_board",children:"Empty Board"}),i.jsx(rr,{value:"black_overlay",children:"Black Overlay"}),i.jsx(rr,{value:"no_board",children:"No Board"})]})]})]}),$!=="no_board"&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(rn,{htmlFor:"coordinates-toggle",children:"Show Coordinates (1-8, a-h)"}),i.jsx(cr,{id:"coordinates-toggle",checked:Y,onCheckedChange:be,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-coordinates"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(rn,{htmlFor:"reconstruction-toggle",className:"text-sm",children:"Board Reconstruction Challenge"}),i.jsx(cr,{id:"reconstruction-toggle",checked:Se.boardReconstructionEnabled,onCheckedChange:Z=>{const oe={...Se,boardReconstructionEnabled:Z};xe(oe),Xf(oe)},className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-board-reconstruction"})]}),Se.boardReconstructionEnabled&&i.jsx("p",{className:"text-xs text-muted-foreground",children:"After each game, reconstruct the final position to test your memory."}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(on,{className:"h-4 w-4"}),i.jsx(rn,{htmlFor:"voice-input",children:"Voice Input"})]}),i.jsx(cr,{id:"voice-input",checked:Tn,onCheckedChange:Eo,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-voice-input"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(um,{className:"h-4 w-4"}),i.jsx(rn,{htmlFor:"voice-output",children:"Voice Output"})]}),i.jsx(cr,{id:"voice-output",checked:Je,onCheckedChange:Xa,className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-voice-output"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex flex-col gap-0.5",children:[i.jsx(rn,{htmlFor:"bot-thinking-toggle",className:"text-sm",children:"Bot Thinking Time"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"Human-like delays"})]}),i.jsx(cr,{id:"bot-thinking-toggle",checked:Se.botThinkingTimeEnabled,onCheckedChange:Z=>{const oe={...Se,botThinkingTimeEnabled:Z};xe(oe),Xf(oe)},className:"data-[state=checked]:bg-amber-400 data-[state=unchecked]:bg-white border border-stone-300","data-testid":"switch-bot-thinking-time"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(rn,{children:"Time Control"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs(X,{variant:"outline",size:"sm",className:I==="blitz"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>O("blitz"),"data-testid":"button-time-blitz",children:[i.jsx(Js,{className:"mr-1 h-3 w-3"}),"5 min"]}),i.jsxs(X,{variant:"outline",size:"sm",className:I==="rapid"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>O("rapid"),"data-testid":"button-time-rapid",children:[i.jsx(Js,{className:"mr-1 h-3 w-3"}),"15 min"]}),i.jsxs(X,{variant:"outline",size:"sm",className:I==="classical"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>O("classical"),"data-testid":"button-time-classical",children:[i.jsx(Js,{className:"mr-1 h-3 w-3"}),"30 min"]}),i.jsxs(X,{variant:"outline",size:"sm",className:I==="practice"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>O("practice"),"data-testid":"button-time-practice",children:[i.jsx(o2,{className:"mr-1 h-3 w-3"}),"Practice"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(rn,{children:"Bot Rating"}),i.jsxs(Od,{value:String($t),onValueChange:Z=>Jn(Number(Z)),children:[i.jsx(tc,{"data-testid":"select-bot-elo",children:i.jsx($d,{})}),i.jsx(nc,{children:s1.map(Z=>i.jsxs(rr,{value:String(Z),children:[Z," Elo"]},Z))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(rn,{children:"Your Color"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs(X,{variant:"outline",size:"sm",className:ln==="white"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>Jr("white"),"data-testid":"button-color-white",children:[i.jsx("div",{className:"w-4 h-4 rounded-full bg-white border border-gray-400 mr-1"}),"White"]}),i.jsxs(X,{variant:"outline",size:"sm",className:ln==="black"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>Jr("black"),"data-testid":"button-color-black",children:[i.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-900 mr-1"}),"Black"]}),i.jsxs(X,{variant:"outline",size:"sm",className:ln==="random"?"bg-amber-400 border-amber-500 text-stone-900":"bg-white text-stone-900",onClick:()=>Jr("random"),"data-testid":"button-color-random",children:[i.jsx(d2,{className:"w-4 h-4 mr-1"}),"Random"]})]})]})]}),i.jsx("div",{className:"p-4 pt-2 border-t",children:i.jsxs(X,{size:"lg",className:"w-full bg-amber-400 hover:bg-amber-500 text-stone-900 border border-black",onClick:K,"data-testid":"button-start-game",children:[i.jsx(Sg,{className:"mr-2 h-5 w-5"}),"Start Game"]})})]})]})}return i.jsxs("div",{className:"container max-w-4xl mx-auto p-2 md:p-4 animate-in fade-in duration-300",children:[ce&&Fi&&i.jsx("div",{className:"mb-3",children:i.jsx(X_,{actualFen:Fi,playerColor:S,onComplete:fS,onSkip:mS,onContinue:hS,onViewReport:()=>Lr(!0)})}),i.jsx(eM,{open:Za&&!zs,gameResult:N,playerColor:S,clarityScore:We.lastClarityScore,responseTimes:Pu,squareInquiries:_u,reconstructionScore:Bi,reconstructionVoicePurity:Mu,reconstructionEnabled:Se.boardReconstructionEnabled,onRematch:()=>{if(Ue){const K=S==="white"?"black":"white";Lr(!1),lt(!1),el(),setTimeout(()=>Jm(Ue,K),100)}},onMainMenu:()=>{Lr(!1),lt(!1),el()},onAnalyze:()=>{lt(!0)}}),zs&&E.length>0&&i.jsx(hv,{moveHistory:E,playerColor:S,gameResult:N,botElo:$t,onClose:()=>lt(!1)}),!ce&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(De,{className:`lg:hidden ${l&&(S==="white"&&l.turn()==="b"||S==="black"&&l.turn()==="w")?"ring-2 ring-amber-400":""}`,children:i.jsx(Ve,{className:"py-2 px-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${S==="white"?"bg-black":"bg-white border border-gray-400"}`}),i.jsx(wg,{className:"h-4 w-4 text-amber-500"}),i.jsx("span",{className:"font-medium text-sm",children:Ue?`${Ue.elo} Elo Bot`:"Bot"}),Xt&&i.jsx("span",{className:`text-xs animate-pulse ${En?"text-amber-500 font-medium":"text-primary"}`,children:En?"Thinking...":"thinking..."})]}),i.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(S==="white"&&l.turn()==="b"||S==="black"&&l.turn()==="w")?"text-foreground":"text-muted-foreground"}`,children:nl(S==="white"?B:R)})]})})}),i.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx(De,{className:`hidden lg:block ${l&&(S==="white"&&l.turn()==="b"||S==="black"&&l.turn()==="w")?"ring-2 ring-amber-400":""}`,children:i.jsx(Ve,{className:"py-2 px-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${S==="white"?"bg-black":"bg-white border border-gray-400"}`}),i.jsx(wg,{className:"h-4 w-4 text-amber-500"}),i.jsx("span",{className:"font-medium text-sm","data-testid":"text-opponent-name",children:Ue?`${Ue.elo} Elo Bot`:"Bot"}),Xt&&i.jsx("span",{className:`text-xs animate-pulse ${En?"text-amber-500 font-medium":"text-primary"}`,"data-testid":"text-bot-thinking",children:En?"Thinking...":"thinking..."})]}),i.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(S==="white"&&l.turn()==="b"||S==="black"&&l.turn()==="w")?"text-foreground":"text-muted-foreground"}`,"data-testid":"text-opponent-time",children:nl(S==="white"?B:R)})]})})}),i.jsx(De,{className:`aspect-square w-full max-w-full md:max-w-[600px] p-1 md:p-2 ${F&&$==="no_board"&&!fe?"invisible":""}`,children:i.jsxs("div",{className:"relative w-full h-full",children:[i.jsx(JR,{fen:m,orientation:S,showCoordinates:F&&Y,highlightedSquares:x,lastMove:w||void 0,onSquareClick:gS,noCard:!0}),Bs!==null&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 z-50","data-testid":"overlay-reconstruction-countdown","aria-live":"polite",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-8xl md:text-9xl font-bold text-amber-400 animate-pulse","data-testid":"text-countdown-number",children:Bs}),i.jsx("div",{className:"text-lg md:text-xl text-white mt-4 font-medium",children:"Memorize the position..."})]})}),F&&!fe&&$==="empty_board"&&i.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-visible",children:i.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((K,Z)=>{const oe=Math.floor(Z/8),Re=Z%8,ze=(oe+Re)%2===0,Ye=S==="white"?["a","b","c","d","e","f","g","h"]:["h","g","f","e","d","c","b","a"],Ke=S==="white"?["8","7","6","5","4","3","2","1"]:["1","2","3","4","5","6","7","8"],Ee=Re===0,Pt=oe===7;return i.jsxs("div",{className:`relative ${ze?"bg-amber-100":"bg-amber-700"}`,children:[Y&&Ee&&i.jsx("span",{className:`absolute bottom-0.5 left-1 text-xs font-semibold select-none ${ze?"text-amber-800/70":"text-amber-100/70"}`,children:Ke[oe]}),Y&&Pt&&i.jsx("span",{className:`absolute bottom-0.5 right-1 text-xs font-semibold select-none ${ze?"text-amber-800/70":"text-amber-100/70"}`,children:Ye[Re]})]},Z)})})}),F&&!fe&&$==="black_overlay"&&i.jsxs("div",{className:"absolute inset-0 bg-black pointer-events-none overflow-visible",children:[i.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 8 8",preserveAspectRatio:"none",children:[Array.from({length:9}).map((K,Z)=>i.jsx("line",{x1:"0",y1:Z,x2:"8",y2:Z,stroke:"white",strokeWidth:"0.02"},`h-${Z}`)),Array.from({length:9}).map((K,Z)=>i.jsx("line",{x1:Z,y1:"0",x2:Z,y2:"8",stroke:"white",strokeWidth:"0.02"},`v-${Z}`))]}),Y&&i.jsx("div",{className:"absolute inset-0 grid grid-cols-8 grid-rows-8",children:Array.from({length:64}).map((K,Z)=>{const oe=Math.floor(Z/8),Re=Z%8,ze=S==="white"?["a","b","c","d","e","f","g","h"]:["h","g","f","e","d","c","b","a"],Ye=S==="white"?["8","7","6","5","4","3","2","1"]:["1","2","3","4","5","6","7","8"],Ke=Re===0,Ee=oe===7;return i.jsxs("div",{className:"relative",children:[Ke&&i.jsx("span",{className:"absolute bottom-0.5 left-1 text-xs font-semibold select-none text-white/70",children:Ye[oe]}),Ee&&i.jsx("span",{className:"absolute bottom-0.5 right-1 text-xs font-semibold select-none text-white/70",children:ze[Re]})]},Z)})})]})]})}),i.jsx(De,{className:`hidden lg:block ${l&&(S==="white"&&l.turn()==="w"||S==="black"&&l.turn()==="b")?"ring-2 ring-amber-400":""}`,children:i.jsx(Ve,{className:"py-2 px-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${S==="white"?"bg-white border border-gray-400":"bg-black"}`}),i.jsx("span",{className:"font-medium text-sm","data-testid":"text-player-name",children:"You"})]}),i.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(S==="white"&&l.turn()==="w"||S==="black"&&l.turn()==="b")?"text-foreground":"text-muted-foreground"}`,"data-testid":"text-player-time",children:nl(S==="white"?R:B)})]})})})]}),i.jsxs("div",{className:"flex flex-col gap-2 lg:w-48",children:[F&&Q!=="grandmaster"&&i.jsxs(X,{variant:fe?"default":"outline",className:`w-full ${fe?"bg-amber-400 hover:bg-amber-500 text-black":""}`,onMouseDown:tp,onMouseUp:rl,onMouseLeave:rl,onTouchStart:tp,onTouchEnd:rl,onTouchCancel:rl,disabled:Pe<=0,"data-testid":"button-peek",children:[i.jsx(uy,{className:"mr-2 h-4 w-4"}),fe?"Peeking...":"Hold to Peek"]}),F&&i.jsx("div",{className:"text-center text-sm text-muted-foreground","data-testid":"text-peeks-remaining",children:isFinite(Pe)?`${Pe} peeks left`:"Unlimited peeks"}),F&&i.jsxs("div",{className:"text-center text-sm","data-testid":"text-peek-free-streak",children:[i.jsx("span",{className:"text-muted-foreground",children:"Streak: "}),i.jsx("span",{className:"font-semibold text-amber-500",children:ie}),te>0&&i.jsxs("span",{className:"text-muted-foreground/70 text-xs ml-1",children:["(best: ",te,")"]})]}),Tn&&i.jsx("div",{className:"flex items-center justify-center gap-2 text-sm",children:Dt?i.jsxs(i.Fragment,{children:[i.jsx(on,{className:"h-4 w-4 text-amber-500 animate-pulse"}),i.jsx("span",{className:"text-amber-500",children:"Which piece?"})]}):Eu?i.jsxs(i.Fragment,{children:[i.jsx(on,{className:"h-4 w-4 text-primary animate-pulse"}),i.jsx("span",{className:"text-primary",children:"Listening..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(eo,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-muted-foreground",children:"Voice paused"})]})}),P&&i.jsx("div",{className:`text-xs text-center ${Dt?"text-amber-500 font-medium":"text-muted-foreground"}`,children:Dt?P:`Heard: "${P}"`}),i.jsx(De,{className:`lg:hidden ${l&&(S==="white"&&l.turn()==="w"||S==="black"&&l.turn()==="b")?"ring-2 ring-amber-400":""}`,children:i.jsx(Ve,{className:"py-2 px-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${S==="white"?"bg-white border border-gray-400":"bg-black"}`}),i.jsx("span",{className:"font-medium text-sm",children:"You"})]}),i.jsx("div",{className:`text-2xl font-mono font-bold ${l&&(S==="white"&&l.turn()==="w"||S==="black"&&l.turn()==="b")?"text-foreground":"text-muted-foreground"}`,children:nl(S==="white"?R:B)})]})})}),i.jsx(De,{className:"flex-1",children:i.jsx(Ve,{className:"p-2",children:i.jsx(Xm,{className:"h-24 lg:h-48",children:i.jsx("div",{className:"text-xs font-mono space-y-1",children:y.map((K,Z)=>i.jsxs("span",{className:Z%2===0?"font-semibold":"",children:[Z%2===0&&i.jsxs("span",{className:"text-muted-foreground",children:[Math.floor(Z/2)+1,". "]}),K," "]},Z))})})})}),!N&&i.jsxs(X,{variant:"outline",size:"sm",className:"w-full text-red-600 border-red-300 hover:bg-red-50",onClick:()=>Ar(!0),"data-testid":"button-resign",children:[i.jsx(du,{className:"mr-2 h-4 w-4"}),"Resign"]})]})]})]}),i.jsx(t_,{open:!!es,color:S,onSelect:K=>{es&&(ep(es.from,es.to,K),cn(null))}}),i.jsx(Oi,{open:To,onOpenChange:Ar,children:i.jsxs(yo,{children:[i.jsxs(wo,{children:[i.jsx(So,{children:"Resign Game?"}),i.jsx(ko,{children:"Are you sure you want to resign? This will count as a loss."})]}),i.jsxs(bo,{children:[i.jsx(Co,{"data-testid":"button-resign-cancel",children:"Cancel"}),i.jsx(No,{className:"bg-red-600 hover:bg-red-700",onClick:()=>{dn(S==="white"?"black_win":"white_win"),Ar(!1)},"data-testid":"button-resign-confirm",children:"Resign"})]})]})})]})}async function ut(e){await Ln.pauseLoop();try{await vt(e)}finally{await Ln.resumeLoop()}}const qc=["a","b","c","d","e","f","g","h"],dS=["1","2","3","4","5","6","7","8"];function LM(e,t){return(e+t)%2===0}function hi(){const e=Math.floor(Math.random()*8),t=Math.floor(Math.random()*8);return{file:qc[e],rank:dS[t],fileIndex:e,rankIndex:t}}function rc(e){const t=Math.floor(e/1e3),n=Math.floor(e%1e3/100);return`${t}.${n}s`}function IM({onBack:e,onStateChange:t,returnToMenuRef:n}){const[r,s]=d.useState("menu"),[o,a]=d.useState(null),[l,c]=d.useState("ready");d.useEffect(()=>{$c().then(a)},[r]),d.useEffect(()=>{r==="menu"?t==null||t("menu"):t==null||t(l)},[r,l,t]),d.useEffect(()=>(n&&(n.current=()=>{s("menu"),c("ready")}),()=>{n&&(n.current=null)}),[n]);const u=async(f,m,h)=>{await MP(f,m,h),a(await $c()),window.dispatchEvent(new CustomEvent("trainingStatsUpdated"))};return r==="color_blitz"?i.jsx(OM,{onBack:()=>s("menu"),onComplete:(f,m)=>u("color_blitz",f,m),stats:o,onGameStateChange:c}):r==="coordinate_sniper"?i.jsx($M,{onBack:()=>s("menu"),onComplete:(f,m)=>u("coordinate_sniper",f,m),stats:o,onGameStateChange:c}):r==="voice_move_master"?i.jsx(DM,{onBack:()=>s("menu"),onComplete:(f,m)=>u("voice_move_master",f,m),stats:o,onGameStateChange:c}):i.jsxs("div",{className:"flex flex-col h-full p-4 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(X,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-training-back",children:i.jsx(Ts,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Training Gym"})]}),i.jsxs("div",{className:"space-y-4 flex-1",children:[i.jsxs(De,{className:"hover-elevate cursor-pointer",onClick:()=>s("voice_move_master"),"data-testid":"card-voice-move-master",children:[i.jsx(xt,{className:"pb-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-2 rounded-lg bg-purple-500/20",children:i.jsx(um,{className:"h-5 w-5 text-purple-500"})}),i.jsxs("div",{children:[i.jsx(yt,{className:"text-lg",children:"Voice Move Master"}),i.jsx(_t,{children:"Announce moves by voice in 60 seconds"})]})]})}),i.jsx(Ve,{children:o!==null&&o.voiceMoveMasterBest!==null&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(On,{className:"h-4 w-4 text-amber-500"}),i.jsxs("span",{children:["Best: ",o.voiceMoveMasterBest," correct"]})]})})]}),i.jsxs(De,{className:"hover-elevate cursor-pointer",onClick:()=>s("color_blitz"),"data-testid":"card-color-blitz",children:[i.jsx(xt,{className:"pb-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:i.jsx(dm,{className:"h-5 w-5 text-amber-500"})}),i.jsxs("div",{children:[i.jsx(yt,{className:"text-lg",children:"Color Blitz"}),i.jsx(_t,{children:"Name square colors in 60 seconds"})]})]})}),i.jsx(Ve,{children:o!==null&&o.colorBlitzBest!==null&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(On,{className:"h-4 w-4 text-amber-500"}),i.jsxs("span",{children:["Best: ",o.colorBlitzBest," correct"]})]})})]}),i.jsxs(De,{className:"hover-elevate cursor-pointer",onClick:()=>s("coordinate_sniper"),"data-testid":"card-coordinate-sniper",children:[i.jsx(xt,{className:"pb-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:i.jsx(ii,{className:"h-5 w-5 text-blue-500"})}),i.jsxs("div",{children:[i.jsx(yt,{className:"text-lg",children:"Coordinate Sniper"}),i.jsx(_t,{children:"Find 10 squares as fast as possible"})]})]})}),i.jsx(Ve,{children:o!==null&&o.coordinateSniperBest!==null&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(On,{className:"h-4 w-4 text-amber-500"}),i.jsxs("span",{children:["Best: ",rc(o.coordinateSniperBest)]})]})})]})]})]})}function OM({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,o]=d.useState("ready"),[a,l]=d.useState(()=>hi()),[c,u]=d.useState(0),[f,m]=d.useState(0),[h,y]=d.useState(0),[v,p]=d.useState(60),[b,x]=d.useState(!1),[g,w]=d.useState(!1),[k,S]=d.useState(!1),C=d.useRef(null),N=n!==null&&n.colorBlitzBest!==null&&c>n.colorBlitzBest,j=d.useRef(null),R=d.useRef(!1),_=()=>{C.current&&clearInterval(C.current),Kn.purge(),e()},B=async()=>{o("playing"),u(0),m(0),y(0),p(60),R.current=!1;const F=hi();l(F),setTimeout(async()=>{b&&(await ut(`${F.file} ${F.rank}`),R.current=!0)},300)},D=()=>{C.current&&clearInterval(C.current),Kn.purge(),e()},I=d.useCallback(F=>{var $,W;const q=F.toLowerCase();console.log("[ColorBlitz] Voice:",q);const Q=["light","white","lie","lye","lite","lied","liked","right","bright"],T=["dark","black","bark","duck","dock","doc"];Q.some(Y=>q.includes(Y))?($=j.current)==null||$.call(j,"light"):T.some(Y=>q.includes(Y))&&((W=j.current)==null||W.call(j,"dark"))},[]);d.useEffect(()=>{let F=!0;return(async()=>{if(!b){Ln.stop(),S(!1);return}if(s!=="playing")return;if(jn.isNativePlatform())try{const{SpeechRecognition:T}=await Xr(async()=>{const{SpeechRecognition:$}=await Promise.resolve().then(()=>Xw);return{SpeechRecognition:$}},void 0);await T.requestPermissions()}catch(T){console.log("[ColorBlitz] Permission request failed:",T)}Ln.resetMicBusy();const Q=await Ln.start(I,S);F&&S(Q)})(),()=>{F=!1,Kn.purge()}},[b,s,I]),d.useEffect(()=>(s==="playing"&&(C.current=setInterval(()=>{p(F=>F<=1?(o("finished"),0):F-1)},1e3)),()=>{C.current&&clearInterval(C.current)}),[s]),d.useEffect(()=>{s==="finished"&&t(c,h)},[s,c,h,t]),d.useEffect(()=>{r==null||r(s)},[s,r]);const O=d.useCallback(F=>{if(s!=="playing")return;if((F==="white"||F==="light"?"light":"dark")==="dark"===LM(a.fileIndex,a.rankIndex)){u($=>$+1),m($=>{const W=$+1;return y(Y=>Math.max(Y,W)),Qe.notification({type:Pi.Success}).catch(()=>{}),W});const T=hi();l(T),b&&setTimeout(async()=>{await ut(`${T.file} ${T.rank}`)},300)}else m(0),Qe.impact({style:Xe.Heavy}).catch(()=>{}),setTimeout(()=>{Qe.impact({style:Xe.Heavy}).catch(()=>{})},100),b&&setTimeout(async()=>{await ut("Wrong")},300)},[s,a,b]);return d.useEffect(()=>{j.current=O},[O]),s==="ready"?i.jsxs("div",{className:"flex flex-col h-full p-4 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(X,{variant:"ghost",size:"icon",onClick:_,"data-testid":"button-colorblitz-back",children:i.jsx(Ts,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Color Blitz"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx(dm,{className:"h-12 w-12 text-amber-500 mx-auto"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"}),i.jsx("p",{className:"text-muted-foreground",children:"Name as many square colors as you can in 60 seconds!"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(cr,{id:"voice-mode",checked:b,onCheckedChange:x,"data-testid":"switch-voice-mode"}),i.jsxs(rn,{htmlFor:"voice-mode",className:"flex items-center gap-2",children:[b?i.jsx(on,{className:"h-4 w-4"}):i.jsx(eo,{className:"h-4 w-4"}),"Voice Mode"]})]}),n!==null&&n.colorBlitzBest!==null&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",i.jsx("span",{className:"font-semibold text-amber-500",children:n.colorBlitzBest})," correct"]}),i.jsx(X,{size:"lg",onClick:B,"data-testid":"button-start-colorblitz",children:"Start"})]})]}):s==="finished"?i.jsxs("div",{className:"flex flex-col h-full p-4 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(X,{variant:"ghost",size:"icon",onClick:_,"data-testid":"button-colorblitz-back-finished",children:i.jsx(Ts,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Color Blitz"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[i.jsx(On,{className:`h-16 w-16 ${N?"text-amber-500":"text-muted-foreground"}`}),i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h2",{className:"text-4xl font-bold",children:c}),i.jsx("p",{className:"text-lg text-muted-foreground",children:"squares correct"}),N&&i.jsx(Mt,{className:"bg-amber-500 text-white",children:"New Personal Best!"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(X,{variant:"outline",onClick:_,"data-testid":"button-colorblitz-menu",children:"Menu"}),i.jsx(X,{onClick:B,"data-testid":"button-colorblitz-retry",children:"Play Again"})]})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-col h-full p-4 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-2xl font-bold tabular-nums",children:[v,"s"]}),b&&k&&i.jsx(on,{className:"h-4 w-4 text-red-500 animate-pulse"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-lg font-semibold",children:c}),f>=5&&i.jsxs(Mt,{variant:"outline",className:"text-amber-500 border-amber-500",children:[f," streak"]})]})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-8",children:[i.jsx("div",{className:"text-center",children:i.jsxs("p",{className:"text-6xl font-bold font-mono tracking-wider",children:[a.file,a.rank]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full",children:[i.jsx(X,{size:"lg",className:"h-20 text-xl bg-amber-100 hover:bg-amber-200 text-amber-900 dark:bg-amber-100 dark:hover:bg-amber-200",onClick:()=>O("light"),"data-testid":"button-answer-light",children:"Light"}),i.jsx(X,{size:"lg",className:"h-20 text-xl bg-amber-900 hover:bg-amber-800 text-amber-100",onClick:()=>O("dark"),"data-testid":"button-answer-dark",children:"Dark"})]}),i.jsxs(X,{variant:"outline",onClick:()=>w(!0),className:"mt-4","data-testid":"button-colorblitz-resign",children:[i.jsx(du,{className:"h-4 w-4 mr-2"}),"Resign"]})]})]}),i.jsx(Oi,{open:g,onOpenChange:w,children:i.jsxs(yo,{children:[i.jsxs(wo,{children:[i.jsx(So,{children:"Quit Game?"}),i.jsxs(ko,{children:["Your current score of ",c," will not be saved."]})]}),i.jsxs(bo,{children:[i.jsx(Co,{"data-testid":"button-colorblitz-resign-cancel",children:"Continue"}),i.jsx(No,{onClick:D,"data-testid":"button-colorblitz-resign-confirm",children:"Quit"})]})]})})]})}function $M({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,o]=d.useState("ready"),[a,l]=d.useState(()=>hi()),[c,u]=d.useState(0),[f,m]=d.useState(0),[h,y]=d.useState(0),[v,p]=d.useState(0),[b,x]=d.useState(0),[g,w]=d.useState(null),[k,S]=d.useState(null),[C,N]=d.useState(!1),j=10,R=n!==null&&n.coordinateSniperBest!==null&&b<n.coordinateSniperBest&&b>0,_=()=>{e()},B=()=>{o("playing"),u(0),m(0),y(0),p(Date.now()),x(0);const I=hi();l(I),ut(`Find ${I.file} ${I.rank}`)};d.useEffect(()=>{let I=null;return s==="playing"&&(I=setInterval(()=>{x(Date.now()-v)},100)),()=>{I&&clearInterval(I)}},[s,v]),d.useEffect(()=>{r==null||r(s)},[s,r]);const D=d.useCallback((I,O)=>{if(s!=="playing")return;const F=`${a.file}${a.rank}`,q=`${I}${O}`;if(q===F){Qe.impact({style:Xe.Light}).catch(()=>{}),w({square:q,correct:!0});const Q=c+1;u(Q);const T=f+1;m(T);const $=Math.max(h,T);if(y($),Q>=j){const W=Date.now()-v;x(W),o("finished"),t(W,$),ut("Complete!")}else setTimeout(()=>{w(null);const W=hi();l(W),ut(`Find ${W.file} ${W.rank}`)},200)}else Qe.impact({style:Xe.Heavy}).catch(()=>{}),Qe.impact({style:Xe.Heavy}).catch(()=>{}),w({square:q,correct:!1}),S(F),m(0),ut(`No, that's ${I} ${O}`),setTimeout(()=>{w(null),S(null)},1e3)},[s,a,c,f,h,v,t]);return s==="ready"?i.jsxs("div",{className:"flex flex-col h-full p-4 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(X,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-sniper-back",children:i.jsx(Ts,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Coordinate Sniper"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx(ii,{className:"h-12 w-12 text-blue-500 mx-auto"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"}),i.jsx("p",{className:"text-muted-foreground",children:"Find 10 squares as fast as you can!"})]}),n!==null&&n.coordinateSniperBest!==null&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",i.jsx("span",{className:"font-semibold text-blue-500",children:rc(n.coordinateSniperBest)})]}),i.jsx(X,{size:"lg",onClick:B,"data-testid":"button-start-sniper",children:"Start"})]})]}):s==="finished"?i.jsxs("div",{className:"flex flex-col h-full p-4 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(X,{variant:"ghost",size:"icon",onClick:e,"data-testid":"button-sniper-back-finished",children:i.jsx(Ts,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Coordinate Sniper"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[i.jsx(On,{className:`h-16 w-16 ${R?"text-blue-500":"text-muted-foreground"}`}),i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h2",{className:"text-4xl font-bold",children:rc(b)}),i.jsx("p",{className:"text-lg text-muted-foreground",children:"to find 10 squares"}),R&&i.jsx(Mt,{className:"bg-blue-500 text-white",children:"New Personal Best!"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(X,{variant:"outline",onClick:e,"data-testid":"button-sniper-menu",children:"Menu"}),i.jsx(X,{onClick:B,"data-testid":"button-sniper-retry",children:"Play Again"})]})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-col h-full p-4 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("p",{className:"text-lg font-semibold",children:["Find: ",i.jsxs("span",{className:"text-2xl font-mono",children:[a.file,a.rank]})]}),i.jsx("span",{className:"text-lg font-mono tabular-nums",children:rc(b)})]}),i.jsx(fi,{value:c/j*100,className:"mb-4"}),i.jsxs("p",{className:"text-sm text-muted-foreground text-center mb-4",children:[c,"/",j," found"]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[i.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:["8","7","6","5","4","3","2","1"].map((I,O)=>qc.map((F,q)=>{const Q=`${F}${I}`,T=(q+O)%2===1,$=(g==null?void 0:g.square)===Q,W=k===Q;let Y=T?"bg-amber-700":"bg-amber-100";return $?Y=g.correct?"bg-green-500":"bg-red-500":W&&(Y="bg-green-500"),i.jsx("button",{className:`aspect-square ${Y} transition-colors duration-100`,onClick:()=>D(F,I),"data-testid":`square-${Q}`},Q)}))}),i.jsxs(X,{variant:"outline",onClick:()=>N(!0),className:"mt-4","data-testid":"button-sniper-resign",children:[i.jsx(du,{className:"h-4 w-4 mr-2"}),"Resign"]})]})]}),i.jsx(Oi,{open:C,onOpenChange:N,children:i.jsxs(yo,{children:[i.jsxs(wo,{children:[i.jsx(So,{children:"Quit Game?"}),i.jsxs(ko,{children:["Your progress (",c,"/",j," found) will not be saved."]})]}),i.jsxs(bo,{children:[i.jsx(Co,{"data-testid":"button-sniper-resign-cancel",children:"Continue"}),i.jsx(No,{onClick:_,"data-testid":"button-sniper-resign-confirm",children:"Quit"})]})]})})]})}const sc={p:"pawn",n:"knight",b:"bishop",r:"rook",q:"queen",k:"king"};function lh(){const e=new qr,t=5+Math.floor(Math.random()*11);for(let s=0;s<t;s++){const o=e.moves({verbose:!0});if(o.length===0)break;const a=o[Math.floor(Math.random()*o.length)];e.move(a)}const n=e.moves({verbose:!0});if(n.length===0)return lh();const r=n[Math.floor(Math.random()*n.length)];return{chess:e,move:{from:r.from,to:r.to,san:r.san,piece:r.piece,captured:r.captured}}}function DM({onBack:e,onComplete:t,stats:n,onGameStateChange:r}){const[s,o]=d.useState("ready"),[a,l]=d.useState(null),[c,u]=d.useState(0),[f,m]=d.useState(0),[h,y]=d.useState(0),[v,p]=d.useState(60),[b,x]=d.useState(!1),[g,w]=d.useState(!1),[k,S]=d.useState(!1),[C,N]=d.useState(null),[j,R]=d.useState(""),[_,B]=d.useState(!1),D=d.useRef(null),I=d.useRef(null),O=n!==null&&n.voiceMoveMasterBest!==null&&c>n.voiceMoveMasterBest,F=jn.isNativePlatform(),q=()=>{D.current&&clearInterval(D.current),I.current&&clearTimeout(I.current),Kn.purge(),e()};d.useEffect(()=>((async()=>{if(jn.isNativePlatform())try{const{SpeechRecognition:L}=await Xr(async()=>{const{SpeechRecognition:z}=await Promise.resolve().then(()=>Xw);return{SpeechRecognition:z}},void 0);await L.stop(),console.log("[VoiceMoveMaster] Clean slate: stopped lingering recognition")}catch{}})(),Ln.setOnRetryNeeded(()=>{B(!0)}),()=>{Ln.setOnRetryNeeded(null)}),[]);const Q=async()=>{B(!1),Ln.resetMicBusy();const fe=await Ln.start(L=>{var z;L.length>2&&((z=T.current)==null||z.call(T,L))},x);x(fe)},T=d.useRef(null),$=async()=>{o("playing"),u(0),m(0),y(0),p(60),N(null),B(!1);const fe=lh();l(fe),setTimeout(async()=>{await ut("Say the move.")},300)},W=()=>{D.current&&clearInterval(D.current),I.current&&clearTimeout(I.current),Kn.purge(),e()},Y=d.useCallback(fe=>{var ge,te;if(!a||s!=="playing")return;const L=fe.toLowerCase().trim();if(console.log("[VoiceMoveMaster] Processing:",L),L.includes("resign")||L.includes("quit")){S(!0),ut("Are you sure you want to resign? Say yes or no.");return}if(k){if(L.includes("yes")){w(!0),S(!1);return}else if(L.includes("no")){S(!1),ut("Okay, continue playing.");return}}if(L.includes("repeat")||L.includes("again")||L.includes("say again")){ut("Look at the highlighted squares on the board.");return}if(L.includes("time")||L.includes("clock")){ut(`${v} seconds remaining`);return}if(L.includes("material")){const ne=FM(a.chess);ut(ne);return}const z=L.match(/what'?s?\s+on\s+([a-h])\s*([1-8])/i);if(z){const ne=`${z[1]}${z[2]}`,Ne=a.chess.get(ne);if(Ne){const ae=Ne.color==="w"?"White":"Black",$e=sc[Ne.type];ut(`${ae} ${$e}`)}else ut("Empty");return}const J=L.match(/where\s+is\s+my\s+(\w+)/i);if(J){const ne=J[1].toLowerCase(),Ne=(ge=Object.entries(sc).find(([,ae])=>ae===ne))==null?void 0:ge[0];if(Ne){const ae=a.chess.turn(),$e=a.chess.board(),Me=[];for(let Ae=0;Ae<8;Ae++)for(let Ot=0;Ot<8;Ot++){const St=$e[Ae][Ot];St&&St.type===Ne&&St.color===ae&&Me.push(`${qc[Ot]}${dS[7-Ae]}`)}Me.length>0?ut(`Your ${ne} is on ${Me.slice(0,3).join(", ")}`):ut(`You don't have a ${ne}`)}return}if(L.includes("eval")||L.includes("evaluate")){const ne=BM(a.chess);ne>0?ut(`White is up ${ne} points`):ne<0?ut(`Black is up ${Math.abs(ne)} points`):ut("Position is equal");return}const ie=L.match(/legal\s+moves?\s+for\s+(\w+)/i);if(ie){const ne=ie[1].toLowerCase(),Ne=(te=Object.entries(sc).find(([,ae])=>ae===ne))==null?void 0:te[0];if(Ne){const ae=a.chess.moves({verbose:!0}).filter($e=>$e.piece===Ne).slice(0,4).map($e=>$e.san);ae.length>0?ut(`${ne} can play ${ae.join(", ")}`):ut(`No legal moves for ${ne}`)}return}if(VM(L,a.move)){I.current&&(clearTimeout(I.current),I.current=null),Qe.notification({type:Pi.Success}).catch(()=>{}),N({text:"Correct!",correct:!0});const ne=c+1,Ne=f+1;u(ne),m(Ne);const ae=Math.max(h,Ne);y(ae),ut("Correct!"),setTimeout(()=>{N(null);const $e=lh();l($e)},500)}else m(0),I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{Qe.notification({type:Pi.Error}).catch(()=>{}),N({text:"Try again",correct:!1}),setTimeout(()=>N(null),1e3)},1e3)},[a,s,c,f,h,v,k]);if(d.useEffect(()=>{T.current=Y},[Y]),d.useEffect(()=>(s==="playing"?Ln.start(fe=>{var L;fe.length>=2&&((L=T.current)==null||L.call(T,fe))},x).then(fe=>{x(fe)}):s==="ready"&&(Ln.stop(),x(!1),B(!1)),()=>{Kn.purge()}),[s]),d.useEffect(()=>(s==="playing"&&(D.current=setInterval(()=>{p(fe=>fe<=1?(o("finished"),0):fe-1)},1e3)),()=>{D.current&&clearInterval(D.current)}),[s]),d.useEffect(()=>{s==="finished"&&t(c,h)},[s,c,h,t]),d.useEffect(()=>{r==null||r(s)},[s,r]),s==="ready")return i.jsxs("div",{className:"flex flex-col h-full p-4 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(X,{variant:"ghost",size:"icon",onClick:q,"data-testid":"button-voicemaster-back",children:i.jsx(Ts,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Voice Move Master"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx(um,{className:"h-12 w-12 text-purple-500 mx-auto"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Ready?"}),i.jsx("p",{className:"text-muted-foreground",children:"Announce chess moves by voice!"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Say the highlighted move within 60 seconds"})]}),n!==null&&n.voiceMoveMasterBest!==null&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your best: ",i.jsxs("span",{className:"font-semibold text-purple-500",children:[n.voiceMoveMasterBest," moves"]})]}),i.jsx(X,{size:"lg",onClick:$,"data-testid":"button-start-voicemaster",children:"Start"})]})]});if(s==="finished")return i.jsxs("div",{className:"flex flex-col h-full p-4 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(X,{variant:"ghost",size:"icon",onClick:q,"data-testid":"button-voicemaster-back-finished",children:i.jsx(Ts,{className:"h-5 w-5"})}),i.jsx("h1",{className:"text-xl font-bold",children:"Voice Move Master"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6",children:[i.jsx(On,{className:`h-16 w-16 ${O?"text-purple-500":"text-muted-foreground"}`}),i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h2",{className:"text-4xl font-bold",children:c}),i.jsx("p",{className:"text-lg text-muted-foreground",children:"moves announced correctly"}),h>1&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Best streak: ",h]}),O&&i.jsx(Mt,{className:"bg-purple-500 text-white",children:"New Personal Best!"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(X,{variant:"outline",onClick:q,"data-testid":"button-voicemaster-menu",children:"Menu"}),i.jsx(X,{onClick:$,"data-testid":"button-voicemaster-retry",children:"Play Again"})]})]})]});const be=(a==null?void 0:a.chess.board())||[],Pe=(a==null?void 0:a.move.from)||"",_e=(a==null?void 0:a.move.to)||"";return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-col h-full p-4 max-w-md mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-2xl font-mono font-bold tabular-nums",children:v}),b&&!_&&i.jsx(on,{className:"h-5 w-5 text-red-500 animate-pulse"}),_&&i.jsx(eo,{className:"h-5 w-5 text-muted-foreground"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-lg font-semibold",children:c}),f>=3&&i.jsxs(Mt,{variant:"outline",className:"text-purple-500 border-purple-500",children:[f," streak"]})]})]}),_&&i.jsxs("div",{className:"mb-4 p-3 bg-amber-500/20 rounded-lg text-center",children:[i.jsx("p",{className:"text-sm text-amber-600 mb-2",children:"Microphone needs a fresh start"}),i.jsxs(X,{onClick:Q,size:"sm","data-testid":"button-voicemaster-retry-mic",children:[i.jsx(on,{className:"h-4 w-4 mr-2"}),"Tap to Retry"]})]}),C&&i.jsx("div",{className:`text-center py-2 mb-2 rounded ${C.correct?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:i.jsx("span",{className:"font-semibold",children:C.text})}),i.jsx("div",{className:"flex items-center justify-center mb-4",children:i.jsx("div",{className:"grid grid-cols-8 gap-0 aspect-square w-full max-w-sm border border-border rounded-md overflow-hidden",children:["8","7","6","5","4","3","2","1"].map((fe,L)=>qc.map((z,J)=>{var Me;const ie=`${z}${fe}`,ge=(J+L)%2===1,te=(Me=be[L])==null?void 0:Me[J],ne=ie===Pe,Ne=ie===_e;let ae=ge?"bg-amber-700":"bg-amber-100";ne?ae="bg-yellow-400":Ne&&(ae="bg-red-500");const $e={wk:"",wq:"",wr:"",wb:"",wn:"",wp:"",bk:"",bq:"",br:"",bb:"",bn:"",bp:""};return i.jsx("div",{className:`aspect-square ${ae} flex items-center justify-center text-2xl`,children:te&&$e[`${te.color}${te.type}`]},ie)}))})}),i.jsx("div",{className:"text-center mb-4",children:i.jsxs("p",{className:"text-lg",children:[F?"Say: ":"Type: ",i.jsx("span",{className:"font-bold text-purple-500",children:a==null?void 0:a.move.san})]})}),!F&&i.jsxs("form",{className:"flex gap-2 mb-4",onSubmit:fe=>{fe.preventDefault(),j.trim()&&(Y(j),R(""))},children:[i.jsx("input",{type:"text",value:j,onChange:fe=>R(fe.target.value),placeholder:"Type move here...",className:"flex-1 px-3 py-2 border rounded-md bg-background",autoFocus:!0,"data-testid":"input-voicemaster-text"}),i.jsx(X,{type:"submit","data-testid":"button-voicemaster-submit",children:"Submit"})]}),i.jsxs(X,{variant:"outline",onClick:()=>w(!0),className:"mx-auto mb-4","data-testid":"button-voicemaster-resign",children:[i.jsx(du,{className:"h-4 w-4 mr-2"}),"Resign"]}),i.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(JC,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm font-medium",children:F?"Voice Commands":"Commands"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:"repeat / again"}),i.jsx("span",{children:"time / clock"}),i.jsx("span",{children:"what's on [square]"}),i.jsx("span",{children:"where is my [piece]"}),i.jsx("span",{children:"material"}),i.jsx("span",{children:"evaluate"}),i.jsx("span",{children:"legal moves for [piece]"}),i.jsx("span",{children:"resign"})]})]})]}),i.jsx(Oi,{open:g,onOpenChange:w,children:i.jsxs(yo,{children:[i.jsxs(wo,{children:[i.jsx(So,{children:"Quit Game?"}),i.jsxs(ko,{children:["Your current score of ",c," will not be saved."]})]}),i.jsxs(bo,{children:[i.jsx(Co,{"data-testid":"button-voicemaster-resign-cancel",children:"Continue"}),i.jsx(No,{onClick:W,"data-testid":"button-voicemaster-resign-confirm",children:"Quit"})]})]})})]})}function FM(e){const t=e.board();let n=0,r=0;const s={p:1,n:3,b:3,r:5,q:9,k:0};for(const a of t)for(const l of a)if(l){const c=s[l.type];l.color==="w"?n+=c:r+=c}const o=n-r;return o>0?`White is up ${o} point${o!==1?"s":""}`:o<0?`Black is up ${Math.abs(o)} point${Math.abs(o)!==1?"s":""}`:"Material is equal"}function BM(e){const t=e.board();let n=0;const r={p:1,n:3,b:3,r:5,q:9,k:0};for(const s of t)for(const o of s)if(o){const a=r[o.type];n+=o.color==="w"?a:-a}return n}const zM=["to","takes","captures","moves","x","move"];function VM(e,t){let n=e.toLowerCase().replace(/[^a-z0-9\s]/g,"");const s=n.split(/\s+/).filter(p=>!zM.includes(p)),o=s.join(" "),a=n.replace(/\s+/g,"").match(/^([a-h])([1-8])$/);if(a&&t.piece==="p"){const p=a[1]+a[2];if(t.to===p)return!0}const l=o.replace(/\s+/g,"").match(/^([a-h])([1-8])$/);if(l&&t.piece==="p"){const p=l[1]+l[2];if(t.to===p)return!0}const c=t.san.toLowerCase().replace(/[+#x]/g,"");if(o.replace(/\s+/g,"").includes(c))return!0;const u=["knight","night","bishop","rook","queen","king","pawn"],f=sc[t.piece],m=s.some(p=>f==="pawn"&&!u.some(b=>b!=="pawn"&&o.includes(b))||o.includes(f)||f==="knight"&&o.includes("night")),h=t.to[0],y=t.to[1],v=o.includes(t.to)||o.includes(h)&&o.includes(y);return!!(m&&v)}function qM(){const[e,t]=d.useState(!1),[n,r]=d.useState(!1),[s,o]=d.useState(xa()),[a,l]=d.useState(0),[c,u]=d.useState("idle"),[f,m]=d.useState(!1),h=d.useRef(null),[y,v]=d.useState(!1),[p,b]=d.useState("menu"),x=d.useRef(null);d.useEffect(()=>{const C=()=>{o(xa())};return window.addEventListener("statsUpdated",C),()=>window.removeEventListener("statsUpdated",C)},[]);const g=()=>{l(C=>C+1)},w=()=>{if(y){if(p==="menu"||p==="ready"||p==="finished"){v(!1);return}m(!0);return}if(c==="idle"){r(!1),t(!1),window.dispatchEvent(new CustomEvent("closeAllDialogs"));return}if(c==="setup"){h.current&&h.current();return}m(!0)},k=()=>{if(m(!1),y){x.current&&x.current(),v(!1);return}h.current&&h.current()},S=()=>{if(y&&p==="playing")return"Quit this training game and return to title?";switch(c){case"in_game":return"Resign this game and return to title?";case"reconstruction":return"Leave this challenge and return to title?";case"analysis":return"Skip analysis and return to title?";default:return"Return to title?"}};return i.jsx(CE,{defaultTheme:"dark",children:i.jsxs(SE,{children:[i.jsxs("div",{className:"flex flex-col h-dvh bg-background",children:[i.jsxs("header",{className:"grid grid-cols-3 items-center p-3 border-b border-border pt-[var(--safe-area-top)]",children:[i.jsx("div",{className:"flex justify-start",children:i.jsxs(Ci,{open:n,onOpenChange:r,children:[i.jsx(Lc,{asChild:!0,children:i.jsx(X,{variant:"ghost",size:"icon","data-testid":"button-voice-help",children:i.jsx(on,{className:"h-5 w-5"})})}),i.jsxs(uo,{children:[i.jsx(fo,{children:i.jsx(ho,{children:"Voice Commands"})}),i.jsxs("div",{className:"space-y-4 text-sm max-h-[60vh] overflow-y-auto",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold",children:"Basic Moves"}),i.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"e4"'})," - Move pawn to e4"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"knight f3"'})," - Move knight to f3"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"bishop takes c6"'})," - Capture on c6"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"castle kingside"'})," - Castle short (O-O)"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"castle queenside"'})," - Castle long (O-O-O)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold",children:"When Two Pieces Can Move"}),i.jsx("p",{className:"text-muted-foreground",children:"If you have two pieces that can reach the same square, specify which one:"}),i.jsx("p",{className:"font-mono text-foreground",children:'"Rook F to D1"'})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold",children:"Query Commands"}),i.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"say again"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"repeat"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"again"'})," - Hear the last move"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"last move"'})," - Hear opponent's last move"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:`"what's on e4"`})," - Check what piece is on a square"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"where is my queen"'})," - Find your piece locations"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"how much time"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"clock"'})," - Hear remaining time"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"resign"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"quit"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"give up"'})," - Resign the game"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold",children:"Resign Confirmation"}),i.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"yes"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"confirm"'})," - Confirm resignation"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"no"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"cancel"'})," - Cancel resignation"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold",children:"Pro Commands"}),i.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"material"'})," - Hear material balance"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"legal moves for knight"'})," - List piece's legal moves"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"show board"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"peek"'})," - Show board for 5 seconds"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-mono text-foreground",children:'"evaluate"'})," / ",i.jsx("span",{className:"font-mono text-foreground",children:'"eval"'})," - Hear engine evaluation"]})]}),i.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:'Note: "show board" and "evaluate" mark the game as assisted'})]})]})]})]})}),i.jsx("button",{onClick:w,className:`text-lg font-bold text-center whitespace-nowrap cursor-pointer transition-colors bg-transparent border-none p-0 m-0 font-inherit text-inherit outline-none select-none ${c==="idle"?"cursor-default text-foreground":"text-foreground hover:text-primary"}`,style:{WebkitTapHighlightColor:"transparent",WebkitTouchCallout:"none"},"data-testid":"button-title-home",children:"Blindfold Chess"}),i.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[i.jsx(X,{variant:"ghost",size:"icon",onClick:g,"data-testid":"button-game-history",children:i.jsx(r2,{className:"h-5 w-5"})}),i.jsxs(Ci,{open:e,onOpenChange:t,children:[i.jsx(Lc,{asChild:!0,children:i.jsx(X,{variant:"ghost",size:"icon","data-testid":"button-stats",children:i.jsx(iy,{className:"h-5 w-5"})})}),i.jsxs(uo,{className:"max-w-lg max-h-[85vh] overflow-hidden",children:[i.jsx(fo,{children:i.jsx(ho,{children:"Training Metrics"})}),i.jsx(jR,{stats:s}),i.jsxs(X,{variant:"outline",size:"sm",className:"w-full text-muted-foreground mt-4",onClick:()=>{TP(),o(xa())},"data-testid":"button-reset-stats",children:[i.jsx(l2,{className:"mr-2 h-3 w-3"}),"Reset All Statistics"]})]})]})]})]}),i.jsx("main",{className:"flex-1 overflow-auto",children:y?i.jsx(IM,{onBack:()=>v(!1),onStateChange:b,returnToMenuRef:x}):i.jsx(AM,{historyTrigger:a,onStateChange:u,returnToTitleRef:h,onTrainNowClick:()=>v(!0)})}),i.jsxs("footer",{className:"grid grid-cols-3 items-center p-2 border-t border-border pb-[var(--safe-area-bottom)]",children:[i.jsx("div",{className:"flex justify-start",children:i.jsx(IP,{})}),i.jsx("div",{className:"flex justify-center",children:i.jsx(EE,{})}),i.jsx("div",{className:"flex justify-end",children:i.jsx(OP,{})})]})]}),i.jsx(Oi,{open:f,onOpenChange:m,children:i.jsxs(yo,{children:[i.jsxs(wo,{children:[i.jsx(So,{children:"Return to Title"}),i.jsx(ko,{children:S()})]}),i.jsxs(bo,{children:[i.jsx(Co,{"data-testid":"button-cancel-return",children:"Cancel"}),i.jsx(No,{onClick:k,"data-testid":"button-confirm-return",children:"Confirm"})]})]})}),i.jsx(Y2,{})]})})}Tx(document.getElementById("root")).render(i.jsx(qM,{}));export{Xe as I,Pi as N,Om as W};
