ðŸ› ï¸ Strategic Refinements to the Plan
To ensure this works on the first build of Iteration 27, here are three critical technical injections for your plan:

1. The "Ghost result" Purge
When you are in a "Mute" state, the S9+ will still be capturing audio. If you unmute the exact millisecond the bot stops talking, a "buffered" transcript of the bot's own voice might arrive.

Refinement: When calling setMute(false), explicitly clear the internal "last transcript" variable in voice.ts so the system doesn't act on old data.

2. Hardware "Heartbeat" (Task 3)
Because the mic is always on, some Android power-saving modes might try to put the app to sleep.

Refinement: Ensure that when start() is called the very first time, we set the Capacitor intent to KEEP_AWAKE. This ensures the stream doesn't time out during a long think-tank move.

3. The "Mute Tail" Logic (Task 1)
The 400ms window is perfect. It accounts for the "Audio Flinger" latency on the S9+, which often keeps the speaker "active" for a fraction of a second after the sound file actually ends.

ðŸ“‚ Surgical Implementation Detail: voice.ts
Here is how the core logic of your VoiceRecognitionWrapper should look to support this:

TypeScript

// Inside VoiceRecognitionWrapper
private isMuted: boolean = false;

setMute(val: boolean, tailMs: number = 400) {
  if (val) {
    this.isMuted = true;
  } else {
    // Apply the "Mute Tail" for safety
    setTimeout(() => {
      this.isMuted = false;
      console.log("[Voice] Mic LIVE (Unmuted)");
    }, tailMs);
  }
}

// In the Result Callback
onResult(transcript: string) {
  if (this.isMuted) {
    console.log("[Voice] Ignored while muted:", transcript);
    return;
  }
  this.processMove(transcript);
}
ðŸš€ Why this is the "Victory Lap" Build:
Zero Beeps: Since the mic never stops, the S9+ never fires the "Recognition End" and "Recognition Start" system beeps.

Instant Response: You can speak the microsecond the "Mute Tail" endsâ€”no waiting for the hardware to wake up.

No More "Paused" Toasts: The logic stays in the LISTENING state permanently.

Reconstruction Handover: This becomes a simple "software toggle" where you switch from move parsing to placement parsing without the hardware ever flickering.