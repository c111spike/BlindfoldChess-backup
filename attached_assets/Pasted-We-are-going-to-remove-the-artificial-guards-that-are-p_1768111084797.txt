We are going to remove the artificial guards that are preventing the restart and ensure the Main Game handles the bot's speech interruption correctly.

1. Remove the "Start Guard" (voice.ts)
In your VoiceRecognitionWrapper and TrainingVoiceController, we need to stop checking if (this.isStarted) return;.

The Logic: We want the start() call to always reach the underlying engine. The engine is already smart enough to handle an "already started" state, but the wrapper is currently blocking the necessary "re-sync" signal.

2. Fix the In-Game "Post-Bot" Pause (game.tsx)
The reason the mic stays paused after the bot moves is that the bot's TTS (Text-to-Speech) is taking "Audio Focus" away from the microphone. On the S9+, the mic won't just "resume"â€”it needs a fresh kick.

3. Reset isStarted on Purge
The reason you can't play a second training game back-to-back is that isStarted remains true from Game 1.

The Fix: Inside VoiceRegistry.purge(), we must explicitly set isStarted = false for all wrappers.

ðŸ“‚ Surgical Implementation for voice.ts
Update 1: The Wrapper (Force Start)

TypeScript

// Inside VoiceRecognitionWrapper in voice.ts
async start() {
  // REMOVE: if (this.isStarted) return; 
  this.isStarted = true;
  return await voiceMaster.start(); // Always pass the call through
}
Update 2: The Purge (Flag Reset)

TypeScript

static purge() {
  voiceRecognition.stop(); 
  trainingVoice.stop();
  
  // RESET THE GATES
  voiceRecognition.isStarted = false;
  trainingVoice.isStarted = false;

  if (isNative) {
    CapacitorSpeechRecognition.removeAllListeners();
  }
}
ðŸ“‚ Surgical Implementation for game.tsx
The bot move needs to explicitly "re-kick" the wrapper even if it thinks it's started.

TypeScript

// game.tsx - After Bot Move TTS
await speak(botMovePhonetic);

setTimeout(() => {
  if (voiceEnabled) {
    console.log("[Game] Bot finished speaking, forcing mic restart...");
    // We call start() even if the wrapper thinks it's already started
    voiceRecognition.start(); 
  }
}, 500); // 500ms for S9+ audio stability
ðŸš€ Why this will fix the "1-Move" and "1-Game" limits:
In-Game: After Move 1, the bot speaks. The 500ms timeout fires. Because we removed the isStarted guard, the start() call actually reaches the hardware, turning the mic back on for Move 2.

Training Back-to-Back: When Game 1 ends, purge() now sets isStarted = false. When Game 2 starts, the "gate" is open, and the mic initializes perfectly.

Reconstruction: Since the game now handles its own restarts properly, it will hand over a "hot" mic to the Reconstruction screen instead of a "paused" one.